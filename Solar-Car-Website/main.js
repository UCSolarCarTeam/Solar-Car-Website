(self.webpackChunkSolar_Car_Website=self.webpackChunkSolar_Car_Website||[]).push([[179],{440:(Rt,Ue,F)=>{"use strict";F.d(Ue,{nm:()=>Jr});var E=F(5813);F(4650),F(5867);var $e=F(5861),Ie=F(9681),ke=F(4859),ot=F(2090),It=F(1877);const ne=new Map,Qe={activated:!1,tokenObservers:[]},ce={initialized:!1,enabled:!1};function Me(Pe){return ne.get(Pe)||Qe}function Ve(Pe,xe){ne.set(Pe,xe)}function Oe(){return ce}class Rn{constructor(xe,He,at,bt,Vt){if(this.operation=xe,this.retryPolicy=He,this.getWaitDuration=at,this.lowerBound=bt,this.upperBound=Vt,this.pending=null,this.nextErrorWaitInterval=bt,bt>Vt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(xe){var He=this;return(0,$e.Z)(function*(){He.stop();try{He.pending=new ot.BH,yield function rn(Pe){return new Promise(xe=>{setTimeout(xe,Pe)})}(He.getNextRun(xe)),He.pending.resolve(),yield He.pending.promise,He.pending=new ot.BH,yield He.operation(),He.pending.resolve(),yield He.pending.promise,He.process(!0).catch(()=>{})}catch(at){He.retryPolicy(at)?He.process(!1).catch(()=>{}):He.stop()}})()}getNextRun(xe){if(xe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const He=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),He}}}const Mt=new ot.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function In(Pe){if(!Me(Pe).activated)throw Mt.create("use-before-activation",{appName:Pe.name})}function zn(Pe,xe){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,$e.Z)(function*({url:Pe,body:xe},He){var at,bt;const Vt={"Content-Type":"application/json"},En=He.getImmediate({optional:!0});if(En){const Xi=yield En.getHeartbeatsHeader();Xi&&(Vt["X-Firebase-Client"]=Xi)}const ai={method:"POST",body:JSON.stringify(xe),headers:Vt};let _r,Bi;try{_r=yield fetch(Pe,ai)}catch(Xi){throw Mt.create("fetch-network-error",{originalErrorMessage:null===(at=Xi)||void 0===at?void 0:at.message})}if(200!==_r.status)throw Mt.create("fetch-status-error",{httpStatus:_r.status});try{Bi=yield _r.json()}catch(Xi){throw Mt.create("fetch-parse-error",{originalErrorMessage:null===(bt=Xi)||void 0===bt?void 0:bt.message})}const Vi=Bi.ttl.match(/^([\d.]+)(s)$/);if(!Vi||!Vi[2]||isNaN(Number(Vi[1])))throw Mt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Bi.ttl}`});const Us=1e3*Number(Vi[1]),Qi=Date.now();return{token:Bi.token,expireTimeMillis:Qi+Us,issuedAtTimeMillis:Qi}})).apply(this,arguments)}function jr(Pe,xe){const{projectId:He,appId:at,apiKey:bt}=Pe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${He}/apps/${at}:exchangeDebugToken?key=${bt}`,body:{debug_token:xe}}}const Wn="firebase-app-check-store";let Gr=null;function hi(){return Gr||(Gr=new Promise((Pe,xe)=>{var He;try{const at=indexedDB.open("firebase-app-check-database",1);at.onsuccess=bt=>{Pe(bt.target.result)},at.onerror=bt=>{var Vt;xe(Mt.create("storage-open",{originalErrorMessage:null===(Vt=bt.target.error)||void 0===Vt?void 0:Vt.message}))},at.onupgradeneeded=bt=>{0===bt.oldVersion&&bt.target.result.createObjectStore(Wn,{keyPath:"compositeKey"})}}catch(at){xe(Mt.create("storage-open",{originalErrorMessage:null===(He=at)||void 0===He?void 0:He.message}))}}),Gr)}function ir(){return(ir=(0,$e.Z)(function*(Pe,xe){const at=(yield hi()).transaction(Wn,"readwrite"),Vt=at.objectStore(Wn).put({compositeKey:Pe,value:xe});return new Promise((En,ai)=>{Vt.onsuccess=_r=>{En()},at.onerror=_r=>{var Bi;ai(Mt.create("storage-set",{originalErrorMessage:null===(Bi=_r.target.error)||void 0===Bi?void 0:Bi.message}))}})})).apply(this,arguments)}const Wt=new It.Yd("@firebase/app-check");function un(Pe,xe){return(0,ot.hl)()?function ri(Pe,xe){return function Nr(Pe,xe){return ir.apply(this,arguments)}(function bn(Pe){return`${Pe.options.appId}-${Pe.name}`}(Pe),xe)}(Pe,xe).catch(He=>{Wt.warn(`Failed to write token to IndexedDB. Error: ${He}`)}):Promise.resolve()}function fi(){return Oe().enabled}function Gn(){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,$e.Z)(function*(){const Pe=Oe();if(Pe.enabled&&Pe.token)return Pe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const kt={error:"UNKNOWN_ERROR"};function ut(Pe){return ot.US.encodeString(JSON.stringify(Pe),!1)}function $t(Pe){return ln.apply(this,arguments)}function ln(){return(ln=(0,$e.Z)(function*(Pe,xe=!1){const He=Pe.app;In(He);const at=Me(He);let Vt,bt=at.token;if(bt&&!je(bt)&&(Ve(He,Object.assign(Object.assign({},at),{token:void 0})),bt=void 0),!bt){const _r=yield at.cachedTokenPromise;_r&&(je(_r)?bt=_r:yield un(He,void 0))}if(!xe&&bt&&je(bt))return{token:bt.token};let ai,En=!1;if(fi()){at.exchangeTokenPromise||(at.exchangeTokenPromise=zn(jr(He,yield Gn()),Pe.heartbeatServiceProvider).finally(()=>{at.exchangeTokenPromise=void 0}),En=!0);const _r=yield at.exchangeTokenPromise;return yield un(He,_r),Ve(He,Object.assign(Object.assign({},at),{token:_r})),{token:_r.token}}try{at.exchangeTokenPromise||(at.exchangeTokenPromise=at.provider.getToken().finally(()=>{at.exchangeTokenPromise=void 0}),En=!0),bt=yield at.exchangeTokenPromise}catch(_r){"appCheck/throttled"===_r.code?Wt.warn(_r.message):Wt.error(_r),Vt=_r}return bt?Vt?ai=je(bt)?{token:bt.token,internalError:Vt}:Dt(Vt):(ai={token:bt.token},Ve(He,Object.assign(Object.assign({},at),{token:bt})),yield un(He,bt)):ai=Dt(Vt),En&&nt(He,ai),ai})).apply(this,arguments)}function oe(Pe,xe){const He=Me(Pe),at=He.tokenObservers.filter(bt=>bt.next!==xe);0===at.length&&He.tokenRefresher&&He.tokenRefresher.isRunning()&&He.tokenRefresher.stop(),Ve(Pe,Object.assign(Object.assign({},He),{tokenObservers:at}))}function ye(Pe){const{app:xe}=Pe,He=Me(xe);let at=He.tokenRefresher;at||(at=function Ce(Pe){const{app:xe}=Pe;return new Rn((0,$e.Z)(function*(){let at;if(at=Me(xe).token?yield $t(Pe,!0):yield $t(Pe),at.error)throw at.error;if(at.internalError)throw at.internalError}),()=>!0,()=>{const He=Me(xe);if(He.token){let at=He.token.issuedAtTimeMillis+.5*(He.token.expireTimeMillis-He.token.issuedAtTimeMillis)+3e5;return at=Math.min(at,He.token.expireTimeMillis-3e5),Math.max(0,at-Date.now())}return 0},3e4,96e4)}(Pe),Ve(xe,Object.assign(Object.assign({},He),{tokenRefresher:at}))),!at.isRunning()&&He.isTokenAutoRefreshEnabled&&at.start()}function nt(Pe,xe){const He=Me(Pe).tokenObservers;for(const at of He)try{"EXTERNAL"===at.type&&null!=xe.error?at.error(xe.error):at.next(xe)}catch{}}function je(Pe){return Pe.expireTimeMillis-Date.now()>0}function Dt(Pe){return{token:ut(kt),error:Pe}}class Gt{constructor(xe,He){this.app=xe,this.heartbeatServiceProvider=He}_delete(){const{tokenObservers:xe}=Me(this.app);for(const He of xe)oe(this.app,He.next);return Promise.resolve()}}const Ds="app-check-internal";!function bs(){(0,Ie._registerComponent)(new ke.wA("app-check",Pe=>function An(Pe,xe){return new Gt(Pe,xe)}(Pe.getProvider("app").getImmediate(),Pe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Pe,xe,He)=>{Pe.getProvider(Ds).initialize()})),(0,Ie._registerComponent)(new ke.wA(Ds,Pe=>function dr(Pe){return{getToken:xe=>$t(Pe,xe),addTokenListener:xe=>function Jt(Pe,xe,He,at){const{app:bt}=Pe,Vt=Me(bt),En={next:He,error:at,type:xe};if(Ve(bt,Object.assign(Object.assign({},Vt),{tokenObservers:[...Vt.tokenObservers,En]})),Vt.token&&je(Vt.token)){const ai=Vt.token;Promise.resolve().then(()=>{He({token:ai.token}),ye(Pe)}).catch(()=>{})}Vt.cachedTokenPromise.then(()=>ye(Pe))}(Pe,"INTERNAL",xe),removeTokenListener:xe=>oe(Pe.app,xe)}}(Pe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ie.registerVersion)("@firebase/app-check","0.5.13")}();class Jr{constructor(){return(0,E.vb)("app-check")}}typeof window<"u"&&window},3385:(Rt,Ue,F)=>{"use strict";F.d(Ue,{zQ:()=>Me,ww:()=>Ve,rT:()=>It,f7:()=>Qe,L6:()=>ke,_Q:()=>ot,lh:()=>ne,Qv:()=>Ie,nw:()=>ce});var E=F(4650),z=F(7579),G=F(9646),me=F(9751),_e=F(8996),ve=F(6451),be=F(5363),pe=F(3900),Te=F(4004),se=F(4782),le=F(590),we=F(576);function it(Oe,gt){return(0,we.m)(gt)?(0,pe.w)(()=>Oe,gt):(0,pe.w)(()=>Oe)}var Xe=F(9468),Ge=F(9300),ct=F(5813),ze=F(2011),Ke=F(6895),De=F(440),Ot=F(127);const Ie=new E.OlP("angularfire2.auth.use-emulator"),ke=new E.OlP("angularfire2.auth.settings"),ot=new E.OlP("angularfire2.auth.tenant-id"),It=new E.OlP("angularfire2.auth.langugage-code"),ne=new E.OlP("angularfire2.auth.use-device-language"),Qe=new E.OlP("angularfire.auth.persistence"),ce=(Oe,gt,mt,Yt,On,pn,Et,Rn)=>(0,ze.cc)(`${Oe.name}.auth`,"AngularFireAuth",Oe.name,()=>{const rn=gt.runOutsideAngular(()=>Oe.auth());if(mt&&rn.useEmulator(...mt),Yt&&(rn.tenantId=Yt),rn.languageCode=On,pn&&rn.useDeviceLanguage(),Et)for(const[en,Mt]of Object.entries(Et))rn.settings[en]=Mt;return Rn&&rn.setPersistence(Rn),rn},[mt,Yt,On,pn,Et,Rn]);let Me=(()=>{class Oe{constructor(mt,Yt,On,pn,Et,Rn,rn,en,Mt,Sr,In,Dn){const Ai=new z.x,zn=(0,G.of)(void 0).pipe((0,be.Q)(Et.outsideAngular),(0,pe.w)(()=>pn.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,3704)))),(0,Te.U)(()=>(0,ze.on)(mt,pn,Yt)),(0,Te.U)(Yn=>ce(Yn,pn,Rn,en,Mt,Sr,rn,In)),(0,se.d)({bufferSize:1,refCount:!1}));if((0,Ke.PM)(On))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{zn.pipe((0,le.P)()).subscribe();const br=zn.pipe((0,pe.w)(xn=>xn.getRedirectResult().then(_n=>_n,()=>null)),ct.iC,(0,se.d)({bufferSize:1,refCount:!1})),mr=zn.pipe((0,pe.w)(xn=>new me.y(_n=>({unsubscribe:pn.runOutsideAngular(()=>xn.onAuthStateChanged(Wn=>_n.next(Wn),Wn=>_n.error(Wn),()=>_n.complete()))})))),jr=zn.pipe((0,pe.w)(xn=>new me.y(_n=>({unsubscribe:pn.runOutsideAngular(()=>xn.onIdTokenChanged(Wn=>_n.next(Wn),Wn=>_n.error(Wn),()=>_n.complete()))}))));this.authState=br.pipe(it(mr),(0,Xe.R)(Et.outsideAngular),(0,be.Q)(Et.insideAngular)),this.user=br.pipe(it(jr),(0,Xe.R)(Et.outsideAngular),(0,be.Q)(Et.insideAngular)),this.idToken=this.user.pipe((0,pe.w)(xn=>xn?(0,_e.D)(xn.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,pe.w)(xn=>xn?(0,_e.D)(xn.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,ve.T)(br,Ai,this.authState.pipe((0,Ge.h)(xn=>!xn))).pipe((0,Te.U)(xn=>xn?.user?xn:null),(0,Xe.R)(Et.outsideAngular),(0,be.Q)(Et.insideAngular))}return(0,ze.pX)(this,zn,pn,{spy:{apply:(Yn,br,mr)=>{(Yn.startsWith("signIn")||Yn.startsWith("createUser"))&&mr.then(jr=>Ai.next(jr))}}})}}return Oe.\u0275fac=function(mt){return new(mt||Oe)(E.LFG(ze.Dh),E.LFG(ze.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(ct.HU),E.LFG(Ie,8),E.LFG(ke,8),E.LFG(ot,8),E.LFG(It,8),E.LFG(ne,8),E.LFG(Qe,8),E.LFG(De.nm,8))},Oe.\u0275prov=E.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"any"}),Oe})(),Ve=(()=>{class Oe{constructor(){Ot.Z.registerVersion("angularfire",ct.q4.full,"auth-compat")}}return Oe.\u0275fac=function(mt){return new(mt||Oe)},Oe.\u0275mod=E.oAB({type:Oe}),Oe.\u0275inj=E.cJS({providers:[Me]}),Oe})()},7407:(Rt,Ue,F)=>{"use strict";F.d(Ue,{ST:()=>Ng,yb:()=>Vy,L6:()=>rh});var E=F(4650),z=F(4986),G=F(9751),me=F(8996),_e=F(9646),ve=F(5813),be=F(8675),pe=F(4482),Te=F(5403);function se(){return(0,pe.e)((i,e)=>{let t,o=!1;i.subscribe((0,Te.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var ne,le=F(4004),we=F(5026),it=F(1884),Xe=F(9300),Ge=F(2011),ct=F(6895),Ke=(F(3704),F(3942)),De=F(5861),Ot=F(9681),$e=F(4859),Ie=F(1877),ke=F(2090),ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},It={},Qe=Qe||{},ce=ot||self;function Me(){}function Ve(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Oe(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var mt="closure_uid_"+(1e9*Math.random()>>>0),Yt=0;function On(i,e,t){return i.call.apply(i.bind,arguments)}function pn(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Et(i,e,t){return(Et=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?On:pn).apply(null,arguments)}function Rn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function rn(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var g=Array(arguments.length-2),T=2;T<arguments.length;T++)g[T-2]=arguments[T];return e.prototype[u].apply(o,g)}}function en(){this.s=this.s,this.o=this.o}var Sr={};en.prototype.s=!1,en.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function gt(i){return Object.prototype.hasOwnProperty.call(i,mt)&&i[mt]||(i[mt]=++Yt)}(this);delete Sr[i]}},en.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const In=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Dn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Ai(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(Ve(o)){const u=i.length||0,d=o.length||0;i.length=u+d;for(let g=0;g<d;g++)i[u+g]=o[g]}else i.push(o)}}function zn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}zn.prototype.h=function(){this.defaultPrevented=!0};var Yn=function(){if(!ce.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ce.addEventListener("test",Me,e),ce.removeEventListener("test",Me,e)}catch{}return i}();function br(i){return/^[\s\xa0]*$/.test(i)}var mr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function jr(i,e){return i<e?-1:i>e?1:0}function xn(){var i=ce.navigator;return i&&(i=i.userAgent)?i:""}function _n(i){return-1!=xn().indexOf(i)}function Wn(i){return Wn[" "](i),i}Wn[" "]=Me;var ir,i,Gr=_n("Opera"),hi=_n("Trident")||_n("MSIE"),Tr=_n("Edge"),ri=Tr||hi,qi=_n("Gecko")&&!(-1!=xn().toLowerCase().indexOf("webkit")&&!_n("Edge"))&&!(_n("Trident")||_n("MSIE"))&&!_n("Edge"),Lr=-1!=xn().toLowerCase().indexOf("webkit")&&!_n("Edge");function Nr(){var i=ce.document;return i?i.documentMode:void 0}e:{var Xt="",zt=(i=xn(),qi?/rv:([^\);]+)(\)|;)/.exec(i):Tr?/Edge\/([\d\.]+)/.exec(i):hi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Lr?/WebKit\/(\S+)/.exec(i):Gr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(zt&&(Xt=zt?zt[1]:""),hi){var bn=Nr();if(null!=bn&&bn>parseFloat(Xt)){ir=String(bn);break e}}ir=Xt}var Wt={};var bi=ce.document&&hi&&(Nr()||parseInt(ir,10))||void 0;function Ln(i,e){if(zn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(qi){e:{try{Wn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:fi[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Ln.X.h.call(this)}}rn(Ln,zn);var fi={2:"touch",3:"pen",4:"mouse"};Ln.prototype.h=function(){Ln.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Gn="closure_listenable_"+(1e6*Math.random()|0),Mr=0;function cr(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=u,this.key=++Mr,this.ba=this.ea=!1}function kt(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function ut(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function $t(i){const e={};for(const t in i)e[t]=i[t];return e}const ln="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jt(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<ln.length;d++)t=ln[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function oe(i){this.src=i,this.g={},this.h=0}function ye(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=In(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(kt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Ce(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ba&&d.listener==e&&d.capture==!!t&&d.ha==o)return u}return-1}oe.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var g=Ce(i,e,o,u);return-1<g?(e=i[g],t||(e.ea=!1)):((e=new cr(e,this.src,d,!!o,u)).ea=t,i.push(e)),e};var nt="closure_lm_"+(1e6*Math.random()|0),je={};function Dt(i,e,t,o,u){if(o&&o.once)return dr(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Dt(i,e[d],t,o,u);return null}return t=st(t),i&&i[Gn]?i.N(e,t,Oe(o)?!!o.capture:!!o,u):Gt(i,e,t,!1,o,u)}function Gt(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var g=Oe(u)?!!u.capture:!!u,T=ee(i);if(T||(i[nt]=T=new oe(i)),(t=T.add(e,t,o,g,d)).proxy)return t;if(o=function An(){const e=ae;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Yn||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(ie(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function dr(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)dr(i,e[d],t,o,u);return null}return t=st(t),i&&i[Gn]?i.O(e,t,Oe(o)?!!o.capture:!!o,u):Gt(i,e,t,!0,o,u)}function sr(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)sr(i,e[d],t,o,u);else o=Oe(o)?!!o.capture:!!o,t=st(t),i&&i[Gn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Ce(d=i.g[e],t,o,u))&&(kt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=ee(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ce(e,t,o,u)),(t=-1<i?e[i]:null)&&nr(t))}function nr(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Gn])ye(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(ie(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=ee(e))?(ye(t,i),0==t.h&&(t.src=null,e[nt]=null)):kt(i)}}}function ie(i){return i in je?je[i]:je[i]="on"+i}function ae(i,e){if(i.ba)i=!0;else{e=new Ln(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&nr(i),i=t.call(o,e)}return i}function ee(i){return(i=i[nt])instanceof oe?i:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function st(i){return"function"==typeof i?i:(i[Re]||(i[Re]=function(e){return i.handleEvent(e)}),i[Re])}function xt(){en.call(this),this.i=new oe(this),this.P=this,this.I=null}function tn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new zn(e,i);else if(e instanceof zn)e.target=e.target||i;else{var u=e;Jt(e=new zn(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];u=Tn(g,o,!0,e)&&u}if(u=Tn(g=e.g=i,o,!0,e)&&u,u=Tn(g,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=Tn(g=e.g=t[d],o,!1,e)&&u}function Tn(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.ba&&g.capture==t){var T=g.listener,L=g.ha||g.src;g.ea&&ye(i.i,g),u=!1!==T.call(L,o)&&u}}return u&&!o.defaultPrevented}rn(xt,en),xt.prototype[Gn]=!0,xt.prototype.removeEventListener=function(i,e,t,o){sr(this,i,e,t,o)},xt.prototype.M=function(){if(xt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)kt(t[o]);delete i.g[e],i.h--}}this.I=null},xt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},xt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Kn=ce.JSON.stringify;function Ti(){var i=Qr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Cr,rr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new hs,i=>i.reset());class hs{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Hs(i){ce.setTimeout(()=>{throw i},0)}function Ni(i,e){Cr||function Fs(){var i=ce.Promise.resolve(void 0);Cr=function(){i.then(Xr)}}(),Mi||(Cr(),Mi=!0),Qr.add(i,e)}var Mi=!1,Qr=new class vn{constructor(){this.h=this.g=null}add(e,t){const o=rr.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Xr(){for(var i;i=Ti();){try{i.h.call(i.g)}catch(t){Hs(t)}var e=rr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Mi=!1}function Zi(i,e){xt.call(this),this.h=i||1,this.g=e||ce,this.j=Et(this.kb,this),this.l=Date.now()}function Qn(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function fs(i,e,t){if("function"==typeof i)t&&(i=Et(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Et(i.handleEvent,i)}return 2147483647<Number(e)?-1:ce.setTimeout(i,e||0)}function Ds(i){i.g=fs(()=>{i.g=null,i.i&&(i.i=!1,Ds(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}rn(Zi,xt),(ne=Zi.prototype).ca=!1,ne.R=null,ne.kb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),tn(this,"tick"),this.ca&&(Qn(this),this.start()))}},ne.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ne.M=function(){Zi.X.M.call(this),Qn(this),delete this.g};class bs extends en{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ds(this)}M(){super.M(),this.g&&(ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(i){en.call(this),this.h=i,this.g={}}rn(Rr,en);var Si=[];function Jr(i,e,t,o){Array.isArray(t)||(t&&(Si[0]=t.toString()),t=Si);for(var u=0;u<t.length;u++){var d=Dt(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function ii(i){ut(i.g,function(e,t){this.g.hasOwnProperty(t)&&nr(e)},i),i.g={}}function yr(){this.g=!0}function Ir(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ui(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<u.length;g++)u[g]=""}}}return Kn(t)}catch{return e}}(i,t)+(o?" "+o:"")})}Rr.prototype.M=function(){Rr.X.M.call(this),ii(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yr.prototype.Aa=function(){this.g=!1},yr.prototype.info=function(){};var Yi={},pi=null;function Ts(){return pi=pi||new xt}function Ss(i){zn.call(this,Yi.Oa,i)}function co(i){const e=Ts();tn(e,new Ss(e,i))}function To(i,e){zn.call(this,Yi.STAT_EVENT,i),this.stat=e}function gi(i){const e=Ts();tn(e,new To(e,i))}function oi(i,e){zn.call(this,Yi.Pa,i),this.size=e}function Pe(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ce.setTimeout(function(){i()},e)}Yi.Oa="serverreachability",rn(Ss,zn),Yi.STAT_EVENT="statevent",rn(To,zn),Yi.Pa="timingevent",rn(oi,zn);var xe={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},He={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function at(){}function Vt(){}at.prototype.h=null;var Bi,En={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function ai(){zn.call(this,"d")}function _r(){zn.call(this,"c")}function Vi(){}function Us(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new Rr(this),this.O=Xi,this.T=new Zi(i=ri?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Qi}function Qi(){this.i=null,this.g="",this.h=!1}rn(ai,zn),rn(_r,zn),rn(Vi,at),Vi.prototype.g=function(){return new XMLHttpRequest},Vi.prototype.i=function(){return{}},Bi=new Vi;var Xi=45e3,Gs={},Cs={};function So(i,e,t){i.K=1,i.v=ei(ms(e)),i.s=t,i.P=!0,$i(i,null)}function $i(i,e){i.F=Date.now(),zs(i),i.A=ms(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Ao(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Qi,i.g=gn(i.l,t?e:null,!i.s),0<i.N&&(i.L=new bs(Et(i.Ka,i,i.g),i.N)),Jr(i.S,i.g,"readystatechange",i.hb),e=i.H?$t(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),co(1),function to(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var g="",T=d.split("&"),L=0;L<T.length;L++){var H=T[L].split("=");if(1<H.length){var J=H[0];H=H[1];var Ee=J.split("_");g=2<=Ee.length&&"type"==Ee[1]?g+(J+"=")+H+"&":g+(J+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+g})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Ji(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function ps(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=As(i,t),u==Cs){4==e&&(i.o=4,gi(14),o=!1),Ir(i.j,i.m,null,"[Incomplete Response]");break}if(u==Gs){i.o=4,gi(15),Ir(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Ir(i.j,i.m,u,null),es(i,u)}Ji(i)&&u!=Cs&&u!=Gs&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,gi(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),he(e),e.K=!0,gi(11))):(Ir(i.j,i.m,t,"[Invalid Chunked Response]"),us(i),ho(i))}function As(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Cs:(t=Number(e.substring(t,o)),isNaN(t)?Gs:(o+=1)+t>e.length?Cs:(e=e.substr(o,t),i.C=o+t,e))}function zs(i){i.V=Date.now()+i.O,Ho(i,i.O)}function Ho(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Pe(Et(i.fb,i),e)}function Bs(i){i.B&&(ce.clearTimeout(i.B),i.B=null)}function ho(i){0==i.l.G||i.I||Je(i.l,i)}function us(i){Bs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Qn(i.T),ii(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function es(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Hn(t.h,i)))if(!i.J&&Hn(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Le(t),$(t)}Q(t),gi(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=Pe(Et(t.bb,t),6e3));if(1>=ht(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else jt(t,11)}else if((i.J||t.g==i)&&Le(t),!br(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let H=u[e];if(t.T=H[0],H=H[1],2==t.G)if("c"==H[0]){t.I=H[1],t.ka=H[2];const J=H[3];null!=J&&(t.ma=J,t.j.info("VER="+t.ma));const Ee=H[4];null!=Ee&&(t.Ca=Ee,t.j.info("SVER="+t.Ca));const We=H[5];null!=We&&"number"==typeof We&&0<We&&(t.J=o=1.5*We,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const ft=i.g;if(ft){const _t=ft.g?ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_t){var d=o.h;d.g||-1==_t.indexOf("spdy")&&-1==_t.indexOf("quic")&&-1==_t.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(mo(d,d.h),d.h=null))}if(o.D){const qt=ft.g?ft.g.getResponseHeader("X-HTTP-Session-Id"):null;qt&&(o.za=qt,Xn(o.F,o.D,qt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var g=i;if((o=t).sa=Nn(o,o.H?o.ka:null,o.V),g.J){yo(o.h,g);var T=g,L=o.J;L&&T.setTimeout(L),T.B&&(Bs(T),zs(T)),o.g=g}else j(o);0<t.i.length&&W(t)}else"stop"!=H[0]&&"close"!=H[0]||jt(t,7);else 3==t.G&&("stop"==H[0]||"close"==H[0]?"stop"==H[0]?jt(t,7):A(t):"noop"!=H[0]&&t.l&&t.l.wa(H),t.A=0)}co(4)}catch{}}function gs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ve(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function Oi(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Ve(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function ts(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Ve(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length,d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}(ne=Us.prototype).setTimeout=function(i){this.O=i},ne.hb=function(i){i=i.target;const e=this.L;e&&3==Ei(i)?e.l():this.Ka(i)},ne.Ka=function(i){try{if(i==this.g)e:{const J=Ei(this.g);var e=this.g.Ea();const Ee=this.g.aa();if(!(3>J)&&(3!=J||ri||this.g&&(this.h.h||this.g.fa()||Vs(this.g)))){this.I||4!=J||7==e||co(8==e||0>=Ee?3:2),Bs(this);var t=this.g.aa();this.Y=t;t:if(Ji(this)){var o=Vs(this.g);i="";var u=o.length,d=4==Ei(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){us(this),ho(this);var g="";break t}this.h.i=new ce.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.fa();if(this.i=200==t,function si(i,e,t,o,u,d,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.U,J,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var T,L=this.g;if((T=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!br(T)){var H=T;break t}}H=null}if(!(t=H)){this.i=!1,this.o=3,gi(12),us(this),ho(this);break e}Ir(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,es(this,t)}this.P?(ps(this,J,g),ri&&this.i&&3==J&&(Jr(this.S,this.T,"tick",this.gb),this.T.start())):(Ir(this.j,this.m,g,null),es(this,g)),4==J&&us(this),this.i&&!this.I&&(4==J?Je(this.l,this):(this.i=!1,zs(this)))}else 400==t&&0<g.indexOf("Unknown SID")?(this.o=3,gi(12)):(this.o=0,gi(13)),us(this),ho(this)}}}catch{}},ne.gb=function(){if(this.g){var i=Ei(this.g),e=this.g.fa();this.C<e.length&&(Bs(this),ps(this,i,e),this.i&&4!=i&&zs(this))}},ne.cancel=function(){this.I=!0,us(this)},ne.fb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function no(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(co(3),gi(17)),us(this),this.o=2,ho(this)):Ho(this,this.V-i)};var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fo(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof fo){this.h=void 0!==e?e:i.h,Fr(this,i.j),this.s=i.s,this.g=i.g,vi(this,i.m),this.l=i.l,e=i.i;var t=new is;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Xo(this,t),this.o=i.o}else i&&(t=String(i).match(Ws))?(this.h=!!e,Fr(this,t[1]||"",!0),this.s=Ks(t[2]||""),this.g=Ks(t[3]||"",!0),vi(this,t[4]),this.l=Ks(t[5]||"",!0),Xo(this,t[6]||"",!0),this.o=Ks(t[7]||"")):(this.h=!!e,this.i=new is(null,this.h))}function ms(i){return new fo(i)}function Fr(i,e,t){i.j=t?Ks(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function vi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Xo(i,e,t){e instanceof is?(i.i=e,function qs(i,e){e&&!i.j&&(Dr(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(cn(this,o),Ao(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=ns(e,ki)),i.i=new is(e,i.h))}function Xn(i,e,t){i.i.set(e,t)}function ei(i){return Xn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ks(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function ns(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,mi),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function mi(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}fo.prototype.toString=function(){var i=[],e=this.j;e&&i.push(ns(e,or,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(ns(e,or,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(ns(t,"/"==t.charAt(0)?ls:Co,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",ns(t,rs)),i.join("")};var or=/[#\/\?@]/g,Co=/[#\?:]/g,ls=/[#\?]/g,ki=/[#\?@]/g,rs=/#/g;function is(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Dr(i){i.g||(i.g=new Map,i.h=0,i.i&&function Ci(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function cn(i,e){Dr(i),e=Ms(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ys(i,e){return Dr(i),e=Ms(i,e),i.g.has(e)}function Ao(i,e,t){cn(i,e),0<t.length&&(i.i=null,i.g.set(Ms(i,e),Dn(t)),i.h+=t.length)}function Ms(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Li(i){this.l=i||po,i=ce.PerformanceNavigationTiming?0<(i=ce.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ce.g&&ce.g.Ga&&ce.g.Ga()&&ce.g.Ga().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ne=is.prototype).add=function(i,e){Dr(this),this.i=null,i=Ms(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ne.forEach=function(i,e){Dr(this),this.g.forEach(function(t,o){t.forEach(function(u){i.call(e,u,o,this)},this)},this)},ne.oa=function(){Dr(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const u=i[o];for(let d=0;d<u.length;d++)t.push(e[o])}return t},ne.W=function(i){Dr(this);let e=[];if("string"==typeof i)ys(this,i)&&(e=e.concat(this.g.get(Ms(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},ne.set=function(i,e){return Dr(this),this.i=null,ys(this,i=Ms(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ne.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const d=encodeURIComponent(String(o)),g=this.W(o);for(o=0;o<g.length;o++){var u=d;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var po=10;function go(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ht(i){return i.h?1:i.g?i.g.size:0}function Hn(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function mo(i,e){i.g?i.g.add(e):i.h=e}function yo(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function B(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Dn(i.i)}function k(){}function X(){this.g=new k}function fe(i,e,t){const o=t||"";try{gs(i,function(u,d){let g=u;Oe(u)&&(g=Kn(u)),e.push(o+d+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Ze(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function yt(i){this.l=i.$b||null,this.j=i.ib||!1}function Kt(i,e){xt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Bt,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Li.prototype.cancel=function(){if(this.i=B(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},k.prototype.stringify=function(i){return ce.JSON.stringify(i,void 0)},k.prototype.parse=function(i){return ce.JSON.parse(i,void 0)},rn(yt,at),yt.prototype.g=function(){return new Kt(this.l,this.j)},yt.prototype.i=function(i){return function(){return i}}({}),rn(Kt,xt);var Bt=0;function Bn(i){i.j.read().then(i.Sa.bind(i)).catch(i.ga.bind(i))}function hn(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ar(i)}function ar(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ne=Kt.prototype).open=function(i,e){if(this.readyState!=Bt)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ar(this)},ne.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ce).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hn(this)),this.readyState=Bt},ne.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ar(this)),this.g&&(this.readyState=3,ar(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof ce.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bn(this)}else i.text().then(this.Ua.bind(this),this.ga.bind(this))},ne.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?hn(this):ar(this),3==this.readyState&&Bn(this)}},ne.Ua=function(i){this.g&&(this.response=this.responseText=i,hn(this))},ne.Ta=function(i){this.g&&(this.response=i,hn(this))},ne.ga=function(){this.g&&hn(this)},ne.setRequestHeader=function(i,e){this.v.append(i,e)},ne.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ne.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ur=ce.JSON.parse;function Vn(i){xt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ar,this.K=this.L=!1}rn(Vn,xt);var Ar="",_s=/^https?$/i,Br=["POST","PUT"];function ji(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ui(i),vs(i)}function ui(i){i.D||(i.D=!0,tn(i,"complete"),tn(i,"error"))}function Wr(i){if(i.h&&typeof Qe<"u"&&(!i.C[1]||4!=Ei(i)||2!=i.aa()))if(i.v&&4==Ei(i))fs(i.Ha,0,i);else if(tn(i,"readystatechange"),4==Ei(i)){i.h=!1;try{const T=i.aa();e:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===T){var u=String(i.H).match(Ws)[1]||null;if(!u&&ce.self&&ce.self.location){var d=ce.self.location.protocol;u=d.substr(0,d.length-1)}o=!_s.test(u?u.toLowerCase():"")}t=o}if(t)tn(i,"complete"),tn(i,"success");else{i.m=6;try{var g=2<Ei(i)?i.g.statusText:""}catch{g=""}i.j=g+" ["+i.aa()+"]",ui(i)}}finally{vs(i)}}}function vs(i,e){if(i.g){cs(i);const t=i.g,o=i.C[0]?Me:null;i.g=null,i.C=null,e||tn(i,"ready");try{t.onreadystatechange=o}catch{}}}function cs(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ce.clearTimeout(i.A),i.A=null)}function Ei(i){return i.g?i.g.readyState:0}function Vs(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Ar:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function ro(i){let e="";return ut(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function Jo(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=ro(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Xn(i,e,t))}function Mo(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function _o(i){this.Ca=0,this.i=[],this.j=new yr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=Mo("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=Mo("baseRetryDelayMs",5e3,i),this.ab=Mo("retryDelaySeedMs",1e4,i),this.Za=Mo("forwardChannelMaxRetries",2,i),this.ta=Mo("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Yb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Li(i&&i.concurrentRequestLimit),this.Fa=new X,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=i&&i.Wb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function A(i){if(x(i),3==i.G){var e=i.U++,t=ms(i.F);Xn(t,"SID",i.I),Xn(t,"RID",e),Xn(t,"TYPE","terminate"),m(i,t),(e=new Us(i,i.j,e,void 0)).K=2,e.v=ei(ms(t)),t=!1,ce.navigator&&ce.navigator.sendBeacon&&(t=ce.navigator.sendBeacon(e.v.toString(),"")),!t&&ce.Image&&((new Image).src=e.v,t=!0),t||(e.g=gn(e.l,null),e.g.da(e.v)),e.F=Date.now(),zs(e)}Pn(i)}function $(i){i.g&&(he(i),i.g.cancel(),i.g=null)}function x(i){$(i),i.u&&(ce.clearTimeout(i.u),i.u=null),Le(i),i.h.cancel(),i.m&&("number"==typeof i.m&&ce.clearTimeout(i.m),i.m=null)}function W(i){go(i.h)||i.m||(i.m=!0,Ni(i.Ja,i),i.C=0)}function p(i,e){var t;t=e?e.m:i.U++;const o=ms(i.F);Xn(o,"SID",i.I),Xn(o,"RID",t),Xn(o,"AID",i.T),m(i,o),i.o&&i.s&&Jo(o,i.o,i.s),t=new Us(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=M(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),mo(i.h,t),So(t,o,e)}function m(i,e){i.ia&&ut(i.ia,function(t,o){Xn(e,o,t)}),i.l&&gs({},function(t,o){Xn(e,o,t)})}function M(i,e,t){t=Math.min(i.i.length,t);var o=i.l?Et(i.l.Qa,i.l,i):null;e:{var u=i.i;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=u[0].h,g.push("ofs="+d)):d=0:g.push("ofs="+d);let T=!0;for(let L=0;L<t;L++){let H=u[L].h;const J=u[L].g;if(H-=d,0>H)d=Math.max(0,u[L].h-100),T=!1;else try{fe(J,g,"req"+H+"_")}catch{o&&o(J)}}if(T){o=g.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function j(i){i.g||i.u||(i.Z=1,Ni(i.Ia,i),i.A=0)}function Q(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Pe(Et(i.Ia,i),St(i,i.A)),i.A++,0))}function he(i){null!=i.B&&(ce.clearTimeout(i.B),i.B=null)}function ge(i){i.g=new Us(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=ms(i.sa);Xn(e,"RID","rpc"),Xn(e,"SID",i.I),Xn(e,"CI",i.L?"0":"1"),Xn(e,"AID",i.T),Xn(e,"TYPE","xmlhttp"),m(i,e),i.o&&i.s&&Jo(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=ei(ms(e)),t.s=null,t.P=!0,$i(t,i)}function Le(i){null!=i.v&&(ce.clearTimeout(i.v),i.v=null)}function Je(i,e){var t=null;if(i.g==e){Le(i),he(i),i.g=null;var o=2}else{if(!Hn(i.h,e))return;t=e.D,yo(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;tn(o=Ts(),new oi(o,t,e,u)),W(i)}else j(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function S(i,e){return!(ht(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Ya?0:i.Za)||(i.m=Pe(Et(i.Ja,i,e),St(i,i.C)),i.C++,0)))}(i,e)||2==o&&Q(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:jt(i,5);break;case 4:jt(i,10);break;case 3:jt(i,6);break;default:jt(i,2)}}function St(i,e){let t=i.Wa+Math.floor(Math.random()*i.ab);return i.l||(t*=2),t*e}function jt(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=Et(i.jb,i);t||(t=new fo("//www.google.com/images/cleardot.gif"),ce.location&&"http"==ce.location.protocol||Fr(t,"https"),ei(t)),function Ne(i,e){const t=new yr;if(ce.Image){const o=new Image;o.onload=Rn(Ze,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Rn(Ze,t,o,"TestLoadImage: error",!1,e),o.onabort=Rn(Ze,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Rn(Ze,t,o,"TestLoadImage: timeout",!1,e),ce.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else gi(2);i.G=0,i.l&&i.l.va(e),Pn(i),x(i)}function Pn(i){if(i.G=0,i.la=[],i.l){const e=B(i.h);(0!=e.length||0!=i.i.length)&&(Ai(i.la,e),Ai(i.la,i.i),i.h.i.length=0,Dn(i.i),i.i.length=0),i.l.ua()}}function Nn(i,e,t){var o=t instanceof fo?ms(t):new fo(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),vi(o,o.m);else{var u=ce.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var d=new fo(null,void 0);o&&Fr(d,o),e&&(d.g=e),u&&vi(d,u),t&&(d.l=t),o=d}return e=i.za,(t=i.D)&&e&&Xn(o,t,e),Xn(o,"VER",i.ma),m(i,o),o}function gn(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vn(t&&i.Da&&!i.ra?new yt({ib:!0}):i.ra)).L=i.H,e}function fn(){}function Jn(){if(hi&&!(10<=Number(bi)))throw Error("Environmental error: no available transport.")}function $n(i,e){xt.call(this),this.g=new _o(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Xb)&&!br(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!br(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Kr(this)}function wi(i){ai.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function hr(){_r.call(this),this.status=1}function Kr(i){this.g=i}(ne=Vn.prototype).da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Bi.g(),this.C=function bt(i){return i.h||(i.h=i.i())}(this.u?this.u:Bi),this.g.onreadystatechange=Et(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void ji(this,d)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)t.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const d of o.keys())t.set(d,o.get(d))}o=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),u=ce.FormData&&i instanceof ce.FormData,!(0<=In(Br,e))||o||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,g]of t)this.g.setRequestHeader(d,g);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cs(this),0<this.B&&((this.K=function Rs(i){return hi&&function lr(){return function Lt(i){var e=Wt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=mr(String(ir)).split("."),t=mr("9").split("."),o=Math.max(e.length,t.length);for(let g=0;0==i&&g<o;g++){var u=e[g]||"",d=t[g]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=jr(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||jr(0==u[2].length,0==d[2].length)||jr(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Et(this.qa,this)):this.A=fs(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){ji(this,d)}},ne.qa=function(){typeof Qe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tn(this,"timeout"),this.abort(8))},ne.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,tn(this,"complete"),tn(this,"abort"),vs(this))},ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vs(this,!0)),Vn.X.M.call(this)},ne.Ha=function(){this.s||(this.F||this.v||this.l?Wr(this):this.eb())},ne.eb=function(){Wr(this)},ne.aa=function(){try{return 2<Ei(this)?this.g.status:-1}catch{return-1}},ne.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ne.Ra=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ur(e)}},ne.Ea=function(){return this.m},ne.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(ne=_o.prototype).ma=8,ne.G=1,ne.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new Us(this,this.j,i,void 0);let d=this.s;if(this.S&&(d?(d=$t(d),Jt(d,this.S)):d=this.S),null!==this.o||this.N||(u.H=d,d=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=M(this,u,e),Xn(t=ms(this.F),"RID",i),Xn(t,"CVER",22),this.D&&Xn(t,"X-HTTP-Session-Id",this.D),m(this,t),d&&(this.N?e="headers="+encodeURIComponent(String(ro(d)))+"&"+e:this.o&&Jo(t,this.o,d)),mo(this.h,u),this.Xa&&Xn(t,"TYPE","init"),this.O?(Xn(t,"$req",e),Xn(t,"SID","null"),u.Z=!0,So(u,t,null)):So(u,t,e),this.G=2}}else 3==this.G&&(i?p(this,i):0==this.i.length||go(this.h)||p(this))},ne.Ia=function(){if(this.u=null,ge(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Pe(Et(this.cb,this),i)}},ne.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,gi(10),$(this),ge(this))},ne.bb=function(){null!=this.v&&(this.v=null,$(this),Q(this),gi(19))},ne.jb=function(i){i?(this.j.info("Successfully pinged google.com"),gi(2)):(this.j.info("Failed to ping google.com"),gi(1))},(ne=fn.prototype).xa=function(){},ne.wa=function(){},ne.va=function(){},ne.ua=function(){},ne.Qa=function(){},Jn.prototype.g=function(i,e){return new $n(i,e)},rn($n,xt),$n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;gi(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Nn(i,null,i.V),W(i)},$n.prototype.close=function(){A(this.g)},$n.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Kn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.$a++,i)),3==e.G&&W(e)},$n.prototype.M=function(){this.g.l=null,delete this.j,A(this.g),delete this.g,$n.X.M.call(this)},rn(wi,ai),rn(hr,_r),rn(Kr,fn),Kr.prototype.xa=function(){tn(this.g,"a")},Kr.prototype.wa=function(i){tn(this.g,new wi(i))},Kr.prototype.va=function(i){tn(this.g,new hr(i))},Kr.prototype.ua=function(){tn(this.g,"b")},Jn.prototype.createWebChannel=Jn.prototype.g,$n.prototype.send=$n.prototype.u,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,He.COMPLETE="complete",Vt.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",xt.prototype.listen=xt.prototype.N,Vn.prototype.listenOnce=Vn.prototype.O,Vn.prototype.getLastError=Vn.prototype.Na,Vn.prototype.getLastErrorCode=Vn.prototype.Ea,Vn.prototype.getStatus=Vn.prototype.aa,Vn.prototype.getResponseJson=Vn.prototype.Ra,Vn.prototype.getResponseText=Vn.prototype.fa,Vn.prototype.send=Vn.prototype.da;var Go=It.createWebChannelTransport=function(){return new Jn},Ro=It.getStatEventTarget=function(){return Ts()},ss=It.ErrorCode=xe,Es=It.EventType=He,ea=It.Event=Yi,Hi=It.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ta=It.FetchXmlHttpFactory=yt,io=It.WebChannel=Vt,na=It.XhrIo=Vn;const vo="@firebase/firestore";class vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");let Zt="9.11.0";const nn=new Ie.Yd("@firebase/firestore");function dn(){return nn.logLevel}function pt(i,...e){if(nn.logLevel<=Ie.in.DEBUG){const t=e.map(Vr);nn.debug(`Firestore (${Zt}): ${i}`,...t)}}function wr(i,...e){if(nn.logLevel<=Ie.in.ERROR){const t=e.map(Vr);nn.error(`Firestore (${Zt}): ${i}`,...t)}}function ti(i,...e){if(nn.logLevel<=Ie.in.WARN){const t=e.map(Vr);nn.warn(`Firestore (${Zt}): ${i}`,...t)}}function Vr(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Tt(i="Unexpected state"){const e=`FIRESTORE (${Zt}) INTERNAL ASSERTION FAILED: `+i;throw wr(e),new Error(e)}function wn(i,e){i||Tt()}function Ct(i,e){return i}const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends ke.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ba{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ma{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vr.UNAUTHENTICATED))}shutdown(){}}class bu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ia{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=H=>this.i!==u?(u=this.i,t(H)):Promise.resolve();let g=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Hr,e.enqueueRetryable(()=>d(this.currentUser))};const T=()=>{const H=g;e.enqueueRetryable((0,De.Z)(function*(){yield H.promise,yield d(o.currentUser)}))},L=H=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),T()};this.t.onInit(H=>L(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?L(H):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Hr)}},0),T()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(wn("string"==typeof o.accessToken),new ba(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wn(null===e||"string"==typeof e),new vr(e)}}class Ri{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(wn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Tu{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new Ri(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xo{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=d=>{null!=d.error&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.A;return this.A=d.token,pt("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wn("string"==typeof t.token),this.A=t.token,new fa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ja(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class ya{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Ja(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function kn(i,e){return i<e?-1:i>e?1:0}function Ta(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function Ku(i){return i+"\0"}class ni{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new dt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new dt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new dt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ni.fromMillis(Date.now())}static fromDate(e){return ni.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new ni(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kn(this.nanoseconds,e.nanoseconds):kn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Sn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Sn(e)}static min(){return new Sn(new ni(0,0))}static max(){return new Sn(new ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class sa{constructor(e,t,o){void 0===t?t=0:t>e.length&&Tt(),void 0===o?o=e.length-t:o>e.length-t&&Tt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===sa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sa?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),g=t.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fr extends sa{construct(e,t,o){return new fr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new dt(Ye.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new fr(t)}static emptyPath(){return new fr([])}}const so=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $r extends sa{construct(e,t,o){return new $r(e,t,o)}static isValidIdentifier(e){return so.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $r(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new dt(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let g=!1;for(;u<e.length;){const T=e[u];if("\\"===T){if(u+1===e.length)throw new dt(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const L=e[u+1];if("\\"!==L&&"."!==L&&"`"!==L)throw new dt(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=L,u+=2}else"`"===T?(g=!g,u++):"."!==T||g?(o+=T,u++):(d(),u++)}if(d(),g)throw new dt(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $r(t)}static emptyPath(){return new $r([])}}class Pt{constructor(e){this.path=e}static fromPath(e){return new Pt(fr.fromString(e))}static fromName(e){return new Pt(fr.fromString(e).popFirst(5))}static empty(){return new Pt(fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pt(new fr(e.slice()))}}class Po{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function Sa(i){return i.fields.find(e=>2===e.kind)}function Ys(i){return i.fields.filter(e=>2!==e.kind)}Po.UNKNOWN_ID=-1;class No{constructor(e,t){this.fieldPath=e,this.kind=t}}class eu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new eu(0,oo.min())}}function qu(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=Sn.fromTimestamp(1e9===o?new ni(t+1,0):new ni(t,o));return new oo(u,Pt.empty(),e)}function tu(i){return new oo(i.readTime,i.key,-1)}class oo{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new oo(Sn.min(),Pt.empty(),-1)}static max(){return new oo(Sn.max(),Pt.empty(),-1)}}function vl(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Pt.comparator(i.documentKey,e.documentKey),0!==t?t:kn(i.largestBatchId,e.largestBatchId))}const Ca="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wo(i){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,De.Z)(function*(i){if(i.code!==Ye.FAILED_PRECONDITION||i.message!==Ca)throw i;pt("LocalStore","Unexpectedly lost primary lease")}),Zu.apply(this,arguments)}class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):et.reject(t)}static resolve(e){return new et((t,o)=>{t(e)})}static reject(e){return new et((t,o)=>{o(e)})}static waitFor(e){return new et((t,o)=>{let u=0,d=0,g=!1;e.forEach(T=>{++u,T.next(()=>{++d,g&&d===u&&t()},L=>o(L))}),g=!0,d===u&&t()})}static or(e){let t=et.resolve(!1);for(const o of e)t=t.next(u=>u?et.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new et((o,u)=>{const d=e.length,g=new Array(d);let T=0;for(let L=0;L<d;L++){const H=L;t(e[H]).next(J=>{g[H]=J,++T,T===d&&o(g)},J=>u(J))}})}static doWhile(e,t){return new et((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class Fi{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Hr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ja(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=_a(o.target.error);this.P.reject(new ja(e,u))}}static open(e,t,o,u){try{return new Fi(t,e.transaction(u,o))}catch(d){throw new ja(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(pt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uo(t)}}class ao{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===ao.D((0,ke.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pt("SimpleDb","Removing database:",e),ds(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ke.hl)())return!1;if(ao.N())return!0;const e=(0,ke.z$)(),t=ao.D(e),o=0<t&&t<10,u=ao.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,De.Z)(function*(){return t.db||(pt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{o(g.target.result)},d.onblocked=()=>{u(new ja(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const T=g.target.error;u("VersionError"===T.name?new dt(Ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===T.name?new dt(Ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+T):new ja(e,T))},d.onupgradeneeded=g=>{pt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.S.$(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{pt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,De.Z)(function*(){const g="readonly"===t;let T=0;for(;;){++T;try{d.db=yield d.F(e);const L=Fi.open(d.db,e,g?"readonly":"readwrite",o),H=u(L).next(J=>(L.V(),J)).catch(J=>(L.abort(J),et.reject(J))).toPromise();return H.catch(()=>{}),yield L.v,H}catch(L){const H=L,J="FirebaseError"!==H.name&&T<3;if(pt("SimpleDb","Transaction failed with error:",H.message,"Retrying:",J),d.close(),!J)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Aa{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ds(this.U.delete())}}class ja extends dt{constructor(e,t){super(Ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Oo(i){return"IndexedDbTransactionError"===i.name}class uo{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(pt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(pt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),ds(o)}add(e){return pt("SimpleDb","ADD",this.store.name,e,e),ds(this.store.add(e))}get(e){return ds(this.store.get(e)).next(t=>(void 0===t&&(t=null),pt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return pt("SimpleDb","DELETE",this.store.name,e),ds(this.store.delete(e))}count(){return pt("SimpleDb","COUNT",this.store.name),ds(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.H(u,(g,T)=>{d.push(T)}).next(()=>d)}{const u=this.store.getAll(o.range);return new et((d,g)=>{u.onerror=T=>{g(T.target.error)},u.onsuccess=T=>{d(T.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new et((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}Y(e,t){pt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const u=this.cursor(o);return this.H(u,(d,g,T)=>T.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new et((o,u)=>{t.onerror=d=>{const g=_a(d.target.error);u(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(T=>{T?g.continue():o()}):o()}})}H(e,t){const o=[];return new et((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const T=g.target.result;if(!T)return void u();const L=new Aa(T),H=t(T.primaryKey,T.value,L);if(H instanceof et){const J=H.catch(Ee=>(L.done(),et.reject(Ee)));o.push(J)}L.isDone?u():null===L.G?T.continue():T.continue(L.G)}}).next(()=>et.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ds(i){return new et((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=_a(o.target.error);t(u)}})}let Su=!1;function _a(i){const e=ao.D((0,ke.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new dt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Su||(Su=!0,setTimeout(()=>{throw o},0)),o}}return i}class I{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;pt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,De.Z)(function*(){t.task=null;try{pt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){Oo(o)?pt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield wo(o)}yield t.nt(6e4)}))}}class D{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,De.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,d=!0;return et.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return pt("IndexBackiller",`Processing collection: ${g}`),this.rt(e,g,u).next(T=>{u-=T,o.add(g)});d=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ot(u,d)).next(T=>(pt("IndexBackiller",`Updating offset: ${T}`),this.localStore.indexManager.updateCollectionGroup(e,t,T))).next(()=>g.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,d)=>{const g=tu(d);vl(g,o)>0&&(o=g)}),new oo(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class _{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function C(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function N(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function q(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}_.at=-1;class te{constructor(e,t){this.comparator=e,this.root=t||Be.EMPTY}insert(e,t){return new te(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ue(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ue(this.root,e,this.comparator,!1)}getReverseIterator(){return new ue(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ue(this.root,e,this.comparator,!0)}}class ue{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??Be.RED,this.left=u??Be.EMPTY,this.right=d??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new Be(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Be.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Tt();const e=this.left.check();if(e!==this.right.check())throw Tt();return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1,Be.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt()}get value(){throw Tt()}get color(){throw Tt()}get left(){throw Tt()}get right(){throw Tt()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Be(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lt{constructor(e){this.comparator=e,this.data=new te(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sn(this.data.getIterator())}getIteratorFrom(e){return new sn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class sn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ft(i){return i.hasNext()?i.getNext():void 0}class mn{constructor(e){this.fields=e,e.sort($r.comparator)}static empty(){return new mn([])}unionWith(e){let t=new lt($r.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pr(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const ko=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(i){if(wn(!!i),"string"==typeof i){let e=0;const t=ko.exec(i);if(wn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:qr(i.seconds),nanos:qr(i.nanos)}}function qr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ws(i){return"string"==typeof i?pr.fromBase64String(i):pr.fromUint8Array(i)}function oa(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function xs(i){const e=i.mapValue.fields.__previous_value__;return oa(e)?xs(e):e}function Qs(i){const e=os(i.mapValue.fields.__local_write_time__.timestampValue);return new ni(e.seconds,e.nanos)}class El{constructor(e,t,o,u,d,g,T,L){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=T,this.useFetchStreams=L}}class aa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof aa&&e.projectId===this.projectId&&e.database===this.database}}function Lo(i){return null==i}function Ha(i){return 0===i&&1/i==-1/0}function pa(i){return"number"==typeof i&&Number.isInteger(i)&&!Ha(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const va={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ea={nullValue:"NULL_VALUE"};function Io(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?oa(i)?4:ur(i)?9007199254740991:10:Tt()}function ua(i,e){if(i===e)return!0;const t=Io(i);if(t!==Io(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Qs(i).isEqual(Qs(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=os(o.timestampValue),g=os(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,ws(i.bytesValue).isEqual(ws(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return qr(o.geoPointValue.latitude)===qr(u.geoPointValue.latitude)&&qr(o.geoPointValue.longitude)===qr(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return qr(o.integerValue)===qr(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=qr(o.doubleValue),g=qr(u.doubleValue);return d===g?Ha(d)===Ha(g):isNaN(d)&&isNaN(g)}return!1}(i,e);case 9:return Ta(i.arrayValue.values||[],e.arrayValue.values||[],ua);case 10:return function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(C(d)!==C(g))return!1;for(const T in d)if(d.hasOwnProperty(T)&&(void 0===g[T]||!ua(d[T],g[T])))return!1;return!0}(i,e);default:return Tt()}var u}function xi(i,e){return void 0!==(i.values||[]).find(t=>ua(t,e))}function Ma(i,e){if(i===e)return 0;const t=Io(i),o=Io(e);if(t!==o)return kn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return kn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const g=qr(u.integerValue||u.doubleValue),T=qr(d.integerValue||d.doubleValue);return g<T?-1:g>T?1:g===T?0:isNaN(g)?isNaN(T)?0:-1:1}(i,e);case 3:return P(i.timestampValue,e.timestampValue);case 4:return P(Qs(i),Qs(e));case 5:return kn(i.stringValue,e.stringValue);case 6:return function(u,d){const g=ws(u),T=ws(d);return g.compareTo(T)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),T=d.split("/");for(let L=0;L<g.length&&L<T.length;L++){const H=kn(g[L],T[L]);if(0!==H)return H}return kn(g.length,T.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const g=kn(qr(u.latitude),qr(d.latitude));return 0!==g?g:kn(qr(u.longitude),qr(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const g=u.values||[],T=d.values||[];for(let L=0;L<g.length&&L<T.length;++L){const H=Ma(g[L],T[L]);if(H)return H}return kn(g.length,T.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===va.mapValue&&d===va.mapValue)return 0;if(u===va.mapValue)return 1;if(d===va.mapValue)return-1;const g=u.fields||{},T=Object.keys(g),L=d.fields||{},H=Object.keys(L);T.sort(),H.sort();for(let J=0;J<T.length&&J<H.length;++J){const Ee=kn(T[J],H[J]);if(0!==Ee)return Ee;const We=Ma(g[T[J]],L[H[J]]);if(0!==We)return We}return kn(T.length,H.length)}(i.mapValue,e.mapValue);default:throw Tt()}}function P(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return kn(i,e);const t=os(i),o=os(e),u=kn(t.seconds,o.seconds);return 0!==u?u:kn(t.nanos,o.nanos)}function O(i){return K(i)}function K(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=os(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ws(i.bytesValue).toBase64():"referenceValue"in i?Pt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const g of o.values||[])d?d=!1:u+=",",u+=K(g);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",g=!0;for(const T of u)g?g=!1:d+=",",d+=`${T}:${K(o.fields[T])}`;return d+"}"}(i.mapValue):Tt();var e}function de(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Fe(i){return!!i&&"integerValue"in i}function tt(i){return!!i&&"arrayValue"in i}function wt(i){return!!i&&"nullValue"in i}function Ht(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Mn(i){return!!i&&"mapValue"in i}function Fn(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return N(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Fn(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fn(i.arrayValue.values[t]);return e}return Object.assign({},i)}function ur(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Un(i){return"nullValue"in i?Ea:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?de(aa.empty(),Pt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Tt()}function Gi(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?de(aa.empty(),Pt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?va:Tt()}function $s(i,e){const t=Ma(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Ga(i,e){const t=Ma(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class zi{constructor(e){this.value=e}static empty(){return new zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Mn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fn(t)}setAll(e){let t=$r.emptyPath(),o={},u=[];e.forEach((g,T)=>{if(!t.isImmediateParentOf(T)){const L=this.getFieldsMap(t);this.applyChanges(L,o,u),o={},u=[],t=T.popLast()}g?o[T.lastSegment()]=Fn(g):u.push(T.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Mn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ua(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Mn(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){N(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new zi(Fn(this.value))}}function Ra(i){const e=[];return N(i.fields,(t,o)=>{const u=new $r([t]);if(Mn(o)){const d=Ra(o.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new mn(e)}class Zr{constructor(e,t,o,u,d,g){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Zr(e,0,Sn.min(),Sn.min(),zi.empty(),0)}static newFoundDocument(e,t,o){return new Zr(e,1,t,Sn.min(),o,0)}static newNoDocument(e,t){return new Zr(e,2,t,Sn.min(),zi.empty(),0)}static newUnknownDocument(e,t){return new Zr(e,3,t,Sn.min(),zi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xa{constructor(e,t=null,o=[],u=[],d=null,g=null,T=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=g,this.endAt=T,this.ht=null}}function Pa(i,e=null,t=[],o=[],u=null,d=null,g=null){return new xa(i,e,t,o,u,d,g)}function zo(i){const e=Ct(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+O(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Lo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>O(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>O(o)).join(",")),e.ht=t}return e.ht}function nu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!ed(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!ua(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!lh(i.startAt,e.startAt)&&lh(i.endAt,e.endAt)}function wl(i){return Pt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function ec(i,e){return i.filters.filter(t=>t instanceof Ps&&t.field.isEqual(e))}function oh(i,e,t){let o=Ea,u=!0;for(const d of ec(i,e)){let g=Ea,T=!0;switch(d.op){case"<":case"<=":g=Un(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,T=!1;break;case"!=":case"not-in":g=Ea}$s({value:o,inclusive:u},{value:g,inclusive:T})<0&&(o=g,u=T)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];$s({value:o,inclusive:u},{value:g,inclusive:t.inclusive})<0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}function Xc(i,e,t){let o=va,u=!0;for(const d of ec(i,e)){let g=va,T=!0;switch(d.op){case">=":case">":g=Gi(d.value),T=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,T=!1;break;case"!=":case"not-in":g=va}Ga({value:o,inclusive:u},{value:g,inclusive:T})>0&&(o=g,u=T)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Ga({value:o,inclusive:u},{value:g,inclusive:t.inclusive})>0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}class Ps extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new Il(e,t,o):"array-contains"===t?new uh(e,o):"in"===t?new Vg(e,o):"not-in"===t?new Jc(e,o):"array-contains-any"===t?new Ff(e,o):new Ps(e,t,o)}static lt(e,t,o){return"in"===t?new kf(e,o):new ah(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ma(t,this.value)):null!==t&&Io(this.value)===Io(t)&&this.ft(Ma(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Tt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Il extends Ps{constructor(e,t,o){super(e,t,o),this.key=Pt.fromName(o.referenceValue)}matches(e){const t=Pt.comparator(e.key,this.key);return this.ft(t)}}class kf extends Ps{constructor(e,t){super(e,"in",t),this.keys=Lf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ah extends Ps{constructor(e,t){super(e,"not-in",t),this.keys=Lf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Lf(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Pt.fromName(o.referenceValue))}class uh extends Ps{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tt(t)&&xi(t.arrayValue,this.value)}}class Vg extends Ps{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xi(this.value.arrayValue,t)}}class Jc extends Ps{constructor(e,t){super(e,"not-in",t)}matches(e){if(xi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xi(this.value.arrayValue,t)}}class Ff extends Ps{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>xi(this.value.arrayValue,o))}}class Wa{constructor(e,t){this.position=e,this.inclusive=t}}class wa{constructor(e,t="asc"){this.field=e,this.dir=t}}function ed(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Cu(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],g=i.position[u];if(o=d.field.isKeyField()?Pt.comparator(Pt.fromName(g.referenceValue),t.key):Ma(g,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function lh(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ua(i.position[t],e.position[t]))return!1;return!0}class Ka{constructor(e,t=null,o=[],u=[],d=null,g="F",T=null,L=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=g,this.startAt=T,this.endAt=L,this._t=null,this.wt=null}}function Uf(i,e,t,o,u,d,g,T){return new Ka(i,e,t,o,u,d,g,T)}function Na(i){return new Ka(i)}function tc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function nc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function rc(i){for(const e of i.filters)if(e.dt())return e.field;return null}function ic(i){return null!==i.collectionGroup}function Wo(i){const e=Ct(i);if(null===e._t){e._t=[];const t=rc(e),o=nc(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new wa(t)),e._t.push(new wa($r.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e._t.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new wa($r.keyField(),d))}}}return e._t}function Fo(i){const e=Ct(i);if(!e.wt)if("F"===e.limitType)e.wt=Pa(e.path,e.collectionGroup,Wo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Wo(e))t.push(new wa(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Wa(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Wa(e.startAt.position,e.startAt.inclusive):null;e.wt=Pa(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function Yu(i,e,t){return new Ka(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Dl(i,e){return nu(Fo(i),Fo(e))&&i.limitType===e.limitType}function td(i){return`${zo(Fo(i))}|lt:${i.limitType}`}function nd(i){return`Query(target=${function za(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${O(o.value)}`;var o}).join(", ")}]`),Lo(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>O(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>O(t)).join(",")),`Target(${e})`}(Fo(i))}; limitType=${i.limitType})`}function la(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Pt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,g){const T=Cu(u,d,g);return u.inclusive?T<=0:T<0}(t.startAt,Wo(t),o)||t.endAt&&!function(u,d,g){const T=Cu(u,d,g);return u.inclusive?T>=0:T>0}(t.endAt,Wo(t),o)));var t,o}function Au(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function rd(i){return(e,t)=>{let o=!1;for(const u of Wo(i)){const d=ch(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function ch(i,e,t){const o=i.field.isKeyField()?Pt.comparator(e.key,t.key):function(u,d,g){const T=d.data.field(u),L=g.data.field(u);return null!==T&&null!==L?Ma(T,L):Tt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Tt()}}function dh(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(e)?"-0":e}}function hh(i){return{integerValue:""+i}}function fh(i,e){return pa(e)?hh(e):dh(i,e)}class sc{constructor(){this._=void 0}}function ph(i,e,t){return i instanceof bl?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof ca?Tl(i,e):i instanceof Uo?ru(i,e):function(o,u){const d=mh(o,u),g=Sl(d)+Sl(o.yt);return Fe(d)&&Fe(o.yt)?hh(g):dh(o.It,g)}(i,e)}function gh(i,e,t){return i instanceof ca?Tl(i,e):i instanceof Uo?ru(i,e):t}function mh(i,e){return i instanceof Mu?Fe(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class bl extends sc{}class ca extends sc{constructor(e){super(),this.elements=e}}function Tl(i,e){const t=id(e);for(const o of i.elements)t.some(u=>ua(u,o))||t.push(o);return{arrayValue:{values:t}}}class Uo extends sc{constructor(e){super(),this.elements=e}}function ru(i,e){let t=id(e);for(const o of i.elements)t=t.filter(u=>!ua(u,o));return{arrayValue:{values:t}}}class Mu extends sc{constructor(e,t){super(),this.It=e,this.yt=t}}function Sl(i){return qr(i.integerValue||i.doubleValue)}function id(i){return tt(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class oc{constructor(e,t){this.field=e,this.transform=t}}class $g{constructor(e,t){this.version=e,this.transformResults=t}}class Pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class sd{}function Bf(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Xu(i.key,Pi.none()):new su(i.key,i.data,Pi.none());{const t=i.data,o=zi.empty();let u=new lt($r.comparator);for(let d of e.fields)if(!u.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?o.delete(d):o.set(d,g),u=u.add(d)}return new Oa(i.key,o,new mn(u.toArray()),Pi.none())}}function _h(i,e,t){i instanceof su?function(o,u,d){const g=o.value.clone(),T=Ml(o.fieldTransforms,u,d.transformResults);g.setAll(T),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):i instanceof Oa?function(o,u,d){if(!iu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=Ml(o.fieldTransforms,u,d.transformResults),T=u.data;T.setAll(Al(o)),T.setAll(g),u.convertToFoundDocument(d.version,T).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Cl(i,e,t,o){return i instanceof su?function(u,d,g,T){if(!iu(u.precondition,d))return g;const L=u.value.clone(),H=Qu(u.fieldTransforms,T,d);return L.setAll(H),d.convertToFoundDocument(d.version,L).setHasLocalMutations(),null}(i,e,t,o):i instanceof Oa?function(u,d,g,T){if(!iu(u.precondition,d))return g;const L=Qu(u.fieldTransforms,T,d),H=d.data;return H.setAll(Al(u)),H.setAll(L),d.convertToFoundDocument(d.version,H).setHasLocalMutations(),null===g?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(J=>J.field))}(i,e,t,o):(g=t,iu(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function Vf(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=mh(o.transform,u||null);null!=d&&(null===t&&(t=zi.empty()),t.set(o.field,d))}return t||null}function od(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Ta(t,o,(u,d)=>function yh(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof ca&&o instanceof ca||t instanceof Uo&&o instanceof Uo?Ta(t.elements,o.elements,ua):t instanceof Mu&&o instanceof Mu?ua(t.yt,o.yt):t instanceof bl&&o instanceof bl);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class su extends sd{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Oa extends sd{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Al(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Ml(i,e,t){const o=new Map;wn(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],g=d.transform,T=e.data.field(d.field);o.set(d.field,gh(g,T,t[u]))}return o}function Qu(i,e,t){const o=new Map;for(const u of i){const d=u.transform,g=t.data.field(u.field);o.set(u.field,ph(d,g,e))}return o}class Xu extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class as extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rl{constructor(e){this.count=e}}var Ns,Or;function ad(i){switch(i){default:return Tt();case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0}}function ud(i){if(void 0===i)return wr("GRPC error has no .code"),Ye.UNKNOWN;switch(i){case Ns.OK:return Ye.OK;case Ns.CANCELLED:return Ye.CANCELLED;case Ns.UNKNOWN:return Ye.UNKNOWN;case Ns.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Ns.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Ns.INTERNAL:return Ye.INTERNAL;case Ns.UNAVAILABLE:return Ye.UNAVAILABLE;case Ns.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Ns.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Ns.NOT_FOUND:return Ye.NOT_FOUND;case Ns.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Ns.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Ns.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Ns.ABORTED:return Ye.ABORTED;case Ns.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Ns.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Ns.DATA_LOSS:return Ye.DATA_LOSS;default:return Tt()}}(Or=Ns||(Ns={}))[Or.OK=0]="OK",Or[Or.CANCELLED=1]="CANCELLED",Or[Or.UNKNOWN=2]="UNKNOWN",Or[Or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Or[Or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Or[Or.NOT_FOUND=5]="NOT_FOUND",Or[Or.ALREADY_EXISTS=6]="ALREADY_EXISTS",Or[Or.PERMISSION_DENIED=7]="PERMISSION_DENIED",Or[Or.UNAUTHENTICATED=16]="UNAUTHENTICATED",Or[Or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Or[Or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Or[Or.ABORTED=10]="ABORTED",Or[Or.OUT_OF_RANGE=11]="OUT_OF_RANGE",Or[Or.UNIMPLEMENTED=12]="UNIMPLEMENTED",Or[Or.INTERNAL=13]="INTERNAL",Or[Or.UNAVAILABLE=14]="UNAVAILABLE",Or[Or.DATA_LOSS=15]="DATA_LOSS";class ou{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){N(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return q(this.inner)}size(){return this.innerSize}}const $f=new te(Pt.comparator);function Ko(){return $f}const vh=new te(Pt.comparator);function au(...i){let e=vh;for(const t of i)e=e.insert(t.key,t);return e}function jf(i){let e=vh;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Bo(){return Ju()}function ac(){return Ju()}function Ju(){return new ou(i=>i.toString(),(i,e)=>i.isEqual(e))}const Eh=new te(Pt.comparator),wh=new lt(Pt.comparator);function gr(...i){let e=wh;for(const t of i)e=e.add(t);return e}const uc=new lt(kn);function Ru(){return uc}class uu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,t)),new uu(Sn.min(),o,Ru(),Ko(),gr())}}class lc{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new lc(pr.EMPTY_BYTE_STRING,t,gr(),gr(),gr())}}class el{constructor(e,t,o,u){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=u}}class cc{constructor(e,t){this.targetId=e,this.At=t}}class Vo{constructor(e,t,o=pr.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class xu{constructor(){this.Rt=0,this.bt=tl(),this.Pt=pr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=gr(),t=gr(),o=gr();return this.bt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Tt()}}),new lc(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=tl()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class lu{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ko(),this.qt=Ih(),this.Kt=new lt(kn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:Tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,u)=>{this.Ht(u)&&t(u)})}Yt(e){const t=e.targetId,o=e.At.count,u=this.Xt(t);if(u){const d=u.target;if(wl(d))if(0===o){const g=new Pt(d.path);this.jt(t,g,Zr.newNoDocument(g,Sn.min()))}else wn(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((d,g)=>{const T=this.Xt(g);if(T){if(d.current&&wl(T.target)){const L=new Pt(T.target.path);null!==this.Ut.get(L)||this.ee(g,L)||this.jt(g,L,Zr.newNoDocument(L,e))}d.Dt&&(t.set(g,d.xt()),d.Nt())}});let o=gr();this.qt.forEach((d,g)=>{let T=!0;g.forEachWhile(L=>{const H=this.Xt(L);return!H||2===H.purpose||(T=!1,!1)}),T&&(o=o.add(d))}),this.Ut.forEach((d,g)=>g.setReadTime(e));const u=new uu(e,t,this.Kt,this.Ut,o);return this.Ut=Ko(),this.qt=Ih(),this.Kt=new lt(kn),u}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,t)?u.kt(t,1):u.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new xu,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new lt(kn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||pt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new xu),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Ih(){return new te(Pt.comparator)}function tl(){return new te(Pt.comparator)}const nl={asc:"ASCENDING",desc:"DESCENDING"},Hf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class dc{constructor(e,t){this.databaseId=e,this.gt=t}}function cu(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $o(i,e){return i.gt?e.toBase64():e.toUint8Array()}function ld(i,e){return cu(i,e.toTimestamp())}function Os(i){return wn(!!i),Sn.fromTimestamp(function(e){const t=os(e);return new ni(t.seconds,t.nanos)}(i))}function cd(i,e){return(t=i,new fr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Dh(i){const e=fr.fromString(i);return wn(jn(e)),e}function Pu(i,e){return cd(i.databaseId,e.path)}function Ii(i,e){const t=Dh(e);if(t.get(1)!==i.databaseId.projectId)throw new dt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new dt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Pt(ka(t))}function xl(i,e){return cd(i.databaseId,e)}function hc(i){const e=Dh(i);return 4===e.length?fr.emptyPath():ka(e)}function Pl(i){return new fr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ka(i){return wn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function du(i,e,t){return{name:Pu(i,e),fields:t.value.mapValue.fields}}function dd(i,e,t){const o=Ii(i,e.name),u=Os(e.updateTime),d=new zi({mapValue:{fields:e.fields}}),g=Zr.newFoundDocument(o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function hu(i,e){let t;if(e instanceof su)t={update:du(i,e.key,e.value)};else if(e instanceof Xu)t={delete:Pu(i,e.key)};else if(e instanceof Oa)t={update:du(i,e.key,e.data),updateMask:on(e.fieldMask)};else{if(!(e instanceof as))return Tt();t={verify:Pu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const g=d.transform;if(g instanceof bl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ca)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Uo)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Mu)return{fieldPath:d.field.canonicalString(),increment:g.yt};throw Tt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:ld(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Tt()),t;var u}function bh(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Pi.updateTime(Os(u.updateTime)):void 0!==u.exists?Pi.exists(u.exists):Pi.none():Pi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,g){let T=null;"setToServerValue"in g?(wn("REQUEST_TIME"===g.setToServerValue),T=new bl):"appendMissingElements"in g?T=new ca(g.appendMissingElements.values||[]):"removeAllFromArray"in g?T=new Uo(g.removeAllFromArray.values||[]):"increment"in g?T=new Mu(d,g.increment):Tt();const L=$r.fromServerFormat(g.fieldPath);return new oc(L,T)}(i,u)):[];var u;if(e.update){const u=Ii(i,e.update.name),d=new zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new mn((e.updateMask.fieldPaths||[]).map(H=>$r.fromServerFormat(H)));return new Oa(u,d,g,t,o)}return new su(u,d,t,o)}if(e.delete){const u=Ii(i,e.delete);return new Xu(u,t)}if(e.verify){const u=Ii(i,e.verify);return new as(u,t)}return Tt()}function rl(i,e){return{documents:[xl(i,e.path)]}}function fd(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=xl(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xl(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(L){if(0===L.length)return;const H=L.map(J=>function(Ee){if("=="===Ee.op){if(Ht(Ee.value))return{unaryFilter:{field:Y(Ee.field),op:"IS_NAN"}};if(wt(Ee.value))return{unaryFilter:{field:Y(Ee.field),op:"IS_NULL"}}}else if("!="===Ee.op){if(Ht(Ee.value))return{unaryFilter:{field:Y(Ee.field),op:"IS_NOT_NAN"}};if(wt(Ee.value))return{unaryFilter:{field:Y(Ee.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Y(Ee.field),op:V(Ee.op),value:Ee.value}}}(J));return 1===H.length?H[0]:{compositeFilter:{op:"AND",filters:H}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(L){if(0!==L.length)return L.map(H=>{return{field:Y((J=H).field),direction:w(J.dir)};var J})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=(H=e.limit,i.gt||Lo(H)?H:{value:H});var H,T,L;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(T=e.startAt).inclusive,values:T.position}),e.endAt&&(t.structuredQuery.endAt={before:!(L=e.endAt).inclusive,values:L.position}),t}function y(i){let e=hc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){wn(1===o);const J=t.from[0];J.allDescendants?u=J.collectionId:e=e.child(J.collectionId)}let d=[];t.where&&(d=f(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(J=>{return new wa(Ae((Ee=J).field),function(We){switch(We){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ee.direction));var Ee}));let T=null;t.limit&&(T=function(J){let Ee;return Ee="object"==typeof J?J.value:J,Lo(Ee)?null:Ee}(t.limit));let L=null;var J;t.startAt&&(L=new Wa((J=t.startAt).values||[],!!J.before));let H=null;return t.endAt&&(H=function(J){return new Wa(J.values||[],!J.before)}(t.endAt)),Uf(e,u,g,d,T,"F",L,H)}function f(i){return i?void 0!==i.unaryFilter?[Ut(i)]:void 0!==i.fieldFilter?[rt(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>f(e)).reduce((e,t)=>e.concat(t)):Tt():[]}function w(i){return nl[i]}function V(i){return Hf[i]}function Y(i){return{fieldPath:i.canonicalString()}}function Ae(i){return $r.fromServerFormat(i.fieldPath)}function rt(i){return Ps.create(Ae(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tt()}}(i.fieldFilter.op),i.fieldFilter.value)}function Ut(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Ae(i.unaryFilter.field);return Ps.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ae(i.unaryFilter.field);return Ps.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ae(i.unaryFilter.field);return Ps.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ae(i.unaryFilter.field);return Ps.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Tt()}}function on(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function an(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=qo(e)),e=js(i.get(t),e);return qo(e)}function js(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function qo(i){return i+"\x01\x01"}function ga(i){const e=i.length;if(wn(e>=2),2===e)return wn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),fr.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const g=i.indexOf("\x01",d);switch((g<0||g>t)&&Tt(),i.charAt(g+1)){case"\x01":const T=i.substring(d,g);let L;0===u.length?L=T:(u+=T,L=u,u=""),o.push(L);break;case"\x10":u+=i.substring(d,g),u+="\0";break;case"\x11":u+=i.substring(d,g+1);break;default:Tt()}d=g+2}return new fr(o)}const Th=["userId","batchId"];function fu(i,e){return[i,an(e)]}function Sh(i,e,t){return[i,an(e),t]}const Wf={},Ch=["prefixPath","collectionGroup","readTime","documentId"],Kf=["prefixPath","collectionGroup","documentId"],qf=["collectionGroup","readTime","prefixPath","documentId"],pd=["canonicalId","targetId"],gd=["targetId","path"],md=["path","targetId"],fc=["collectionId","parent"],Ah=["indexId","uid"],jg=["uid","sequenceNumber"],Zf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jy=["indexId","uid","orderedDocumentKey"],Yf=["userId","collectionPath","documentId"],yd=["userId","collectionPath","largestBatchId"],e_=["userId","collectionGroup","largestBatchId"],Hg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],t_=[...Hg,"documentOverlays"],Qf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gg=Qf,n_=[...Gg,"indexConfiguration","indexState","indexEntries"];class Xf extends Qc{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Do(i,e){const t=Ct(i);return ao.M(t.ie,e)}class _d{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&_h(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Cl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Cl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=ac();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let T=this.applyToLocalView(g,d.mutatedFields);T=t.has(u.key)?null:T;const L=Bf(g,T);null!==L&&o.set(u.key,L),g.isValidDocument()||g.convertToNoDocument(Sn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gr())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,(t,o)=>od(t,o))&&Ta(this.baseMutations,e.baseMutations,(t,o)=>od(t,o))}}class Jf{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){wn(e.mutations.length===o.length);let u=Eh;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,o[g].version);return new Jf(e,t,o,u)}}class ep{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class il{constructor(e,t,o,u,d=Sn.min(),g=Sn.min(),T=pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=T}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class tp{constructor(e){this.re=e}}function zg(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bo(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Pu(u=i.re,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:cu(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Nu(e.version)};else{if(!e.isUnknownDocument())return Tt();o.unknownDocument={path:t.path.toArray(),version:Nu(e.version)}}var u,d;return o}function bo(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Nu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sl(i){const e=new ni(i.seconds,i.nanoseconds);return Sn.fromTimestamp(e)}function Ou(i,e){const t=(e.baseMutations||[]).map(d=>bh(i.re,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>bh(i.re,d)),u=ni.fromMillis(e.localWriteTimeMs);return new _d(e.batchId,u,t,o)}function Xs(i){const e=sl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?sl(i.lastLimboFreeSnapshotVersion):Sn.min();let o;var u;return void 0!==i.query.documents?(wn(1===(u=i.query).documents.length),o=Fo(Na(hc(u.documents[0])))):o=Fo(y(i.query)),new il(o,i.targetId,0,i.lastListenSequenceNumber,e,t,pr.fromBase64String(i.resumeToken))}function pc(i,e){const t=Nu(e.snapshotVersion),o=Nu(e.lastLimboFreeSnapshotVersion);let u;u=wl(e.target)?rl(i.re,e.target):fd(i.re,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zo(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Mh(i){const e=y({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Yu(e,e.limit,"L"):e}function np(i,e){return new ep(e.largestBatchId,bh(i.re,e.overlayMutation))}function Wg(i,e){const t=e.path.lastSegment();return[i,an(e.path.popLast()),t]}function rp(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Nu(o.readTime),documentKey:an(o.documentKey.path),largestBatchId:o.largestBatchId}}class i_{getBundleMetadata(e,t){return ip(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:sl(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return ip(e).put({bundleId:(o=t).id,createTime:Nu(Os(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Kg(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:Mh(u.bundledQuery),readTime:sl(u.readTime)};var u})}saveNamedQuery(e,t){return Kg(e).put({name:(o=t).name,readTime:Nu(Os(o.readTime)),bundledQuery:o.bundledQuery});var o}}function ip(i){return Do(i,"bundles")}function Kg(i){return Do(i,"namedQueries")}class vd{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new vd(e,t.uid||"")}getOverlay(e,t){return Ed(e).get(Wg(this.userId,t)).next(o=>o?np(this.It,o):null)}getOverlays(e,t){const o=Bo();return et.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,g)=>{const T=new ep(t,g);u.push(this.ue(e,T))}),et.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(g=>u.add(an(g.getCollectionPath())));const d=[];return u.forEach(g=>{const T=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);d.push(Ed(e).Y("collectionPathOverlayIndex",T))}),et.waitFor(d)}getOverlaysForCollection(e,t,o){const u=Bo(),d=an(t),g=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Ed(e).W("collectionPathOverlayIndex",g).next(T=>{for(const L of T){const H=np(this.It,L);u.set(H.getKey(),H)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=Bo();let g;const T=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ed(e).Z({index:"collectionGroupOverlayIndex",range:T},(L,H,J)=>{const Ee=np(this.It,H);d.size()<u||Ee.largestBatchId===g?(d.set(Ee.getKey(),Ee),g=Ee.largestBatchId):J.done()}).next(()=>d)}ue(e,t){return Ed(e).put(function(o,u,d){const[g,T,L]=Wg(u,d.mutation.key);return{userId:u,collectionPath:T,documentId:L,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:hu(o.re,d.mutation)}}(this.It,this.userId,t))}}function Ed(i){return Do(i,"documentOverlays")}class Nl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(qr(e.integerValue));else if("doubleValue"in e){const o=qr(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Ha(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ws(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?ur(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Tt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const u of Object.keys(o))this._e(u,t),this.ae(o[u],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const u of o)this.ae(u,t)}ge(e,t){this.le(t,37),Pt.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function s_(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function qg(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=s_(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}Nl.Te=new Nl;class o_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=t.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const t=this.Ce(e),o=qg(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ne(e){const t=this.Ce(e),o=qg(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class gc{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class ku{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class wd{constructor(){this.Be=new o_,this.Le=new gc(this.Be),this.Ue=new ku(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Ol{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Ol(this.indexId,this.documentKey,this.arrayValue,o)}}function mc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=a_(i.arrayValue,e.arrayValue),0!==t?t:(t=a_(i.directionalValue,e.directionalValue),0!==t?t:Pt.comparator(i.documentKey,e.documentKey)))}function a_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Zg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=Sa(e);if(void 0!==t&&!this.ze(t))return!1;const o=Ys(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const g=o[u];if(!this.He(this.je,g)||!this.Je(this.Ge[d++],g))return!1;++u}for(;u<o.length;++u){const g=o[u];if(d>=this.Ge.length||!this.Je(this.Ge[d++],g))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Wv{constructor(){this.Ye=new La}addToCollectionParentIndex(e,t){return this.Ye.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getIndexType(e,t){return et.resolve(0)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}getMinOffset(e,t){return et.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,t){return et.resolve(oo.min())}updateCollectionGroup(e,t,o){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class La{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new lt(fr.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new lt(fr.comparator)).toArray()}}const yc=new Uint8Array(0);class sp{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new La,this.Ze=new ou(o=>zo(o),(o,u)=>nu(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const d={collectionId:o,parent:an(u)};return Yg(e).put(d)}return et.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[Ku(t),""],!1,!0);return Yg(e).W(u).next(d=>{for(const g of d){if(g.collectionId!==t)break;o.push(ga(g.parent))}return o})}addFieldIndex(e,t){const o=Rh(e),u={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(T=>[T.fieldPath.canonicalString(),T.kind])};var g;delete u.indexId;const d=o.add(u);if(t.indexState){const g=Lu(e);return d.next(T=>{g.put(rp(T,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=Rh(e),u=Lu(e),d=_c(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=_c(e);let u=!0;const d=new Map;return et.forEach(this.tn(t),g=>this.en(e,g).next(T=>{u&&(u=!!T),d.set(g,T)})).next(()=>{if(u){let g=gr();const T=[];return et.forEach(d,(L,H)=>{var J;pt("IndexedDbIndexManager",`Using index ${J=L,`id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map(yi=>`${yi.fieldPath}:${yi.kind}`).join(",")}`} to execute ${zo(t)}`);const Ee=function(yi,Is){const di=Sa(Is);if(void 0===di)return null;for(const _i of ec(yi,di.fieldPath))switch(_i.op){case"array-contains-any":return _i.value.arrayValue.values||[];case"array-contains":return[_i.value]}return null}(H,L),We=function(yi,Is){const di=new Map;for(const _i of Ys(Is))for(const eo of ec(yi,_i.fieldPath))switch(eo.op){case"==":case"in":di.set(_i.fieldPath.canonicalString(),eo.value);break;case"not-in":case"!=":return di.set(_i.fieldPath.canonicalString(),eo.value),Array.from(di.values())}return null}(H,L),ft=function(yi,Is){const di=[];let _i=!0;for(const eo of Ys(Is)){const Zc=0===eo.kind?oh(yi,eo.fieldPath,yi.startAt):Xc(yi,eo.fieldPath,yi.startAt);di.push(Zc.value),_i&&(_i=Zc.inclusive)}return new Wa(di,_i)}(H,L),_t=function(yi,Is){const di=[];let _i=!0;for(const eo of Ys(Is)){const Zc=0===eo.kind?Xc(yi,eo.fieldPath,yi.endAt):oh(yi,eo.fieldPath,yi.endAt);di.push(Zc.value),_i&&(_i=Zc.inclusive)}return new Wa(di,_i)}(H,L),qt=this.nn(L,H,ft),Cn=this.nn(L,H,_t),kr=this.sn(L,H,We),ci=this.rn(L.indexId,Ee,qt,ft.inclusive,Cn,_t.inclusive,kr);return et.forEach(ci,yi=>o.J(yi,t.limit).next(Is=>{Is.forEach(di=>{const _i=Pt.fromSegments(di.documentKey);g.has(_i)||(g=g.add(_i),T.push(_i))})}))}).next(()=>T)}return et.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,u,d,g,T){const L=(null!=t?t.length:1)*Math.max(o.length,d.length),H=L/(null!=t?t.length:1),J=[];for(let Ee=0;Ee<L;++Ee){const We=t?this.on(t[Ee/H]):yc,ft=this.un(e,We,o[Ee%H],u),_t=this.cn(e,We,d[Ee%H],g),qt=T.map(Cn=>this.un(e,We,Cn,!0));J.push(...this.createRange(ft,_t,qt))}return J}un(e,t,o,u){const d=new Ol(e,Pt.empty(),t,o);return u?d:d.Ke()}cn(e,t,o,u){const d=new Ol(e,Pt.empty(),t,o);return u?d.Ke():d}en(e,t){const o=new Zg(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const T of d)o.We(T)&&(!g||T.fields.length>g.fields.length)&&(g=T);return g})}getIndexType(e,t){let o=2;return et.forEach(this.tn(t),u=>this.en(e,u).next(d=>{d?0!==o&&d.fields.length<function(g){let T=new lt($r.comparator),L=!1;for(const H of g.filters){const J=H;J.field.isKeyField()||("array-contains"===J.op||"array-contains-any"===J.op?L=!0:T=T.add(J.field))}for(const H of g.orderBy)H.field.isKeyField()||(T=T.add(H.field));return T.size+(L?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new wd;for(const u of Ys(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const g=o.qe(u.kind);Nl.Te.ce(d,g)}return o.$e()}on(e){const t=new wd;return Nl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new wd;return Nl.Te.ce(de(this.databaseId,t),o.qe(function(u){const d=Ys(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let u=[];u.push(new wd);let d=0;for(const g of Ys(e)){const T=o[d++];for(const L of u)if(this.ln(t,g.fieldPath)&&tt(T))u=this.fn(u,g,T);else{const H=L.qe(g.kind);Nl.Te.ce(T,H)}}return this.dn(u)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const u=[...e],d=[];for(const g of o.arrayValue.values||[])for(const T of u){const L=new wd;L.seed(T.$e()),Nl.Te.ce(g,L.qe(t.kind)),d.push(L)}return d}ln(e,t){return!!e.filters.find(o=>o instanceof Ps&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Rh(e),u=Lu(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(d=>{const g=[];return et.forEach(d,T=>u.get([T.indexId,this.uid]).next(L=>{g.push(function(H,J){const Ee=J?new eu(J.sequenceNumber,new oo(sl(J.readTime),new Pt(ga(J.documentKey)),J.largestBatchId)):eu.empty(),We=H.fields.map(([ft,_t])=>new No($r.fromServerFormat(ft),_t));return new Po(H.indexId,H.collectionGroup,We,Ee)}(T,L))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:kn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Rh(e),d=Lu(e);return this._n(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(T=>et.forEach(T,L=>d.put(rp(L.indexId,this.user,g,o)))))}updateIndexEntries(e,t){const o=new Map;return et.forEach(t,(u,d)=>{const g=o.get(u.collectionGroup);return(g?et.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(T=>(o.set(u.collectionGroup,T),et.forEach(T,L=>this.wn(e,u,L).next(H=>{const J=this.mn(d,L);return H.isEqual(J)?et.resolve():this.gn(e,d,L,H,J)}))))})}yn(e,t,o,u){return _c(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,u){return _c(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const u=_c(e);let d=new lt(mc);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(g,T)=>{d=d.add(new Ol(o.indexId,t,T.arrayValue,T.directionalValue))}).next(()=>d)}mn(e,t){let o=new lt(mc);const u=this.an(t,e);if(null==u)return o;const d=Sa(t);if(null!=d){const g=e.data.field(d.fieldPath);if(tt(g))for(const T of g.arrayValue.values||[])o=o.add(new Ol(t.indexId,e.key,this.on(T),u))}else o=o.add(new Ol(t.indexId,e.key,yc,u));return o}gn(e,t,o,u,d){pt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(T,L,H,J,Ee){const We=T.getIterator(),ft=L.getIterator();let _t=Ft(We),qt=Ft(ft);for(;_t||qt;){let Cn=!1,kr=!1;if(_t&&qt){const ci=H(_t,qt);ci<0?kr=!0:ci>0&&(Cn=!0)}else null!=_t?kr=!0:Cn=!0;Cn?(J(qt),qt=Ft(ft)):kr?(Ee(_t),_t=Ft(We)):(_t=Ft(We),qt=Ft(ft))}}(u,d,mc,T=>{g.push(this.yn(e,t,o,T))},T=>{g.push(this.pn(e,t,o,T))}),et.waitFor(g)}_n(e){let t=1;return Lu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((g,T)=>mc(g,T)).filter((g,T,L)=>!T||0!==mc(g,L[T-1]));const u=[];u.push(e);for(const g of o){const T=mc(g,e),L=mc(g,t);if(0===T)u[0]=e.Ke();else if(T>0&&L<0)u.push(g),u.push(g.Ke());else if(L>0)break}u.push(t);const d=[];for(let g=0;g<u.length;g+=2)d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,yc,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,yc,[]]));return d}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Qg)}getMinOffset(e,t){return et.mapArray(this.tn(t),o=>this.en(e,o).next(u=>u||Tt())).next(Qg)}}function Yg(i){return Do(i,"collectionParents")}function _c(i){return Do(i,"indexEntries")}function Rh(i){return Do(i,"indexConfiguration")}function Lu(i){return Do(i,"indexState")}function Qg(i){wn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;vl(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new oo(e.readTime,e.documentKey,t)}const Xg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zo{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Zo(e,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xh(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let T=0;const L=o.Z({range:g},(J,Ee,We)=>(T++,We.delete()));d.push(L.next(()=>{wn(1===T)}));const H=[];for(const J of t.mutations){const Ee=Sh(e,J.key.path,t.batchId);d.push(u.delete(Ee)),H.push(J.key)}return et.waitFor(d).next(()=>H)}function Id(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Tt();e=i.noDocument}return JSON.stringify(e).length}Zo.DEFAULT_COLLECTION_PERCENTILE=10,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zo.DEFAULT=new Zo(41943040,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zo.DISABLED=new Zo(-1,0,0);class op{constructor(e,t,o,u){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,t,o,u){wn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new op(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).Z({index:"userMutationsIndex",range:o},(u,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=Ll(e),g=pu(e);return g.add({}).next(T=>{wn("number"==typeof T);const L=new _d(T,t,o,u),H=function(We,ft,_t){const qt=_t.baseMutations.map(kr=>hu(We.re,kr)),Cn=_t.mutations.map(kr=>hu(We.re,kr));return{userId:ft,batchId:_t.batchId,localWriteTimeMs:_t.localWriteTime.toMillis(),baseMutations:qt,mutations:Cn}}(this.It,this.userId,L),J=[];let Ee=new lt((We,ft)=>kn(We.canonicalString(),ft.canonicalString()));for(const We of u){const ft=Sh(this.userId,We.key.path,T);Ee=Ee.add(We.key.path.popLast()),J.push(g.put(H)),J.push(d.put(ft,Wf))}return Ee.forEach(We=>{J.push(this.indexManager.addToCollectionParentIndex(e,We))}),e.addOnCommittedListener(()=>{this.In[T]=L.keys()}),et.waitFor(J).next(()=>L)})}lookupMutationBatch(e,t){return pu(e).get(t).next(o=>o?(wn(o.userId===this.userId),Ou(this.It,o)):null)}Tn(e,t){return this.In[t]?et.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return pu(e).Z({index:"userMutationsIndex",range:u},(g,T,L)=>{T.userId===this.userId&&(wn(T.batchId>=o),d=Ou(this.It,T)),L.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return pu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,g)=>{o=d.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).W("userMutationsIndex",t).next(o=>o.map(u=>Ou(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=fu(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return Ll(e).Z({range:u},(g,T,L)=>{const[H,J,Ee]=g,We=ga(J);if(H===this.userId&&t.path.isEqual(We))return pu(e).get(Ee).next(ft=>{if(!ft)throw Tt();wn(ft.userId===this.userId),d.push(Ou(this.It,ft))});L.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new lt(kn);const u=[];return t.forEach(d=>{const g=fu(this.userId,d.path),T=IDBKeyRange.lowerBound(g),L=Ll(e).Z({range:T},(H,J,Ee)=>{const[We,ft,_t]=H,qt=ga(ft);We===this.userId&&d.path.isEqual(qt)?o=o.add(_t):Ee.done()});u.push(L)}),et.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=fu(this.userId,o),g=IDBKeyRange.lowerBound(d);let T=new lt(kn);return Ll(e).Z({range:g},(L,H,J)=>{const[Ee,We,ft]=L,_t=ga(We);Ee===this.userId&&o.isPrefixOf(_t)?_t.length===u&&(T=T.add(ft)):J.done()}).next(()=>this.En(e,T))}En(e,t){const o=[],u=[];return t.forEach(d=>{u.push(pu(e).get(d).next(g=>{if(null===g)throw Tt();wn(g.userId===this.userId),o.push(Ou(this.It,g))}))}),et.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return xh(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),et.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return et.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Ll(e).Z({range:o},(d,g,T)=>{if(d[0]===this.userId){const L=ga(d[1]);u.push(L)}else T.done()}).next(()=>{wn(0===u.length)})})}containsKey(e,t){return kl(e,this.userId,t)}Rn(e){return Jg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kl(i,e,t){const o=fu(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let g=!1;return Ll(i).Z({range:d,X:!0},(T,L,H)=>{const[J,Ee,We]=T;J===e&&Ee===u&&(g=!0),H.done()}).next(()=>g)}function pu(i){return Do(i,"mutations")}function Ll(i){return Do(i,"documentMutations")}function Jg(i){return Do(i,"mutationQueues")}class Fu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Fu(0)}static vn(){return new Fu(-1)}}class u_{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Fu(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Sn.fromTimestamp(new ni(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(wn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return vc(e).Z((g,T)=>{const L=Xs(T);L.sequenceNumber<=t&&null===o.get(L.targetId)&&(u++,d.push(this.removeTargetData(e,L)))}).next(()=>et.waitFor(d)).next(()=>u)}forEachTarget(e,t){return vc(e).Z((o,u)=>{const d=Xs(u);t(d)})}Vn(e){return em(e).get("targetGlobalKey").next(t=>(wn(null!==t),t))}Sn(e,t){return em(e).put("targetGlobalKey",t)}Dn(e,t){return vc(e).put(pc(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=zo(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return vc(e).Z({range:u,index:"queryTargetsIndex"},(g,T,L)=>{const H=Xs(T);nu(t,H.target)&&(d=H,L.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=ol(e);return t.forEach(g=>{const T=an(g.path);u.push(d.put({targetId:o,path:T})),u.push(this.referenceDelegate.addReference(e,o,g))}),et.waitFor(u)}removeMatchingKeys(e,t,o){const u=ol(e);return et.forEach(t,d=>{const g=an(d.path);return et.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=ol(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=ol(e);let d=gr();return u.Z({range:o,X:!0},(g,T,L)=>{const H=ga(g[1]),J=new Pt(H);d=d.add(J)}).next(()=>d)}containsKey(e,t){const o=an(t.path),u=IDBKeyRange.bound([o],[Ku(o)],!1,!0);let d=0;return ol(e).Z({index:"documentTargetsIndex",X:!0,range:u},([g,T],L,H)=>{0!==g&&(d++,H.done())}).next(()=>d>0)}se(e,t){return vc(e).get(t).next(o=>o?Xs(o):null)}}function vc(i){return Do(i,"targets")}function em(i){return Do(i,"targetGlobal")}function ol(i){return Do(i,"targetDocuments")}function tm([i,e],[t,o]){const u=kn(i,t);return 0===u?kn(e,o):u}class l_{constructor(e){this.xn=e,this.buffer=new lt(tm),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();tm(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nm{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;pt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,De.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Oo(o)?pt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield wo(o)}yield t.Fn(3e5)}))}}class ap{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return et.resolve(_.at);const o=new l_(t);return this.$n.forEachTarget(e,u=>o.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.On(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(Xg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xg):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,u,d,g,T,L,H;const J=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ee=>(Ee>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ee}`),u=this.params.maximumSequenceNumbersToCollect):u=Ee,g=Date.now(),this.nthSequenceNumber(e,u))).next(Ee=>(o=Ee,T=Date.now(),this.removeTargets(e,o,t))).next(Ee=>(d=Ee,L=Date.now(),this.removeOrphanedDocuments(e,o))).next(Ee=>(H=Date.now(),dn()<=Ie.in.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-J}ms\n\tDetermined least recently used ${u} in `+(T-g)+`ms\n\tRemoved ${d} targets in `+(L-T)+`ms\n\tRemoved ${Ee} documents in `+(H-L)+`ms\nTotal Duration: ${H-J}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:Ee})))}}class rm{constructor(e,t){this.db=e,this.garbageCollector=new ap(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,u)=>t(u))}addReference(e,t,o){return Ec(e,o)}removeReference(e,t,o){return Ec(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Ec(e,t)}Gn(e,t){return function(o,u){let d=!1;return Jg(o).tt(g=>kl(o,g,u).next(T=>(T&&(d=!0),et.resolve(!T)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(g,T)=>{if(T<=t){const L=this.Gn(e,g).next(H=>{if(!H)return d++,o.getEntry(e,g).next(()=>(o.removeEntry(g,Sn.min()),ol(e).delete([0,an(g.path)])))});u.push(L)}}).next(()=>et.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Ec(e,t)}Kn(e,t){const o=ol(e);let u,d=_.at;return o.Z({index:"documentTargetsIndex"},([g,T],{path:L,sequenceNumber:H})=>{0===g?(d!==_.at&&t(new Pt(ga(u)),d),d=H,u=L):d=_.at}).next(()=>{d!==_.at&&t(new Pt(ga(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ec(i,e){return ol(i).put((o=i.currentSequenceNumber,{targetId:0,path:an(e.path),sequenceNumber:o}));var o}class im{constructor(){this.changes=new ou(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?et.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class c_{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return ul(e).put(o)}removeEntry(e,t,o){return ul(e).delete(function(u,d){const g=u.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],bo(d),g[g.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=Zr.newInvalidDocument(t);return ul(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(wc(t))},(u,d)=>{o=this.jn(t,d)}).next(()=>o)}Wn(e,t){let o={size:0,document:Zr.newInvalidDocument(t)};return ul(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(wc(t))},(u,d)=>{o={document:this.jn(t,d),size:Id(d)}}).next(()=>o)}getEntries(e,t){let o=Ko();return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);o=o.insert(u,g)}).next(()=>o)}Hn(e,t){let o=Ko(),u=new te(Pt.comparator);return this.zn(e,t,(d,g)=>{const T=this.jn(d,g);o=o.insert(d,T),u=u.insert(d,Id(g))}).next(()=>({documents:o,Jn:u}))}zn(e,t,o){if(t.isEmpty())return et.resolve();let u=new lt(d_);t.forEach(L=>u=u.add(L));const d=IDBKeyRange.bound(wc(u.first()),wc(u.last())),g=u.getIterator();let T=g.getNext();return ul(e).Z({index:"documentKeyIndex",range:d},(L,H,J)=>{const Ee=Pt.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;T&&d_(T,Ee)<0;)o(T,null),T=g.getNext();T&&T.isEqual(Ee)&&(o(T,H),T=g.hasNext()?g.getNext():null),T?J.j(wc(T)):J.done()}).next(()=>{for(;T;)o(T,null),T=g.hasNext()?g.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),bo(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ul(e).W(IDBKeyRange.bound(u,d,!0)).next(g=>{let T=Ko();for(const L of g){const H=this.jn(Pt.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);T=T.insert(H.key,H)}return T})}getAllFromCollectionGroup(e,t,o,u){let d=Ko();const g=om(t,o),T=om(t,oo.max());return ul(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,T,!0)},(L,H,J)=>{const Ee=this.jn(Pt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);d=d.insert(Ee.key,Ee),d.size===u&&J.done()}).next(()=>d)}newChangeBuffer(e){return new sm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return al(e).get("remoteDocumentGlobalKey").next(t=>(wn(!!t),t))}Qn(e,t){return al(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function r_(i,e){let t;if(e.document)t=dd(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Pt.fromSegments(e.noDocument.path),u=sl(e.noDocument.readTime);t=Zr.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Tt();{const o=Pt.fromSegments(e.unknownDocument.path),u=sl(e.unknownDocument.version);t=Zr.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new ni(o[0],o[1]);return Sn.fromTimestamp(u)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(Sn.min()))return o}return Zr.newInvalidDocument(e)}}function up(i){return new c_(i)}class sm extends im{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ou(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new lt((d,g)=>kn(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const T=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,T.readTime)),g.isValidDocument()){const L=zg(this.Yn.It,g);u=u.add(d.path.popLast()),o+=Id(L)-T.size,t.push(this.Yn.addEntry(e,d,L))}else if(o-=T.size,this.trackRemovals){const L=zg(this.Yn.It,g.convertToNoDocument(Sn.min()));t.push(this.Yn.addEntry(e,d,L))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,o)),et.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:u})=>(u.forEach((d,g)=>{this.Xn.set(d,{size:g,readTime:o.get(d).readTime})}),o))}}function al(i){return Do(i,"remoteDocumentGlobal")}function ul(i){return Do(i,"remoteDocumentsV14")}function wc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function om(i,e){const t=e.documentKey.path.toArray();return[i,bo(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function d_(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=kn(t[d],o[d]),u)return u;return u=kn(t.length,o.length),u||(u=kn(t[t.length-2],o[o.length-2]),u||kn(t[t.length-1],o[o.length-1]))}class Ph{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class am{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.getBaseDocument(e,t,o))).next(u=>(null!==o&&Cl(o.mutation,u,mn.empty(),ni.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,gr()).next(()=>o))}getLocalViewOfDocuments(e,t,o=gr()){const u=Bo();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let g=au();return d.forEach((T,L)=>{g=g.insert(T,L.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const o=Bo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,gr()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,T)=>{t.set(g,T)})})}computeViews(e,t,o,u){let d=Ko();const g=Ju(),T=Ju();return t.forEach((L,H)=>{const J=o.get(H.key);u.has(H.key)&&(void 0===J||J.mutation instanceof Oa)?d=d.insert(H.key,H):void 0!==J&&(g.set(H.key,J.mutation.getFieldMask()),Cl(J.mutation,H,J.mutation.getFieldMask(),ni.now()))}),this.recalculateAndSaveOverlays(e,d).next(L=>(L.forEach((H,J)=>g.set(H,J)),t.forEach((H,J)=>{var Ee;return T.set(H,new Ph(J,null!==(Ee=g.get(H))&&void 0!==Ee?Ee:null))}),T))}recalculateAndSaveOverlays(e,t){const o=Ju();let u=new te((g,T)=>g-T),d=gr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const T of g)T.keys().forEach(L=>{const H=t.get(L);if(null===H)return;let J=o.get(L)||mn.empty();J=T.applyToLocalView(H,J),o.set(L,J);const Ee=(u.get(T.batchId)||gr()).add(L);u=u.insert(T.batchId,Ee)})}).next(()=>{const g=[],T=u.getReverseIterator();for(;T.hasNext();){const L=T.getNext(),H=L.key,J=L.value,Ee=ac();J.forEach(We=>{if(!d.has(We)){const ft=Bf(t.get(We),o.get(We));null!==ft&&Ee.set(We,ft),d=d.add(We)}}),g.push(this.documentOverlayCache.saveOverlays(e,H,Ee))}return et.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Pt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ic(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):et.resolve(Bo());let T=-1,L=d;return g.next(H=>et.forEach(H,(J,Ee)=>(T<Ee.largestBatchId&&(T=Ee.largestBatchId),d.get(J)?et.resolve():this.getBaseDocument(e,J,Ee).next(We=>{L=L.insert(J,We)}))).next(()=>this.populateOverlays(e,H,d)).next(()=>this.computeViews(e,L,H,gr())).next(J=>({batchId:T,changes:jf(J)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pt(t)).next(o=>{let u=au();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=au();return this.indexManager.getCollectionParents(e,u).next(g=>et.forEach(g,T=>{const L=(H=t,J=T.child(u),new Ka(J,null,H.explicitOrderBy.slice(),H.filters.slice(),H.limit,H.limitType,H.startAt,H.endAt));var H,J;return this.getDocumentsMatchingCollectionQuery(e,L,o).next(H=>{H.forEach((J,Ee)=>{d=d.insert(J,Ee)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(d=>{d.forEach((T,L)=>{const H=L.getKey();null===u.get(H)&&(u=u.insert(H,Zr.newInvalidDocument(H)))});let g=au();return u.forEach((T,L)=>{const H=d.get(T);void 0!==H&&Cl(H.mutation,L,mn.empty(),ni.now()),la(t,L)&&(g=g.insert(T,L))}),g})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):et.resolve(Zr.newInvalidDocument(t))}}class um{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return et.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:Os(o.createTime)}),et.resolve()}getNamedQuery(e,t){return et.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:Mh(o.bundledQuery),readTime:Os(o.readTime)}),et.resolve();var o}}class lm{constructor(){this.overlays=new te(Pt.comparator),this.es=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Bo();return et.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.ue(e,t,d)}),et.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(o)),et.resolve()}getOverlaysForCollection(e,t,o){const u=Bo(),d=t.length+1,g=new Pt(t.child("")),T=this.overlays.getIteratorFrom(g);for(;T.hasNext();){const L=T.getNext().value,H=L.getKey();if(!t.isPrefixOf(H.path))break;H.path.length===d&&L.largestBatchId>o&&u.set(L.getKey(),L)}return et.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new te((H,J)=>H-J);const g=this.overlays.getIterator();for(;g.hasNext();){const H=g.getNext().value;if(H.getKey().getCollectionGroup()===t&&H.largestBatchId>o){let J=d.get(H.largestBatchId);null===J&&(J=Bo(),d=d.insert(H.largestBatchId,J)),J.set(H.getKey(),H)}}const T=Bo(),L=d.getIterator();for(;L.hasNext()&&(L.getNext().value.forEach((H,J)=>T.set(H,J)),!(T.size()>=u)););return et.resolve(T)}ue(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new ep(t,o));let d=this.es.get(t);void 0===d&&(d=gr(),this.es.set(t,d)),this.es.set(t,d.add(o.key))}}class Nh{constructor(){this.ns=new lt(Js.ss),this.rs=new lt(Js.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new Js(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new Js(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Pt(new fr([])),o=new Js(t,e),u=new Js(t,e+1),d=[];return this.rs.forEachInRange([o,u],g=>{this.cs(g),d.push(g.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Pt(new fr([])),o=new Js(t,e),u=new Js(t,e+1);let d=gr();return this.rs.forEachInRange([o,u],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new Js(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Js{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Pt.comparator(e.key,t.key)||kn(e._s,t._s)}static os(e,t){return kn(e._s,t._s)||Pt.comparator(e.key,t.key)}}class cm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new lt(Js.ss)}checkEmpty(e){return et.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const g=new _d(d,t,o,u);this.mutationQueue.push(g);for(const T of u)this.gs=this.gs.add(new Js(T.key,d)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return et.resolve(g)}lookupMutationBatch(e,t){return et.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return et.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Js(t,0),u=new Js(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([o,u],g=>{const T=this.ys(g._s);d.push(T)}),et.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new lt(kn);return t.forEach(u=>{const d=new Js(u,0),g=new Js(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,g],T=>{o=o.add(T._s)})}),et.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Pt.isDocumentKey(d)||(d=d.child(""));const g=new Js(new Pt(d),0);let T=new lt(kn);return this.gs.forEachWhile(L=>{const H=L.key.path;return!!o.isPrefixOf(H)&&(H.length===u&&(T=T.add(L._s)),!0)},g),et.resolve(this.Is(T))}Is(e){const t=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){wn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return et.forEach(t.mutations,u=>{const d=new Js(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new Js(t,0),u=this.gs.firstAfterOrEqual(o);return et.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return et.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Oh{constructor(e){this.Es=e,this.docs=new te(Pt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,g=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return et.resolve(o?o.document.mutableCopy():Zr.newInvalidDocument(t))}getEntries(e,t){let o=Ko();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():Zr.newInvalidDocument(u))}),et.resolve(o)}getAllFromCollection(e,t,o){let u=Ko();const d=new Pt(t.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:T,value:{document:L}}=g.getNext();if(!t.isPrefixOf(T.path))break;T.path.length>t.length+1||vl(tu(L),o)<=0||(u=u.insert(L.key,L.mutableCopy()))}return et.resolve(u)}getAllFromCollectionGroup(e,t,o,u){Tt()}As(e,t){return et.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new kh(this)}getSize(e){return et.resolve(this.size)}}class kh extends im{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),et.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class dm{constructor(e){this.persistence=e,this.Rs=new ou(t=>zo(t),nu),this.lastRemoteSnapshotVersion=Sn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Nh,this.targetCount=0,this.vs=Fu.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,u)=>t(u)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),et.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Fu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.Dn(t),et.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Rs.forEach((g,T)=>{T.sequenceNumber<=t&&null===o.get(T.targetId)&&(this.Rs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,T.targetId)),u++)}),et.waitFor(d).next(()=>u)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return et.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),et.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),et.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),et.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return et.resolve(o)}containsKey(e,t){return et.resolve(this.Ps.containsKey(t))}}class Lh{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new _(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new dm(this),this.indexManager=new Wv,this.remoteDocumentCache=new Oh(o=>this.referenceDelegate.xs(o)),this.It=new tp(t),this.Ns=new um(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new cm(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){pt("MemoryPersistence","Starting transaction:",e);const u=new hm(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(d=>this.referenceDelegate.Os(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Ms(e,t){return et.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class hm extends Qc{constructor(e){super(),this.currentSequenceNumber=e}}class Ic{constructor(e){this.persistence=e,this.Fs=new Nh,this.$s=null}static Bs(e){return new Ic(e)}get Ls(){if(this.$s)return this.$s;throw Tt()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),et.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),et.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Ls,o=>{const u=Pt.fromPath(o);return this.Us(e,u).next(d=>{d||t.removeEntry(u,Sn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return et.or([()=>et.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Dd{constructor(e){this.It=e}$(e,t,o,u){const d=new Fi("createOrUpgrade",t);var T;o<1&&u>=1&&(e.createObjectStore("owner"),(T=e).createObjectStore("mutationQueues",{keyPath:"userId"}),T.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Th,{unique:!0}),T.createObjectStore("documentMutations"),fm(e),function(T){T.createObjectStore("remoteDocuments")}(e));let g=et.resolve();return o<3&&u>=3&&(0!==o&&(function(T){T.deleteObjectStore("targetDocuments"),T.deleteObjectStore("targets"),T.deleteObjectStore("targetGlobal")}(e),fm(e)),g=g.next(()=>function(T){const L=T.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Sn.min().toTimestamp(),targetCount:0};return L.put("targetGlobalKey",H)}(d))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(T,L){return L.store("mutations").W().next(H=>{T.deleteObjectStore("mutations"),T.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Th,{unique:!0});const J=L.store("mutations"),Ee=H.map(We=>J.put(We));return et.waitFor(Ee)})}(e,d))),g=g.next(()=>{!function(T){T.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.qs(d))),o<6&&u>=6&&(g=g.next(()=>(function(T){T.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),o<7&&u>=7&&(g=g.next(()=>this.Gs(d))),o<8&&u>=8&&(g=g.next(()=>this.Qs(e,d))),o<9&&u>=9&&(g=g.next(()=>{!function(T){T.objectStoreNames.contains("remoteDocumentChanges")&&T.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.js(d))),o<11&&u>=11&&(g=g.next(()=>{(function(T){T.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(T){T.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(T){const L=T.createObjectStore("documentOverlays",{keyPath:Yf});L.createIndex("collectionPathOverlayIndex",yd,{unique:!1}),L.createIndex("collectionGroupOverlayIndex",e_,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(T){const L=T.createObjectStore("remoteDocumentsV14",{keyPath:Ch});L.createIndex("documentKeyIndex",Kf),L.createIndex("collectionGroupIndex",qf)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.zs(e,d))),o<15&&u>=15&&(g=g.next(()=>function(T){T.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),T.createObjectStore("indexState",{keyPath:Ah}).createIndex("sequenceNumberIndex",jg,{unique:!1}),T.createObjectStore("indexEntries",{keyPath:Zf}).createIndex("documentKeyIndex",Jy,{unique:!1})}(e))),g}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=Id(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>et.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(T=>et.forEach(T,L=>{wn(L.userId===d.userId);const H=Ou(this.It,L);return xh(e,d.userId,H).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((g,T)=>{const L=new fr(g),H=[0,an(L)];d.push(t.get(H).next(J=>J?et.resolve():t.put({targetId:0,path:an(L),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>et.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:fc});const o=t.store("collectionParents"),u=new La,d=g=>{if(u.add(g)){const T=g.lastSegment(),L=g.popLast();return o.put({collectionId:T,parent:an(L)})}};return t.store("remoteDocuments").Z({X:!0},(g,T)=>{const L=new fr(g);return d(L.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([g,T,L],H)=>{const J=ga(T);return d(J.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,u)=>{const d=Xs(u),g=pc(this.It,d);return t.put(g)})}Ws(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,g)=>{const T=t.store("remoteDocumentsV14"),L=(H=g,H.document?new Pt(fr.fromString(H.document.name).popFirst(5)):H.noDocument?Pt.fromSegments(H.noDocument.path):H.unknownDocument?Pt.fromSegments(H.unknownDocument.path):Tt()).path.toArray();var H;const J={prefixPath:L.slice(0,L.length-2),collectionGroup:L[L.length-2],documentId:L[L.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};u.push(T.put(J))}).next(()=>et.waitFor(u))}zs(e,t){const o=t.store("mutations"),u=up(this.It),d=new Lh(Ic.Bs,this.It.re);return o.W().next(g=>{const T=new Map;return g.forEach(L=>{var H;let J=null!==(H=T.get(L.userId))&&void 0!==H?H:gr();Ou(this.It,L).keys().forEach(Ee=>J=J.add(Ee)),T.set(L.userId,J)}),et.forEach(T,(L,H)=>{const J=new vr(H),Ee=vd.oe(this.It,J),We=d.getIndexManager(J),ft=op.oe(J,this.It,We,d.referenceDelegate);return new am(u,ft,Ee,We).recalculateAndSaveOverlaysForDocumentKeys(new Xf(t,_.at),L).next()})})}}function fm(i){i.createObjectStore("targetDocuments",{keyPath:gd}).createIndex("documentTargetsIndex",md,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pd,{unique:!0}),i.createObjectStore("targetGlobal")}const Fh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lp{constructor(e,t,o,u,d,g,T,L,H,J,Ee=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=d,this.window=g,this.document=T,this.Js=H,this.Ys=J,this.Xs=Ee,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=We=>Promise.resolve(),!lp.C())throw new dt(Ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rm(this,u),this.ii=t+"main",this.It=new tp(L),this.ri=new ao(this.ii,this.Xs,new Dd(this.It)),this.Cs=new u_(this.referenceDelegate,this.It),this.remoteDocumentCache=up(this.It),this.Ns=new i_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===J&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new dt(Ye.FAILED_PRECONDITION,Fh);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new _(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,De.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,De.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,De.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Td(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Oo(e))return pt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return bd(e).get("owner").next(t=>et.resolve(this.mi(t)))}gi(e){return Td(e).delete(this.clientId)}yi(){var e=this;return(0,De.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Do(o,"clientMetadata");return u.W().next(d=>{const g=e.Ii(d,18e5),T=d.filter(L=>-1===g.indexOf(L));return et.forEach(T,L=>u.delete(L.clientId)).next(()=>T)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?et.resolve(!0):bd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new dt(Ye.FAILED_PRECONDITION,Fh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Td(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const g=!this.inForeground&&u.inForeground,T=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||g&&T)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&pt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,De.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Xf(t,_.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Td(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return op.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sp(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return vd.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){pt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(g=this.Xs)?n_:14===g?Gg:13===g?Qf:12===g?t_:11===g?Hg:void Tt();var g;let T;return this.ri.runTransaction(e,u,d,L=>(T=new Xf(L,this.Ss?this.Ss.next():_.at),"readwrite-primary"===t?this.fi(T).next(H=>!!H||this.di(T)).next(H=>{if(!H)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new dt(Ye.FAILED_PRECONDITION,Ca);return o(T)}).next(H=>this.wi(T).next(()=>H)):this.Vi(T).next(()=>o(T)))).then(L=>(T.raiseOnCommittedEvent(),L))}Vi(e){return bd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new dt(Ye.FAILED_PRECONDITION,Fh)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bd(e).put("owner",t)}static C(){return ao.C()}_i(e){const t=bd(e);return t.get("owner").next(o=>this.mi(o)?(pt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):et.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(wr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ke.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return pt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return wr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bd(i){return Do(i,"owner")}function Td(i){return Do(i,"clientMetadata")}function Sd(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Uh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=u}static Ci(e,t){let o=gr(),u=gr();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Uh(e,t.fromCache,o,u)}}class h_{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,u){return this.ki(e,t).next(d=>d||this.Oi(e,t,u,o)).next(d=>d||this.Mi(e,t))}ki(e,t){if(tc(t))return et.resolve(null);let o=Fo(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=Yu(t,null,"F"),o=Fo(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const g=gr(...d);return this.Ni.getDocuments(e,g).next(T=>this.indexManager.getMinOffset(e,o).next(L=>{const H=this.Fi(t,T);return this.$i(t,H,g,L.readTime)?this.ki(e,Yu(t,null,"F")):this.Bi(e,H,t,L)}))})))}Oi(e,t,o,u){return tc(t)||u.isEqual(Sn.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(d=>{const g=this.Fi(t,d);return this.$i(t,g,o,u)?this.Mi(e,t):(dn()<=Ie.in.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),nd(t)),this.Bi(e,g,t,qu(u,-1)))})}Fi(e,t){let o=new lt(rd(e));return t.forEach((u,d)=>{la(e,d)&&(o=o.add(d))}),o}$i(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Mi(e,t){return dn()<=Ie.in.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",nd(t)),this.Ni.getDocumentsMatchingQuery(e,t,oo.min())}Bi(e,t,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class pm{constructor(e,t,o,u){this.persistence=e,this.Li=t,this.It=u,this.Ui=new te(kn),this.qi=new ou(d=>zo(d),nu),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new am(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function gm(i,e,t,o){return new pm(i,e,t,o)}function cp(i,e){return dp.apply(this,arguments)}function dp(){return dp=(0,De.Z)(function*(i,e){const t=Ct(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const g=[],T=[];let L=gr();for(const H of u){g.push(H.batchId);for(const J of H.mutations)L=L.add(J.key)}for(const H of d){T.push(H.batchId);for(const J of H.mutations)L=L.add(J.key)}return t.localDocuments.getDocuments(o,L).next(H=>({ji:H,removedBatchIds:g,addedBatchIds:T}))})})}),dp.apply(this,arguments)}function f_(i,e){const t=Ct(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(g,T,L,H){const J=L.batch,Ee=J.keys();let We=et.resolve();return Ee.forEach(ft=>{We=We.next(()=>H.getEntry(T,ft)).next(_t=>{const qt=L.docVersions.get(ft);wn(null!==qt),_t.version.compareTo(qt)<0&&(J.applyToRemoteDocument(_t,L),_t.isValidDocument()&&(_t.setReadTime(L.commitVersion),H.addEntry(_t)))})}),We.next(()=>g.mutationQueue.removeMutationBatch(T,J))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(g){let T=gr();for(let L=0;L<g.mutationResults.length;++L)g.mutationResults[L].transformResults.length>0&&(T=T.add(g.batch.mutations[L].key));return T}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function Fa(i){const e=Ct(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function p_(i,e){const t=Ct(i),o=e.snapshotVersion;let u=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.Ui;const T=[];e.targetChanges.forEach((J,Ee)=>{const We=u.get(Ee);if(!We)return;T.push(t.Cs.removeMatchingKeys(d,J.removedDocuments,Ee).next(()=>t.Cs.addMatchingKeys(d,J.addedDocuments,Ee)));let ft=We.withSequenceNumber(d.currentSequenceNumber);var _t,qt,Cn;e.targetMismatches.has(Ee)?ft=ft.withResumeToken(pr.EMPTY_BYTE_STRING,Sn.min()).withLastLimboFreeSnapshotVersion(Sn.min()):J.resumeToken.approximateByteSize()>0&&(ft=ft.withResumeToken(J.resumeToken,o)),u=u.insert(Ee,ft),qt=ft,Cn=J,(0===(_t=We).resumeToken.approximateByteSize()||qt.snapshotVersion.toMicroseconds()-_t.snapshotVersion.toMicroseconds()>=3e8||Cn.addedDocuments.size+Cn.modifiedDocuments.size+Cn.removedDocuments.size>0)&&T.push(t.Cs.updateTargetData(d,ft))});let L=Ko(),H=gr();if(e.documentUpdates.forEach(J=>{e.resolvedLimboDocuments.has(J)&&T.push(t.persistence.referenceDelegate.updateLimboDocument(d,J))}),T.push(hp(d,g,e.documentUpdates).next(J=>{L=J.Wi,H=J.zi})),!o.isEqual(Sn.min())){const J=t.Cs.getLastRemoteSnapshotVersion(d).next(Ee=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,o));T.push(J)}return et.waitFor(T).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,L,H)).next(()=>L)}).then(d=>(t.Ui=u,d))}function hp(i,e,t){let o=gr(),u=gr();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let g=Ko();return t.forEach((T,L)=>{const H=d.get(T);L.isFoundDocument()!==H.isFoundDocument()&&(u=u.add(T)),L.isNoDocument()&&L.version.isEqual(Sn.min())?(e.removeEntry(T,L.readTime),g=g.insert(T,L)):!H.isValidDocument()||L.version.compareTo(H.version)>0||0===L.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(L),g=g.insert(T,L)):pt("LocalStore","Ignoring outdated watch update for ",T,". Current version:",H.version," Watch version:",L.version)}),{Wi:g,zi:u}})}function g_(i,e){const t=Ct(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Dc(i,e){const t=Ct(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Cs.getTargetData(o,e).next(d=>d?(u=d,et.resolve(u)):t.Cs.allocateTargetId(o).next(g=>(u=new il(e,g,0,o.currentSequenceNumber),t.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function bc(i,e,t){return fp.apply(this,arguments)}function fp(){return fp=(0,De.Z)(function*(i,e,t){const o=Ct(i),u=o.Ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!Oo(g))throw g;pt("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),fp.apply(this,arguments)}function Cd(i,e,t){const o=Ct(i);let u=Sn.min(),d=gr();return o.persistence.runTransaction("Execute query","readonly",g=>function(T,L,H){const J=Ct(T),Ee=J.qi.get(H);return void 0!==Ee?et.resolve(J.Ui.get(Ee)):J.Cs.getTargetData(L,H)}(o,g,Fo(e)).next(T=>{if(T)return u=T.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(g,T.targetId).next(L=>{d=L})}).next(()=>o.Li.getDocumentsMatchingQuery(g,e,t?u:Sn.min(),t?d:gr())).next(T=>(_m(o,Au(e),T),{documents:T,Hi:d})))}function mm(i,e){const t=Ct(i),o=Ct(t.Cs),u=t.Ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.se(d,e).next(g=>g?g.target:null))}function ym(i,e){const t=Ct(i),o=t.Ki.get(e)||Sn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,qu(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(_m(t,e,u),u))}function _m(i,e,t){let o=i.Ki.get(e)||Sn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ki.set(e,o)}function Bh(){return Bh=(0,De.Z)(function*(i,e,t,o){const u=Ct(i);let d=gr(),g=Ko();for(const H of t){const J=e.Ji(H.metadata.name);H.document&&(d=d.add(J));const Ee=e.Yi(H);Ee.setReadTime(e.Xi(H.metadata.readTime)),g=g.insert(J,Ee)}const T=u.Gi.newChangeBuffer({trackRemovals:!0}),L=yield Dc(u,(H=o,Fo(Na(fr.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",H=>hp(H,T,g).next(J=>(T.apply(H),J)).next(J=>u.Cs.removeMatchingKeysForTargetId(H,L.targetId).next(()=>u.Cs.addMatchingKeys(H,d,L.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(H,J.Wi,J.zi)).next(()=>J.Wi)))}),Bh.apply(this,arguments)}function vm(i,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,De.Z)(function*(i,e,t=gr()){const o=yield Dc(i,Fo(Mh(e.bundledQuery))),u=Ct(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=Os(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Ns.saveNamedQuery(d,e);const T=o.withResumeToken(pr.EMPTY_BYTE_STRING,g);return u.Ui=u.Ui.insert(T.targetId,T),u.Cs.updateTargetData(d,T).next(()=>u.Cs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,o.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),Vh.apply(this,arguments)}function Em(i,e){return`firestore_clients_${i}_${e}`}function wm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function $h(i,e){return`firestore_targets_${i}_${e}`}class jh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new dt(u.error.code,u.error.message))),g?new jh(e,t,u.state,d):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tc{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new dt(o.error.code,o.error.message))),d?new Tc(e,o.state,u):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=Ru();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=pa(o.activeTargetIds[g]),d=d.add(o.activeTargetIds[g]);return u?new Hh(e,d):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class pp{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pp(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Im{constructor(){this.activeTargetIds=Ru()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gh{constructor(e,t,o,u,d){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new te(kn),this.started=!1,this.cr=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=Em(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Im),this.lr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(T){return`firestore_bundle_loaded_v2_${T}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,De.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(Em(e.persistenceKey,u));if(d){const g=Hh.Zi(u,d);g&&(e.ur=e.ur.insert(g.clientId,g))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem($h(this.persistenceKey,e));if(o){const u=Tc.Zi(e,o);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($h(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return pt("SharedClientState","READ",e,t),t}setItem(e,t){pt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){pt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(pt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,De.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Vr(u,null)}{const u=t.Sr(o.key,o.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.yr(o.newValue);if(u)return t.pr(u)}}else if(o.key===t.hr){const u=function(d){let g=_.at;if(null!=d)try{const T=JSON.parse(d);wn("number"==typeof T),g=T}catch(T){wr("SharedClientState","Failed to read sequence number from WebStorage",T)}return g}(o.newValue);u!==_.at&&t.sequenceNumberHandler(u)}else if(o.key===t.mr){const u=t.Or(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Mr(d)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const u=new jh(this.currentUser,e,t,o),d=wm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=wm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const u=$h(this.persistenceKey,e),d=new Tc(e,t,o);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return Hh.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return jh.Zi(new vr(void 0!==o[2]?o[2]:null),u,t)}Nr(e,t){const o=this._r.exec(e),u=Number(o[1]);return Tc.Zi(u,t)}yr(e){return pp.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,De.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);pt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(o),g=[],T=[];return d.forEach(L=>{u.has(L)||g.push(L)}),u.forEach(L=>{d.has(L)||T.push(L)}),this.syncEngine.Br(g,T).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Ru();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class gp{constructor(){this.Lr=new Im,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Im,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fl{qr(e){}shutdown(){}}class Dm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const mp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yp{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class m_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,u,d){const g=this.ho(e,t);pt("RestConnection","Sending: ",g,o);const T={};return this.lo(T,u,d),this.fo(e,g,T,o).then(L=>(pt("RestConnection","Received: ",L),L),L=>{throw ti("RestConnection",`${e} failed with error: `,L,"url: ",g,"request:",o),L})}_o(e,t,o,u,d,g){return this.ao(e,t,o,u,d)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ho(e,t){return`${this.oo}/v1/${t}:${mp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,u){return new Promise((d,g)=>{const T=new na;T.listenOnce(Es.COMPLETE,()=>{try{switch(T.getLastErrorCode()){case ss.NO_ERROR:const H=T.getResponseJson();pt("Connection","XHR received:",JSON.stringify(H)),d(H);break;case ss.TIMEOUT:pt("Connection",'RPC "'+e+'" timed out'),g(new dt(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case ss.HTTP_ERROR:const J=T.getStatus();if(pt("Connection",'RPC "'+e+'" failed with status:',J,"response text:",T.getResponseText()),J>0){const Ee=T.getResponseJson().error;if(Ee&&Ee.status&&Ee.message){const We=function(ft){const _t=ft.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(_t)>=0?_t:Ye.UNKNOWN}(Ee.status);g(new dt(We,Ee.message))}else g(new dt(Ye.UNKNOWN,"Server responded with status "+T.getStatus()))}else g(new dt(Ye.UNAVAILABLE,"Connection failed."));break;default:Tt()}}finally{pt("Connection",'RPC "'+e+'" completed.')}});const L=JSON.stringify(u);T.send(t,"POST",L,o,15)})}wo(e,t,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Go(),g=Ro(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(T.xmlHttpFactory=new ta({})),this.lo(T.initMessageHeaders,t,o),T.encodeInitMessageHeaders=!0;const L=u.join("");pt("Connection","Creating WebChannel: "+L,T);const H=d.createWebChannel(L,T);let J=!1,Ee=!1;const We=new yp({Hr:_t=>{Ee?pt("Connection","Not sending because WebChannel is closed:",_t):(J||(pt("Connection","Opening WebChannel transport."),H.open(),J=!0),pt("Connection","WebChannel sending:",_t),H.send(_t))},Jr:()=>H.close()}),ft=(_t,qt,Cn)=>{_t.listen(qt,kr=>{try{Cn(kr)}catch(ci){setTimeout(()=>{throw ci},0)}})};return ft(H,io.EventType.OPEN,()=>{Ee||pt("Connection","WebChannel transport opened.")}),ft(H,io.EventType.CLOSE,()=>{Ee||(Ee=!0,pt("Connection","WebChannel transport closed"),We.io())}),ft(H,io.EventType.ERROR,_t=>{Ee||(Ee=!0,ti("Connection","WebChannel transport errored:",_t),We.io(new dt(Ye.UNAVAILABLE,"The operation could not be completed")))}),ft(H,io.EventType.MESSAGE,_t=>{var qt;if(!Ee){const Cn=_t.data[0];wn(!!Cn);const kr=Cn,ci=kr.error||(null===(qt=kr[0])||void 0===qt?void 0:qt.error);if(ci){pt("Connection","WebChannel received error:",ci);const yi=ci.status;let Is=function(_i){const eo=Ns[_i];if(void 0!==eo)return ud(eo)}(yi),di=ci.message;void 0===Is&&(Is=Ye.INTERNAL,di="Unknown error status: "+yi+" with message "+ci.message),Ee=!0,We.io(new dt(Is,di)),H.close()}else pt("Connection","WebChannel received:",Cn),We.ro(Cn)}}),ft(g,ea.STAT_EVENT,_t=>{_t.stat===Hi.PROXY?pt("Connection","Detected buffering proxy"):_t.stat===Hi.NOPROXY&&pt("Connection","Detected no buffering proxy")}),setTimeout(()=>{We.so()},0),We}}function y_(){return typeof window<"u"?window:null}function _p(){return typeof document<"u"?document:null}function zh(i){return new dc(i,!0)}class vp{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=u,this.po=d,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-o);u>0&&pt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Ep{constructor(e,t,o,u,d,g,T,L){this.Hs=e,this.vo=o,this.Vo=u,this.So=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=T,this.listener=L,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new vp(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,De.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,De.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,De.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===Ye.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Do===t&&this.Qo(o,u)},o=>{e(()=>{const u=new dt(Ye.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(u)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.jo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.No.Ro((0,De.Z)(function*(){e.state=0,e.start()}))}jo(e){return pt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kv extends Ep{constructor(e,t,o,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,g),this.It=d}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Gf(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(L=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===L?1:"REMOVE"===L?2:"CURRENT"===L?3:"RESET"===L?4:Tt(),u=e.targetChange.targetIds||[],d=function(L,H){return L.gt?(wn(void 0===H||"string"==typeof H),pr.fromBase64String(H||"")):(wn(void 0===H||H instanceof Uint8Array),pr.fromUint8Array(H||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,T=g&&function(L){const H=void 0===L.code?Ye.UNKNOWN:ud(L.code);return new dt(H,L.message||"")}(g);t=new Vo(o,u,d,T||null)}else if("documentChange"in e){const o=e.documentChange,u=Ii(i,o.document.name),d=Os(o.document.updateTime),g=new zi({mapValue:{fields:o.document.fields}}),T=Zr.newFoundDocument(u,d,g);t=new el(o.targetIds||[],o.removedTargetIds||[],T.key,T)}else if("documentDelete"in e){const o=e.documentDelete,u=Ii(i,o.document),d=o.readTime?Os(o.readTime):Sn.min(),g=Zr.newNoDocument(u,d);t=new el([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=Ii(i,o.document);t=new el([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Tt();{const o=e.filter,d=new Rl(o.count||0);t=new cc(o.targetId,d)}}var L;return t}(this.It,e),o=function(u){if(!("targetChange"in u))return Sn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Sn.min():d.readTime?Os(d.readTime):Sn.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=Pl(this.It),t.addTarget=function(u,d){let g;const T=d.target;return g=wl(T)?{documents:rl(u,T)}:{query:fd(u,T)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=$o(u,d.resumeToken):d.snapshotVersion.compareTo(Sn.min())>0&&(g.readTime=cu(u,d.snapshotVersion.toTimestamp())),g}(this.It,e);const o=function c(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=Pl(this.It),t.removeTarget=e,this.Lo(t)}}class __ extends Ep{constructor(e,t,o,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,g),this.It=d,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(wn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function zf(i,e){return i&&i.length>0?(wn(void 0!==e),i.map(t=>function(o,u){let d=Os(o.updateTime?o.updateTime:u);return d.isEqual(Sn.min())&&(d=Os(u)),new $g(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Os(e.commitTime);return this.listener.tu(o,t)}return wn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Pl(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>hu(this.It,o))};this.Lo(t)}}class Sc extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.It=u,this.su=!1}iu(){if(this.su)throw new dt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.So.ao(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new dt(Ye.UNKNOWN,u.toString())})}_o(e,t,o,u){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.So._o(e,t,o,d,g,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new dt(Ye.UNKNOWN,d.toString())})}terminate(){this.su=!0}}class Kh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(wr(t),this.uu=!1):pt("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class E_{constructor(e,t,o,u,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=d,this.gu.qr(T=>{o.enqueueAndForget((0,De.Z)(function*(){var L;qa(g)&&(pt("RemoteStore","Restarting streams for network reachability change."),yield(L=(0,De.Z)(function*(H){const J=Ct(H);J.wu.add(4),yield Ac(J),J.yu.set("Unknown"),J.wu.delete(4),yield Cc(J)}),function(H){return L.apply(this,arguments)})(g))}))}),this.yu=new Kh(o,u)}}function Cc(i){return wp.apply(this,arguments)}function wp(){return wp=(0,De.Z)(function*(i){if(qa(i))for(const e of i.mu)yield e(!0)}),wp.apply(this,arguments)}function Ac(i){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,De.Z)(function*(i){for(const e of i.mu)yield e(!1)}),Ip.apply(this,arguments)}function qh(i,e){const t=Ct(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Qh(t)?Yh(t):xc(t).Oo()&&Zh(t,e))}function Ad(i,e){const t=Ct(i),o=xc(t);t._u.delete(e),o.Oo()&&bm(t,e),0===t._u.size&&(o.Oo()?o.$o():qa(t)&&t.yu.set("Unknown"))}function Zh(i,e){i.pu.Mt(e.targetId),xc(i).Ho(e)}function bm(i,e){i.pu.Mt(e),xc(i).Jo(e)}function Yh(i){i.pu=new lu({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i._u.get(e)||null}),xc(i).start(),i.yu.cu()}function Qh(i){return qa(i)&&!xc(i).ko()&&i._u.size>0}function qa(i){return 0===Ct(i).wu.size}function w_(i){i.pu=void 0}function Dp(i){return bp.apply(this,arguments)}function bp(){return bp=(0,De.Z)(function*(i){i._u.forEach((e,t)=>{Zh(i,e)})}),bp.apply(this,arguments)}function qv(i,e){return ll.apply(this,arguments)}function ll(){return ll=(0,De.Z)(function*(i,e){w_(i),Qh(i)?(i.yu.lu(e),Yh(i)):i.yu.set("Unknown")}),ll.apply(this,arguments)}function Tm(i,e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,De.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof Vo&&2===e.state&&e.cause)try{yield(o=(0,De.Z)(function*(u,d){const g=d.cause;for(const T of d.targetIds)u._u.has(T)&&(yield u.remoteSyncer.rejectListen(T,g),u._u.delete(T),u.pu.removeTarget(T))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){pt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Ul(i,o)}else if(e instanceof el?i.pu.Gt(e):e instanceof cc?i.pu.Yt(e):i.pu.Wt(e),!t.isEqual(Sn.min()))try{const o=yield Fa(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const g=u.pu.te(d);return g.targetChanges.forEach((T,L)=>{if(T.resumeToken.approximateByteSize()>0){const H=u._u.get(L);H&&u._u.set(L,H.withResumeToken(T.resumeToken,d))}}),g.targetMismatches.forEach(T=>{const L=u._u.get(T);if(!L)return;u._u.set(T,L.withResumeToken(pr.EMPTY_BYTE_STRING,L.snapshotVersion)),bm(u,T);const H=new il(L.target,T,1,L.sequenceNumber);Zh(u,H)}),u.remoteSyncer.applyRemoteEvent(g)}(i,t))}catch(o){pt("RemoteStore","Failed to raise snapshot:",o),yield Ul(i,o)}var o}),Xh.apply(this,arguments)}function Ul(i,e,t){return Ia.apply(this,arguments)}function Ia(){return Ia=(0,De.Z)(function*(i,e,t){if(!Oo(e))throw e;i.wu.add(1),yield Ac(i),i.yu.set("Offline"),t||(t=()=>Fa(i.localStore)),i.asyncQueue.enqueueRetryable((0,De.Z)(function*(){pt("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield Cc(i)}))}),Ia.apply(this,arguments)}function Tp(i,e){return e().catch(t=>Ul(i,t,e))}function Mc(i){return Md.apply(this,arguments)}function Md(){return Md=(0,De.Z)(function*(i){const e=Ct(i),t=Bu(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Uu(e);)try{const u=yield g_(e.localStore,o);if(null===u){0===e.du.length&&t.$o();break}o=u.batchId,Sp(e,u)}catch(u){yield Ul(e,u)}Cp(e)&&Jh(e)}),Md.apply(this,arguments)}function Uu(i){return qa(i)&&i.du.length<10}function Sp(i,e){i.du.push(e);const t=Bu(i);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function Cp(i){return qa(i)&&!Bu(i).ko()&&i.du.length>0}function Jh(i){Bu(i).start()}function Zv(i){return ef.apply(this,arguments)}function ef(){return ef=(0,De.Z)(function*(i){Bu(i).nu()}),ef.apply(this,arguments)}function Yv(i){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,De.Z)(function*(i){const e=Bu(i);for(const t of i.du)e.Zo(t.mutations)}),Rc.apply(this,arguments)}function tf(i,e,t){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,De.Z)(function*(i,e,t){const o=i.du.shift(),u=Jf.from(o,e,t);yield Tp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Mc(i)}),Rd.apply(this,arguments)}function Ap(i,e){return xd.apply(this,arguments)}function xd(){return xd=(0,De.Z)(function*(i,e){var t;e&&Bu(i).Xo&&(yield(t=(0,De.Z)(function*(o,u){if(ad(d=u.code)&&d!==Ye.ABORTED){const g=o.du.shift();Bu(o).Fo(),yield Tp(o,()=>o.remoteSyncer.rejectFailedWrite(g.batchId,u)),yield Mc(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Cp(i)&&Jh(i)}),xd.apply(this,arguments)}function I_(i,e){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,De.Z)(function*(i,e){const t=Ct(i);t.asyncQueue.verifyOperationInProgress(),pt("RemoteStore","RemoteStore received new credentials");const o=qa(t);t.wu.add(3),yield Ac(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Cc(t)}),Mp.apply(this,arguments)}function Rp(i,e){return xp.apply(this,arguments)}function xp(){return xp=(0,De.Z)(function*(i,e){const t=Ct(i);e?(t.wu.delete(2),yield Cc(t)):e||(t.wu.add(2),yield Ac(t),t.yu.set("Unknown"))}),xp.apply(this,arguments)}function xc(i){return i.Iu||(i.Iu=function(e,t,o){const u=Ct(e);return u.iu(),new Kv(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Dp.bind(null,i),Zr:qv.bind(null,i),zo:Tm.bind(null,i)}),i.mu.push(function(){var e=(0,De.Z)(function*(t){t?(i.Iu.Fo(),Qh(i)?Yh(i):i.yu.set("Unknown")):(yield i.Iu.stop(),w_(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function Bu(i){return i.Tu||(i.Tu=function(e,t,o){const u=Ct(e);return u.iu(),new __(t,u.So,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Zv.bind(null,i),Zr:Ap.bind(null,i),eu:Yv.bind(null,i),tu:tf.bind(null,i)}),i.mu.push(function(){var e=(0,De.Z)(function*(t){t?(i.Tu.Fo(),yield Mc(i)):(yield i.Tu.stop(),i.du.length>0&&(pt("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class Sm{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,o,u,d){const g=Date.now()+o,T=new Sm(e,t,g,u,d);return T.start(o),T}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dt(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pc(i,e){if(wr("AsyncQueue",`${e}: ${i}`),Oo(i))return new dt(Ye.UNAVAILABLE,`${e}: ${i}`);throw i}class Pd{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Pt.comparator(t.key,o.key):(t,o)=>Pt.comparator(t.key,o.key),this.keyedMap=au(),this.sortedSet=new te(this.comparator)}static emptySet(e){return new Pd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Pd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Pp{constructor(){this.Eu=new te(Pt.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Tt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Bl{constructor(e,t,o,u,d,g,T,L){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=T,this.excludesMetadataChanges=L}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new Bl(e,t,Pd.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class D_{constructor(){this.Ru=void 0,this.listeners=[]}}class Np{constructor(){this.queries=new ou(e=>td(e),Dl),this.onlineState="Unknown",this.bu=new Set}}function Cm(i,e){return Am.apply(this,arguments)}function Am(){return Am=(0,De.Z)(function*(i,e){const t=Ct(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new D_),u)try{d.Ru=yield t.onListen(o)}catch(g){const T=Pc(g,`Initialization of query '${nd(e.query)}' failed`);return void e.onError(T)}t.queries.set(o,d),d.listeners.push(e),e.Pu(t.onlineState),d.Ru&&e.vu(d.Ru)&&xm(t)}),Am.apply(this,arguments)}function Mm(i,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,De.Z)(function*(i,e){const t=Ct(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Rm.apply(this,arguments)}function Qv(i,e){const t=Ct(i);let o=!1;for(const u of e){const g=t.queries.get(u.query);if(g){for(const T of g.listeners)T.vu(u)&&(o=!0);g.Ru=u}}o&&xm(t)}function Xv(i,e,t){const o=Ct(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function xm(i){i.bu.forEach(e=>{e.next()})}class Pm{constructor(e,t,o){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Bl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.Vu.next(e)}}class Jv{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class b_{constructor(e){this.It=e}Ji(e){return Ii(this.It,e)}Yi(e){return e.metadata.exists?dd(this.It,e.document,!1):Zr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Os(e)}}class cl{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nf(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=fr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new b_(this.It);for(const u of e)if(u.metadata.queries){const d=o.Ji(u.metadata.name);for(const g of u.metadata.queries){const T=(t.get(g)||gr()).add(d);t.set(g,T)}}return t}complete(){var e=this;return(0,De.Z)(function*(){const t=yield function Er(i,e,t,o){return Bh.apply(this,arguments)}(e.localStore,new b_(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const u of e.queries)yield vm(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function nf(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Nm{constructor(e){this.key=e}}class Op{constructor(e){this.key=e}}class rf{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=gr(),this.mutatedKeys=gr(),this.Gu=rd(e),this.Qu=new Pd(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new Pp,u=t?t.Qu:this.Qu;let d=t?t.mutatedKeys:this.mutatedKeys,g=u,T=!1;const L="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,H="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((J,Ee)=>{const We=u.get(J),ft=la(this.query,Ee)?Ee:null,_t=!!We&&this.mutatedKeys.has(We.key),qt=!!ft&&(ft.hasLocalMutations||this.mutatedKeys.has(ft.key)&&ft.hasCommittedMutations);let Cn=!1;We&&ft?We.data.isEqual(ft.data)?_t!==qt&&(o.track({type:3,doc:ft}),Cn=!0):this.Hu(We,ft)||(o.track({type:2,doc:ft}),Cn=!0,(L&&this.Gu(ft,L)>0||H&&this.Gu(ft,H)<0)&&(T=!0)):!We&&ft?(o.track({type:0,doc:ft}),Cn=!0):We&&!ft&&(o.track({type:1,doc:We}),Cn=!0,(L||H)&&(T=!0)),Cn&&(ft?(g=g.add(ft),d=qt?d.add(J):d.delete(J)):(g=g.delete(J),d=d.delete(J)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const J="F"===this.query.limitType?g.last():g.first();g=g.delete(J.key),d=d.delete(J.key),o.track({type:1,doc:J})}return{Qu:g,zu:o,$i:T,mutatedKeys:d}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const d=e.zu.Au();d.sort((H,J)=>function(Ee,We){const ft=_t=>{switch(_t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt()}};return ft(Ee)-ft(We)}(H.type,J.type)||this.Gu(H.doc,J.doc)),this.Ju(o);const g=t?this.Yu():[],T=0===this.Ku.size&&this.current?1:0,L=T!==this.qu;return this.qu=T,0!==d.length||L?{snapshot:new Bl(this.query,e.Qu,u,d,e.mutatedKeys,0===T,L,!1),Xu:g}:{Xu:g}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Pp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=gr(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new Op(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new Nm(o))}),t}tc(e){this.Uu=e.Hi,this.Ku=gr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Bl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Om{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class kp{constructor(e){this.key=e,this.nc=!1}}class T_{constructor(e,t,o,u,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.sc={},this.ic=new ou(T=>td(T),Dl),this.rc=new Map,this.oc=new Set,this.uc=new te(Pt.comparator),this.cc=new Map,this.ac=new Nh,this.hc={},this.lc=new Map,this.fc=Fu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function dl(i,e){return sf.apply(this,arguments)}function sf(){return sf=(0,De.Z)(function*(i,e){const t=Qp(i);let o,u;const d=t.ic.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.ec();else{const g=yield Dc(t.localStore,Fo(e));t.isPrimaryClient&&qh(t.remoteStore,g);const T=t.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield Lp(t,e,o,"current"===T)}return u}),sf.apply(this,arguments)}function Lp(i,e,t,o){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,De.Z)(function*(i,e,t,o){i._c=(J,Ee,We)=>{return(ft=(0,De.Z)(function*(_t,qt,Cn,kr){let ci=qt.view.Wu(Cn);ci.$i&&(ci=yield Cd(_t.localStore,qt.query,!1).then(({documents:di})=>qt.view.Wu(di,ci)));const yi=kr&&kr.targetChanges.get(qt.targetId),Is=qt.view.applyChanges(ci,_t.isPrimaryClient,yi);return Hp(_t,qt.targetId,Is.Xu),Is.snapshot}),function(_t,qt,Cn,kr){return ft.apply(this,arguments)})(i,J,Ee,We);var ft};const u=yield Cd(i.localStore,e,!0),d=new rf(e,u.Hi),g=d.Wu(u.documents),T=lc.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),L=d.applyChanges(g,i.isPrimaryClient,T);Hp(i,t,L.Xu);const H=new Om(e,t,d);return i.ic.set(e,H),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),L.snapshot}),Fp.apply(this,arguments)}function km(i,e){return Up.apply(this,arguments)}function Up(){return Up=(0,De.Z)(function*(i,e){const t=Ct(i),o=t.ic.get(e),u=t.rc.get(o.targetId);if(u.length>1)return t.rc.set(o.targetId,u.filter(d=>!Dl(d,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield bc(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Ad(t.remoteStore,o.targetId),kc(t,o.targetId)}).catch(wo))):(kc(t,o.targetId),yield bc(t.localStore,o.targetId,!0))}),Up.apply(this,arguments)}function Nc(){return Nc=(0,De.Z)(function*(i,e,t){const o=Xp(i);try{const u=yield function(d,g){const T=Ct(d),L=ni.now(),H=g.reduce((We,ft)=>We.add(ft.key),gr());let J,Ee;return T.persistence.runTransaction("Locally write mutations","readwrite",We=>{let ft=Ko(),_t=gr();return T.Gi.getEntries(We,H).next(qt=>{ft=qt,ft.forEach((Cn,kr)=>{kr.isValidDocument()||(_t=_t.add(Cn))})}).next(()=>T.localDocuments.getOverlayedDocuments(We,ft)).next(qt=>{J=qt;const Cn=[];for(const kr of g){const ci=Vf(kr,J.get(kr.key).overlayedDocument);null!=ci&&Cn.push(new Oa(kr.key,ci,Ra(ci.value.mapValue),Pi.exists(!0)))}return T.mutationQueue.addMutationBatch(We,L,Cn,g)}).next(qt=>{Ee=qt;const Cn=qt.applyToLocalDocumentSet(J,_t);return T.documentOverlayCache.saveOverlays(We,qt.batchId,Cn)})}).then(()=>({batchId:Ee.batchId,changes:jf(J)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,g,T){let L=d.hc[d.currentUser.toKey()];L||(L=new te(kn)),L=L.insert(g,T),d.hc[d.currentUser.toKey()]=L}(o,u.batchId,t),yield Vu(o,u.changes),yield Mc(o.remoteStore)}catch(u){const d=Pc(u,"Failed to persist write");t.reject(d)}}),Nc.apply(this,arguments)}function Vl(i,e){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,De.Z)(function*(i,e){const t=Ct(i);try{const o=yield p_(t.localStore,e);e.targetChanges.forEach((u,d)=>{const g=t.cc.get(d);g&&(wn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.nc=!0:u.modifiedDocuments.size>0?wn(g.nc):u.removedDocuments.size>0&&(wn(g.nc),g.nc=!1))}),yield Vu(t,o,e)}catch(o){yield wo(o)}}),Nd.apply(this,arguments)}function $l(i,e,t){const o=Ct(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ic.forEach((d,g)=>{const T=g.view.Pu(e);T.snapshot&&u.push(T.snapshot)}),function(d,g){const T=Ct(d);T.onlineState=g;let L=!1;T.queries.forEach((H,J)=>{for(const Ee of J.listeners)Ee.Pu(g)&&(L=!0)}),L&&xm(T)}(o.eventManager,e),u.length&&o.sc.zo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Bp(i,e,t){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,De.Z)(function*(i,e,t){const o=Ct(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.cc.get(e),d=u&&u.key;if(d){let g=new te(Pt.comparator);g=g.insert(d,Zr.newNoDocument(d,Sn.min()));const T=gr().add(d),L=new uu(Sn.min(),new Map,new lt(kn),g,T);yield Vl(o,L),o.uc=o.uc.remove(d),o.cc.delete(e),uf(o)}else yield bc(o.localStore,e,!1).then(()=>kc(o,e,t)).catch(wo)}),Oc.apply(this,arguments)}function Lm(i,e){return af.apply(this,arguments)}function af(){return af=(0,De.Z)(function*(i,e){const t=Ct(i),o=e.batch.batchId;try{const u=yield f_(t.localStore,e);Um(t,o,null),$p(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Vu(t,u)}catch(u){yield wo(u)}}),af.apply(this,arguments)}function Vp(i,e,t){return Od.apply(this,arguments)}function Od(){return Od=(0,De.Z)(function*(i,e,t){const o=Ct(i);try{const u=yield function(d,g){const T=Ct(d);return T.persistence.runTransaction("Reject batch","readwrite-primary",L=>{let H;return T.mutationQueue.lookupMutationBatch(L,g).next(J=>(wn(null!==J),H=J.keys(),T.mutationQueue.removeMutationBatch(L,J))).next(()=>T.mutationQueue.performConsistencyCheck(L)).next(()=>T.documentOverlayCache.removeOverlaysForBatchId(L,H,g)).next(()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(L,H)).next(()=>T.localDocuments.getDocuments(L,H))})}(o.localStore,e);Um(o,e,t),$p(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Vu(o,u)}catch(u){yield wo(u)}}),Od.apply(this,arguments)}function kd(){return kd=(0,De.Z)(function*(i,e){const t=Ct(i);qa(t.remoteStore)||pt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=Ct(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",T=>g.mutationQueue.getHighestUnacknowledgedBatchId(T))}(t.localStore);if(-1===o)return void e.resolve();const u=t.lc.get(o)||[];u.push(e),t.lc.set(o,u)}catch(o){const u=Pc(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),kd.apply(this,arguments)}function $p(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function Um(i,e,t){const o=Ct(i);let u=o.hc[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.hc[o.currentUser.toKey()]=u}}function kc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||jp(i,o)})}function jp(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Ad(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),uf(i))}function Hp(i,e,t){for(const o of t)o instanceof Nm?(i.ac.addReference(o.key,e),Bm(i,o)):o instanceof Op?(pt("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||jp(i,o.key)):Tt()}function Bm(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(pt("SyncEngine","New document in limbo: "+t),i.oc.add(o),uf(i))}function uf(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Pt(fr.fromString(e)),o=i.fc.next();i.cc.set(o,new kp(t)),i.uc=i.uc.insert(t,o),qh(i.remoteStore,new il(Fo(Na(t.path)),o,2,_.at))}}function Vu(i,e,t){return da.apply(this,arguments)}function da(){return da=(0,De.Z)(function*(i,e,t){const o=Ct(i),u=[],d=[],g=[];var T;o.ic.isEmpty()||(o.ic.forEach((T,L)=>{g.push(o._c(L,e,t).then(H=>{if((H||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(L.targetId,H?.fromCache?"not-current":"current"),H){u.push(H);const J=Uh.Ci(L.targetId,H);d.push(J)}}))}),yield Promise.all(g),o.sc.zo(u),yield(T=(0,De.Z)(function*(L,H){const J=Ct(L);try{yield J.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ee=>et.forEach(H,We=>et.forEach(We.Si,ft=>J.persistence.referenceDelegate.addReference(Ee,We.targetId,ft)).next(()=>et.forEach(We.Di,ft=>J.persistence.referenceDelegate.removeReference(Ee,We.targetId,ft)))))}catch(Ee){if(!Oo(Ee))throw Ee;pt("LocalStore","Failed to update sequence numbers: "+Ee)}for(const Ee of H){const We=Ee.targetId;if(!Ee.fromCache){const ft=J.Ui.get(We),qt=ft.withLastLimboFreeSnapshotVersion(ft.snapshotVersion);J.Ui=J.Ui.insert(We,qt)}}}),function(L,H){return T.apply(this,arguments)})(o.localStore,d))}),da.apply(this,arguments)}function Vm(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,De.Z)(function*(i,e){const t=Ct(i);if(!t.currentUser.isEqual(e)){pt("SyncEngine","User change. New user:",e.toKey());const o=yield cp(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(g=>{g.forEach(T=>{T.reject(new dt(Ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Vu(t,o.ji)}var u}),Gp.apply(this,arguments)}function e0(i,e){const t=Ct(i),o=t.cc.get(e);if(o&&o.nc)return gr().add(o.key);{let u=gr();const d=t.rc.get(e);if(!d)return u;for(const g of d){const T=t.ic.get(g);u=u.unionWith(T.view.ju)}return u}}function C_(i,e){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,De.Z)(function*(i,e){const t=Ct(i),o=yield Cd(t.localStore,e.query,!0),u=e.view.tc(o);return t.isPrimaryClient&&Hp(t,e.targetId,u.Xu),u}),Ld.apply(this,arguments)}function $m(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,De.Z)(function*(i,e){const t=Ct(i);return ym(t.localStore,e).then(o=>Vu(t,o))}),zp.apply(this,arguments)}function A_(i,e,t,o){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,De.Z)(function*(i,e,t,o){const u=Ct(i),d=yield function(g,T){const L=Ct(g),H=Ct(L.mutationQueue);return L.persistence.runTransaction("Lookup mutation documents","readonly",J=>H.Tn(J,T).next(Ee=>Ee?L.localDocuments.getDocuments(J,Ee):et.resolve(null)))}(u.localStore,e);var T;null!==d?("pending"===t?yield Mc(u.remoteStore):"acknowledged"===t||"rejected"===t?(Um(u,e,o||null),$p(u,e),T=e,Ct(Ct(u.localStore).mutationQueue).An(T)):Tt(),yield Vu(u,d)):pt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Wp.apply(this,arguments)}function Kp(){return Kp=(0,De.Z)(function*(i,e){const t=Ct(i);if(Qp(t),Xp(t),!0===e&&!0!==t.dc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield qp(t,o.toArray());t.dc=!0,yield Rp(t.remoteStore,!0);for(const d of u)qh(t.remoteStore,d)}else if(!1===e&&!1!==t.dc){const o=[];let u=Promise.resolve();t.rc.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(kc(t,g),bc(t.localStore,g,!0))),Ad(t.remoteStore,g)}),yield u,yield qp(t,o),function(d){const g=Ct(d);g.cc.forEach((T,L)=>{Ad(g.remoteStore,L)}),g.ac.fs(),g.cc=new Map,g.uc=new te(Pt.comparator)}(t),t.dc=!1,yield Rp(t.remoteStore,!1)}}),Kp.apply(this,arguments)}function qp(i,e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,De.Z)(function*(i,e,t){const o=Ct(i),u=[],d=[];for(const g of e){let T;const L=o.rc.get(g);if(L&&0!==L.length){T=yield Dc(o.localStore,Fo(L[0]));for(const H of L){const J=o.ic.get(H),Ee=yield C_(o,J);Ee.snapshot&&d.push(Ee.snapshot)}}else{const H=yield mm(o.localStore,g);T=yield Dc(o.localStore,H),yield Lp(o,Hm(H),g,!1)}u.push(T)}return o.sc.zo(d),u}),Zp.apply(this,arguments)}function Hm(i){return Uf(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Gm(i){const e=Ct(i);return Ct(Ct(e.localStore).persistence).vi()}function zm(i,e,t,o){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,De.Z)(function*(i,e,t,o){const u=Ct(i);if(u.dc)return void pt("SyncEngine","Ignoring unexpected query state notification.");const d=u.rc.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield ym(u.localStore,Au(d[0])),T=uu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Vu(u,g,T);break}case"rejected":yield bc(u.localStore,e,!0),kc(u,e,o);break;default:Tt()}}),Yp.apply(this,arguments)}function gu(i,e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,De.Z)(function*(i,e,t){const o=Qp(i);if(o.dc){for(const u of e){if(o.rc.has(u)){pt("SyncEngine","Adding an already active target "+u);continue}const d=yield mm(o.localStore,u),g=yield Dc(o.localStore,d);yield Lp(o,Hm(d),g.targetId,!1),qh(o.remoteStore,g)}for(const u of t)o.rc.has(u)&&(yield bc(o.localStore,u,!1).then(()=>{Ad(o.remoteStore,u),kc(o,u)}).catch(wo))}}),Fd.apply(this,arguments)}function Qp(i){const e=Ct(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bp.bind(null,e),e.sc.zo=Qv.bind(null,e.eventManager),e.sc.wc=Xv.bind(null,e.eventManager),e}function Xp(i){const e=Ct(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vp.bind(null,e),e}class Jp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,De.Z)(function*(){t.It=zh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return gm(this.persistence,new h_,e.initialUser,this.It)}yc(e){return new Lh(Ic.Bs,this.It)}gc(e){return new gp}terminate(){var e=this;return(0,De.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Wm extends Jp{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,De.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield Xp(o.Ac.syncEngine),yield Mc(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return gm(this.persistence,new h_,e.initialUser,this.It)}Tc(e,t){return new nm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new D(t,this.persistence);return new I(e.asyncQueue,o)}yc(e){const t=Sd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Zo.withCacheSize(this.cacheSizeBytes):Zo.DEFAULT;return new lp(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,y_(),_p(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gp}}class M_ extends Wm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,De.Z)(function*(){yield t().call(o,e);const u=o.Ac.syncEngine;o.sharedClientState instanceof Gh&&(o.sharedClientState.syncEngine={Fr:A_.bind(null,u),$r:zm.bind(null,u),Br:gu.bind(null,u),vi:Gm.bind(null,u),Mr:$m.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var d=(0,De.Z)(function*(g){yield function jm(i,e){return Kp.apply(this,arguments)}(o.Ac.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}gc(e){const t=y_();if(!Gh.C(t))throw new dt(Ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Sd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gh(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class eg{initialize(e,t){var o=this;return(0,De.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>$l(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Vm.bind(null,o.syncEngine),yield Rp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Np}createDatastore(e){const t=zh(e.databaseInfo.databaseId),o=new m_(e.databaseInfo);return new Sc(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=T=>$l(this.syncEngine,T,0),g=Dm.C()?new Dm:new Fl,new E_(t,o,u,d,g);var t,o,u,d,g}createSyncEngine(e,t){return function(o,u,d,g,T,L,H){const J=new T_(o,u,d,g,T,L);return H&&(J.dc=!0),J}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,De.Z)(function*(t){const o=Ct(t);pt("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield Ac(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ud(i,e,t){if(!t)throw new dt(Ye.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Km(i,e,t,o){if(!0===e&&!0===o)throw new dt(Ye.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function qm(i){if(!Pt.isDocumentKey(i))throw new dt(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Bd(i){if(Pt.isDocumentKey(i))throw new dt(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Lc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Tt()}function Pr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new dt(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lc(i);throw new dt(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function R_(i,e){if(e<=0)throw new dt(Ye.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const lf=new Map;class x_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new dt(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new dt(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Km("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fc{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new dt(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new dt(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ma;switch(t.type){case"gapi":return new Tu(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new dt(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lf.get(e);t&&(pt("ComponentProvider","Removing Datastore"),lf.delete(e),t.terminate())}(this),Promise.resolve()}}class Wi{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wi(this.firestore,e,this._key)}}class jo{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class Ua extends jo{constructor(e,t,o){super(e,t,Na(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wi(this.firestore,null,new Pt(e))}withConverter(e){return new Ua(this.firestore,e,this._path)}}function mu(i,e,...t){if(i=(0,ke.m9)(i),Ud("collection","path",e),i instanceof Fc){const o=fr.fromString(e,...t);return Bd(o),new Ua(i,null,o)}{if(!(i instanceof Wi||i instanceof Ua))throw new dt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(fr.fromString(e,...t));return Bd(o),new Ua(i.firestore,null,o)}}function jl(i,e,...t){if(i=(0,ke.m9)(i),1===arguments.length&&(e=ya.R()),Ud("doc","path",e),i instanceof Fc){const o=fr.fromString(e,...t);return qm(o),new Wi(i,null,new Pt(o))}{if(!(i instanceof Wi||i instanceof Ua))throw new dt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(fr.fromString(e,...t));return qm(o),new Wi(i.firestore,i instanceof Ua?i.converter:null,new Pt(o))}}function Uc(i,e){return i=(0,ke.m9)(i),e=(0,ke.m9)(e),(i instanceof Wi||i instanceof Ua)&&(e instanceof Wi||e instanceof Ua)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function ng(i,e){return i=(0,ke.m9)(i),e=(0,ke.m9)(e),i instanceof jo&&e instanceof jo&&i.firestore===e.firestore&&Dl(i._query,e._query)&&i.converter===e.converter}function df(i,e=10240){let t=0;return{read:()=>(0,De.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,De.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Vd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class P_{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Hr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,De.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,De.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const o=e.vc.decode(t),u=Number(o);isNaN(u)&&e.Dc(`length string (${o}) is not valid number`);const d=yield e.Cc(u);return new Jv(JSON.parse(d),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,De.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Cc(e){var t=this;return(0,De.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const o=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class r0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,De.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new dt(Ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,De.Z)(function*(d,g){const T=Ct(d),L=Pl(T.It)+"/documents",H={documents:g.map(ft=>Pu(T.It,ft))},J=yield T._o("BatchGetDocuments",L,H,g.length),Ee=new Map;J.forEach(ft=>{const _t=function hd(i,e){return"found"in e?function(t,o){wn(!!o.found);const u=Ii(t,o.found.name),d=Os(o.found.updateTime),g=new zi({mapValue:{fields:o.found.fields}});return Zr.newFoundDocument(u,d,g)}(i,e):"missing"in e?function(t,o){wn(!!o.missing),wn(!!o.readTime);const u=Ii(t,o.missing),d=Os(o.readTime);return Zr.newNoDocument(u,d)}(i,e):Tt()}(T.It,ft);Ee.set(_t.key.toString(),_t)});const We=[];return g.forEach(ft=>{const _t=Ee.get(ft.toString());wn(!!_t),We.push(_t)}),We}),function(d,g){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,De.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Pt.fromPath(u);e.mutations.push(new as(d,e.precondition(d)))}),yield(o=(0,De.Z)(function*(u,d){const g=Ct(u),T=Pl(g.It)+"/documents",L={writes:d.map(H=>hu(g.It,H))};yield g.ao("Commit",T,L)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Tt();t=Sn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new dt(Ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Sn.min())?Pi.exists(!1):Pi.updateTime(t):Pi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Sn.min()))throw new dt(Ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pi.updateTime(t)}return Pi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class O_{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.kc=o.maxAttempts,this.No=new vp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,De.Z)(function*(){const t=new r0(e.datastore),o=e.Mc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Fc(d)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!Lo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ad(t)}return!1}}class s0{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=vr.UNAUTHENTICATED,this.clientId=ya.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,De.Z)(function*(T){pt("FirestoreClient","Received user=",T.uid),yield d.authCredentialListener(T),d.user=T});return function(T){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(pt("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,De.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new dt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=Pc(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Zm(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,De.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),pt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,De.Z)(function*(d){o.isEqual(d)||(yield cp(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),rg.apply(this,arguments)}function Ym(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,De.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield jd(i);pt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>I_(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>I_(e.remoteStore,d)),i.onlineComponents=e}),hf.apply(this,arguments)}function jd(i){return ig.apply(this,arguments)}function ig(){return ig=(0,De.Z)(function*(i){return i.offlineComponents||(pt("FirestoreClient","Using default OfflineComponentProvider"),yield Zm(i,new Jp)),i.offlineComponents}),ig.apply(this,arguments)}function Bc(i){return sg.apply(this,arguments)}function sg(){return sg=(0,De.Z)(function*(i){return i.onlineComponents||(pt("FirestoreClient","Using default OnlineComponentProvider"),yield Ym(i,new eg)),i.onlineComponents}),sg.apply(this,arguments)}function Qm(i){return jd(i).then(e=>e.persistence)}function ff(i){return jd(i).then(e=>e.localStore)}function og(i){return Bc(i).then(e=>e.remoteStore)}function ag(i){return Bc(i).then(e=>e.syncEngine)}function $u(i){return ju.apply(this,arguments)}function ju(){return ju=(0,De.Z)(function*(i){const e=yield Bc(i),t=e.eventManager;return t.onListen=dl.bind(null,e.syncEngine),t.onUnlisten=km.bind(null,e.syncEngine),t}),ju.apply(this,arguments)}function Jm(i,e,t={}){const o=new Hr;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(u,d,g,T,L){const H=new Vd({next:Ee=>{d.enqueueAndForget(()=>Mm(u,J));const We=Ee.docs.has(g);!We&&Ee.fromCache?L.reject(new dt(Ye.UNAVAILABLE,"Failed to get document because the client is offline.")):We&&Ee.fromCache&&T&&"server"===T.source?L.reject(new dt(Ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):L.resolve(Ee)},error:Ee=>L.reject(Ee)}),J=new Pm(Na(g.path),H,{includeMetadataChanges:!0,ku:!0});return Cm(u,J)}(yield $u(i),i.asyncQueue,e,t,o)})),o.promise}function ey(i,e,t={}){const o=new Hr;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(u,d,g,T,L){const H=new Vd({next:Ee=>{d.enqueueAndForget(()=>Mm(u,J)),Ee.fromCache&&"server"===T.source?L.reject(new dt(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):L.resolve(Ee)},error:Ee=>L.reject(Ee)}),J=new Pm(g,H,{includeMetadataChanges:!0,ku:!0});return Cm(u,J)}(yield $u(i),i.asyncQueue,e,t,o)})),o.promise}class Hl{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new vp(this,"async_queue_retry"),this.Wc=()=>{const t=_p();t&&pt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=_p();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=_p();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Hr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,De.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Oo(t))throw t;pt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=Sm.createAndSchedule(this,e,t,o,d=>this.Yc(d));return this.qc.push(u),u}zc(){this.Kc&&Tt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,De.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Vc(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class Ba{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Di extends Fc{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new Hl,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Gl(this),this._firestoreClient.terminate()}}function Ki(i){return i._firestoreClient||Gl(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Gl(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new El(i._databaseId,d,i._persistenceKey,(T=t).host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,T.useFetchStreams));var d,T;i._firestoreClient=new s0(i._authCredentials,i._appCheckCredentials,i._queue,o)}function zl(i,e,t){const o=new Hr;return i.asyncQueue.enqueue((0,De.Z)(function*(){try{yield Zm(i,t),yield Ym(i,e),o.resolve()}catch(u){const d=u;if(!("FirebaseError"===(g=d).name?g.code===Ye.FAILED_PRECONDITION||g.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw d;ti("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var g})).then(()=>o.promise)}function cg(i){if(i._initialized||i._terminated)throw new dt(Ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Za(pr.fromBase64String(e))}catch(t){throw new dt(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Za(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _u{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new dt(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wl{constructor(e){this._methodName=e}}class Kd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new dt(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new dt(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kn(this._lat,e._lat)||kn(this._long,e._long)}}const F_=/^__.*__$/;class oy{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}class pf{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gf(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt()}}class mf{constructor(e,t,o,u,d,g){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=u,void 0===d&&this.na(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new mf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.ua(e),u}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:o,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Yd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(gf(this.sa)&&F_.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class yf{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||zh(e)}da(e,t,o,u=!1){return new mf({sa:e,methodName:t,fa:o,path:$r.emptyPath(),oa:!1,la:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function vu(i){const e=i._freezeSettings(),t=zh(i._databaseId);return new yf(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Gc(i,e,t,o,u,d={}){const g=i.da(d.merge||d.mergeFields?2:0,e,t,u);wf("Data must be an object, but it was:",g,o);const T=ly(o,g);let L,H;if(d.merge)L=new mn(g.fieldMask),H=g.fieldTransforms;else if(d.mergeFields){const J=[];for(const Ee of d.mergeFields){const We=If(e,Ee,t);if(!g.contains(We))throw new dt(Ye.INVALID_ARGUMENT,`Field '${We}' is specified in your field mask but missing from your input data.`);fg(J,We)||J.push(We)}L=new mn(J),H=g.fieldTransforms.filter(Ee=>L.covers(Ee.field))}else L=null,H=g.fieldTransforms;return new oy(new zi(T),L,H)}class qd extends Wl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qd}}function Zd(i,e,t){return new mf({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class zc extends Wl{_toFieldTransform(e){return new oc(e.path,new bl)}isEqual(e){return e instanceof zc}}class ay extends Wl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Zd(this,e,!0),o=this._a.map(d=>hl(d,t)),u=new ca(o);return new oc(e.path,u)}isEqual(e){return this===e}}class uy extends Wl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Zd(this,e,!0),o=this._a.map(d=>hl(d,t)),u=new Uo(o);return new oc(e.path,u)}isEqual(e){return this===e}}class dg extends Wl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Mu(e.It,fh(e.It,this.wa));return new oc(e.path,t)}isEqual(e){return this===e}}function _f(i,e,t,o){const u=i.da(1,e,t);wf("Data must be an object, but it was:",u,o);const d=[],g=zi.empty();N(o,(L,H)=>{const J=Df(e,L,t);H=(0,ke.m9)(H);const Ee=u.ca(J);if(H instanceof qd)d.push(J);else{const We=hl(H,Ee);null!=We&&(d.push(J),g.set(J,We))}});const T=new mn(d);return new pf(g,T,u.fieldTransforms)}function vf(i,e,t,o,u,d){const g=i.da(1,e,t),T=[If(e,o,t)],L=[u];if(d.length%2!=0)throw new dt(Ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let We=0;We<d.length;We+=2)T.push(If(e,d[We])),L.push(d[We+1]);const H=[],J=zi.empty();for(let We=T.length-1;We>=0;--We)if(!fg(H,T[We])){const ft=T[We];let _t=L[We];_t=(0,ke.m9)(_t);const qt=g.ca(ft);if(_t instanceof qd)H.push(ft);else{const Cn=hl(_t,qt);null!=Cn&&(H.push(ft),J.set(ft,Cn))}}const Ee=new mn(H);return new pf(J,Ee,g.fieldTransforms)}function Ef(i,e,t,o=!1){return hl(t,i.da(o?4:3,e))}function hl(i,e){if(hg(i=(0,ke.m9)(i)))return wf("Unsupported field value:",e,i),ly(i,e);if(i instanceof Wl)return function(t,o){if(!gf(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const g of t){let T=hl(g,o.aa(d));null==T&&(T={nullValue:"NULL_VALUE"}),u.push(T),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,ke.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return fh(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=ni.fromDate(t);return{timestampValue:cu(o.It,u)}}if(t instanceof ni){const u=new ni(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:cu(o.It,u)}}if(t instanceof Kd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Za)return{bytesValue:$o(o.It,t._byteString)};if(t instanceof Wi){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.ha(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cd(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Lc(t)}`)}(i,e)}function ly(i,e){const t={};return q(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):N(i,(o,u)=>{const d=hl(u,e.ra(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function hg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ni||i instanceof Kd||i instanceof Za||i instanceof Wi||i instanceof Wl)}function wf(i,e,t){if(!hg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Lc(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function If(i,e,t){if((e=(0,ke.m9)(e))instanceof _u)return e._internalPath;if("string"==typeof e)return Df(i,e);throw Yd("Field path arguments must be of type string or ",i,!1,void 0,t)}const cy=new RegExp("[~\\*/\\[\\]]");function Df(i,e,t){if(e.search(cy)>=0)throw Yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new _u(...e.split("."))._internalPath}catch{throw Yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Yd(i,e,t,o,u){const d=o&&!o.isEmpty(),g=void 0!==u;let T=`Function ${e}() called with invalid data`;t&&(T+=" (via `toFirestore()`)"),T+=". ";let L="";return(d||g)&&(L+=" (found",d&&(L+=` in field ${o}`),g&&(L+=` in document ${u}`),L+=")"),new dt(Ye.INVALID_ARGUMENT,T+i+L)}function fg(i,e){return i.some(t=>t.isEqual(e))}class Kl{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Wi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bf extends Kl{data(){return super.data()}}function Qd(i,e){return"string"==typeof e?Df(i,e):e instanceof _u?e._internalPath:e._delegate._internalPath}function pg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new dt(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wc{}function Hu(i,...e){for(const t of e)i=t._apply(i);return i}class dy extends Wc{constructor(e,t,o){super(),this.ma=e,this.ga=t,this.ya=o,this.type="where"}_apply(e){const t=vu(e.firestore),o=function(u,d,g,T,L,H,J){let Ee;if(L.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new dt(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){_g(J,H);const ft=[];for(const _t of J)ft.push(gy(T,u,_t));Ee={arrayValue:{values:ft}}}else Ee=gy(T,u,J)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||_g(J,H),Ee=Ef(g,"where",J,"in"===H||"not-in"===H);const We=Ps.create(L,H,Ee);return function(ft,_t){if(_t.dt()){const Cn=rc(ft);if(null!==Cn&&!Cn.isEqual(_t.field))throw new dt(Ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Cn.toString()}' and '${_t.field.toString()}'`);const kr=nc(ft);null!==kr&&vg(0,_t.field,kr)}const qt=function(Cn,kr){for(const ci of Cn.filters)if(kr.indexOf(ci.op)>=0)return ci.op;return null}(ft,function(Cn){switch(Cn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(_t.op));if(null!==qt)throw new dt(Ye.INVALID_ARGUMENT,qt===_t.op?`Invalid query. You cannot use more than one '${_t.op.toString()}' filter.`:`Invalid query. You cannot use '${_t.op.toString()}' filters with '${qt.toString()}' filters.`)}(u,We),We}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new jo(e.firestore,e.converter,function(u,d){const g=u.filters.concat([d]);return new Ka(u.path,u.collectionGroup,u.explicitOrderBy.slice(),g,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class fy extends Wc{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new dt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new dt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new wa(u,d);return function(T,L){if(null===nc(T)){const H=rc(T);null!==H&&vg(0,H,L.field)}}(o,g),g}(e._query,this.ma,this.pa);return new jo(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Ka(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class U_ extends Wc{constructor(e,t,o){super(),this.type=e,this.Ia=t,this.Ta=o}_apply(e){return new jo(e.firestore,e.converter,Yu(e._query,this.Ia,this.Ta))}}class gg extends Wc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=yg(e,this.type,this.Ea,this.Aa);return new jo(e.firestore,e.converter,(u=t,new Ka((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class mg extends Wc{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=yg(e,this.type,this.Ea,this.Aa);return new jo(e.firestore,e.converter,(u=t,new Ka((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function yg(i,e,t,o){if(t[0]=(0,ke.m9)(t[0]),t[0]instanceof Kl)return function(u,d,g,T,L){if(!T)throw new dt(Ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const H=[];for(const J of Wo(u))if(J.field.isKeyField())H.push(de(d,T.key));else{const Ee=T.data.field(J.field);if(oa(Ee))throw new dt(Ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+J.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ee){const We=J.field.canonicalString();throw new dt(Ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${We}' (used as the orderBy) does not exist.`)}H.push(Ee)}return new Wa(H,L)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=vu(i.firestore);return function(d,g,T,L,H,J){const Ee=d.explicitOrderBy;if(H.length>Ee.length)throw new dt(Ye.INVALID_ARGUMENT,`Too many arguments provided to ${L}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const We=[];for(let ft=0;ft<H.length;ft++){const _t=H[ft];if(Ee[ft].field.isKeyField()){if("string"!=typeof _t)throw new dt(Ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${L}(), but got a ${typeof _t}`);if(!ic(d)&&-1!==_t.indexOf("/"))throw new dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${L}() must be a plain document ID, but '${_t}' contains a slash.`);const qt=d.path.child(fr.fromString(_t));if(!Pt.isDocumentKey(qt))throw new dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${L}() must result in a valid document path, but '${qt}' is not because it contains an odd number of segments.`);const Cn=new Pt(qt);We.push(de(g,Cn))}else{const qt=Ef(T,L,_t);We.push(qt)}}return new Wa(We,J)}(i._query,i.firestore._databaseId,u,e,t,o)}}function gy(i,e,t){if("string"==typeof(t=(0,ke.m9)(t))){if(""===t)throw new dt(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ic(e)&&-1!==t.indexOf("/"))throw new dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(fr.fromString(t));if(!Pt.isDocumentKey(o))throw new dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return de(i,new Pt(o))}if(t instanceof Wi)return de(i,t._key);throw new dt(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lc(t)}.`)}function _g(i,e){if(!Array.isArray(i)||0===i.length)throw new dt(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new dt(Ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vg(i,e,t){if(!t.isEqual(e))throw new dt(Ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fl{convertValue(e,t="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Tt()}}convertObject(e,t){const o={};return N(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Kd(qr(e.latitude),qr(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=xs(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Qs(e));default:return null}}convertTimestamp(e){const t=os(e);return new ni(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=fr.fromString(e);wn(jn(o));const u=new aa(o.get(1),o.get(3)),d=new Pt(o.popFirst(5));return u.isEqual(t)||wr(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Tf(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class G_ extends fl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wi(this.firestore,null,t)}}class pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gu extends Kl{constructor(e,t,o,u,d,g){super(e,t,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Qd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Kc extends Gu{data(e={}){return super.data(e)}}class ql{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new pl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Kc(this._firestore,this._userDataWriter,o.key,o,new pl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new dt(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>({type:"added",doc:new Kc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||3!==g.type).map(g=>{const T=new Kc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let L=-1,H=-1;return 0!==g.type&&(L=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),H=d.indexOf(g.doc.key)),{type:Eg(g.type),doc:T,oldIndex:L,newIndex:H}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Eg(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt()}}function Sf(i,e){return i instanceof Gu&&e instanceof Gu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ql&&e instanceof ql&&i._firestore===e._firestore&&ng(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class gl extends fl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wi(this.firestore,null,t)}}function wg(i,e,t){i=Pr(i,Wi);const o=Pr(i.firestore,Di),u=Tf(i.converter,e,t);return Iu(o,[Gc(vu(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,Pi.none())])}function yy(i,e,t,...o){i=Pr(i,Wi);const u=Pr(i.firestore,Di),d=vu(u);let g;return g="string"==typeof(e=(0,ke.m9)(e))||e instanceof _u?vf(d,"updateDoc",i._key,e,t,o):_f(d,"updateDoc",i._key,e),Iu(u,[g.toMutation(i._key,Pi.exists(!0))])}function _y(i,...e){var t,o,u;i=(0,ke.m9)(i);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||Vc(e[g])||(d=e[g],g++);const T={includeMetadataChanges:d.includeMetadataChanges};if(Vc(e[g])){const Ee=e[g];e[g]=null===(t=Ee.next)||void 0===t?void 0:t.bind(Ee),e[g+1]=null===(o=Ee.error)||void 0===o?void 0:o.bind(Ee),e[g+2]=null===(u=Ee.complete)||void 0===u?void 0:u.bind(Ee)}let L,H,J;if(i instanceof Wi)H=Pr(i.firestore,Di),J=Na(i._key.path),L={next:Ee=>{e[g]&&e[g](Dg(H,i,Ee))},error:e[g+1],complete:e[g+2]};else{const Ee=Pr(i,jo);H=Pr(Ee.firestore,Di),J=Ee._query;const We=new gl(H);L={next:ft=>{e[g]&&e[g](new ql(H,We,Ee,ft))},error:e[g+1],complete:e[g+2]},pg(i._query)}return function(Ee,We,ft,_t){const qt=new Vd(_t),Cn=new Pm(We,qt,ft);return Ee.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return Cm(yield $u(Ee),Cn)})),()=>{qt.bc(),Ee.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return Mm(yield $u(Ee),Cn)}))}}(Ki(H),J,T,L)}function Iu(i,e){return function(t,o){const u=new Hr;return t.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function S_(i,e,t){return Nc.apply(this,arguments)}(yield ag(t),o,u)})),u.promise}(Ki(i),e)}function Dg(i,e,t){const o=t.docs.get(e._key),u=new gl(i);return new Gu(i,u,e._key,o,new pl(t.hasPendingWrites,t.fromCache),e.converter)}const vy={maxAttempts:5};class bg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vu(e)}set(e,t,o){this._verifyNotCommitted();const u=Xa(e,this._firestore),d=Tf(u.converter,t,o),g=Gc(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,Pi.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Xa(e,this._firestore);let g;return g="string"==typeof(t=(0,ke.m9)(t))||t instanceof _u?vf(this._dataReader,"WriteBatch.update",d._key,t,o,u):_f(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,Pi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xa(e,this._firestore);return this._mutations=this._mutations.concat(new Xu(t._key,Pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new dt(Ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xa(i,e){if((i=(0,ke.m9)(i)).firestore!==e)throw new dt(Ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Z_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vu(e)}get(e){const t=Xa(e,this._firestore),o=new G_(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Tt();const d=u[0];if(d.isFoundDocument())return new Kl(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new Kl(this._firestore,o,t._key,null,t.converter);throw Tt()})}set(e,t,o){const u=Xa(e,this._firestore),d=Tf(u.converter,t,o),g=Gc(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,g),this}update(e,t,o,...u){const d=Xa(e,this._firestore);let g;return g="string"==typeof(t=(0,ke.m9)(t))||t instanceof _u?vf(this._dataReader,"Transaction.update",d._key,t,o,u):_f(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=Xa(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xa(e,this._firestore),o=new gl(this._firestore);return super.get(e).then(u=>new Gu(this._firestore,o,t._key,u._document,new pl(!1,!1),t.converter))}}function Af(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new dt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ag(){if(typeof Uint8Array>"u")throw new dt("unimplemented","Uint8Arrays are not available in this environment.")}function Ty(){if(!function xr(){return typeof atob<"u"}())throw new dt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Zt=Ot.SDK_VERSION,(0,Ot._registerComponent)(new $e.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),g=new Di(new ia(t.getProvider("auth-internal")),new xo(t.getProvider("app-check-internal")),function(T,L){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new dt(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aa(T.options.projectId,L)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),(0,Ot.registerVersion)(vo,"3.6.0",i),(0,Ot.registerVersion)(vo,"3.6.0","esm2017")}();class Xd{constructor(e){this._delegate=e}static fromBase64String(e){return Ty(),new Xd(Za.fromBase64String(e))}static fromUint8Array(e){return Ag(),new Xd(Za.fromUint8Array(e))}toBase64(){return Ty(),this._delegate.toBase64()}toUint8Array(){return Ag(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Mg(i){return function X_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class J_{enableIndexedDbPersistence(e,t){return function $c(i,e){cg(i=Pr(i,Di));const t=Ki(i),o=i._freezeSettings(),u=new eg;return zl(t,u,new Wm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function jc(i){cg(i=Pr(i,Di));const e=Ki(i),t=i._freezeSettings(),o=new eg;return zl(e,o,new M_(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Hc(i){if(i._initialized&&!i._terminated)throw new dt(Ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Hr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{yield(t=(0,De.Z)(function*(o){if(!ao.C())return Promise.resolve();const u=o+"main";yield ao.delete(u)}),function(o){return t.apply(this,arguments)})(Sd(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Sy{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ti("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function tg(i,e,t,o={}){var u;const d=(i=Pr(i,Fc))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&ti("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let g,T;if("string"==typeof o.mockUserToken)g=o.mockUserToken,T=vr.MOCK_USER;else{g=(0,ke.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const L=o.mockUserToken.sub||o.mockUserToken.user_id;if(!L)throw new dt(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new vr(L)}i._authCredentials=new bu(new ba(g,T))}}(this._delegate,e,t,o)}enableNetwork(){return function ny(i){return function o0(i){return i.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield Qm(i),t=yield og(i);return e.setNetworkEnabled(!0),function(o){const u=Ct(o);return u.wu.delete(0),Cc(u)}(t)}))}(Ki(i=Pr(i,Di)))}(this._delegate)}disableNetwork(){return function ry(i){return function Hd(i){return i.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield Qm(i),t=yield og(i);return e.setNetworkEnabled(!1),(o=(0,De.Z)(function*(u){const d=Ct(u);d.wu.add(0),yield Ac(d),d.yu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Ki(i=Pr(i,Di)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Km("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ty(i){return function(e){const t=new Hr;return e.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function Fm(i,e){return kd.apply(this,arguments)}(yield ag(e),t)})),t.promise}(Ki(i=Pr(i,Di)))}(this._delegate)}onSnapshotsInSync(e){return function Ig(i,e){return function yu(i,e){const t=new Vd(e);return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return o=yield $u(i),u=t,Ct(o).bu.add(u),void u.next();var o,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return o=yield $u(i),u=t,void Ct(o).bu.delete(u);var o,u}))}}(Ki(i=Pr(i,Di)),Vc(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new dt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Yl(this,mu(this._delegate,e))}catch(t){throw ha(t,"collection()","Firestore.collection()")}}doc(e){try{return new Va(this,jl(this._delegate,e))}catch(t){throw ha(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qo(this,function cf(i,e){if(i=Pr(i,Fc),Ud("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new dt(Ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jo(i,null,(t=e,new Ka(fr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ha(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ey(i,e,t){i=Pr(i,Di);const o=Object.assign(Object.assign({},vy),t);return function(u){if(u.maxAttempts<1)throw new dt(Ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(u,d,g){const T=new Hr;return u.asyncQueue.enqueueAndForget((0,De.Z)(function*(){const L=yield function Xm(i){return Bc(i).then(e=>e.datastore)}(u);new O_(u.asyncQueue,L,g,d,T).run()})),T.promise}(Ki(i),u=>e(new Z_(i,u)),o)}(this._delegate,t=>e(new Cy(this,t)))}batch(){return Ki(this._delegate),new Ay(new bg(this._delegate,e=>Iu(this._delegate,e)))}loadBundle(e){return function iy(i,e){const t=Ki(i=Pr(i,Di)),o=new Ba;return function Gd(i,e,t,o){const u=function(d,g){let T;return T="string"==typeof d?(new TextEncoder).encode(d):d,L=function(L,H){if(L instanceof Uint8Array)return df(L,H);if(L instanceof ArrayBuffer)return df(new Uint8Array(L),H);if(L instanceof ReadableStream)return L.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(T),new P_(L,g);var L}(t,zh(e));i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){!function t0(i,e,t){const o=Ct(i);var u;(u=(0,De.Z)(function*(d,g,T){try{const L=yield g.getMetadata();if(yield function(We,ft){const _t=Ct(We),qt=Os(ft.createTime);return _t.persistence.runTransaction("hasNewerBundle","readonly",Cn=>_t.Ns.getBundleMetadata(Cn,ft.id)).then(Cn=>!!Cn&&Cn.createTime.compareTo(qt)>=0)}(d.localStore,L))return yield g.close(),T._completeWith({taskState:"Success",documentsLoaded:(We=L).totalDocuments,bytesLoaded:We.totalBytes,totalDocuments:We.totalDocuments,totalBytes:We.totalBytes}),Promise.resolve(new Set);T._updateProgress(nf(L));const H=new cl(L,d.localStore,g.It);let J=yield g.mc();for(;J;){const We=yield H.Fu(J);We&&T._updateProgress(We),J=yield g.mc()}const Ee=yield H.complete();return yield Vu(d,Ee.Lu,void 0),yield function(We,ft){const _t=Ct(We);return _t.persistence.runTransaction("Save bundle","readwrite",qt=>_t.Ns.saveBundleMetadata(qt,ft))}(d.localStore,L),T._completeWith(Ee.progress),Promise.resolve(Ee.Bu)}catch(L){return ti("SyncEngine",`Loading bundle failed with ${L}`),T._failWith(L),Promise.resolve(new Set)}var We}),function(d,g,T){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield ag(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function sy(i,e){return function Yo(i,e){return i.asyncQueue.enqueue((0,De.Z)(function*(){return function(t,o){const u=Ct(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,o))}(yield ff(i),e)}))}(Ki(i=Pr(i,Di)),e).then(t=>t?new jo(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Qo(this,t):null)}}class Mf extends fl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xd(new Za(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Va.forKey(t,this.firestore,null)}}class Cy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Mf(e)}get(e){const t=ml(e);return this._delegate.get(t).then(o=>new Jd(this._firestore,new Gu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=ml(e);return o?(Af("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=ml(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=ml(e);return this._delegate.delete(t),this}}class Ay{constructor(e){this._delegate=e}set(e,t,o){const u=ml(e);return o?(Af("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=ml(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=ml(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Kc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eh(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Zl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Zl(e,new Mf(e),t),u.set(t,d)),d}}Zl.INSTANCES=new WeakMap;class Va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mf(e)}static forPath(e,t,o){if(e.length%2!=0)throw new dt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Va(t,new Wi(t._delegate,o,new Pt(e)))}static forKey(e,t,o){return new Va(t,new Wi(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Yl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Yl(this.firestore,mu(this._delegate,e))}catch(t){throw ha(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ke.m9)(e))instanceof Wi&&Uc(this._delegate,e)}set(e,t){t=Af("DocumentReference.set",t);try{return t?wg(this._delegate,e,t):wg(this._delegate,e)}catch(o){throw ha(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?yy(this._delegate,e):yy(this._delegate,e,t,...o)}catch(u){throw ha(u,"updateDoc()","DocumentReference.update()")}}delete(){return function W_(i){return Iu(Pr(i.firestore,Di),[new Xu(i._key,Pi.none())])}(this._delegate)}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new Jd(this.firestore,new Gu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return _y(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function z_(i){i=Pr(i,Wi);const e=Pr(i.firestore,Di),t=Ki(e),o=new gl(e);return function k_(i,e){const t=new Hr;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(o=(0,De.Z)(function*(u,d,g){try{const T=yield function(L,H){const J=Ct(L);return J.persistence.runTransaction("read document","readonly",Ee=>J.localDocuments.getDocument(Ee,H))}(u,d);T.isFoundDocument()?g.resolve(T):T.isNoDocument()?g.resolve(null):g.reject(new dt(Ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(T){const L=Pc(T,`Failed to get document '${d} from cache`);g.reject(L)}}),function(u,d,g){return o.apply(this,arguments)})(yield ff(i),e,t);var o})),t.promise}(t,i._key).then(u=>new Gu(e,o,i._key,u,new pl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function wu(i){i=Pr(i,Wi);const e=Pr(i.firestore,Di);return Jm(Ki(e),i._key,{source:"server"}).then(t=>Dg(e,i,t))}(this._delegate):function Eu(i){i=Pr(i,Wi);const e=Pr(i.firestore,Di);return Jm(Ki(e),i._key).then(t=>Dg(e,i,t))}(this._delegate),t.then(o=>new Jd(this.firestore,new Gu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Va(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function ha(i,e,t){return i.message=i.message.replace(e,t),i}function My(i){for(const e of i)if("object"==typeof e&&!Mg(e))return e;return{}}function Ry(i,e){var t,o;let u;return u=Mg(i[0])?i[0]:Mg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Jd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Sf(this._delegate,e._delegate)}}class eh extends Jd{data(e){const t=this._delegate.data(e);return function ra(i,e){i||Tt()}(void 0!==t),t}}class Qo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mf(e)}where(e,t,o){try{return new Qo(this.firestore,Hu(this._delegate,function hy(i,e,t){const o=e,u=Qd("where",i);return new dy(u,o,t)}(e,t,o)))}catch(u){throw ha(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qo(this.firestore,Hu(this._delegate,function py(i,e="asc"){const t=e,o=Qd("orderBy",i);return new fy(o,t)}(e,t)))}catch(o){throw ha(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qo(this.firestore,Hu(this._delegate,function B_(i){return R_("limit",i),new U_("limit",i,"F")}(e)))}catch(t){throw ha(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qo(this.firestore,Hu(this._delegate,function V_(i){return R_("limitToLast",i),new U_("limitToLast",i,"L")}(e)))}catch(t){throw ha(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qo(this.firestore,Hu(this._delegate,function $_(...i){return new gg("startAt",i,!0)}(...e)))}catch(t){throw ha(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qo(this.firestore,Hu(this._delegate,function lo(...i){return new gg("startAfter",i,!1)}(...e)))}catch(t){throw ha(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qo(this.firestore,Hu(this._delegate,function j_(...i){return new mg("endBefore",i,!1)}(...e)))}catch(t){throw ha(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qo(this.firestore,Hu(this._delegate,function H_(...i){return new mg("endAt",i,!0)}(...e)))}catch(t){throw ha(t,"endAt()","Query.endAt()")}}isEqual(e){return ng(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Qa(i){i=Pr(i,jo);const e=Pr(i.firestore,Di),t=Ki(e),o=new gl(e);return function ug(i,e){const t=new Hr;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(o=(0,De.Z)(function*(u,d,g){try{const T=yield Cd(u,d,!0),L=new rf(d,T.Hi),H=L.Wu(T.documents),J=L.applyChanges(H,!1);g.resolve(J.snapshot)}catch(T){const L=Pc(T,`Failed to execute query '${d} against cache`);g.reject(L)}}),function(u,d,g){return o.apply(this,arguments)})(yield ff(i),e,t);var o})),t.promise}(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate):"server"===e?.source?function my(i){i=Pr(i,jo);const e=Pr(i.firestore,Di),t=Ki(e),o=new gl(e);return ey(t,i._query,{source:"server"}).then(u=>new ql(e,o,i,u))}(this._delegate):function Ya(i){i=Pr(i,jo);const e=Pr(i.firestore,Di),t=Ki(e),o=new gl(e);return pg(i._query),ey(t,i._query).then(u=>new ql(e,o,i,u))}(this._delegate),t.then(o=>new Rf(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=My(e),o=Ry(e,u=>new Rf(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return _y(this._delegate,t,o)}withConverter(e){return new Qo(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}class xy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new eh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Rf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xy(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new eh(this._firestore,o))})}isEqual(e){return Sf(this._delegate,e._delegate)}}class Yl extends Qo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Va(this.firestore,e):null}doc(e){try{return new Va(this.firestore,void 0===e?jl(this._delegate):jl(this._delegate,e))}catch(t){throw ha(t,"doc()","CollectionReference.doc()")}}add(e){return function K_(i,e){const t=Pr(i.firestore,Di),o=jl(i),u=Tf(i.converter,e);return Iu(t,[Gc(vu(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Pi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Va(this.firestore,t))}isEqual(e){return Uc(this._delegate,e._delegate)}withConverter(e){return new Yl(this.firestore,this._delegate.withConverter(e?Zl.getInstance(this.firestore,e):null))}}function ml(i){return Pr(i,Wi)}class xf{constructor(...e){this._delegate=new _u(...e)}static documentId(){return new xf($r.keyField().canonicalString())}isEqual(e){return(e=(0,ke.m9)(e))instanceof _u&&this._delegate._internalPath.isEqual(e._internalPath)}}class yl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Tg(){return new zc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yl(e)}static delete(){const e=function wy(){return new qd("deleteField")}();return e._methodName="FieldValue.delete",new yl(e)}static arrayUnion(...e){const t=function Cf(...i){return new ay("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new yl(t)}static arrayRemove(...e){const t=function Sg(...i){return new uy("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new yl(t)}static increment(e){const t=function Iy(i){return new dg("increment",i)}(e);return t._methodName="FieldValue.increment",new yl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Py={Firestore:Sy,GeoPoint:Kd,Timestamp:ni,Blob:Xd,Transaction:Cy,WriteBatch:Ay,DocumentReference:Va,DocumentSnapshot:Jd,Query:Qo,QueryDocumentSnapshot:eh,QuerySnapshot:Rf,CollectionReference:Yl,FieldPath:xf,FieldValue:yl,setLogLevel:function ev(i){!function er(i){nn.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Rg(i){(function Ny(i,e){i.INTERNAL.registerComponent(new $e.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Py)))})(i,(e,t)=>new Sy(e,t,new J_)),i.registerVersion("@firebase/firestore-compat","0.1.26")}(Ke.Z);var zu=F(3385),Ql=F(440),tv=F(127);function Xl(i,e){return function nv(i,e=z.z){return new G.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function th(i,e){return Xl(i,e).pipe((0,le.U)(t=>({payload:t,type:"query"})))}function xg(i,e){return th(i,e).pipe((0,be.O)(void 0),se(),(0,le.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((g,T)=>{const L=u.find(J=>J.doc.ref.isEqual(g.ref)),H=t?.payload.docs.find(J=>J.ref.isEqual(g.ref));L&&JSON.stringify(L.doc.metadata)===JSON.stringify(g.metadata)||!L&&H&&JSON.stringify(H.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:T,newIndex:T,type:"modified",doc:g}})}),d}))}function Pg(i,e,t){return xg(i,t).pipe((0,we.R)((o,u)=>function Oy(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Zn(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return ky(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ky(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ky(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),(0,it.x)(),(0,le.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function ky(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function Ly(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Fy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=xg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,le.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,be.O)(void 0),se(),(0,Xe.h)(([o,u])=>u.length>0||!o),(0,le.U)(([o,u])=>u),ve.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,we.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ly(e);return Pg(this.query,t,this.afs.schedulers.outsideAngular).pipe(ve.iC)}valueChanges(e={}){return th(this.query,this.afs.schedulers.outsideAngular).pipe((0,le.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),ve.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(ve.iC)}add(e){return this.ref.add(e)}doc(e){return new Uy(this.ref.doc(e),this.afs)}}class Uy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=rv(o,t);return new Fy(u,d,this.afs)}snapshotChanges(){return function l0(i,e){return Xl(i,e).pipe((0,be.O)(void 0),se(),(0,le.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ve.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,le.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,me.D)(this.ref.get(e)).pipe(ve.iC)}}class qc{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?xg(this.query,this.afs.schedulers.outsideAngular).pipe((0,le.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Xe.h)(t=>t.length>0),ve.iC):xg(this.query,this.afs.schedulers.outsideAngular).pipe(ve.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,we.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ly(e);return Pg(this.query,t,this.afs.schedulers.outsideAngular).pipe(ve.iC)}valueChanges(e={}){return th(this.query,this.afs.schedulers.outsideAngular).pipe((0,le.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),ve.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(ve.iC)}}const By=new E.OlP("angularfire2.enableFirestorePersistence"),nh=new E.OlP("angularfire2.firestore.persistenceSettings"),rh=new E.OlP("angularfire2.firestore.settings"),ks=new E.OlP("angularfire2.firestore.use-emulator");function rv(i,e=(t=>t)){return{query:e(i),ref:i}}let Ng=(()=>{class i{constructor(t,o,u,d,g,T,L,H,J,Ee,We,ft,_t,qt,Cn,kr,ci){this.schedulers=L;const yi=(0,Ge.on)(t,T,o),Is=J;Ee&&(0,zu.nw)(yi,T,We,_t,qt,Cn,ft,kr),[this.firestore,this.persistenceEnabled$]=(0,Ge.cc)(`${yi.name}.firestore`,"AngularFirestore",yi.name,()=>{const di=T.runOutsideAngular(()=>yi.firestore());if(d&&di.settings(d),Is&&di.useEmulator(...Is),u&&!(0,ct.PM)(g)){const _i=()=>{try{return(0,me.D)(di.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(eo){return typeof console<"u"&&console.warn(eo),(0,_e.of)(!1)}};return[di,T.runOutsideAngular(_i)]}return[di,(0,_e.of)(!1)]},[d,Is,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=rv(u,o),T=this.schedulers.ngZone.run(()=>d);return new Fy(T,g,this)}collectionGroup(t,o){const u=o||(g=>g),d=this.firestore.collectionGroup(t);return new qc(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Uy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(E.LFG(Ge.Dh),E.LFG(Ge.xv,8),E.LFG(By,8),E.LFG(rh,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(ve.HU),E.LFG(nh,8),E.LFG(ks,8),E.LFG(zu.zQ,8),E.LFG(zu.Qv,8),E.LFG(zu.L6,8),E.LFG(zu._Q,8),E.LFG(zu.rT,8),E.LFG(zu.lh,8),E.LFG(zu.f7,8),E.LFG(Ql.nm,8))},i.\u0275prov=E.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Vy=(()=>{class i{constructor(){tv.Z.registerVersion("angularfire",ve.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:By,useValue:!0},{provide:nh,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=E.oAB({type:i}),i.\u0275inj=E.cJS({providers:[Ng]}),i})()},4585:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Q1:()=>ht,TE:()=>yo});var E=F(9751),z=F(9646),G=F(8996),me=F(8372),_e=F(4004),ve=F(3900),be=F(5813),pe=F(4650),Te=F(2011),se=F(3942),le=F(5861),we=F(9681),it=F(2090),Xe=F(4859);const Ge="firebasestorage.googleapis.com",ct="storageBucket";class De extends it.ZR{constructor(k,X){super(Ot(k),`Firebase Storage: ${X} (${Ot(k)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,De.prototype)}_codeEquals(k){return Ot(k)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(k){this.customData.serverResponse=k,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ot(B){return"storage/"+B}function $e(){return new De("unknown","An unknown error occurred, please check the error payload for server response.")}function ce(){return new De("canceled","User canceled the upload/download.")}function gt(){return new De("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function On(B){return new De("invalid-argument",B)}function pn(){return new De("app-deleted","The Firebase app was deleted.")}function Et(B){return new De("invalid-root-operation","The operation '"+B+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rn(B,k){return new De("invalid-format","String does not match format '"+B+"': "+k)}function rn(B){throw new De("internal-error","Internal error: "+B)}class en{constructor(k,X){this.bucket=k,this.path_=X}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const k=encodeURIComponent;return"/b/"+k(this.bucket)+"/o/"+k(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(k,X){let fe;try{fe=en.makeFromUrl(k,X)}catch{return new en(k,"")}if(""===fe.path)return fe;throw function Ve(B){return new De("invalid-default-bucket","Invalid default bucket '"+B+"'.")}(k)}static makeFromUrl(k,X){let fe=null;const Ne="([A-Za-z0-9.\\-_]+)",Kt=new RegExp("^gs://"+Ne+"(/(.*))?$","i");function Bn(Wr){Wr.path_=decodeURIComponent(Wr.path)}const ar=X.replace(/[.]/g,"\\."),ui=[{regex:Kt,indices:{bucket:1,path:3},postModify:function Ze(Wr){"/"===Wr.path.charAt(Wr.path.length-1)&&(Wr.path_=Wr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ar}/v[A-Za-z0-9_]+/b/${Ne}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Bn},{regex:new RegExp(`^https?://${X===Ge?"(?:storage.googleapis.com|storage.cloud.google.com)":X}/${Ne}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Bn}];for(let Wr=0;Wr<ui.length;Wr++){const vs=ui[Wr],cs=vs.regex.exec(k);if(cs){let Vs=cs[vs.indices.path];Vs||(Vs=""),fe=new en(cs[vs.indices.bucket],Vs),vs.postModify(fe);break}}if(null==fe)throw function Me(B){return new De("invalid-url","Invalid URL '"+B+"'.")}(k);return fe}}class Mt{constructor(k){this.promise_=Promise.reject(k)}getPromise(){return this.promise_}cancel(k=!1){}}function Yn(B){return"string"==typeof B||B instanceof String}function br(B){return mr()&&B instanceof Blob}function mr(){return typeof Blob<"u"}function jr(B,k,X,fe){if(fe<k)throw On(`Invalid value for '${B}'. Expected ${k} or greater.`);if(fe>X)throw On(`Invalid value for '${B}'. Expected ${X} or less.`)}function xn(B,k,X){let fe=k;return null==X&&(fe=`https://${k}`),`${X}://${fe}/v0${B}`}function _n(B){const k=encodeURIComponent;let X="?";for(const fe in B)B.hasOwnProperty(fe)&&(X=X+(k(fe)+"=")+k(B[fe])+"&");return X=X.slice(0,-1),X}var Wn=(()=>{return(B=Wn||(Wn={}))[B.NO_ERROR=0]="NO_ERROR",B[B.NETWORK_ERROR=1]="NETWORK_ERROR",B[B.ABORT=2]="ABORT",Wn;var B})();class Lt{constructor(k,X,fe,Ne,Ze,yt,Kt,Bt,Bn,hn,ar){this.url_=k,this.method_=X,this.headers_=fe,this.body_=Ne,this.successCodes_=Ze,this.additionalRetryCodes_=yt,this.callback_=Kt,this.errorCallback_=Bt,this.timeout_=Bn,this.progressCallback_=hn,this.connectionFactory_=ar,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ur,Vn)=>{this.resolve_=Ur,this.reject_=Vn,this.start_()})}start_(){const X=(fe,Ne)=>{const Ze=this.resolve_,yt=this.reject_,Kt=Ne.connection;if(Ne.wasSuccessCode)try{const Bt=this.callback_(Kt,Kt.getResponse());!function Dn(B){return void 0!==B}(Bt)?Ze():Ze(Bt)}catch(Bt){yt(Bt)}else if(null!==Kt){const Bt=$e();Bt.serverResponse=Kt.getErrorText(),yt(this.errorCallback_?this.errorCallback_(Kt,Bt):Bt)}else yt(Ne.canceled?this.appDelete_?pn():ce():function Qe(){return new De("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?X(0,new Gr(!1,null,!0)):this.backoffId_=function Sr(B,k,X){let fe=1,Ne=null,Ze=null,yt=!1,Kt=0;function Bt(){return 2===Kt}let Bn=!1;function hn(...Br){Bn||(Bn=!0,k.apply(null,Br))}function ar(Br){Ne=setTimeout(()=>{Ne=null,B(Vn,Bt())},Br)}function Ur(){Ze&&clearTimeout(Ze)}function Vn(Br,...Rs){if(Bn)return void Ur();if(Br)return Ur(),void hn.call(null,Br,...Rs);if(Bt()||yt)return Ur(),void hn.call(null,Br,...Rs);let ui;fe<64&&(fe*=2),1===Kt?(Kt=2,ui=0):ui=1e3*(fe+Math.random()),ar(ui)}let Ar=!1;function _s(Br){Ar||(Ar=!0,Ur(),!Bn&&(null!==Ne?(Br||(Kt=2),clearTimeout(Ne),ar(0)):Br||(Kt=1)))}return ar(0),Ze=setTimeout(()=>{yt=!0,_s(!0)},X),_s}((fe,Ne)=>{if(Ne)return void fe(!1,new Gr(!1,null,!0));const Ze=this.connectionFactory_();this.pendingConnection_=Ze;const yt=Kt=>{null!==this.progressCallback_&&this.progressCallback_(Kt.loaded,Kt.lengthComputable?Kt.total:-1)};null!==this.progressCallback_&&Ze.addUploadProgressListener(yt),Ze.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ze.removeUploadProgressListener(yt),this.pendingConnection_=null;const Kt=Ze.getErrorCode()===Wn.NO_ERROR,Bt=Ze.getStatus();if(!Kt||this.isRetryStatusCode_(Bt)){const hn=Ze.getErrorCode()===Wn.ABORT;return void fe(!1,new Gr(!1,null,hn))}const Bn=-1!==this.successCodes_.indexOf(Bt);fe(!0,new Gr(Bn,Ze))})},X,this.timeout_)}getPromise(){return this.promise_}cancel(k){this.canceled_=!0,this.appDelete_=k||!1,null!==this.backoffId_&&function In(B){B(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(k){const X=k>=500&&k<600,Ne=-1!==[408,429].indexOf(k),Ze=-1!==this.additionalRetryCodes_.indexOf(k);return X||Ne||Ze}}class Gr{constructor(k,X,fe){this.wasSuccessCode=k,this.connection=X,this.canceled=!!fe}}function ir(...B){const k=function Nr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==k){const X=new k;for(let fe=0;fe<B.length;fe++)X.append(B[fe]);return X.getBlob()}if(mr())return new Blob(B);throw new De("unsupported-environment","This browser doesn't seem to support creating Blobs")}const bn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wt{constructor(k,X){this.data=k,this.contentType=X||null}}function lr(B,k){switch(B){case bn.RAW:return new Wt(zr(k));case bn.BASE64:case bn.BASE64URL:return new Wt(bi(B,k));case bn.DATA_URL:return new Wt(function fi(B){const k=new Ln(B);return k.base64?bi(bn.BASE64,k.rest):function un(B){let k;try{k=decodeURIComponent(B)}catch{throw Rn(bn.DATA_URL,"Malformed data URL.")}return zr(k)}(k.rest)}(k),function Gn(B){return new Ln(B).contentType}(k))}throw $e()}function zr(B){const k=[];for(let X=0;X<B.length;X++){let fe=B.charCodeAt(X);fe<=127?k.push(fe):fe<=2047?k.push(192|fe>>6,128|63&fe):55296==(64512&fe)?X<B.length-1&&56320==(64512&B.charCodeAt(X+1))?(fe=65536|(1023&fe)<<10|1023&B.charCodeAt(++X),k.push(240|fe>>18,128|fe>>12&63,128|fe>>6&63,128|63&fe)):k.push(239,191,189):56320==(64512&fe)?k.push(239,191,189):k.push(224|fe>>12,128|fe>>6&63,128|63&fe)}return new Uint8Array(k)}function bi(B,k){switch(B){case bn.BASE64:{const Ne=-1!==k.indexOf("-"),Ze=-1!==k.indexOf("_");if(Ne||Ze)throw Rn(B,"Invalid character '"+(Ne?"-":"_")+"' found: is it base64url encoded?");break}case bn.BASE64URL:{const Ne=-1!==k.indexOf("+"),Ze=-1!==k.indexOf("/");if(Ne||Ze)throw Rn(B,"Invalid character '"+(Ne?"+":"/")+"' found: is it base64 encoded?");k=k.replace(/-/g,"+").replace(/_/g,"/");break}}let X;try{X=function zt(B){return atob(B)}(k)}catch{throw Rn(B,"Invalid character found")}const fe=new Uint8Array(X.length);for(let Ne=0;Ne<X.length;Ne++)fe[Ne]=X.charCodeAt(Ne);return fe}class Ln{constructor(k){this.base64=!1,this.contentType=null;const X=k.match(/^data:([^,]+)?,/);if(null===X)throw Rn(bn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const fe=X[1]||null;null!=fe&&(this.base64=function Mr(B,k){return B.length>=k.length&&B.substring(B.length-k.length)===k}(fe,";base64"),this.contentType=this.base64?fe.substring(0,fe.length-7):fe),this.rest=k.substring(k.indexOf(",")+1)}}class cr{constructor(k,X){let fe=0,Ne="";br(k)?(this.data_=k,fe=k.size,Ne=k.type):k instanceof ArrayBuffer?(X?this.data_=new Uint8Array(k):(this.data_=new Uint8Array(k.byteLength),this.data_.set(new Uint8Array(k))),fe=this.data_.length):k instanceof Uint8Array&&(X?this.data_=k:(this.data_=new Uint8Array(k.length),this.data_.set(k)),fe=k.length),this.size_=fe,this.type_=Ne}size(){return this.size_}type(){return this.type_}slice(k,X){if(br(this.data_)){const Ne=function Xt(B,k,X){return B.webkitSlice?B.webkitSlice(k,X):B.mozSlice?B.mozSlice(k,X):B.slice?B.slice(k,X):null}(this.data_,k,X);return null===Ne?null:new cr(Ne)}{const fe=new Uint8Array(this.data_.buffer,k,X-k);return new cr(fe,!0)}}static getBlob(...k){if(mr()){const X=k.map(fe=>fe instanceof cr?fe.data_:fe);return new cr(ir.apply(null,X))}{const X=k.map(yt=>Yn(yt)?lr(bn.RAW,yt).data:yt.data_);let fe=0;X.forEach(yt=>{fe+=yt.byteLength});const Ne=new Uint8Array(fe);let Ze=0;return X.forEach(yt=>{for(let Kt=0;Kt<yt.length;Kt++)Ne[Ze++]=yt[Kt]}),new cr(Ne,!0)}}uploadData(){return this.data_}}function kt(B){let k;try{k=JSON.parse(B)}catch{return null}return function zn(B){return"object"==typeof B&&!Array.isArray(B)}(k)?k:null}function ln(B){const k=B.lastIndexOf("/",B.length-2);return-1===k?B:B.slice(k+1)}function Jt(B,k){return k}class oe{constructor(k,X,fe,Ne){this.server=k,this.local=X||k,this.writable=!!fe,this.xform=Ne||Jt}}let ye=null;function nt(){if(ye)return ye;const B=[];B.push(new oe("bucket")),B.push(new oe("generation")),B.push(new oe("metageneration")),B.push(new oe("name","fullPath",!0));const X=new oe("name");X.xform=function k(Ze,yt){return function Ce(B){return!Yn(B)||B.length<2?B:ln(B)}(yt)},B.push(X);const Ne=new oe("size");return Ne.xform=function fe(Ze,yt){return void 0!==yt?Number(yt):yt},B.push(Ne),B.push(new oe("timeCreated")),B.push(new oe("updated")),B.push(new oe("md5Hash",null,!0)),B.push(new oe("cacheControl",null,!0)),B.push(new oe("contentDisposition",null,!0)),B.push(new oe("contentEncoding",null,!0)),B.push(new oe("contentLanguage",null,!0)),B.push(new oe("contentType",null,!0)),B.push(new oe("metadata","customMetadata",!0)),ye=B,ye}function Gt(B,k,X){const fe=kt(k);return null===fe?null:function Dt(B,k,X){const fe={type:"file"},Ne=X.length;for(let Ze=0;Ze<Ne;Ze++){const yt=X[Ze];fe[yt.local]=yt.xform(fe,k[yt.server])}return function je(B,k){Object.defineProperty(B,"ref",{get:function X(){const Ze=new en(B.bucket,B.fullPath);return k._makeStorageReference(Ze)}})}(fe,B),fe}(B,fe,X)}function dr(B,k){const X={},fe=k.length;for(let Ne=0;Ne<fe;Ne++){const Ze=k[Ne];Ze.writable&&(X[Ze.server]=B[Ze.local])}return JSON.stringify(X)}const sr="prefixes";class ee{constructor(k,X,fe,Ne){this.url=k,this.method=X,this.handler=fe,this.timeout=Ne,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Re(B){if(!B)throw $e()}function st(B,k){return function X(fe,Ne){const Ze=Gt(B,Ne,k);return Re(null!==Ze),Ze}}function Tn(B){return function k(X,fe){let Ne;return Ne=401===X.getStatus()?X.getErrorText().includes("Firebase App Check token is invalid")?function It(){return new De("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function ot(){return new De("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===X.getStatus()?function ke(B){return new De("quota-exceeded","Quota for bucket '"+B+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(B.bucket):403===X.getStatus()?function ne(B){return new De("unauthorized","User does not have permission to access '"+B+"'.")}(B.path):fe,Ne.serverResponse=fe.serverResponse,Ne}}function Kn(B){const k=Tn(B);return function X(fe,Ne){let Ze=k(fe,Ne);return 404===fe.getStatus()&&(Ze=function Ie(B){return new De("object-not-found","Object '"+B+"' does not exist.")}(B.path)),Ze.serverResponse=Ne.serverResponse,Ze}}function Ti(B,k,X){const Ne=xn(k.fullServerUrl(),B.host,B._protocol),yt=B.maxOperationRetryTime,Kt=new ee(Ne,"GET",st(B,X),yt);return Kt.errorHandler=Kn(k),Kt}function vn(B,k,X,fe,Ne){const Ze={};Ze.prefix=k.isRoot?"":k.path+"/",X&&X.length>0&&(Ze.delimiter=X),fe&&(Ze.pageToken=fe),Ne&&(Ze.maxResults=Ne);const Kt=xn(k.bucketOnlyServerUrl(),B.host,B._protocol),Bn=B.maxOperationRetryTime,hn=new ee(Kt,"GET",function xt(B,k){return function X(fe,Ne){const Ze=function ae(B,k,X){const fe=kt(X);return null===fe?null:function ie(B,k,X){const fe={prefixes:[],items:[],nextPageToken:X.nextPageToken};if(X[sr])for(const Ne of X[sr]){const Ze=Ne.replace(/\/$/,""),yt=B._makeStorageReference(new en(k,Ze));fe.prefixes.push(yt)}if(X.items)for(const Ne of X.items){const Ze=B._makeStorageReference(new en(k,Ne.name));fe.items.push(Ze)}return fe}(B,k,fe)}(B,k,Ne);return Re(null!==Ze),Ze}}(B,k.bucket),Bn);return hn.urlParams=Ze,hn.errorHandler=Tn(k),hn}function Fs(B,k,X){const fe=Object.assign({},X);return fe.fullPath=B.path,fe.size=k.size(),fe.contentType||(fe.contentType=function Cr(B,k){return B&&B.contentType||k&&k.type()||"application/octet-stream"}(null,k)),fe}class Qr{constructor(k,X,fe,Ne){this.current=k,this.total=X,this.finalized=!!fe,this.metadata=Ne||null}}function Xr(B,k){let X=null;try{X=B.getResponseHeader("X-Goog-Upload-Status")}catch{Re(!1)}return Re(!!X&&-1!==(k||["active"]).indexOf(X)),X}const bs={STATE_CHANGED:"state_changed"},Rr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Si(B){switch(B){case"running":case"pausing":case"canceling":return Rr.RUNNING;case"paused":return Rr.PAUSED;case"success":return Rr.SUCCESS;case"canceled":return Rr.CANCELED;default:return Rr.ERROR}}class Jr{constructor(k,X,fe){if(function Ai(B){return"function"==typeof B}(k)||null!=X||null!=fe)this.next=k,this.error=X??void 0,this.complete=fe??void 0;else{const Ze=k;this.next=Ze.next,this.error=Ze.error,this.complete=Ze.complete}}}function ii(B){return(...k)=>{Promise.resolve().then(()=>B(...k))}}class si extends class to{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wn.NO_ERROR,this.sendPromise_=new Promise(k=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wn.ABORT,k()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wn.NETWORK_ERROR,k()}),this.xhr_.addEventListener("load",()=>{k()})})}send(k,X,fe,Ne){if(this.sent_)throw rn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(X,k,!0),void 0!==Ne)for(const Ze in Ne)Ne.hasOwnProperty(Ze)&&this.xhr_.setRequestHeader(Ze,Ne[Ze].toString());return void 0!==fe?this.xhr_.send(fe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(k){return this.xhr_.getResponseHeader(k)}addUploadProgressListener(k){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",k)}removeUploadProgressListener(k){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",k)}}{initXhr(){this.xhr_.responseType="text"}}function Ir(){return new si}class Ts{constructor(k,X,fe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=k,this._blob=X,this._metadata=fe,this._mappings=nt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Ne=>{this._request=void 0,this._chunkMultiplier=1,Ne._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=Ne,this._transition("error"))},this._metadataErrorHandler=Ne=>{this._request=void 0,Ne._codeEquals("canceled")?this.completeTransitions_():(this._error=Ne,this._transition("error"))},this._promise=new Promise((Ne,Ze)=>{this._resolve=Ne,this._reject=Ze,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const k=this._transferred;return X=>this._updateProgress(k+X)}_shouldDoResumable(k){return k.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(k){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([X,fe])=>{switch(this._state){case"running":k(X,fe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((k,X)=>{const fe=function Zi(B,k,X,fe,Ne){const Ze=k.bucketOnlyServerUrl(),yt=Fs(k,fe,Ne),Kt={name:yt.fullPath},Bt=xn(Ze,B.host,B._protocol),hn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${fe.size()}`,"X-Goog-Upload-Header-Content-Type":yt.contentType,"Content-Type":"application/json; charset=utf-8"},ar=dr(yt,X),Ar=new ee(Bt,"POST",function Vn(_s){let Br;Xr(_s);try{Br=_s.getResponseHeader("X-Goog-Upload-URL")}catch{Re(!1)}return Re(Yn(Br)),Br},B.maxUploadRetryTime);return Ar.urlParams=Kt,Ar.headers=hn,Ar.body=ar,Ar.errorHandler=Tn(k),Ar}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ne=this._ref.storage._makeRequest(fe,Ir,k,X);this._request=Ne,Ne.getPromise().then(Ze=>{this._request=void 0,this._uploadUrl=Ze,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const k=this._uploadUrl;this._resolveToken((X,fe)=>{const Ne=function Qn(B,k,X,fe){const Bt=new ee(X,"POST",function Ze(Bn){const hn=Xr(Bn,["active","final"]);let ar=null;try{ar=Bn.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Re(!1)}ar||Re(!1);const Ur=Number(ar);return Re(!isNaN(Ur)),new Qr(Ur,fe.size(),"final"===hn)},B.maxUploadRetryTime);return Bt.headers={"X-Goog-Upload-Command":"query"},Bt.errorHandler=Tn(k),Bt}(this._ref.storage,this._ref._location,k,this._blob),Ze=this._ref.storage._makeRequest(Ne,Ir,X,fe);this._request=Ze,Ze.getPromise().then(yt=>{this._request=void 0,this._updateProgress(yt.current),this._needToFetchStatus=!1,yt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const k=262144*this._chunkMultiplier,X=new Qr(this._transferred,this._blob.size()),fe=this._uploadUrl;this._resolveToken((Ne,Ze)=>{let yt;try{yt=function Ds(B,k,X,fe,Ne,Ze,yt,Kt){const Bt=new Qr(0,0);if(yt?(Bt.current=yt.current,Bt.total=yt.total):(Bt.current=0,Bt.total=fe.size()),fe.size()!==Bt.total)throw function mt(){return new De("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Bn=Bt.total-Bt.current;let hn=Bn;Ne>0&&(hn=Math.min(hn,Ne));const ar=Bt.current,Ar={"X-Goog-Upload-Command":hn===Bn?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Bt.current}`},_s=fe.slice(ar,ar+hn);if(null===_s)throw gt();const ui=new ee(X,"POST",function Br(Wr,vs){const cs=Xr(Wr,["active","final"]),Ei=Bt.current+hn,Vs=fe.size();let ro;return ro="final"===cs?st(k,Ze)(Wr,vs):null,new Qr(Ei,Vs,"final"===cs,ro)},k.maxUploadRetryTime);return ui.headers=Ar,ui.body=_s.uploadData(),ui.progressCallback=Kt||null,ui.errorHandler=Tn(B),ui}(this._ref._location,this._ref.storage,fe,this._blob,k,this._mappings,X,this._makeProgressCallback())}catch(Bt){return this._error=Bt,void this._transition("error")}const Kt=this._ref.storage._makeRequest(yt,Ir,Ne,Ze);this._request=Kt,Kt.getPromise().then(Bt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Bt.current),Bt.finalized?(this._metadata=Bt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((k,X)=>{const fe=Ti(this._ref.storage,this._ref._location,this._mappings),Ne=this._ref.storage._makeRequest(fe,Ir,k,X);this._request=Ne,Ne.getPromise().then(Ze=>{this._request=void 0,this._metadata=Ze,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((k,X)=>{const fe=function Mi(B,k,X,fe,Ne){const Ze=k.bucketOnlyServerUrl(),yt={"X-Goog-Upload-Protocol":"multipart"},Bt=function Kt(){let ui="";for(let Wr=0;Wr<2;Wr++)ui+=Math.random().toString().slice(2);return ui}();yt["Content-Type"]="multipart/related; boundary="+Bt;const Bn=Fs(k,fe,Ne),hn=dr(Bn,X),Vn=cr.getBlob("--"+Bt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+hn+"\r\n--"+Bt+"\r\nContent-Type: "+Bn.contentType+"\r\n\r\n",fe,"\r\n--"+Bt+"--");if(null===Vn)throw gt();const Ar={name:Bn.fullPath},_s=xn(Ze,B.host,B._protocol),Rs=B.maxUploadRetryTime,ji=new ee(_s,"POST",st(B,X),Rs);return ji.urlParams=Ar,ji.headers=yt,ji.body=Vn.uploadData(),ji.errorHandler=Tn(k),ji}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ne=this._ref.storage._makeRequest(fe,Ir,k,X);this._request=Ne,Ne.getPromise().then(Ze=>{this._request=void 0,this._metadata=Ze,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(k){const X=this._transferred;this._transferred=k,this._transferred!==X&&this._notifyObservers()}_transition(k){if(this._state!==k)switch(k){case"canceling":case"pausing":this._state=k,void 0!==this._request&&this._request.cancel();break;case"running":const X="paused"===this._state;this._state=k,X&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=k,this._notifyObservers();break;case"canceled":this._error=ce(),this._state=k,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const k=Si(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:k,metadata:this._metadata,task:this,ref:this._ref}}on(k,X,fe,Ne){const Ze=new Jr(X||void 0,fe||void 0,Ne||void 0);return this._addObserver(Ze),()=>{this._removeObserver(Ze)}}then(k,X){return this._promise.then(k,X)}catch(k){return this.then(null,k)}_addObserver(k){this._observers.push(k),this._notifyObserver(k)}_removeObserver(k){const X=this._observers.indexOf(k);-1!==X&&this._observers.splice(X,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(X=>{this._notifyObserver(X)})}_finishPromise(){if(void 0!==this._resolve){let k=!0;switch(Si(this._state)){case Rr.SUCCESS:ii(this._resolve.bind(null,this.snapshot))();break;case Rr.CANCELED:case Rr.ERROR:ii(this._reject.bind(null,this._error))();break;default:k=!1}k&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(k){switch(Si(this._state)){case Rr.RUNNING:case Rr.PAUSED:k.next&&ii(k.next.bind(k,this.snapshot))();break;case Rr.SUCCESS:k.complete&&ii(k.complete.bind(k))();break;default:k.error&&ii(k.error.bind(k,this._error))()}}resume(){const k="paused"===this._state||"pausing"===this._state;return k&&this._transition("running"),k}pause(){const k="running"===this._state;return k&&this._transition("pausing"),k}cancel(){const k="running"===this._state||"pausing"===this._state;return k&&this._transition("canceling"),k}}class Ss{constructor(k,X){this._service=k,this._location=X instanceof en?X:en.makeFromUrl(X,k.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(k,X){return new Ss(k,X)}get root(){const k=new en(this._location.bucket,"");return this._newRef(this._service,k)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ln(this._location.path)}get storage(){return this._service}get parent(){const k=function ut(B){if(0===B.length)return null;const k=B.lastIndexOf("/");return-1===k?"":B.slice(0,k)}(this._location.path);if(null===k)return null;const X=new en(this._location.bucket,k);return new Ss(this._service,X)}_throwIfRoot(k){if(""===this._location.path)throw Et(k)}}function He(B,k,X){return at.apply(this,arguments)}function at(){return(at=(0,le.Z)(function*(B,k,X){const Ne=yield bt(B,{pageToken:X});k.prefixes.push(...Ne.prefixes),k.items.push(...Ne.items),null!=Ne.nextPageToken&&(yield He(B,k,Ne.nextPageToken))})).apply(this,arguments)}function bt(B,k){null!=k&&"number"==typeof k.maxResults&&jr("options.maxResults",1,1e3,k.maxResults);const X=k||{},fe=vn(B.storage,B._location,"/",X.pageToken,X.maxResults);return B.storage.makeRequestWithTokens(fe,Ir)}function ai(B){B._throwIfRoot("getDownloadURL");const k=function hs(B,k,X){const Ne=xn(k.fullServerUrl(),B.host,B._protocol),yt=B.maxOperationRetryTime,Kt=new ee(Ne,"GET",function tn(B,k){return function X(fe,Ne){const Ze=Gt(B,Ne,k);return Re(null!==Ze),function An(B,k,X,fe){const Ne=kt(k);if(null===Ne||!Yn(Ne.downloadTokens))return null;const Ze=Ne.downloadTokens;if(0===Ze.length)return null;const yt=encodeURIComponent;return Ze.split(",").map(Bn=>{const ar=B.fullPath;return xn("/b/"+yt(B.bucket)+"/o/"+yt(ar),X,fe)+_n({alt:"media",token:Bn})})[0]}(Ze,Ne,B.host,B._protocol)}}(B,X),yt);return Kt.errorHandler=Kn(k),Kt}(B.storage,B._location,nt());return B.storage.makeRequestWithTokens(k,Ir).then(X=>{if(null===X)throw function Yt(){return new De("no-download-url","The given file does not have any download URLs.")}();return X})}function Bi(B,k){const X=function $t(B,k){const X=k.split("/").filter(fe=>fe.length>0).join("/");return 0===B.length?X:B+"/"+X}(B._location.path,k),fe=new en(B._location.bucket,X);return new Ss(B.storage,fe)}function Qi(B,k){if(B instanceof So){const X=B;if(null==X._bucket)throw function Oe(){return new De("no-default-bucket","No default bucket found. Did you set the '"+ct+"' property when initializing the app?")}();const fe=new Ss(X,X._bucket);return null!=k?Qi(fe,k):fe}return void 0!==k?Bi(B,k):B}function Xi(B,k){if(k&&function Vi(B){return/^[A-Za-z]+:\/\//.test(B)}(k)){if(B instanceof So)return function Us(B,k){return new Ss(B,k)}(B,k);throw On("To use ref(service, url), the first argument must be a Storage instance.")}return Qi(B,k)}function Gs(B,k){const X=k?.[ct];return null==X?null:en.makeFromBucketSpec(X,B)}class So{constructor(k,X,fe,Ne,Ze){this.app=k,this._authProvider=X,this._appCheckProvider=fe,this._url=Ne,this._firebaseVersion=Ze,this._bucket=null,this._host=Ge,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Ne?en.makeFromBucketSpec(Ne,this._host):Gs(this._host,this.app.options)}get host(){return this._host}set host(k){this._host=k,this._bucket=null!=this._url?en.makeFromBucketSpec(this._url,k):Gs(k,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(k){jr("time",0,Number.POSITIVE_INFINITY,k),this._maxUploadRetryTime=k}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(k){jr("time",0,Number.POSITIVE_INFINITY,k),this._maxOperationRetryTime=k}_getAuthToken(){var k=this;return(0,le.Z)(function*(){if(k._overrideAuthToken)return k._overrideAuthToken;const X=k._authProvider.getImmediate({optional:!0});if(X){const fe=yield X.getToken();if(null!==fe)return fe.accessToken}return null})()}_getAppCheckToken(){var k=this;return(0,le.Z)(function*(){const X=k._appCheckProvider.getImmediate({optional:!0});return X?(yield X.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(k=>k.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(k){return new Ss(this,k)}_makeRequest(k,X,fe,Ne){if(this._deleted)return new Mt(pn());{const Ze=function Lr(B,k,X,fe,Ne,Ze){const yt=_n(B.urlParams),Kt=B.url+yt,Bt=Object.assign({},B.headers);return function ri(B,k){k&&(B["X-Firebase-GMPID"]=k)}(Bt,k),function hi(B,k){null!==k&&k.length>0&&(B.Authorization="Firebase "+k)}(Bt,X),function Tr(B,k){B["X-Firebase-Storage-Version"]="webjs/"+(k??"AppManager")}(Bt,Ze),function qi(B,k){null!==k&&(B["X-Firebase-AppCheck"]=k)}(Bt,fe),new Lt(Kt,B.method,Bt,B.body,B.successCodes,B.additionalRetryCodes,B.handler,B.errorHandler,B.timeout,B.progressCallback,Ne)}(k,this._appId,fe,Ne,X,this._firebaseVersion);return this._requests.add(Ze),Ze.getPromise().then(()=>this._requests.delete(Ze),()=>this._requests.delete(Ze)),Ze}}makeRequestWithTokens(k,X){var fe=this;return(0,le.Z)(function*(){const[Ne,Ze]=yield Promise.all([fe._getAuthToken(),fe._getAppCheckToken()]);return fe._makeRequest(k,X,Ne,Ze).getPromise()})()}}const $i="@firebase/storage";function Ws(B,k){return Xi(B=(0,it.m9)(B),k)}function Xo(B,{instanceIdentifier:k}){const X=B.getProvider("app").getImmediate(),fe=B.getProvider("auth-internal"),Ne=B.getProvider("app-check-internal");return new So(X,fe,Ne,k,we.SDK_VERSION)}!function Xn(){(0,we._registerComponent)(new Xe.wA("storage",Xo,"PUBLIC").setMultipleInstances(!0)),(0,we.registerVersion)($i,"0.9.10",""),(0,we.registerVersion)($i,"0.9.10","esm2017")}();class ei{constructor(k,X,fe){this._delegate=k,this.task=X,this.ref=fe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ks{constructor(k,X){this._delegate=k,this._ref=X,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ei(this._delegate.snapshot,this,this._ref)}then(k,X){return this._delegate.then(fe=>{if(k)return k(new ei(fe,this,this._ref))},X)}on(k,X,fe,Ne){let Ze;return X&&(Ze="function"==typeof X?yt=>X(new ei(yt,this,this._ref)):{next:X.next?yt=>X.next(new ei(yt,this,this._ref)):void 0,complete:X.complete||void 0,error:X.error||void 0}),this._delegate.on(k,Ze,fe||void 0,Ne||void 0)}}class ns{constructor(k,X){this._delegate=k,this._service=X}get prefixes(){return this._delegate.prefixes.map(k=>new mi(k,this._service))}get items(){return this._delegate.items.map(k=>new mi(k,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class mi{constructor(k,X){this._delegate=k,this.storage=X}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(k){const X=function Ci(B,k){return Bi(B,k)}(this._delegate,k);return new mi(X,this.storage)}get root(){return new mi(this._delegate.root,this.storage)}get parent(){const k=this._delegate.parent;return null==k?null:new mi(k,this.storage)}put(k,X){return this._throwIfRoot("put"),new Ks(function Bs(B,k,X){return function oi(B,k,X){return B._throwIfRoot("uploadBytesResumable"),new Ts(B,new cr(k),X)}(B=(0,it.m9)(B),k,X)}(this._delegate,k,X),this)}putString(k,X=bn.RAW,fe){this._throwIfRoot("putString");const Ne=lr(X,k),Ze=Object.assign({},fe);return null==Ze.contentType&&null!=Ne.contentType&&(Ze.contentType=Ne.contentType),new Ks(new Ts(this._delegate,new cr(Ne.data,!0),Ze),this)}listAll(){return function ts(B){return function xe(B){const k={prefixes:[],items:[]};return He(B,k).then(()=>k)}(B=(0,it.m9)(B))}(this._delegate).then(k=>new ns(k,this.storage))}list(k){return function es(B,k){return bt(B=(0,it.m9)(B),k)}(this._delegate,k||void 0).then(X=>new ns(X,this.storage))}getMetadata(){return function ho(B){return function Vt(B){B._throwIfRoot("getMetadata");const k=Ti(B.storage,B._location,nt());return B.storage.makeRequestWithTokens(k,Ir)}(B=(0,it.m9)(B))}(this._delegate)}updateMetadata(k){return function us(B,k){return function En(B,k){B._throwIfRoot("updateMetadata");const X=function Hs(B,k,X,fe){const Ze=xn(k.fullServerUrl(),B.host,B._protocol),Kt=dr(X,fe),Bn=B.maxOperationRetryTime,hn=new ee(Ze,"PATCH",st(B,fe),Bn);return hn.headers={"Content-Type":"application/json; charset=utf-8"},hn.body=Kt,hn.errorHandler=Kn(k),hn}(B.storage,B._location,k,nt());return B.storage.makeRequestWithTokens(X,Ir)}(B=(0,it.m9)(B),k)}(this._delegate,k)}getDownloadURL(){return function Oi(B){return ai(B=(0,it.m9)(B))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function gs(B){return function _r(B){B._throwIfRoot("deleteObject");const k=function Ni(B,k){const fe=xn(k.fullServerUrl(),B.host,B._protocol),Kt=new ee(fe,"DELETE",function yt(Bt,Bn){},B.maxOperationRetryTime);return Kt.successCodes=[200,204],Kt.errorHandler=Kn(k),Kt}(B.storage,B._location);return B.storage.makeRequestWithTokens(k,Ir)}(B=(0,it.m9)(B))}(this._delegate)}_throwIfRoot(k){if(""===this._delegate._location.path)throw Et(k)}}class or{constructor(k,X){this.app=k,this._delegate=X}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(k){if(Co(k))throw On("ref() expected a child path but got a URL, use refFromURL instead.");return new mi(Ws(this._delegate,k),this)}refFromURL(k){if(!Co(k))throw On("refFromURL() expected a full URL but got a child path, use ref() instead.");try{en.makeFromUrl(k,this._delegate.host)}catch{throw On("refFromUrl() expected a valid full URL but got an invalid one.")}return new mi(Ws(this._delegate,k),this)}setMaxUploadRetryTime(k){this._delegate.maxUploadRetryTime=k}setMaxOperationRetryTime(k){this._delegate.maxOperationRetryTime=k}useEmulator(k,X,fe={}){!function ms(B,k,X,fe={}){!function Cs(B,k,X,fe={}){B.host=`${k}:${X}`,B._protocol="http";const{mockUserToken:Ne}=fe;Ne&&(B._overrideAuthToken="string"==typeof Ne?Ne:(0,it.Sg)(Ne,B.app.options.projectId))}(B,k,X,fe)}(this._delegate,k,X,fe)}}function Co(B){return/^[A-Za-z]+:\/\//.test(B)}function is(B,{instanceIdentifier:k}){const X=B.getProvider("app-compat").getImmediate(),fe=B.getProvider("storage").getImmediate({identifier:k});return new or(X,fe)}!function Dr(B){const k={TaskState:Rr,TaskEvent:bs,StringFormat:bn,Storage:or,Reference:mi};B.INTERNAL.registerComponent(new Xe.wA("storage-compat",is,"PUBLIC").setServiceProps(k).setMultipleInstances(!0)),B.registerVersion("@firebase/storage-compat","0.1.18")}(se.Z);var cn=F(440),ys=F(127);function Ms(B){const k=function Ao(B){return new E.y(k=>{const X=yt=>k.next(yt);X(B.snapshot);const Ze=B.on("state_changed",X);return B.then(yt=>{X(yt),k.complete()},yt=>{X(B.snapshot),(yt=>{k.error(yt)})(yt)}),function(){Ze()}}).pipe((0,me.b)(0))}(B);return{task:B,then:B.then.bind(B),catch:B.catch.bind(B),pause:B.pause.bind(B),cancel:B.cancel.bind(B),resume:B.resume.bind(B),snapshotChanges:()=>k,percentageChanges:()=>k.pipe((0,_e.U)(X=>X.bytesTransferred/X.totalBytes*100))}}function qs(B){return{getDownloadURL:()=>(0,z.of)(void 0).pipe(be.fc,(0,ve.w)(()=>B.getDownloadURL()),be.iC),getMetadata:()=>(0,z.of)(void 0).pipe(be.fc,(0,ve.w)(()=>B.getMetadata()),be.iC),delete:()=>(0,G.D)(B.delete()),child:k=>qs(B.child(k)),updateMetadata:k=>(0,G.D)(B.updateMetadata(k)),put:(k,X)=>Ms(B.put(k,X)),putString:(k,X,fe)=>Ms(B.putString(k,X,fe)),list:k=>(0,G.D)(B.list(k)),listAll:()=>(0,G.D)(B.listAll())}}const Zs=new pe.OlP("angularfire2.storageBucket"),Li=new pe.OlP("angularfire2.storage.maxUploadRetryTime"),po=new pe.OlP("angularfire2.storage.maxOperationRetryTime"),go=new pe.OlP("angularfire2.storage.use-emulator");let ht=(()=>{class B{constructor(X,fe,Ne,Ze,yt,Kt,Bt,Bn,hn,ar){const Ur=(0,Te.on)(X,yt,fe);this.storage=(0,Te.cc)(`${Ur.name}.storage.${Ne}`,"AngularFireStorage",Ur.name,()=>{const Vn=yt.runOutsideAngular(()=>Ur.storage(Ne||void 0)),Ar=hn;return Ar&&Vn.useEmulator(...Ar),Bt&&Vn.setMaxUploadRetryTime(Bt),Bn&&Vn.setMaxOperationRetryTime(Bn),Vn},[Bt,Bn])}ref(X){return qs(this.storage.ref(X))}refFromURL(X){return qs(this.storage.refFromURL(X))}upload(X,fe,Ne){return qs(this.storage.ref(X)).put(fe,Ne)}}return B.\u0275fac=function(X){return new(X||B)(pe.LFG(Te.Dh),pe.LFG(Te.xv,8),pe.LFG(Zs,8),pe.LFG(pe.Lbi),pe.LFG(pe.R0b),pe.LFG(be.HU),pe.LFG(Li,8),pe.LFG(po,8),pe.LFG(go,8),pe.LFG(cn.nm,8))},B.\u0275prov=pe.Yz7({token:B,factory:B.\u0275fac,providedIn:"any"}),B})(),mo=(()=>{class B{}return B.\u0275fac=function(X){return new(X||B)},B.\u0275mod=pe.oAB({type:B}),B.\u0275inj=pe.cJS({}),B})(),yo=(()=>{class B{constructor(){ys.Z.registerVersion("angularfire",be.q4.full,"gcs-compat")}}return B.\u0275fac=function(X){return new(X||B)},B.\u0275mod=pe.oAB({type:B}),B.\u0275inj=pe.cJS({providers:[ht],imports:[mo]}),B})()},2011:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Dh:()=>pe,GT:()=>ve,cc:()=>Xe,hO:()=>it,on:()=>se,pX:()=>_e,xv:()=>Te});var E=F(4650),z=F(127),G=F(5813);Rt=F.hmd(Rt);const me=["ngOnDestroy"],_e=(Ke,De,Ot,$e={})=>new Proxy(Ke,{get:(Ie,ke)=>Ot.runOutsideAngular(()=>{var ot;if(Ke[ke])return!(null===(ot=$e?.spy)||void 0===ot)&&ot.get&&$e.spy.get(ke,Ke[ke]),Ke[ke];if(me.indexOf(ke)>-1)return()=>{};const It=De.toPromise().then(ne=>{const Qe=ne&&ne[ke];return"function"==typeof Qe?Qe.bind(ne):Qe&&Qe.then?Qe.then(ce=>Ot.run(()=>ce)):Ot.run(()=>Qe)});return new Proxy(()=>{},{get:(ne,Qe)=>It[Qe],apply:(ne,Qe,ce)=>It.then(Me=>{var Ve;const Oe=Me&&Me(...ce);return!(null===(Ve=$e?.spy)||void 0===Ve)&&Ve.apply&&$e.spy.apply(ke,ce,Oe),Oe})})})}),ve=(Ke,De)=>{De.forEach(Ot=>{Object.getOwnPropertyNames(Ot.prototype||Ot).forEach($e=>{Object.defineProperty(Ke.prototype,$e,Object.getOwnPropertyDescriptor(Ot.prototype||Ot,$e))})})};class be{constructor(De){return De}}const pe=new E.OlP("angularfire2.app.options"),Te=new E.OlP("angularfire2.app.name");function se(Ke,De,Ot){const Ie="object"==typeof Ot&&Ot||{};Ie.name=Ie.name||"string"==typeof Ot&&Ot||"[DEFAULT]";const ot=z.Z.apps.filter(It=>It&&It.name===Ie.name)[0]||De.runOutsideAngular(()=>z.Z.initializeApp(Ke,Ie));try{JSON.stringify(Ke)!==JSON.stringify(ot.options)&&le("error",`${ot.name} Firebase App already initialized with different options${Rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new be(ot)}const le=(Ke,...De)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Ke](...De)},we={provide:be,useFactory:se,deps:[pe,E.R0b,[new E.FiY,Te]]};let it=(()=>{class Ke{constructor(Ot){z.Z.registerVersion("angularfire",G.q4.full,"core"),z.Z.registerVersion("angularfire",G.q4.full,"app-compat"),z.Z.registerVersion("angular",E.q4F.full,Ot.toString())}static initializeApp(Ot,$e){return{ngModule:Ke,providers:[{provide:pe,useValue:Ot},{provide:Te,useValue:$e}]}}}return Ke.\u0275fac=function(Ot){return new(Ot||Ke)(E.LFG(E.Lbi))},Ke.\u0275mod=E.oAB({type:Ke}),Ke.\u0275inj=E.cJS({providers:[we]}),Ke})();function Xe(Ke,De,Ot,$e,Ie){const[,ke,ot]=globalThis.\u0275AngularfireInstanceCache.find(It=>It[0]===Ke)||[];if(ke)return function Ge(Ke,De){try{return Ke.toString()===De.toString()}catch{return Ke===De}}(Ie,ot)||(ze("error",`${De} was already initialized on the ${Ot} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:Ie,was:ot})),ke;{const It=$e();return globalThis.\u0275AngularfireInstanceCache.push([Ke,It,Ie]),It}}const ct=!!Rt.hot,ze=(Ke,...De)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Ke](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Rt,Ue,F)=>{"use strict";F.d(Ue,{q4:()=>ue,iC:()=>Io,fc:()=>va,HU:()=>aa,vb:()=>oa,JM:()=>ws});var E=F(4650),z=F(5867),G=F(5861),me=F(9681),_e=F(2090),ve=F(4859),be=F(1877),pe=F(8766);const Te="@firebase/installations",se="0.5.13",we=`w:${se}`,it="FIS_v2",De=new _e.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ot(P){return P instanceof _e.ZR&&P.code.includes("request-failed")}function $e({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function Ie(P){return{token:P.token,requestStatus:2,expiresIn:Me(P.expiresIn),creationTime:Date.now()}}function ke(P,O){return ot.apply(this,arguments)}function ot(){return(ot=(0,G.Z)(function*(P,O){const de=(yield O.json()).error;return De.create("request-failed",{requestName:P,serverCode:de.code,serverMessage:de.message,serverStatus:de.status})})).apply(this,arguments)}function It({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function ne(P,{refreshToken:O}){const K=It(P);return K.append("Authorization",function Ve(P){return`${it} ${P}`}(O)),K}function Qe(P){return ce.apply(this,arguments)}function ce(){return(ce=(0,G.Z)(function*(P){const O=yield P();return O.status>=500&&O.status<600?P():O})).apply(this,arguments)}function Me(P){return Number(P.replace("s","000"))}function Oe(P,O){return gt.apply(this,arguments)}function gt(){return(gt=(0,G.Z)(function*({appConfig:P,heartbeatServiceProvider:O},{fid:K}){const de=$e(P),Fe=It(P),tt=O.getImmediate({optional:!0});if(tt){const Fn=yield tt.getHeartbeatsHeader();Fn&&Fe.append("x-firebase-client",Fn)}const Ht={method:"POST",headers:Fe,body:JSON.stringify({fid:K,authVersion:it,appId:P.appId,sdkVersion:we})},Mn=yield Qe(()=>fetch(de,Ht));if(Mn.ok){const Fn=yield Mn.json();return{fid:Fn.fid||K,registrationStatus:2,refreshToken:Fn.refreshToken,authToken:Ie(Fn.authToken)}}throw yield ke("Create Installation",Mn)})).apply(this,arguments)}function mt(P){return new Promise(O=>{setTimeout(O,P)})}const On=/^[cdef][\w-]{21}$/;function Et(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const K=function Rn(P){return function Yt(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return On.test(K)?K:""}catch{return""}}function rn(P){return`${P.appName}!${P.appId}`}const en=new Map;function Mt(P,O){const K=rn(P);Dn(K,O),function Ai(P,O){const K=function Yn(){return!zn&&"BroadcastChannel"in self&&(zn=new BroadcastChannel("[Firebase] FID Change"),zn.onmessage=P=>{Dn(P.data.key,P.data.fid)}),zn}();K&&K.postMessage({key:P,fid:O}),function br(){0===en.size&&zn&&(zn.close(),zn=null)}()}(K,O)}function Dn(P,O){const K=en.get(P);if(K)for(const de of K)de(O)}let zn=null;const xn="firebase-installations-store";let _n=null;function Wn(){return _n||(_n=(0,pe.X3)("firebase-installations-database",1,{upgrade:(P,O)=>{0===O&&P.createObjectStore(xn)}})),_n}function Lt(P,O){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,G.Z)(function*(P,O){const K=rn(P),Fe=(yield Wn()).transaction(xn,"readwrite"),tt=Fe.objectStore(xn),wt=yield tt.get(K);return yield tt.put(O,K),yield Fe.done,(!wt||wt.fid!==O.fid)&&Mt(P,O.fid),O})).apply(this,arguments)}function hi(P){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,G.Z)(function*(P){const O=rn(P),de=(yield Wn()).transaction(xn,"readwrite");yield de.objectStore(xn).delete(O),yield de.done})).apply(this,arguments)}function ri(P,O){return qi.apply(this,arguments)}function qi(){return(qi=(0,G.Z)(function*(P,O){const K=rn(P),Fe=(yield Wn()).transaction(xn,"readwrite"),tt=Fe.objectStore(xn),wt=yield tt.get(K),Ht=O(wt);return void 0===Ht?yield tt.delete(K):yield tt.put(Ht,K),yield Fe.done,Ht&&(!wt||wt.fid!==Ht.fid)&&Mt(P,Ht.fid),Ht})).apply(this,arguments)}function Lr(P){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,G.Z)(function*(P){let O;const K=yield ri(P.appConfig,de=>{const Fe=ir(de),tt=Xt(P,Fe);return O=tt.registrationPromise,tt.installationEntry});return""===K.fid?{installationEntry:yield O}:{installationEntry:K,registrationPromise:O}})).apply(this,arguments)}function ir(P){return un(P||{fid:Et(),registrationStatus:0})}function Xt(P,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(De.create("app-offline"))};const K={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},de=function zt(P,O){return bn.apply(this,arguments)}(P,K);return{installationEntry:K,registrationPromise:de}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:Wt(P)}:{installationEntry:O}}function bn(){return(bn=(0,G.Z)(function*(P,O){try{const K=yield Oe(P,O);return Lt(P.appConfig,K)}catch(K){throw Ot(K)&&409===K.customData.serverCode?yield hi(P.appConfig):yield Lt(P.appConfig,{fid:O.fid,registrationStatus:0}),K}})).apply(this,arguments)}function Wt(P){return lr.apply(this,arguments)}function lr(){return(lr=(0,G.Z)(function*(P){let O=yield zr(P.appConfig);for(;1===O.registrationStatus;)yield mt(100),O=yield zr(P.appConfig);if(0===O.registrationStatus){const{installationEntry:K,registrationPromise:de}=yield Lr(P);return de||K}return O})).apply(this,arguments)}function zr(P){return ri(P,O=>{if(!O)throw De.create("installation-not-found");return un(O)})}function un(P){return function bi(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Ln(P,O){return fi.apply(this,arguments)}function fi(){return(fi=(0,G.Z)(function*({appConfig:P,heartbeatServiceProvider:O},K){const de=Gn(P,K),Fe=ne(P,K),tt=O.getImmediate({optional:!0});if(tt){const Fn=yield tt.getHeartbeatsHeader();Fn&&Fe.append("x-firebase-client",Fn)}const Ht={method:"POST",headers:Fe,body:JSON.stringify({installation:{sdkVersion:we,appId:P.appId}})},Mn=yield Qe(()=>fetch(de,Ht));if(Mn.ok)return Ie(yield Mn.json());throw yield ke("Generate Auth Token",Mn)})).apply(this,arguments)}function Gn(P,{fid:O}){return`${$e(P)}/${O}/authTokens:generate`}function Mr(P){return cr.apply(this,arguments)}function cr(){return(cr=(0,G.Z)(function*(P,O=!1){let K;const de=yield ri(P.appConfig,tt=>{if(!oe(tt))throw De.create("not-registered");const wt=tt.authToken;if(!O&&ye(wt))return tt;if(1===wt.requestStatus)return K=kt(P,O),tt;{if(!navigator.onLine)throw De.create("app-offline");const Ht=nt(tt);return K=ln(P,Ht),Ht}});return K?yield K:de.authToken})).apply(this,arguments)}function kt(P,O){return ut.apply(this,arguments)}function ut(){return(ut=(0,G.Z)(function*(P,O){let K=yield $t(P.appConfig);for(;1===K.authToken.requestStatus;)yield mt(100),K=yield $t(P.appConfig);const de=K.authToken;return 0===de.requestStatus?Mr(P,O):de})).apply(this,arguments)}function $t(P){return ri(P,O=>{if(!oe(O))throw De.create("not-registered");return function je(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function ln(P,O){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,G.Z)(function*(P,O){try{const K=yield Ln(P,O),de=Object.assign(Object.assign({},O),{authToken:K});return yield Lt(P.appConfig,de),K}catch(K){if(!Ot(K)||401!==K.customData.serverCode&&404!==K.customData.serverCode){const de=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield Lt(P.appConfig,de)}else yield hi(P.appConfig);throw K}})).apply(this,arguments)}function oe(P){return void 0!==P&&2===P.registrationStatus}function ye(P){return 2===P.requestStatus&&!function Ce(P){const O=Date.now();return O<P.creationTime||P.creationTime+P.expiresIn<O+36e5}(P)}function nt(P){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:O})}function Gt(){return(Gt=(0,G.Z)(function*(P){const O=P,{installationEntry:K,registrationPromise:de}=yield Lr(O);return de?de.catch(console.error):Mr(O).catch(console.error),K.fid})).apply(this,arguments)}function dr(){return(dr=(0,G.Z)(function*(P,O=!1){const K=P;return yield sr(K),(yield Mr(K,O)).token})).apply(this,arguments)}function sr(P){return nr.apply(this,arguments)}function nr(){return(nr=(0,G.Z)(function*(P){const{registrationPromise:O}=yield Lr(P);O&&(yield O)})).apply(this,arguments)}function Kn(P){return De.create("missing-app-config-values",{valueName:P})}const Ti="installations",rr=P=>{const O=P.getProvider("app").getImmediate(),K=function Tn(P){if(!P||!P.options)throw Kn("App Configuration");if(!P.name)throw Kn("App Name");const O=["projectId","apiKey","appId"];for(const K of O)if(!P.options[K])throw Kn(K);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(O);return{app:O,appConfig:K,heartbeatServiceProvider:(0,me._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},hs=P=>{const O=P.getProvider("app").getImmediate(),K=(0,me._getProvider)(O,Ti).getImmediate();return{getId:()=>function Dt(P){return Gt.apply(this,arguments)}(K),getToken:Fe=>function An(P){return dr.apply(this,arguments)}(K,Fe)}};(function Hs(){(0,me._registerComponent)(new ve.wA(Ti,rr,"PUBLIC")),(0,me._registerComponent)(new ve.wA("installations-internal",hs,"PRIVATE"))})(),(0,me.registerVersion)(Te,se),(0,me.registerVersion)(Te,se,"esm2017");const Ni="@firebase/remote-config",Xr=new _e.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class co{constructor(O,K,de,Fe){this.client=O,this.storage=K,this.storageCache=de,this.logger=Fe}isCachedDataFresh(O,K){if(!K)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const de=Date.now()-K,Fe=de<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${de}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${Fe}.`),Fe}fetch(O){var K=this;return(0,G.Z)(function*(){const[de,Fe]=yield Promise.all([K.storage.getLastSuccessfulFetchTimestampMillis(),K.storage.getLastSuccessfulFetchResponse()]);if(Fe&&K.isCachedDataFresh(O.cacheMaxAgeMillis,de))return Fe;O.eTag=Fe&&Fe.eTag;const tt=yield K.client.fetch(O),wt=[K.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===tt.status&&wt.push(K.storage.setLastSuccessfulFetchResponse(tt)),yield Promise.all(wt),tt})()}}function To(P=navigator){return P.languages&&P.languages[0]||P.language}class gi{constructor(O,K,de,Fe,tt,wt){this.firebaseInstallations=O,this.sdkVersion=K,this.namespace=de,this.projectId=Fe,this.apiKey=tt,this.appId=wt}fetch(O){var K=this;return(0,G.Z)(function*(){var de,Fe,tt;const[wt,Ht]=yield Promise.all([K.firebaseInstallations.getId(),K.firebaseInstallations.getToken()]),Fn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${K.projectId}/namespaces/${K.namespace}:fetch?key=${K.apiKey}`,ur={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},Un={sdk_version:K.sdkVersion,app_instance_id:wt,app_instance_id_token:Ht,app_id:K.appId,language_code:To()},Gi={method:"POST",headers:ur,body:JSON.stringify(Un)},$s=fetch(Fn,Gi),Ga=new Promise((zo,za)=>{O.signal.addEventListener(()=>{const nu=new Error("The operation was aborted.");nu.name="AbortError",za(nu)})});let zi;try{yield Promise.race([$s,Ga]),zi=yield $s}catch(zo){let za="fetch-client-network";throw"AbortError"===(null===(de=zo)||void 0===de?void 0:de.name)&&(za="fetch-timeout"),Xr.create(za,{originalErrorMessage:null===(Fe=zo)||void 0===Fe?void 0:Fe.message})}let Ra=zi.status;const Zr=zi.headers.get("ETag")||void 0;let xa,Pa;if(200===zi.status){let zo;try{zo=yield zi.json()}catch(za){throw Xr.create("fetch-client-parse",{originalErrorMessage:null===(tt=za)||void 0===tt?void 0:tt.message})}xa=zo.entries,Pa=zo.state}if("INSTANCE_STATE_UNSPECIFIED"===Pa?Ra=500:"NO_CHANGE"===Pa?Ra=304:("NO_TEMPLATE"===Pa||"EMPTY_CONFIG"===Pa)&&(xa={}),304!==Ra&&200!==Ra)throw Xr.create("fetch-status",{httpStatus:Ra});return{status:Ra,eTag:Zr,config:xa}})()}}class xe{constructor(O,K){this.client=O,this.storage=K}fetch(O){var K=this;return(0,G.Z)(function*(){const de=(yield K.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return K.attemptFetch(O,de)})()}attemptFetch(O,{throttleEndTimeMillis:K,backoffCount:de}){var Fe=this;return(0,G.Z)(function*(){yield function oi(P,O){return new Promise((K,de)=>{const Fe=Math.max(O-Date.now(),0),tt=setTimeout(K,Fe);P.addEventListener(()=>{clearTimeout(tt),de(Xr.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,K);try{const tt=yield Fe.client.fetch(O);return yield Fe.storage.deleteThrottleMetadata(),tt}catch(tt){if(!function Pe(P){if(!(P instanceof _e.ZR&&P.customData))return!1;const O=Number(P.customData.httpStatus);return 429===O||500===O||503===O||504===O}(tt))throw tt;const wt={throttleEndTimeMillis:Date.now()+(0,_e.$s)(de),backoffCount:de+1};return yield Fe.storage.setThrottleMetadata(wt),Fe.attemptFetch(O,wt)}})()}}class bt{constructor(O,K,de,Fe,tt){this.app=O,this._client=K,this._storageCache=de,this._storage=Fe,this._logger=tt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vt(P,O){var K;const de=P.target.error||void 0;return Xr.create(O,{originalErrorMessage:de&&(null===(K=de)||void 0===K?void 0:K.message)})}const En="app_namespace_store";class Vi{constructor(O,K,de,Fe=function Bi(){return new Promise((P,O)=>{var K;try{const de=indexedDB.open("firebase_remote_config",1);de.onerror=Fe=>{O(Vt(Fe,"storage-open"))},de.onsuccess=Fe=>{P(Fe.target.result)},de.onupgradeneeded=Fe=>{0===Fe.oldVersion&&Fe.target.result.createObjectStore(En,{keyPath:"compositeKey"})}}catch(de){O(Xr.create("storage-open",{originalErrorMessage:null===(K=de)||void 0===K?void 0:K.message}))}})}()){this.appId=O,this.appName=K,this.namespace=de,this.openDbPromise=Fe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var K=this;return(0,G.Z)(function*(){const de=yield K.openDbPromise;return new Promise((Fe,tt)=>{var wt;const Mn=de.transaction([En],"readonly").objectStore(En),Fn=K.createCompositeKey(O);try{const ur=Mn.get(Fn);ur.onerror=Un=>{tt(Vt(Un,"storage-get"))},ur.onsuccess=Un=>{const Gi=Un.target.result;Fe(Gi?Gi.value:void 0)}}catch(ur){tt(Xr.create("storage-get",{originalErrorMessage:null===(wt=ur)||void 0===wt?void 0:wt.message}))}})})()}set(O,K){var de=this;return(0,G.Z)(function*(){const Fe=yield de.openDbPromise;return new Promise((tt,wt)=>{var Ht;const Fn=Fe.transaction([En],"readwrite").objectStore(En),ur=de.createCompositeKey(O);try{const Un=Fn.put({compositeKey:ur,value:K});Un.onerror=Gi=>{wt(Vt(Gi,"storage-set"))},Un.onsuccess=()=>{tt()}}catch(Un){wt(Xr.create("storage-set",{originalErrorMessage:null===(Ht=Un)||void 0===Ht?void 0:Ht.message}))}})})()}delete(O){var K=this;return(0,G.Z)(function*(){const de=yield K.openDbPromise;return new Promise((Fe,tt)=>{var wt;const Mn=de.transaction([En],"readwrite").objectStore(En),Fn=K.createCompositeKey(O);try{const ur=Mn.delete(Fn);ur.onerror=Un=>{tt(Vt(Un,"storage-delete"))},ur.onsuccess=()=>{Fe()}}catch(ur){tt(Xr.create("storage-delete",{originalErrorMessage:null===(wt=ur)||void 0===wt?void 0:wt.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Us{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,G.Z)(function*(){const K=O.storage.getLastFetchStatus(),de=O.storage.getLastSuccessfulFetchTimestampMillis(),Fe=O.storage.getActiveConfig(),tt=yield K;tt&&(O.lastFetchStatus=tt);const wt=yield de;wt&&(O.lastSuccessfulFetchTimestampMillis=wt);const Ht=yield Fe;Ht&&(O.activeConfig=Ht)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function Cs(){return So.apply(this,arguments)}function So(){return(So=(0,G.Z)(function*(){if(!(0,_e.hl)())return!1;try{return yield(0,_e.eu)()}catch{return!1}})).apply(this,arguments)}!function Qi(){(0,me._registerComponent)(new ve.wA("remote-config",function P(O,{instanceIdentifier:K}){const de=O.getProvider("app").getImmediate(),Fe=O.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Xr.create("registration-window");if(!(0,_e.hl)())throw Xr.create("indexed-db-unavailable");const{projectId:tt,apiKey:wt,appId:Ht}=de.options;if(!tt)throw Xr.create("registration-project-id");if(!wt)throw Xr.create("registration-api-key");if(!Ht)throw Xr.create("registration-app-id");const Mn=new Vi(Ht,de.name,K=K||"firebase"),Fn=new Us(Mn),ur=new be.Yd(Ni);ur.logLevel=be.in.ERROR;const Un=new gi(Fe,me.SDK_VERSION,K,tt,wt,Ht),Gi=new xe(Un,Mn),$s=new co(Gi,Mn,Fn,ur),Ga=new bt(de,$s,Fn,Mn,ur);return function yr(P){const O=(0,_e.m9)(P);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(Ga),Ga},"PUBLIC").setMultipleInstances(!0)),(0,me.registerVersion)(Ni,"0.3.12"),(0,me.registerVersion)(Ni,"0.3.12","esm2017")}();const $i="/firebase-messaging-sw.js",Ji="/firebase-cloud-messaging-push-scope",ps="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zs="google.c.a.c_id",Ho="google.c.a.c_l",Bs="google.c.a.ts",ho="google.c.a.e";var es=(()=>{return(P=es||(es={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",es;var P})();function ts(P){const O=new Uint8Array(P);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oi(P){const K=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),de=atob(K),Fe=new Uint8Array(de.length);for(let tt=0;tt<de.length;++tt)Fe[tt]=de.charCodeAt(tt);return Fe}const gs="fcm_token_details_db",Ci="fcm_token_object_Store";function fo(P){return ms.apply(this,arguments)}function ms(){return ms=(0,G.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(tt=>tt.name).includes(gs))return null;let O=null;return(yield(0,pe.X3)(gs,5,{upgrade:(de=(0,G.Z)(function*(Fe,tt,wt,Ht){var Mn;if(tt<2||!Fe.objectStoreNames.contains(Ci))return;const Fn=Ht.objectStore(Ci),ur=yield Fn.index("fcmSenderId").get(P);if(yield Fn.clear(),ur)if(2===tt){const Un=ur;if(!Un.auth||!Un.p256dh||!Un.endpoint)return;O={token:Un.fcmToken,createTime:null!==(Mn=Un.createTime)&&void 0!==Mn?Mn:Date.now(),subscriptionOptions:{auth:Un.auth,p256dh:Un.p256dh,endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:"string"==typeof Un.vapidKey?Un.vapidKey:ts(Un.vapidKey)}}}else if(3===tt){const Un=ur;O={token:Un.fcmToken,createTime:Un.createTime,subscriptionOptions:{auth:ts(Un.auth),p256dh:ts(Un.p256dh),endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:ts(Un.vapidKey)}}}else if(4===tt){const Un=ur;O={token:Un.fcmToken,createTime:Un.createTime,subscriptionOptions:{auth:ts(Un.auth),p256dh:ts(Un.p256dh),endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:ts(Un.vapidKey)}}}}),function(tt,wt,Ht,Mn){return de.apply(this,arguments)})})).close(),yield(0,pe.Lj)(gs),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),Fr(O)?O:null;var de}),ms.apply(this,arguments)}function Fr(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:O}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const Xn="firebase-messaging-store";let ei=null;function Ks(){return ei||(ei=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(P,O)=>{0===O&&P.createObjectStore(Xn)}})),ei}function ns(P){return mi.apply(this,arguments)}function mi(){return(mi=(0,G.Z)(function*(P){const O=rs(P),de=yield(yield Ks()).transaction(Xn).objectStore(Xn).get(O);if(de)return de;{const Fe=yield fo(P.appConfig.senderId);if(Fe)return yield or(P,Fe),Fe}})).apply(this,arguments)}function or(P,O){return Co.apply(this,arguments)}function Co(){return(Co=(0,G.Z)(function*(P,O){const K=rs(P),Fe=(yield Ks()).transaction(Xn,"readwrite");return yield Fe.objectStore(Xn).put(O,K),yield Fe.done,O})).apply(this,arguments)}function ls(P){return ki.apply(this,arguments)}function ki(){return(ki=(0,G.Z)(function*(P){const O=rs(P),de=(yield Ks()).transaction(Xn,"readwrite");yield de.objectStore(Xn).delete(O),yield de.done})).apply(this,arguments)}function rs({appConfig:P}){return P.appId}const Dr=new _e.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cn(P,O){return ys.apply(this,arguments)}function ys(){return(ys=(0,G.Z)(function*(P,O){var K;const de=yield po(P),Fe=ht(O),tt={method:"POST",headers:de,body:JSON.stringify(Fe)};let wt;try{wt=yield(yield fetch(Li(P.appConfig),tt)).json()}catch(Ht){throw Dr.create("token-subscribe-failed",{errorInfo:null===(K=Ht)||void 0===K?void 0:K.toString()})}if(wt.error)throw Dr.create("token-subscribe-failed",{errorInfo:wt.error.message});if(!wt.token)throw Dr.create("token-subscribe-no-token");return wt.token})).apply(this,arguments)}function Ao(P,O){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,G.Z)(function*(P,O){var K;const de=yield po(P),Fe=ht(O.subscriptionOptions),tt={method:"PATCH",headers:de,body:JSON.stringify(Fe)};let wt;try{wt=yield(yield fetch(`${Li(P.appConfig)}/${O.token}`,tt)).json()}catch(Ht){throw Dr.create("token-update-failed",{errorInfo:null===(K=Ht)||void 0===K?void 0:K.toString()})}if(wt.error)throw Dr.create("token-update-failed",{errorInfo:wt.error.message});if(!wt.token)throw Dr.create("token-update-no-token");return wt.token})).apply(this,arguments)}function qs(P,O){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,G.Z)(function*(P,O){var K;const Fe={method:"DELETE",headers:yield po(P)};try{const wt=yield(yield fetch(`${Li(P.appConfig)}/${O}`,Fe)).json();if(wt.error)throw Dr.create("token-unsubscribe-failed",{errorInfo:wt.error.message})}catch(tt){throw Dr.create("token-unsubscribe-failed",{errorInfo:null===(K=tt)||void 0===K?void 0:K.toString()})}})).apply(this,arguments)}function Li({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function po(P){return go.apply(this,arguments)}function go(){return(go=(0,G.Z)(function*({appConfig:P,installations:O}){const K=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${K}`})})).apply(this,arguments)}function ht({p256dh:P,auth:O,endpoint:K,vapidKey:de}){const Fe={web:{endpoint:K,auth:O,p256dh:P}};return de!==ps&&(Fe.web.applicationPubKey=de),Fe}const Hn=6048e5;function mo(P){return yo.apply(this,arguments)}function yo(){return(yo=(0,G.Z)(function*(P){const O=yield yt(P.swRegistration,P.vapidKey),K={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:O.endpoint,auth:ts(O.getKey("auth")),p256dh:ts(O.getKey("p256dh"))},de=yield ns(P.firebaseDependencies);if(de){if(Bt(de.subscriptionOptions,K))return Date.now()>=de.createTime+Hn?X(P,{token:de.token,createTime:Date.now(),subscriptionOptions:K}):de.token;try{yield qs(P.firebaseDependencies,de.token)}catch(Fe){console.warn(Fe)}return Ne(P.firebaseDependencies,K)}return Ne(P.firebaseDependencies,K)})).apply(this,arguments)}function B(P){return k.apply(this,arguments)}function k(){return(k=(0,G.Z)(function*(P){const O=yield ns(P.firebaseDependencies);O&&(yield qs(P.firebaseDependencies,O.token),yield ls(P.firebaseDependencies));const K=yield P.swRegistration.pushManager.getSubscription();return!K||K.unsubscribe()})).apply(this,arguments)}function X(P,O){return fe.apply(this,arguments)}function fe(){return(fe=(0,G.Z)(function*(P,O){try{const K=yield Ao(P.firebaseDependencies,O),de=Object.assign(Object.assign({},O),{token:K,createTime:Date.now()});return yield or(P.firebaseDependencies,de),K}catch(K){throw yield B(P),K}})).apply(this,arguments)}function Ne(P,O){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,G.Z)(function*(P,O){const de={token:yield cn(P,O),createTime:Date.now(),subscriptionOptions:O};return yield or(P,de),de.token})).apply(this,arguments)}function yt(P,O){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,G.Z)(function*(P,O){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oi(O)})})).apply(this,arguments)}function Bt(P,O){return O.vapidKey===P.vapidKey&&O.endpoint===P.endpoint&&O.auth===P.auth&&O.p256dh===P.p256dh}function Bn(P){const O={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function hn(P,O){if(!O.notification)return;P.notification={};const K=O.notification.title;K&&(P.notification.title=K);const de=O.notification.body;de&&(P.notification.body=de);const Fe=O.notification.image;Fe&&(P.notification.image=Fe)}(O,P),function ar(P,O){!O.data||(P.data=O.data)}(O,P),function Ur(P,O){var K,de,Fe,tt,wt;if(!(O.fcmOptions||null!==(K=O.notification)&&void 0!==K&&K.click_action))return;P.fcmOptions={};const Ht=null!==(Fe=null===(de=O.fcmOptions)||void 0===de?void 0:de.link)&&void 0!==Fe?Fe:null===(tt=O.notification)||void 0===tt?void 0:tt.click_action;Ht&&(P.fcmOptions.link=Ht);const Mn=null===(wt=O.fcmOptions)||void 0===wt?void 0:wt.analytics_label;Mn&&(P.fcmOptions.analyticsLabel=Mn)}(O,P),O}function Vn(P){return"object"==typeof P&&!!P&&zs in P}function Ar(P,O){const K=[];for(let de=0;de<P.length;de++)K.push(P.charAt(de)),de<O.length&&K.push(O.charAt(de));return K.join("")}function Br(P){return Dr.create("missing-app-config-values",{valueName:P})}Ar("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ar("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Rs{constructor(O,K,de){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Fe=function _s(P){if(!P||!P.options)throw Br("App Configuration Object");if(!P.name)throw Br("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:K}=P;for(const de of O)if(!K[de])throw Br(de);return{appName:P.name,projectId:K.projectId,apiKey:K.apiKey,appId:K.appId,senderId:K.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:Fe,installations:K,analyticsProvider:de}}_delete(){return Promise.resolve()}}function ji(P){return ui.apply(this,arguments)}function ui(){return(ui=(0,G.Z)(function*(P){var O;try{P.swRegistration=yield navigator.serviceWorker.register($i,{scope:Ji}),P.swRegistration.update().catch(()=>{})}catch(K){throw Dr.create("failed-service-worker-registration",{browserErrorMessage:null===(O=K)||void 0===O?void 0:O.message})}})).apply(this,arguments)}function Wr(P,O){return vs.apply(this,arguments)}function vs(){return(vs=(0,G.Z)(function*(P,O){if(!O&&!P.swRegistration&&(yield ji(P)),O||!P.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw Dr.create("invalid-sw-registration");P.swRegistration=O}})).apply(this,arguments)}function cs(P,O){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,G.Z)(function*(P,O){O?P.vapidKey=O:P.vapidKey||(P.vapidKey=ps)})).apply(this,arguments)}function ro(){return(ro=(0,G.Z)(function*(P,O){if(!navigator)throw Dr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dr.create("permission-blocked");return yield cs(P,O?.vapidKey),yield Wr(P,O?.serviceWorkerRegistration),mo(P)})).apply(this,arguments)}function Jo(P,O,K){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,G.Z)(function*(P,O,K){const de=_o(O);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(de,{message_id:K[zs],message_name:K[Ho],message_time:K[Bs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function _o(P){switch(P){case es.NOTIFICATION_CLICKED:return"notification_open";case es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $(){return($=(0,G.Z)(function*(P,O){const K=O.data;if(!K.isFirebaseMessaging)return;P.onMessageHandler&&K.messageType===es.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Bn(K)):P.onMessageHandler.next(Bn(K)));const de=K.data;Vn(de)&&"1"===de[ho]&&(yield Jo(P,K.messageType,de))})).apply(this,arguments)}const x="@firebase/messaging",W="0.9.17",S=P=>{const O=new Rs(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",K=>function A(P,O){return $.apply(this,arguments)}(O,K)),O},p=P=>{const O=P.getProvider("messaging").getImmediate();return{getToken:de=>function Vs(P,O){return ro.apply(this,arguments)}(O,de)}};function M(){return j.apply(this,arguments)}function j(){return(j=(0,G.Z)(function*(){try{yield(0,_e.eu)()}catch{return!1}return typeof window<"u"&&(0,_e.hl)()&&(0,_e.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function m(){(0,me._registerComponent)(new ve.wA("messaging",S,"PUBLIC")),(0,me._registerComponent)(new ve.wA("messaging-internal",p,"PRIVATE")),(0,me.registerVersion)(x,W),(0,me.registerVersion)(x,W,"esm2017")}();const Nn="analytics",gn="firebase_id",$n="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wi="https://www.googletagmanager.com/gtag/js",hr=new be.Yd("@firebase/analytics");function Kr(P){return Promise.all(P.map(O=>O.catch(K=>K)))}function Go(P,O){const K=document.createElement("script");K.src=`${wi}?l=${P}&id=${O}`,K.async=!0,document.head.appendChild(K)}function ss(P,O,K,de,Fe,tt){return Es.apply(this,arguments)}function Es(){return(Es=(0,G.Z)(function*(P,O,K,de,Fe,tt){const wt=de[Fe];try{if(wt)yield O[wt];else{const Mn=(yield Kr(K)).find(Fn=>Fn.measurementId===Fe);Mn&&(yield O[Mn.appId])}}catch(Ht){hr.error(Ht)}P("config",Fe,tt)})).apply(this,arguments)}function ea(P,O,K,de,Fe){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,G.Z)(function*(P,O,K,de,Fe){try{let tt=[];if(Fe&&Fe.send_to){let wt=Fe.send_to;Array.isArray(wt)||(wt=[wt]);const Ht=yield Kr(K);for(const Mn of wt){const Fn=Ht.find(Un=>Un.measurementId===Mn),ur=Fn&&O[Fn.appId];if(!ur){tt=[];break}tt.push(ur)}}0===tt.length&&(tt=Object.values(O)),yield Promise.all(tt),P("event",de,Fe||{})}catch(tt){hr.error(tt)}})).apply(this,arguments)}function na(){const P=window.document.getElementsByTagName("script");for(const O of Object.values(P))if(O.src&&O.src.includes(wi))return O;return null}const vr=new _e.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),er=new class dn{constructor(O={},K=1e3){this.throttleMetadata=O,this.intervalMillis=K}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,K){this.throttleMetadata[O]=K}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function pt(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function wr(P){return ti.apply(this,arguments)}function ti(){return(ti=(0,G.Z)(function*(P){var O;const{appId:K,apiKey:de}=P,Fe={method:"GET",headers:pt(de)},tt=$n.replace("{app-id}",K),wt=yield fetch(tt,Fe);if(200!==wt.status&&304!==wt.status){let Ht="";try{const Mn=yield wt.json();null!==(O=Mn.error)&&void 0!==O&&O.message&&(Ht=Mn.error.message)}catch{}throw vr.create("config-fetch-failed",{httpStatus:wt.status,responseMessage:Ht})}return wt.json()})).apply(this,arguments)}function Vr(P){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,G.Z)(function*(P,O=er,K){const{appId:de,apiKey:Fe,measurementId:tt}=P.options;if(!de)throw vr.create("no-app-id");if(!Fe){if(tt)return{measurementId:tt,appId:de};throw vr.create("no-api-key")}const wt=O.getThrottleMetadata(de)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ht=new dt;return setTimeout((0,G.Z)(function*(){Ht.abort()}),void 0!==K?K:6e4),wn({appId:de,apiKey:Fe,measurementId:tt},wt,Ht,O)})).apply(this,arguments)}function wn(P,O,K){return ra.apply(this,arguments)}function ra(){return(ra=(0,G.Z)(function*(P,{throttleEndTimeMillis:O,backoffCount:K},de,Fe=er){var tt,wt;const{appId:Ht,measurementId:Mn}=P;try{yield Ct(de,O)}catch(Fn){if(Mn)return hr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Mn} provided in the "measurementId" field in the local Firebase config. [${null===(tt=Fn)||void 0===tt?void 0:tt.message}]`),{appId:Ht,measurementId:Mn};throw Fn}try{const Fn=yield wr(P);return Fe.deleteThrottleMetadata(Ht),Fn}catch(Fn){const ur=Fn;if(!Ye(ur)){if(Fe.deleteThrottleMetadata(Ht),Mn)return hr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Mn} provided in the "measurementId" field in the local Firebase config. [${ur?.message}]`),{appId:Ht,measurementId:Mn};throw Fn}const Un=503===Number(null===(wt=ur?.customData)||void 0===wt?void 0:wt.httpStatus)?(0,_e.$s)(K,Fe.intervalMillis,30):(0,_e.$s)(K,Fe.intervalMillis),Gi={throttleEndTimeMillis:Date.now()+Un,backoffCount:K+1};return Fe.setThrottleMetadata(Ht,Gi),hr.debug(`Calling attemptFetch again in ${Un} millis`),wn(P,Gi,de,Fe)}})).apply(this,arguments)}function Ct(P,O){return new Promise((K,de)=>{const Fe=Math.max(O-Date.now(),0),tt=setTimeout(K,Fe);P.addEventListener(()=>{clearTimeout(tt),de(vr.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function Ye(P){if(!(P instanceof _e.ZR&&P.customData))return!1;const O=Number(P.customData.httpStatus);return 429===O||500===O||503===O||504===O}class dt{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}let Hr,ya;function ma(){return(ma=(0,G.Z)(function*(P,O,K,de,Fe){if(Fe&&Fe.global)P("event",K,de);else{const tt=yield O;P("event",K,Object.assign(Object.assign({},de),{send_to:tt}))}})).apply(this,arguments)}function kn(P){ya=P}function Ta(P){Hr=P}function Ku(){return ni.apply(this,arguments)}function ni(){return(ni=(0,G.Z)(function*(){var P;if(!(0,_e.hl)())return hr.warn(vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,_e.eu)()}catch(O){return hr.warn(vr.create("indexeddb-unavailable",{errorInfo:null===(P=O)||void 0===P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function sa(){return(sa=(0,G.Z)(function*(P,O,K,de,Fe,tt,wt){var Ht;const Mn=Vr(P);Mn.then($s=>{K[$s.measurementId]=$s.appId,P.options.measurementId&&$s.measurementId!==P.options.measurementId&&hr.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${$s.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($s=>hr.error($s)),O.push(Mn);const Fn=Ku().then($s=>{if($s)return de.getId()}),[ur,Un]=yield Promise.all([Mn,Fn]);na()||Go(tt,ur.measurementId),ya&&(Fe("consent","default",ya),kn(void 0)),Fe("js",new Date);const Gi=null!==(Ht=wt?.config)&&void 0!==Ht?Ht:{};return Gi.origin="firebase",Gi.update=!0,null!=Un&&(Gi[gn]=Un),Fe("config",ur.measurementId,Gi),Hr&&(Fe("set",Hr),Ta(void 0)),ur.measurementId})).apply(this,arguments)}class fr{constructor(O){this.app=O}_delete(){return delete so[this.app.options.appId],Promise.resolve()}}let so={},$r=[];const Pt={};let Ys,Eo,Po="dataLayer",No=!1;function qu(P,O,K){!function eu(){const P=[];if((0,_e.ru)()&&P.push("This is a browser extension environment."),(0,_e.zI)()||P.push("Cookies are not available."),P.length>0){const O=P.map((de,Fe)=>`(${Fe+1}) ${de}`).join(" "),K=vr.create("invalid-analytics-context",{errorInfo:O});hr.warn(K.message)}}();const de=P.options.appId;if(!de)throw vr.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw vr.create("no-api-key");hr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=so[de])throw vr.create("already-exists",{id:de});if(!No){!function Ro(P){let O=[];Array.isArray(window[P])?O=window[P]:window[P]=O}(Po);const{wrappedGtag:tt,gtagCore:wt}=function io(P,O,K,de,Fe){let tt=function(...wt){window[de].push(arguments)};return window[Fe]&&"function"==typeof window[Fe]&&(tt=window[Fe]),window[Fe]=function ta(P,O,K,de){function tt(){return(tt=(0,G.Z)(function*(wt,Ht,Mn){try{"event"===wt?yield ea(P,O,K,Ht,Mn):"config"===wt?yield ss(P,O,K,de,Ht,Mn):"consent"===wt?P("consent","update",Mn):P("set",Ht)}catch(Fn){hr.error(Fn)}})).apply(this,arguments)}return function Fe(wt,Ht,Mn){return tt.apply(this,arguments)}}(tt,P,O,K),{gtagCore:tt,wrappedGtag:window[Fe]}}(so,$r,Pt,Po,"gtag");Eo=tt,Ys=wt,No=!0}return so[de]=function Sn(P,O,K,de,Fe,tt,wt){return sa.apply(this,arguments)}(P,$r,Pt,O,Ys,Po,K),new fr(P)}function vl(){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,G.Z)(function*(){if((0,_e.ru)()||!(0,_e.zI)()||!(0,_e.hl)())return!1;try{return yield(0,_e.eu)()}catch{return!1}})).apply(this,arguments)}const ja="@firebase/analytics";!function uo(){(0,me._registerComponent)(new ve.wA(Nn,(O,{options:K})=>qu(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),K),"PUBLIC")),(0,me._registerComponent)(new ve.wA("analytics-internal",function P(O){try{const K=O.getProvider(Nn).getImmediate();return{logEvent:(de,Fe,tt)=>function ao(P,O,K,de){P=(0,_e.m9)(P),function ba(P,O,K,de,Fe){return ma.apply(this,arguments)}(Eo,so[P.app.options.appId],O,K,de).catch(Fe=>hr.error(Fe))}(K,de,Fe,tt)}}catch(K){throw vr.create("interop-component-reg-failed",{reason:K})}},"PRIVATE")),(0,me.registerVersion)(ja,"0.8.1"),(0,me.registerVersion)(ja,"0.8.1","esm2017")}();var ds=F(4408),_a=F(7565);const D=new class I extends _a.v{}(class Su extends ds.o{constructor(O,K){super(O,K),this.scheduler=O,this.work=K}schedule(O,K=0){return K>0?super.schedule(O,K):(this.delay=K,this.state=O,this.scheduler.flush(this),this)}execute(O,K){return K>0||this.closed?super.execute(O,K):this._execute(O,K)}requestAsyncId(O,K,de=0){return null!=de&&de>0||null==de&&this.delay>0?super.requestAsyncId(O,K,de):(O.flush(this),0)}});var C=F(4986),N=F(8505),q=F(5363),te=F(9468);const ue=new E.GfV("7.4.1"),Be="__angularfire_symbol__analyticsIsSupportedValue",lt="__angularfire_symbol__analyticsIsSupported",sn="__angularfire_symbol__remoteConfigIsSupportedValue",Ft="__angularfire_symbol__remoteConfigIsSupported",mn="__angularfire_symbol__messagingIsSupportedValue",xr="__angularfire_symbol__messagingIsSupported";function ws(P,O,K){if(O){if(1===O.length)return O[0];const tt=O.filter(wt=>wt.app===K);if(1===tt.length)return tt[0]}return K.container.getProvider(P).getImmediate({optional:!0})}globalThis[lt]||(globalThis[lt]=vl().then(P=>globalThis[Be]=P).catch(()=>globalThis[Be]=!1)),globalThis[xr]||(globalThis[xr]=M().then(P=>globalThis[mn]=P).catch(()=>globalThis[mn]=!1)),globalThis[Ft]||(globalThis[Ft]=Cs().then(P=>globalThis[sn]=P).catch(()=>globalThis[sn]=!1));const oa=(P,O)=>{const K=O?[O]:(0,z.C6)(),de=[];return K.forEach(Fe=>{Fe.container.getProvider(P).instances.forEach(wt=>{de.includes(wt)||de.push(wt)})}),de};function xs(){}class Qs{constructor(O,K=D){this.zone=O,this.delegate=K}now(){return this.delegate.now()}schedule(O,K,de){const Fe=this.zone;return this.delegate.schedule(function(wt){Fe.runGuarded(()=>{O.apply(this,[wt])})},K,de)}}class El{constructor(O){this.zone=O,this.task=null}call(O,K){const de=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xs,{},xs,xs)),K.pipe((0,N.b)({next:de,complete:de,error:de})).subscribe(O).add(de)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let aa=(()=>{class P{constructor(K){this.ngZone=K,this.outsideAngular=K.runOutsideAngular(()=>new Qs(Zone.current)),this.insideAngular=K.run(()=>new Qs(Zone.current,C.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(K){return new(K||P)(E.LFG(E.R0b))},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function Lo(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function va(P){return P.pipe((0,q.Q)(Lo().outsideAngular))}function Io(P){return Lo(),function ua(P){return function(K){return(K=K.lift(new El(P.ngZone))).pipe((0,te.R)(P.outsideAngular),(0,q.Q)(P.insideAngular))}}(Lo())(P)}},2090:(Rt,Ue,F)=>{"use strict";F.d(Ue,{$s:()=>ut,BH:()=>On,G6:()=>ke,L:()=>pe,LL:()=>rn,Pz:()=>Yt,Sg:()=>pn,UG:()=>Ge,US:()=>ve,ZB:()=>le,ZR:()=>Rn,aH:()=>mt,b$:()=>Ke,eu:()=>It,hl:()=>ot,jU:()=>ct,m9:()=>Jt,ne:()=>Lr,pd:()=>ri,r3:()=>mr,ru:()=>ze,tV:()=>Te,uI:()=>Xe,vZ:()=>Wn,w1:()=>Ot,xO:()=>hi,xb:()=>xn,z$:()=>it,zI:()=>ne,zd:()=>Tr});const me=function(oe){const ye=[];let Ce=0;for(let nt=0;nt<oe.length;nt++){let je=oe.charCodeAt(nt);je<128?ye[Ce++]=je:je<2048?(ye[Ce++]=je>>6|192,ye[Ce++]=63&je|128):55296==(64512&je)&&nt+1<oe.length&&56320==(64512&oe.charCodeAt(nt+1))?(je=65536+((1023&je)<<10)+(1023&oe.charCodeAt(++nt)),ye[Ce++]=je>>18|240,ye[Ce++]=je>>12&63|128,ye[Ce++]=je>>6&63|128,ye[Ce++]=63&je|128):(ye[Ce++]=je>>12|224,ye[Ce++]=je>>6&63|128,ye[Ce++]=63&je|128)}return ye},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(oe,ye){if(!Array.isArray(oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ce=ye?this.byteToCharMapWebSafe_:this.byteToCharMap_,nt=[];for(let je=0;je<oe.length;je+=3){const Dt=oe[je],Gt=je+1<oe.length,An=Gt?oe[je+1]:0,dr=je+2<oe.length,sr=dr?oe[je+2]:0;let ae=(15&An)<<2|sr>>6,ee=63&sr;dr||(ee=64,Gt||(ae=64)),nt.push(Ce[Dt>>2],Ce[(3&Dt)<<4|An>>4],Ce[ae],Ce[ee])}return nt.join("")},encodeString(oe,ye){return this.HAS_NATIVE_SUPPORT&&!ye?btoa(oe):this.encodeByteArray(me(oe),ye)},decodeString(oe,ye){return this.HAS_NATIVE_SUPPORT&&!ye?atob(oe):function(oe){const ye=[];let Ce=0,nt=0;for(;Ce<oe.length;){const je=oe[Ce++];if(je<128)ye[nt++]=String.fromCharCode(je);else if(je>191&&je<224){const Dt=oe[Ce++];ye[nt++]=String.fromCharCode((31&je)<<6|63&Dt)}else if(je>239&&je<365){const dr=((7&je)<<18|(63&oe[Ce++])<<12|(63&oe[Ce++])<<6|63&oe[Ce++])-65536;ye[nt++]=String.fromCharCode(55296+(dr>>10)),ye[nt++]=String.fromCharCode(56320+(1023&dr))}else{const Dt=oe[Ce++],Gt=oe[Ce++];ye[nt++]=String.fromCharCode((15&je)<<12|(63&Dt)<<6|63&Gt)}}return ye.join("")}(this.decodeStringToByteArray(oe,ye))},decodeStringToByteArray(oe,ye){this.init_();const Ce=ye?this.charToByteMapWebSafe_:this.charToByteMap_,nt=[];for(let je=0;je<oe.length;){const Dt=Ce[oe.charAt(je++)],An=je<oe.length?Ce[oe.charAt(je)]:0;++je;const sr=je<oe.length?Ce[oe.charAt(je)]:64;++je;const ie=je<oe.length?Ce[oe.charAt(je)]:64;if(++je,null==Dt||null==An||null==sr||null==ie)throw Error();nt.push(Dt<<2|An>>4),64!==sr&&(nt.push(An<<4&240|sr>>2),64!==ie&&nt.push(sr<<6&192|ie))}return nt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let oe=0;oe<this.ENCODED_VALS.length;oe++)this.byteToCharMap_[oe]=this.ENCODED_VALS.charAt(oe),this.charToByteMap_[this.byteToCharMap_[oe]]=oe,this.byteToCharMapWebSafe_[oe]=this.ENCODED_VALS_WEBSAFE.charAt(oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[oe]]=oe,oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(oe)]=oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(oe)]=oe)}}},pe=function(oe){return function(oe){const ye=me(oe);return ve.encodeByteArray(ye,!0)}(oe).replace(/\./g,"")},Te=function(oe){try{return ve.decodeString(oe,!0)}catch(ye){console.error("base64Decode failed: ",ye)}return null};function le(oe,ye){if(!(ye instanceof Object))return ye;switch(ye.constructor){case Date:return new Date(ye.getTime());case Object:void 0===oe&&(oe={});break;case Array:oe=[];break;default:return ye}for(const Ce in ye)!ye.hasOwnProperty(Ce)||!we(Ce)||(oe[Ce]=le(oe[Ce],ye[Ce]));return oe}function we(oe){return"__proto__"!==oe}function it(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function Ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ct(){return"object"==typeof self&&self.self===self}function ze(){const oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof oe&&void 0!==oe.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ot(){const oe=it();return oe.indexOf("MSIE ")>=0||oe.indexOf("Trident/")>=0}function ke(){return!Ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ot(){return"object"==typeof indexedDB}function It(){return new Promise((oe,ye)=>{try{let Ce=!0;const nt="validate-browser-context-for-indexeddb-analytics-module",je=self.indexedDB.open(nt);je.onsuccess=()=>{je.result.close(),Ce||self.indexedDB.deleteDatabase(nt),oe(!0)},je.onupgradeneeded=()=>{Ce=!1},je.onerror=()=>{var Dt;ye((null===(Dt=je.error)||void 0===Dt?void 0:Dt.message)||"")}}catch(Ce){ye(Ce)}})}function ne(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Oe=()=>function Qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u")return;const oe=process.env.__FIREBASE_DEFAULTS__,ye=process.env.__FIREBASE_DEFAULTS_PATH__;if(oe)return ye&&console.warn("Values were provided for both __FIREBASE_DEFAULTS__ and __FIREBASE_DEFAULTS_PATH__. __FIREBASE_DEFAULTS_PATH__ will be ignored."),JSON.parse(oe);if(ye)try{return F(9163)(ye)}catch{console.warn(`Unable to read defaults from file provided to __FIREBASE_DEFAULTS_PATH__: ${ye}`)}})()||(()=>{if(typeof document>"u")return;const oe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),ye=oe&&Te(oe[1]);return ye&&JSON.parse(ye)})(),mt=()=>{var oe;return null===(oe=Oe())||void 0===oe?void 0:oe.config},Yt=oe=>{var ye;return null===(ye=Oe())||void 0===ye?void 0:ye[`_${oe}`]};class On{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ye,Ce)=>{this.resolve=ye,this.reject=Ce})}wrapCallback(ye){return(Ce,nt)=>{Ce?this.reject(Ce):this.resolve(nt),"function"==typeof ye&&(this.promise.catch(()=>{}),1===ye.length?ye(Ce):ye(Ce,nt))}}}function pn(oe,ye){if(oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const nt=ye||"demo-project",je=oe.iat||0,Dt=oe.sub||oe.user_id;if(!Dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Gt=Object.assign({iss:`https://securetoken.google.com/${nt}`,aud:nt,iat:je,exp:je+3600,auth_time:je,sub:Dt,user_id:Dt,firebase:{sign_in_provider:"custom",identities:{}}},oe);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Gt)),""].join(".")}class Rn extends Error{constructor(ye,Ce,nt){super(Ce),this.code=ye,this.customData=nt,this.name="FirebaseError",Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}}class rn{constructor(ye,Ce,nt){this.service=ye,this.serviceName=Ce,this.errors=nt}create(ye,...Ce){const nt=Ce[0]||{},je=`${this.service}/${ye}`,Dt=this.errors[ye],Gt=Dt?function en(oe,ye){return oe.replace(Mt,(Ce,nt)=>{const je=ye[nt];return null!=je?String(je):`<${nt}?>`})}(Dt,nt):"Error";return new Rn(je,`${this.serviceName}: ${Gt} (${je}).`,nt)}}const Mt=/\{\$([^}]+)}/g;function mr(oe,ye){return Object.prototype.hasOwnProperty.call(oe,ye)}function xn(oe){for(const ye in oe)if(Object.prototype.hasOwnProperty.call(oe,ye))return!1;return!0}function Wn(oe,ye){if(oe===ye)return!0;const Ce=Object.keys(oe),nt=Object.keys(ye);for(const je of Ce){if(!nt.includes(je))return!1;const Dt=oe[je],Gt=ye[je];if(Lt(Dt)&&Lt(Gt)){if(!Wn(Dt,Gt))return!1}else if(Dt!==Gt)return!1}for(const je of nt)if(!Ce.includes(je))return!1;return!0}function Lt(oe){return null!==oe&&"object"==typeof oe}function hi(oe){const ye=[];for(const[Ce,nt]of Object.entries(oe))Array.isArray(nt)?nt.forEach(je=>{ye.push(encodeURIComponent(Ce)+"="+encodeURIComponent(je))}):ye.push(encodeURIComponent(Ce)+"="+encodeURIComponent(nt));return ye.length?"&"+ye.join("&"):""}function Tr(oe){const ye={};return oe.replace(/^\?/,"").split("&").forEach(nt=>{if(nt){const[je,Dt]=nt.split("=");ye[decodeURIComponent(je)]=decodeURIComponent(Dt)}}),ye}function ri(oe){const ye=oe.indexOf("?");if(!ye)return"";const Ce=oe.indexOf("#",ye);return oe.substring(ye,Ce>0?Ce:void 0)}function Lr(oe,ye){const Ce=new Nr(oe,ye);return Ce.subscribe.bind(Ce)}class Nr{constructor(ye,Ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ce,this.task.then(()=>{ye(this)}).catch(nt=>{this.error(nt)})}next(ye){this.forEachObserver(Ce=>{Ce.next(ye)})}error(ye){this.forEachObserver(Ce=>{Ce.error(ye)}),this.close(ye)}complete(){this.forEachObserver(ye=>{ye.complete()}),this.close()}subscribe(ye,Ce,nt){let je;if(void 0===ye&&void 0===Ce&&void 0===nt)throw new Error("Missing Observer.");je=function Xt(oe,ye){if("object"!=typeof oe||null===oe)return!1;for(const Ce of ye)if(Ce in oe&&"function"==typeof oe[Ce])return!0;return!1}(ye,["next","error","complete"])?ye:{next:ye,error:Ce,complete:nt},void 0===je.next&&(je.next=zt),void 0===je.error&&(je.error=zt),void 0===je.complete&&(je.complete=zt);const Dt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?je.error(this.finalError):je.complete()}catch{}}),this.observers.push(je),Dt}unsubscribeOne(ye){void 0===this.observers||void 0===this.observers[ye]||(delete this.observers[ye],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ye){if(!this.finalized)for(let Ce=0;Ce<this.observers.length;Ce++)this.sendOne(Ce,ye)}sendOne(ye,Ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ye])try{Ce(this.observers[ye])}catch(nt){typeof console<"u"&&console.error&&console.error(nt)}})}close(ye){this.finalized||(this.finalized=!0,void 0!==ye&&(this.finalError=ye),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zt(){}function ut(oe,ye=1e3,Ce=2){const nt=ye*Math.pow(Ce,oe),je=Math.round(.5*nt*(Math.random()-.5)*2);return Math.min(144e5,nt+je)}function Jt(oe){return oe&&oe._delegate?oe._delegate:oe}},4662:(Rt,Ue,F)=>{"use strict";var E=F(1481),z=F(4650),G=F(7340);function _e(S){return new z.vHH(3e3,!1)}function Sr(){return typeof window<"u"&&typeof window.document<"u"}function In(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Dn(S){switch(S.length){case 0:return new G.ZN;case 1:return S[0];default:return new G.ZE(S)}}function Ai(S,p,m,M,j=new Map,Q=new Map){const he=[],ge=[];let Le=-1,Je=null;if(M.forEach(St=>{const jt=St.get("offset"),Pn=jt==Le,Nn=Pn&&Je||new Map;St.forEach((gn,fn)=>{let Jn=fn,$n=gn;if("offset"!==fn)switch(Jn=p.normalizePropertyName(Jn,he),$n){case G.k1:$n=j.get(fn);break;case G.l3:$n=Q.get(fn);break;default:$n=p.normalizeStyleValue(fn,Jn,$n,he)}Nn.set(Jn,$n)}),Pn||ge.push(Nn),Je=Nn,Le=jt}),he.length)throw function Me(S){return new z.vHH(3502,!1)}();return ge}function zn(S,p,m,M){switch(p){case"start":S.onStart(()=>M(m&&Yn(m,"start",S)));break;case"done":S.onDone(()=>M(m&&Yn(m,"done",S)));break;case"destroy":S.onDestroy(()=>M(m&&Yn(m,"destroy",S)))}}function Yn(S,p,m){const Q=br(S.element,S.triggerName,S.fromState,S.toState,p||S.phaseName,m.totalTime??S.totalTime,!!m.disabled),he=S._data;return null!=he&&(Q._data=he),Q}function br(S,p,m,M,j="",Q=0,he){return{element:S,triggerName:p,fromState:m,toState:M,phaseName:j,totalTime:Q,disabled:!!he}}function mr(S,p,m){let M=S.get(p);return M||S.set(p,M=m),M}function jr(S){const p=S.indexOf(":");return[S.substring(1,p),S.slice(p+1)]}let xn=(S,p)=>!1,_n=(S,p,m)=>[],Wn=null;function Lt(S){const p=S.parentNode||S.host;return p===Wn?null:p}(In()||typeof Element<"u")&&(Sr()?(Wn=(()=>document.documentElement)(),xn=(S,p)=>{for(;p;){if(p===S)return!0;p=Lt(p)}return!1}):xn=(S,p)=>S.contains(p),_n=(S,p,m)=>{if(m)return Array.from(S.querySelectorAll(p));const M=S.querySelector(p);return M?[M]:[]});let Tr=null,ri=!1;const ir=xn,Xt=_n;let bn=(()=>{class S{validateStyleProperty(m){return function qi(S){Tr||(Tr=function Nr(){return typeof document<"u"?document.body:null}()||{},ri=!!Tr.style&&"WebkitAppearance"in Tr.style);let p=!0;return Tr.style&&!function hi(S){return"ebkit"==S.substring(1,6)}(S)&&(p=S in Tr.style,!p&&ri&&(p="Webkit"+S.charAt(0).toUpperCase()+S.slice(1)in Tr.style)),p}(m)}matchesElement(m,M){return!1}containsElement(m,M){return ir(m,M)}getParentElement(m){return Lt(m)}query(m,M,j){return Xt(m,M,j)}computeStyle(m,M,j){return j||""}animate(m,M,j,Q,he,ge=[],Le){return new G.ZN(j,Q)}}return S.\u0275fac=function(m){return new(m||S)},S.\u0275prov=z.Yz7({token:S,factory:S.\u0275fac}),S})(),Wt=(()=>{class S{}return S.NOOP=new bn,S})();const bi="ng-enter",Ln="ng-leave",fi="ng-trigger",Gn=".ng-trigger",Mr="ng-animating",cr=".ng-animating";function kt(S){if("number"==typeof S)return S;const p=S.match(/^(-?[\.\d]+)(m?s)/);return!p||p.length<2?0:ut(parseFloat(p[1]),p[2])}function ut(S,p){return"s"===p?1e3*S:S}function $t(S,p,m){return S.hasOwnProperty("duration")?S:function ln(S,p,m){let j,Q=0,he="";if("string"==typeof S){const ge=S.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ge)return p.push(_e()),{duration:0,delay:0,easing:""};j=ut(parseFloat(ge[1]),ge[2]);const Le=ge[3];null!=Le&&(Q=ut(parseFloat(Le),ge[4]));const Je=ge[5];Je&&(he=Je)}else j=S;if(!m){let ge=!1,Le=p.length;j<0&&(p.push(function ve(){return new z.vHH(3100,!1)}()),ge=!0),Q<0&&(p.push(function be(){return new z.vHH(3101,!1)}()),ge=!0),ge&&p.splice(Le,0,_e())}return{duration:j,delay:Q,easing:he}}(S,p,m)}function Jt(S,p={}){return Object.keys(S).forEach(m=>{p[m]=S[m]}),p}function oe(S){const p=new Map;return Object.keys(S).forEach(m=>{p.set(m,S[m])}),p}function nt(S,p=new Map,m){if(m)for(let[M,j]of m)p.set(M,j);for(let[M,j]of S)p.set(M,j);return p}function je(S,p,m){return m?p+":"+m+";":""}function Dt(S){let p="";for(let m=0;m<S.style.length;m++){const M=S.style.item(m);p+=je(0,M,S.style.getPropertyValue(M))}for(const m in S.style)S.style.hasOwnProperty(m)&&!m.startsWith("_")&&(p+=je(0,xt(m),S.style[m]));S.setAttribute("style",p)}function Gt(S,p,m){S.style&&(p.forEach((M,j)=>{const Q=st(j);m&&!m.has(j)&&m.set(j,S.style[Q]),S.style[Q]=M}),In()&&Dt(S))}function An(S,p){S.style&&(p.forEach((m,M)=>{const j=st(M);S.style[j]=""}),In()&&Dt(S))}function dr(S){return Array.isArray(S)?1==S.length?S[0]:(0,G.vP)(S):S}const nr=new RegExp("{{\\s*(.+?)\\s*}}","g");function ie(S){let p=[];if("string"==typeof S){let m;for(;m=nr.exec(S);)p.push(m[1]);nr.lastIndex=0}return p}function ae(S,p,m){const M=S.toString(),j=M.replace(nr,(Q,he)=>{let ge=p[he];return null==ge&&(m.push(function Te(S){return new z.vHH(3003,!1)}()),ge=""),ge.toString()});return j==M?S:j}function ee(S){const p=[];let m=S.next();for(;!m.done;)p.push(m.value),m=S.next();return p}const Re=/-+([a-z0-9])/g;function st(S){return S.replace(Re,(...p)=>p[1].toUpperCase())}function xt(S){return S.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Kn(S,p,m){switch(p.type){case 7:return S.visitTrigger(p,m);case 0:return S.visitState(p,m);case 1:return S.visitTransition(p,m);case 2:return S.visitSequence(p,m);case 3:return S.visitGroup(p,m);case 4:return S.visitAnimate(p,m);case 5:return S.visitKeyframes(p,m);case 6:return S.visitStyle(p,m);case 8:return S.visitReference(p,m);case 9:return S.visitAnimateChild(p,m);case 10:return S.visitAnimateRef(p,m);case 11:return S.visitQuery(p,m);case 12:return S.visitStagger(p,m);default:throw function se(S){return new z.vHH(3004,!1)}()}}function Ti(S,p){return window.getComputedStyle(S)[p]}function Qr(S,p){const m=[];return"string"==typeof S?S.split(/\s*,\s*/).forEach(M=>function Xr(S,p,m){if(":"==S[0]){const Le=function Zi(S,p){switch(S){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(m,M)=>parseFloat(M)>parseFloat(m);case":decrement":return(m,M)=>parseFloat(M)<parseFloat(m);default:return p.push(function It(S){return new z.vHH(3016,!1)}()),"* => *"}}(S,m);if("function"==typeof Le)return void p.push(Le);S=Le}const M=S.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==M||M.length<4)return m.push(function ot(S){return new z.vHH(3015,!1)}()),p;const j=M[1],Q=M[2],he=M[3];p.push(Ds(j,he));"<"==Q[0]&&!("*"==j&&"*"==he)&&p.push(Ds(he,j))}(M,m,p)):m.push(S),m}const Qn=new Set(["true","1"]),fs=new Set(["false","0"]);function Ds(S,p){const m=Qn.has(S)||fs.has(S),M=Qn.has(p)||fs.has(p);return(j,Q)=>{let he="*"==S||S==j,ge="*"==p||p==Q;return!he&&m&&"boolean"==typeof j&&(he=j?Qn.has(S):fs.has(S)),!ge&&M&&"boolean"==typeof Q&&(ge=Q?Qn.has(p):fs.has(p)),he&&ge}}const Rr=new RegExp("s*:selfs*,?","g");function Si(S,p,m,M){return new ii(S).build(p,m,M)}class ii{constructor(p){this._driver=p}build(p,m,M){const j=new si(m);return this._resetContextStyleTimingState(j),Kn(this,dr(p),j)}_resetContextStyleTimingState(p){p.currentQuerySelector="",p.collectedStyles=new Map,p.collectedStyles.set("",new Map),p.currentTime=0}visitTrigger(p,m){let M=m.queryCount=0,j=m.depCount=0;const Q=[],he=[];return"@"==p.name.charAt(0)&&m.errors.push(function we(){return new z.vHH(3006,!1)}()),p.definitions.forEach(ge=>{if(this._resetContextStyleTimingState(m),0==ge.type){const Le=ge,Je=Le.name;Je.toString().split(/\s*,\s*/).forEach(St=>{Le.name=St,Q.push(this.visitState(Le,m))}),Le.name=Je}else if(1==ge.type){const Le=this.visitTransition(ge,m);M+=Le.queryCount,j+=Le.depCount,he.push(Le)}else m.errors.push(function it(){return new z.vHH(3007,!1)}())}),{type:7,name:p.name,states:Q,transitions:he,queryCount:M,depCount:j,options:null}}visitState(p,m){const M=this.visitStyle(p.styles,m),j=p.options&&p.options.params||null;if(M.containsDynamicStyles){const Q=new Set,he=j||{};M.styles.forEach(ge=>{ge instanceof Map&&ge.forEach(Le=>{ie(Le).forEach(Je=>{he.hasOwnProperty(Je)||Q.add(Je)})})}),Q.size&&(ee(Q.values()),m.errors.push(function Xe(S,p){return new z.vHH(3008,!1)}()))}return{type:0,name:p.name,style:M,options:j?{params:j}:null}}visitTransition(p,m){m.queryCount=0,m.depCount=0;const M=Kn(this,dr(p.animation),m);return{type:1,matchers:Qr(p.expr,m.errors),animation:M,queryCount:m.queryCount,depCount:m.depCount,options:Ui(p.options)}}visitSequence(p,m){return{type:2,steps:p.steps.map(M=>Kn(this,M,m)),options:Ui(p.options)}}visitGroup(p,m){const M=m.currentTime;let j=0;const Q=p.steps.map(he=>{m.currentTime=M;const ge=Kn(this,he,m);return j=Math.max(j,m.currentTime),ge});return m.currentTime=j,{type:3,steps:Q,options:Ui(p.options)}}visitAnimate(p,m){const M=function no(S,p){if(S.hasOwnProperty("duration"))return S;if("number"==typeof S)return Yi($t(S,p).duration,0,"");const m=S;if(m.split(/\s+/).some(Q=>"{"==Q.charAt(0)&&"{"==Q.charAt(1))){const Q=Yi(0,0,"");return Q.dynamic=!0,Q.strValue=m,Q}const j=$t(m,p);return Yi(j.duration,j.delay,j.easing)}(p.timings,m.errors);m.currentAnimateTimings=M;let j,Q=p.styles?p.styles:(0,G.oB)({});if(5==Q.type)j=this.visitKeyframes(Q,m);else{let he=p.styles,ge=!1;if(!he){ge=!0;const Je={};M.easing&&(Je.easing=M.easing),he=(0,G.oB)(Je)}m.currentTime+=M.duration+M.delay;const Le=this.visitStyle(he,m);Le.isEmptyStep=ge,j=Le}return m.currentAnimateTimings=null,{type:4,timings:M,style:j,options:null}}visitStyle(p,m){const M=this._makeStyleAst(p,m);return this._validateStyleAst(M,m),M}_makeStyleAst(p,m){const M=[],j=Array.isArray(p.styles)?p.styles:[p.styles];for(let ge of j)"string"==typeof ge?ge===G.l3?M.push(ge):m.errors.push(new z.vHH(3002,!1)):M.push(oe(ge));let Q=!1,he=null;return M.forEach(ge=>{if(ge instanceof Map&&(ge.has("easing")&&(he=ge.get("easing"),ge.delete("easing")),!Q))for(let Le of ge.values())if(Le.toString().indexOf("{{")>=0){Q=!0;break}}),{type:6,styles:M,easing:he,offset:p.offset,containsDynamicStyles:Q,options:null}}_validateStyleAst(p,m){const M=m.currentAnimateTimings;let j=m.currentTime,Q=m.currentTime;M&&Q>0&&(Q-=M.duration+M.delay),p.styles.forEach(he=>{"string"!=typeof he&&he.forEach((ge,Le)=>{const Je=m.collectedStyles.get(m.currentQuerySelector),St=Je.get(Le);let jt=!0;St&&(Q!=j&&Q>=St.startTime&&j<=St.endTime&&(m.errors.push(function ze(S,p,m,M,j){return new z.vHH(3010,!1)}()),jt=!1),Q=St.startTime),jt&&Je.set(Le,{startTime:Q,endTime:j}),m.options&&function sr(S,p,m){const M=p.params||{},j=ie(S);j.length&&j.forEach(Q=>{M.hasOwnProperty(Q)||m.push(function pe(S){return new z.vHH(3001,!1)}())})}(ge,m.options,m.errors)})})}visitKeyframes(p,m){const M={type:5,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function Ke(){return new z.vHH(3011,!1)}()),M;let Q=0;const he=[];let ge=!1,Le=!1,Je=0;const St=p.steps.map($n=>{const wi=this._makeStyleAst($n,m);let hr=null!=wi.offset?wi.offset:function Ir(S){if("string"==typeof S)return null;let p=null;if(Array.isArray(S))S.forEach(m=>{if(m instanceof Map&&m.has("offset")){const M=m;p=parseFloat(M.get("offset")),M.delete("offset")}});else if(S instanceof Map&&S.has("offset")){const m=S;p=parseFloat(m.get("offset")),m.delete("offset")}return p}(wi.styles),Kr=0;return null!=hr&&(Q++,Kr=wi.offset=hr),Le=Le||Kr<0||Kr>1,ge=ge||Kr<Je,Je=Kr,he.push(Kr),wi});Le&&m.errors.push(function De(){return new z.vHH(3012,!1)}()),ge&&m.errors.push(function Ot(){return new z.vHH(3200,!1)}());const jt=p.steps.length;let Pn=0;Q>0&&Q<jt?m.errors.push(function $e(){return new z.vHH(3202,!1)}()):0==Q&&(Pn=1/(jt-1));const Nn=jt-1,gn=m.currentTime,fn=m.currentAnimateTimings,Jn=fn.duration;return St.forEach(($n,wi)=>{const hr=Pn>0?wi==Nn?1:Pn*wi:he[wi],Kr=hr*Jn;m.currentTime=gn+fn.delay+Kr,fn.duration=Kr,this._validateStyleAst($n,m),$n.offset=hr,M.styles.push($n)}),M}visitReference(p,m){return{type:8,animation:Kn(this,dr(p.animation),m),options:Ui(p.options)}}visitAnimateChild(p,m){return m.depCount++,{type:9,options:Ui(p.options)}}visitAnimateRef(p,m){return{type:10,animation:this.visitReference(p.animation,m),options:Ui(p.options)}}visitQuery(p,m){const M=m.currentQuerySelector,j=p.options||{};m.queryCount++,m.currentQuery=p;const[Q,he]=function yr(S){const p=!!S.split(/\s*,\s*/).find(m=>":self"==m);return p&&(S=S.replace(Rr,"")),S=S.replace(/@\*/g,Gn).replace(/@\w+/g,m=>Gn+"-"+m.slice(1)).replace(/:animating/g,cr),[S,p]}(p.selector);m.currentQuerySelector=M.length?M+" "+Q:Q,mr(m.collectedStyles,m.currentQuerySelector,new Map);const ge=Kn(this,dr(p.animation),m);return m.currentQuery=null,m.currentQuerySelector=M,{type:11,selector:Q,limit:j.limit||0,optional:!!j.optional,includeSelf:he,animation:ge,originalSelector:p.selector,options:Ui(p.options)}}visitStagger(p,m){m.currentQuery||m.errors.push(function Ie(){return new z.vHH(3013,!1)}());const M="full"===p.timings?{duration:0,delay:0,easing:"full"}:$t(p.timings,m.errors,!0);return{type:12,animation:Kn(this,dr(p.animation),m),timings:M,options:null}}}class si{constructor(p){this.errors=p,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ui(S){return S?(S=Jt(S)).params&&(S.params=function to(S){return S?Jt(S):null}(S.params)):S={},S}function Yi(S,p,m){return{duration:S,delay:p,easing:m}}function pi(S,p,m,M,j,Q,he=null,ge=!1){return{type:1,element:S,keyframes:p,preStyleProps:m,postStyleProps:M,duration:j,delay:Q,totalTime:j+Q,easing:he,subTimeline:ge}}class Ts{constructor(){this._map=new Map}get(p){return this._map.get(p)||[]}append(p,m){let M=this._map.get(p);M||this._map.set(p,M=[]),M.push(...m)}has(p){return this._map.has(p)}clear(){this._map.clear()}}const To=new RegExp(":enter","g"),oi=new RegExp(":leave","g");function Pe(S,p,m,M,j,Q=new Map,he=new Map,ge,Le,Je=[]){return(new xe).buildKeyframes(S,p,m,M,j,Q,he,ge,Le,Je)}class xe{buildKeyframes(p,m,M,j,Q,he,ge,Le,Je,St=[]){Je=Je||new Ts;const jt=new at(p,m,Je,j,Q,St,[]);jt.options=Le;const Pn=Le.delay?kt(Le.delay):0;jt.currentTimeline.delayNextStep(Pn),jt.currentTimeline.setStyles([he],null,jt.errors,Le),Kn(this,M,jt);const Nn=jt.timelines.filter(gn=>gn.containsAnimation());if(Nn.length&&ge.size){let gn;for(let fn=Nn.length-1;fn>=0;fn--){const Jn=Nn[fn];if(Jn.element===m){gn=Jn;break}}gn&&!gn.allowOnlyTimelineStyles()&&gn.setStyles([ge],null,jt.errors,Le)}return Nn.length?Nn.map(gn=>gn.buildKeyframes()):[pi(m,[],[],[],0,Pn,"",!1)]}visitTrigger(p,m){}visitState(p,m){}visitTransition(p,m){}visitAnimateChild(p,m){const M=m.subInstructions.get(m.element);if(M){const j=m.createSubContext(p.options),Q=m.currentTimeline.currentTime,he=this._visitSubInstructions(M,j,j.options);Q!=he&&m.transformIntoNewTimeline(he)}m.previousNode=p}visitAnimateRef(p,m){const M=m.createSubContext(p.options);M.transformIntoNewTimeline(),this._applyAnimationRefDelays([p.options,p.animation.options],m,M),this.visitReference(p.animation,M),m.transformIntoNewTimeline(M.currentTimeline.currentTime),m.previousNode=p}_applyAnimationRefDelays(p,m,M){for(const Q of p){const he=Q?.delay;if(he){var j;const ge="number"==typeof he?he:kt(ae(he,null!==(j=Q?.params)&&void 0!==j?j:{},m.errors));M.delayNextStep(ge)}}}_visitSubInstructions(p,m,M){let Q=m.currentTimeline.currentTime;const he=null!=M.duration?kt(M.duration):null,ge=null!=M.delay?kt(M.delay):null;return 0!==he&&p.forEach(Le=>{const Je=m.appendInstructionToTimeline(Le,he,ge);Q=Math.max(Q,Je.duration+Je.delay)}),Q}visitReference(p,m){m.updateOptions(p.options,!0),Kn(this,p.animation,m),m.previousNode=p}visitSequence(p,m){const M=m.subContextCount;let j=m;const Q=p.options;if(Q&&(Q.params||Q.delay)&&(j=m.createSubContext(Q),j.transformIntoNewTimeline(),null!=Q.delay)){6==j.previousNode.type&&(j.currentTimeline.snapshotCurrentStyles(),j.previousNode=He);const he=kt(Q.delay);j.delayNextStep(he)}p.steps.length&&(p.steps.forEach(he=>Kn(this,he,j)),j.currentTimeline.applyStylesToKeyframe(),j.subContextCount>M&&j.transformIntoNewTimeline()),m.previousNode=p}visitGroup(p,m){const M=[];let j=m.currentTimeline.currentTime;const Q=p.options&&p.options.delay?kt(p.options.delay):0;p.steps.forEach(he=>{const ge=m.createSubContext(p.options);Q&&ge.delayNextStep(Q),Kn(this,he,ge),j=Math.max(j,ge.currentTimeline.currentTime),M.push(ge.currentTimeline)}),M.forEach(he=>m.currentTimeline.mergeTimelineCollectedStyles(he)),m.transformIntoNewTimeline(j),m.previousNode=p}_visitTiming(p,m){if(p.dynamic){const M=p.strValue;return $t(m.params?ae(M,m.params,m.errors):M,m.errors)}return{duration:p.duration,delay:p.delay,easing:p.easing}}visitAnimate(p,m){const M=m.currentAnimateTimings=this._visitTiming(p.timings,m),j=m.currentTimeline;M.delay&&(m.incrementTime(M.delay),j.snapshotCurrentStyles());const Q=p.style;5==Q.type?this.visitKeyframes(Q,m):(m.incrementTime(M.duration),this.visitStyle(Q,m),j.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=p}visitStyle(p,m){const M=m.currentTimeline,j=m.currentAnimateTimings;!j&&M.hasCurrentStyleProperties()&&M.forwardFrame();const Q=j&&j.easing||p.easing;p.isEmptyStep?M.applyEmptyStep(Q):M.setStyles(p.styles,Q,m.errors,m.options),m.previousNode=p}visitKeyframes(p,m){const M=m.currentAnimateTimings,j=m.currentTimeline.duration,Q=M.duration,ge=m.createSubContext().currentTimeline;ge.easing=M.easing,p.styles.forEach(Le=>{ge.forwardTime((Le.offset||0)*Q),ge.setStyles(Le.styles,Le.easing,m.errors,m.options),ge.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(ge),m.transformIntoNewTimeline(j+Q),m.previousNode=p}visitQuery(p,m){const M=m.currentTimeline.currentTime,j=p.options||{},Q=j.delay?kt(j.delay):0;Q&&(6===m.previousNode.type||0==M&&m.currentTimeline.hasCurrentStyleProperties())&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=He);let he=M;const ge=m.invokeQuery(p.selector,p.originalSelector,p.limit,p.includeSelf,!!j.optional,m.errors);m.currentQueryTotal=ge.length;let Le=null;ge.forEach((Je,St)=>{m.currentQueryIndex=St;const jt=m.createSubContext(p.options,Je);Q&&jt.delayNextStep(Q),Je===m.element&&(Le=jt.currentTimeline),Kn(this,p.animation,jt),jt.currentTimeline.applyStylesToKeyframe(),he=Math.max(he,jt.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(he),Le&&(m.currentTimeline.mergeTimelineCollectedStyles(Le),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=p}visitStagger(p,m){const M=m.parentContext,j=m.currentTimeline,Q=p.timings,he=Math.abs(Q.duration),ge=he*(m.currentQueryTotal-1);let Le=he*m.currentQueryIndex;switch(Q.duration<0?"reverse":Q.easing){case"reverse":Le=ge-Le;break;case"full":Le=M.currentStaggerTime}const St=m.currentTimeline;Le&&St.delayNextStep(Le);const jt=St.currentTime;Kn(this,p.animation,m),m.previousNode=p,M.currentStaggerTime=j.currentTime-jt+(j.startTime-M.currentTimeline.startTime)}}const He={};class at{constructor(p,m,M,j,Q,he,ge,Le){this._driver=p,this.element=m,this.subInstructions=M,this._enterClassName=j,this._leaveClassName=Q,this.errors=he,this.timelines=ge,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=He,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Le||new bt(this._driver,m,0),ge.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(p,m){if(!p)return;const M=p;let j=this.options;null!=M.duration&&(j.duration=kt(M.duration)),null!=M.delay&&(j.delay=kt(M.delay));const Q=M.params;if(Q){let he=j.params;he||(he=this.options.params={}),Object.keys(Q).forEach(ge=>{(!m||!he.hasOwnProperty(ge))&&(he[ge]=ae(Q[ge],he,this.errors))})}}_copyOptions(){const p={};if(this.options){const m=this.options.params;if(m){const M=p.params={};Object.keys(m).forEach(j=>{M[j]=m[j]})}}return p}createSubContext(p=null,m,M){const j=m||this.element,Q=new at(this._driver,j,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(j,M||0));return Q.previousNode=this.previousNode,Q.currentAnimateTimings=this.currentAnimateTimings,Q.options=this._copyOptions(),Q.updateOptions(p),Q.currentQueryIndex=this.currentQueryIndex,Q.currentQueryTotal=this.currentQueryTotal,Q.parentContext=this,this.subContextCount++,Q}transformIntoNewTimeline(p){return this.previousNode=He,this.currentTimeline=this.currentTimeline.fork(this.element,p),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(p,m,M){const j={duration:m??p.duration,delay:this.currentTimeline.currentTime+(M??0)+p.delay,easing:""},Q=new Vt(this._driver,p.element,p.keyframes,p.preStyleProps,p.postStyleProps,j,p.stretchStartingKeyframe);return this.timelines.push(Q),j}incrementTime(p){this.currentTimeline.forwardTime(this.currentTimeline.duration+p)}delayNextStep(p){p>0&&this.currentTimeline.delayNextStep(p)}invokeQuery(p,m,M,j,Q,he){let ge=[];if(j&&ge.push(this.element),p.length>0){p=(p=p.replace(To,"."+this._enterClassName)).replace(oi,"."+this._leaveClassName);let Je=this._driver.query(this.element,p,1!=M);0!==M&&(Je=M<0?Je.slice(Je.length+M,Je.length):Je.slice(0,M)),ge.push(...Je)}return!Q&&0==ge.length&&he.push(function ke(S){return new z.vHH(3014,!1)}()),ge}}class bt{constructor(p,m,M,j){this._driver=p,this.element=m,this.startTime=M,this._elementTimelineStylesLookup=j,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(m),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(m,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(p){const m=1===this._keyframes.size&&this._pendingStyles.size;this.duration||m?(this.forwardTime(this.currentTime+p),m&&this.snapshotCurrentStyles()):this.startTime+=p}fork(p,m){return this.applyStylesToKeyframe(),new bt(this._driver,p,m||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(p){this.applyStylesToKeyframe(),this.duration=p,this._loadKeyframe()}_updateStyle(p,m){this._localTimelineStyles.set(p,m),this._globalTimelineStyles.set(p,m),this._styleSummary.set(p,{time:this.currentTime,value:m})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(p){p&&this._previousKeyframe.set("easing",p);for(let[m,M]of this._globalTimelineStyles)this._backFill.set(m,M||G.l3),this._currentKeyframe.set(m,G.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(p,m,M,j){m&&this._previousKeyframe.set("easing",m);const Q=j&&j.params||{},he=function ai(S,p){const m=new Map;let M;return S.forEach(j=>{if("*"===j){M=M||p.keys();for(let Q of M)m.set(Q,G.l3)}else nt(j,m)}),m}(p,this._globalTimelineStyles);for(let[Le,Je]of he){const St=ae(Je,Q,M);var ge;this._pendingStyles.set(Le,St),this._localTimelineStyles.has(Le)||this._backFill.set(Le,null!==(ge=this._globalTimelineStyles.get(Le))&&void 0!==ge?ge:G.l3),this._updateStyle(Le,St)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((p,m)=>{this._currentKeyframe.set(m,p)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((p,m)=>{this._currentKeyframe.has(m)||this._currentKeyframe.set(m,p)}))}snapshotCurrentStyles(){for(let[p,m]of this._localTimelineStyles)this._pendingStyles.set(p,m),this._updateStyle(p,m)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const p=[];for(let m in this._currentKeyframe)p.push(m);return p}mergeTimelineCollectedStyles(p){p._styleSummary.forEach((m,M)=>{const j=this._styleSummary.get(M);(!j||m.time>j.time)&&this._updateStyle(M,m.value)})}buildKeyframes(){this.applyStylesToKeyframe();const p=new Set,m=new Set,M=1===this._keyframes.size&&0===this.duration;let j=[];this._keyframes.forEach((ge,Le)=>{const Je=nt(ge,new Map,this._backFill);Je.forEach((St,jt)=>{St===G.k1?p.add(jt):St===G.l3&&m.add(jt)}),M||Je.set("offset",Le/this.duration),j.push(Je)});const Q=p.size?ee(p.values()):[],he=m.size?ee(m.values()):[];if(M){const ge=j[0],Le=new Map(ge);ge.set("offset",0),Le.set("offset",1),j=[ge,Le]}return pi(this.element,j,Q,he,this.duration,this.startTime,this.easing,!1)}}class Vt extends bt{constructor(p,m,M,j,Q,he,ge=!1){super(p,m,he.delay),this.keyframes=M,this.preStyleProps=j,this.postStyleProps=Q,this._stretchStartingKeyframe=ge,this.timings={duration:he.duration,delay:he.delay,easing:he.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let p=this.keyframes,{delay:m,duration:M,easing:j}=this.timings;if(this._stretchStartingKeyframe&&m){const Q=[],he=M+m,ge=m/he,Le=nt(p[0]);Le.set("offset",0),Q.push(Le);const Je=nt(p[0]);Je.set("offset",En(ge)),Q.push(Je);const St=p.length-1;for(let jt=1;jt<=St;jt++){let Pn=nt(p[jt]);const Nn=Pn.get("offset");Pn.set("offset",En((m+Nn*M)/he)),Q.push(Pn)}M=he,m=0,j="",p=Q}return pi(this.element,p,this.preStyleProps,this.postStyleProps,M,m,j,!0)}}function En(S,p=3){const m=Math.pow(10,p-1);return Math.round(S*m)/m}class Bi{}const Us=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Qi extends Bi{normalizePropertyName(p,m){return st(p)}normalizeStyleValue(p,m,M,j){let Q="";const he=M.toString().trim();if(Us.has(m)&&0!==M&&"0"!==M)if("number"==typeof M)Q="px";else{const ge=M.match(/^[+-]?[\d\.]+([a-z]*)$/);ge&&0==ge[1].length&&j.push(function le(S,p){return new z.vHH(3005,!1)}())}return he+Q}}function Xi(S,p,m,M,j,Q,he,ge,Le,Je,St,jt,Pn){return{type:0,element:S,triggerName:p,isRemovalTransition:j,fromState:m,fromStyles:Q,toState:M,toStyles:he,timelines:ge,queriedElements:Le,preStyleProps:Je,postStyleProps:St,totalTime:jt,errors:Pn}}const Gs={};class Cs{constructor(p,m,M){this._triggerName=p,this.ast=m,this._stateStyles=M}match(p,m,M,j){return function $i(S,p,m,M,j){return S.some(Q=>Q(p,m,M,j))}(this.ast.matchers,p,m,M,j)}buildStyles(p,m,M){let j=this._stateStyles.get("*");return void 0!==p&&(j=this._stateStyles.get(p?.toString())||j),j?j.buildStyles(m,M):new Map}build(p,m,M,j,Q,he,ge,Le,Je,St){var jt;const Pn=[],Nn=this.ast.options&&this.ast.options.params||Gs,fn=this.buildStyles(M,ge&&ge.params||Gs,Pn),Jn=Le&&Le.params||Gs,$n=this.buildStyles(j,Jn,Pn),wi=new Set,hr=new Map,Kr=new Map,Go="void"===j,Ro={params:Ji(Jn,Nn),delay:null===(jt=this.ast.options)||void 0===jt?void 0:jt.delay},ss=St?[]:Pe(p,m,this.ast.animation,Q,he,fn,$n,Ro,Je,Pn);let Es=0;if(ss.forEach(Hi=>{Es=Math.max(Hi.duration+Hi.delay,Es)}),Pn.length)return Xi(m,this._triggerName,M,j,Go,fn,$n,[],[],hr,Kr,Es,Pn);ss.forEach(Hi=>{const ta=Hi.element,io=mr(hr,ta,new Set);Hi.preStyleProps.forEach(vo=>io.add(vo));const na=mr(Kr,ta,new Set);Hi.postStyleProps.forEach(vo=>na.add(vo)),ta!==m&&wi.add(ta)});const ea=ee(wi.values());return Xi(m,this._triggerName,M,j,Go,fn,$n,ss,ea,hr,Kr,Es)}}function Ji(S,p){const m=Jt(p);for(const M in S)S.hasOwnProperty(M)&&null!=S[M]&&(m[M]=S[M]);return m}class ps{constructor(p,m,M){this.styles=p,this.defaultParams=m,this.normalizer=M}buildStyles(p,m){const M=new Map,j=Jt(this.defaultParams);return Object.keys(p).forEach(Q=>{const he=p[Q];null!==he&&(j[Q]=he)}),this.styles.styles.forEach(Q=>{"string"!=typeof Q&&Q.forEach((he,ge)=>{he&&(he=ae(he,j,m));const Le=this.normalizer.normalizePropertyName(ge,m);he=this.normalizer.normalizeStyleValue(ge,Le,he,m),M.set(Le,he)})}),M}}class zs{constructor(p,m,M){this.name=p,this.ast=m,this._normalizer=M,this.transitionFactories=[],this.states=new Map,m.states.forEach(j=>{this.states.set(j.name,new ps(j.style,j.options&&j.options.params||{},M))}),Bs(this.states,"true","1"),Bs(this.states,"false","0"),m.transitions.forEach(j=>{this.transitionFactories.push(new Cs(p,j,this.states))}),this.fallbackTransition=function Ho(S,p,m){return new Cs(S,{type:1,animation:{type:2,steps:[],options:null},matchers:[(he,ge)=>!0],options:null,queryCount:0,depCount:0},p)}(p,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(p,m,M,j){return this.transitionFactories.find(he=>he.match(p,m,M,j))||null}matchStyles(p,m,M){return this.fallbackTransition.buildStyles(p,m,M)}}function Bs(S,p,m){S.has(p)?S.has(m)||S.set(m,S.get(p)):S.has(m)&&S.set(p,S.get(m))}const ho=new Ts;class us{constructor(p,m,M){this.bodyNode=p,this._driver=m,this._normalizer=M,this._animations=new Map,this._playersById=new Map,this.players=[]}register(p,m){const M=[],Q=Si(this._driver,m,M,[]);if(M.length)throw function Ve(S){return new z.vHH(3503,!1)}();this._animations.set(p,Q)}_buildPlayer(p,m,M){const j=p.element,Q=Ai(0,this._normalizer,0,p.keyframes,m,M);return this._driver.animate(j,Q,p.duration,p.delay,p.easing,[],!0)}create(p,m,M={}){const j=[],Q=this._animations.get(p);let he;const ge=new Map;if(Q?(he=Pe(this._driver,m,Q,bi,Ln,new Map,new Map,M,ho,j),he.forEach(St=>{const jt=mr(ge,St.element,new Map);St.postStyleProps.forEach(Pn=>jt.set(Pn,null))})):(j.push(function Oe(){return new z.vHH(3300,!1)}()),he=[]),j.length)throw function gt(S){return new z.vHH(3504,!1)}();ge.forEach((St,jt)=>{St.forEach((Pn,Nn)=>{St.set(Nn,this._driver.computeStyle(jt,Nn,G.l3))})});const Je=Dn(he.map(St=>{const jt=ge.get(St.element);return this._buildPlayer(St,new Map,jt)}));return this._playersById.set(p,Je),Je.onDestroy(()=>this.destroy(p)),this.players.push(Je),Je}destroy(p){const m=this._getPlayer(p);m.destroy(),this._playersById.delete(p);const M=this.players.indexOf(m);M>=0&&this.players.splice(M,1)}_getPlayer(p){const m=this._playersById.get(p);if(!m)throw function mt(S){return new z.vHH(3301,!1)}();return m}listen(p,m,M,j){const Q=br(m,"","","");return zn(this._getPlayer(p),M,Q,j),()=>{}}command(p,m,M,j){if("register"==M)return void this.register(p,j[0]);if("create"==M)return void this.create(p,m,j[0]||{});const Q=this._getPlayer(p);switch(M){case"play":Q.play();break;case"pause":Q.pause();break;case"reset":Q.reset();break;case"restart":Q.restart();break;case"finish":Q.finish();break;case"init":Q.init();break;case"setPosition":Q.setPosition(parseFloat(j[0]));break;case"destroy":this.destroy(p)}}}const es="ng-animate-queued",Oi="ng-animate-disabled",fo=[],ms={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Fr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vi="__ng_removed";class Xo{constructor(p,m=""){this.namespaceId=m;const M=p&&p.hasOwnProperty("value");if(this.value=function Co(S){return S??null}(M?p.value:p),M){const Q=Jt(p);delete Q.value,this.options=Q}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(p){const m=p.params;if(m){const M=this.options.params;Object.keys(m).forEach(j=>{null==M[j]&&(M[j]=m[j])})}}}const Xn="void",ei=new Xo(Xn);class Ks{constructor(p,m,M){this.id=p,this.hostElement=m,this._engine=M,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+p,cn(m,this._hostClassName)}listen(p,m,M,j){if(!this._triggers.has(m))throw function Yt(S,p){return new z.vHH(3302,!1)}();if(null==M||0==M.length)throw function On(S){return new z.vHH(3303,!1)}();if(!function ki(S){return"start"==S||"done"==S}(M))throw function pn(S,p){return new z.vHH(3400,!1)}();const Q=mr(this._elementListeners,p,[]),he={name:m,phase:M,callback:j};Q.push(he);const ge=mr(this._engine.statesByElement,p,new Map);return ge.has(m)||(cn(p,fi),cn(p,fi+"-"+m),ge.set(m,ei)),()=>{this._engine.afterFlush(()=>{const Le=Q.indexOf(he);Le>=0&&Q.splice(Le,1),this._triggers.has(m)||ge.delete(m)})}}register(p,m){return!this._triggers.has(p)&&(this._triggers.set(p,m),!0)}_getTrigger(p){const m=this._triggers.get(p);if(!m)throw function Et(S){return new z.vHH(3401,!1)}();return m}trigger(p,m,M,j=!0){const Q=this._getTrigger(m),he=new mi(this.id,m,p);let ge=this._engine.statesByElement.get(p);ge||(cn(p,fi),cn(p,fi+"-"+m),this._engine.statesByElement.set(p,ge=new Map));let Le=ge.get(m);const Je=new Xo(M,this.id);if(!(M&&M.hasOwnProperty("value"))&&Le&&Je.absorbOptions(Le.options),ge.set(m,Je),Le||(Le=ei),Je.value!==Xn&&Le.value===Je.value){if(!function Zs(S,p){const m=Object.keys(S),M=Object.keys(p);if(m.length!=M.length)return!1;for(let j=0;j<m.length;j++){const Q=m[j];if(!p.hasOwnProperty(Q)||S[Q]!==p[Q])return!1}return!0}(Le.params,Je.params)){const fn=[],Jn=Q.matchStyles(Le.value,Le.params,fn),$n=Q.matchStyles(Je.value,Je.params,fn);fn.length?this._engine.reportError(fn):this._engine.afterFlush(()=>{An(p,Jn),Gt(p,$n)})}return}const Pn=mr(this._engine.playersByElement,p,[]);Pn.forEach(fn=>{fn.namespaceId==this.id&&fn.triggerName==m&&fn.queued&&fn.destroy()});let Nn=Q.matchTransition(Le.value,Je.value,p,Je.params),gn=!1;if(!Nn){if(!j)return;Nn=Q.fallbackTransition,gn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:p,triggerName:m,transition:Nn,fromState:Le,toState:Je,player:he,isFallbackTransition:gn}),gn||(cn(p,es),he.onStart(()=>{ys(p,es)})),he.onDone(()=>{let fn=this.players.indexOf(he);fn>=0&&this.players.splice(fn,1);const Jn=this._engine.playersByElement.get(p);if(Jn){let $n=Jn.indexOf(he);$n>=0&&Jn.splice($n,1)}}),this.players.push(he),Pn.push(he),he}deregister(p){this._triggers.delete(p),this._engine.statesByElement.forEach(m=>m.delete(p)),this._elementListeners.forEach((m,M)=>{this._elementListeners.set(M,m.filter(j=>j.name!=p))})}clearElementCache(p){this._engine.statesByElement.delete(p),this._elementListeners.delete(p);const m=this._engine.playersByElement.get(p);m&&(m.forEach(M=>M.destroy()),this._engine.playersByElement.delete(p))}_signalRemovalForInnerTriggers(p,m){const M=this._engine.driver.query(p,Gn,!0);M.forEach(j=>{if(j[vi])return;const Q=this._engine.fetchNamespacesByElement(j);Q.size?Q.forEach(he=>he.triggerLeaveAnimation(j,m,!1,!0)):this.clearElementCache(j)}),this._engine.afterFlushAnimationsDone(()=>M.forEach(j=>this.clearElementCache(j)))}triggerLeaveAnimation(p,m,M,j){const Q=this._engine.statesByElement.get(p),he=new Map;if(Q){const ge=[];if(Q.forEach((Le,Je)=>{if(he.set(Je,Le.value),this._triggers.has(Je)){const St=this.trigger(p,Je,Xn,j);St&&ge.push(St)}}),ge.length)return this._engine.markElementAsRemoved(this.id,p,!0,m,he),M&&Dn(ge).onDone(()=>this._engine.processLeaveNode(p)),!0}return!1}prepareLeaveAnimationListeners(p){const m=this._elementListeners.get(p),M=this._engine.statesByElement.get(p);if(m&&M){const j=new Set;m.forEach(Q=>{const he=Q.name;if(j.has(he))return;j.add(he);const Le=this._triggers.get(he).fallbackTransition,Je=M.get(he)||ei,St=new Xo(Xn),jt=new mi(this.id,he,p);this._engine.totalQueuedPlayers++,this._queue.push({element:p,triggerName:he,transition:Le,fromState:Je,toState:St,player:jt,isFallbackTransition:!0})})}}removeNode(p,m){const M=this._engine;if(p.childElementCount&&this._signalRemovalForInnerTriggers(p,m),this.triggerLeaveAnimation(p,m,!0))return;let j=!1;if(M.totalAnimations){const Q=M.players.length?M.playersByQueriedElement.get(p):[];if(Q&&Q.length)j=!0;else{let he=p;for(;he=he.parentNode;)if(M.statesByElement.get(he)){j=!0;break}}}if(this.prepareLeaveAnimationListeners(p),j)M.markElementAsRemoved(this.id,p,!1,m);else{const Q=p[vi];(!Q||Q===ms)&&(M.afterFlush(()=>this.clearElementCache(p)),M.destroyInnerAnimations(p),M._onRemovalComplete(p,m))}}insertNode(p,m){cn(p,this._hostClassName)}drainQueuedTransitions(p){const m=[];return this._queue.forEach(M=>{const j=M.player;if(j.destroyed)return;const Q=M.element,he=this._elementListeners.get(Q);he&&he.forEach(ge=>{if(ge.name==M.triggerName){const Le=br(Q,M.triggerName,M.fromState.value,M.toState.value);Le._data=p,zn(M.player,ge.phase,Le,ge.callback)}}),j.markedForDestroy?this._engine.afterFlush(()=>{j.destroy()}):m.push(M)}),this._queue=[],m.sort((M,j)=>{const Q=M.transition.ast.depCount,he=j.transition.ast.depCount;return 0==Q||0==he?Q-he:this._engine.driver.containsElement(M.element,j.element)?1:-1})}destroy(p){this.players.forEach(m=>m.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,p)}elementContainsData(p){let m=!1;return this._elementListeners.has(p)&&(m=!0),m=!!this._queue.find(M=>M.element===p)||m,m}}class ns{constructor(p,m,M){this.bodyNode=p,this.driver=m,this._normalizer=M,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(j,Q)=>{}}_onRemovalComplete(p,m){this.onRemovalComplete(p,m)}get queuedPlayers(){const p=[];return this._namespaceList.forEach(m=>{m.players.forEach(M=>{M.queued&&p.push(M)})}),p}createNamespace(p,m){const M=new Ks(p,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(M,m):(this.newHostElements.set(m,M),this.collectEnterElement(m)),this._namespaceLookup[p]=M}_balanceNamespaceList(p,m){const M=this._namespaceList,j=this.namespacesByHostElement;if(M.length-1>=0){let he=!1,ge=this.driver.getParentElement(m);for(;ge;){const Le=j.get(ge);if(Le){const Je=M.indexOf(Le);M.splice(Je+1,0,p),he=!0;break}ge=this.driver.getParentElement(ge)}he||M.unshift(p)}else M.push(p);return j.set(m,p),p}register(p,m){let M=this._namespaceLookup[p];return M||(M=this.createNamespace(p,m)),M}registerTrigger(p,m,M){let j=this._namespaceLookup[p];j&&j.register(m,M)&&this.totalAnimations++}destroy(p,m){if(!p)return;const M=this._fetchNamespace(p);this.afterFlush(()=>{this.namespacesByHostElement.delete(M.hostElement),delete this._namespaceLookup[p];const j=this._namespaceList.indexOf(M);j>=0&&this._namespaceList.splice(j,1)}),this.afterFlushAnimationsDone(()=>M.destroy(m))}_fetchNamespace(p){return this._namespaceLookup[p]}fetchNamespacesByElement(p){const m=new Set,M=this.statesByElement.get(p);if(M)for(let j of M.values())if(j.namespaceId){const Q=this._fetchNamespace(j.namespaceId);Q&&m.add(Q)}return m}trigger(p,m,M,j){if(ls(m)){const Q=this._fetchNamespace(p);if(Q)return Q.trigger(m,M,j),!0}return!1}insertNode(p,m,M,j){if(!ls(m))return;const Q=m[vi];if(Q&&Q.setForRemoval){Q.setForRemoval=!1,Q.setForMove=!0;const he=this.collectedLeaveElements.indexOf(m);he>=0&&this.collectedLeaveElements.splice(he,1)}if(p){const he=this._fetchNamespace(p);he&&he.insertNode(m,M)}j&&this.collectEnterElement(m)}collectEnterElement(p){this.collectedEnterElements.push(p)}markElementAsDisabled(p,m){m?this.disabledNodes.has(p)||(this.disabledNodes.add(p),cn(p,Oi)):this.disabledNodes.has(p)&&(this.disabledNodes.delete(p),ys(p,Oi))}removeNode(p,m,M,j){if(ls(m)){const Q=p?this._fetchNamespace(p):null;if(Q?Q.removeNode(m,j):this.markElementAsRemoved(p,m,!1,j),M){const he=this.namespacesByHostElement.get(m);he&&he.id!==p&&he.removeNode(m,j)}}else this._onRemovalComplete(m,j)}markElementAsRemoved(p,m,M,j,Q){this.collectedLeaveElements.push(m),m[vi]={namespaceId:p,setForRemoval:j,hasAnimation:M,removedBeforeQueried:!1,previousTriggersValues:Q}}listen(p,m,M,j,Q){return ls(m)?this._fetchNamespace(p).listen(m,M,j,Q):()=>{}}_buildInstruction(p,m,M,j,Q){return p.transition.build(this.driver,p.element,p.fromState.value,p.toState.value,M,j,p.fromState.options,p.toState.options,m,Q)}destroyInnerAnimations(p){let m=this.driver.query(p,Gn,!0);m.forEach(M=>this.destroyActiveAnimationsForElement(M)),0!=this.playersByQueriedElement.size&&(m=this.driver.query(p,cr,!0),m.forEach(M=>this.finishActiveQueriedAnimationOnElement(M)))}destroyActiveAnimationsForElement(p){const m=this.playersByElement.get(p);m&&m.forEach(M=>{M.queued?M.markedForDestroy=!0:M.destroy()})}finishActiveQueriedAnimationOnElement(p){const m=this.playersByQueriedElement.get(p);m&&m.forEach(M=>M.finish())}whenRenderingDone(){return new Promise(p=>{if(this.players.length)return Dn(this.players).onDone(()=>p());p()})}processLeaveNode(p){var m;const M=p[vi];if(M&&M.setForRemoval){if(p[vi]=ms,M.namespaceId){this.destroyInnerAnimations(p);const j=this._fetchNamespace(M.namespaceId);j&&j.clearElementCache(p)}this._onRemovalComplete(p,M.setForRemoval)}null!==(m=p.classList)&&void 0!==m&&m.contains(Oi)&&this.markElementAsDisabled(p,!1),this.driver.query(p,".ng-animate-disabled",!0).forEach(j=>{this.markElementAsDisabled(j,!1)})}flush(p=-1){let m=[];if(this.newHostElements.size&&(this.newHostElements.forEach((M,j)=>this._balanceNamespaceList(M,j)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let M=0;M<this.collectedEnterElements.length;M++)cn(this.collectedEnterElements[M],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const M=[];try{m=this._flushAnimations(M,p)}finally{for(let j=0;j<M.length;j++)M[j]()}}else for(let M=0;M<this.collectedLeaveElements.length;M++)this.processLeaveNode(this.collectedLeaveElements[M]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(M=>M()),this._flushFns=[],this._whenQuietFns.length){const M=this._whenQuietFns;this._whenQuietFns=[],m.length?Dn(m).onDone(()=>{M.forEach(j=>j())}):M.forEach(j=>j())}}reportError(p){throw function Rn(S){return new z.vHH(3402,!1)}()}_flushAnimations(p,m){const M=new Ts,j=[],Q=new Map,he=[],ge=new Map,Le=new Map,Je=new Map,St=new Set;this.disabledNodes.forEach(Zt=>{St.add(Zt);const nn=this.driver.query(Zt,".ng-animate-queued",!0);for(let dn=0;dn<nn.length;dn++)St.add(nn[dn])});const jt=this.bodyNode,Pn=Array.from(this.statesByElement.keys()),Nn=Dr(Pn,this.collectedEnterElements),gn=new Map;let fn=0;Nn.forEach((Zt,nn)=>{const dn=bi+fn++;gn.set(nn,dn),Zt.forEach(er=>cn(er,dn))});const Jn=[],$n=new Set,wi=new Set;for(let Zt=0;Zt<this.collectedLeaveElements.length;Zt++){const nn=this.collectedLeaveElements[Zt],dn=nn[vi];dn&&dn.setForRemoval&&(Jn.push(nn),$n.add(nn),dn.hasAnimation?this.driver.query(nn,".ng-star-inserted",!0).forEach(er=>$n.add(er)):wi.add(nn))}const hr=new Map,Kr=Dr(Pn,Array.from($n));Kr.forEach((Zt,nn)=>{const dn=Ln+fn++;hr.set(nn,dn),Zt.forEach(er=>cn(er,dn))}),p.push(()=>{Nn.forEach((Zt,nn)=>{const dn=gn.get(nn);Zt.forEach(er=>ys(er,dn))}),Kr.forEach((Zt,nn)=>{const dn=hr.get(nn);Zt.forEach(er=>ys(er,dn))}),Jn.forEach(Zt=>{this.processLeaveNode(Zt)})});const Go=[],Ro=[];for(let Zt=this._namespaceList.length-1;Zt>=0;Zt--)this._namespaceList[Zt].drainQueuedTransitions(m).forEach(dn=>{const er=dn.player,pt=dn.element;if(Go.push(er),this.collectedEnterElements.length){const Ct=pt[vi];if(Ct&&Ct.setForMove){if(Ct.previousTriggersValues&&Ct.previousTriggersValues.has(dn.triggerName)){const Ye=Ct.previousTriggersValues.get(dn.triggerName),dt=this.statesByElement.get(dn.element);if(dt&&dt.has(dn.triggerName)){const Hr=dt.get(dn.triggerName);Hr.value=Ye,dt.set(dn.triggerName,Hr)}}return void er.destroy()}}const wr=!jt||!this.driver.containsElement(jt,pt),ti=hr.get(pt),Vr=gn.get(pt),Tt=this._buildInstruction(dn,M,Vr,ti,wr);if(Tt.errors&&Tt.errors.length)return void Ro.push(Tt);if(wr)return er.onStart(()=>An(pt,Tt.fromStyles)),er.onDestroy(()=>Gt(pt,Tt.toStyles)),void j.push(er);if(dn.isFallbackTransition)return er.onStart(()=>An(pt,Tt.fromStyles)),er.onDestroy(()=>Gt(pt,Tt.toStyles)),void j.push(er);const wn=[];Tt.timelines.forEach(Ct=>{Ct.stretchStartingKeyframe=!0,this.disabledNodes.has(Ct.element)||wn.push(Ct)}),Tt.timelines=wn,M.append(pt,Tt.timelines),he.push({instruction:Tt,player:er,element:pt}),Tt.queriedElements.forEach(Ct=>mr(ge,Ct,[]).push(er)),Tt.preStyleProps.forEach((Ct,Ye)=>{if(Ct.size){let dt=Le.get(Ye);dt||Le.set(Ye,dt=new Set),Ct.forEach((Hr,ba)=>dt.add(ba))}}),Tt.postStyleProps.forEach((Ct,Ye)=>{let dt=Je.get(Ye);dt||Je.set(Ye,dt=new Set),Ct.forEach((Hr,ba)=>dt.add(ba))})});if(Ro.length){const Zt=[];Ro.forEach(nn=>{Zt.push(function en(S,p){return new z.vHH(3505,!1)}())}),Go.forEach(nn=>nn.destroy()),this.reportError(Zt)}const ss=new Map,Es=new Map;he.forEach(Zt=>{const nn=Zt.element;M.has(nn)&&(Es.set(nn,nn),this._beforeAnimationBuild(Zt.player.namespaceId,Zt.instruction,ss))}),j.forEach(Zt=>{const nn=Zt.element;this._getPreviousPlayers(nn,!1,Zt.namespaceId,Zt.triggerName,null).forEach(er=>{mr(ss,nn,[]).push(er),er.destroy()})});const ea=Jn.filter(Zt=>Li(Zt,Le,Je)),Hi=new Map;is(Hi,this.driver,wi,Je,G.l3).forEach(Zt=>{Li(Zt,Le,Je)&&ea.push(Zt)});const io=new Map;Nn.forEach((Zt,nn)=>{is(io,this.driver,new Set(Zt),Le,G.k1)}),ea.forEach(Zt=>{var nn,dn;const er=Hi.get(Zt),pt=io.get(Zt);Hi.set(Zt,new Map([...Array.from(null!==(nn=er?.entries())&&void 0!==nn?nn:[]),...Array.from(null!==(dn=pt?.entries())&&void 0!==dn?dn:[])]))});const na=[],vo=[],vr={};he.forEach(Zt=>{const{element:nn,player:dn,instruction:er}=Zt;if(M.has(nn)){if(St.has(nn))return dn.onDestroy(()=>Gt(nn,er.toStyles)),dn.disabled=!0,dn.overrideTotalTime(er.totalTime),void j.push(dn);let pt=vr;if(Es.size>1){let ti=nn;const Vr=[];for(;ti=ti.parentNode;){const Tt=Es.get(ti);if(Tt){pt=Tt;break}Vr.push(ti)}Vr.forEach(Tt=>Es.set(Tt,pt))}const wr=this._buildAnimation(dn.namespaceId,er,ss,Q,io,Hi);if(dn.setRealPlayer(wr),pt===vr)na.push(dn);else{const ti=this.playersByElement.get(pt);ti&&ti.length&&(dn.parentPlayer=Dn(ti)),j.push(dn)}}else An(nn,er.fromStyles),dn.onDestroy(()=>Gt(nn,er.toStyles)),vo.push(dn),St.has(nn)&&j.push(dn)}),vo.forEach(Zt=>{const nn=Q.get(Zt.element);if(nn&&nn.length){const dn=Dn(nn);Zt.setRealPlayer(dn)}}),j.forEach(Zt=>{Zt.parentPlayer?Zt.syncPlayerEvents(Zt.parentPlayer):Zt.destroy()});for(let Zt=0;Zt<Jn.length;Zt++){const nn=Jn[Zt],dn=nn[vi];if(ys(nn,Ln),dn&&dn.hasAnimation)continue;let er=[];if(ge.size){let wr=ge.get(nn);wr&&wr.length&&er.push(...wr);let ti=this.driver.query(nn,cr,!0);for(let Vr=0;Vr<ti.length;Vr++){let Tt=ge.get(ti[Vr]);Tt&&Tt.length&&er.push(...Tt)}}const pt=er.filter(wr=>!wr.destroyed);pt.length?Ao(this,nn,pt):this.processLeaveNode(nn)}return Jn.length=0,na.forEach(Zt=>{this.players.push(Zt),Zt.onDone(()=>{Zt.destroy();const nn=this.players.indexOf(Zt);this.players.splice(nn,1)}),Zt.play()}),na}elementContainsData(p,m){let M=!1;const j=m[vi];return j&&j.setForRemoval&&(M=!0),this.playersByElement.has(m)&&(M=!0),this.playersByQueriedElement.has(m)&&(M=!0),this.statesByElement.has(m)&&(M=!0),this._fetchNamespace(p).elementContainsData(m)||M}afterFlush(p){this._flushFns.push(p)}afterFlushAnimationsDone(p){this._whenQuietFns.push(p)}_getPreviousPlayers(p,m,M,j,Q){let he=[];if(m){const ge=this.playersByQueriedElement.get(p);ge&&(he=ge)}else{const ge=this.playersByElement.get(p);if(ge){const Le=!Q||Q==Xn;ge.forEach(Je=>{Je.queued||!Le&&Je.triggerName!=j||he.push(Je)})}}return(M||j)&&(he=he.filter(ge=>!(M&&M!=ge.namespaceId||j&&j!=ge.triggerName))),he}_beforeAnimationBuild(p,m,M){const Q=m.element,he=m.isRemovalTransition?void 0:p,ge=m.isRemovalTransition?void 0:m.triggerName;for(const Le of m.timelines){const Je=Le.element,St=Je!==Q,jt=mr(M,Je,[]);this._getPreviousPlayers(Je,St,he,ge,m.toState).forEach(Nn=>{const gn=Nn.getRealPlayer();gn.beforeDestroy&&gn.beforeDestroy(),Nn.destroy(),jt.push(Nn)})}An(Q,m.fromStyles)}_buildAnimation(p,m,M,j,Q,he){const ge=m.triggerName,Le=m.element,Je=[],St=new Set,jt=new Set,Pn=m.timelines.map(gn=>{const fn=gn.element;St.add(fn);const Jn=fn[vi];if(Jn&&Jn.removedBeforeQueried)return new G.ZN(gn.duration,gn.delay);const $n=fn!==Le,wi=function Ms(S){const p=[];return qs(S,p),p}((M.get(fn)||fo).map(ss=>ss.getRealPlayer())).filter(ss=>!!ss.element&&ss.element===fn),hr=Q.get(fn),Kr=he.get(fn),Go=Ai(0,this._normalizer,0,gn.keyframes,hr,Kr),Ro=this._buildPlayer(gn,Go,wi);if(gn.subTimeline&&j&&jt.add(fn),$n){const ss=new mi(p,ge,fn);ss.setRealPlayer(Ro),Je.push(ss)}return Ro});Je.forEach(gn=>{mr(this.playersByQueriedElement,gn.element,[]).push(gn),gn.onDone(()=>function or(S,p,m){let M=S.get(p);if(M){if(M.length){const j=M.indexOf(m);M.splice(j,1)}0==M.length&&S.delete(p)}return M}(this.playersByQueriedElement,gn.element,gn))}),St.forEach(gn=>cn(gn,Mr));const Nn=Dn(Pn);return Nn.onDestroy(()=>{St.forEach(gn=>ys(gn,Mr)),Gt(Le,m.toStyles)}),jt.forEach(gn=>{mr(j,gn,[]).push(Nn)}),Nn}_buildPlayer(p,m,M){return m.length>0?this.driver.animate(p.element,m,p.duration,p.delay,p.easing,M):new G.ZN(p.duration,p.delay)}}class mi{constructor(p,m,M){this.namespaceId=p,this.triggerName=m,this.element=M,this._player=new G.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(p){this._containsRealPlayer||(this._player=p,this._queuedCallbacks.forEach((m,M)=>{m.forEach(j=>zn(p,M,void 0,j))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(p.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(p){this.totalTime=p}syncPlayerEvents(p){const m=this._player;m.triggerCallback&&p.onStart(()=>m.triggerCallback("start")),p.onDone(()=>this.finish()),p.onDestroy(()=>this.destroy())}_queueEvent(p,m){mr(this._queuedCallbacks,p,[]).push(m)}onDone(p){this.queued&&this._queueEvent("done",p),this._player.onDone(p)}onStart(p){this.queued&&this._queueEvent("start",p),this._player.onStart(p)}onDestroy(p){this.queued&&this._queueEvent("destroy",p),this._player.onDestroy(p)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(p){this.queued||this._player.setPosition(p)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(p){const m=this._player;m.triggerCallback&&m.triggerCallback(p)}}function ls(S){return S&&1===S.nodeType}function rs(S,p){const m=S.style.display;return S.style.display=p??"none",m}function is(S,p,m,M,j){const Q=[];m.forEach(Le=>Q.push(rs(Le)));const he=[];M.forEach((Le,Je)=>{const St=new Map;Le.forEach(jt=>{const Pn=p.computeStyle(Je,jt,j);St.set(jt,Pn),(!Pn||0==Pn.length)&&(Je[vi]=Fr,he.push(Je))}),S.set(Je,St)});let ge=0;return m.forEach(Le=>rs(Le,Q[ge++])),he}function Dr(S,p){const m=new Map;if(S.forEach(ge=>m.set(ge,[])),0==p.length)return m;const j=new Set(p),Q=new Map;function he(ge){if(!ge)return 1;let Le=Q.get(ge);if(Le)return Le;const Je=ge.parentNode;return Le=m.has(Je)?Je:j.has(Je)?1:he(Je),Q.set(ge,Le),Le}return p.forEach(ge=>{const Le=he(ge);1!==Le&&m.get(Le).push(ge)}),m}function cn(S,p){var m;null===(m=S.classList)||void 0===m||m.add(p)}function ys(S,p){var m;null===(m=S.classList)||void 0===m||m.remove(p)}function Ao(S,p,m){Dn(m).onDone(()=>S.processLeaveNode(p))}function qs(S,p){for(let m=0;m<S.length;m++){const M=S[m];M instanceof G.ZE?qs(M.players,p):p.push(M)}}function Li(S,p,m){const M=m.get(S);if(!M)return!1;let j=p.get(S);return j?M.forEach(Q=>j.add(Q)):p.set(S,M),m.delete(S),!0}class po{constructor(p,m,M){this.bodyNode=p,this._driver=m,this._normalizer=M,this._triggerCache={},this.onRemovalComplete=(j,Q)=>{},this._transitionEngine=new ns(p,m,M),this._timelineEngine=new us(p,m,M),this._transitionEngine.onRemovalComplete=(j,Q)=>this.onRemovalComplete(j,Q)}registerTrigger(p,m,M,j,Q){const he=p+"-"+j;let ge=this._triggerCache[he];if(!ge){const Le=[],St=Si(this._driver,Q,Le,[]);if(Le.length)throw function ce(S,p){return new z.vHH(3404,!1)}();ge=function As(S,p,m){return new zs(S,p,m)}(j,St,this._normalizer),this._triggerCache[he]=ge}this._transitionEngine.registerTrigger(m,j,ge)}register(p,m){this._transitionEngine.register(p,m)}destroy(p,m){this._transitionEngine.destroy(p,m)}onInsert(p,m,M,j){this._transitionEngine.insertNode(p,m,M,j)}onRemove(p,m,M,j){this._transitionEngine.removeNode(p,m,j||!1,M)}disableAnimations(p,m){this._transitionEngine.markElementAsDisabled(p,m)}process(p,m,M,j){if("@"==M.charAt(0)){const[Q,he]=jr(M);this._timelineEngine.command(Q,m,he,j)}else this._transitionEngine.trigger(p,m,M,j)}listen(p,m,M,j,Q){if("@"==M.charAt(0)){const[he,ge]=jr(M);return this._timelineEngine.listen(he,m,ge,Q)}return this._transitionEngine.listen(p,m,M,j,Q)}flush(p=-1){this._transitionEngine.flush(p)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ht=(()=>{class S{constructor(m,M,j){this._element=m,this._startStyles=M,this._endStyles=j,this._state=0;let Q=S.initialStylesByElement.get(m);Q||S.initialStylesByElement.set(m,Q=new Map),this._initialStyles=Q}start(){this._state<1&&(this._startStyles&&Gt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Gt(this._element,this._initialStyles),this._endStyles&&(Gt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(S.initialStylesByElement.delete(this._element),this._startStyles&&(An(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(An(this._element,this._endStyles),this._endStyles=null),Gt(this._element,this._initialStyles),this._state=3)}}return S.initialStylesByElement=new WeakMap,S})();function Hn(S){let p=null;return S.forEach((m,M)=>{(function mo(S){return"display"===S||"position"===S})(M)&&(p=p||new Map,p.set(M,m))}),p}class yo{constructor(p,m,M,j){this.element=p,this.keyframes=m,this.options=M,this._specialStyles=j,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=M.duration,this._delay=M.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(p=>p()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const p=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,p,this.options),this._finalKeyframe=p.length?p[p.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(p){const m=[];return p.forEach(M=>{m.push(Object.fromEntries(M))}),m}_triggerWebAnimation(p,m,M){return p.animate(this._convertKeyframesToObject(m),M)}onStart(p){this._originalOnStartFns.push(p),this._onStartFns.push(p)}onDone(p){this._originalOnDoneFns.push(p),this._onDoneFns.push(p)}onDestroy(p){this._onDestroyFns.push(p)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(p=>p()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(p=>p()),this._onDestroyFns=[])}setPosition(p){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=p*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const p=new Map;this.hasStarted()&&this._finalKeyframe.forEach((M,j)=>{"offset"!==j&&p.set(j,this._finished?M:Ti(this.element,j))}),this.currentSnapshot=p}triggerCallback(p){const m="start"===p?this._onStartFns:this._onDoneFns;m.forEach(M=>M()),m.length=0}}class B{validateStyleProperty(p){return!0}validateAnimatableStyleProperty(p){return!0}matchesElement(p,m){return!1}containsElement(p,m){return ir(p,m)}getParentElement(p){return Lt(p)}query(p,m,M){return Xt(p,m,M)}computeStyle(p,m,M){return window.getComputedStyle(p)[m]}animate(p,m,M,j,Q,he=[]){const Le={duration:M,delay:j,fill:0==j?"both":"forwards"};Q&&(Le.easing=Q);const Je=new Map,St=he.filter(Nn=>Nn instanceof yo);(function tn(S,p){return 0===S||0===p})(M,j)&&St.forEach(Nn=>{Nn.currentSnapshot.forEach((gn,fn)=>Je.set(fn,gn))});let jt=function ye(S){return S.length?S[0]instanceof Map?S:S.map(p=>oe(p)):[]}(m).map(Nn=>nt(Nn));jt=function Tn(S,p,m){if(m.size&&p.length){let M=p[0],j=[];if(m.forEach((Q,he)=>{M.has(he)||j.push(he),M.set(he,Q)}),j.length)for(let Q=1;Q<p.length;Q++){let he=p[Q];j.forEach(ge=>he.set(ge,Ti(S,ge)))}}return p}(p,jt,Je);const Pn=function go(S,p){let m=null,M=null;return Array.isArray(p)&&p.length?(m=Hn(p[0]),p.length>1&&(M=Hn(p[p.length-1]))):p instanceof Map&&(m=Hn(p)),m||M?new ht(S,m,M):null}(p,jt);return new yo(p,jt,Le,Pn)}}var k=F(6895);let X=(()=>{class S extends G._j{constructor(m,M){super(),this._nextAnimationId=0,this._renderer=m.createRenderer(M.body,{id:"0",encapsulation:z.ifc.None,styles:[],data:{animation:[]}})}build(m){const M=this._nextAnimationId.toString();this._nextAnimationId++;const j=Array.isArray(m)?(0,G.vP)(m):m;return Ze(this._renderer,null,M,"register",[j]),new fe(M,this._renderer)}}return S.\u0275fac=function(m){return new(m||S)(z.LFG(z.FYo),z.LFG(k.K0))},S.\u0275prov=z.Yz7({token:S,factory:S.\u0275fac}),S})();class fe extends G.LC{constructor(p,m){super(),this._id=p,this._renderer=m}create(p,m){return new Ne(this._id,p,m||{},this._renderer)}}class Ne{constructor(p,m,M,j){this.id=p,this.element=m,this._renderer=j,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",M)}_listen(p,m){return this._renderer.listen(this.element,`@@${this.id}:${p}`,m)}_command(p,...m){return Ze(this._renderer,this.element,this.id,p,m)}onDone(p){this._listen("done",p)}onStart(p){this._listen("start",p)}onDestroy(p){this._listen("destroy",p)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(p){this._command("setPosition",p)}getPosition(){var p,m;return null!==(p=null===(m=this._renderer.engine.players[+this.id])||void 0===m?void 0:m.getPosition())&&void 0!==p?p:0}}function Ze(S,p,m,M,j){return S.setProperty(p,`@@${m}:${M}`,j)}const Kt="@.disabled";let Bt=(()=>{class S{constructor(m,M,j){this.delegate=m,this.engine=M,this._zone=j,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),M.onRemovalComplete=(Q,he)=>{const ge=he?.parentNode(Q);ge&&he.removeChild(ge,Q)}}createRenderer(m,M){const Q=this.delegate.createRenderer(m,M);if(!(m&&M&&M.data&&M.data.animation)){let St=this._rendererCache.get(Q);return St||(St=new Bn("",Q,this.engine),this._rendererCache.set(Q,St)),St}const he=M.id,ge=M.id+"-"+this._currentId;this._currentId++,this.engine.register(ge,m);const Le=St=>{Array.isArray(St)?St.forEach(Le):this.engine.registerTrigger(he,ge,m,St.name,St)};return M.data.animation.forEach(Le),new hn(this,ge,Q,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(m,M,j){m>=0&&m<this._microtaskId?this._zone.run(()=>M(j)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Q=>{const[he,ge]=Q;he(ge)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([M,j]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return S.\u0275fac=function(m){return new(m||S)(z.LFG(z.FYo),z.LFG(po),z.LFG(z.R0b))},S.\u0275prov=z.Yz7({token:S,factory:S.\u0275fac}),S})();class Bn{constructor(p,m,M){this.namespaceId=p,this.delegate=m,this.engine=M,this.destroyNode=this.delegate.destroyNode?j=>m.destroyNode(j):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(p,m){return this.delegate.createElement(p,m)}createComment(p){return this.delegate.createComment(p)}createText(p){return this.delegate.createText(p)}appendChild(p,m){this.delegate.appendChild(p,m),this.engine.onInsert(this.namespaceId,m,p,!1)}insertBefore(p,m,M,j=!0){this.delegate.insertBefore(p,m,M),this.engine.onInsert(this.namespaceId,m,p,j)}removeChild(p,m,M){this.engine.onRemove(this.namespaceId,m,this.delegate,M)}selectRootElement(p,m){return this.delegate.selectRootElement(p,m)}parentNode(p){return this.delegate.parentNode(p)}nextSibling(p){return this.delegate.nextSibling(p)}setAttribute(p,m,M,j){this.delegate.setAttribute(p,m,M,j)}removeAttribute(p,m,M){this.delegate.removeAttribute(p,m,M)}addClass(p,m){this.delegate.addClass(p,m)}removeClass(p,m){this.delegate.removeClass(p,m)}setStyle(p,m,M,j){this.delegate.setStyle(p,m,M,j)}removeStyle(p,m,M){this.delegate.removeStyle(p,m,M)}setProperty(p,m,M){"@"==m.charAt(0)&&m==Kt?this.disableAnimations(p,!!M):this.delegate.setProperty(p,m,M)}setValue(p,m){this.delegate.setValue(p,m)}listen(p,m,M){return this.delegate.listen(p,m,M)}disableAnimations(p,m){this.engine.disableAnimations(p,m)}}class hn extends Bn{constructor(p,m,M,j){super(m,M,j),this.factory=p,this.namespaceId=m}setProperty(p,m,M){"@"==m.charAt(0)?"."==m.charAt(1)&&m==Kt?this.disableAnimations(p,M=void 0===M||!!M):this.engine.process(this.namespaceId,p,m.slice(1),M):this.delegate.setProperty(p,m,M)}listen(p,m,M){if("@"==m.charAt(0)){const j=function ar(S){switch(S){case"body":return document.body;case"document":return document;case"window":return window;default:return S}}(p);let Q=m.slice(1),he="";return"@"!=Q.charAt(0)&&([Q,he]=function Ur(S){const p=S.indexOf(".");return[S.substring(0,p),S.slice(p+1)]}(Q)),this.engine.listen(this.namespaceId,j,Q,he,ge=>{this.factory.scheduleListenerCallback(ge._data||-1,M,ge)})}return this.delegate.listen(p,m,M)}}const Br=[{provide:G._j,useClass:X},{provide:Bi,useFactory:function Ar(){return new Qi}},{provide:po,useClass:(()=>{class S extends po{constructor(m,M,j,Q){super(m.body,M,j)}ngOnDestroy(){this.flush()}}return S.\u0275fac=function(m){return new(m||S)(z.LFG(k.K0),z.LFG(Wt),z.LFG(Bi),z.LFG(z.z2F))},S.\u0275prov=z.Yz7({token:S,factory:S.\u0275fac}),S})()},{provide:z.FYo,useFactory:function _s(S,p,m){return new Bt(S,p,m)},deps:[E.se,po,z.R0b]}],Rs=[{provide:Wt,useFactory:()=>new B},{provide:z.QbO,useValue:"BrowserAnimations"},...Br],ji=[{provide:Wt,useClass:bn},{provide:z.QbO,useValue:"NoopAnimations"},...Br];let ui=(()=>{class S{static withConfig(m){return{ngModule:S,providers:m.disableAnimations?ji:Rs}}}return S.\u0275fac=function(m){return new(m||S)},S.\u0275mod=z.oAB({type:S}),S.\u0275inj=z.cJS({providers:Rs,imports:[E.b2]}),S})();var Ei=F(9379);const Vs=[{path:"portal",loadChildren:()=>Promise.all([F.e(992),F.e(607)]).then(F.bind(F,607)).then(S=>S.PortalModule)},{path:"",loadChildren:()=>Promise.all([F.e(992),F.e(878)]).then(F.bind(F,878)).then(S=>S.BusinessModule)}];let ro=(()=>{class S{}return S.\u0275fac=function(m){return new(m||S)},S.\u0275mod=z.oAB({type:S}),S.\u0275inj=z.cJS({imports:[Ei.Bz.forRoot(Vs),Ei.Bz]}),S})(),Jo=(()=>{class S{constructor(){}}return S.\u0275fac=function(m){return new(m||S)},S.\u0275cmp=z.Xpm({type:S,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"site"]],template:function(m,M){1&m&&(z.TgZ(0,"div",0),z._UZ(1,"router-outlet"),z.qZA())},dependencies:[Ei.lC],styles:[".site[_ngcontent-%COMP%]{overflow-x:hidden}"]}),S})();var Mo=F(2011),_o=F(7407),A=F(3385),$=F(4585);const x_firebaseConfig={apiKey:"AIzaSyCKXG8CCr_9nqB7Qlup5VU5HgD4niJhN9I",authDomain:"solarcardatabase.firebaseapp.com",databaseURL:"https://solarcardatabase.firebaseio.com",projectId:"solarcardatabase",storageBucket:"solarcardatabase.appspot.com",messagingSenderId:"188569717520",appId:"1:188569717520:web:7891916923765620a47395",measurementId:"G-FR63XJDZHP"};let W=(()=>{class S{}return S.\u0275fac=function(m){return new(m||S)},S.\u0275mod=z.oAB({type:S,bootstrap:[Jo]}),S.\u0275inj=z.cJS({providers:[{provide:_o.L6,useValue:{host:"localhost:8080",ssl:!1}},{provide:A.L6,useValue:{host:"localhost:9099",ssl:!1}}],imports:[E.b2,ui,ro,Mo.hO.initializeApp(x_firebaseConfig),_o.yb,A.ww,$.TE]}),S})();E.q6().bootstrapModule(W).catch(S=>console.error(S))},5867:(Rt,Ue,F)=>{"use strict";F.d(Ue,{C6:()=>E.getApps,Mq:()=>E.getApp});var E=F(9681);(0,E.registerVersion)("firebase","9.11.0","app")},127:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Z:()=>E.Z});var E=F(3942);E.Z.registerVersion("firebase","9.11.0","app-compat")},3704:(Rt,Ue,F)=>{"use strict";F.r(Ue);var E=F(5861),z=F(3942),G=F(2090),me=F(9681),_e=F(1877),ve=F(655),be=F(4859);const Ge=function it(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ct=function Xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new _e.Yd("@firebase/auth");function Ot(y,...c){De.logLevel<=_e.in.ERROR&&De.error(`Auth (${me.SDK_VERSION}): ${y}`,...c)}function $e(y,...c){throw It(y,...c)}function Ie(y,...c){return It(y,...c)}function ke(y,c,f){const w=Object.assign(Object.assign({},ct()),{[c]:f});return new G.LL("auth","Firebase",w).create(c,{appName:y.name})}function ot(y,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&$e(y,"argument-error"),ke(y,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function It(y,...c){if("string"!=typeof y){const f=c[0],w=[...c.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(f,...w)}return ze.create(y,...c)}function ne(y,c,...f){if(!y)throw It(c,...f)}function Qe(y){const c="INTERNAL ASSERTION FAILED: "+y;throw Ot(c),new Error(c)}function ce(y,c){y||Qe(c)}const Me=new Map;function Ve(y){ce(y instanceof Function,"Expected a class definition");let c=Me.get(y);return c?(ce(c instanceof y,"Instance stored in cache mismatched with class"),c):(c=new y,Me.set(y,c),c)}function mt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Yt(){return"http:"===On()||"https:"===On()}function On(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Rn{constructor(c,f){this.shortDelay=c,this.longDelay=f,ce(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function pn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Yt()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rn(y,c){ce(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class en{static initialize(c,f,w){this.fetchImpl=c,f&&(this.headersImpl=f),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Sr=new Rn(3e4,6e4);function In(y,c){return y.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:y.tenantId}):c}function Dn(y,c,f,w){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,E.Z)(function*(y,c,f,w,V={}){return zn(y,V,(0,E.Z)(function*(){let Y={},Ae={};w&&("GET"===c?Ae=w:Y={body:JSON.stringify(w)});const rt=(0,G.xO)(Object.assign({key:y.config.apiKey},Ae)).slice(1),Ut=yield y._getAdditionalHeaders();return Ut["Content-Type"]="application/json",y.languageCode&&(Ut["X-Firebase-Locale"]=y.languageCode),en.fetch()(jr(y,y.config.apiHost,f,rt),Object.assign({method:c,headers:Ut,referrerPolicy:"no-referrer"},Y))}))})).apply(this,arguments)}function zn(y,c,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,E.Z)(function*(y,c,f){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Mt),c);try{const V=new xn(y),Y=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const Ae=yield Y.json();if("needConfirmation"in Ae)throw _n(y,"account-exists-with-different-credential",Ae);if(Y.ok&&!("errorMessage"in Ae))return Ae;{const rt=Y.ok?Ae.errorMessage:Ae.error.message,[Ut,on]=rt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ut)throw _n(y,"credential-already-in-use",Ae);if("EMAIL_EXISTS"===Ut)throw _n(y,"email-already-in-use",Ae);if("USER_DISABLED"===Ut)throw _n(y,"user-disabled",Ae);const jn=w[Ut]||Ut.toLowerCase().replace(/[_\s]+/g,"-");if(on)throw ke(y,jn,on);$e(y,jn)}}catch(V){if(V instanceof G.ZR)throw V;$e(y,"network-request-failed")}})).apply(this,arguments)}function br(y,c,f,w){return mr.apply(this,arguments)}function mr(){return(mr=(0,E.Z)(function*(y,c,f,w,V={}){const Y=yield Dn(y,c,f,w,V);return"mfaPendingCredential"in Y&&$e(y,"multi-factor-auth-required",{_serverResponse:Y}),Y})).apply(this,arguments)}function jr(y,c,f,w){const V=`${c}${f}?${w}`;return y.config.emulator?rn(y.config,V):`${y.config.apiScheme}://${V}`}class xn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,w)=>{this.timer=setTimeout(()=>w(Ie(this.auth,"network-request-failed")),Sr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _n(y,c,f){const w={appName:y.name};f.email&&(w.email=f.email),f.phoneNumber&&(w.phoneNumber=f.phoneNumber);const V=Ie(y,c,w);return V.customData._tokenResponse=f,V}function Lt(){return(Lt=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Gr(y,c){return hi.apply(this,arguments)}function hi(){return(hi=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Tr(y,c){return ri.apply(this,arguments)}function ri(){return(ri=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function qi(y){if(y)try{const c=new Date(Number(y));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ir(){return(ir=(0,E.Z)(function*(y,c=!1){const f=(0,G.m9)(y),w=yield f.getIdToken(c),V=zt(w);ne(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const Y="object"==typeof V.firebase?V.firebase:void 0,Ae=Y?.sign_in_provider;return{claims:V,token:w,authTime:qi(Xt(V.auth_time)),issuedAtTime:qi(Xt(V.iat)),expirationTime:qi(Xt(V.exp)),signInProvider:Ae||null,signInSecondFactor:Y?.sign_in_second_factor||null}})).apply(this,arguments)}function Xt(y){return 1e3*Number(y)}function zt(y){var c;const[f,w,V]=y.split(".");if(void 0===f||void 0===w||void 0===V)return Ot("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,G.tV)(w);return Y?JSON.parse(Y):(Ot("Failed to decode base64 JWT payload"),null)}catch(Y){return Ot("Caught error parsing JWT payload as JSON",null===(c=Y)||void 0===c?void 0:c.toString()),null}}function Wt(y,c){return lr.apply(this,arguments)}function lr(){return(lr=(0,E.Z)(function*(y,c,f=!1){if(f)return c;try{return yield c}catch(w){throw w instanceof G.ZR&&zr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function zr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class un{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const w=this.getInterval(c);this.timerId=setTimeout((0,E.Z)(function*(){yield f.iteration()}),w)}iteration(){var c=this;return(0,E.Z)(function*(){var f;try{yield c.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(f=w)||void 0===f?void 0:f.code)&&c.schedule(!0))}c.schedule()})()}}class bi{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=qi(this.lastLoginAt),this.creationTime=qi(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ln(y){return fi.apply(this,arguments)}function fi(){return(fi=(0,E.Z)(function*(y){var c;const f=y.auth,w=yield y.getIdToken(),V=yield Wt(y,Tr(f,{idToken:w}));ne(V?.users.length,f,"internal-error");const Y=V.users[0];y._notifyReloadListener(Y);const Ae=null!==(c=Y.providerUserInfo)&&void 0!==c&&c.length?kt(Y.providerUserInfo):[],rt=cr(y.providerData,Ae),jn=!!y.isAnonymous&&!(y.email&&Y.passwordHash||rt?.length),an={uid:Y.localId,displayName:Y.displayName||null,photoURL:Y.photoUrl||null,email:Y.email||null,emailVerified:Y.emailVerified||!1,phoneNumber:Y.phoneNumber||null,tenantId:Y.tenantId||null,providerData:rt,metadata:new bi(Y.createdAt,Y.lastLoginAt),isAnonymous:jn};Object.assign(y,an)})).apply(this,arguments)}function Mr(){return(Mr=(0,E.Z)(function*(y){const c=(0,G.m9)(y);yield Ln(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function cr(y,c){return[...y.filter(w=>!c.some(V=>V.providerId===w.providerId)),...c]}function kt(y){return y.map(c=>{var{providerId:f}=c,w=(0,ve._T)(c,["providerId"]);return{providerId:f,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function $t(){return($t=(0,E.Z)(function*(y,c){const f=yield zn(y,{},(0,E.Z)(function*(){const w=(0,G.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:V,apiKey:Y}=y.config,Ae=jr(y,V,"/v1/token",`key=${Y}`),rt=yield y._getAdditionalHeaders();return rt["Content-Type"]="application/x-www-form-urlencoded",en.fetch()(Ae,{method:"POST",headers:rt,body:w})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ne(c.idToken,"internal-error"),ne(typeof c.idToken<"u","internal-error"),ne(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function bn(y){const c=zt(y);return ne(c,"internal-error"),ne(typeof c.exp<"u","internal-error"),ne(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var w=this;return(0,E.Z)(function*(){return ne(!w.accessToken||w.refreshToken,c,"user-token-expired"),f||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(c,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var w=this;return(0,E.Z)(function*(){const{accessToken:V,refreshToken:Y,expiresIn:Ae}=yield function ut(y,c){return $t.apply(this,arguments)}(c,f);w.updateTokensAndExpiration(V,Y,Number(Ae))})()}updateTokensAndExpiration(c,f,w){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(c,f){const{refreshToken:w,accessToken:V,expirationTime:Y}=f,Ae=new ln;return w&&(ne("string"==typeof w,"internal-error",{appName:c}),Ae.refreshToken=w),V&&(ne("string"==typeof V,"internal-error",{appName:c}),Ae.accessToken=V),Y&&(ne("number"==typeof Y,"internal-error",{appName:c}),Ae.expirationTime=Y),Ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new ln,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function Jt(y,c){ne("string"==typeof y||typeof y>"u","internal-error",{appName:c})}class oe{constructor(c){var{uid:f,auth:w,stsTokenManager:V}=c,Y=(0,ve._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=w,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=Y.displayName||null,this.email=Y.email||null,this.emailVerified=Y.emailVerified||!1,this.phoneNumber=Y.phoneNumber||null,this.photoURL=Y.photoURL||null,this.isAnonymous=Y.isAnonymous||!1,this.tenantId=Y.tenantId||null,this.providerData=Y.providerData?[...Y.providerData]:[],this.metadata=new bi(Y.createdAt||void 0,Y.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,E.Z)(function*(){const w=yield Wt(f,f.stsTokenManager.getToken(f.auth,c));return ne(w,f.auth,"internal-error"),f.accessToken!==w&&(f.accessToken=w,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),w})()}getIdTokenResult(c){return function Nr(y){return ir.apply(this,arguments)}(this,c)}reload(){return function Gn(y){return Mr.apply(this,arguments)}(this)}_assign(c){this!==c&&(ne(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new oe(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var w=this;return(0,E.Z)(function*(){let V=!1;c.idToken&&c.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(c),V=!0),f&&(yield Ln(w)),yield w.auth._persistUserIfCurrent(w),V&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var c=this;return(0,E.Z)(function*(){const f=yield c.getIdToken();return yield Wt(c,function Wn(y,c){return Lt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var w,V,Y,Ae,rt,Ut,on,jn;const an=null!==(w=f.displayName)&&void 0!==w?w:void 0,js=null!==(V=f.email)&&void 0!==V?V:void 0,qo=null!==(Y=f.phoneNumber)&&void 0!==Y?Y:void 0,ga=null!==(Ae=f.photoURL)&&void 0!==Ae?Ae:void 0,Th=null!==(rt=f.tenantId)&&void 0!==rt?rt:void 0,fu=null!==(Ut=f._redirectEventId)&&void 0!==Ut?Ut:void 0,Sh=null!==(on=f.createdAt)&&void 0!==on?on:void 0,Wf=null!==(jn=f.lastLoginAt)&&void 0!==jn?jn:void 0,{uid:Ch,emailVerified:Kf,isAnonymous:qf,providerData:pd,stsTokenManager:gd}=f;ne(Ch&&gd,c,"internal-error");const md=ln.fromJSON(this.name,gd);ne("string"==typeof Ch,c,"internal-error"),Jt(an,c.name),Jt(js,c.name),ne("boolean"==typeof Kf,c,"internal-error"),ne("boolean"==typeof qf,c,"internal-error"),Jt(qo,c.name),Jt(ga,c.name),Jt(Th,c.name),Jt(fu,c.name),Jt(Sh,c.name),Jt(Wf,c.name);const fc=new oe({uid:Ch,auth:c,email:js,emailVerified:Kf,displayName:an,isAnonymous:qf,photoURL:ga,phoneNumber:qo,tenantId:Th,stsTokenManager:md,createdAt:Sh,lastLoginAt:Wf});return pd&&Array.isArray(pd)&&(fc.providerData=pd.map(Ah=>Object.assign({},Ah))),fu&&(fc._redirectEventId=fu),fc}static _fromIdTokenResponse(c,f,w=!1){return(0,E.Z)(function*(){const V=new ln;V.updateFromServerResponse(f);const Y=new oe({uid:f.localId,auth:c,stsTokenManager:V,isAnonymous:w});return yield Ln(Y),Y})()}}const Ce=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(f,w){var V=this;return(0,E.Z)(function*(){V.storage[f]=w})()}_get(f){var w=this;return(0,E.Z)(function*(){const V=w.storage[f];return void 0===V?null:V})()}_remove(f){var w=this;return(0,E.Z)(function*(){delete w.storage[f]})()}_addListener(f,w){}_removeListener(f,w){}}return y.type="NONE",y})();function nt(y,c,f){return`firebase:${y}:${c}:${f}`}class je{constructor(c,f,w){this.persistence=c,this.auth=f,this.userKey=w;const{config:V,name:Y}=this.auth;this.fullUserKey=nt(this.userKey,V.apiKey,Y),this.fullPersistenceKey=nt("persistence",V.apiKey,Y),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,E.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?oe._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,E.Z)(function*(){if(f.persistence===c)return;const w=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,w?f.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,w="authUser"){return(0,E.Z)(function*(){if(!f.length)return new je(Ve(Ce),c,w);const V=(yield Promise.all(f.map(function(){var on=(0,E.Z)(function*(jn){if(yield jn._isAvailable())return jn});return function(jn){return on.apply(this,arguments)}}()))).filter(on=>on);let Y=V[0]||Ve(Ce);const Ae=nt(w,c.config.apiKey,c.name);let rt=null;for(const on of f)try{const jn=yield on._get(Ae);if(jn){const an=oe._fromJSON(c,jn);on!==Y&&(rt=an),Y=on;break}}catch{}const Ut=V.filter(on=>on._shouldAllowMigration);return Y._shouldAllowMigration&&Ut.length?(Y=Ut[0],rt&&(yield Y._set(Ae,rt.toJSON())),yield Promise.all(f.map(function(){var on=(0,E.Z)(function*(jn){if(jn!==Y)try{yield jn._remove(Ae)}catch{}});return function(jn){return on.apply(this,arguments)}}())),new je(Y,c,w)):new je(Y,c,w)})()}}function Dt(y){const c=y.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(sr(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Gt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ie(c))return"Blackberry";if(ae(c))return"Webos";if(An(c))return"Safari";if((c.includes("chrome/")||dr(c))&&!c.includes("edge/"))return"Chrome";if(nr(c))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Gt(y=(0,G.z$)()){return/firefox\//i.test(y)}function An(y=(0,G.z$)()){const c=y.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function dr(y=(0,G.z$)()){return/crios\//i.test(y)}function sr(y=(0,G.z$)()){return/iemobile/i.test(y)}function nr(y=(0,G.z$)()){return/android/i.test(y)}function ie(y=(0,G.z$)()){return/blackberry/i.test(y)}function ae(y=(0,G.z$)()){return/webos/i.test(y)}function ee(y=(0,G.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function tn(y=(0,G.z$)()){return ee(y)||nr(y)||ae(y)||ie(y)||/windows phone/i.test(y)||sr(y)}function Kn(y,c=[]){let f;switch(y){case"Browser":f=Dt((0,G.z$)());break;case"Worker":f=`${Dt((0,G.z$)())}-${y}`;break;default:f=y}const w=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${me.SDK_VERSION}/${w}`}class Ti{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const w=Y=>new Promise((Ae,rt)=>{try{Ae(c(Y))}catch(Ut){rt(Ut)}});w.onAbort=f,this.queue.push(w);const V=this.queue.length-1;return()=>{this.queue[V]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,E.Z)(function*(){var w;if(f.auth.currentUser===c)return;const V=[];try{for(const Y of f.queue)yield Y(c),Y.onAbort&&V.push(Y.onAbort)}catch(Y){V.reverse();for(const Ae of V)try{Ae()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=Y)||void 0===w?void 0:w.message})}})()}}class vn{constructor(c,f,w){this.app=c,this.heartbeatServiceProvider=f,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hs(this),this.idTokenSubscription=new hs(this),this.beforeStateQueue=new Ti(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(c,f){var w=this;return f&&(this._popupRedirectResolver=Ve(f)),this._initializationPromise=this.queue((0,E.Z)(function*(){var V,Y;if(!w._deleted&&(w.persistenceManager=yield je.create(w,c),!w._deleted)){if(null!==(V=w._popupRedirectResolver)&&void 0!==V&&V._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(f),w.lastNotifiedUid=(null===(Y=w.currentUser)||void 0===Y?void 0:Y.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,E.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,E.Z)(function*(){var w;const V=yield f.assertedPersistence.getCurrentUser();let Y=V,Ae=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const rt=null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId,Ut=Y?._redirectEventId,on=yield f.tryRedirectSignIn(c);(!rt||rt===Ut)&&on?.user&&(Y=on.user,Ae=!0)}if(!Y)return f.directlySetCurrentUser(null);if(!Y._redirectEventId){if(Ae)try{yield f.beforeStateQueue.runMiddleware(Y)}catch(rt){Y=V,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(rt))}return Y?f.reloadAndSetCurrentUserOrClear(Y):f.directlySetCurrentUser(null)}return ne(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===Y._redirectEventId?f.directlySetCurrentUser(Y):f.reloadAndSetCurrentUserOrClear(Y)})()}tryRedirectSignIn(c){var f=this;return(0,E.Z)(function*(){let w=null;try{w=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,E.Z)(function*(){var w;try{yield Ln(c)}catch(V){if("auth/network-request-failed"!==(null===(w=V)||void 0===w?void 0:w.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Et(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var c=this;return(0,E.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,E.Z)(function*(){const w=c?(0,G.m9)(c):null;return w&&ne(w.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(w&&w._clone(f))})()}_updateCurrentUser(c,f=!1){var w=this;return(0,E.Z)(function*(){if(!w._deleted)return c&&ne(w.tenantId===c.tenantId,w,"tenant-id-mismatch"),f||(yield w.beforeStateQueue.runMiddleware(c)),w.queue((0,E.Z)(function*(){yield w.directlySetCurrentUser(c),w.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,E.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,E.Z)(function*(){yield f.assertedPersistence.setPersistence(Ve(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new G.LL("auth","Firebase",c())}onAuthStateChanged(c,f,w){return this.registerStateListener(this.authStateSubscription,c,f,w)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,w){return this.registerStateListener(this.idTokenSubscription,c,f,w)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var w=this;return(0,E.Z)(function*(){const V=yield w.getOrInitRedirectPersistenceManager(f);return null===c?V.removeCurrentUser():V.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,E.Z)(function*(){if(!f.redirectPersistenceManager){const w=c&&Ve(c)||f._popupRedirectResolver;ne(w,f,"argument-error"),f.redirectPersistenceManager=yield je.create(f,[Ve(w._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,E.Z)(function*(){var w,V;return f._isInitialized&&(yield f.queue((0,E.Z)(function*(){}))),(null===(w=f._currentUser)||void 0===w?void 0:w._redirectEventId)===c?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,E.Z)(function*(){if(c===f.currentUser)return f.queue((0,E.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,w,V){if(this._deleted)return()=>{};const Y="function"==typeof f?f:f.next.bind(f),Ae=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(Ae,this,"internal-error"),Ae.then(()=>Y(this.currentUser)),"function"==typeof f?c.addObserver(f,w,V):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,E.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Kn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,E.Z)(function*(){var f;const w={"X-Client-Version":c.clientVersion};c.app.options.appId&&(w["X-Firebase-gmpid"]=c.app.options.appId);const V=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(w["X-Firebase-Client"]=V),w})()}}function rr(y){return(0,G.m9)(y)}class hs{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,G.ne)(f=>this.observer=f)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ni(y){const c=y.indexOf(":");return c<0?"":y.substr(0,c+1)}function Fs(y){if(!y)return null;const c=Number(y);return isNaN(c)?null:c}class Qr{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return Qe("not implemented")}_getIdTokenResponse(c){return Qe("not implemented")}_linkToIdToken(c,f){return Qe("not implemented")}_getReauthenticationResolver(c){return Qe("not implemented")}}function Xr(y,c){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:resetPassword",In(y,c))})).apply(this,arguments)}function Qn(y,c){return fs.apply(this,arguments)}function fs(){return(fs=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ds(y,c){return bs.apply(this,arguments)}function bs(){return(bs=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:update",In(y,c))})).apply(this,arguments)}function Si(){return(Si=(0,E.Z)(function*(y,c){return br(y,"POST","/v1/accounts:signInWithPassword",In(y,c))})).apply(this,arguments)}function Jr(y,c){return ii.apply(this,arguments)}function ii(){return(ii=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:sendOobCode",In(y,c))})).apply(this,arguments)}function yr(y,c){return to.apply(this,arguments)}function to(){return(to=(0,E.Z)(function*(y,c){return Jr(y,c)})).apply(this,arguments)}function si(y,c){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,E.Z)(function*(y,c){return Jr(y,c)})).apply(this,arguments)}function no(y,c){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,E.Z)(function*(y,c){return Jr(y,c)})).apply(this,arguments)}function Yi(y,c){return pi.apply(this,arguments)}function pi(){return(pi=(0,E.Z)(function*(y,c){return Jr(y,c)})).apply(this,arguments)}function Ss(){return(Ss=(0,E.Z)(function*(y,c){return br(y,"POST","/v1/accounts:signInWithEmailLink",In(y,c))})).apply(this,arguments)}function To(){return(To=(0,E.Z)(function*(y,c){return br(y,"POST","/v1/accounts:signInWithEmailLink",In(y,c))})).apply(this,arguments)}class gi extends Qr{constructor(c,f,w,V=null){super("password",w),this._email=c,this._password=f,this._tenantId=V}static _fromEmailAndPassword(c,f){return new gi(c,f,"password")}static _fromEmailAndCode(c,f,w=null){return new gi(c,f,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,E.Z)(function*(){switch(f.signInMethod){case"password":return function Rr(y,c){return Si.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Ts(y,c){return Ss.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:$e(c,"internal-error")}})()}_linkToIdToken(c,f){var w=this;return(0,E.Z)(function*(){switch(w.signInMethod){case"password":return Qn(c,{idToken:f,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function co(y,c){return To.apply(this,arguments)}(c,{idToken:f,email:w._email,oobCode:w._password});default:$e(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function oi(y,c){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,E.Z)(function*(y,c){return br(y,"POST","/v1/accounts:signInWithIdp",In(y,c))})).apply(this,arguments)}class He extends Qr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new He(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):$e("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:w,signInMethod:V}=f,Y=(0,ve._T)(f,["providerId","signInMethod"]);if(!w||!V)return null;const Ae=new He(w,V);return Ae.idToken=Y.idToken||void 0,Ae.accessToken=Y.accessToken||void 0,Ae.secret=Y.secret,Ae.nonce=Y.nonce,Ae.pendingToken=Y.pendingToken||null,Ae}_getIdTokenResponse(c){return oi(c,this.buildRequest())}_linkToIdToken(c,f){const w=this.buildRequest();return w.idToken=f,oi(c,w)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,oi(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,G.xO)(f)}return c}}function at(y,c){return bt.apply(this,arguments)}function bt(){return(bt=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:sendVerificationCode",In(y,c))})).apply(this,arguments)}function En(){return(En=(0,E.Z)(function*(y,c){return br(y,"POST","/v1/accounts:signInWithPhoneNumber",In(y,c))})).apply(this,arguments)}function _r(){return(_r=(0,E.Z)(function*(y,c){const f=yield br(y,"POST","/v1/accounts:signInWithPhoneNumber",In(y,c));if(f.temporaryProof)throw _n(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Bi={USER_NOT_FOUND:"user-not-found"};function Us(){return(Us=(0,E.Z)(function*(y,c){return br(y,"POST","/v1/accounts:signInWithPhoneNumber",In(y,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Bi)})).apply(this,arguments)}class Qi extends Qr{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new Qi({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new Qi({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Vt(y,c){return En.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function ai(y,c){return _r.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Vi(y,c){return Us.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:w,verificationCode:V}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:w,code:V}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:w,phoneNumber:V,temporaryProof:Y}=c;return w||f||V||Y?new Qi({verificationId:f,verificationCode:w,phoneNumber:V,temporaryProof:Y}):null}}class Cs{constructor(c){var f,w,V,Y,Ae,rt;const Ut=(0,G.zd)((0,G.pd)(c)),on=null!==(f=Ut.apiKey)&&void 0!==f?f:null,jn=null!==(w=Ut.oobCode)&&void 0!==w?w:null,an=function Xi(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=Ut.mode)&&void 0!==V?V:null);ne(on&&jn&&an,"argument-error"),this.apiKey=on,this.operation=an,this.code=jn,this.continueUrl=null!==(Y=Ut.continueUrl)&&void 0!==Y?Y:null,this.languageCode=null!==(Ae=Ut.languageCode)&&void 0!==Ae?Ae:null,this.tenantId=null!==(rt=Ut.tenantId)&&void 0!==rt?rt:null}static parseLink(c){const f=function Gs(y){const c=(0,G.zd)((0,G.pd)(y)).link,f=c?(0,G.zd)((0,G.pd)(c)).deep_link_id:null,w=(0,G.zd)((0,G.pd)(y)).deep_link_id;return(w?(0,G.zd)((0,G.pd)(w)).link:null)||w||f||c||y}(c);try{return new Cs(f)}catch{return null}}}let $i=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,w){return gi._fromEmailAndPassword(f,w)}static credentialWithLink(f,w){const V=Cs.parseLink(w);return ne(V,"argument-error"),gi._fromEmailAndCode(f,V.code,V.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ji{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ps extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class As extends ps{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return ne("providerId"in f&&"signInMethod"in f,"argument-error"),He._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ne(c.idToken||c.accessToken,"argument-error"),He._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return As.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return As.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:w,oauthTokenSecret:V,pendingToken:Y,nonce:Ae,providerId:rt}=c;if(!w&&!V&&!f&&!Y||!rt)return null;try{return new As(rt)._credential({idToken:f,accessToken:w,nonce:Ae,pendingToken:Y})}catch{return null}}}let zs=(()=>{class y extends ps{constructor(){super("facebook.com")}static credential(f){return He._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ho=(()=>{class y extends ps{constructor(){super("google.com"),this.addScope("profile")}static credential(f,w){return He._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:w})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:w,oauthAccessToken:V}=f;if(!w&&!V)return null;try{return y.credential(w,V)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Bs=(()=>{class y extends ps{constructor(){super("github.com")}static credential(f){return He._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class us extends Qr{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return oi(c,this.buildRequest())}_linkToIdToken(c,f){const w=this.buildRequest();return w.idToken=f,oi(c,w)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,oi(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:w,signInMethod:V,pendingToken:Y}=f;return w&&V&&Y&&w===V?new us(w,Y):null}static _create(c,f){return new us(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ts extends Ji{constructor(c){ne(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return ts.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return ts.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=us.fromJSON(c);return ne(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:w}=c;if(!f||!w)return null;try{return us._create(w,f)}catch{return null}}}let Oi=(()=>{class y extends ps{constructor(){super("twitter.com")}static credential(f,w){return He._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:w})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:w,oauthTokenSecret:V}=f;if(!w||!V)return null;try{return y.credential(w,V)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function gs(y,c){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,E.Z)(function*(y,c){return br(y,"POST","/v1/accounts:signUp",In(y,c))})).apply(this,arguments)}class Ci{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,w,V=!1){return(0,E.Z)(function*(){const Y=yield oe._fromIdTokenResponse(c,w,V),Ae=fo(w);return new Ci({user:Y,providerId:Ae,_tokenResponse:w,operationType:f})})()}static _forOperation(c,f,w){return(0,E.Z)(function*(){yield c._updateTokensIfNecessary(w,!0);const V=fo(w);return new Ci({user:c,providerId:V,_tokenResponse:w,operationType:f})})()}}function fo(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Fr(){return(Fr=(0,E.Z)(function*(y){var c;const f=rr(y);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new Ci({user:f.currentUser,providerId:null,operationType:"signIn"});const w=yield gs(f,{returnSecureToken:!0}),V=yield Ci._fromIdTokenResponse(f,"signIn",w,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class vi extends G.ZR{constructor(c,f,w,V){var Y;super(f.code,f.message),this.operationType=w,this.user=V,Object.setPrototypeOf(this,vi.prototype),this.customData={appName:c.name,tenantId:null!==(Y=c.tenantId)&&void 0!==Y?Y:void 0,_serverResponse:f.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(c,f,w,V){return new vi(c,f,w,V)}}function Xo(y,c,f,w){return("reauthenticate"===c?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(Y=>{throw"auth/multi-factor-auth-required"===Y.code?vi._fromErrorAndOperation(y,Y,c,w):Y})}function Xn(y){return new Set(y.map(({providerId:c})=>c).filter(c=>!!c))}function Ks(){return(Ks=(0,E.Z)(function*(y,c){const f=(0,G.m9)(y);yield or(!0,f,c);const{providerUserInfo:w}=yield Gr(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),V=Xn(w||[]);return f.providerData=f.providerData.filter(Y=>V.has(Y.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function ns(y,c){return mi.apply(this,arguments)}function mi(){return(mi=(0,E.Z)(function*(y,c,f=!1){const w=yield Wt(y,c._linkToIdToken(y.auth,yield y.getIdToken()),f);return Ci._forOperation(y,"link",w)})).apply(this,arguments)}function or(y,c,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,E.Z)(function*(y,c,f){yield Ln(c);const V=!1===y?"provider-already-linked":"no-such-provider";ne(Xn(c.providerData).has(f)===y,c.auth,V)})).apply(this,arguments)}function ls(y,c){return ki.apply(this,arguments)}function ki(){return(ki=(0,E.Z)(function*(y,c,f=!1){var w;const{auth:V}=y,Y="reauthenticate";try{const Ae=yield Wt(y,Xo(V,Y,c,y),f);ne(Ae.idToken,V,"internal-error");const rt=zt(Ae.idToken);ne(rt,V,"internal-error");const{sub:Ut}=rt;return ne(y.uid===Ut,V,"user-mismatch"),Ci._forOperation(y,Y,Ae)}catch(Ae){throw"auth/user-not-found"===(null===(w=Ae)||void 0===w?void 0:w.code)&&$e(V,"user-mismatch"),Ae}})).apply(this,arguments)}function rs(y,c){return is.apply(this,arguments)}function is(){return(is=(0,E.Z)(function*(y,c,f=!1){const w="signIn",V=yield Xo(y,w,c),Y=yield Ci._fromIdTokenResponse(y,w,V);return f||(yield y._updateCurrentUser(Y.user)),Y})).apply(this,arguments)}function Dr(y,c){return cn.apply(this,arguments)}function cn(){return(cn=(0,E.Z)(function*(y,c){return rs(rr(y),c)})).apply(this,arguments)}function ys(y,c){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,E.Z)(function*(y,c){const f=(0,G.m9)(y);return yield or(!1,f,c.providerId),ns(f,c)})).apply(this,arguments)}function Ms(y,c){return qs.apply(this,arguments)}function qs(){return(qs=(0,E.Z)(function*(y,c){return ls((0,G.m9)(y),c)})).apply(this,arguments)}function Zs(y,c){return Li.apply(this,arguments)}function Li(){return(Li=(0,E.Z)(function*(y,c){return br(y,"POST","/v1/accounts:signInWithCustomToken",In(y,c))})).apply(this,arguments)}function go(){return(go=(0,E.Z)(function*(y,c){const f=rr(y),w=yield Zs(f,{token:c,returnSecureToken:!0}),V=yield Ci._fromIdTokenResponse(f,"signIn",w);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class ht{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Hn._fromServerResponse(c,f):$e(c,"internal-error")}}class Hn extends ht{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Hn(f)}}function mo(y,c,f){var w;ne((null===(w=f.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),ne(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ne(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(ne(f.android.packageName.length>0,y,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function B(){return(B=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y),V={requestType:"PASSWORD_RESET",email:c};f&&mo(w,V,f),yield si(w,V)})).apply(this,arguments)}function X(){return(X=(0,E.Z)(function*(y,c,f){yield Xr((0,G.m9)(y),{oobCode:c,newPassword:f})})).apply(this,arguments)}function Ne(){return(Ne=(0,E.Z)(function*(y,c){yield Ds((0,G.m9)(y),{oobCode:c})})).apply(this,arguments)}function Ze(y,c){return yt.apply(this,arguments)}function yt(){return(yt=(0,E.Z)(function*(y,c){const f=(0,G.m9)(y),w=yield Xr(f,{oobCode:c}),V=w.requestType;switch(ne(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(w.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(w.mfaInfo,f,"internal-error");default:ne(w.email,f,"internal-error")}let Y=null;return w.mfaInfo&&(Y=ht._fromServerResponse(rr(f),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:Y},operation:V}})).apply(this,arguments)}function Bt(){return(Bt=(0,E.Z)(function*(y,c){const{data:f}=yield Ze((0,G.m9)(y),c);return f.email})).apply(this,arguments)}function hn(){return(hn=(0,E.Z)(function*(y,c,f){const w=rr(y),V=yield gs(w,{returnSecureToken:!0,email:c,password:f}),Y=yield Ci._fromIdTokenResponse(w,"signIn",V);return yield w._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function Vn(){return(Vn=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y),V={requestType:"EMAIL_SIGNIN",email:c};ne(f.handleCodeInApp,w,"argument-error"),f&&mo(w,V,f),yield no(w,V)})).apply(this,arguments)}function Br(){return(Br=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y),V=$i.credentialWithLink(c,f||mt());return ne(V._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Dr(w,V)})).apply(this,arguments)}function Rs(y,c){return ji.apply(this,arguments)}function ji(){return(ji=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:createAuthUri",In(y,c))})).apply(this,arguments)}function Wr(){return(Wr=(0,E.Z)(function*(y,c){const w={identifier:c,continueUri:Yt()?mt():"http://localhost"},{signinMethods:V}=yield Rs((0,G.m9)(y),w);return V||[]})).apply(this,arguments)}function cs(){return(cs=(0,E.Z)(function*(y,c){const f=(0,G.m9)(y),V={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};c&&mo(f.auth,V,c);const{email:Y}=yield yr(f.auth,V);Y!==y.email&&(yield y.reload())})).apply(this,arguments)}function Vs(){return(Vs=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y),Y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:c};f&&mo(w.auth,Y,f);const{email:Ae}=yield Yi(w.auth,Y);Ae!==y.email&&(yield y.reload())})).apply(this,arguments)}function ro(y,c){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,E.Z)(function*(y,c){return Dn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function _o(){return(_o=(0,E.Z)(function*(y,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const w=(0,G.m9)(y),Y={idToken:yield w.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Ae=yield Wt(w,ro(w.auth,Y));w.displayName=Ae.displayName||null,w.photoURL=Ae.photoUrl||null;const rt=w.providerData.find(({providerId:Ut})=>"password"===Ut);rt&&(rt.displayName=w.displayName,rt.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Ae)})).apply(this,arguments)}function x(y,c,f){return W.apply(this,arguments)}function W(){return(W=(0,E.Z)(function*(y,c,f){const{auth:w}=y,Y={idToken:yield y.getIdToken(),returnSecureToken:!0};c&&(Y.email=c),f&&(Y.password=f);const Ae=yield Wt(y,Qn(w,Y));yield y._updateTokensIfNecessary(Ae,!0)})).apply(this,arguments)}class p{constructor(c,f,w={}){this.isNewUser=c,this.providerId=f,this.profile=w}}class m extends p{constructor(c,f,w,V){super(c,f,w),this.username=V}}class M extends p{constructor(c,f){super(c,"facebook.com",f)}}class j extends m{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Q extends p{constructor(c,f){super(c,"google.com",f)}}class he extends m{constructor(c,f,w){super(c,"twitter.com",f,w)}}function ge(y){const{user:c,_tokenResponse:f}=y;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function S(y){var c,f;if(!y)return null;const{providerId:w}=y,V=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},Y=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const Ae=null===(f=null===(c=zt(y.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Ae)return new p(Y,"anonymous"!==Ae&&"custom"!==Ae?Ae:null)}if(!w)return null;switch(w){case"facebook.com":return new M(Y,V);case"github.com":return new j(Y,V);case"google.com":return new Q(Y,V);case"twitter.com":return new he(Y,V,y.screenName||null);case"custom":case"anonymous":return new p(Y,null);default:return new p(Y,w,V)}}(f)}class $n{constructor(c,f,w){this.type=c,this.credential=f,this.auth=w}static _fromIdtoken(c,f){return new $n("enroll",c,f)}static _fromMfaPendingCredential(c){return new $n("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,w;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return $n._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(w=c.multiFactorSession)&&void 0!==w&&w.idToken)return $n._fromIdtoken(c.multiFactorSession.idToken)}return null}}class wi{constructor(c,f,w){this.session=c,this.hints=f,this.signInResolver=w}static _fromError(c,f){const w=rr(c),V=f.customData._serverResponse,Y=(V.mfaInfo||[]).map(rt=>ht._fromServerResponse(w,rt));ne(V.mfaPendingCredential,w,"internal-error");const Ae=$n._fromMfaPendingCredential(V.mfaPendingCredential);return new wi(Ae,Y,function(){var rt=(0,E.Z)(function*(Ut){const on=yield Ut._process(w,Ae);delete V.mfaInfo,delete V.mfaPendingCredential;const jn=Object.assign(Object.assign({},V),{idToken:on.idToken,refreshToken:on.refreshToken});switch(f.operationType){case"signIn":const an=yield Ci._fromIdTokenResponse(w,f.operationType,jn);return yield w._updateCurrentUser(an.user),an;case"reauthenticate":return ne(f.user,w,"internal-error"),Ci._forOperation(f.user,f.operationType,jn);default:$e(w,"internal-error")}});return function(Ut){return rt.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,E.Z)(function*(){return f.signInResolver(c)})()}}function Kr(y,c){return Dn(y,"POST","/v2/accounts/mfaEnrollment:start",In(y,c))}class ss{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(w=>ht._fromServerResponse(c.auth,w)))})}static _fromUser(c){return new ss(c)}getSession(){var c=this;return(0,E.Z)(function*(){return $n._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,f){var w=this;return(0,E.Z)(function*(){const V=c,Y=yield w.getSession(),Ae=yield Wt(w.user,V._process(w.user.auth,Y,f));return yield w.user._updateTokensIfNecessary(Ae),w.user.reload()})()}unenroll(c){var f=this;return(0,E.Z)(function*(){var w;const V="string"==typeof c?c:c.uid,Y=yield f.user.getIdToken(),Ae=yield Wt(f.user,function Ro(y,c){return Dn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",In(y,c))}(f.user.auth,{idToken:Y,mfaEnrollmentId:V}));f.enrolledFactors=f.enrolledFactors.filter(({uid:rt})=>rt!==V),yield f.user._updateTokensIfNecessary(Ae);try{yield f.user.reload()}catch(rt){if("auth/user-token-expired"!==(null===(w=rt)||void 0===w?void 0:w.code))throw rt}})()}}const Es=new WeakMap,Hi="__sak";class ta{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Hi,"1"),this.storage.removeItem(Hi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zt=(()=>{class y extends ta{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,w)=>this.onStorageEvent(f,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function io(){const y=(0,G.z$)();return An(y)||ee(y)}()&&function Tn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=tn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const w of Object.keys(this.listeners)){const V=this.storage.getItem(w),Y=this.localCache[w];V!==Y&&f(w,Y,V)}}onStorageEvent(f,w=!1){if(!f.key)return void this.forAllChangedKeys((rt,Ut,on)=>{this.notifyListeners(rt,on)});const V=f.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const rt=this.storage.getItem(V);if(f.newValue!==rt)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!w)return}const Y=()=>{const rt=this.storage.getItem(V);!w&&this.localCache[V]===rt||this.notifyListeners(V,rt)},Ae=this.storage.getItem(V);!function xt(){return(0,G.w1)()&&10===document.documentMode}()||Ae===f.newValue||f.newValue===f.oldValue?Y():setTimeout(Y,10)}notifyListeners(f,w){this.localCache[f]=w;const V=this.listeners[f];if(V)for(const Y of Array.from(V))Y(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,w,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:w,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,w){var V=()=>super._set,Y=this;return(0,E.Z)(function*(){yield V().call(Y,f,w),Y.localCache[f]=JSON.stringify(w)})()}_get(f){var w=()=>super._get,V=this;return(0,E.Z)(function*(){const Y=yield w().call(V,f);return V.localCache[f]=JSON.stringify(Y),Y})()}_remove(f){var w=()=>super._remove,V=this;return(0,E.Z)(function*(){yield w().call(V,f),delete V.localCache[f]})()}}return y.type="LOCAL",y})(),dn=(()=>{class y extends ta{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,w){}_removeListener(f,w){}}return y.type="SESSION",y})();let pt=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const w=this.receivers.find(Y=>Y.isListeningto(f));if(w)return w;const V=new y(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var w=this;return(0,E.Z)(function*(){const V=f,{eventId:Y,eventType:Ae,data:rt}=V.data,Ut=w.handlersMap[Ae];if(!Ut?.size)return;V.ports[0].postMessage({status:"ack",eventId:Y,eventType:Ae});const on=Array.from(Ut).map(function(){var an=(0,E.Z)(function*(js){return js(V.origin,rt)});return function(js){return an.apply(this,arguments)}}()),jn=yield function er(y){return Promise.all(y.map(function(){var c=(0,E.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(w){return{fulfilled:!1,reason:w}}});return function(f){return c.apply(this,arguments)}}()))}(on);V.ports[0].postMessage({status:"done",eventId:Y,eventType:Ae,response:jn})})()}_subscribe(f,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(w)}_unsubscribe(f,w){this.handlersMap[f]&&w&&this.handlersMap[f].delete(w),(!w||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function wr(y="",c=10){let f="";for(let w=0;w<c;w++)f+=Math.floor(10*Math.random());return y+f}class ti{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,w=50){var V=this;return(0,E.Z)(function*(){const Y=typeof MessageChannel<"u"?new MessageChannel:null;if(!Y)throw new Error("connection_unavailable");let Ae,rt;return new Promise((Ut,on)=>{const jn=wr("",20);Y.port1.start();const an=setTimeout(()=>{on(new Error("unsupported_event"))},w);rt={messageChannel:Y,onMessage(js){const qo=js;if(qo.data.eventId===jn)switch(qo.data.status){case"ack":clearTimeout(an),Ae=setTimeout(()=>{on(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ae),Ut(qo.data.response);break;default:clearTimeout(an),clearTimeout(Ae),on(new Error("invalid_response"))}}},V.handlers.add(rt),Y.port1.addEventListener("message",rt.onMessage),V.target.postMessage({eventType:c,eventId:jn,data:f},[Y.port2])}).finally(()=>{rt&&V.removeMessageHandler(rt)})})()}}function Vr(){return window}function wn(){return typeof Vr().WorkerGlobalScope<"u"&&"function"==typeof Vr().importScripts}function Ct(){return(Ct=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hr="firebaseLocalStorageDb",ma="firebaseLocalStorage",bu="fbase_key";class ia{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Ri(y,c){return y.transaction([ma],c?"readwrite":"readonly").objectStore(ma)}function fa(){const y=indexedDB.open(Hr,1);return new Promise((c,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(ma,{keyPath:bu})}catch(V){f(V)}}),y.addEventListener("success",(0,E.Z)(function*(){const w=y.result;w.objectStoreNames.contains(ma)?c(w):(w.close(),yield function Tu(){const y=indexedDB.deleteDatabase(Hr);return new ia(y).toPromise()}(),c(yield fa()))}))})}function xo(y,c,f){return $a.apply(this,arguments)}function $a(){return($a=(0,E.Z)(function*(y,c,f){const w=Ri(y,!0).put({[bu]:c,value:f});return new ia(w).toPromise()})).apply(this,arguments)}function ya(){return(ya=(0,E.Z)(function*(y,c){const f=Ri(y,!1).get(c),w=yield new ia(f).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function kn(y,c){const f=Ri(y,!0).delete(c);return new ia(f).toPromise()}const Sn=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,E.Z)(function*(){return f.db||(f.db=yield fa()),f.db})()}_withRetries(f){var w=this;return(0,E.Z)(function*(){let V=0;for(;;)try{const Y=yield w._openDb();return yield f(Y)}catch(Y){if(V++>3)throw Y;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,E.Z)(function*(){return wn()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,E.Z)(function*(){f.receiver=pt._getInstance(function dt(){return wn()?self:null}()),f.receiver._subscribe("keyChanged",function(){var w=(0,E.Z)(function*(V,Y){return{keyProcessed:(yield f._poll()).includes(Y.key)}});return function(V,Y){return w.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var w=(0,E.Z)(function*(V,Y){return["keyChanged"]});return function(V,Y){return w.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,E.Z)(function*(){var w,V;if(f.activeServiceWorker=yield function ra(){return Ct.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new ti(f.activeServiceWorker);const Y=yield f.sender._send("ping",{},800);!Y||(null===(w=Y[0])||void 0===w?void 0:w.fulfilled)&&(null===(V=Y[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var w=this;return(0,E.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Ye(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:f},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const f=yield fa();return yield xo(f,Hi,"1"),yield kn(f,Hi),!0}catch{}return!1})()}_withPendingWrite(f){var w=this;return(0,E.Z)(function*(){w.pendingWrites++;try{yield f()}finally{w.pendingWrites--}})()}_set(f,w){var V=this;return(0,E.Z)(function*(){return V._withPendingWrite((0,E.Z)(function*(){return yield V._withRetries(Y=>xo(Y,f,w)),V.localCache[f]=w,V.notifyServiceWorker(f)}))})()}_get(f){var w=this;return(0,E.Z)(function*(){const V=yield w._withRetries(Y=>function Ja(y,c){return ya.apply(this,arguments)}(Y,f));return w.localCache[f]=V,V})()}_remove(f){var w=this;return(0,E.Z)(function*(){return w._withPendingWrite((0,E.Z)(function*(){return yield w._withRetries(V=>kn(V,f)),delete w.localCache[f],w.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,E.Z)(function*(){const w=yield f._withRetries(Ae=>{const rt=Ri(Ae,!1).getAll();return new ia(rt).toPromise()});if(!w)return[];if(0!==f.pendingWrites)return[];const V=[],Y=new Set;for(const{fbase_key:Ae,value:rt}of w)Y.add(Ae),JSON.stringify(f.localCache[Ae])!==JSON.stringify(rt)&&(f.notifyListeners(Ae,rt),V.push(Ae));for(const Ae of Object.keys(f.localCache))f.localCache[Ae]&&!Y.has(Ae)&&(f.notifyListeners(Ae,null),V.push(Ae));return V})()}notifyListeners(f,w){this.localCache[f]=w;const V=this.listeners[f];if(V)for(const Y of Array.from(V))Y(w)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function sa(y,c){return Dn(y,"POST","/v2/accounts/mfaSignIn:start",In(y,c))}function $r(){return($r=(0,E.Z)(function*(y){return(yield Dn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Po(y){return new Promise((c,f)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=c,w.onerror=V=>{const Y=Ie("internal-error");Y.customData=V,f(Y)},w.type="text/javascript",w.charset="UTF-8",function Pt(){var y,c;return null!==(c=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==c?c:document}().appendChild(w)})}function Sa(y){return`__${y}${Math.floor(1e6*Math.random())}`}const No=1e12;class li{constructor(c){this.auth=c,this.counter=No,this._widgets=new Map}render(c,f){const w=this.counter;return this._widgets.set(w,new eu(c,this.auth.name,f||{})),this.counter++,w}reset(c){var f;const w=c||No;null===(f=this._widgets.get(w))||void 0===f||f.delete(),this._widgets.delete(w)}getResponse(c){var f;return(null===(f=this._widgets.get(c||No))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,E.Z)(function*(){var w;return null===(w=f._widgets.get(c||No))||void 0===w||w.execute(),""})()}}class eu{constructor(c,f,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof c?document.getElementById(c):c;ne(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qu(y){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const tu=Sa("rcb"),oo=new Rn(3e4,6e4);class Ca{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Vr().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return ne(function Qc(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Vr().grecaptcha):new Promise((w,V)=>{const Y=Vr().setTimeout(()=>{V(Ie(c,"network-request-failed"))},oo.get());Vr()[tu]=()=>{Vr().clearTimeout(Y),delete Vr()[tu];const rt=Vr().grecaptcha;if(!rt)return void V(Ie(c,"internal-error"));const Ut=rt.render;rt.render=(on,jn)=>{const an=Ut(on,jn);return this.counter++,an},this.hostLanguage=f,w(rt)},Po(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:tu,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(Y),V(Ie(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=Vr().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wo{load(c){return(0,E.Z)(function*(){return new li(c)})()}clearedOneInstance(){}}const Zu="recaptcha",et={theme:"light",type:"image"};class Fi{constructor(c,f=Object.assign({},et),w){this.parameters=f,this.type=Zu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rr(w),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof c?document.getElementById(c):c;ne(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wo:new Ca,this.validateStartingState()}verify(){var c=this;return(0,E.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),w=c.getAssertedRecaptcha();return w.getResponse(f)||new Promise(Y=>{const Ae=rt=>{!rt||(c.tokenChangeListeners.delete(Ae),Y(rt))};c.tokenChangeListeners.add(Ae),c.isInvisible&&w.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(w=>w(f)),"function"==typeof c)c(f);else if("string"==typeof c){const w=Vr()[c];"function"==typeof w&&w(f)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,E.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const w=document.createElement("div");f.appendChild(w),f=w}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,E.Z)(function*(){ne(Yt()&&!wn(),c.auth,"internal-error"),yield function ao(){let y=null;return new Promise(c=>{"complete"!==document.readyState?(y=()=>c(),window.addEventListener("load",y)):c()}).catch(c=>{throw y&&window.removeEventListener("load",y),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function so(y){return $r.apply(this,arguments)}(c.auth);ne(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Aa{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=Qi._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Oo(){return(Oo=(0,E.Z)(function*(y,c,f){const w=rr(y),V=yield I(w,c,(0,G.m9)(f));return new Aa(V,Y=>Dr(w,Y))})).apply(this,arguments)}function ds(){return(ds=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y);yield or(!1,w,"phone");const V=yield I(w.auth,c,(0,G.m9)(f));return new Aa(V,Y=>ys(w,Y))})).apply(this,arguments)}function _a(){return(_a=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y),V=yield I(w.auth,c,(0,G.m9)(f));return new Aa(V,Y=>Ms(w,Y))})).apply(this,arguments)}function I(y,c,f){return D.apply(this,arguments)}function D(){return(D=(0,E.Z)(function*(y,c,f){var w;const V=yield f.verify();try{let Y;if(ne("string"==typeof V,y,"argument-error"),ne(f.type===Zu,y,"argument-error"),Y="string"==typeof c?{phoneNumber:c}:c,"session"in Y){const Ae=Y.session;if("phoneNumber"in Y)return ne("enroll"===Ae.type,y,"internal-error"),(yield Kr(y,{idToken:Ae.credential,phoneEnrollmentInfo:{phoneNumber:Y.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{ne("signin"===Ae.type,y,"internal-error");const rt=(null===(w=Y.multiFactorHint)||void 0===w?void 0:w.uid)||Y.multiFactorUid;return ne(rt,y,"missing-multi-factor-info"),(yield sa(y,{mfaPendingCredential:Ae.credential,mfaEnrollmentId:rt,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ae}=yield at(y,{phoneNumber:Y.phoneNumber,recaptchaToken:V});return Ae}}finally{f._reset()}})).apply(this,arguments)}function C(){return(C=(0,E.Z)(function*(y,c){yield ns((0,G.m9)(y),c)})).apply(this,arguments)}let N=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=rr(f)}verifyPhoneNumber(f,w){return I(this.auth,f,(0,G.m9)(w))}static credential(f,w){return Qi._fromVerification(f,w)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:w,temporaryProof:V}=f;return w&&V?Qi._fromTokenResponse(w,V):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function q(y,c){return c?Ve(c):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class te extends Qr{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return oi(c,this._buildIdpRequest())}_linkToIdToken(c,f){return oi(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return oi(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function ue(y){return rs(y.auth,new te(y),y.bypassAuthState)}function Be(y){const{auth:c,user:f}=y;return ne(f,c,"internal-error"),ls(f,new te(y),y.bypassAuthState)}function lt(y){return sn.apply(this,arguments)}function sn(){return(sn=(0,E.Z)(function*(y){const{auth:c,user:f}=y;return ne(f,c,"internal-error"),ns(f,new te(y),y.bypassAuthState)})).apply(this,arguments)}class Ft{constructor(c,f,w,V,Y=!1){this.auth=c,this.resolver=w,this.user=V,this.bypassAuthState=Y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,E.Z)(function*(w,V){c.pendingPromise={resolve:w,reject:V};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(Y){c.reject(Y)}});return function(w,V){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,E.Z)(function*(){const{urlResponse:w,sessionId:V,postBody:Y,tenantId:Ae,error:rt,type:Ut}=c;if(rt)return void f.reject(rt);const on={auth:f.auth,requestUri:w,sessionId:V,tenantId:Ae||void 0,postBody:Y||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ut)(on))}catch(jn){f.reject(jn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return ue;case"linkViaPopup":case"linkViaRedirect":return lt;case"reauthViaPopup":case"reauthViaRedirect":return Be;default:$e(this.auth,"internal-error")}}resolve(c){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mn=new Rn(2e3,1e4);function pr(){return(pr=(0,E.Z)(function*(y,c,f){const w=rr(y);ot(y,c,Ji);const V=q(w,f);return new oa(w,"signInViaPopup",c,V).executeNotNull()})).apply(this,arguments)}function os(){return(os=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y);ot(w.auth,c,Ji);const V=q(w.auth,f);return new oa(w.auth,"reauthViaPopup",c,V,w).executeNotNull()})).apply(this,arguments)}function ws(){return(ws=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y);ot(w.auth,c,Ji);const V=q(w.auth,f);return new oa(w.auth,"linkViaPopup",c,V,w).executeNotNull()})).apply(this,arguments)}let oa=(()=>{class y extends Ft{constructor(f,w,V,Y,Ae){super(f,w,Y,Ae),this.provider=V,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,E.Z)(function*(){const w=yield f.execute();return ne(w,f.auth,"internal-error"),w})()}onExecution(){var f=this;return(0,E.Z)(function*(){ce(1===f.filter.length,"Popup operations only handle one event");const w=wr();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],w),f.authWindow.associatedEvent=w,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(Ie(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var w,V;this.pollId=null!==(V=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==V&&V.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,mn.get())};f()}}return y.currentPopupAction=null,y})();const Qs=new Map;class El extends Ft{constructor(c,f,w=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,w),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,E.Z)(function*(){let w=Qs.get(f.auth._key());if(!w){try{const Y=(yield function aa(y,c){return Lo.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;w=()=>Promise.resolve(Y)}catch(V){w=()=>Promise.reject(V)}Qs.set(f.auth._key(),w)}return f.bypassAuthState||Qs.set(f.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,w=this;return(0,E.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(w,c);if("unknown"!==c.type){if(c.eventId){const V=yield w.auth._redirectUserForId(c.eventId);if(V)return w.user=V,f().call(w,c);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Lo(){return(Lo=(0,E.Z)(function*(y,c){const f=ua(c),w=Io(y);if(!(yield w._isAvailable()))return!1;const V="true"===(yield w._get(f));return yield w._remove(f),V})).apply(this,arguments)}function Ha(y,c){return pa.apply(this,arguments)}function pa(){return(pa=(0,E.Z)(function*(y,c){return Io(y)._set(ua(c),"true")})).apply(this,arguments)}function Ea(y,c){Qs.set(y._key(),c)}function Io(y){return Ve(y._redirectPersistence)}function ua(y){return nt("pendingRedirect",y.config.apiKey,y.name)}function P(){return(P=(0,E.Z)(function*(y,c,f){const w=rr(y);ot(y,c,Ji);const V=q(w,f);return yield Ha(V,w),V._openRedirect(w,c,"signInViaRedirect")})).apply(this,arguments)}function de(){return(de=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y);ot(w.auth,c,Ji);const V=q(w.auth,f);yield Ha(V,w.auth);const Y=yield Un(w);return V._openRedirect(w.auth,c,"reauthViaRedirect",Y)})).apply(this,arguments)}function wt(){return(wt=(0,E.Z)(function*(y,c,f){const w=(0,G.m9)(y);ot(w.auth,c,Ji);const V=q(w.auth,f);yield or(!1,w,c.providerId),yield Ha(V,w.auth);const Y=yield Un(w);return V._openRedirect(w.auth,c,"linkViaRedirect",Y)})).apply(this,arguments)}function Mn(){return(Mn=(0,E.Z)(function*(y,c){return yield rr(y)._initializationPromise,Fn(y,c,!1)})).apply(this,arguments)}function Fn(y,c){return ur.apply(this,arguments)}function ur(){return(ur=(0,E.Z)(function*(y,c,f=!1){const w=rr(y),V=q(w,c),Ae=yield new El(w,V,f).execute();return Ae&&!f&&(delete Ae.user._redirectEventId,yield w._persistUserIfCurrent(Ae.user),yield w._setRedirectUser(null,c)),Ae})).apply(this,arguments)}function Un(y){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,E.Z)(function*(y){const c=wr(`${y.uid}:::`);return y._redirectEventId=c,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),c})).apply(this,arguments)}class Ga{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(c,w)&&(f=!0,this.sendToConsumer(c,w),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Zr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ra(y);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var w;if(c.error&&!Ra(c)){const V=(null===(w=c.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";f.onError(Ie(this.auth,V))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const w=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&w}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zi(c))}saveEventToCache(c){this.cachedEventUids.add(zi(c)),this.lastProcessedEventTime=Date.now()}}function zi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(c=>c).join("-")}function Ra({type:y,error:c}){return"unknown"===y&&"auth/no-auth-event"===c?.code}function xa(y){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,E.Z)(function*(y,c={}){return Dn(y,"GET","/v1/projects",c)})).apply(this,arguments)}const zo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,za=/^https?/;function wl(){return(wl=(0,E.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:c}=yield xa(y);for(const f of c)try{if(ec(f))return}catch{}$e(y,"unauthorized-domain")})).apply(this,arguments)}function ec(y){const c=mt(),{protocol:f,hostname:w}=new URL(c);if(y.startsWith("chrome-extension://")){const Ae=new URL(y);return""===Ae.hostname&&""===w?"chrome-extension:"===f&&y.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Ae.hostname===w}if(!za.test(f))return!1;if(zo.test(y))return w===y;const V=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(w)}const oh=new Rn(3e4,6e4);function Xc(){const y=Vr().___jsl;if(y?.H)for(const c of Object.keys(y.H))if(y.H[c].r=y.H[c].r||[],y.H[c].L=y.H[c].L||[],y.H[c].r=[...y.H[c].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let Il=null;function kf(y){return Il=Il||function Ps(y){return new Promise((c,f)=>{var w,V,Y;function Ae(){Xc(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Xc(),f(Ie(y,"network-request-failed"))},timeout:oh.get()})}if(null!==(V=null===(w=Vr().gapi)||void 0===w?void 0:w.iframes)&&void 0!==V&&V.Iframe)c(gapi.iframes.getContext());else{if(null===(Y=Vr().gapi)||void 0===Y||!Y.load){const rt=Sa("iframefcb");return Vr()[rt]=()=>{gapi.load?Ae():f(Ie(y,"network-request-failed"))},Po(`https://apis.google.com/js/api.js?onload=${rt}`).catch(Ut=>f(Ut))}Ae()}}).catch(c=>{throw Il=null,c})}(y),Il}const ah=new Rn(5e3,15e3),Vg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ff(y){const c=y.config;ne(c.authDomain,y,"auth-domain-config-required");const f=c.emulator?rn(c,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:c.apiKey,appName:y.name,v:me.SDK_VERSION},V=Jc.get(y.config.apiHost);V&&(w.eid=V);const Y=y._getFrameworks();return Y.length&&(w.fw=Y.join(",")),`${f}?${(0,G.xO)(w).slice(1)}`}function wa(){return wa=(0,E.Z)(function*(y){const c=yield kf(y),f=Vr().gapi;return ne(f,y,"internal-error"),c.open({where:document.body,url:Ff(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vg,dontclear:!0},w=>new Promise(function(){var V=(0,E.Z)(function*(Y,Ae){yield w.restyle({setHideOnLeave:!1});const rt=Ie(y,"network-request-failed"),Ut=Vr().setTimeout(()=>{Ae(rt)},ah.get());function on(){Vr().clearTimeout(Ut),Y(w)}w.ping(on).then(on,()=>{Ae(rt)})});return function(Y,Ae){return V.apply(this,arguments)}}()))}),wa.apply(this,arguments)}const ed={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Na{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wo(y,c,f,w,V,Y){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const Ae={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:w,v:me.SDK_VERSION,eventId:V};if(c instanceof Ji){c.setDefaultLanguage(y.languageCode),Ae.providerId=c.providerId||"",(0,G.xb)(c.getCustomParameters())||(Ae.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Ut,on]of Object.entries(Y||{}))Ae[Ut]=on}if(c instanceof ps){const Ut=c.getScopes().filter(on=>""!==on);Ut.length>0&&(Ae.scopes=Ut.join(","))}y.tenantId&&(Ae.tid=y.tenantId);const rt=Ae;for(const Ut of Object.keys(rt))void 0===rt[Ut]&&delete rt[Ut];return`${function Fo({config:y}){return y.emulator?rn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,G.xO)(rt).slice(1)}`}const Yu="webStorageSupport";class la extends class nd{constructor(c){this.factorId=c}_process(c,f,w){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,w);case"signin":return this._finalizeSignIn(c,f.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new la(c)}_finalizeEnroll(c,f,w){return function Go(y,c){return Dn(y,"POST","/v2/accounts/mfaEnrollment:finalize",In(y,c))}(c,{idToken:f,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function fr(y,c){return Dn(y,"POST","/v2/accounts/mfaSignIn:finalize",In(y,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Au=(()=>{class y{constructor(){}static assertion(f){return la._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var rd="@firebase/auth";class dh{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,E.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(w=>{var V;c((null===(V=w)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ca(){return window}function ru(){return(ru=(0,E.Z)(function*(y,c,f){var w;const{BuildInfo:V}=ca();ce(c.sessionId,"AuthEvent did not contain a session ID");const Y=yield Pi(c.sessionId),Ae={};return ee()?Ae.ibi=V.packageName:nr()?Ae.apn=V.packageName:$e(y,"operation-not-supported-in-this-environment"),V.displayName&&(Ae.appDisplayName=V.displayName),Ae.sessionId=Y,Wo(y,f,c.type,void 0,null!==(w=c.eventId)&&void 0!==w?w:void 0,Ae)})).apply(this,arguments)}function Sl(){return(Sl=(0,E.Z)(function*(y){const{BuildInfo:c}=ca(),f={};ee()?f.iosBundleId=c.packageName:nr()?f.androidPackageName=c.packageName:$e(y,"operation-not-supported-in-this-environment"),yield xa(y,f)})).apply(this,arguments)}function yh(){return(yh=(0,E.Z)(function*(y,c,f){const{cordova:w}=ca();let V=()=>{};try{yield new Promise((Y,Ae)=>{let rt=null;function Ut(){var an;Y();const js=null===(an=w.plugins.browsertab)||void 0===an?void 0:an.close;"function"==typeof js&&js(),"function"==typeof f?.close&&f.close()}function on(){rt||(rt=window.setTimeout(()=>{Ae(Ie(y,"redirect-cancelled-by-user"))},2e3))}function jn(){"visible"===document?.visibilityState&&on()}c.addPassiveListener(Ut),document.addEventListener("resume",on,!1),nr()&&document.addEventListener("visibilitychange",jn,!1),V=()=>{c.removePassiveListener(Ut),document.removeEventListener("resume",on,!1),document.removeEventListener("visibilitychange",jn,!1),rt&&window.clearTimeout(rt)}})}finally{V()}})).apply(this,arguments)}function Pi(y){return iu.apply(this,arguments)}function iu(){return(iu=(0,E.Z)(function*(y){const c=sd(y),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function sd(y){if(ce(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const c=new ArrayBuffer(y.length),f=new Uint8Array(c);for(let w=0;w<y.length;w++)f[w]=y.charCodeAt(w);return f}(0,G.Pz)("authIdTokenMaxAge"),function fh(y){(0,me._registerComponent)(new be.wA("auth",(c,{options:f})=>{const w=c.getProvider("app").getImmediate(),V=c.getProvider("heartbeat"),{apiKey:Y,authDomain:Ae}=w.options;return((rt,Ut)=>{ne(Y&&!Y.includes(":"),"invalid-api-key",{appName:rt.name}),ne(!Ae?.includes(":"),"argument-error",{appName:rt.name});const on={apiKey:Y,authDomain:Ae,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kn(y)},jn=new vn(rt,Ut,on);return function gt(y,c){const f=c?.persistence||[],w=(Array.isArray(f)?f:[f]).map(Ve);c?.errorMap&&y._updateErrorMap(c.errorMap),y._initializeWithPersistence(w,c?.popupRedirectResolver)}(jn,f),jn})(w,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,w)=>{c.getProvider("auth-internal").initialize()})),(0,me._registerComponent)(new be.wA("auth-internal",c=>{const f=rr(c.getProvider("auth").getImmediate());return new dh(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,me.registerVersion)(rd,"0.20.8",function hh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,me.registerVersion)(rd,"0.20.8","esm2017")}("Browser");class _h extends Ga{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,E.Z)(function*(){yield c.initPromise})()}}function od(y){return su.apply(this,arguments)}function su(){return(su=(0,E.Z)(function*(y){const c=yield Ml()._get(Qu(y));return c&&(yield Ml()._remove(Qu(y))),c})).apply(this,arguments)}function Al(){const y=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const w=Math.floor(Math.random()*c.length);y.push(c.charAt(w))}return y.join("")}function Ml(){return Ve(Zt)}function Qu(y){return nt("authEvent",y.config.apiKey,y.name)}function Rl(y){if(!y?.includes("?"))return{};const[c,...f]=y.split("?");return(0,G.zd)(f.join("?"))}function ud(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}function au(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Bo(y=(0,G.z$)()){return!("file:"!==au()&&"ionic:"!==au()&&"capacitor:"!==au()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function gr(){try{const y=self.localStorage,c=wr();if(y)return y.setItem(c,"1"),y.removeItem(c),!function wh(y=(0,G.z$)()){return function Ju(){return(0,G.w1)()&&11===document?.documentMode}()||function Eh(y=(0,G.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,G.hl)()}catch{return uc()&&(0,G.hl)()}return!1}function uc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ru(){return(function jf(){return"http:"===au()||"https:"===au()}()||(0,G.ru)()||Bo())&&!function ac(){return(0,G.b$)()||(0,G.UG)()}()&&gr()&&!uc()}function uu(){return Bo()&&typeof document<"u"}function el(){return(el=(0,E.Z)(function*(){return!!uu()&&new Promise(y=>{const c=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),y(!0)})})})).apply(this,arguments)}const Vo={LOCAL:"local",NONE:"none",SESSION:"session"},xu=ne,lu="persistence";function tl(y){return nl.apply(this,arguments)}function nl(){return(nl=(0,E.Z)(function*(y){yield y._initializationPromise;const c=dc(),f=nt(lu,y.config.apiKey,y.name);c&&c.setItem(f,y._getPersistence())})).apply(this,arguments)}function dc(){var y;try{return(null===(y=function cc(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const cu=ne;class $o{constructor(){this.browserResolver=Ve(class Dl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dn,this._completeRedirectFn=Fn,this._overrideRedirectResult=Ea}_openPopup(c,f,w,V){var Y=this;return(0,E.Z)(function*(){var Ae;ce(null===(Ae=Y.eventManagers[c._key()])||void 0===Ae?void 0:Ae.manager,"_initialize() not called before _openPopup()");const rt=Wo(c,f,w,mt(),V);return function tc(y,c,f,w=500,V=600){const Y=Math.max((window.screen.availHeight-V)/2,0).toString(),Ae=Math.max((window.screen.availWidth-w)/2,0).toString();let rt="";const Ut=Object.assign(Object.assign({},ed),{width:w.toString(),height:V.toString(),top:Y,left:Ae}),on=(0,G.z$)().toLowerCase();f&&(rt=dr(on)?"_blank":f),Gt(on)&&(c=c||"http://localhost",Ut.scrollbars="yes");const jn=Object.entries(Ut).reduce((js,[qo,ga])=>`${js}${qo}=${ga},`,"");if(function st(y=(0,G.z$)()){var c;return ee(y)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(on)&&"_self"!==rt)return function nc(y,c){const f=document.createElement("a");f.href=y,f.target=c;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(w)}(c||"",rt),new Na(null);const an=window.open(c||"",rt,jn);ne(an,y,"popup-blocked");try{an.focus()}catch{}return new Na(an)}(c,rt,wr())})()}_openRedirect(c,f,w,V){var Y=this;return(0,E.Z)(function*(){return yield Y._originValidation(c),function Tt(y){Vr().location.href=y}(Wo(c,f,w,mt(),V)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:V,promise:Y}=this.eventManagers[f];return V?Promise.resolve(V):(ce(Y,"If manager is not set, promise should be"),Y)}const w=this.initAndGetManager(c);return this.eventManagers[f]={promise:w},w.catch(()=>{delete this.eventManagers[f]}),w}initAndGetManager(c){var f=this;return(0,E.Z)(function*(){const w=yield function Wa(y){return wa.apply(this,arguments)}(c),V=new Ga(c);return w.register("authEvent",Y=>(ne(Y?.authEvent,c,"invalid-auth-event"),{status:V.onEvent(Y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:V},f.iframes[c._key()]=w,V})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(Yu,{type:Yu},V=>{var Y;const Ae=null===(Y=V?.[0])||void 0===Y?void 0:Y[Yu];void 0!==Ae&&f(!!Ae),$e(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function nu(y){return wl.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return tn()||An()||ee()}}),this.cordovaResolver=Ve(class Or{constructor(){this._redirectPersistence=dn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fn,this._overrideRedirectResult=Ea}_initialize(c){var f=this;return(0,E.Z)(function*(){const w=c._key();let V=f.eventManagers.get(w);return V||(V=new _h(c),f.eventManagers.set(w,V),f.attachCallbackListeners(c,V)),V})()}_openPopup(c){$e(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,w,V){var Y=this;return(0,E.Z)(function*(){!function $g(y){var c,f,w,V,Y,Ae,rt,Ut,on,jn;const an=ca();ne("function"==typeof(null===(c=an?.universalLinks)||void 0===c?void 0:c.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(f=an?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(Y=null===(V=null===(w=an?.cordova)||void 0===w?void 0:w.plugins)||void 0===V?void 0:V.browsertab)||void 0===Y?void 0:Y.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Ut=null===(rt=null===(Ae=an?.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===rt?void 0:rt.browsertab)||void 0===Ut?void 0:Ut.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(jn=null===(on=an?.cordova)||void 0===on?void 0:on.InAppBrowser)||void 0===jn?void 0:jn.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Ae=yield Y._initialize(c);yield Ae.initialized(),Ae.resetRedirect(),function va(){Qs.clear()}(),yield Y._originValidation(c);const rt=function Cl(y,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Al(),postBody:null,tenantId:y.tenantId,error:Ie(y,"no-auth-event")}}(c,w,V);yield function Vf(y,c){return Ml()._set(Qu(y),c)}(c,rt);const Ut=yield function Uo(y,c,f){return ru.apply(this,arguments)}(c,rt,f),on=yield function id(y){const{cordova:c}=ca();return new Promise(f=>{c.plugins.browsertab.isAvailable(w=>{let V=null;w?c.plugins.browsertab.openUrl(y):V=c.InAppBrowser.open(y,function Re(y=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(V)})})}(Ut);return function oc(y,c,f){return yh.apply(this,arguments)}(c,Ae,on)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Mu(y){return Sl.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:w,handleOpenURL:V,BuildInfo:Y}=ca(),Ae=setTimeout((0,E.Z)(function*(){yield od(c),f.onEvent(ud())}),500),rt=function(){var jn=(0,E.Z)(function*(an){clearTimeout(Ae);const js=yield od(c);let qo=null;js&&an?.url&&(qo=function Oa(y,c){var f,w;const V=function as(y){const c=Rl(y),f=c.link?decodeURIComponent(c.link):void 0,w=Rl(f).link,V=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Rl(V).link||V||w||f||y}(c);if(V.includes("/__/auth/callback")){const Y=Rl(V),Ae=Y.firebaseError?function Xu(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(Y.firebaseError)):null,rt=null===(w=null===(f=Ae?.code)||void 0===f?void 0:f.split("auth/"))||void 0===w?void 0:w[1],Ut=rt?Ie(rt):null;return Ut?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ut,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:V,postBody:null}}return null}(js,an.url)),f.onEvent(qo||ud())});return function(js){return jn.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,rt);const Ut=V,on=`${Y.packageName.toLowerCase()}://`;ca().handleOpenURL=function(){var jn=(0,E.Z)(function*(an){if(an.toLowerCase().startsWith(on)&&rt({url:an}),"function"==typeof Ut)try{Ut(an)}catch(js){console.error(js)}});return function(an){return jn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=dn,this._completeRedirectFn=Fn,this._overrideRedirectResult=Ea}_initialize(c){var f=this;return(0,E.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,w,V){var Y=this;return(0,E.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openPopup(c,f,w,V)})()}_openRedirect(c,f,w,V){var Y=this;return(0,E.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openRedirect(c,f,w,V)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return uu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,E.Z)(function*(){if(c.underlyingResolver)return;const f=yield function lc(){return el.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function ld(y){return y.unwrap()}function cd(y){return Pu(y)}function Pu(y){const{_tokenResponse:c}=y instanceof G.ZR?y.customData:y;if(!c)return null;if(!(y instanceof G.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return N.credentialFromResult(y);const f=c.providerId;if(!f||"password"===f)return null;let w;switch(f){case"google.com":w=Ho;break;case"facebook.com":w=zs;break;case"github.com":w=Bs;break;case"twitter.com":w=Oi;break;default:const{oauthIdToken:V,oauthAccessToken:Y,oauthTokenSecret:Ae,pendingToken:rt,nonce:Ut}=c;return Y||Ae||V||rt?rt?f.startsWith("saml.")?us._create(f,rt):He._fromParams({providerId:f,signInMethod:f,pendingToken:rt,idToken:V,accessToken:Y}):new As(f).credential({idToken:V,accessToken:Y,rawNonce:Ut}):null}return y instanceof G.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Ii(y,c){return c.catch(f=>{throw f instanceof G.ZR&&function Dh(y,c){var f,w;const V=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=c)||void 0===w?void 0:w.code))c.resolver=new Pl(y,function hr(y,c){var f;const w=(0,G.m9)(y),V=c;return ne(c.customData.operationType,w,"argument-error"),ne(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,w,"argument-error"),wi._fromError(w,V)}(y,c));else if(V){const Y=Pu(c),Ae=c;Y&&(Ae.credential=Y,Ae.tenantId=V.tenantId||void 0,Ae.email=V.email||void 0,Ae.phoneNumber=V.phoneNumber||void 0)}}(y,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:cd(f),additionalUserInfo:ge(f),user:ka.getOrCreate(V)}})}function xl(y,c){return hc.apply(this,arguments)}function hc(){return(hc=(0,E.Z)(function*(y,c){const f=yield c;return{verificationId:f.verificationId,confirm:w=>Ii(y,f.confirm(w))}})).apply(this,arguments)}class Pl{constructor(c,f){this.resolver=f,this.auth=function Os(y){return y.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Ii(ld(this.auth),this.resolver.resolveSignIn(c))}}class ka{constructor(c){this._delegate=c,this.multiFactor=function ea(y){const c=(0,G.m9)(y);return Es.has(c)||Es.set(c,ss._fromUser(c)),Es.get(c)}(c)}static getOrCreate(c){return ka.USER_MAP.has(c)||ka.USER_MAP.set(c,new ka(c)),ka.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,E.Z)(function*(){return Ii(f.auth,ys(f._delegate,c))})()}linkWithPhoneNumber(c,f){var w=this;return(0,E.Z)(function*(){return xl(w.auth,function uo(y,c,f){return ds.apply(this,arguments)}(w._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,E.Z)(function*(){return Ii(f.auth,function qr(y,c,f){return ws.apply(this,arguments)}(f._delegate,c,$o))})()}linkWithRedirect(c){var f=this;return(0,E.Z)(function*(){return yield tl(rr(f.auth)),function Fe(y,c,f){return function tt(y,c,f){return wt.apply(this,arguments)}(y,c,f)}(f._delegate,c,$o)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,E.Z)(function*(){return Ii(f.auth,Ms(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return xl(this.auth,function Su(y,c,f){return _a.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Ii(this.auth,function ko(y,c,f){return os.apply(this,arguments)}(this._delegate,c,$o))}reauthenticateWithRedirect(c){var f=this;return(0,E.Z)(function*(){return yield tl(rr(f.auth)),function O(y,c,f){return function K(y,c,f){return de.apply(this,arguments)}(y,c,f)}(f._delegate,c,$o)})()}sendEmailVerification(c){return function vs(y,c){return cs.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,E.Z)(function*(){return yield function ei(y,c){return Ks.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function A(y,c){return x((0,G.m9)(y),c,null)}(this._delegate,c)}updatePassword(c){return function $(y,c){return x((0,G.m9)(y),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function _(y,c){return C.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Mo(y,c){return _o.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Ei(y,c,f){return Vs.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ka.USER_MAP=new WeakMap;const du=ne;let dd=(()=>{class y{constructor(f,w){if(this.app=f,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;du(V,"invalid-api-key",{appName:f.name}),du(V,"invalid-api-key",{appName:f.name});const Y=typeof window<"u"?$o:void 0;this._delegate=w.initialize({options:{persistence:Gf(V,f.name),popupRedirectResolver:Y}}),this._delegate._updateErrorMap(Ge),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ka.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,w){!function Hs(y,c,f){const w=rr(y);ne(w._canInitEmulator,w,"emulator-config-failed"),ne(/^https?:\/\//.test(c),w,"invalid-emulator-scheme");const V=!!f?.disableWarnings,Y=Ni(c),{host:Ae,port:rt}=function Cr(y){const c=Ni(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(c.length));if(!f)return{host:"",port:null};const w=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(w);if(V){const Y=V[1];return{host:Y,port:Fs(w.substr(Y.length+1))}}{const[Y,Ae]=w.split(":");return{host:Y,port:Fs(Ae)}}}(c);w.config.emulator={url:`${Y}//${Ae}${null===rt?"":`:${rt}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Ae,port:rt,protocol:Y.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function Mi(){function y(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,w)}applyActionCode(f){return function fe(y,c){return Ne.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Ze(this._delegate,f)}confirmPasswordReset(f,w){return function k(y,c,f){return X.apply(this,arguments)}(this._delegate,f,w)}createUserWithEmailAndPassword(f,w){var V=this;return(0,E.Z)(function*(){return Ii(V._delegate,function Bn(y,c,f){return hn.apply(this,arguments)}(V._delegate,f,w))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function ui(y,c){return Wr.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Ar(y,c){return"EMAIL_SIGNIN"===Cs.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,E.Z)(function*(){du(Ru(),f._delegate,"operation-not-supported-in-this-environment");const w=yield function Ht(y,c){return Mn.apply(this,arguments)}(f._delegate,$o);return w?Ii(f._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ou(y,c){rr(y)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,w,V){const{next:Y,error:Ae,complete:rt}=hd(f,w,V);return this._delegate.onAuthStateChanged(Y,Ae,rt)}onIdTokenChanged(f,w,V){const{next:Y,error:Ae,complete:rt}=hd(f,w,V);return this._delegate.onIdTokenChanged(Y,Ae,rt)}sendSignInLinkToEmail(f,w){return function Ur(y,c,f){return Vn.apply(this,arguments)}(this._delegate,f,w)}sendPasswordResetEmail(f,w){return function yo(y,c,f){return B.apply(this,arguments)}(this._delegate,f,w||void 0)}setPersistence(f){var w=this;return(0,E.Z)(function*(){let V;switch(function Ih(y,c){xu(Object.values(Vo).includes(c),y,"invalid-persistence-type"),(0,G.b$)()?xu(c!==Vo.SESSION,y,"unsupported-persistence-type"):(0,G.UG)()?xu(c===Vo.NONE,y,"unsupported-persistence-type"):uc()?xu(c===Vo.NONE||c===Vo.LOCAL&&(0,G.hl)(),y,"unsupported-persistence-type"):xu(c===Vo.NONE||gr(),y,"unsupported-persistence-type")}(w._delegate,f),f){case Vo.SESSION:V=dn;break;case Vo.LOCAL:V=(yield Ve(Sn)._isAvailable())?Sn:Zt;break;case Vo.NONE:V=Ce;break;default:return $e("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Ii(this._delegate,function ms(y){return Fr.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Ii(this._delegate,Dr(this._delegate,f))}signInWithCustomToken(f){return Ii(this._delegate,function po(y,c){return go.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,w){return Ii(this._delegate,function ar(y,c,f){return Dr((0,G.m9)(y),$i.credential(c,f))}(this._delegate,f,w))}signInWithEmailLink(f,w){return Ii(this._delegate,function _s(y,c,f){return Br.apply(this,arguments)}(this._delegate,f,w))}signInWithPhoneNumber(f,w){return xl(this._delegate,function ja(y,c,f){return Oo.apply(this,arguments)}(this._delegate,f,w))}signInWithPopup(f){var w=this;return(0,E.Z)(function*(){return du(Ru(),w._delegate,"operation-not-supported-in-this-environment"),Ii(w._delegate,function xr(y,c,f){return pr.apply(this,arguments)}(w._delegate,f,$o))})()}signInWithRedirect(f){var w=this;return(0,E.Z)(function*(){return du(Ru(),w._delegate,"operation-not-supported-in-this-environment"),yield tl(w._delegate),function xi(y,c,f){return function Ma(y,c,f){return P.apply(this,arguments)}(y,c,f)}(w._delegate,f,$o)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Kt(y,c){return Bt.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Vo,y})();function hd(y,c,f){let w=y;"function"!=typeof y&&({next:w,error:c,complete:f}=y);const V=w;return{next:Ae=>V(Ae&&ka.getOrCreate(Ae)),error:c,complete:f}}function Gf(y,c){const f=function Hf(y,c){const f=dc();if(!f)return[];const w=nt(lu,y,c);switch(f.getItem(w)){case Vo.NONE:return[Ce];case Vo.LOCAL:return[Sn,dn];case Vo.SESSION:return[dn];default:return[]}}(y,c);if(typeof self<"u"&&!f.includes(Sn)&&f.push(Sn),typeof window<"u")for(const w of[Zt,dn])f.includes(w)||f.push(w);return f.includes(Ce)||f.push(Ce),f}class hu{constructor(){this.providerId="phone",this._delegate=new N(ld(z.Z.auth()))}static credential(c,f){return N.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}hu.PHONE_SIGN_IN_METHOD=N.PHONE_SIGN_IN_METHOD,hu.PROVIDER_ID=N.PROVIDER_ID;const bh=ne;class zf{constructor(c,f,w=z.Z.app()){var V;bh(null===(V=w.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Fi(c,f,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fd(y){y.INTERNAL.registerComponent(new be.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),w=c.getProvider("auth");return new dd(f,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:$i,FacebookAuthProvider:zs,GithubAuthProvider:Bs,GoogleAuthProvider:Ho,OAuthProvider:As,SAMLAuthProvider:ts,PhoneAuthProvider:hu,PhoneMultiFactorGenerator:Au,RecaptchaVerifier:zf,TwitterAuthProvider:Oi,Auth:dd,AuthCredential:Qr,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.21")}(z.Z)},1135:(Rt,Ue,F)=>{"use strict";F.d(Ue,{X:()=>z});var E=F(7579);class z extends E.x{constructor(me){super(),this._value=me}get value(){return this.getValue()}_subscribe(me){const _e=super._subscribe(me);return!_e.closed&&me.next(this._value),_e}getValue(){const{hasError:me,thrownError:_e,_value:ve}=this;if(me)throw _e;return this._throwIfClosed(),ve}next(me){super.next(this._value=me)}}},9751:(Rt,Ue,F)=>{"use strict";F.d(Ue,{y:()=>pe});var E=F(930),z=F(727),G=F(8822),me=F(9635),_e=F(2416),ve=F(576),be=F(2806);let pe=(()=>{class we{constructor(Xe){Xe&&(this._subscribe=Xe)}lift(Xe){const Ge=new we;return Ge.source=this,Ge.operator=Xe,Ge}subscribe(Xe,Ge,ct){const ze=function le(we){return we&&we instanceof E.Lv||function se(we){return we&&(0,ve.m)(we.next)&&(0,ve.m)(we.error)&&(0,ve.m)(we.complete)}(we)&&(0,z.Nn)(we)}(Xe)?Xe:new E.Hp(Xe,Ge,ct);return(0,be.x)(()=>{const{operator:Ke,source:De}=this;ze.add(Ke?Ke.call(ze,De):De?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Xe){try{return this._subscribe(Xe)}catch(Ge){Xe.error(Ge)}}forEach(Xe,Ge){return new(Ge=Te(Ge))((ct,ze)=>{const Ke=new E.Hp({next:De=>{try{Xe(De)}catch(Ot){ze(Ot),Ke.unsubscribe()}},error:ze,complete:ct});this.subscribe(Ke)})}_subscribe(Xe){var Ge;return null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(Xe)}[G.L](){return this}pipe(...Xe){return(0,me.U)(Xe)(this)}toPromise(Xe){return new(Xe=Te(Xe))((Ge,ct)=>{let ze;this.subscribe(Ke=>ze=Ke,Ke=>ct(Ke),()=>Ge(ze))})}}return we.create=it=>new we(it),we})();function Te(we){var it;return null!==(it=we??_e.v.Promise)&&void 0!==it?it:Promise}},4707:(Rt,Ue,F)=>{"use strict";F.d(Ue,{t:()=>G});var E=F(7579),z=F(6063);class G extends E.x{constructor(_e=1/0,ve=1/0,be=z.l){super(),this._bufferSize=_e,this._windowTime=ve,this._timestampProvider=be,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ve===1/0,this._bufferSize=Math.max(1,_e),this._windowTime=Math.max(1,ve)}next(_e){const{isStopped:ve,_buffer:be,_infiniteTimeWindow:pe,_timestampProvider:Te,_windowTime:se}=this;ve||(be.push(_e),!pe&&be.push(Te.now()+se)),this._trimBuffer(),super.next(_e)}_subscribe(_e){this._throwIfClosed(),this._trimBuffer();const ve=this._innerSubscribe(_e),{_infiniteTimeWindow:be,_buffer:pe}=this,Te=pe.slice();for(let se=0;se<Te.length&&!_e.closed;se+=be?1:2)_e.next(Te[se]);return this._checkFinalizedStatuses(_e),ve}_trimBuffer(){const{_bufferSize:_e,_timestampProvider:ve,_buffer:be,_infiniteTimeWindow:pe}=this,Te=(pe?1:2)*_e;if(_e<1/0&&Te<be.length&&be.splice(0,be.length-Te),!pe){const se=ve.now();let le=0;for(let we=1;we<be.length&&be[we]<=se;we+=2)le=we;le&&be.splice(0,le+1)}}}},7579:(Rt,Ue,F)=>{"use strict";F.d(Ue,{x:()=>be});var E=F(9751),z=F(727);const me=(0,F(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=F(8737),ve=F(2806);let be=(()=>{class Te extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(le){const we=new pe(this,this);return we.operator=le,we}_throwIfClosed(){if(this.closed)throw new me}next(le){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const we of this.currentObservers)we.next(le)}})}error(le){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=le;const{observers:we}=this;for(;we.length;)we.shift().error(le)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:le}=this;for(;le.length;)le.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var le;return(null===(le=this.observers)||void 0===le?void 0:le.length)>0}_trySubscribe(le){return this._throwIfClosed(),super._trySubscribe(le)}_subscribe(le){return this._throwIfClosed(),this._checkFinalizedStatuses(le),this._innerSubscribe(le)}_innerSubscribe(le){const{hasError:we,isStopped:it,observers:Xe}=this;return we||it?z.Lc:(this.currentObservers=null,Xe.push(le),new z.w0(()=>{this.currentObservers=null,(0,_e.P)(Xe,le)}))}_checkFinalizedStatuses(le){const{hasError:we,thrownError:it,isStopped:Xe}=this;we?le.error(it):Xe&&le.complete()}asObservable(){const le=new E.y;return le.source=this,le}}return Te.create=(se,le)=>new pe(se,le),Te})();class pe extends be{constructor(se,le){super(),this.destination=se,this.source=le}next(se){var le,we;null===(we=null===(le=this.destination)||void 0===le?void 0:le.next)||void 0===we||we.call(le,se)}error(se){var le,we;null===(we=null===(le=this.destination)||void 0===le?void 0:le.error)||void 0===we||we.call(le,se)}complete(){var se,le;null===(le=null===(se=this.destination)||void 0===se?void 0:se.complete)||void 0===le||le.call(se)}_subscribe(se){var le,we;return null!==(we=null===(le=this.source)||void 0===le?void 0:le.subscribe(se))&&void 0!==we?we:z.Lc}}},930:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Hp:()=>ct,Lv:()=>we});var E=F(576),z=F(727),G=F(2416),me=F(7849),_e=F(5032);const ve=Te("C",void 0,void 0);function Te($e,Ie,ke){return{kind:$e,value:Ie,error:ke}}var se=F(3410),le=F(2806);class we extends z.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,z.Nn)(Ie)&&Ie.add(this)):this.destination=Ot}static create(Ie,ke,ot){return new ct(Ie,ke,ot)}next(Ie){this.isStopped?De(function pe($e){return Te("N",$e,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?De(function be($e){return Te("E",void 0,$e)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?De(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const it=Function.prototype.bind;function Xe($e,Ie){return it.call($e,Ie)}class Ge{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:ke}=this;if(ke.next)try{ke.next(Ie)}catch(ot){ze(ot)}}error(Ie){const{partialObserver:ke}=this;if(ke.error)try{ke.error(Ie)}catch(ot){ze(ot)}else ze(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(ke){ze(ke)}}}class ct extends we{constructor(Ie,ke,ot){let It;if(super(),(0,E.m)(Ie)||!Ie)It={next:Ie??void 0,error:ke??void 0,complete:ot??void 0};else{let ne;this&&G.v.useDeprecatedNextContext?(ne=Object.create(Ie),ne.unsubscribe=()=>this.unsubscribe(),It={next:Ie.next&&Xe(Ie.next,ne),error:Ie.error&&Xe(Ie.error,ne),complete:Ie.complete&&Xe(Ie.complete,ne)}):It=Ie}this.destination=new Ge(It)}}function ze($e){G.v.useDeprecatedSynchronousErrorHandling?(0,le.O)($e):(0,me.h)($e)}function De($e,Ie){const{onStoppedNotification:ke}=G.v;ke&&se.z.setTimeout(()=>ke($e,Ie))}const Ot={closed:!0,next:_e.Z,error:function Ke($e){throw $e},complete:_e.Z}},727:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Lc:()=>ve,w0:()=>_e,Nn:()=>be});var E=F(576);const G=(0,F(3888).d)(Te=>function(le){Te(this),this.message=le?`${le.length} errors occurred during unsubscription:\n${le.map((we,it)=>`${it+1}) ${we.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=le});var me=F(8737);class _e{constructor(se){this.initialTeardown=se,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let se;if(!this.closed){this.closed=!0;const{_parentage:le}=this;if(le)if(this._parentage=null,Array.isArray(le))for(const Xe of le)Xe.remove(this);else le.remove(this);const{initialTeardown:we}=this;if((0,E.m)(we))try{we()}catch(Xe){se=Xe instanceof G?Xe.errors:[Xe]}const{_finalizers:it}=this;if(it){this._finalizers=null;for(const Xe of it)try{pe(Xe)}catch(Ge){se=se??[],Ge instanceof G?se=[...se,...Ge.errors]:se.push(Ge)}}if(se)throw new G(se)}}add(se){var le;if(se&&se!==this)if(this.closed)pe(se);else{if(se instanceof _e){if(se.closed||se._hasParent(this))return;se._addParent(this)}(this._finalizers=null!==(le=this._finalizers)&&void 0!==le?le:[]).push(se)}}_hasParent(se){const{_parentage:le}=this;return le===se||Array.isArray(le)&&le.includes(se)}_addParent(se){const{_parentage:le}=this;this._parentage=Array.isArray(le)?(le.push(se),le):le?[le,se]:se}_removeParent(se){const{_parentage:le}=this;le===se?this._parentage=null:Array.isArray(le)&&(0,me.P)(le,se)}remove(se){const{_finalizers:le}=this;le&&(0,me.P)(le,se),se instanceof _e&&se._removeParent(this)}}_e.EMPTY=(()=>{const Te=new _e;return Te.closed=!0,Te})();const ve=_e.EMPTY;function be(Te){return Te instanceof _e||Te&&"closed"in Te&&(0,E.m)(Te.remove)&&(0,E.m)(Te.add)&&(0,E.m)(Te.unsubscribe)}function pe(Te){(0,E.m)(Te)?Te():Te.unsubscribe()}},2416:(Rt,Ue,F)=>{"use strict";F.d(Ue,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(Rt,Ue,F)=>{"use strict";F.d(Ue,{c:()=>ve});var E=F(9751),z=F(727),G=F(8343),me=F(5403),_e=F(4482);class ve extends E.y{constructor(pe,Te){super(),this.source=pe,this.subjectFactory=Te,this._subject=null,this._refCount=0,this._connection=null,(0,_e.A)(pe)&&(this.lift=pe.lift)}_subscribe(pe){return this.getSubject().subscribe(pe)}getSubject(){const pe=this._subject;return(!pe||pe.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:pe}=this;this._subject=this._connection=null,pe?.unsubscribe()}connect(){let pe=this._connection;if(!pe){pe=this._connection=new z.w0;const Te=this.getSubject();pe.add(this.source.subscribe((0,me.x)(Te,void 0,()=>{this._teardown(),Te.complete()},se=>{this._teardown(),Te.error(se)},()=>this._teardown()))),pe.closed&&(this._connection=null,pe=z.w0.EMPTY)}return pe}refCount(){return(0,G.x)()(this)}}},9841:(Rt,Ue,F)=>{"use strict";F.d(Ue,{a:()=>se});var E=F(9751),z=F(4742),G=F(8996),me=F(4671),_e=F(3268),ve=F(3269),be=F(1810),pe=F(5403),Te=F(9672);function se(...it){const Xe=(0,ve.yG)(it),Ge=(0,ve.jO)(it),{args:ct,keys:ze}=(0,z.D)(it);if(0===ct.length)return(0,G.D)([],Xe);const Ke=new E.y(function le(it,Xe,Ge=me.y){return ct=>{we(Xe,()=>{const{length:ze}=it,Ke=new Array(ze);let De=ze,Ot=ze;for(let $e=0;$e<ze;$e++)we(Xe,()=>{const Ie=(0,G.D)(it[$e],Xe);let ke=!1;Ie.subscribe((0,pe.x)(ct,ot=>{Ke[$e]=ot,ke||(ke=!0,Ot--),Ot||ct.next(Ge(Ke.slice()))},()=>{--De||ct.complete()}))},ct)},ct)}}(ct,Xe,ze?De=>(0,be.n)(ze,De):me.y));return Ge?Ke.pipe((0,_e.Z)(Ge)):Ke}function we(it,Xe,Ge){it?(0,Te.f)(Ge,it,Xe):Xe()}},7272:(Rt,Ue,F)=>{"use strict";F.d(Ue,{z:()=>_e});var E=F(8189),G=F(3269),me=F(8996);function _e(...ve){return function z(){return(0,E.J)(1)}()((0,me.D)(ve,(0,G.yG)(ve)))}},9770:(Rt,Ue,F)=>{"use strict";F.d(Ue,{P:()=>G});var E=F(9751),z=F(8421);function G(me){return new E.y(_e=>{(0,z.Xf)(me()).subscribe(_e)})}},515:(Rt,Ue,F)=>{"use strict";F.d(Ue,{E:()=>z});const z=new(F(9751).y)(_e=>_e.complete())},8996:(Rt,Ue,F)=>{"use strict";F.d(Ue,{D:()=>Ie});var E=F(8421),z=F(5363),G=F(9468),ve=F(9751),pe=F(2202),Te=F(576),se=F(9672);function we(ke,ot){if(!ke)throw new Error("Iterable cannot be null");return new ve.y(It=>{(0,se.f)(It,ot,()=>{const ne=ke[Symbol.asyncIterator]();(0,se.f)(It,ot,()=>{ne.next().then(Qe=>{Qe.done?It.complete():It.next(Qe.value)})},0,!0)})})}var it=F(3670),Xe=F(8239),Ge=F(1144),ct=F(6495),ze=F(2206),Ke=F(4532),De=F(3260);function Ie(ke,ot){return ot?function $e(ke,ot){if(null!=ke){if((0,it.c)(ke))return function me(ke,ot){return(0,E.Xf)(ke).pipe((0,G.R)(ot),(0,z.Q)(ot))}(ke,ot);if((0,Ge.z)(ke))return function be(ke,ot){return new ve.y(It=>{let ne=0;return ot.schedule(function(){ne===ke.length?It.complete():(It.next(ke[ne++]),It.closed||this.schedule())})})}(ke,ot);if((0,Xe.t)(ke))return function _e(ke,ot){return(0,E.Xf)(ke).pipe((0,G.R)(ot),(0,z.Q)(ot))}(ke,ot);if((0,ze.D)(ke))return we(ke,ot);if((0,ct.T)(ke))return function le(ke,ot){return new ve.y(It=>{let ne;return(0,se.f)(It,ot,()=>{ne=ke[pe.h](),(0,se.f)(It,ot,()=>{let Qe,ce;try{({value:Qe,done:ce}=ne.next())}catch(Me){return void It.error(Me)}ce?It.complete():It.next(Qe)},0,!0)}),()=>(0,Te.m)(ne?.return)&&ne.return()})}(ke,ot);if((0,De.L)(ke))return function Ot(ke,ot){return we((0,De.Q)(ke),ot)}(ke,ot)}throw(0,Ke.z)(ke)}(ke,ot):(0,E.Xf)(ke)}},8421:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Xf:()=>it});var E=F(655),z=F(1144),G=F(8239),me=F(9751),_e=F(3670),ve=F(2206),be=F(4532),pe=F(6495),Te=F(3260),se=F(576),le=F(7849),we=F(8822);function it($e){if($e instanceof me.y)return $e;if(null!=$e){if((0,_e.c)($e))return function Xe($e){return new me.y(Ie=>{const ke=$e[we.L]();if((0,se.m)(ke.subscribe))return ke.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}($e);if((0,z.z)($e))return function Ge($e){return new me.y(Ie=>{for(let ke=0;ke<$e.length&&!Ie.closed;ke++)Ie.next($e[ke]);Ie.complete()})}($e);if((0,G.t)($e))return function ct($e){return new me.y(Ie=>{$e.then(ke=>{Ie.closed||(Ie.next(ke),Ie.complete())},ke=>Ie.error(ke)).then(null,le.h)})}($e);if((0,ve.D)($e))return Ke($e);if((0,pe.T)($e))return function ze($e){return new me.y(Ie=>{for(const ke of $e)if(Ie.next(ke),Ie.closed)return;Ie.complete()})}($e);if((0,Te.L)($e))return function De($e){return Ke((0,Te.Q)($e))}($e)}throw(0,be.z)($e)}function Ke($e){return new me.y(Ie=>{(function Ot($e,Ie){var ke,ot,It,ne;return(0,E.mG)(this,void 0,void 0,function*(){try{for(ke=(0,E.KL)($e);!(ot=yield ke.next()).done;)if(Ie.next(ot.value),Ie.closed)return}catch(Qe){It={error:Qe}}finally{try{ot&&!ot.done&&(ne=ke.return)&&(yield ne.call(ke))}finally{if(It)throw It.error}}Ie.complete()})})($e,Ie).catch(ke=>Ie.error(ke))})}},6451:(Rt,Ue,F)=>{"use strict";F.d(Ue,{T:()=>ve});var E=F(8189),z=F(8421),G=F(515),me=F(3269),_e=F(8996);function ve(...be){const pe=(0,me.yG)(be),Te=(0,me._6)(be,1/0),se=be;return se.length?1===se.length?(0,z.Xf)(se[0]):(0,E.J)(Te)((0,_e.D)(se,pe)):G.E}},9646:(Rt,Ue,F)=>{"use strict";F.d(Ue,{of:()=>G});var E=F(3269),z=F(8996);function G(...me){const _e=(0,E.yG)(me);return(0,z.D)(me,_e)}},2843:(Rt,Ue,F)=>{"use strict";F.d(Ue,{_:()=>G});var E=F(9751),z=F(576);function G(me,_e){const ve=(0,z.m)(me)?me:()=>me,be=pe=>pe.error(ve());return new E.y(_e?pe=>_e.schedule(be,0,pe):be)}},5403:(Rt,Ue,F)=>{"use strict";F.d(Ue,{x:()=>z});var E=F(930);function z(me,_e,ve,be,pe){return new G(me,_e,ve,be,pe)}class G extends E.Lv{constructor(_e,ve,be,pe,Te,se){super(_e),this.onFinalize=Te,this.shouldUnsubscribe=se,this._next=ve?function(le){try{ve(le)}catch(we){_e.error(we)}}:super._next,this._error=pe?function(le){try{pe(le)}catch(we){_e.error(we)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(le){_e.error(le)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(_e=this.onFinalize)||void 0===_e||_e.call(this))}}}},4351:(Rt,Ue,F)=>{"use strict";F.d(Ue,{b:()=>G});var E=F(5577),z=F(576);function G(me,_e){return(0,z.m)(_e)?(0,E.z)(me,_e,1):(0,E.z)(me,1)}},8372:(Rt,Ue,F)=>{"use strict";F.d(Ue,{b:()=>me});var E=F(4986),z=F(4482),G=F(5403);function me(_e,ve=E.z){return(0,z.e)((be,pe)=>{let Te=null,se=null,le=null;const we=()=>{if(Te){Te.unsubscribe(),Te=null;const Xe=se;se=null,pe.next(Xe)}};function it(){const Xe=le+_e,Ge=ve.now();if(Ge<Xe)return Te=this.schedule(void 0,Xe-Ge),void pe.add(Te);we()}be.subscribe((0,G.x)(pe,Xe=>{se=Xe,le=ve.now(),Te||(Te=ve.schedule(it,_e),pe.add(Te))},()=>{we(),pe.complete()},void 0,()=>{se=Te=null}))})}},6590:(Rt,Ue,F)=>{"use strict";F.d(Ue,{d:()=>G});var E=F(4482),z=F(5403);function G(me){return(0,E.e)((_e,ve)=>{let be=!1;_e.subscribe((0,z.x)(ve,pe=>{be=!0,ve.next(pe)},()=>{be||ve.next(me),ve.complete()}))})}},1884:(Rt,Ue,F)=>{"use strict";F.d(Ue,{x:()=>me});var E=F(4671),z=F(4482),G=F(5403);function me(ve,be=E.y){return ve=ve??_e,(0,z.e)((pe,Te)=>{let se,le=!0;pe.subscribe((0,G.x)(Te,we=>{const it=be(we);(le||!ve(se,it))&&(le=!1,se=it,Te.next(we))}))})}function _e(ve,be){return ve===be}},9300:(Rt,Ue,F)=>{"use strict";F.d(Ue,{h:()=>G});var E=F(4482),z=F(5403);function G(me,_e){return(0,E.e)((ve,be)=>{let pe=0;ve.subscribe((0,z.x)(be,Te=>me.call(_e,Te,pe++)&&be.next(Te)))})}},590:(Rt,Ue,F)=>{"use strict";F.d(Ue,{P:()=>be});var E=F(6805),z=F(9300),G=F(5698),me=F(6590),_e=F(8068),ve=F(4671);function be(pe,Te){const se=arguments.length>=2;return le=>le.pipe(pe?(0,z.h)((we,it)=>pe(we,it,le)):ve.y,(0,G.q)(1),se?(0,me.d)(Te):(0,_e.T)(()=>new E.K))}},4004:(Rt,Ue,F)=>{"use strict";F.d(Ue,{U:()=>G});var E=F(4482),z=F(5403);function G(me,_e){return(0,E.e)((ve,be)=>{let pe=0;ve.subscribe((0,z.x)(be,Te=>{be.next(me.call(_e,Te,pe++))}))})}},8189:(Rt,Ue,F)=>{"use strict";F.d(Ue,{J:()=>G});var E=F(5577),z=F(4671);function G(me=1/0){return(0,E.z)(z.y,me)}},5577:(Rt,Ue,F)=>{"use strict";F.d(Ue,{z:()=>pe});var E=F(4004),z=F(8421),G=F(4482),me=F(9672),_e=F(5403),be=F(576);function pe(Te,se,le=1/0){return(0,be.m)(se)?pe((we,it)=>(0,E.U)((Xe,Ge)=>se(we,Xe,it,Ge))((0,z.Xf)(Te(we,it))),le):("number"==typeof se&&(le=se),(0,G.e)((we,it)=>function ve(Te,se,le,we,it,Xe,Ge,ct){const ze=[];let Ke=0,De=0,Ot=!1;const $e=()=>{Ot&&!ze.length&&!Ke&&se.complete()},Ie=ot=>Ke<we?ke(ot):ze.push(ot),ke=ot=>{Xe&&se.next(ot),Ke++;let It=!1;(0,z.Xf)(le(ot,De++)).subscribe((0,_e.x)(se,ne=>{it?.(ne),Xe?Ie(ne):se.next(ne)},()=>{It=!0},void 0,()=>{if(It)try{for(Ke--;ze.length&&Ke<we;){const ne=ze.shift();Ge?(0,me.f)(se,Ge,()=>ke(ne)):ke(ne)}$e()}catch(ne){se.error(ne)}}))};return Te.subscribe((0,_e.x)(se,Ie,()=>{Ot=!0,$e()})),()=>{ct?.()}}(we,it,Te,le)))}},5363:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Q:()=>me});var E=F(9672),z=F(4482),G=F(5403);function me(_e,ve=0){return(0,z.e)((be,pe)=>{be.subscribe((0,G.x)(pe,Te=>(0,E.f)(pe,_e,()=>pe.next(Te),ve),()=>(0,E.f)(pe,_e,()=>pe.complete(),ve),Te=>(0,E.f)(pe,_e,()=>pe.error(Te),ve)))})}},8343:(Rt,Ue,F)=>{"use strict";F.d(Ue,{x:()=>G});var E=F(4482),z=F(5403);function G(){return(0,E.e)((me,_e)=>{let ve=null;me._refCount++;const be=(0,z.x)(_e,void 0,void 0,void 0,()=>{if(!me||me._refCount<=0||0<--me._refCount)return void(ve=null);const pe=me._connection,Te=ve;ve=null,pe&&(!Te||pe===Te)&&pe.unsubscribe(),_e.unsubscribe()});me.subscribe(be),be.closed||(ve=me.connect())})}},5026:(Rt,Ue,F)=>{"use strict";F.d(Ue,{R:()=>me});var E=F(4482),z=F(5403);function G(_e,ve,be,pe,Te){return(se,le)=>{let we=be,it=ve,Xe=0;se.subscribe((0,z.x)(le,Ge=>{const ct=Xe++;it=we?_e(it,Ge,ct):(we=!0,Ge),pe&&le.next(it)},Te&&(()=>{we&&le.next(it),le.complete()})))}}function me(_e,ve){return(0,E.e)(G(_e,ve,arguments.length>=2,!0))}},3099:(Rt,Ue,F)=>{"use strict";F.d(Ue,{B:()=>_e});var E=F(8421),z=F(7579),G=F(930),me=F(4482);function _e(be={}){const{connector:pe=(()=>new z.x),resetOnError:Te=!0,resetOnComplete:se=!0,resetOnRefCountZero:le=!0}=be;return we=>{let it,Xe,Ge,ct=0,ze=!1,Ke=!1;const De=()=>{Xe?.unsubscribe(),Xe=void 0},Ot=()=>{De(),it=Ge=void 0,ze=Ke=!1},$e=()=>{const Ie=it;Ot(),Ie?.unsubscribe()};return(0,me.e)((Ie,ke)=>{ct++,!Ke&&!ze&&De();const ot=Ge=Ge??pe();ke.add(()=>{ct--,0===ct&&!Ke&&!ze&&(Xe=ve($e,le))}),ot.subscribe(ke),!it&&ct>0&&(it=new G.Hp({next:It=>ot.next(It),error:It=>{Ke=!0,De(),Xe=ve(Ot,Te,It),ot.error(It)},complete:()=>{ze=!0,De(),Xe=ve(Ot,se),ot.complete()}}),(0,E.Xf)(Ie).subscribe(it))})(we)}}function ve(be,pe,...Te){if(!0===pe)return void be();if(!1===pe)return;const se=new G.Hp({next:()=>{se.unsubscribe(),be()}});return pe(...Te).subscribe(se)}},4782:(Rt,Ue,F)=>{"use strict";F.d(Ue,{d:()=>G});var E=F(4707),z=F(3099);function G(me,_e,ve){let be,pe=!1;return me&&"object"==typeof me?({bufferSize:be=1/0,windowTime:_e=1/0,refCount:pe=!1,scheduler:ve}=me):be=me??1/0,(0,z.B)({connector:()=>new E.t(be,_e,ve),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:pe})}},8675:(Rt,Ue,F)=>{"use strict";F.d(Ue,{O:()=>me});var E=F(7272),z=F(3269),G=F(4482);function me(..._e){const ve=(0,z.yG)(_e);return(0,G.e)((be,pe)=>{(ve?(0,E.z)(_e,be,ve):(0,E.z)(_e,be)).subscribe(pe)})}},9468:(Rt,Ue,F)=>{"use strict";F.d(Ue,{R:()=>z});var E=F(4482);function z(G,me=0){return(0,E.e)((_e,ve)=>{ve.add(G.schedule(()=>_e.subscribe(ve),me))})}},3900:(Rt,Ue,F)=>{"use strict";F.d(Ue,{w:()=>me});var E=F(8421),z=F(4482),G=F(5403);function me(_e,ve){return(0,z.e)((be,pe)=>{let Te=null,se=0,le=!1;const we=()=>le&&!Te&&pe.complete();be.subscribe((0,G.x)(pe,it=>{Te?.unsubscribe();let Xe=0;const Ge=se++;(0,E.Xf)(_e(it,Ge)).subscribe(Te=(0,G.x)(pe,ct=>pe.next(ve?ve(it,ct,Ge,Xe++):ct),()=>{Te=null,we()}))},()=>{le=!0,we()}))})}},5698:(Rt,Ue,F)=>{"use strict";F.d(Ue,{q:()=>me});var E=F(515),z=F(4482),G=F(5403);function me(_e){return _e<=0?()=>E.E:(0,z.e)((ve,be)=>{let pe=0;ve.subscribe((0,G.x)(be,Te=>{++pe<=_e&&(be.next(Te),_e<=pe&&be.complete())}))})}},2529:(Rt,Ue,F)=>{"use strict";F.d(Ue,{o:()=>G});var E=F(4482),z=F(5403);function G(me,_e=!1){return(0,E.e)((ve,be)=>{let pe=0;ve.subscribe((0,z.x)(be,Te=>{const se=me(Te,pe++);(se||_e)&&be.next(Te),!se&&be.complete()}))})}},8505:(Rt,Ue,F)=>{"use strict";F.d(Ue,{b:()=>_e});var E=F(576),z=F(4482),G=F(5403),me=F(4671);function _e(ve,be,pe){const Te=(0,E.m)(ve)||be||pe?{next:ve,error:be,complete:pe}:ve;return Te?(0,z.e)((se,le)=>{var we;null===(we=Te.subscribe)||void 0===we||we.call(Te);let it=!0;se.subscribe((0,G.x)(le,Xe=>{var Ge;null===(Ge=Te.next)||void 0===Ge||Ge.call(Te,Xe),le.next(Xe)},()=>{var Xe;it=!1,null===(Xe=Te.complete)||void 0===Xe||Xe.call(Te),le.complete()},Xe=>{var Ge;it=!1,null===(Ge=Te.error)||void 0===Ge||Ge.call(Te,Xe),le.error(Xe)},()=>{var Xe,Ge;it&&(null===(Xe=Te.unsubscribe)||void 0===Xe||Xe.call(Te)),null===(Ge=Te.finalize)||void 0===Ge||Ge.call(Te)}))}):me.y}},8068:(Rt,Ue,F)=>{"use strict";F.d(Ue,{T:()=>me});var E=F(6805),z=F(4482),G=F(5403);function me(ve=_e){return(0,z.e)((be,pe)=>{let Te=!1;be.subscribe((0,G.x)(pe,se=>{Te=!0,pe.next(se)},()=>Te?pe.complete():pe.error(ve())))})}function _e(){return new E.K}},4408:(Rt,Ue,F)=>{"use strict";F.d(Ue,{o:()=>_e});var E=F(727);class z extends E.w0{constructor(be,pe){super()}schedule(be,pe=0){return this}}const G={setInterval(ve,be,...pe){const{delegate:Te}=G;return Te?.setInterval?Te.setInterval(ve,be,...pe):setInterval(ve,be,...pe)},clearInterval(ve){const{delegate:be}=G;return(be?.clearInterval||clearInterval)(ve)},delegate:void 0};var me=F(8737);class _e extends z{constructor(be,pe){super(be,pe),this.scheduler=be,this.work=pe,this.pending=!1}schedule(be,pe=0){var Te;if(this.closed)return this;this.state=be;const se=this.id,le=this.scheduler;return null!=se&&(this.id=this.recycleAsyncId(le,se,pe)),this.pending=!0,this.delay=pe,this.id=null!==(Te=this.id)&&void 0!==Te?Te:this.requestAsyncId(le,this.id,pe),this}requestAsyncId(be,pe,Te=0){return G.setInterval(be.flush.bind(be,this),Te)}recycleAsyncId(be,pe,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return pe;null!=pe&&G.clearInterval(pe)}execute(be,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(be,pe);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,pe){let se,Te=!1;try{this.work(be)}catch(le){Te=!0,se=le||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),se}unsubscribe(){if(!this.closed){const{id:be,scheduler:pe}=this,{actions:Te}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,me.P)(Te,this),null!=be&&(this.id=this.recycleAsyncId(pe,be,null)),this.delay=null,super.unsubscribe()}}}},7565:(Rt,Ue,F)=>{"use strict";F.d(Ue,{v:()=>G});var E=F(6063);class z{constructor(_e,ve=z.now){this.schedulerActionCtor=_e,this.now=ve}schedule(_e,ve=0,be){return new this.schedulerActionCtor(this,_e).schedule(be,ve)}}z.now=E.l.now;class G extends z{constructor(_e,ve=z.now){super(_e,ve),this.actions=[],this._active=!1}flush(_e){const{actions:ve}=this;if(this._active)return void ve.push(_e);let be;this._active=!0;do{if(be=_e.execute(_e.state,_e.delay))break}while(_e=ve.shift());if(this._active=!1,be){for(;_e=ve.shift();)_e.unsubscribe();throw be}}}},4986:(Rt,Ue,F)=>{"use strict";F.d(Ue,{P:()=>me,z:()=>G});var E=F(4408);const G=new(F(7565).v)(E.o),me=G},6063:(Rt,Ue,F)=>{"use strict";F.d(Ue,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},3410:(Rt,Ue,F)=>{"use strict";F.d(Ue,{z:()=>E});const E={setTimeout(z,G,...me){const{delegate:_e}=E;return _e?.setTimeout?_e.setTimeout(z,G,...me):setTimeout(z,G,...me)},clearTimeout(z){const{delegate:G}=E;return(G?.clearTimeout||clearTimeout)(z)},delegate:void 0}},2202:(Rt,Ue,F)=>{"use strict";F.d(Ue,{h:()=>z});const z=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Rt,Ue,F)=>{"use strict";F.d(Ue,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Rt,Ue,F)=>{"use strict";F.d(Ue,{K:()=>z});const z=(0,F(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Rt,Ue,F)=>{"use strict";F.d(Ue,{_6:()=>ve,jO:()=>me,yG:()=>_e});var E=F(576),z=F(3532);function G(be){return be[be.length-1]}function me(be){return(0,E.m)(G(be))?be.pop():void 0}function _e(be){return(0,z.K)(G(be))?be.pop():void 0}function ve(be,pe){return"number"==typeof G(be)?be.pop():pe}},4742:(Rt,Ue,F)=>{"use strict";F.d(Ue,{D:()=>_e});const{isArray:E}=Array,{getPrototypeOf:z,prototype:G,keys:me}=Object;function _e(be){if(1===be.length){const pe=be[0];if(E(pe))return{args:pe,keys:null};if(function ve(be){return be&&"object"==typeof be&&z(be)===G}(pe)){const Te=me(pe);return{args:Te.map(se=>pe[se]),keys:Te}}}return{args:be,keys:null}}},8737:(Rt,Ue,F)=>{"use strict";function E(z,G){if(z){const me=z.indexOf(G);0<=me&&z.splice(me,1)}}F.d(Ue,{P:()=>E})},3888:(Rt,Ue,F)=>{"use strict";function E(z){const me=z(_e=>{Error.call(_e),_e.stack=(new Error).stack});return me.prototype=Object.create(Error.prototype),me.prototype.constructor=me,me}F.d(Ue,{d:()=>E})},1810:(Rt,Ue,F)=>{"use strict";function E(z,G){return z.reduce((me,_e,ve)=>(me[_e]=G[ve],me),{})}F.d(Ue,{n:()=>E})},2806:(Rt,Ue,F)=>{"use strict";F.d(Ue,{O:()=>me,x:()=>G});var E=F(2416);let z=null;function G(_e){if(E.v.useDeprecatedSynchronousErrorHandling){const ve=!z;if(ve&&(z={errorThrown:!1,error:null}),_e(),ve){const{errorThrown:be,error:pe}=z;if(z=null,be)throw pe}}else _e()}function me(_e){E.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=_e)}},9672:(Rt,Ue,F)=>{"use strict";function E(z,G,me,_e=0,ve=!1){const be=G.schedule(function(){me(),ve?z.add(this.schedule(null,_e)):this.unsubscribe()},_e);if(z.add(be),!ve)return be}F.d(Ue,{f:()=>E})},4671:(Rt,Ue,F)=>{"use strict";function E(z){return z}F.d(Ue,{y:()=>E})},1144:(Rt,Ue,F)=>{"use strict";F.d(Ue,{z:()=>E});const E=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(Rt,Ue,F)=>{"use strict";F.d(Ue,{D:()=>z});var E=F(576);function z(G){return Symbol.asyncIterator&&(0,E.m)(G?.[Symbol.asyncIterator])}},576:(Rt,Ue,F)=>{"use strict";function E(z){return"function"==typeof z}F.d(Ue,{m:()=>E})},3670:(Rt,Ue,F)=>{"use strict";F.d(Ue,{c:()=>G});var E=F(8822),z=F(576);function G(me){return(0,z.m)(me[E.L])}},6495:(Rt,Ue,F)=>{"use strict";F.d(Ue,{T:()=>G});var E=F(2202),z=F(576);function G(me){return(0,z.m)(me?.[E.h])}},8239:(Rt,Ue,F)=>{"use strict";F.d(Ue,{t:()=>z});var E=F(576);function z(G){return(0,E.m)(G?.then)}},3260:(Rt,Ue,F)=>{"use strict";F.d(Ue,{L:()=>me,Q:()=>G});var E=F(655),z=F(576);function G(_e){return(0,E.FC)(this,arguments,function*(){const be=_e.getReader();try{for(;;){const{value:pe,done:Te}=yield(0,E.qq)(be.read());if(Te)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(pe)}}finally{be.releaseLock()}})}function me(_e){return(0,z.m)(_e?.getReader)}},3532:(Rt,Ue,F)=>{"use strict";F.d(Ue,{K:()=>z});var E=F(576);function z(G){return G&&(0,E.m)(G.schedule)}},4482:(Rt,Ue,F)=>{"use strict";F.d(Ue,{A:()=>z,e:()=>G});var E=F(576);function z(me){return(0,E.m)(me?.lift)}function G(me){return _e=>{if(z(_e))return _e.lift(function(ve){try{return me(ve,this)}catch(be){this.error(be)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Z:()=>me});var E=F(4004);const{isArray:z}=Array;function me(_e){return(0,E.U)(ve=>function G(_e,ve){return z(ve)?_e(...ve):_e(ve)}(_e,ve))}},5032:(Rt,Ue,F)=>{"use strict";function E(){}F.d(Ue,{Z:()=>E})},9635:(Rt,Ue,F)=>{"use strict";F.d(Ue,{U:()=>G,z:()=>z});var E=F(4671);function z(...me){return G(me)}function G(me){return 0===me.length?E.y:1===me.length?me[0]:function(ve){return me.reduce((be,pe)=>pe(be),ve)}}},7849:(Rt,Ue,F)=>{"use strict";F.d(Ue,{h:()=>G});var E=F(2416),z=F(3410);function G(me){z.z.setTimeout(()=>{const{onUnhandledError:_e}=E.v;if(!_e)throw me;_e(me)})}},4532:(Rt,Ue,F)=>{"use strict";function E(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ue,{z:()=>E})},9163:Rt=>{function Ue(F){var E=new Error("Cannot find module '"+F+"'");throw E.code="MODULE_NOT_FOUND",E}Ue.keys=()=>[],Ue.resolve=Ue,Ue.id=9163,Rt.exports=Ue},655:(Rt,Ue,F)=>{"use strict";function me(ce,Me){var Ve={};for(var Oe in ce)Object.prototype.hasOwnProperty.call(ce,Oe)&&Me.indexOf(Oe)<0&&(Ve[Oe]=ce[Oe]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var gt=0;for(Oe=Object.getOwnPropertySymbols(ce);gt<Oe.length;gt++)Me.indexOf(Oe[gt])<0&&Object.prototype.propertyIsEnumerable.call(ce,Oe[gt])&&(Ve[Oe[gt]]=ce[Oe[gt]])}return Ve}function pe(ce,Me,Ve,Oe){return new(Ve||(Ve=Promise))(function(mt,Yt){function On(Rn){try{Et(Oe.next(Rn))}catch(rn){Yt(rn)}}function pn(Rn){try{Et(Oe.throw(Rn))}catch(rn){Yt(rn)}}function Et(Rn){Rn.done?mt(Rn.value):function gt(mt){return mt instanceof Ve?mt:new Ve(function(Yt){Yt(mt)})}(Rn.value).then(On,pn)}Et((Oe=Oe.apply(ce,Me||[])).next())})}function ze(ce){return this instanceof ze?(this.v=ce,this):new ze(ce)}function Ke(ce,Me,Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt,Oe=Ve.apply(ce,Me||[]),mt=[];return gt={},Yt("next"),Yt("throw"),Yt("return"),gt[Symbol.asyncIterator]=function(){return this},gt;function Yt(en){Oe[en]&&(gt[en]=function(Mt){return new Promise(function(Sr,In){mt.push([en,Mt,Sr,In])>1||On(en,Mt)})})}function On(en,Mt){try{!function pn(en){en.value instanceof ze?Promise.resolve(en.value.v).then(Et,Rn):rn(mt[0][2],en)}(Oe[en](Mt))}catch(Sr){rn(mt[0][3],Sr)}}function Et(en){On("next",en)}function Rn(en){On("throw",en)}function rn(en,Mt){en(Mt),mt.shift(),mt.length&&On(mt[0][0],mt[0][1])}}function Ot(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,Me=ce[Symbol.asyncIterator];return Me?Me.call(ce):(ce=function we(ce){var Me="function"==typeof Symbol&&Symbol.iterator,Ve=Me&&ce[Me],Oe=0;if(Ve)return Ve.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&Oe>=ce.length&&(ce=void 0),{value:ce&&ce[Oe++],done:!ce}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),Ve={},Oe("next"),Oe("throw"),Oe("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve);function Oe(mt){Ve[mt]=ce[mt]&&function(Yt){return new Promise(function(On,pn){!function gt(mt,Yt,On,pn){Promise.resolve(pn).then(function(Et){mt({value:Et,done:On})},Yt)}(On,pn,(Yt=ce[mt](Yt)).done,Yt.value)})}}}F.d(Ue,{FC:()=>Ke,KL:()=>Ot,_T:()=>me,mG:()=>pe,qq:()=>ze})},7340:(Rt,Ue,F)=>{"use strict";F.d(Ue,{F4:()=>se,IO:()=>Ge,LC:()=>z,SB:()=>Te,X$:()=>me,ZE:()=>De,ZN:()=>Ke,_j:()=>E,eR:()=>le,jt:()=>_e,k1:()=>Ot,l3:()=>G,oB:()=>pe,pV:()=>it,vP:()=>be});class E{}class z{}const G="*";function me($e,Ie){return{type:7,name:$e,definitions:Ie,options:{}}}function _e($e,Ie=null){return{type:4,styles:Ie,timings:$e}}function be($e,Ie=null){return{type:2,steps:$e,options:Ie}}function pe($e){return{type:6,styles:$e,offset:null}}function Te($e,Ie,ke){return{type:0,name:$e,styles:Ie,options:ke}}function se($e){return{type:5,steps:$e}}function le($e,Ie,ke=null){return{type:1,expr:$e,animation:Ie,options:ke}}function it($e=null){return{type:9,options:$e}}function Ge($e,Ie,ke=null){return{type:11,selector:$e,animation:Ie,options:ke}}function ze($e){Promise.resolve().then($e)}class Ke{constructor(Ie=0,ke=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ie+ke}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ie=>Ie()),this._onDoneFns=[])}onStart(Ie){this._originalOnStartFns.push(Ie),this._onStartFns.push(Ie)}onDone(Ie){this._originalOnDoneFns.push(Ie),this._onDoneFns.push(Ie)}onDestroy(Ie){this._onDestroyFns.push(Ie)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ze(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ie=>Ie()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ie=>Ie()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ie){this._position=this.totalTime?Ie*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ie){const ke="start"==Ie?this._onStartFns:this._onDoneFns;ke.forEach(ot=>ot()),ke.length=0}}class De{constructor(Ie){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ie;let ke=0,ot=0,It=0;const ne=this.players.length;0==ne?ze(()=>this._onFinish()):this.players.forEach(Qe=>{Qe.onDone(()=>{++ke==ne&&this._onFinish()}),Qe.onDestroy(()=>{++ot==ne&&this._onDestroy()}),Qe.onStart(()=>{++It==ne&&this._onStart()})}),this.totalTime=this.players.reduce((Qe,ce)=>Math.max(Qe,ce.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ie=>Ie()),this._onDoneFns=[])}init(){this.players.forEach(Ie=>Ie.init())}onStart(Ie){this._onStartFns.push(Ie)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ie=>Ie()),this._onStartFns=[])}onDone(Ie){this._onDoneFns.push(Ie)}onDestroy(Ie){this._onDestroyFns.push(Ie)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ie=>Ie.play())}pause(){this.players.forEach(Ie=>Ie.pause())}restart(){this.players.forEach(Ie=>Ie.restart())}finish(){this._onFinish(),this.players.forEach(Ie=>Ie.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ie=>Ie.destroy()),this._onDestroyFns.forEach(Ie=>Ie()),this._onDestroyFns=[])}reset(){this.players.forEach(Ie=>Ie.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ie){const ke=Ie*this.totalTime;this.players.forEach(ot=>{const It=ot.totalTime?Math.min(1,ke/ot.totalTime):1;ot.setPosition(It)})}getPosition(){const Ie=this.players.reduce((ke,ot)=>null===ke||ot.totalTime>ke.totalTime?ot:ke,null);return null!=Ie?Ie.getPosition():0}beforeDestroy(){this.players.forEach(Ie=>{Ie.beforeDestroy&&Ie.beforeDestroy()})}triggerCallback(Ie){const ke="start"==Ie?this._onStartFns:this._onDoneFns;ke.forEach(ot=>ot()),ke.length=0}}const Ot="!"},6895:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Do:()=>Ot,ED:()=>Yi,EM:()=>vi,HT:()=>_e,JF:()=>ns,K0:()=>be,Mx:()=>Zi,NF:()=>Ws,O5:()=>yr,Ov:()=>bt,PM:()=>Ci,RF:()=>no,S$:()=>ze,V_:()=>se,Ye:()=>$e,b0:()=>De,bD:()=>es,ez:()=>us,mk:()=>Qn,n9:()=>Ui,q:()=>G,sg:()=>Si,w_:()=>ve});var E=F(4650);let z=null;function G(){return z}function _e(A){z||(z=A)}class ve{}const be=new E.OlP("DocumentToken");let pe=(()=>{class A{historyGo(x){throw new Error("Not implemented")}}return A.\u0275fac=function(x){return new(x||A)},A.\u0275prov=E.Yz7({token:A,factory:function(){return function Te(){return(0,E.LFG)(le)}()},providedIn:"platform"}),A})();const se=new E.OlP("Location Initialized");let le=(()=>{class A extends pe{constructor(x){super(),this._doc=x,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(x){const W=G().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",x,!1),()=>W.removeEventListener("popstate",x)}onHashChange(x){const W=G().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",x,!1),()=>W.removeEventListener("hashchange",x)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(x){this.location.pathname=x}pushState(x,W,S){we()?this._history.pushState(x,W,S):this.location.hash=S}replaceState(x,W,S){we()?this._history.replaceState(x,W,S):this.location.hash=S}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return A.\u0275fac=function(x){return new(x||A)(E.LFG(be))},A.\u0275prov=E.Yz7({token:A,factory:function(){return function it(){return new le((0,E.LFG)(be))}()},providedIn:"platform"}),A})();function we(){return!!window.history.pushState}function Xe(A,$){if(0==A.length)return $;if(0==$.length)return A;let x=0;return A.endsWith("/")&&x++,$.startsWith("/")&&x++,2==x?A+$.substring(1):1==x?A+$:A+"/"+$}function Ge(A){const $=A.match(/#|\?|$/),x=$&&$.index||A.length;return A.slice(0,x-("/"===A[x-1]?1:0))+A.slice(x)}function ct(A){return A&&"?"!==A[0]?"?"+A:A}let ze=(()=>{class A{historyGo(x){throw new Error("Not implemented")}}return A.\u0275fac=function(x){return new(x||A)},A.\u0275prov=E.Yz7({token:A,factory:function(){return(0,E.f3M)(De)},providedIn:"root"}),A})();const Ke=new E.OlP("appBaseHref");let De=(()=>{class A extends ze{constructor(x,W){var S,p,m;super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=null!==(S=null!==(p=W??this._platformLocation.getBaseHrefFromDOM())&&void 0!==p?p:null===(m=(0,E.f3M)(be).location)||void 0===m?void 0:m.origin)&&void 0!==S?S:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return Xe(this._baseHref,x)}path(x=!1){const W=this._platformLocation.pathname+ct(this._platformLocation.search),S=this._platformLocation.hash;return S&&x?`${W}${S}`:W}pushState(x,W,S,p){const m=this.prepareExternalUrl(S+ct(p));this._platformLocation.pushState(x,W,m)}replaceState(x,W,S,p){const m=this.prepareExternalUrl(S+ct(p));this._platformLocation.replaceState(x,W,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){var W,S;null===(W=(S=this._platformLocation).historyGo)||void 0===W||W.call(S,x)}}return A.\u0275fac=function(x){return new(x||A)(E.LFG(pe),E.LFG(Ke,8))},A.\u0275prov=E.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Ot=(()=>{class A extends ze{constructor(x,W){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(x){const W=Xe(this._baseHref,x);return W.length>0?"#"+W:W}pushState(x,W,S,p){let m=this.prepareExternalUrl(S+ct(p));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(x,W,m)}replaceState(x,W,S,p){let m=this.prepareExternalUrl(S+ct(p));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(x,W,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){var W,S;null===(W=(S=this._platformLocation).historyGo)||void 0===W||W.call(S,x)}}return A.\u0275fac=function(x){return new(x||A)(E.LFG(pe),E.LFG(Ke,8))},A.\u0275prov=E.Yz7({token:A,factory:A.\u0275fac}),A})(),$e=(()=>{class A{constructor(x){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const W=this._locationStrategy.getBaseHref();this._baseHref=Ge(ot(W)),this._locationStrategy.onPopState(S=>{this._subject.emit({url:this.path(!0),pop:!0,state:S.state,type:S.type})})}ngOnDestroy(){var x;null===(x=this._urlChangeSubscription)||void 0===x||x.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,W=""){return this.path()==this.normalize(x+ct(W))}normalize(x){return A.stripTrailingSlash(function ke(A,$){return A&&$.startsWith(A)?$.substring(A.length):$}(this._baseHref,ot(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,W="",S=null){this._locationStrategy.pushState(S,"",x,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+ct(W)),S)}replaceState(x,W="",S=null){this._locationStrategy.replaceState(S,"",x,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+ct(W)),S)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){var W,S;null===(W=(S=this._locationStrategy).historyGo)||void 0===W||W.call(S,x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)})),()=>{const W=this._urlChangeListeners.indexOf(x);var S;this._urlChangeListeners.splice(W,1),0===this._urlChangeListeners.length&&(null===(S=this._urlChangeSubscription)||void 0===S||S.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",W){this._urlChangeListeners.forEach(S=>S(x,W))}subscribe(x,W,S){return this._subject.subscribe({next:x,error:W,complete:S})}}return A.normalizeQueryParams=ct,A.joinWithSlash=Xe,A.stripTrailingSlash=Ge,A.\u0275fac=function(x){return new(x||A)(E.LFG(ze))},A.\u0275prov=E.Yz7({token:A,factory:function(){return function Ie(){return new $e((0,E.LFG)(ze))}()},providedIn:"root"}),A})();function ot(A){return A.replace(/\/index.html$/,"")}function Zi(A,$){$=encodeURIComponent($);for(const x of A.split(";")){const W=x.indexOf("="),[S,p]=-1==W?[x,""]:[x.slice(0,W),x.slice(W+1)];if(S.trim()===$)return decodeURIComponent(p)}return null}let Qn=(()=>{class A{constructor(x,W,S,p){this._iterableDiffers=x,this._keyValueDiffers=W,this._ngEl=S,this._renderer=p,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(x){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof x?x.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(x){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof x?x.split(/\s+/):x,this._rawClass&&((0,E.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const x=this._iterableDiffer.diff(this._rawClass);x&&this._applyIterableChanges(x)}else if(this._keyValueDiffer){const x=this._keyValueDiffer.diff(this._rawClass);x&&this._applyKeyValueChanges(x)}}_applyKeyValueChanges(x){x.forEachAddedItem(W=>this._toggleClass(W.key,W.currentValue)),x.forEachChangedItem(W=>this._toggleClass(W.key,W.currentValue)),x.forEachRemovedItem(W=>{W.previousValue&&this._toggleClass(W.key,!1)})}_applyIterableChanges(x){x.forEachAddedItem(W=>{if("string"!=typeof W.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,E.AaK)(W.item)}`);this._toggleClass(W.item,!0)}),x.forEachRemovedItem(W=>this._toggleClass(W.item,!1))}_applyClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(W=>this._toggleClass(W,!0)):Object.keys(x).forEach(W=>this._toggleClass(W,!!x[W])))}_removeClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(W=>this._toggleClass(W,!1)):Object.keys(x).forEach(W=>this._toggleClass(W,!1)))}_toggleClass(x,W){(x=x.trim())&&x.split(/\s+/g).forEach(S=>{W?this._renderer.addClass(this._ngEl.nativeElement,S):this._renderer.removeClass(this._ngEl.nativeElement,S)})}}return A.\u0275fac=function(x){return new(x||A)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))},A.\u0275dir=E.lG2({type:A,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),A})();class Rr{constructor($,x,W,S){this.$implicit=$,this.ngForOf=x,this.index=W,this.count=S}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Si=(()=>{class A{constructor(x,W,S){this._viewContainer=x,this._template=W,this._differs=S,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const W=this._viewContainer;x.forEachOperation((S,p,m)=>{if(null==S.previousIndex)W.createEmbeddedView(this._template,new Rr(S.item,this._ngForOf,-1,-1),null===m?void 0:m);else if(null==m)W.remove(null===p?void 0:p);else if(null!==p){const M=W.get(p);W.move(M,m),Jr(M,S)}});for(let S=0,p=W.length;S<p;S++){const M=W.get(S).context;M.index=S,M.count=p,M.ngForOf=this._ngForOf}x.forEachIdentityChange(S=>{Jr(W.get(S.currentIndex),S)})}static ngTemplateContextGuard(x,W){return!0}}return A.\u0275fac=function(x){return new(x||A)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},A.\u0275dir=E.lG2({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),A})();function Jr(A,$){A.context.$implicit=$.item}let yr=(()=>{class A{constructor(x,W){this._viewContainer=x,this._context=new to,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){si("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){si("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,W){return!0}}return A.\u0275fac=function(x){return new(x||A)(E.Y36(E.s_b),E.Y36(E.Rgc))},A.\u0275dir=E.lG2({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),A})();class to{constructor(){this.$implicit=null,this.ngIf=null}}function si(A,$){if($&&!$.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,E.AaK)($)}'.`)}class Ir{constructor($,x){this._viewContainerRef=$,this._templateRef=x,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState($){$&&!this._created?this.create():!$&&this._created&&this.destroy()}}let no=(()=>{class A{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(x){this._ngSwitch=x,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(x){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(x)}_matchCase(x){const W=x==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||W,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),W}_updateDefaultCases(x){if(this._defaultViews&&x!==this._defaultUsed){this._defaultUsed=x;for(let W=0;W<this._defaultViews.length;W++)this._defaultViews[W].enforceState(x)}}}return A.\u0275fac=function(x){return new(x||A)},A.\u0275dir=E.lG2({type:A,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),A})(),Ui=(()=>{class A{constructor(x,W,S){this.ngSwitch=S,S._addCase(),this._view=new Ir(x,W)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return A.\u0275fac=function(x){return new(x||A)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(no,9))},A.\u0275dir=E.lG2({type:A,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),A})(),Yi=(()=>{class A{constructor(x,W,S){S._addDefault(new Ir(x,W))}}return A.\u0275fac=function(x){return new(x||A)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(no,9))},A.\u0275dir=E.lG2({type:A,selectors:[["","ngSwitchDefault",""]],standalone:!0}),A})();class Pe{createSubscription($,x){return $.subscribe({next:x,error:W=>{throw W}})}dispose($){$.unsubscribe()}}class xe{createSubscription($,x){return $.then(x,W=>{throw W})}dispose($){}}const He=new xe,at=new Pe;let bt=(()=>{class A{constructor(x){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=x}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(x){return this._obj?x!==this._obj?(this._dispose(),this.transform(x)):this._latestValue:(x&&this._subscribe(x),this._latestValue)}_subscribe(x){this._obj=x,this._strategy=this._selectStrategy(x),this._subscription=this._strategy.createSubscription(x,W=>this._updateLatestValue(x,W))}_selectStrategy(x){if((0,E.QGY)(x))return He;if((0,E.F4k)(x))return at;throw function oi(A,$){return new E.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(x,W){x===this._obj&&(this._latestValue=W,this._ref.markForCheck())}}return A.\u0275fac=function(x){return new(x||A)(E.Y36(E.sBO,16))},A.\u0275pipe=E.Yjl({name:"async",type:A,pure:!1,standalone:!0}),A})(),us=(()=>{class A{}return A.\u0275fac=function(x){return new(x||A)},A.\u0275mod=E.oAB({type:A}),A.\u0275inj=E.cJS({}),A})();const es="browser";function Ws(A){return A===es}function Ci(A){return"server"===A}let vi=(()=>{class A{}return A.\u0275prov=(0,E.Yz7)({token:A,providedIn:"root",factory:()=>new Xo((0,E.LFG)(be),window)}),A})();class Xo{constructor($,x){this.document=$,this.window=x,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const x=function ei(A,$){const x=A.getElementById($)||A.getElementsByName($)[0];if(x)return x;if("function"==typeof A.createTreeWalker&&A.body&&(A.body.createShadowRoot||A.body.attachShadow)){const W=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let S=W.currentNode;for(;S;){const p=S.shadowRoot;if(p){const m=p.getElementById($)||p.querySelector(`[name="${$}"]`);if(m)return m}S=W.nextNode()}}return null}(this.document,$);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=$)}}scrollToElement($){const x=$.getBoundingClientRect(),W=x.left+this.window.pageXOffset,S=x.top+this.window.pageYOffset,p=this.offset();this.window.scrollTo(W-p[0],S-p[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=Xn(this.window.history)||Xn(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Xn(A){return Object.getOwnPropertyDescriptor(A,"scrollRestoration")}class ns{}},4650:(Rt,Ue,F)=>{"use strict";F.d(Ue,{$8M:()=>fr,$Z:()=>Tm,AFp:()=>IE,ALo:()=>j0,AaK:()=>pe,AcB:()=>oo,AsE:()=>Sg,BQk:()=>zc,CHM:()=>mo,CRH:()=>X0,CZH:()=>Ky,CqO:()=>vf,D6c:()=>xD,DdM:()=>O0,EJc:()=>WI,EiD:()=>Ml,EpF:()=>uy,F$t:()=>Yd,F4k:()=>_f,FYo:()=>V,FiY:()=>Ht,G48:()=>fD,Gf:()=>Y0,GfV:()=>Ut,Gpc:()=>le,Gre:()=>Ag,Hsn:()=>fg,IIB:()=>VI,Ikx:()=>Rg,JOm:()=>La,JVY:()=>ch,KtG:()=>yo,L6k:()=>dh,LAX:()=>fh,LFG:()=>xi,LSH:()=>Or,Lbi:()=>jI,Lck:()=>Fw,MAs:()=>oy,MGl:()=>bf,MMx:()=>dv,NdJ:()=>Ef,O4$:()=>M,OlP:()=>li,Oqu:()=>Tg,PXZ:()=>aD,PiD:()=>Mn,Q6J:()=>pf,QGY:()=>dg,QP$:()=>dr,QbO:()=>HI,Qsj:()=>Y,R0b:()=>Du,RDi:()=>Ff,Rgc:()=>Ug,SBq:()=>c,Sil:()=>qI,Suo:()=>Q0,TTD:()=>ps,TgZ:()=>yf,Udp:()=>Eg,VKq:()=>k0,W1O:()=>nE,X6Q:()=>hD,XFs:()=>Lt,Xpm:()=>ut,Xts:()=>ac,Y36:()=>ll,YKP:()=>T0,YNc:()=>Kd,Yjl:()=>je,Yz7:()=>Mt,Z0I:()=>Ai,ZZ4:()=>kv,_Bn:()=>b0,_UZ:()=>Gc,_Vd:()=>rl,_c5:()=>MD,_uU:()=>wy,aQg:()=>Lv,c2e:()=>GI,cJS:()=>In,cg1:()=>th,dDg:()=>rD,dqk:()=>bn,eBb:()=>hh,eFA:()=>kE,ekj:()=>Sf,eoX:()=>PE,f3M:()=>P,g9A:()=>bE,h0i:()=>Pf,hGG:()=>RD,hij:()=>Cf,iGM:()=>Z0,ifc:()=>zt,ip1:()=>wE,jDz:()=>C0,kL8:()=>Pg,kYT:()=>ye,kcU:()=>Q,lG2:()=>nt,lcZ:()=>H0,lqb:()=>$o,lri:()=>RE,mCW:()=>Tl,n5z:()=>Ku,n_E:()=>jy,oAB:()=>oe,oJD:()=>Rl,oxw:()=>cy,pB0:()=>sc,q3G:()=>as,q4F:()=>on,qLn:()=>yd,qOj:()=>jd,qZA:()=>vu,qzn:()=>Au,rFY:()=>L0,rWj:()=>xE,r_U:()=>$I,s9C:()=>Kl,sBO:()=>pD,sIi:()=>Hd,s_b:()=>Gy,soG:()=>qy,tBr:()=>wt,tb:()=>TE,tp0:()=>Fn,uIk:()=>lg,vHH:()=>Ge,vpe:()=>_l,wAp:()=>Zn,xp6:()=>Bh,ynx:()=>Zd,z2F:()=>Zy,z3N:()=>la,zSh:()=>tl,zs3:()=>Fl});var E=F(7579),z=F(727),G=F(9751),me=F(6451),_e=F(3099);function ve(n){for(let r in n)if(n[r]===ve)return r;throw Error("Could not find renamed property on target object.")}function be(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function pe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(pe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Te(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const se=ve({__forward_ref__:ve});function le(n){return n.__forward_ref__=le,n.toString=function(){return pe(this())},n}function we(n){return it(n)?n():n}function it(n){return"function"==typeof n&&n.hasOwnProperty(se)&&n.__forward_ref__===le}class Ge extends Error{constructor(r,s){super(function ct(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function ze(n){return"string"==typeof n?n:null==n?"":String(n)}function Ie(n,r){throw new Ge(-201,!1)}function pn(n,r){null==n&&function Et(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Mt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function In(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dn(n){return zn(n,jr)||zn(n,_n)}function Ai(n){return null!==Dn(n)}function zn(n,r){return n.hasOwnProperty(r)?n[r]:null}function mr(n){return n&&(n.hasOwnProperty(xn)||n.hasOwnProperty(Wn))?n[xn]:null}const jr=ve({\u0275prov:ve}),xn=ve({\u0275inj:ve}),_n=ve({ngInjectableDef:ve}),Wn=ve({ngInjectorDef:ve});var Lt=(()=>((Lt=Lt||{})[Lt.Default=0]="Default",Lt[Lt.Host=1]="Host",Lt[Lt.Self=2]="Self",Lt[Lt.SkipSelf=4]="SkipSelf",Lt[Lt.Optional=8]="Optional",Lt))();let Gr;function Tr(n){const r=Gr;return Gr=n,r}function ri(n,r,s){const a=Dn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Lt.Optional?null:void 0!==r?r:void Ie(pe(n))}function Lr(n){return{toString:n}.toString()}var Nr=(()=>((Nr=Nr||{})[Nr.OnPush=0]="OnPush",Nr[Nr.Default=1]="Default",Nr))(),zt=(()=>{return(n=zt||(zt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",zt;var n})();const bn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),zr={},un=[],bi=ve({\u0275cmp:ve}),Ln=ve({\u0275dir:ve}),fi=ve({\u0275pipe:ve}),Gn=ve({\u0275mod:ve}),Mr=ve({\u0275fac:ve}),cr=ve({__NG_ELEMENT_ID__:ve});let kt=0;function ut(n){return Lr(()=>{const s=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Nr.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||zt.Emulated,id:"c"+kt++,styles:n.styles||un,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,v=n.features;return l.inputs=Ce(n.inputs,a),l.outputs=Ce(n.outputs),v&&v.forEach(b=>b(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(ln).filter(Jt):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(An).filter(Jt):null,l})}function ln(n){return Dt(n)||Gt(n)}function Jt(n){return null!==n}function oe(n){return Lr(()=>({type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ye(n,r){return Lr(()=>{const s=sr(n,!0);s.declarations=r.declarations||un,s.imports=r.imports||un,s.exports=r.exports||un})}function Ce(n,r){if(null==n)return zr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const nt=ut;function je(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Dt(n){return n[bi]||null}function Gt(n){return n[Ln]||null}function An(n){return n[fi]||null}function dr(n){const r=Dt(n)||Gt(n)||An(n);return null!==r&&r.standalone}function sr(n,r){const s=n[Gn]||null;if(!s&&!0===r)throw new Error(`Type ${pe(n)} does not have '\u0275mod' property.`);return s}function si(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ir(n){return Array.isArray(n)&&!0===n[1]}function no(n){return 0!=(8&n.flags)}function Ui(n){return 2==(2&n.flags)}function Yi(n){return 1==(1&n.flags)}function pi(n){return null!==n.template}function Ts(n){return 0!=(256&n[2])}function $i(n,r){return n.hasOwnProperty(Mr)?n[Mr]:null}class Ji{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ps(){return As}function As(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ho),zs}function zs(){const n=ho(this),r=n?.current;if(r){const s=n.previous;if(s===zr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Ho(n,r,s,a){const l=ho(n)||function us(n,r){return n[Bs]=r}(n,{previous:zr,current:null}),h=l.current||(l.current={}),v=l.previous,b=this.declaredInputs[s],R=v[b];h[b]=new Ji(R&&R.currentValue,r,v===zr),n[a]=r}ps.ngInherit=!0;const Bs="__ngSimpleChanges__";function ho(n){return n[Bs]||null}function Fr(n){for(;Array.isArray(n);)n=n[0];return n}function Xn(n,r){return Fr(r[n])}function ei(n,r){return Fr(r[n.index])}function ns(n,r){return n.data[r]}function mi(n,r){return n[r]}function or(n,r){const s=r[n];return si(s)?s:s[0]}function ls(n){return 64==(64&n[2])}function rs(n,r){return null==r?null:n[r]}function is(n){n[18]=0}function Dr(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const cn={lFrame:Mo(null),bindingsEnabled:!0};function Li(){return cn.bindingsEnabled}function ht(){return cn.lFrame.lView}function Hn(){return cn.lFrame.tView}function mo(n){return cn.lFrame.contextLView=n,n[8]}function yo(n){return cn.lFrame.contextLView=null,n}function B(){let n=k();for(;null!==n&&64===n.type;)n=n.parent;return n}function k(){return cn.lFrame.currentTNode}function fe(n,r){const s=cn.lFrame;s.currentTNode=n,s.isParent=r}function Ne(){return cn.lFrame.isParent}function Ze(){cn.lFrame.isParent=!1}function hn(){const n=cn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Vn(){return cn.lFrame.bindingIndex++}function Ar(n){const r=cn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Rs(n,r){const s=cn.lFrame;s.bindingIndex=s.bindingRootIndex=n,ui(r)}function ui(n){cn.lFrame.currentDirectiveIndex=n}function vs(){return cn.lFrame.currentQueryIndex}function cs(n){cn.lFrame.currentQueryIndex=n}function Ei(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Vs(n,r,s){if(s&Lt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&Lt.Host||(l=Ei(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=cn.lFrame=Jo();return a.currentTNode=r,a.lView=n,!0}function ro(n){const r=Jo(),s=n[1];cn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Jo(){const n=cn.lFrame,r=null===n?null:n.child;return null===r?Mo(n):r}function Mo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function _o(){const n=cn.lFrame;return cn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const A=_o;function $(){const n=_o();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function S(){return cn.lFrame.selectedIndex}function p(n){cn.lFrame.selectedIndex=n}function m(){const n=cn.lFrame;return ns(n.tView,n.selectedIndex)}function M(){cn.lFrame.currentNamespace="svg"}function Q(){!function he(){cn.lFrame.currentNamespace=null}()}function Je(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:R,ngAfterViewChecked:U,ngOnDestroy:Z}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-s,v),b&&((n.contentHooks||(n.contentHooks=[])).push(s,b),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,b)),R&&(n.viewHooks||(n.viewHooks=[])).push(-s,R),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Z)}}function St(n,r,s){Nn(n,r,3,s)}function jt(n,r,s,a){(3&n[2])===s&&Nn(n,r,s,a)}function Pn(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Nn(n,r,s,a){const h=a??-1,v=r.length-1;let b=0;for(let R=void 0!==a?65535&n[18]:0;R<v;R++)if("number"==typeof r[R+1]){if(b=r[R],null!=a&&b>=a)break}else r[R]<0&&(n[18]+=65536),(b<h||-1==h)&&(gn(n,s,r,R),n[18]=(4294901760&n[18])+R+2),R++}function gn(n,r,s,a){const l=s[a]<0,h=s[a+1],b=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(b)}finally{}}}else try{h.call(b)}finally{}}class Jn{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function ea(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],v=s[a++],b=s[a++];n.setAttribute(r,v,b,h)}else{const h=l,v=s[++a];ta(h)?n.setProperty(r,h,v):n.setAttribute(r,h,v),a++}}return a}function Hi(n){return 3===n||4===n||6===n}function ta(n){return 64===n.charCodeAt(0)}function io(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||na(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function na(n,r,s,a,l){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const b=n[h++];if("number"==typeof b){if(b===r){v=-1;break}if(b>r){v=h-1;break}}}for(;h<n.length;){const b=n[h];if("number"==typeof b)break;if(b===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function vo(n){return-1!==n}function vr(n){return 32767&n}function nn(n,r){let s=function Zt(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let dn=!0;function er(n){const r=dn;return dn=n,r}let Vr=0;const Tt={};function ra(n,r){const s=Ye(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Ct(a.data,n),Ct(r,null),Ct(a.blueprint,null));const l=dt(n,r),h=n.injectorIndex;if(vo(l)){const v=vr(l),b=nn(l,r),R=b[1].data;for(let U=0;U<8;U++)r[h+U]=b[v+U]|R[v+U]}return r[h+8]=l,h}function Ct(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ye(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function dt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=sa(l),null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Hr(n,r,s){!function wn(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(cr)&&(a=s[cr]),null==a&&(a=s[cr]=Vr++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function ma(n,r,s){if(s&Lt.Optional||void 0!==n)return n;Ie()}function bu(n,r,s,a){if(s&Lt.Optional&&void 0===a&&(a=null),0==(s&(Lt.Self|Lt.Host))){const l=n[9],h=Tr(void 0);try{return l?l.get(r,a,s&Lt.Optional):ri(r,a,s&Lt.Optional)}finally{Tr(h)}}return ma(a,0,s)}function ia(n,r,s,a=Lt.Default,l){if(null!==n){if(1024&r[2]){const v=function Sn(n,r,s,a,l){let h=n,v=r;for(;null!==h&&null!==v&&1024&v[2]&&!(256&v[2]);){const b=Ri(h,v,s,a|Lt.Self,Tt);if(b!==Tt)return b;let R=h.parent;if(!R){const U=v[21];if(U){const Z=U.get(s,Tt,a);if(Z!==Tt)return Z}R=sa(v),v=v[15]}h=R}return l}(n,r,s,a,Tt);if(v!==Tt)return v}const h=Ri(n,r,s,a,Tt);if(h!==Tt)return h}return bu(r,s,a,l)}function Ri(n,r,s,a,l){const h=function $a(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(cr)?n[cr]:void 0;return"number"==typeof r?r>=0?255&r:Ta:r}(s);if("function"==typeof h){if(!Vs(r,n,a))return a&Lt.Host?ma(l,0,a):bu(r,s,a,l);try{const v=h(a);if(null!=v||a&Lt.Optional)return v;Ie()}finally{A()}}else if("number"==typeof h){let v=null,b=Ye(n,r),R=-1,U=a&Lt.Host?r[16][6]:null;for((-1===b||a&Lt.SkipSelf)&&(R=-1===b?dt(n,r):r[b+8],-1!==R&&ya(a,!1)?(v=r[1],b=vr(R),r=nn(R,r)):b=-1);-1!==b;){const Z=r[1];if(Ja(h,b,Z.data)){const re=Tu(b,r,s,v,a,U);if(re!==Tt)return re}R=r[b+8],-1!==R&&ya(a,r[1].data[b+8]===U)&&Ja(h,b,r)?(v=Z,b=vr(R),r=nn(R,r)):b=-1}}return l}function Tu(n,r,s,a,l,h){const v=r[1],b=v.data[n+8],Z=fa(b,v,s,null==a?Ui(b)&&dn:a!=v&&0!=(3&b.type),l&Lt.Host&&h===b);return null!==Z?xo(r,v,Z,b):Tt}function fa(n,r,s,a,l){const h=n.providerIndexes,v=r.data,b=1048575&h,R=n.directiveStart,Z=h>>20,Se=l?b+Z:n.directiveEnd;for(let qe=a?b:b+Z;qe<Se;qe++){const vt=v[qe];if(qe<R&&s===vt||qe>=R&&vt.type===s)return qe}if(l){const qe=v[R];if(qe&&pi(qe)&&qe.type===s)return R}return null}function xo(n,r,s,a){let l=n[s];const h=r.data;if(function $n(n){return n instanceof Jn}(l)){const v=l;v.resolving&&function De(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ge(-200,`Circular dependency in DI detected for ${n}${s}`)}(function Ke(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ze(n)}(h[s]));const b=er(v.canSeeViewProviders);v.resolving=!0;const R=v.injectImpl?Tr(v.injectImpl):null;Vs(n,a,Lt.Default);try{l=n[s]=v.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Le(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const v=As(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==R&&Tr(R),er(b),v.resolving=!1,A()}}return l}function Ja(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function ya(n,r){return!(n&Lt.Self||n&Lt.Host&&r)}class kn{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return ia(this._tNode,this._lView,r,a,s)}}function Ta(){return new kn(B(),ht())}function Ku(n){return Lr(()=>{const r=n.prototype.constructor,s=r[Mr]||ni(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[Mr]||ni(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function ni(n){return it(n)?()=>{const r=ni(we(n));return r&&r()}:$i(n)}function sa(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function fr(n){return function ba(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Hi(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(B(),n)}const $r="__parameters__",Pt="__prop__metadata__";function Sa(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}function Ys(n,r,s){return Lr(()=>{const a=Sa(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const v=new l(...h);return b.annotation=v,b;function b(R,U,Z){const re=R.hasOwnProperty($r)?R[$r]:Object.defineProperty(R,$r,{value:[]})[$r];for(;re.length<=Z;)re.push(null);return(re[Z]=re[Z]||[]).push(v),R}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}function Eo(n,r,s,a){return Lr(()=>{const l=Sa(r);function h(...v){if(this instanceof h)return l.apply(this,v),this;const b=new h(...v);return function R(U,Z){const re=U.constructor,Se=re.hasOwnProperty(Pt)?re[Pt]:Object.defineProperty(re,Pt,{value:{}})[Pt];Se[Z]=Se.hasOwnProperty(Z)&&Se[Z]||[],Se[Z].unshift(b),a&&a(U,Z,...v)}}return s&&(h.prototype=Object.create(s.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class li{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Mt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}class tu{}const oo=Eo("ContentChildren",(n,r={})=>({selector:n,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...r}),tu);function uo(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),uo(a,r)):r!==n&&r.push(a)}return r}function ds(n,r){n.forEach(s=>Array.isArray(s)?ds(s,r):r(s))}function Su(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function _a(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function I(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function ue(n,r,s){let a=lt(n,r);return a>=0?n[1|a]=s:(a=~a,function C(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Be(n,r){const s=lt(n,r);if(s>=0)return n[1|s]}function lt(n,r){return function Ft(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),v=n[h<<s];if(r===v)return h<<s;v>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Qs={},El="__NG_DI_FLAG__",aa="ngTempTokenPath",Ha=/\n/gm,va="__source";let Ea;function Io(n){const r=Ea;return Ea=n,r}function ua(n,r=Lt.Default){if(void 0===Ea)throw new Ge(-203,!1);return null===Ea?ri(n,void 0,r):Ea.get(n,r&Lt.Optional?null:void 0,r)}function xi(n,r=Lt.Default){return(function hi(){return Gr}()||ua)(we(n),r)}function P(n,r=Lt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),xi(n,r)}function O(n){const r=[];for(let s=0;s<n.length;s++){const a=we(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ge(900,!1);let l,h=Lt.Default;for(let v=0;v<a.length;v++){const b=a[v],R=de(b);"number"==typeof R?-1===R?l=b.token:h|=R:l=b}r.push(xi(l,h))}else r.push(xi(a))}return r}function K(n,r){return n[El]=r,n.prototype[El]=r,n}function de(n){return n[El]}const wt=K(Ys("Inject",n=>({token:n})),-1),Ht=K(Ys("Optional"),8),Mn=K(Ys("Self"),2),Fn=K(Ys("SkipSelf"),4);let Jc,wa,Na;function Ff(n){Jc=n}function Cu(n){var r;return(null===(r=function ed(){if(void 0===wa&&(wa=null,bn.trustedTypes))try{wa=bn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wa}())||void 0===r?void 0:r.createHTML(n))||n}function nc(n){var r;return(null===(r=function tc(){if(void 0===Na&&(Na=null,bn.trustedTypes))try{Na=bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Na}())||void 0===r?void 0:r.createHTML(n))||n}class Wo{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fo extends Wo{getTypeName(){return"HTML"}}class Yu extends Wo{getTypeName(){return"Style"}}class Dl extends Wo{getTypeName(){return"Script"}}class td extends Wo{getTypeName(){return"URL"}}class nd extends Wo{getTypeName(){return"ResourceURL"}}function la(n){return n instanceof Wo?n.changingThisBreaksApplicationSecurity:n}function Au(n,r){const s=function rd(n){return n instanceof Wo&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function ch(n){return new Fo(n)}function dh(n){return new Yu(n)}function hh(n){return new Dl(n)}function fh(n){return new td(n)}function sc(n){return new nd(n)}class gh{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Cu(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class mh{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=Cu(r),s;const a=this.inertDocument.createElement("body");return a.innerHTML=Cu(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const s=r.attributes;for(let l=s.length-1;0<l;l--){const v=s.item(l).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&r.removeAttribute(v)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const ca=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Tl(n){return(n=String(n)).match(ca)?n:"unsafe:"+n}function Uo(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function ru(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const Mu=Uo("area,br,col,hr,img,wbr"),Sl=Uo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),id=Uo("rp,rt"),Pi=ru(Mu,ru(Sl,Uo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ru(id,Uo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ru(id,Sl)),iu=Uo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_h=ru(iu,Uo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Uo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Cl=Uo("script,style,template");class Vf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Pi.hasOwnProperty(s))return this.sanitizedSomething=!0,!Cl.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const h=a.item(l),v=h.name,b=v.toLowerCase();if(!_h.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let R=h.value;iu[b]&&(R=Tl(R)),this.buf.push(" ",v,'="',Oa(R),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Pi.hasOwnProperty(s)&&!Mu.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Oa(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const od=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,su=/([^\#-~ |!])/g;function Oa(n){return n.replace(/&/g,"&amp;").replace(od,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(su,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Al;function Ml(n,r){let s=null;try{Al=Al||function ph(n){const r=new mh(n);return function bl(){try{return!!(new window.DOMParser).parseFromString(Cu(""),"text/html")}catch{return!1}}()?new gh(r):r}(n);let a=r?String(r):"";s=Al.getInertBodyElement(a);let l=5,h=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=h,h=s.innerHTML,s=Al.getInertBodyElement(a)}while(a!==h);return Cu((new Vf).sanitizeChildren(Qu(s)||s))}finally{if(s){const a=Qu(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Qu(n){return"content"in n&&function Xu(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var as=(()=>((as=as||{})[as.NONE=0]="NONE",as[as.HTML=1]="HTML",as[as.STYLE=2]="STYLE",as[as.SCRIPT=3]="SCRIPT",as[as.URL=4]="URL",as[as.RESOURCE_URL=5]="RESOURCE_URL",as))();function Rl(n){const r=Bo();return r?nc(r.sanitize(as.HTML,n)||""):Au(n,"HTML")?nc(la(n)):Ml(function Wa(){return void 0!==Jc?Jc:typeof document<"u"?document:void 0}(),ze(n))}function Or(n){const r=Bo();return r?r.sanitize(as.URL,n)||"":Au(n,"URL")?la(n):Tl(ze(n))}function Bo(){const n=ht();return n&&n[12]}const ac=new li("ENVIRONMENT_INITIALIZER"),Ju=new li("INJECTOR",-1),Eh=new li("INJECTOR_DEF_TYPES");class wh{get(r,s=Qs){if(s===Qs){const a=new Error(`NullInjectorError: No provider for ${pe(r)}!`);throw a.name="NullInjectorError",a}return s}}function gr(...n){return{\u0275providers:uc(0,n)}}function uc(n,...r){const s=[],a=new Set;let l;return ds(r,h=>{const v=h;uu(v,s,[],a)&&(l||(l=[]),l.push(v))}),void 0!==l&&Ru(l,s),s}function Ru(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];ds(l,h=>{r.push(h)})}}function uu(n,r,s,a){if(!(n=we(n)))return!1;let l=null,h=mr(n);const v=!h&&Dt(n);if(h||v){if(v&&!v.standalone)return!1;l=n}else{const R=n.ngModule;if(h=mr(R),!h)return!1;l=R}const b=a.has(l);if(v){if(b)return!1;if(a.add(l),v.dependencies){const R="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const U of R)uu(U,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!b){let U;a.add(l);try{ds(h.imports,Z=>{uu(Z,r,s,a)&&(U||(U=[]),U.push(Z))})}finally{}void 0!==U&&Ru(U,r)}if(!b){const U=$i(l)||(()=>new l);r.push({provide:l,useFactory:U,deps:un},{provide:Eh,useValue:l,multi:!0},{provide:ac,useValue:()=>xi(l),multi:!0})}const R=h.providers;null==R||b||ds(R,Z=>{r.push(Z)})}}return l!==n&&void 0!==n.providers}const el=ve({provide:String,useValue:ve});function cc(n){return null!==n&&"object"==typeof n&&el in n}function lu(n){return"function"==typeof n}const tl=new li("Set Injector scope."),nl={},Hf={};let dc;function cu(){return void 0===dc&&(dc=new wh),dc}class $o{}class ld extends $o{constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,du(r,v=>this.processProvider(v)),this.records.set(Ju,Ii(void 0,this)),l.has("environment")&&this.records.set($o,Ii(void 0,this));const h=this.records.get(tl);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Eh.multi,un,Lt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Io(this),a=Tr(void 0);try{return r()}finally{Io(s),Tr(a)}}get(r,s=Qs,a=Lt.Default){this.assertNotDestroyed();const l=Io(this),h=Tr(void 0);try{if(!(a&Lt.SkipSelf)){let b=this.records.get(r);if(void 0===b){const R=function Pl(n){return"function"==typeof n||"object"==typeof n&&n instanceof li}(r)&&Dn(r);b=R&&this.injectableDefInScope(R)?Ii(Os(r),nl):null,this.records.set(r,b)}if(null!=b)return this.hydrate(r,b)}return(a&Lt.Self?cu():this.parent).get(r,s=a&Lt.Optional&&s===Qs?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[aa]=v[aa]||[]).unshift(pe(r)),l)throw v;return function Fe(n,r,s,a){const l=n[aa];throw r[va]&&l.unshift(r[va]),n.message=function tt(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=pe(r);if(Array.isArray(r))l=r.map(pe).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let b=r[v];h.push(v+":"+("string"==typeof b?JSON.stringify(b):pe(b)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(Ha,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[aa]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{Tr(h),Io(l)}}resolveInjectorInitializers(){const r=Io(this),s=Tr(void 0);try{const a=this.get(ac.multi,un,Lt.Self);for(const l of a)l()}finally{Io(r),Tr(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(pe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ge(205,!1)}processProvider(r){let s=lu(r=we(r))?r:we(r&&r.provide);const a=function Dh(n){return cc(n)?Ii(void 0,n.useValue):Ii(Pu(n),nl)}(r);if(lu(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=Ii(void 0,nl,!0),l.factory=()=>O(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===nl&&(s.value=Hf,s.value=s.factory()),"object"==typeof s.value&&s.value&&function hc(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=we(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Os(n){const r=Dn(n),s=null!==r?r.factory:$i(n);if(null!==s)return s;if(n instanceof li)throw new Ge(204,!1);if(n instanceof Function)return function cd(n){const r=n.length;if(r>0)throw I(r,"?"),new Ge(204,!1);const s=function Yn(n){const r=n&&(n[jr]||n[_n]);if(r){const s=function br(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ge(204,!1)}function Pu(n,r,s){let a;if(lu(n)){const l=we(n);return $i(l)||Os(l)}if(cc(n))a=()=>we(n.useValue);else if(function xu(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...O(n.deps||[]));else if(function Vo(n){return!(!n||!n.useExisting)}(n))a=()=>xi(we(n.useExisting));else{const l=we(n&&(n.useClass||n.provide));if(!function xl(n){return!!n.deps}(n))return $i(l)||Os(l);a=()=>new l(...O(n.deps))}return a}function Ii(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function ka(n){return!!n.\u0275providers}function du(n,r){for(const s of n)Array.isArray(s)?du(s,r):ka(s)?du(s.\u0275providers,r):r(s)}class hd{}class zf{resolveComponentFactory(r){throw function Gf(n){const r=Error(`No component factory found for ${pe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let rl=(()=>{class n{}return n.NULL=new zf,n})();function fd(){return y(B(),ht())}function y(n,r){return new c(ei(n,r))}let c=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=fd,n})();function f(n){return n instanceof c?n.nativeElement:n}class V{}let Y=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ae(){const n=ht(),s=or(B().index,n);return(si(s)?s:n)[11]}(),n})(),rt=(()=>{class n{}return n.\u0275prov=Mt({token:n,providedIn:"root",factory:()=>null}),n})();class Ut{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const on=new Ut("14.2.5"),jn={};function Yf(n){return n.ngOriginalError}class yd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Yf(r);for(;s&&Yf(s);)s=Yf(s);return s||null}}const _d=new Map;let Jf=0;const Ou="__ngContext__";function Xs(n,r){si(r)?(n[Ou]=r[20],function il(n){_d.set(n[20],n)}(r)):n[Ou]=r}function ku(n){return n instanceof Function?n():n}var La=(()=>((La=La||{})[La.Important=1]="Important",La[La.DashCase=2]="DashCase",La))();function sp(n,r){return undefined(n,r)}function Lu(n){const r=n[3];return Ir(r)?r[3]:r}function Zo(n){return Id(n[13])}function xh(n){return Id(n[4])}function Id(n){for(;null!==n&&!Ir(n);)n=n[4];return n}function kl(n,r,s,a,l){if(null!=a){let h,v=!1;Ir(a)?h=a:si(a)&&(v=!0,a=a[0]);const b=Fr(a);0===n&&null!==s?null==l?ul(r,s,b):al(r,s,b,l||null,!0):1===n&&null!==s?al(r,s,b,l||null,!0):2===n?function hm(n,r,s){const a=Ph(n,r);a&&function om(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,b,v):3===n&&r.destroyNode(b),null!=h&&function lp(n,r,s,a,l){const h=s[7];h!==Fr(s)&&kl(r,n,a,h,l);for(let b=10;b<s.length;b++){const R=s[b];Dd(R[1],R,n,r,a,h)}}(r,n,h,s,l)}}function Fu(n,r,s){return n.createElement(r,s)}function nm(n,r){const s=n[9],a=s.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,Dr(l,-1)),s.splice(a,1)}function ap(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&nm(l,a),r>0&&(n[s-1][4]=a[4]);const h=_a(n,10+r);!function u_(n,r){Dd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function rm(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&Dd(n,r,s,3,null,null),function ol(n){let r=n[13];if(!r)return Ec(n[1],n);for(;r;){let s=null;if(si(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)si(r)&&Ec(r[1],r),r=r[3];null===r&&(r=n),si(r)&&Ec(r[1],r),s=r&&r[4]}r=s}}(r)}}function Ec(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function c_(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Jn)){const h=s[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const b=l[h[v]],R=h[v+1];try{R.call(b)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function im(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const v=s[h+1],b="function"==typeof v?v(r):Fr(r[v]),R=a[l=s[h+2]],U=s[h+3];"boolean"==typeof U?b.removeEventListener(s[h],R,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),h+=2}else{const v=a[l=s[h+1]];s[h].call(v)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Ir(r[3])){s!==r[3]&&nm(s,r);const a=r[19];null!==a&&a.detachView(n)}!function r_(n){_d.delete(n[20])}(r)}}function up(n,r,s){return function sm(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===zt.None||l===zt.Emulated)return null}return ei(a,s)}(n,r.parent,s)}function al(n,r,s,a,l){n.insertBefore(r,s,a,l)}function ul(n,r,s){n.appendChild(r,s)}function wc(n,r,s,a,l){null!==a?al(n,r,s,a,l):ul(n,r,s)}function Ph(n,r){return n.parentNode(r)}function um(n,r,s){return Nh(n,r,s)}let Nh=function lm(n,r,s){return 40&n.type?ei(n,s):null};function Oh(n,r,s,a){const l=up(n,a,r),h=r[11],b=um(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let R=0;R<s.length;R++)wc(h,l,s[R],b,!1);else wc(h,l,s,b,!1)}function kh(n,r){if(null!==r){const s=r.type;if(3&s)return ei(r,n);if(4&s)return Lh(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return kh(n,a);{const l=n[r.index];return Ir(l)?Lh(-1,l):Fr(l)}}if(32&s)return sp(r,n)()||Fr(n[r.index]);{const a=dm(n,r);return null!==a?Array.isArray(a)?a[0]:kh(Lu(n[16]),a):kh(n,r.next)}}return null}function dm(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Lh(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return kh(a,l)}return r[7]}function Ic(n,r,s,a,l,h,v){for(;null!=s;){const b=a[s.index],R=s.type;if(v&&0===r&&(b&&Xs(Fr(b),a),s.flags|=4),64!=(64&s.flags))if(8&R)Ic(n,r,s.child,a,l,h,!1),kl(r,n,l,b,h);else if(32&R){const U=sp(s,a);let Z;for(;Z=U();)kl(r,n,l,Z,h);kl(r,n,l,b,h)}else 16&R?Fh(n,r,a,s,l,h):kl(r,n,l,b,h);s=v?s.projectionNext:s.next}}function Dd(n,r,s,a,l,h){Ic(s,a,n.firstChild,r,l,h,!1)}function Fh(n,r,s,a,l,h){const v=s[16],R=v[6].projection[a.projection];if(Array.isArray(R))for(let U=0;U<R.length;U++)kl(r,n,l,R[U],h);else Ic(n,r,R,v[3],l,h,!0)}function Td(n,r,s){n.setAttribute(r,"style",s)}function Sd(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function Uh(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const pm="ng-template";function gm(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Uh(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function cp(n){return 4===n.type&&n.value!==pm}function dp(n,r,s){return r===(4!==n.type||s?n.value:pm)}function f_(n,r,s){let a=4;const l=n.attrs||[],h=function Dc(n){for(let r=0;r<n.length;r++)if(Hi(n[r]))return r;return n.length}(l);let v=!1;for(let b=0;b<r.length;b++){const R=r[b];if("number"!=typeof R){if(!v)if(4&a){if(a=2|1&a,""!==R&&!dp(n,R,s)||""===R&&1===r.length){if(Fa(a))return!1;v=!0}}else{const U=8&a?R:r[++b];if(8&a&&null!==n.attrs){if(!gm(n.attrs,U,s)){if(Fa(a))return!1;v=!0}continue}const re=p_(8&a?"class":R,l,cp(n),s);if(-1===re){if(Fa(a))return!1;v=!0;continue}if(""!==U){let Se;Se=re>h?"":l[re+1].toLowerCase();const qe=8&a?Se:null;if(qe&&-1!==Uh(qe,U,0)||2&a&&U!==Se){if(Fa(a))return!1;v=!0}}}}else{if(!v&&!Fa(a)&&!Fa(R))return!1;if(v&&Fa(R))continue;v=!1,a=R|1&a}}return Fa(a)||v}function Fa(n){return 0==(1&n)}function p_(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const v=r[l];if(v===n)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let b=r[++l];for(;"string"==typeof b;)b=r[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function bc(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function hp(n,r,s=!1){for(let a=0;a<r.length;a++)if(f_(n,r[a],s))return!0;return!1}function fp(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function Cd(n,r){return n?":not("+r.trim()+")":r}function mm(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let v=n[s];if("string"==typeof v)if(2&a){const b=n[++s];l+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&a?l+="."+v:4&a&&(l+=" "+v);else""!==l&&!Fa(v)&&(r+=Cd(h,l),l=""),a=v,h=h||!Fa(a);s++}return""!==l&&(r+=Cd(h,l)),r}const Er={};function Bh(n){vm(Hn(),ht(),S()+n,!1)}function vm(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&St(r,h,s)}else{const h=n.preOrderHooks;null!==h&&jt(r,h,0,s)}p(s)}function Gh(n,r=null,s=null,a){const l=gp(n,r,s,a);return l.resolveInjectorInitializers(),l}function gp(n,r=null,s=null,a,l=new Set){const h=[s||un,gr(n)];return a=a||("object"==typeof n?void 0:pe(n)),new ld(h,r||cu(),a||null,l)}let Fl=(()=>{class n{static create(s,a){if(Array.isArray(s))return Gh({name:""},a,s,"");{var l;const h=null!==(l=s.name)&&void 0!==l?l:"";return Gh({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=Qs,n.NULL=new wh,n.\u0275prov=Mt({token:n,providedIn:"any",factory:()=>xi(Ju)}),n.__NG_ELEMENT_ID__=-1,n})();function ll(n,r=Lt.Default){const s=ht();return null===s?xi(n,r):ia(B(),s,we(n),r)}function Tm(){throw new Error("invalid")}function Ul(n,r){return n<<17|r<<2}function Ia(n){return n>>17&32767}function Md(n){return 2|n}function Uu(n){return(131068&n)>>2}function Sp(n,r){return-131069&n|r<<2}function Jh(n){return 1|n}function km(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const v=n.data[h];cs(l),v.contentQueries(2,r[h],h)}}}function Nc(n,r,s,a,l,h,v,b,R,U,Z){const re=r.blueprint.slice();return re[0]=l,re[2]=76|a,(null!==Z||n&&1024&n[2])&&(re[2]|=1024),is(re),re[3]=re[15]=n,re[8]=s,re[10]=v||n&&n[10],re[11]=b||n&&n[11],re[12]=R||n&&n[12]||null,re[9]=U||n&&n[9]||null,re[6]=h,re[20]=function ep(){return Jf++}(),re[21]=Z,re[16]=2==r.type?n[16]:re,re}function Vl(n,r,s,a,l){let h=n.data[r];if(null===h)h=function Nd(n,r,s,a,l){const h=k(),v=Ne(),R=n.data[r]=function Hp(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=R),null!==h&&(v?null==h.child&&null!==R.parent&&(h.child=R):null===h.next&&(h.next=R)),R}(n,r,s,a,l),function _s(){return cn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const v=function X(){const n=cn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return fe(h,!0),h}function $l(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Bp(n,r,s){ro(r);try{const a=n.viewQuery;null!==a&&lf(1,a,s);const l=n.template;null!==l&&Lm(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&km(n,r),n.staticViewQueries&&lf(2,n.viewQuery,s);const h=n.components;null!==h&&function S_(n,r){for(let s=0;s<r.length;s++)Km(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,$()}}function Oc(n,r,s,a){const l=r[2];if(128!=(128&l)){ro(r);try{is(r),function Ur(n){return cn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Lm(n,r,s,2,a);const v=3==(3&l);if(v){const U=n.preOrderCheckHooks;null!==U&&St(r,U,null)}else{const U=n.preOrderHooks;null!==U&&jt(r,U,0,null),Pn(r,0)}if(function M_(n){for(let r=Zo(n);null!==r;r=xh(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(512&l[2])&&Dr(h,1),l[2]|=512}}}(r),function Wm(n){for(let r=Zo(n);null!==r;r=xh(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];ls(a)&&Oc(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&km(n,r),v){const U=n.contentCheckHooks;null!==U&&St(r,U)}else{const U=n.contentHooks;null!==U&&jt(r,U,1),Pn(r,1)}!function Fp(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)p(~l);else{const h=l,v=s[++a],b=s[++a];Rs(v,h),b(2,r[h])}}}finally{p(-1)}}(n,r);const b=n.components;null!==b&&function Up(n,r){for(let s=0;s<r.length;s++)eg(n,r[s])}(r,b);const R=n.viewQuery;if(null!==R&&lf(2,R,a),v){const U=n.viewCheckHooks;null!==U&&St(r,U)}else{const U=n.viewHooks;null!==U&&jt(r,U,2),Pn(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Dr(r[3],-1))}finally{$()}}}function Lm(n,r,s,a,l){const h=S(),v=2&a;try{p(-1),v&&r.length>22&&vm(n,r,22,!1),s(a,l)}finally{p(h)}}function af(n,r,s){if(no(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,s[h],h)}}}function Vp(n,r,s){!Li()||(function A_(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||ra(s,r),Xs(a,r);const v=s.initialInputs;for(let b=l;b<h;b++){const R=n.data[b],U=pi(R);U&&Yp(r,s,R);const Z=xo(r,n,b,s);Xs(Z,r),null!==v&&Qp(0,b-l,Z,R,0,v),U&&(or(s.index,r)[8]=Z)}}(n,r,s,ei(s,r)),128==(128&s.flags)&&function Wp(n,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,v=function ji(){return cn.lFrame.currentDirectiveIndex}();try{p(h);for(let b=a;b<l;b++){const R=n.data[b],U=r[b];ui(b),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&jm(R,U)}}finally{p(-1),ui(v)}}(n,r,s))}function Od(n,r,s=ei){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],b=-1===v?s(r,n):n[v];n[l++]=b}}}function Fm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=kd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function kd(n,r,s,a,l,h,v,b,R,U){const Z=22+a,re=Z+l,Se=function $p(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Er);return s}(Z,re),qe="function"==typeof U?U():U;return Se[1]={type:n,blueprint:Se,template:s,queries:null,viewQuery:b,declTNode:r,data:Se.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:R,consts:qe,incompleteFirstPass:!1}}function jp(n,r,s,a){const l=Fc(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&tg(n).push(a,l.length-1))}function Bm(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function uf(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,v=[];let b=null,R=null;for(let U=r.directiveStart;U<a;U++){const Z=l[U],re=Z.inputs,Se=null===h||cp(r)?null:Xp(re,h);v.push(Se),b=Bm(re,U,b),R=Bm(Z.outputs,U,R)}null!==b&&(b.hasOwnProperty("class")&&(r.flags|=16),b.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=b,r.outputs=R}function da(n,r,s,a,l,h,v,b){const R=ei(r,s);let Z,U=r.inputs;!b&&null!=U&&(Z=U[a])?(Ua(n,s,Z,a,l),Ui(r)&&Vm(s,r.index)):3&r.type&&(a=function Vu(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=v?v(l,r.value||"",a):l,h.setProperty(R,a,l))}function Vm(n,r){const s=or(r,n);16&s[2]||(s[2]|=32)}function Ld(n,r,s,a){let l=!1;if(Li()){const h=function Kp(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];hp(s,v.selectors,!1)&&(l||(l=[]),Hr(ra(s,r),n,v.type),pi(v)?(qp(n,s),l.unshift(v)):l.push(v))}return l}(n,r,s),v=null===a?null:{"":-1};if(null!==h){l=!0,Gm(s,n.data.length,h.length);for(let Z=0;Z<h.length;Z++){const re=h[Z];re.providersResolver&&re.providersResolver(re)}let b=!1,R=!1,U=$l(n,r,h.length,null);for(let Z=0;Z<h.length;Z++){const re=h[Z];s.mergedAttrs=io(s.mergedAttrs,re.hostAttrs),zm(n,s,r,U,re),Hm(U,re,v),null!==re.contentQueries&&(s.flags|=8),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(s.flags|=128);const Se=re.type.prototype;!b&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),b=!0),!R&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),R=!0),U++}uf(n,s)}v&&function Zp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Ge(-301,!1);a.push(r[l],h)}}}(s,a,v)}return s.mergedAttrs=io(s.mergedAttrs,s.attrs),l}function $m(n,r,s,a,l,h){const v=h.hostBindings;if(v){let b=n.hostBindingOpCodes;null===b&&(b=n.hostBindingOpCodes=[]);const R=~r.index;(function zp(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(b)!=R&&b.push(R),b.push(a,l,v)}}function jm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function qp(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Hm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;pi(r)&&(s[""]=n)}}function Gm(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function zm(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=$i(l.type)),v=new Jn(h,pi(l),ll);n.blueprint[a]=v,s[a]=v,$m(n,r,0,a,$l(n,s,l.hostVars,Er),l)}function Yp(n,r,s){const a=ei(r,n),l=Fm(s),h=n[10],v=Bd(n,Nc(n,l,null,s.onPush?32:16,a,r,h,h.createRenderer(a,s),null,null,null));n[r.index]=v}function gu(n,r,s,a,l,h){const v=ei(n,r);!function Fd(n,r,s,a,l,h,v){if(null==h)n.removeAttribute(r,l,s);else{const b=null==v?ze(h):v(h,a||"",l);n.setAttribute(r,l,b,s)}}(r[11],v,h,n.value,s,a,l)}function Qp(n,r,s,a,l,h){const v=h[r];if(null!==v){const b=a.setInput;for(let R=0;R<v.length;){const U=v[R++],Z=v[R++],re=v[R++];null!==b?a.setInput(s,re,U,Z):s[Z]=re}}}function Xp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Jp(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function eg(n,r){const s=or(r,n);if(ls(s)){const a=s[1];48&s[2]?Oc(a,s,a.template,s[8]):s[5]>0&&Ud(s)}}function Ud(n){for(let a=Zo(n);null!==a;a=xh(a))for(let l=10;l<a.length;l++){const h=a[l];if(ls(h))if(512&h[2]){const v=h[1];Oc(v,h,v.template,h[8])}else h[5]>0&&Ud(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=or(s[a],n);ls(l)&&l[5]>0&&Ud(l)}}function Km(n,r){const s=or(r,n),a=s[1];(function qm(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Bp(a,s,s[8])}function Bd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Lc(n){for(;n;){n[2]|=32;const r=Lu(n);if(Ts(n)&&!r)return n;n=r}return null}function Pr(n,r,s,a=!0){const l=r[10];l.begin&&l.begin();try{Oc(n,r,n.template,s)}catch(v){throw a&&jo(r,v),v}finally{l.end&&l.end()}}function lf(n,r,s){cs(0),r(n,s)}function Fc(n){return n[7]||(n[7]=[])}function tg(n){return n.cleanup||(n.cleanup=[])}function jo(n,r){const s=n[9],a=s?s.get(yd,null):null;a&&a.handleError(r)}function Ua(n,r,s,a,l){for(let h=0;h<s.length;){const v=s[h++],b=s[h++],R=r[v],U=n.data[v];null!==U.setInput?U.setInput(R,l,a,b):R[b]=l}}function mu(n,r,s){const a=Xn(r,n);!function Ll(n,r,s){n.setValue(r,s)}(n[11],a,s)}function cf(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const b=r[v];"number"==typeof b?h=b:1==h?l=Te(l,b):2==h&&(a=Te(a,b+": "+r[++v]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function jl(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(Fr(h)),Ir(h))for(let b=10;b<h.length;b++){const R=h[b],U=R[1].firstChild;null!==U&&jl(R[1],R,U,a)}const v=s.type;if(8&v)jl(n,r,s.child,a);else if(32&v){const b=sp(s,r);let R;for(;R=b();)a.push(R)}else if(16&v){const b=dm(r,s);if(Array.isArray(b))a.push(...b);else{const R=Lu(r[16]);jl(R[1],R,b,a,!0)}}s=l?s.projectionNext:s.next}return a}class Uc{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return jl(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Ir(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(ap(r,a),_a(s,a))}this._attachedToViewContainer=!1}rm(this._lView[1],this._lView)}onDestroy(r){jp(this._lView[1],this._lView,null,r)}markForCheck(){Lc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Pr(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function em(n,r){Dd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ge(902,!1);this._appRef=r}}class ng extends Uc{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Pr(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class df extends rl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Dt(r);return new $d(s,this.ngModule)}}function Vd(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class n0{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const l=this.injector.get(r,jn,a);return l!==jn||s===jn?l:this.parentInjector.get(r,s,a)}}class $d extends hd{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function ym(n){return n.map(mm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Vd(this.componentDef.inputs)}get outputs(){return Vd(this.componentDef.outputs)}create(r,s,a,l){var h;let v=(l=l||this.ngModule)instanceof $o?l:null===(h=l)||void 0===h?void 0:h.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const b=v?new n0(r,v):r,R=b.get(V,null);if(null===R)throw new Ge(407,!1);const U=b.get(rt,null),Z=R.createRenderer(null,this.componentDef),re=this.componentDef.selectors[0][0]||"div",Se=a?function kc(n,r,s){return n.selectRootElement(r,s===zt.ShadowDom)}(Z,a,this.componentDef.encapsulation):Fu(R.createRenderer(null,this.componentDef),re,function P_(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(re)),qe=this.componentDef.onPush?288:272,vt=kd(0,null,null,1,0,null,null,null,null,null),Nt=Nc(null,vt,null,qe,null,null,R,Z,U,b,null);let Qt,yn;ro(Nt);try{const tr=function Zm(n,r,s,a,l,h){const v=s[1];s[22]=n;const R=Vl(v,22,2,"#host",null),U=R.mergedAttrs=r.hostAttrs;null!==U&&(cf(R,U,!0),null!==n&&(ea(l,n,U),null!==R.classes&&Sd(l,n,R.classes),null!==R.styles&&Td(l,n,R.styles)));const Z=a.createRenderer(n,r),re=Nc(s,Fm(r),null,r.onPush?32:16,s[22],R,a,Z,h||null,null,null);return v.firstCreatePass&&(Hr(ra(R,s),v,r.type),qp(v,R),Gm(R,s.length,1)),Bd(s,re),s[22]=re}(Se,this.componentDef,Nt,R,Z);if(Se)if(a)ea(Z,Se,["ng-version",on.full]);else{const{attrs:At,classes:qn}=function _m(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!Fa(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);At&&ea(Z,Se,At),qn&&qn.length>0&&Sd(Z,Se,qn.join(" "))}if(yn=ns(vt,22),void 0!==s){const At=yn.projection=[];for(let qn=0;qn<this.ngContentSelectors.length;qn++){const Yr=s[qn];At.push(null!=Yr?Array.from(Yr):null)}}Qt=function rg(n,r,s,a){const l=s[1],h=function C_(n,r,s){const a=B();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),zm(n,a,r,$l(n,r,1,null),s),uf(n,a));const l=xo(r,n,a.directiveStart,a);Xs(l,r);const h=ei(a,r);return h&&Xs(h,r),l}(l,s,r);if(n[8]=s[8]=h,null!==a)for(const b of a)b(h,r);if(r.contentQueries){const b=B();r.contentQueries(1,h,b.directiveStart)}const v=B();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(p(v.index),$m(s[1],v,0,v.directiveStart,v.directiveEnd,r),jm(r,h)),h}(tr,this.componentDef,Nt,[Ym]),Bp(vt,Nt,null)}finally{$()}return new O_(this.componentType,Qt,y(yn,Nt),Nt,yn)}}class O_ extends class dd{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new ng(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;Ua(h[1],h,l,r,s),Vm(h,this._tNode.index)}}get injector(){return new kn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Ym(){const n=B();Je(ht()[1],n)}function jd(n){let r=function hf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(pi(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ge(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const v=n;v.inputs=Bc(n.inputs),v.declaredInputs=Bc(n.declaredInputs),v.outputs=Bc(n.outputs);const b=l.hostBindings;b&&ff(n,b);const R=l.viewQuery,U=l.contentQueries;if(R&&sg(n,R),U&&Qm(n,U),be(n.inputs,l.inputs),be(n.declaredInputs,l.declaredInputs),be(n.outputs,l.outputs),pi(l)&&l.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const b=h[v];b&&b.ngInherit&&b(n),b===jd&&(s=!1)}}r=Object.getPrototypeOf(r)}!function ig(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=io(l.hostAttrs,s=io(s,l.hostAttrs))}}(a)}function Bc(n){return n===zr?{}:n===un?[]:n}function sg(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Qm(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function ff(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let $u=null;function ju(){if(!$u){const n=bn.Symbol;if(n&&n.iterator)$u=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&($u=a)}}}return $u}function Hd(n){return!!ug(n)&&(Array.isArray(n)||!(n instanceof Map)&&ju()in n)}function ug(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function yu(n,r,s){return n[r]=s}function Yo(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function lg(n,r,s,a){const l=ht();return Yo(l,Vn(),r)&&(Hn(),gu(m(),l,n,r,s,a)),lg}function zd(n,r,s,a){return Yo(n,Vn(),s)?r+ze(s)+a:Er}function Wd(n,r,s,a,l,h){const b=function Hl(n,r,s,a){const l=Yo(n,r,s);return Yo(n,r+1,a)||l}(n,function ar(){return cn.lFrame.bindingIndex}(),s,l);return Ar(2),b?r+ze(s)+a+ze(l)+h:Er}function Kd(n,r,s,a,l,h,v,b){const R=ht(),U=Hn(),Z=n+22,re=U.firstCreatePass?function Wl(n,r,s,a,l,h,v,b,R){const U=r.consts,Z=Vl(r,n,4,v||null,rs(U,b));Ld(r,s,Z,rs(U,R)),Je(r,Z);const re=Z.tViews=kd(2,Z,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,Z),re.queries=r.queries.embeddedTView(Z)),Z}(Z,U,R,r,s,a,l,h,v):U.data[Z];fe(re,!1);const Se=R[11].createComment("");Oh(U,R,Se,re),Xs(Se,R),Bd(R,R[Z]=Jp(Se,R,Se,re)),Yi(re)&&Vp(U,R,re),null!=v&&Od(R,re,b)}function oy(n){return mi(function Kt(){return cn.lFrame.contextLView}(),22+n)}function pf(n,r,s){const a=ht();return Yo(a,Vn(),r)&&da(Hn(),m(),a,n,r,a[11],s,!1),pf}function gf(n,r,s,a,l){const v=l?"class":"style";Ua(n,s,r.inputs[v],v,a)}function yf(n,r,s,a){const l=ht(),h=Hn(),v=22+n,b=l[11],R=l[v]=Fu(b,r,function ge(){return cn.lFrame.currentNamespace}()),U=h.firstCreatePass?function mf(n,r,s,a,l,h,v){const b=r.consts,U=Vl(r,n,2,l,rs(b,h));return Ld(r,s,U,rs(b,v)),null!==U.attrs&&cf(U,U.attrs,!1),null!==U.mergedAttrs&&cf(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(v,h,l,0,r,s,a):h.data[v];fe(U,!0);const Z=U.mergedAttrs;null!==Z&&ea(b,R,Z);const re=U.classes;null!==re&&Sd(b,R,re);const Se=U.styles;return null!==Se&&Td(b,R,Se),64!=(64&U.flags)&&Oh(h,l,R,U),0===function Ms(){return cn.lFrame.elementDepthCount}()&&Xs(R,l),function qs(){cn.lFrame.elementDepthCount++}(),Yi(U)&&(Vp(h,l,U),af(h,U,l)),null!==a&&Od(l,U),yf}function vu(){let n=B();Ne()?Ze():(n=n.parent,fe(n,!1));const r=n;!function Zs(){cn.lFrame.elementDepthCount--}();const s=Hn();return s.firstCreatePass&&(Je(s,n),no(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Go(n){return 0!=(16&n.flags)}(r)&&gf(s,r,ht(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ro(n){return 0!=(32&n.flags)}(r)&&gf(s,r,ht(),r.stylesWithoutHost,!1),vu}function Gc(n,r,s,a){return yf(n,r,s,a),vu(),Gc}function Zd(n,r,s){const a=ht(),l=Hn(),h=n+22,v=l.firstCreatePass?function qd(n,r,s,a,l){const h=r.consts,v=rs(h,a),b=Vl(r,n,8,"ng-container",v);return null!==v&&cf(b,v,!0),Ld(r,s,b,rs(h,l)),null!==r.queries&&r.queries.elementStart(r,b),b}(h,l,a,r,s):l.data[h];fe(v,!0);const b=a[h]=a[11].createComment("");return Oh(l,a,b,v),Xs(b,a),Yi(v)&&(Vp(l,a,v),af(l,v,a)),null!=s&&Od(a,v),Zd}function zc(){let n=B();const r=Hn();return Ne()?Ze():(n=n.parent,fe(n,!1)),r.firstCreatePass&&(Je(r,n),no(n)&&r.queries.elementEnd(n)),zc}function uy(){return ht()}function dg(n){return!!n&&"function"==typeof n.then}function _f(n){return!!n&&"function"==typeof n.subscribe}const vf=_f;function Ef(n,r,s,a){const l=ht(),h=Hn(),v=B();return function hg(n,r,s,a,l,h,v,b){const R=Yi(a),Z=n.firstCreatePass&&tg(n),re=r[8],Se=Fc(r);let qe=!0;if(3&a.type||b){const Qt=ei(a,r),yn=b?b(Qt):Qt,tr=Se.length,At=b?Yr=>b(Fr(Yr[a.index])):a.index;let qn=null;if(!b&&R&&(qn=function ly(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===s&&l[h+1]===a){const b=r[7],R=l[h+2];return b.length>R?b[R]:null}"string"==typeof v&&(h+=2)}return null}(n,r,l,a.index)),null!==qn)(qn.__ngLastListenerFn__||qn).__ngNextListenerFn__=h,qn.__ngLastListenerFn__=h,qe=!1;else{h=If(a,r,re,h,!1);const Yr=s.listen(yn,l,h);Se.push(h,Yr),Z&&Z.push(l,At,tr,tr+1)}}else h=If(a,r,re,h,!1);const vt=a.outputs;let Nt;if(qe&&null!==vt&&(Nt=vt[l])){const Qt=Nt.length;if(Qt)for(let yn=0;yn<Qt;yn+=2){const Ls=r[Nt[yn]][Nt[yn+1]].subscribe(h),sh=Se.length;Se.push(h,Ls),Z&&Z.push(l,a.index,sh,-(sh+1))}}}(h,l,l[11],v,n,r,0,a),Ef}function wf(n,r,s,a){try{return!1!==s(a)}catch(l){return jo(n,l),!1}}function If(n,r,s,a,l){return function h(v){if(v===Function)return a;Lc(2&n.flags?or(n.index,r):r);let R=wf(r,0,a,v),U=h.__ngNextListenerFn__;for(;U;)R=wf(r,0,U,v)&&R,U=U.__ngNextListenerFn__;return l&&!1===R&&(v.preventDefault(),v.returnValue=!1),R}}function cy(n=1){return function x(n){return(cn.lFrame.contextLView=function W(n,r){for(;n>0;)r=r[15],n--;return r}(n,cn.lFrame.contextLView))[8]}(n)}function Df(n,r){let s=null;const a=function g_(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?hp(n,h,!0):fp(a,h))return l}else s=l}return s}function Yd(n){const r=ht()[16][6];if(!r.projection){const a=r.projection=I(n?n.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const v=n?Df(h,n):0;null!==v&&(l[v]?l[v].projectionNext=h:a[v]=h,l[v]=h),h=h.next}}}function fg(n,r=0,s){const a=ht(),l=Hn(),h=Vl(l,22+n,16,null,s||null);null===h.projection&&(h.projection=r),Ze(),64!=(64&h.flags)&&function fm(n,r,s){Fh(r[11],0,r,s,up(n,s,r),um(s.parent||r[6],s,r))}(l,a,h)}function Kl(n,r,s){return bf(n,"",r,"",s),Kl}function bf(n,r,s,a,l){const h=ht(),v=zd(h,r,s,a);return v!==Er&&da(Hn(),m(),h,n,v,h[11],l,!1),bf}function gg(n,r,s,a,l){const h=n[s+1],v=null===r;let b=a?Ia(h):Uu(h),R=!1;for(;0!==b&&(!1===R||v);){const Z=n[b+1];$_(n[b],r)&&(R=!0,n[b+1]=a?Jh(Z):Md(Z)),b=a?Ia(Z):Uu(Z)}R&&(n[s+1]=a?Md(h):Jh(h))}function $_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&lt(n,r)>=0}const lo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mg(n){return n.substring(lo.key,lo.keyEnd)}function yg(n,r){const s=lo.textEnd;return s===r?-1:(r=lo.keyEnd=function Tf(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,lo.key=r,s),fl(n,r,s))}function fl(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Eg(n,r,s){return Ya(n,r,s,!1),Eg}function Sf(n,r){return Ya(n,r,null,!0),Sf}function wu(n,r){for(let s=function H_(n){return function vg(n){lo.key=0,lo.keyEnd=0,lo.value=0,lo.valueEnd=0,lo.textEnd=n.length}(n),yg(n,fl(n,0,lo.textEnd))}(r);s>=0;s=yg(r,s))ue(n,mg(r),!0)}function Ya(n,r,s,a){const l=ht(),h=Hn(),v=Ar(2);h.firstUpdatePass&&wg(h,n,v,a),r!==Er&&Yo(l,v,r)&&vy(h,h.data[S()],l,l[11],n,l[v+1]=function Z_(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=pe(la(n)))),n}(r,s),a,v)}function my(n,r){return r>=n.expandoStartIndex}function wg(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[S()],v=my(n,s);Ey(h,a)&&null===r&&!v&&(r=!1),r=function yy(n,r,s,a){const l=function Wr(n){const r=cn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Iu(s=Ig(null,n,r,s,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==l)if(s=Ig(l,n,r,s,a),null===h){let R=function W_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Uu(a))return n[Ia(a)]}(n,r,a);void 0!==R&&Array.isArray(R)&&(R=Ig(null,n,r,R[1],a),R=Iu(R,r.attrs,a),function K_(n,r,s,a){n[Ia(s?r.classBindings:r.styleBindings)]=a}(n,r,a,R))}else h=function _y(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Iu(a,n[h].hostAttrs,s);return Iu(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function B_(n,r,s,a,l,h){let v=h?r.classBindings:r.styleBindings,b=Ia(v),R=Uu(v);n[a]=s;let Z,U=!1;if(Array.isArray(s)){const re=s;Z=re[1],(null===Z||lt(re,Z)>0)&&(U=!0)}else Z=s;if(l)if(0!==R){const Se=Ia(n[b+1]);n[a+1]=Ul(Se,b),0!==Se&&(n[Se+1]=Sp(n[Se+1],a)),n[b+1]=function Mc(n,r){return 131071&n|r<<17}(n[b+1],a)}else n[a+1]=Ul(b,0),0!==b&&(n[b+1]=Sp(n[b+1],a)),b=a;else n[a+1]=Ul(R,0),0===b?b=a:n[R+1]=Sp(n[R+1],a),R=a;U&&(n[a+1]=Md(n[a+1])),gg(n,Z,a,!0),gg(n,Z,a,!1),function V_(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&lt(h,r)>=0&&(s[a+1]=Jh(s[a+1]))}(r,Z,n,a,h),v=Ul(b,R),h?r.classBindings=v:r.styleBindings=v}(l,h,r,s,v,a)}}function Ig(n,r,s,a,l){let h=null;const v=s.directiveEnd;let b=s.directiveStylingLast;for(-1===b?b=s.directiveStart:b++;b<v&&(h=r[b],a=Iu(a,h.hostAttrs,l),h!==n);)b++;return null!==n&&(s.directiveStylingLast=b),a}function Iu(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?l=v:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ue(n,v,!!s||r[++h]))}return void 0===n?null:n}function vy(n,r,s,a,l,h,v,b){if(!(3&r.type))return;const R=n.data,U=R[b+1];Xa(function Cp(n){return 1==(1&n)}(U)?bg(R,r,s,l,Uu(U),v):void 0)||(Xa(h)||function Tp(n){return 2==(2&n)}(U)&&(h=bg(R,null,s,l,b,v)),function bd(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:La.DashCase;null==l?n.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=La.Important),n.setStyle(s,a,l,h))}}(a,v,Xn(S(),s),l,h))}function bg(n,r,s,a,l,h){const v=null===r;let b;for(;l>0;){const R=n[l],U=Array.isArray(R),Z=U?R[1]:R,re=null===Z;let Se=s[l+1];Se===Er&&(Se=re?un:void 0);let qe=re?Be(Se,a):Z===a?Se:void 0;if(U&&!Xa(qe)&&(qe=Be(R,a)),Xa(qe)&&(b=qe,v))return b;const vt=n[l+1];l=v?Ia(vt):Uu(vt)}if(null!==r){let R=h?r.residualClasses:r.residualStyles;null!=R&&(b=Be(R,a))}return b}function Xa(n){return void 0!==n}function Ey(n,r){return 0!=(n.flags&(r?16:32))}function wy(n,r=""){const s=ht(),a=Hn(),l=n+22,h=a.firstCreatePass?Vl(a,l,1,r,null):a.data[l],v=s[l]=function pu(n,r){return n.createText(r)}(s[11],r);Oh(a,s,v,h),fe(h,!1)}function Tg(n){return Cf("",n,""),Tg}function Cf(n,r,s){const a=ht(),l=zd(a,n,r,s);return l!==Er&&mu(a,S(),l),Cf}function Sg(n,r,s,a,l){const h=ht(),v=Wd(h,n,r,s,a,l);return v!==Er&&mu(h,S(),v),Sg}function Ag(n,r,s){!function Qa(n,r,s,a){const l=Hn(),h=Ar(2);l.firstUpdatePass&&wg(l,null,h,a);const v=ht();if(s!==Er&&Yo(v,h,s)){const b=l.data[S()];if(Ey(b,a)&&!my(l,h)){let R=a?b.classesWithoutHost:b.stylesWithoutHost;null!==R&&(s=Te(R,s||"")),gf(l,b,v,s,a)}else!function u0(n,r,s,a,l,h,v,b){l===Er&&(l=un);let R=0,U=0,Z=0<l.length?l[0]:null,re=0<h.length?h[0]:null;for(;null!==Z||null!==re;){const Se=R<l.length?l[R+1]:void 0,qe=U<h.length?h[U+1]:void 0;let Nt,vt=null;Z===re?(R+=2,U+=2,Se!==qe&&(vt=re,Nt=qe)):null===re||null!==Z&&Z<re?(R+=2,vt=Z):(U+=2,vt=re,Nt=qe),null!==vt&&vy(n,r,s,a,vt,Nt,v,b),Z=R<l.length?l[R]:null,re=U<h.length?h[U]:null}}(l,b,v,v[11],v[h+1],v[h+1]=function Dg(n,r,s){if(null==s||""===s)return un;const a=[],l=la(s);if(Array.isArray(l))for(let h=0;h<l.length;h++)n(a,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&n(a,h,l[h]);else"string"==typeof l&&r(a,l);return a}(n,r,s),a,h)}}(ue,wu,zd(ht(),n,r,s),!0)}function Rg(n,r,s){const a=ht();return Yo(a,Vn(),r)&&da(Hn(),m(),a,n,r,a[11],s,!0),Rg}const Ql=void 0;var nv=["en",[["a","p"],["AM","PM"],Ql],[["AM","PM"],Ql,Ql],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ql,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ql,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ql,"{1} 'at' {0}",Ql],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tv(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Xl={};function th(n){const r=function Ly(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Oy(r);if(s)return s;const a=r.split("-")[0];if(s=Oy(a),s)return s;if("en"===a)return nv;throw new Ge(701,!1)}function Pg(n){return th(n)[Zn.PluralCase]}function Oy(n){return n in Xl||(Xl[n]=bn.ng&&bn.ng.common&&bn.ng.common.locales&&bn.ng.common.locales[n]),Xl[n]}var Zn=(()=>((Zn=Zn||{})[Zn.LocaleId=0]="LocaleId",Zn[Zn.DayPeriodsFormat=1]="DayPeriodsFormat",Zn[Zn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Zn[Zn.DaysFormat=3]="DaysFormat",Zn[Zn.DaysStandalone=4]="DaysStandalone",Zn[Zn.MonthsFormat=5]="MonthsFormat",Zn[Zn.MonthsStandalone=6]="MonthsStandalone",Zn[Zn.Eras=7]="Eras",Zn[Zn.FirstDayOfWeek=8]="FirstDayOfWeek",Zn[Zn.WeekendRange=9]="WeekendRange",Zn[Zn.DateFormat=10]="DateFormat",Zn[Zn.TimeFormat=11]="TimeFormat",Zn[Zn.DateTimeFormat=12]="DateTimeFormat",Zn[Zn.NumberSymbols=13]="NumberSymbols",Zn[Zn.NumberFormats=14]="NumberFormats",Zn[Zn.CurrencyCode=15]="CurrencyCode",Zn[Zn.CurrencySymbol=16]="CurrencySymbol",Zn[Zn.CurrencyName=17]="CurrencyName",Zn[Zn.Currencies=18]="Currencies",Zn[Zn.Directionality=19]="Directionality",Zn[Zn.PluralCase=20]="PluralCase",Zn[Zn.ExtraData=21]="ExtraData",Zn))();const qc="en-US";let Ng=qc;function ov(n,r,s,a,l){if(n=we(n),Array.isArray(n))for(let h=0;h<n.length;h++)ov(n[h],r,s,a,l);else{const h=Hn(),v=ht();let b=lu(n)?n:we(n.provide),R=Pu(n);const U=B(),Z=1048575&U.providerIndexes,re=U.directiveStart,Se=U.providerIndexes>>20;if(lu(n)||!n.multi){const qe=new Jn(R,l,ll),vt=uv(b,r,l?Z:Z+Se,re);-1===vt?(Hr(ra(U,v),h,b),av(h,n,r.length),r.push(b),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(qe),v.push(qe)):(s[vt]=qe,v[vt]=qe)}else{const qe=uv(b,r,Z+Se,re),vt=uv(b,r,Z,Z+Se),Nt=qe>=0&&s[qe],Qt=vt>=0&&s[vt];if(l&&!Qt||!l&&!Nt){Hr(ra(U,v),h,b);const yn=function Lw(n,r,s,a,l){const h=new Jn(n,s,ll);return h.multi=[],h.index=r,h.componentProviders=0,D0(h,l,a&&!s),h}(l?kw:Ow,s.length,l,a,R);!l&&Qt&&(s[vt].providerFactory=yn),av(h,n,r.length,0),r.push(b),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(yn),v.push(yn)}else av(h,n,qe>-1?qe:vt,D0(s[l?vt:qe],R,!l&&a));!l&&a&&Qt&&s[vt].componentProviders++}}}function av(n,r,s,a){const l=lu(r),h=function Ih(n){return!!n.useClass}(r);if(l||h){const R=(h?we(r.useClass):r).prototype.ngOnDestroy;if(R){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Z=U.indexOf(s);-1===Z?U.push(s,[a,R]):U[Z+1].push(a,R)}else U.push(s,R)}}}function D0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function uv(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function Ow(n,r,s,a){return lv(this.multi,[])}function kw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=xo(s,s[1],this.providerFactory.index,a);h=b.slice(0,v),lv(l,h);for(let R=v;R<b.length;R++)h.push(b[R])}else h=[],lv(l,h);return h}function lv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function b0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function Nw(n,r,s){const a=Hn();if(a.firstCreatePass){const l=pi(n);ov(s,a.data,a.blueprint,l,!0),ov(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class Pf{}class T0{}function Fw(n,r){return new S0(n,r??null)}class S0 extends Pf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new df(this);const a=sr(r);this._bootstrapComponents=ku(a.bootstrap),this._r3Injector=gp(r,s,[{provide:Pf,useValue:this},{provide:rl,useValue:this.componentFactoryResolver}],pe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class cv extends T0{constructor(r){super(),this.moduleType=r}create(r){return new S0(this.moduleType,r)}}class Uw extends Pf{constructor(r,s,a){super(),this.componentFactoryResolver=new df(this),this.instance=null;const l=new ld([...r,{provide:Pf,useValue:this},{provide:rl,useValue:this.componentFactoryResolver}],s||cu(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function dv(n,r,s=null){return new Uw(n,r,s).injector}let Bw=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=uc(0,s.type),l=a.length>0?dv([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Mt({token:n,providedIn:"environment",factory:()=>new n(xi($o))}),n})();function C0(n){n.getStandaloneInjector=r=>r.get(Bw).getOrCreateStandaloneInjector(n)}function O0(n,r,s){const a=hn()+n,l=ht();return l[a]===Er?yu(l,a,s?r.call(s):r()):function Gd(n,r){return n[r]}(l,a)}function k0(n,r,s,a){return F0(ht(),hn(),n,r,s,a)}function L0(n,r,s,a){return function $0(n,r,s,a,l,h){let v=r+s,b=!1;for(let R=0;R<l.length;R++)Yo(n,v++,l[R])&&(b=!0);return b?yu(n,v,a.apply(h,l)):Lg(n,v)}(ht(),hn(),n,r,s,a)}function Lg(n,r){const s=n[r];return s===Er?void 0:s}function F0(n,r,s,a,l,h){const v=r+s;return Yo(n,v,l)?yu(n,v+1,h?a.call(h,l):a(l)):Lg(n,v+1)}function j0(n,r){const s=Hn();let a;const l=n+22;s.firstCreatePass?(a=function tI(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=$i(a.type)),v=Tr(ll);try{const b=er(!1),R=h();return er(b),function F_(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,ht(),l,R),R}finally{Tr(v)}}function H0(n,r,s){const a=n+22,l=ht(),h=mi(l,a);return function Fg(n,r){return n[1].data[r].pure}(l,a)?F0(l,hn(),r,h.transform,s,h):h.transform(s)}function fv(n){return r=>{setTimeout(n,void 0,r)}}const _l=class oI extends E.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),v=a;if(r&&"object"==typeof r){var b,R,U;const re=r;l=null===(b=re.next)||void 0===b?void 0:b.bind(re),h=null===(R=re.error)||void 0===R?void 0:R.bind(re),v=null===(U=re.complete)||void 0===U?void 0:U.bind(re)}this.__isAsync&&(h=fv(h),l&&(l=fv(l)),v&&(v=fv(v)));const Z=super.subscribe({next:l,error:h,complete:v});return r instanceof z.w0&&r.add(Z),Z}};function aI(){return this._results[ju()]()}class jy{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=ju(),a=jy.prototype;a[s]||(a[s]=aI)}get changes(){return this._changes||(this._changes=new _l)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=uo(r);(this._changesDetected=!function Oo(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ug=(()=>{class n{}return n.__NG_ELEMENT_ID__=cI,n})();const uI=Ug,lI=class extends uI{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,l=Nc(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(a)),Bp(a,l,r),new Uc(l)}};function cI(){return Hy(B(),ht())}function Hy(n,r){return 4&n.type?new lI(r,n,y(n,r)):null}let Gy=(()=>{class n{}return n.__NG_ELEMENT_ID__=dI,n})();function dI(){return W0(B(),ht())}const hI=Gy,G0=class extends hI{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new kn(this._hostTNode,this._hostLView)}get parentInjector(){const r=dt(this._hostTNode,this._hostLView);if(vo(r)){const s=nn(r,this._hostLView),a=vr(r);return new kn(s[1].data[a+8],s)}return new kn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=z0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const v=r.createEmbeddedView(s||{},h);return this.insert(v,l),v}createComponent(r,s,a,l,h){const v=r&&!function Aa(n){return"function"==typeof n}(r);let b;if(v)b=s;else{const re=s||{};b=re.index,a=re.injector,l=re.projectableNodes,h=re.environmentInjector||re.ngModuleRef}const R=v?r:new $d(Dt(r)),U=a||this.parentInjector;if(!h&&null==R.ngModule){const Se=(v?U:this.parentInjector).get($o,null);Se&&(h=Se)}const Z=R.create(U,l,void 0,h);return this.insert(Z.hostView,b),Z}insert(r,s){const a=r._lView,l=a[1];if(function ki(n){return Ir(n[3])}(a)){const Z=this.indexOf(r);if(-1!==Z)this.detach(Z);else{const re=a[3],Se=new G0(re,re[6],re[3]);Se.detach(Se.indexOf(r))}}const h=this._adjustIndex(s),v=this._lContainer;!function tm(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Su(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const v=r[17];null!==v&&s!==v&&function l_(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(v,r);const b=r[19];null!==b&&b.insertView(n),r[2]|=64}(l,a,v,h);const b=Lh(h,v),R=a[11],U=Ph(R,v[7]);return null!==U&&function vc(n,r,s,a,l,h){a[0]=l,a[6]=r,Dd(n,a,s,1,l,h)}(l,v[6],R,a,U,b),r.attachToViewContainerRef(),Su(pv(v),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=z0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=ap(this._lContainer,s);a&&(_a(pv(this._lContainer),s),rm(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=ap(this._lContainer,s);return a&&null!=_a(pv(this._lContainer),s)?new Uc(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function z0(n){return n[8]}function pv(n){return n[8]||(n[8]=[])}function W0(n,r){let s;const a=r[n.index];if(Ir(a))s=a;else{let l;if(8&n.type)l=Fr(a);else{const h=r[11];l=h.createComment("");const v=ei(n,r);al(h,Ph(h,v),l,function am(n,r){return n.nextSibling(r)}(h,v),!1)}r[n.index]=s=Jp(a,r,l,n),Bd(r,s)}return new G0(s,n,r)}class gv{constructor(r){this.queryList=r,this.matches=null}clone(){return new gv(this.queryList)}setDirty(){this.queryList.setDirty()}}class mv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const v=s.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new mv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==tE(r,s).matches&&this.queries[s].setDirty()}}class K0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class yv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new yv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class _v{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new _v(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,gI(s,h)),this.matchTNodeWithReadOption(r,s,fa(s,r,h,!1,!1))}else a===Ug?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,fa(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===c||l===Gy||l===Ug&&4&s.type)this.addMatch(s.index,-2);else{const h=fa(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function gI(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function yI(n,r,s,a){return-1===s?function mI(n,r){return 11&n.type?y(n,r):4&n.type?Hy(n,r):null}(r,n):-2===s?function _I(n,r,s){return s===c?y(r,n):s===Ug?Hy(r,n):s===Gy?W0(r,n):void 0}(n,r,a):xo(n,n[1],s,r)}function q0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,v=s.matches,b=[];for(let R=0;R<v.length;R+=2){const U=v[R];b.push(U<0?null:yI(r,h[U],v[R+1],s.metadata.read))}l.matches=b}return l.matches}function vv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const v=q0(n,r,l,s);for(let b=0;b<h.length;b+=2){const R=h[b];if(R>0)a.push(v[b/2]);else{const U=h[b+1],Z=r[-R];for(let re=10;re<Z.length;re++){const Se=Z[re];Se[17]===Se[3]&&vv(Se[1],Se,U,a)}if(null!==Z[9]){const re=Z[9];for(let Se=0;Se<re.length;Se++){const qe=re[Se];vv(qe[1],qe,U,a)}}}}}return a}function Z0(n){const r=ht(),s=Hn(),a=vs();cs(a+1);const l=tE(s,a);if(n.dirty&&function Co(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?vv(s,r,a,[]):q0(s,r,l,a);n.reset(h,f),n.notifyOnChanges()}return!0}return!1}function Y0(n,r,s){const a=Hn();a.firstCreatePass&&(eE(a,new K0(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),J0(a,ht(),r)}function Q0(n,r,s,a){const l=Hn();if(l.firstCreatePass){const h=B();eE(l,new K0(r,s,a),h.index),function EI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}J0(l,ht(),s)}function X0(){return function vI(n,r){return n[19].queries[r].queryList}(ht(),vs())}function J0(n,r,s){const a=new jy(4==(4&s));jp(n,r,a,a.destroy),null===r[19]&&(r[19]=new mv),r[19].queries.push(new gv(a))}function eE(n,r,s){null===n.queries&&(n.queries=new yv),n.queries.track(new _v(r,s))}function tE(n,r){return n.queries.getByIndex(r)}function nE(n,r){return Hy(n,r)}const VI=Eo("Input",n=>({bindingPropertyName:n})),$I=Eo("Output",n=>({bindingPropertyName:n}));function Wy(...n){}const wE=new li("Application Initializer");let Ky=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Wy,this.reject=Wy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(dg(h))s.push(h);else if(vf(h)){const v=new Promise((b,R)=>{h.subscribe({complete:b,error:R})});s.push(v)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(xi(wE,8))},n.\u0275prov=Mt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const IE=new li("AppId",{providedIn:"root",factory:function DE(){return`${bv()}${bv()}${bv()}`}});function bv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bE=new li("Platform Initializer"),jI=new li("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),TE=new li("appBootstrapListener"),HI=new li("AnimationModuleType");let GI=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Mt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const qy=new li("LocaleId",{providedIn:"root",factory:()=>P(qy,Lt.Optional|Lt.SkipSelf)||function zI(){return typeof $localize<"u"&&$localize.locale||qc}()}),WI=new li("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class KI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let qI=(()=>{class n{compileModuleSync(s){return new cv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=ku(sr(s).declarations).reduce((v,b)=>{const R=Dt(b);return R&&v.push(new $d(R)),v},[]);return new KI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Mt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QI=(()=>Promise.resolve(0))();function Tv(n){typeof Zone>"u"?QI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Du{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _l(!1),this.onMicrotaskEmpty=new _l(!1),this.onStable=new _l(!1),this.onError=new _l(!1),typeof Zone>"u")throw new Ge(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function XI(){let n=bn.requestAnimationFrame,r=bn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function tD(n){const r=()=>{!function eD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(bn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Cv(n),n.isCheckStableRunning=!0,Sv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Cv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,v,b)=>{try{return AE(n),s.invokeTask(l,h,v,b)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),ME(n)}},onInvoke:(s,a,l,h,v,b,R)=>{try{return AE(n),s.invoke(l,h,v,b,R)}finally{n.shouldCoalesceRunChangeDetection&&r(),ME(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,Cv(n),Sv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Du.isInAngularZone())throw new Ge(909,!1)}static assertNotInAngularZone(){if(Du.isInAngularZone())throw new Ge(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,r,JI,Wy,Wy);try{return h.runTask(v,s,a)}finally{h.cancelTask(v)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const JI={};function Sv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Cv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function AE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ME(n){n._nesting--,Sv(n)}class nD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _l,this.onMicrotaskEmpty=new _l,this.onStable=new _l,this.onError=new _l}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const RE=new li(""),xE=new li("");let Av,rD=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Av||(function iD(n){Av=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Du.assertNotInAngularZone(),Tv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Tv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(xi(Du),xi(PE),xi(xE))},n.\u0275prov=Mt({token:n,factory:n.\u0275fac}),n})(),PE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){var l,h;return null!==(l=null===(h=Av)||void 0===h?void 0:h.findTestabilityInTree(this,s,a))&&void 0!==l?l:null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Mt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Yc=null;const NE=new li("AllowMultipleToken"),Mv=new li("PlatformDestroyListeners");class aD{constructor(r,s){this.name=r,this.token=s}}function kE(n,r,s=[]){const a=`Platform: ${r}`,l=new li(a);return(h=[])=>{let v=Rv();if(!v||v.injector.get(NE,!1)){const b=[...s,...h,{provide:l,useValue:!0}];n?n(b):function uD(n){if(Yc&&!Yc.get(NE,!1))throw new Ge(400,!1);Yc=n;const r=n.get(FE);(function OE(n){const r=n.get(bE,null);r&&r.forEach(s=>s())})(n)}(function LE(n=[],r){return Fl.create({name:r,providers:[{provide:tl,useValue:"platform"},{provide:Mv,useValue:new Set([()=>Yc=null])},...n]})}(b,a))}return function cD(n){const r=Rv();if(!r)throw new Ge(401,!1);return r}()}}function Rv(){var n,r;return null!==(n=null===(r=Yc)||void 0===r?void 0:r.get(FE))&&void 0!==n?n:null}let FE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function BE(n,r){let s;return s="noop"===n?new nD:("zone.js"===n?void 0:n)||new Du(r),s}(a?.ngZone,function UE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:Du,useValue:l}];return l.run(()=>{const v=Fl.create({providers:h,parent:this.injector,name:s.moduleType.name}),b=s.create(v),R=b.injector.get(yd,null);if(!R)throw new Ge(402,!1);return l.runOutsideAngular(()=>{const U=l.onError.subscribe({next:Z=>{R.handleError(Z)}});b.onDestroy(()=>{Yy(this._modules,b),U.unsubscribe()})}),function VE(n,r,s){try{const a=s();return dg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(R,l,()=>{const U=b.injector.get(Ky);return U.runInitializers(),U.donePromise.then(()=>(function Vy(n){pn(n,"Expected localeId to be defined"),"string"==typeof n&&(Ng=n.toLowerCase().replace(/_/g,"-"))}(b.injector.get(qy,qc)||qc),this._moduleDoBootstrap(b),b))})})}bootstrapModule(s,a=[]){const l=$E({},a);return function sD(n,r,s){const a=new cv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Zy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Ge(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ge(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(Mv,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(xi(Fl))},n.\u0275prov=Mt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function $E(n,r){return Array.isArray(r)?r.reduce($E,n):{...n,...r}}let Zy=(()=>{class n{constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new G.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),v=new G.y(b=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Du.assertNotInAngularZone(),Tv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{Du.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{R.unsubscribe(),U.unsubscribe()}});this.isStable=(0,me.T)(h,v.pipe((0,_e.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof hd;if(!this._injector.get(Ky).done)throw!l&&dr(s),new Ge(405,false);let v;v=l?s:this._injector.get(rl).resolveComponentFactory(s),this.componentTypes.push(v.componentType);const b=function oD(n){return n.isBoundToModule}(v)?void 0:this._injector.get(Pf),U=v.create(Fl.NULL,[],a||v.selector,b),Z=U.location.nativeElement,re=U.injector.get(RE,null);return re?.registerApplication(Z),U.onDestroy(()=>{this.detachView(U.hostView),Yy(this.components,U),re?.unregisterApplication(Z)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new Ge(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Yy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(TE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Yy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Ge(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(xi(Du),xi($o),xi(yd))},n.\u0275prov=Mt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let HE=!0,GE=!1;function hD(){return GE=!0,HE}function fD(){if(GE)throw new Error("Cannot enable prod mode after platform setup.");HE=!1}let pD=(()=>{class n{}return n.__NG_ELEMENT_ID__=gD,n})();function gD(n){return function mD(n,r,s){if(Ui(n)&&!s){const a=or(n.index,r);return new Uc(a,a)}return 47&n.type?new Uc(r[16],r):null}(B(),ht(),16==(16&n))}class qE{constructor(){}supports(r){return Hd(r)}create(r){return new ID(r)}}const wD=(n,r)=>r;class ID{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wD}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const v=!a||s&&s.currentIndex<YE(a,l,h)?s:a,b=YE(v,l,h),R=v.currentIndex;if(v===a)l--,a=a._nextRemoved;else if(s=s._next,null==v.previousIndex)l++;else{h||(h=[]);const U=b-l,Z=R-l;if(U!=Z){for(let Se=0;Se<U;Se++){const qe=Se<h.length?h[Se]:h[Se]=0,vt=qe+Se;Z<=vt&&vt<U&&(h[Se]=qe+1)}h[v.previousIndex]=Z-U}}b!==R&&r(v,b,R)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Hd(r))throw new Ge(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,v,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let b=0;b<this.length;b++)h=r[b],v=this._trackByFn(b,h),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,h,v,b)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,v,b),a=!0),s=s._next}else l=0,function Jm(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[ju()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,b=>{v=this._trackByFn(l,b),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,b,v,l)),Object.is(s.item,b)||this._addIdentityChange(s,b)):(s=this._mismatch(s,b,v,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new DD(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new ZE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class DD{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class ZE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new bD,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class QE{constructor(){}supports(r){return r instanceof Map||ug(r)}create(){return new TD}}class TD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||ug(r)))throw new Ge(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const a=new SD(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class SD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function XE(){return new kv([new qE])}let kv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||XE()),deps:[[n,new Fn,new Ht]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Ge(901,!1)}}return n.\u0275prov=Mt({token:n,providedIn:"root",factory:XE}),n})();function JE(){return new Lv([new QE])}let Lv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||JE()),deps:[[n,new Fn,new Ht]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new Ge(901,!1)}}return n.\u0275prov=Mt({token:n,providedIn:"root",factory:JE}),n})();const MD=kE(null,"core",[]);let RD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(xi(Zy))},n.\u0275mod=oe({type:n}),n.\u0275inj=In({}),n})();function xD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},1481:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Dx:()=>Nr,H7:()=>An,b2:()=>hi,q6:()=>_n,se:()=>Oe});var E=F(6895),z=F(4650);class G extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class me extends G{static makeCurrent(){(0,E.HT)(new me)}onAndCancel(ae,ee,Re){return ae.addEventListener(ee,Re,!1),()=>{ae.removeEventListener(ee,Re,!1)}}dispatchEvent(ae,ee){ae.dispatchEvent(ee)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,ee){return(ee=ee||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,ee){return"window"===ee?window:"document"===ee?ae:"body"===ee?ae.body:null}getBaseHref(ae){const ee=function ve(){return _e=_e||document.querySelector("base"),_e?_e.getAttribute("href"):null}();return null==ee?null:function pe(ie){be=be||document.createElement("a"),be.setAttribute("href",ie);const ae=be.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(ee)}resetBaseElement(){_e=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,E.Mx)(document.cookie,ae)}}let be,_e=null;const Te=new z.OlP("TRANSITION_ID"),le=[{provide:z.ip1,useFactory:function se(ie,ae,ee){return()=>{ee.get(z.CZH).donePromise.then(()=>{const Re=(0,E.q)(),st=ae.querySelectorAll(`style[ng-transition="${ie}"]`);for(let xt=0;xt<st.length;xt++)Re.remove(st[xt])})}},deps:[Te,E.K0,z.zs3],multi:!0}];let it=(()=>{class ie{build(){return new XMLHttpRequest}}return ie.\u0275fac=function(ee){return new(ee||ie)},ie.\u0275prov=z.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const Xe=new z.OlP("EventManagerPlugins");let Ge=(()=>{class ie{constructor(ee,Re){this._zone=Re,this._eventNameToPlugin=new Map,ee.forEach(st=>st.manager=this),this._plugins=ee.slice().reverse()}addEventListener(ee,Re,st){return this._findPluginFor(Re).addEventListener(ee,Re,st)}addGlobalEventListener(ee,Re,st){return this._findPluginFor(Re).addGlobalEventListener(ee,Re,st)}getZone(){return this._zone}_findPluginFor(ee){const Re=this._eventNameToPlugin.get(ee);if(Re)return Re;const st=this._plugins;for(let xt=0;xt<st.length;xt++){const tn=st[xt];if(tn.supports(ee))return this._eventNameToPlugin.set(ee,tn),tn}throw new Error(`No event manager plugin found for event ${ee}`)}}return ie.\u0275fac=function(ee){return new(ee||ie)(z.LFG(Xe),z.LFG(z.R0b))},ie.\u0275prov=z.Yz7({token:ie,factory:ie.\u0275fac}),ie})();class ct{constructor(ae){this._doc=ae}addGlobalEventListener(ae,ee,Re){const st=(0,E.q)().getGlobalEventTarget(this._doc,ae);if(!st)throw new Error(`Unsupported event target ${st} for event ${ee}`);return this.addEventListener(st,ee,Re)}}let ze=(()=>{class ie{constructor(){this._stylesSet=new Set}addStyles(ee){const Re=new Set;ee.forEach(st=>{this._stylesSet.has(st)||(this._stylesSet.add(st),Re.add(st))}),this.onStylesAdded(Re)}onStylesAdded(ee){}getAllStyles(){return Array.from(this._stylesSet)}}return ie.\u0275fac=function(ee){return new(ee||ie)},ie.\u0275prov=z.Yz7({token:ie,factory:ie.\u0275fac}),ie})(),Ke=(()=>{class ie extends ze{constructor(ee){super(),this._doc=ee,this._hostNodes=new Map,this._hostNodes.set(ee.head,[])}_addStylesToHost(ee,Re,st){ee.forEach(xt=>{const tn=this._doc.createElement("style");tn.textContent=xt,st.push(Re.appendChild(tn))})}addHost(ee){const Re=[];this._addStylesToHost(this._stylesSet,ee,Re),this._hostNodes.set(ee,Re)}removeHost(ee){const Re=this._hostNodes.get(ee);Re&&Re.forEach(De),this._hostNodes.delete(ee)}onStylesAdded(ee){this._hostNodes.forEach((Re,st)=>{this._addStylesToHost(ee,st,Re)})}ngOnDestroy(){this._hostNodes.forEach(ee=>ee.forEach(De))}}return ie.\u0275fac=function(ee){return new(ee||ie)(z.LFG(E.K0))},ie.\u0275prov=z.Yz7({token:ie,factory:ie.\u0275fac}),ie})();function De(ie){(0,E.q)().remove(ie)}const Ot={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$e=/%COMP%/g;function ce(ie,ae,ee){for(let Re=0;Re<ae.length;Re++){let st=ae[Re];Array.isArray(st)?ce(ie,st,ee):(st=st.replace($e,ie),ee.push(st))}return ee}function Me(ie){return ae=>{if("__ngUnwrap__"===ae)return ie;!1===ie(ae)&&(ae.preventDefault(),ae.returnValue=!1)}}let Oe=(()=>{class ie{constructor(ee,Re,st){this.eventManager=ee,this.sharedStylesHost=Re,this.appId=st,this.rendererByCompId=new Map,this.defaultRenderer=new gt(ee)}createRenderer(ee,Re){if(!ee||!Re)return this.defaultRenderer;switch(Re.encapsulation){case z.ifc.Emulated:{let st=this.rendererByCompId.get(Re.id);return st||(st=new pn(this.eventManager,this.sharedStylesHost,Re,this.appId),this.rendererByCompId.set(Re.id,st)),st.applyToHost(ee),st}case 1:case z.ifc.ShadowDom:return new Et(this.eventManager,this.sharedStylesHost,ee,Re);default:if(!this.rendererByCompId.has(Re.id)){const st=ce(Re.id,Re.styles,[]);this.sharedStylesHost.addStyles(st),this.rendererByCompId.set(Re.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ie.\u0275fac=function(ee){return new(ee||ie)(z.LFG(Ge),z.LFG(Ke),z.LFG(z.AFp))},ie.\u0275prov=z.Yz7({token:ie,factory:ie.\u0275fac}),ie})();class gt{constructor(ae){this.eventManager=ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,ee){return ee?document.createElementNS(Ot[ee]||ee,ae):document.createElement(ae)}createComment(ae){return document.createComment(ae)}createText(ae){return document.createTextNode(ae)}appendChild(ae,ee){(On(ae)?ae.content:ae).appendChild(ee)}insertBefore(ae,ee,Re){ae&&(On(ae)?ae.content:ae).insertBefore(ee,Re)}removeChild(ae,ee){ae&&ae.removeChild(ee)}selectRootElement(ae,ee){let Re="string"==typeof ae?document.querySelector(ae):ae;if(!Re)throw new Error(`The selector "${ae}" did not match any elements`);return ee||(Re.textContent=""),Re}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,ee,Re,st){if(st){ee=st+":"+ee;const xt=Ot[st];xt?ae.setAttributeNS(xt,ee,Re):ae.setAttribute(ee,Re)}else ae.setAttribute(ee,Re)}removeAttribute(ae,ee,Re){if(Re){const st=Ot[Re];st?ae.removeAttributeNS(st,ee):ae.removeAttribute(`${Re}:${ee}`)}else ae.removeAttribute(ee)}addClass(ae,ee){ae.classList.add(ee)}removeClass(ae,ee){ae.classList.remove(ee)}setStyle(ae,ee,Re,st){st&(z.JOm.DashCase|z.JOm.Important)?ae.style.setProperty(ee,Re,st&z.JOm.Important?"important":""):ae.style[ee]=Re}removeStyle(ae,ee,Re){Re&z.JOm.DashCase?ae.style.removeProperty(ee):ae.style[ee]=""}setProperty(ae,ee,Re){ae[ee]=Re}setValue(ae,ee){ae.nodeValue=ee}listen(ae,ee,Re){return"string"==typeof ae?this.eventManager.addGlobalEventListener(ae,ee,Me(Re)):this.eventManager.addEventListener(ae,ee,Me(Re))}}function On(ie){return"TEMPLATE"===ie.tagName&&void 0!==ie.content}class pn extends gt{constructor(ae,ee,Re,st){super(ae),this.component=Re;const xt=ce(st+"-"+Re.id,Re.styles,[]);ee.addStyles(xt),this.contentAttr=function ne(ie){return"_ngcontent-%COMP%".replace($e,ie)}(st+"-"+Re.id),this.hostAttr=function Qe(ie){return"_nghost-%COMP%".replace($e,ie)}(st+"-"+Re.id)}applyToHost(ae){super.setAttribute(ae,this.hostAttr,"")}createElement(ae,ee){const Re=super.createElement(ae,ee);return super.setAttribute(Re,this.contentAttr,""),Re}}class Et extends gt{constructor(ae,ee,Re,st){super(ae),this.sharedStylesHost=ee,this.hostEl=Re,this.shadowRoot=Re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const xt=ce(st.id,st.styles,[]);for(let tn=0;tn<xt.length;tn++){const Tn=document.createElement("style");Tn.textContent=xt[tn],this.shadowRoot.appendChild(Tn)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ae,ee){return super.appendChild(this.nodeOrShadowRoot(ae),ee)}insertBefore(ae,ee,Re){return super.insertBefore(this.nodeOrShadowRoot(ae),ee,Re)}removeChild(ae,ee){return super.removeChild(this.nodeOrShadowRoot(ae),ee)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}}let Rn=(()=>{class ie extends ct{constructor(ee){super(ee)}supports(ee){return!0}addEventListener(ee,Re,st){return ee.addEventListener(Re,st,!1),()=>this.removeEventListener(ee,Re,st)}removeEventListener(ee,Re,st){return ee.removeEventListener(Re,st)}}return ie.\u0275fac=function(ee){return new(ee||ie)(z.LFG(E.K0))},ie.\u0275prov=z.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const rn=["alt","control","meta","shift"],en={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mt={alt:ie=>ie.altKey,control:ie=>ie.ctrlKey,meta:ie=>ie.metaKey,shift:ie=>ie.shiftKey};let Sr=(()=>{class ie extends ct{constructor(ee){super(ee)}supports(ee){return null!=ie.parseEventName(ee)}addEventListener(ee,Re,st){const xt=ie.parseEventName(Re),tn=ie.eventCallback(xt.fullKey,st,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(ee,xt.domEventName,tn))}static parseEventName(ee){const Re=ee.toLowerCase().split("."),st=Re.shift();if(0===Re.length||"keydown"!==st&&"keyup"!==st)return null;const xt=ie._normalizeKey(Re.pop());let tn="",Tn=Re.indexOf("code");if(Tn>-1&&(Re.splice(Tn,1),tn="code."),rn.forEach(Ti=>{const vn=Re.indexOf(Ti);vn>-1&&(Re.splice(vn,1),tn+=Ti+".")}),tn+=xt,0!=Re.length||0===xt.length)return null;const Kn={};return Kn.domEventName=st,Kn.fullKey=tn,Kn}static matchEventFullKeyCode(ee,Re){let st=en[ee.key]||ee.key,xt="";return Re.indexOf("code.")>-1&&(st=ee.code,xt="code."),!(null==st||!st)&&(st=st.toLowerCase()," "===st?st="space":"."===st&&(st="dot"),rn.forEach(tn=>{tn!==st&&(0,Mt[tn])(ee)&&(xt+=tn+".")}),xt+=st,xt===Re)}static eventCallback(ee,Re,st){return xt=>{ie.matchEventFullKeyCode(xt,ee)&&st.runGuarded(()=>Re(xt))}}static _normalizeKey(ee){return"esc"===ee?"escape":ee}}return ie.\u0275fac=function(ee){return new(ee||ie)(z.LFG(E.K0))},ie.\u0275prov=z.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const _n=(0,z.eFA)(z._c5,"browser",[{provide:z.Lbi,useValue:E.bD},{provide:z.g9A,useValue:function br(){me.makeCurrent()},multi:!0},{provide:E.K0,useFactory:function jr(){return(0,z.RDi)(document),document},deps:[]}]),Wn=new z.OlP(""),Lt=[{provide:z.rWj,useClass:class we{addToWindow(ae){z.dqk.getAngularTestability=(Re,st=!0)=>{const xt=ae.findTestabilityInTree(Re,st);if(null==xt)throw new Error("Could not find testability for element.");return xt},z.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),z.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),z.dqk.frameworkStabilizers||(z.dqk.frameworkStabilizers=[]),z.dqk.frameworkStabilizers.push(Re=>{const st=z.dqk.getAllAngularTestabilities();let xt=st.length,tn=!1;const Tn=function(Kn){tn=tn||Kn,xt--,0==xt&&Re(tn)};st.forEach(function(Kn){Kn.whenStable(Tn)})})}findTestabilityInTree(ae,ee,Re){return null==ee?null:ae.getTestability(ee)??(Re?(0,E.q)().isShadowRoot(ee)?this.findTestabilityInTree(ae,ee.host,!0):this.findTestabilityInTree(ae,ee.parentElement,!0):null)}},deps:[]},{provide:z.lri,useClass:z.dDg,deps:[z.R0b,z.eoX,z.rWj]},{provide:z.dDg,useClass:z.dDg,deps:[z.R0b,z.eoX,z.rWj]}],Gr=[{provide:z.zSh,useValue:"root"},{provide:z.qLn,useFactory:function mr(){return new z.qLn},deps:[]},{provide:Xe,useClass:Rn,multi:!0,deps:[E.K0,z.R0b,z.Lbi]},{provide:Xe,useClass:Sr,multi:!0,deps:[E.K0]},{provide:Oe,useClass:Oe,deps:[Ge,Ke,z.AFp]},{provide:z.FYo,useExisting:Oe},{provide:ze,useExisting:Ke},{provide:Ke,useClass:Ke,deps:[E.K0]},{provide:Ge,useClass:Ge,deps:[Xe,z.R0b]},{provide:E.JF,useClass:it,deps:[]},[]];let hi=(()=>{class ie{constructor(ee){}static withServerTransition(ee){return{ngModule:ie,providers:[{provide:z.AFp,useValue:ee.appId},{provide:Te,useExisting:z.AFp},le]}}}return ie.\u0275fac=function(ee){return new(ee||ie)(z.LFG(Wn,12))},ie.\u0275mod=z.oAB({type:ie}),ie.\u0275inj=z.cJS({providers:[...Gr,...Lt],imports:[E.ez,z.hGG]}),ie})(),Nr=(()=>{class ie{constructor(ee){this._doc=ee}getTitle(){return this._doc.title}setTitle(ee){this._doc.title=ee||""}}return ie.\u0275fac=function(ee){return new(ee||ie)(z.LFG(E.K0))},ie.\u0275prov=z.Yz7({token:ie,factory:function(ee){let Re=null;return Re=ee?new ee:function Lr(){return new Nr((0,z.LFG)(E.K0))}(),Re},providedIn:"root"}),ie})();typeof window<"u"&&window;let An=(()=>{class ie{}return ie.\u0275fac=function(ee){return new(ee||ie)},ie.\u0275prov=z.Yz7({token:ie,factory:function(ee){let Re=null;return Re=ee?new(ee||ie):z.LFG(sr),Re},providedIn:"root"}),ie})(),sr=(()=>{class ie extends An{constructor(ee){super(),this._doc=ee}sanitize(ee,Re){if(null==Re)return null;switch(ee){case z.q3G.NONE:return Re;case z.q3G.HTML:return(0,z.qzn)(Re,"HTML")?(0,z.z3N)(Re):(0,z.EiD)(this._doc,String(Re)).toString();case z.q3G.STYLE:return(0,z.qzn)(Re,"Style")?(0,z.z3N)(Re):Re;case z.q3G.SCRIPT:if((0,z.qzn)(Re,"Script"))return(0,z.z3N)(Re);throw new Error("unsafe value used in a script context");case z.q3G.URL:return(0,z.qzn)(Re,"URL")?(0,z.z3N)(Re):(0,z.mCW)(String(Re));case z.q3G.RESOURCE_URL:if((0,z.qzn)(Re,"ResourceURL"))return(0,z.z3N)(Re);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ee} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ee){return(0,z.JVY)(ee)}bypassSecurityTrustStyle(ee){return(0,z.L6k)(ee)}bypassSecurityTrustScript(ee){return(0,z.eBb)(ee)}bypassSecurityTrustUrl(ee){return(0,z.LAX)(ee)}bypassSecurityTrustResourceUrl(ee){return(0,z.pB0)(ee)}}return ie.\u0275fac=function(ee){return new(ee||ie)(z.LFG(E.K0))},ie.\u0275prov=z.Yz7({token:ie,factory:function(ee){let Re=null;return Re=ee?new ee:function dr(ie){return new sr(ie.get(E.K0))}(z.LFG(z.zs3)),Re},providedIn:"root"}),ie})()},9379:(Rt,Ue,F)=>{"use strict";F.d(Ue,{gz:()=>Vi,m2:()=>yr,F0:()=>Ri,rH:()=>xo,yS:()=>$a,Bz:()=>Fi,lC:()=>Ci});var E=F(4650),z=F(8996),G=F(9646),me=F(1135),_e=F(6805),ve=F(9841),be=F(7272),pe=F(9770),Te=F(9635),se=F(2843),le=F(9751),we=F(515),it=F(4033),Xe=F(7579),Ge=F(6895),ct=F(4004),ze=F(3900),Ke=F(5698),De=F(8675),Ot=F(9300),$e=F(5577),Ie=F(590),ke=F(4351),ot=F(8505),It=F(8421),ne=F(5403),Qe=F(4482);function ce(I){return(0,Qe.e)((D,_)=>{let q,C=null,N=!1;C=D.subscribe((0,ne.x)(_,void 0,void 0,te=>{q=(0,It.Xf)(I(te,ce(I)(D))),C?(C.unsubscribe(),C=null,q.subscribe(_)):N=!0})),N&&(C.unsubscribe(),C=null,q.subscribe(_))})}var Me=F(5026);function Ve(I){return I<=0?()=>we.E:(0,Qe.e)((D,_)=>{let C=[];D.subscribe((0,ne.x)(_,N=>{C.push(N),I<C.length&&C.shift()},()=>{for(const N of C)_.next(N);_.complete()},void 0,()=>{C=null}))})}var Oe=F(8068),gt=F(6590),mt=F(4671);function Yt(I,D){const _=arguments.length>=2;return C=>C.pipe(I?(0,Ot.h)((N,q)=>I(N,q,C)):mt.y,Ve(1),_?(0,gt.d)(D):(0,Oe.T)(()=>new _e.K))}var On=F(2529);function Et(I){return(0,Qe.e)((D,_)=>{try{D.subscribe(_)}finally{_.add(I)}})}var Rn=F(8343),rn=F(8189),en=F(1481);const Mt="primary",Sr=Symbol("RouteTitle");class In{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const _=this.params[D];return Array.isArray(_)?_[0]:_}return null}getAll(D){if(this.has(D)){const _=this.params[D];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Dn(I){return new In(I)}function Ai(I,D,_){const C=_.path.split("/");if(C.length>I.length||"full"===_.pathMatch&&(D.hasChildren()||C.length<I.length))return null;const N={};for(let q=0;q<C.length;q++){const te=C[q],ue=I[q];if(te.startsWith(":"))N[te.substring(1)]=ue;else if(te!==ue.path)return null}return{consumed:I.slice(0,C.length),posParams:N}}function Yn(I,D){const _=I?Object.keys(I):void 0,C=D?Object.keys(D):void 0;if(!_||!C||_.length!=C.length)return!1;let N;for(let q=0;q<_.length;q++)if(N=_[q],!br(I[N],D[N]))return!1;return!0}function br(I,D){if(Array.isArray(I)&&Array.isArray(D)){if(I.length!==D.length)return!1;const _=[...I].sort(),C=[...D].sort();return _.every((N,q)=>C[q]===N)}return I===D}function mr(I){return Array.prototype.concat.apply([],I)}function jr(I){return I.length>0?I[I.length-1]:null}function _n(I,D){for(const _ in I)I.hasOwnProperty(_)&&D(I[_],_)}function Wn(I){return(0,E.CqO)(I)?I:(0,E.QGY)(I)?(0,z.D)(Promise.resolve(I)):(0,G.of)(I)}const hi={exact:function Lr(I,D,_){if(!un(I.segments,D.segments)||!zt(I.segments,D.segments,_)||I.numberOfChildren!==D.numberOfChildren)return!1;for(const C in D.children)if(!I.children[C]||!Lr(I.children[C],D.children[C],_))return!1;return!0},subset:ir},Tr={exact:function qi(I,D){return Yn(I,D)},subset:function Nr(I,D){return Object.keys(D).length<=Object.keys(I).length&&Object.keys(D).every(_=>br(I[_],D[_]))},ignored:()=>!0};function ri(I,D,_){return hi[_.paths](I.root,D.root,_.matrixParams)&&Tr[_.queryParams](I.queryParams,D.queryParams)&&!("exact"===_.fragment&&I.fragment!==D.fragment)}function ir(I,D,_){return Xt(I,D,D.segments,_)}function Xt(I,D,_,C){if(I.segments.length>_.length){const N=I.segments.slice(0,_.length);return!(!un(N,_)||D.hasChildren()||!zt(N,_,C))}if(I.segments.length===_.length){if(!un(I.segments,_)||!zt(I.segments,_,C))return!1;for(const N in D.children)if(!I.children[N]||!ir(I.children[N],D.children[N],C))return!1;return!0}{const N=_.slice(0,I.segments.length),q=_.slice(I.segments.length);return!!(un(I.segments,N)&&zt(I.segments,N,C)&&I.children[Mt])&&Xt(I.children[Mt],D,q,C)}}function zt(I,D,_){return D.every((C,N)=>Tr[_](I[N].parameters,C.parameters))}class bn{constructor(D,_,C){this.root=D,this.queryParams=_,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return Gn.serialize(this)}}class Wt{constructor(D,_){this.segments=D,this.children=_,this.parent=null,_n(_,(C,N)=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mr(this)}}class lr{constructor(D,_){this.path=D,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Dn(this.parameters)),this._parameterMap}toString(){return ye(this)}}function un(I,D){return I.length===D.length&&I.every((_,C)=>_.path===D[C].path)}let Ln=(()=>{class I{}return I.\u0275fac=function(_){return new(_||I)},I.\u0275prov=E.Yz7({token:I,factory:function(){return new fi},providedIn:"root"}),I})();class fi{parse(D){const _=new nr(D);return new bn(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(D){const _=`/${cr(D.root,!0)}`,C=function nt(I){const D=Object.keys(I).map(_=>{const C=I[_];return Array.isArray(C)?C.map(N=>`${ut(_)}=${ut(N)}`).join("&"):`${ut(_)}=${ut(C)}`}).filter(_=>!!_);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${_}${C}${"string"==typeof D.fragment?`#${function $t(I){return encodeURI(I)}(D.fragment)}`:""}`}}const Gn=new fi;function Mr(I){return I.segments.map(D=>ye(D)).join("/")}function cr(I,D){if(!I.hasChildren())return Mr(I);if(D){const _=I.children[Mt]?cr(I.children[Mt],!1):"",C=[];return _n(I.children,(N,q)=>{q!==Mt&&C.push(`${q}:${cr(N,!1)}`)}),C.length>0?`${_}(${C.join("//")})`:_}{const _=function bi(I,D){let _=[];return _n(I.children,(C,N)=>{N===Mt&&(_=_.concat(D(C,N)))}),_n(I.children,(C,N)=>{N!==Mt&&(_=_.concat(D(C,N)))}),_}(I,(C,N)=>N===Mt?[cr(I.children[Mt],!1)]:[`${N}:${cr(C,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Mt]?`${Mr(I)}/${_[0]}`:`${Mr(I)}/(${_.join("//")})`}}function kt(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ut(I){return kt(I).replace(/%3B/gi,";")}function ln(I){return kt(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jt(I){return decodeURIComponent(I)}function oe(I){return Jt(I.replace(/\+/g,"%20"))}function ye(I){return`${ln(I.path)}${function Ce(I){return Object.keys(I).map(D=>`;${ln(D)}=${ln(I[D])}`).join("")}(I.parameters)}`}const je=/^[^\/()?;=#]+/;function Dt(I){const D=I.match(je);return D?D[0]:""}const Gt=/^[^=?&#]+/,dr=/^[^&#]+/;class nr{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(D.length>0||Object.keys(_).length>0)&&(C[Mt]=new Wt(D,_)),C}parseSegment(){const D=Dt(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new E.vHH(4009,!1);return this.capture(D),new lr(Jt(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const _=Dt(this.remaining);if(!_)return;this.capture(_);let C="";if(this.consumeOptional("=")){const N=Dt(this.remaining);N&&(C=N,this.capture(C))}D[Jt(_)]=Jt(C)}parseQueryParam(D){const _=function An(I){const D=I.match(Gt);return D?D[0]:""}(this.remaining);if(!_)return;this.capture(_);let C="";if(this.consumeOptional("=")){const te=function sr(I){const D=I.match(dr);return D?D[0]:""}(this.remaining);te&&(C=te,this.capture(C))}const N=oe(_),q=oe(C);if(D.hasOwnProperty(N)){let te=D[N];Array.isArray(te)||(te=[te],D[N]=te),te.push(q)}else D[N]=q}parseParens(D){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=Dt(this.remaining),N=this.remaining[C.length];if("/"!==N&&")"!==N&&";"!==N)throw new E.vHH(4010,!1);let q;C.indexOf(":")>-1?(q=C.slice(0,C.indexOf(":")),this.capture(q),this.capture(":")):D&&(q=Mt);const te=this.parseChildren();_[q]=1===Object.keys(te).length?te[Mt]:new Wt([],te),this.consumeOptional("//")}return _}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new E.vHH(4011,!1)}}function ie(I){return I.segments.length>0?new Wt([],{[Mt]:I}):I}function ae(I){const D={};for(const C of Object.keys(I.children)){const q=ae(I.children[C]);(q.segments.length>0||q.hasChildren())&&(D[C]=q)}return function ee(I){if(1===I.numberOfChildren&&I.children[Mt]){const D=I.children[Mt];return new Wt(I.segments.concat(D.segments),D.children)}return I}(new Wt(I.segments,D))}function Re(I){return I instanceof bn}function Kn(I,D,_,C,N){var q;if(0===_.length)return rr(D.root,D.root,D.root,C,N);const te=function Ni(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Hs(!0,0,I);let D=0,_=!1;const C=I.reduce((N,q,te)=>{if("object"==typeof q&&null!=q){if(q.outlets){const ue={};return _n(q.outlets,(Be,lt)=>{ue[lt]="string"==typeof Be?Be.split("/"):Be}),[...N,{outlets:ue}]}if(q.segmentPath)return[...N,q.segmentPath]}return"string"!=typeof q?[...N,q]:0===te?(q.split("/").forEach((ue,Be)=>{0==Be&&"."===ue||(0==Be&&""===ue?_=!0:".."===ue?D++:""!=ue&&N.push(ue))}),N):[...N,q]},[]);return new Hs(_,D,C)}(_);if(te.toRoot())return rr(D.root,D.root,new Wt([],{}),C,N);const Be=function ue(sn){var Ft;const mn=function Mi(I,D,_,C){if(I.isAbsolute)return new Cr(D.root,!0,0);if(-1===C)return new Cr(_,_===D.root,0);return function Qr(I,D,_){let C=I,N=D,q=_;for(;q>N;){if(q-=N,C=C.parent,!C)throw new E.vHH(4005,!1);N=C.segments.length}return new Cr(C,!1,N-q)}(_,C+(Ti(I.commands[0])?0:1),I.numberOfDoubleDots)}(te,D,null===(Ft=I.snapshot)||void 0===Ft?void 0:Ft._urlSegment,sn),xr=mn.processChildren?Qn(mn.segmentGroup,mn.index,te.commands):Zi(mn.segmentGroup,mn.index,te.commands);return rr(D.root,mn.segmentGroup,xr,C,N)}(null===(q=I.snapshot)||void 0===q?void 0:q._lastPathIndex);return Be}function Ti(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function vn(I){return"object"==typeof I&&null!=I&&I.outlets}function rr(I,D,_,C,N){let te,q={};C&&_n(C,(Be,lt)=>{q[lt]=Array.isArray(Be)?Be.map(sn=>`${sn}`):`${Be}`}),te=I===D?_:hs(I,D,_);const ue=ie(ae(te));return new bn(ue,q,N)}function hs(I,D,_){const C={};return _n(I.children,(N,q)=>{C[q]=N===D?_:hs(N,D,_)}),new Wt(I.segments,C)}class Hs{constructor(D,_,C){if(this.isAbsolute=D,this.numberOfDoubleDots=_,this.commands=C,D&&C.length>0&&Ti(C[0]))throw new E.vHH(4003,!1);const N=C.find(vn);if(N&&N!==jr(C))throw new E.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cr{constructor(D,_,C){this.segmentGroup=D,this.processChildren=_,this.index=C}}function Zi(I,D,_){if(I||(I=new Wt([],{})),0===I.segments.length&&I.hasChildren())return Qn(I,D,_);const C=function fs(I,D,_){let C=0,N=D;const q={match:!1,pathIndex:0,commandIndex:0};for(;N<I.segments.length;){if(C>=_.length)return q;const te=I.segments[N],ue=_[C];if(vn(ue))break;const Be=`${ue}`,lt=C<_.length-1?_[C+1]:null;if(N>0&&void 0===Be)break;if(Be&&lt&&"object"==typeof lt&&void 0===lt.outlets){if(!Si(Be,lt,te))return q;C+=2}else{if(!Si(Be,{},te))return q;C++}N++}return{match:!0,pathIndex:N,commandIndex:C}}(I,D,_),N=_.slice(C.commandIndex);if(C.match&&C.pathIndex<I.segments.length){const q=new Wt(I.segments.slice(0,C.pathIndex),{});return q.children[Mt]=new Wt(I.segments.slice(C.pathIndex),I.children),Qn(q,0,N)}return C.match&&0===N.length?new Wt(I.segments,{}):C.match&&!I.hasChildren()?Ds(I,D,_):C.match?Qn(I,0,N):Ds(I,D,_)}function Qn(I,D,_){if(0===_.length)return new Wt(I.segments,{});{const C=function Xr(I){return vn(I[0])?I[0].outlets:{[Mt]:I}}(_),N={};return _n(C,(q,te)=>{"string"==typeof q&&(q=[q]),null!==q&&(N[te]=Zi(I.children[te],D,q))}),_n(I.children,(q,te)=>{void 0===C[te]&&(N[te]=q)}),new Wt(I.segments,N)}}function Ds(I,D,_){const C=I.segments.slice(0,D);let N=0;for(;N<_.length;){const q=_[N];if(vn(q)){const Be=bs(q.outlets);return new Wt(C,Be)}if(0===N&&Ti(_[0])){C.push(new lr(I.segments[D].path,Rr(_[0]))),N++;continue}const te=vn(q)?q.outlets[Mt]:`${q}`,ue=N<_.length-1?_[N+1]:null;te&&ue&&Ti(ue)?(C.push(new lr(te,Rr(ue))),N+=2):(C.push(new lr(te,{})),N++)}return new Wt(C,{})}function bs(I){const D={};return _n(I,(_,C)=>{"string"==typeof _&&(_=[_]),null!==_&&(D[C]=Ds(new Wt([],{}),0,_))}),D}function Rr(I){const D={};return _n(I,(_,C)=>D[C]=`${_}`),D}function Si(I,D,_){return I==_.path&&Yn(D,_.parameters)}class Jr{constructor(D,_){this.id=D,this.url=_}}class ii extends Jr{constructor(D,_,C="imperative",N=null){super(D,_),this.type=0,this.navigationTrigger=C,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yr extends Jr{constructor(D,_,C){super(D,_),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class to extends Jr{constructor(D,_,C,N){super(D,_),this.reason=C,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class si extends Jr{constructor(D,_,C,N){super(D,_),this.error=C,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ir extends Jr{constructor(D,_,C,N){super(D,_),this.urlAfterRedirects=C,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class no extends Jr{constructor(D,_,C,N){super(D,_),this.urlAfterRedirects=C,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ui extends Jr{constructor(D,_,C,N,q){super(D,_),this.urlAfterRedirects=C,this.state=N,this.shouldActivate=q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yi extends Jr{constructor(D,_,C,N){super(D,_),this.urlAfterRedirects=C,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pi extends Jr{constructor(D,_,C,N){super(D,_),this.urlAfterRedirects=C,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ts{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ss{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class co{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class To{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gi{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oi{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pe{constructor(D,_,C){this.routerEvent=D,this.position=_,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class He{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const _=this.pathFromRoot(D);return _.length>1?_[_.length-2]:null}children(D){const _=at(D,this._root);return _?_.children.map(C=>C.value):[]}firstChild(D){const _=at(D,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(D){const _=bt(D,this._root);return _.length<2?[]:_[_.length-2].children.map(N=>N.value).filter(N=>N!==D)}pathFromRoot(D){return bt(D,this._root).map(_=>_.value)}}function at(I,D){if(I===D.value)return D;for(const _ of D.children){const C=at(I,_);if(C)return C}return null}function bt(I,D){if(I===D.value)return[D];for(const _ of D.children){const C=bt(I,_);if(C.length)return C.unshift(D),C}return[]}class Vt{constructor(D,_){this.value=D,this.children=_}toString(){return`TreeNode(${this.value})`}}function En(I){const D={};return I&&I.children.forEach(_=>D[_.value.outlet]=_),D}class ai extends He{constructor(D,_){super(D),this.snapshot=_,Cs(this,D)}toString(){return this.snapshot.toString()}}function _r(I,D){const _=function Bi(I,D){const te=new Xi([],{},{},"",{},Mt,D,null,I.root,-1,{});return new Gs("",new Vt(te,[]))}(I,D),C=new me.X([new lr("",{})]),N=new me.X({}),q=new me.X({}),te=new me.X({}),ue=new me.X(""),Be=new Vi(C,N,te,ue,q,Mt,D,_.root);return Be.snapshot=_.root,new ai(new Vt(Be,[]),_)}class Vi{constructor(D,_,C,N,q,te,ue,Be){var lt,sn;this.url=D,this.params=_,this.queryParams=C,this.fragment=N,this.data=q,this.outlet=te,this.component=ue,this.title=null!==(lt=null===(sn=this.data)||void 0===sn?void 0:sn.pipe((0,ct.U)(Ft=>Ft[Sr])))&&void 0!==lt?lt:(0,G.of)(void 0),this._futureSnapshot=Be}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(D=>Dn(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(D=>Dn(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Us(I,D="emptyOnly"){const _=I.pathFromRoot;let C=0;if("always"!==D)for(C=_.length-1;C>=1;){const N=_[C],q=_[C-1];if(N.routeConfig&&""===N.routeConfig.path)C--;else{if(q.component)break;C--}}return function Qi(I){return I.reduce((D,_)=>{var C;return{params:{...D.params,..._.params},data:{...D.data,..._.data},resolve:{..._.data,...D.resolve,...null===(C=_.routeConfig)||void 0===C?void 0:C.data,..._._resolvedData}}},{params:{},data:{},resolve:{}})}(_.slice(C))}class Xi{constructor(D,_,C,N,q,te,ue,Be,lt,sn,Ft,mn){var xr;this.url=D,this.params=_,this.queryParams=C,this.fragment=N,this.data=q,this.outlet=te,this.component=ue,this.title=null===(xr=this.data)||void 0===xr?void 0:xr[Sr],this.routeConfig=Be,this._urlSegment=lt,this._lastPathIndex=sn,this._correctedLastPathIndex=mn??sn,this._resolve=Ft}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gs extends He{constructor(D,_){super(_),this.url=D,Cs(this,_)}toString(){return So(this._root)}}function Cs(I,D){D.value._routerState=I,D.children.forEach(_=>Cs(I,_))}function So(I){const D=I.children.length>0?` { ${I.children.map(So).join(", ")} } `:"";return`${I.value}${D}`}function $i(I){if(I.snapshot){const D=I.snapshot,_=I._futureSnapshot;I.snapshot=_,Yn(D.queryParams,_.queryParams)||I.queryParams.next(_.queryParams),D.fragment!==_.fragment&&I.fragment.next(_.fragment),Yn(D.params,_.params)||I.params.next(_.params),function zn(I,D){if(I.length!==D.length)return!1;for(let _=0;_<I.length;++_)if(!Yn(I[_],D[_]))return!1;return!0}(D.url,_.url)||I.url.next(_.url),Yn(D.data,_.data)||I.data.next(_.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Ji(I,D){const _=Yn(I.params,D.params)&&function zr(I,D){return un(I,D)&&I.every((_,C)=>Yn(_.parameters,D[C].parameters))}(I.url,D.url);return _&&!(!I.parent!=!D.parent)&&(!I.parent||Ji(I.parent,D.parent))}function As(I,D,_){if(_&&I.shouldReuseRoute(D.value,_.value.snapshot)){const C=_.value;C._futureSnapshot=D.value;const N=function zs(I,D,_){return D.children.map(C=>{for(const N of _.children)if(I.shouldReuseRoute(C.value,N.value.snapshot))return As(I,C,N);return As(I,C)})}(I,D,_);return new Vt(C,N)}{if(I.shouldAttach(D.value)){const q=I.retrieve(D.value);if(null!==q){const te=q.route;return te.value._futureSnapshot=D.value,te.children=D.children.map(ue=>As(I,ue)),te}}const C=function Ho(I){return new Vi(new me.X(I.url),new me.X(I.params),new me.X(I.queryParams),new me.X(I.fragment),new me.X(I.data),I.outlet,I.component,I)}(D.value),N=D.children.map(q=>As(I,q));return new Vt(C,N)}}const Bs="ngNavigationCancelingError";function ho(I,D){const{redirectTo:_,navigationBehaviorOptions:C}=Re(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,N=us(!1,0,D);return N.url=_,N.navigationBehaviorOptions=C,N}function us(I,D,_){const C=new Error("NavigationCancelingError: "+(I||""));return C[Bs]=!0,C.cancellationCode=D,_&&(C.url=_),C}function es(I){return ts(I)&&Re(I.url)}function ts(I){return I&&I[Bs]}class Oi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new gs,this.attachRef=null}}let gs=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(_,C){const N=this.getOrCreateContext(_);N.outlet=C,this.contexts.set(_,N)}onChildOutletDestroyed(_){const C=this.getContext(_);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let C=this.getContext(_);return C||(C=new Oi,this.contexts.set(_,C)),C}getContext(_){return this.contexts.get(_)||null}}return I.\u0275fac=function(_){return new(_||I)},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Ws=!1;let Ci=(()=>{class I{constructor(_,C,N,q,te){this.parentContexts=_,this.location=C,this.changeDetector=q,this.environmentInjector=te,this.activated=null,this._activatedRoute=null,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.name=N||Mt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){var _;(null===(_=this.parentContexts.getContext(this.name))||void 0===_?void 0:_.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,Ws);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,Ws);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,Ws);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,C){this.activated=_,this._activatedRoute=C,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,C){if(this.isActivated)throw new E.vHH(4013,Ws);this._activatedRoute=_;const N=this.location,te=_._futureSnapshot.component,ue=this.parentContexts.getOrCreateContext(this.name).children,Be=new fo(_,ue,N.injector);if(C&&function ms(I){return!!I.resolveComponentFactory}(C)){const lt=C.resolveComponentFactory(te);this.activated=N.createComponent(lt,N.length,Be)}else this.activated=N.createComponent(te,{index:N.length,injector:Be,environmentInjector:C??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(_){return new(_||I)(E.Y36(gs),E.Y36(E.s_b),E.$8M("name"),E.Y36(E.sBO),E.Y36(E.lqb))},I.\u0275dir=E.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),I})();class fo{constructor(D,_,C){this.route=D,this.childContexts=_,this.parent=C}get(D,_){return D===Vi?this.route:D===gs?this.childContexts:this.parent.get(D,_)}}let Fr=(()=>{class I{}return I.\u0275fac=function(_){return new(_||I)},I.\u0275cmp=E.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(_,C){1&_&&E._UZ(0,"router-outlet")},dependencies:[Ci],encapsulation:2}),I})();function vi(I,D){var _;return I.providers&&!I._injector&&(I._injector=(0,E.MMx)(I.providers,D,`Route: ${I.path}`)),null!==(_=I._injector)&&void 0!==_?_:D}function ls(I){const D=I.children&&I.children.map(ls),_=D?{...I,children:D}:{...I};return!_.component&&!_.loadComponent&&(D||_.loadChildren)&&_.outlet&&_.outlet!==Mt&&(_.component=Fr),_}function ki(I){return I.outlet||Mt}function rs(I,D){const _=I.filter(C=>ki(C)===D);return _.push(...I.filter(C=>ki(C)!==D)),_}function is(I){var D;if(!I)return null;if(null!==(D=I.routeConfig)&&void 0!==D&&D._injector)return I.routeConfig._injector;for(let _=I.parent;_;_=_.parent){const C=_.routeConfig;if(null!=C&&C._loadedInjector)return C._loadedInjector;if(null!=C&&C._injector)return C._injector}return null}class cn{constructor(D,_,C,N){this.routeReuseStrategy=D,this.futureState=_,this.currState=C,this.forwardEvent=N}activate(D){const _=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,C,D),$i(this.futureState.root),this.activateChildRoutes(_,C,D)}deactivateChildRoutes(D,_,C){const N=En(_);D.children.forEach(q=>{const te=q.value.outlet;this.deactivateRoutes(q,N[te],C),delete N[te]}),_n(N,(q,te)=>{this.deactivateRouteAndItsChildren(q,C)})}deactivateRoutes(D,_,C){const N=D.value,q=_?_.value:null;if(N===q)if(N.component){const te=C.getContext(N.outlet);te&&this.deactivateChildRoutes(D,_,te.children)}else this.deactivateChildRoutes(D,_,C);else q&&this.deactivateRouteAndItsChildren(_,C)}deactivateRouteAndItsChildren(D,_){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,_):this.deactivateRouteAndOutlet(D,_)}detachAndStoreRouteSubtree(D,_){const C=_.getContext(D.value.outlet),N=C&&D.value.component?C.children:_,q=En(D);for(const te of Object.keys(q))this.deactivateRouteAndItsChildren(q[te],N);if(C&&C.outlet){const te=C.outlet.detach(),ue=C.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:te,route:D,contexts:ue})}}deactivateRouteAndOutlet(D,_){const C=_.getContext(D.value.outlet),N=C&&D.value.component?C.children:_,q=En(D);for(const te of Object.keys(q))this.deactivateRouteAndItsChildren(q[te],N);C&&C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated(),C.attachRef=null,C.resolver=null,C.route=null)}activateChildRoutes(D,_,C){const N=En(_);D.children.forEach(q=>{this.activateRoutes(q,N[q.value.outlet],C),this.forwardEvent(new oi(q.value.snapshot))}),D.children.length&&this.forwardEvent(new To(D.value.snapshot))}activateRoutes(D,_,C){const N=D.value,q=_?_.value:null;if($i(N),N===q)if(N.component){const ue=C.getOrCreateContext(N.outlet);this.activateChildRoutes(D,_,ue.children)}else this.activateChildRoutes(D,_,C);else if(N.component){const ue=C.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const Be=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),ue.children.onOutletReAttached(Be.contexts),ue.attachRef=Be.componentRef,ue.route=Be.route.value,ue.outlet&&ue.outlet.attach(Be.componentRef,Be.route.value),$i(Be.route.value),this.activateChildRoutes(D,null,ue.children)}else{var te;const Be=is(N.snapshot),lt=null!==(te=Be?.get(E._Vd))&&void 0!==te?te:null;ue.attachRef=null,ue.route=N,ue.resolver=lt,ue.injector=Be,ue.outlet&&ue.outlet.activateWith(N,ue.injector),this.activateChildRoutes(D,null,ue.children)}}else this.activateChildRoutes(D,null,C)}}class ys{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class Ao{constructor(D,_){this.component=D,this.route=_}}function Ms(I,D,_){const C=I._root;return Li(C,D?D._root:null,_,[C.value])}function Zs(I,D){const _=Symbol(),C=D.get(I,_);return C===_?"function"!=typeof I||(0,E.Z0I)(I)?D.get(I):I:C}function Li(I,D,_,C,N={canDeactivateChecks:[],canActivateChecks:[]}){const q=En(D);return I.children.forEach(te=>{(function po(I,D,_,C,N={canDeactivateChecks:[],canActivateChecks:[]}){const q=I.value,te=D?D.value:null,ue=_?_.getContext(I.value.outlet):null;if(te&&q.routeConfig===te.routeConfig){const Be=function go(I,D,_){if("function"==typeof _)return _(I,D);switch(_){case"pathParamsChange":return!un(I.url,D.url);case"pathParamsOrQueryParamsChange":return!un(I.url,D.url)||!Yn(I.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ji(I,D)||!Yn(I.queryParams,D.queryParams);default:return!Ji(I,D)}}(te,q,q.routeConfig.runGuardsAndResolvers);Be?N.canActivateChecks.push(new ys(C)):(q.data=te.data,q._resolvedData=te._resolvedData),Li(I,D,q.component?ue?ue.children:null:_,C,N),Be&&ue&&ue.outlet&&ue.outlet.isActivated&&N.canDeactivateChecks.push(new Ao(ue.outlet.component,te))}else te&&ht(D,ue,N),N.canActivateChecks.push(new ys(C)),Li(I,null,q.component?ue?ue.children:null:_,C,N)})(te,q[te.value.outlet],_,C.concat([te.value]),N),delete q[te.value.outlet]}),_n(q,(te,ue)=>ht(te,_.getContext(ue),N)),N}function ht(I,D,_){const C=En(I),N=I.value;_n(C,(q,te)=>{ht(q,N.component?D?D.children.getContext(te):null:D,_)}),_.canDeactivateChecks.push(new Ao(N.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,N))}function Hn(I){return"function"==typeof I}function yt(I){return I instanceof _e.K||"EmptyError"===I?.name}const Kt=Symbol("INITIAL_VALUE");function Bt(){return(0,ze.w)(I=>(0,ve.a)(I.map(D=>D.pipe((0,Ke.q)(1),(0,De.O)(Kt)))).pipe((0,ct.U)(D=>{for(const _ of D)if(!0!==_){if(_===Kt)return Kt;if(!1===_||_ instanceof bn)return _}return!0}),(0,Ot.h)(D=>D!==Kt),(0,Ke.q)(1)))}function ji(I){return(0,Te.z)((0,ot.b)(D=>{if(Re(D))throw ho(0,D)}),(0,ct.U)(D=>!0===D))}const Wr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vs(I,D,_,C,N){const q=cs(I,D,_);return q.matched?function ui(I,D,_,C){const N=D.canMatch;if(!N||0===N.length)return(0,G.of)(!0);const q=N.map(te=>{const ue=Zs(te,I);return Wn(function fe(I){return I&&Hn(I.canMatch)}(ue)?ue.canMatch(D,_):I.runInContext(()=>ue(D,_)))});return(0,G.of)(q).pipe(Bt(),ji())}(C=vi(D,C),D,_).pipe((0,ct.U)(te=>!0===te?q:{...Wr})):(0,G.of)(q)}function cs(I,D,_){var C;if(""===D.path)return"full"===D.pathMatch&&(I.hasChildren()||_.length>0)?{...Wr}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const q=(D.matcher||Ai)(_,I,D);if(!q)return{...Wr};const te={};_n(q.posParams,(Be,lt)=>{te[lt]=Be.path});const ue=q.consumed.length>0?{...te,...q.consumed[q.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:q.consumed,remainingSegments:_.slice(q.consumed.length),parameters:ue,positionalParamSegments:null!==(C=q.posParams)&&void 0!==C?C:{}}}function Ei(I,D,_,C,N="corrected"){if(_.length>0&&function Jo(I,D,_){return _.some(C=>_o(I,D,C)&&ki(C)!==Mt)}(I,_,C)){const te=new Wt(D,function ro(I,D,_,C){const N={};N[Mt]=C,C._sourceSegment=I,C._segmentIndexShift=D.length;for(const q of _)if(""===q.path&&ki(q)!==Mt){const te=new Wt([],{});te._sourceSegment=I,te._segmentIndexShift=D.length,N[ki(q)]=te}return N}(I,D,C,new Wt(_,I.children)));return te._sourceSegment=I,te._segmentIndexShift=D.length,{segmentGroup:te,slicedSegments:[]}}if(0===_.length&&function Mo(I,D,_){return _.some(C=>_o(I,D,C))}(I,_,C)){const te=new Wt(I.segments,function Vs(I,D,_,C,N,q){const te={};for(const ue of C)if(_o(I,_,ue)&&!N[ki(ue)]){const Be=new Wt([],{});Be._sourceSegment=I,Be._segmentIndexShift="legacy"===q?I.segments.length:D.length,te[ki(ue)]=Be}return{...N,...te}}(I,D,_,C,I.children,N));return te._sourceSegment=I,te._segmentIndexShift=D.length,{segmentGroup:te,slicedSegments:_}}const q=new Wt(I.segments,I.children);return q._sourceSegment=I,q._segmentIndexShift=D.length,{segmentGroup:q,slicedSegments:_}}function _o(I,D,_){return(!(I.hasChildren()||D.length>0)||"full"!==_.pathMatch)&&""===_.path}function A(I,D,_,C){return!!(ki(I)===C||C!==Mt&&_o(D,_,I))&&("**"===I.path||cs(D,I,_).matched)}function $(I,D,_){return 0===D.length&&!I.children[_]}const x=!1;class W{constructor(D){this.segmentGroup=D||null}}class S{constructor(D){this.urlTree=D}}function p(I){return(0,se._)(new W(I))}function m(I){return(0,se._)(new S(I))}class he{constructor(D,_,C,N,q){this.injector=D,this.configLoader=_,this.urlSerializer=C,this.urlTree=N,this.config=q,this.allowRedirects=!0}apply(){const D=Ei(this.urlTree.root,[],[],this.config).segmentGroup,_=new Wt(D.segments,D.children);return this.expandSegmentGroup(this.injector,this.config,_,Mt).pipe((0,ct.U)(q=>this.createUrlTree(ae(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ce(q=>{if(q instanceof S)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof W?this.noMatchError(q):q}))}match(D){return this.expandSegmentGroup(this.injector,this.config,D.root,Mt).pipe((0,ct.U)(N=>this.createUrlTree(ae(N),D.queryParams,D.fragment))).pipe(ce(N=>{throw N instanceof W?this.noMatchError(N):N}))}noMatchError(D){return new E.vHH(4002,x)}createUrlTree(D,_,C){const N=ie(D);return new bn(N,_,C)}expandSegmentGroup(D,_,C,N){return 0===C.segments.length&&C.hasChildren()?this.expandChildren(D,_,C).pipe((0,ct.U)(q=>new Wt([],q))):this.expandSegment(D,C,_,C.segments,N,!0)}expandChildren(D,_,C){const N=[];for(const q of Object.keys(C.children))"primary"===q?N.unshift(q):N.push(q);return(0,z.D)(N).pipe((0,ke.b)(q=>{const te=C.children[q],ue=rs(_,q);return this.expandSegmentGroup(D,ue,te,q).pipe((0,ct.U)(Be=>({segment:Be,outlet:q})))}),(0,Me.R)((q,te)=>(q[te.outlet]=te.segment,q),{}),Yt())}expandSegment(D,_,C,N,q,te){return(0,z.D)(C).pipe((0,ke.b)(ue=>this.expandSegmentAgainstRoute(D,_,C,ue,N,q,te).pipe(ce(lt=>{if(lt instanceof W)return(0,G.of)(null);throw lt}))),(0,Ie.P)(ue=>!!ue),ce((ue,Be)=>{if(yt(ue))return $(_,N,q)?(0,G.of)(new Wt([],{})):p(_);throw ue}))}expandSegmentAgainstRoute(D,_,C,N,q,te,ue){return A(N,_,q,te)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(D,_,N,q,te):ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,_,C,N,q,te):p(_):p(_)}expandSegmentAgainstRouteUsingRedirect(D,_,C,N,q,te){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,C,N,te):this.expandRegularSegmentAgainstRouteUsingRedirect(D,_,C,N,q,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,_,C,N){const q=this.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?m(q):this.lineralizeSegments(C,q).pipe((0,$e.z)(te=>{const ue=new Wt(te,{});return this.expandSegment(D,ue,_,te,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,_,C,N,q,te){const{matched:ue,consumedSegments:Be,remainingSegments:lt,positionalParamSegments:sn}=cs(_,N,q);if(!ue)return p(_);const Ft=this.applyRedirectCommands(Be,N.redirectTo,sn);return N.redirectTo.startsWith("/")?m(Ft):this.lineralizeSegments(N,Ft).pipe((0,$e.z)(mn=>this.expandSegment(D,_,C,mn.concat(lt),te,!1)))}matchSegmentAgainstRoute(D,_,C,N,q){return"**"===C.path?(D=vi(C,D),C.loadChildren?(C._loadedRoutes?(0,G.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):this.configLoader.loadChildren(D,C)).pipe((0,ct.U)(ue=>(C._loadedRoutes=ue.routes,C._loadedInjector=ue.injector,new Wt(N,{})))):(0,G.of)(new Wt(N,{}))):vs(_,C,N,D).pipe((0,ze.w)(({matched:te,consumedSegments:ue,remainingSegments:Be})=>{var lt;return te?(D=null!==(lt=C._injector)&&void 0!==lt?lt:D,this.getChildConfig(D,C,N).pipe((0,$e.z)(Ft=>{var mn;const xr=null!==(mn=Ft.injector)&&void 0!==mn?mn:D,pr=Ft.routes,{segmentGroup:ko,slicedSegments:os}=Ei(_,ue,Be,pr),qr=new Wt(ko.segments,ko.children);if(0===os.length&&qr.hasChildren())return this.expandChildren(xr,pr,qr).pipe((0,ct.U)(Qs=>new Wt(ue,Qs)));if(0===pr.length&&0===os.length)return(0,G.of)(new Wt(ue,{}));const ws=ki(C)===q;return this.expandSegment(xr,qr,pr,os,ws?Mt:q,!0).pipe((0,ct.U)(xs=>new Wt(ue.concat(xs.segments),xs.children)))}))):p(_)}))}getChildConfig(D,_,C){return _.children?(0,G.of)({routes:_.children,injector:D}):_.loadChildren?void 0!==_._loadedRoutes?(0,G.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function Rs(I,D,_,C){const N=D.canLoad;if(void 0===N||0===N.length)return(0,G.of)(!0);const q=N.map(te=>{const ue=Zs(te,I);return Wn(function yo(I){return I&&Hn(I.canLoad)}(ue)?ue.canLoad(D,_):I.runInContext(()=>ue(D,_)))});return(0,G.of)(q).pipe(Bt(),ji())}(D,_,C).pipe((0,$e.z)(N=>N?this.configLoader.loadChildren(D,_).pipe((0,ot.b)(q=>{_._loadedRoutes=q.routes,_._loadedInjector=q.injector})):function j(I){return(0,se._)(us(x,3))}())):(0,G.of)({routes:[],injector:D})}lineralizeSegments(D,_){let C=[],N=_.root;for(;;){if(C=C.concat(N.segments),0===N.numberOfChildren)return(0,G.of)(C);if(N.numberOfChildren>1||!N.children[Mt])return(0,se._)(new E.vHH(4e3,x));N=N.children[Mt]}}applyRedirectCommands(D,_,C){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),D,C)}applyRedirectCreateUrlTree(D,_,C,N){const q=this.createSegmentGroup(D,_.root,C,N);return new bn(q,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(D,_){const C={};return _n(D,(N,q)=>{if("string"==typeof N&&N.startsWith(":")){const ue=N.substring(1);C[q]=_[ue]}else C[q]=N}),C}createSegmentGroup(D,_,C,N){const q=this.createSegments(D,_.segments,C,N);let te={};return _n(_.children,(ue,Be)=>{te[Be]=this.createSegmentGroup(D,ue,C,N)}),new Wt(q,te)}createSegments(D,_,C,N){return _.map(q=>q.path.startsWith(":")?this.findPosParam(D,q,N):this.findOrReturn(q,C))}findPosParam(D,_,C){const N=C[_.path.substring(1)];if(!N)throw new E.vHH(4001,x);return N}findOrReturn(D,_){let C=0;for(const N of _){if(N.path===D.path)return _.splice(C),N;C++}return D}}class Je{}class Pn{constructor(D,_,C,N,q,te,ue,Be){this.injector=D,this.rootComponentType=_,this.config=C,this.urlTree=N,this.url=q,this.paramsInheritanceStrategy=te,this.relativeLinkResolution=ue,this.urlSerializer=Be}recognize(){const D=Ei(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,Mt).pipe((0,ct.U)(_=>{if(null===_)return null;const C=new Xi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Vt(C,_),q=new Gs(this.url,N);return this.inheritParamsAndData(q._root),q}))}inheritParamsAndData(D){const _=D.value,C=Us(_,this.paramsInheritanceStrategy);_.params=Object.freeze(C.params),_.data=Object.freeze(C.data),D.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(D,_,C,N){return 0===C.segments.length&&C.hasChildren()?this.processChildren(D,_,C):this.processSegment(D,_,C,C.segments,N)}processChildren(D,_,C){return(0,z.D)(Object.keys(C.children)).pipe((0,ke.b)(N=>{const q=C.children[N],te=rs(_,N);return this.processSegmentGroup(D,te,q,N)}),(0,Me.R)((N,q)=>N&&q?(N.push(...q),N):null),(0,On.o)(N=>null!==N),(0,gt.d)(null),Yt(),(0,ct.U)(N=>{if(null===N)return null;const q=Jn(N);return function Nn(I){I.sort((D,_)=>D.value.outlet===Mt?-1:_.value.outlet===Mt?1:D.value.outlet.localeCompare(_.value.outlet))}(q),q}))}processSegment(D,_,C,N,q){return(0,z.D)(_).pipe((0,ke.b)(te=>{var ue;return this.processSegmentAgainstRoute(null!==(ue=te._injector)&&void 0!==ue?ue:D,te,C,N,q)}),(0,Ie.P)(te=>!!te),ce(te=>{if(yt(te))return $(C,N,q)?(0,G.of)([]):(0,G.of)(null);throw te}))}processSegmentAgainstRoute(D,_,C,N,q){if(_.redirectTo||!A(_,C,N,q))return(0,G.of)(null);let te;if("**"===_.path){var ue,Be;const lt=N.length>0?jr(N).parameters:{},sn=hr(C)+N.length,Ft=new Xi(N,lt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Go(_),ki(_),null!==(ue=null!==(Be=_.component)&&void 0!==Be?Be:_._loadedComponent)&&void 0!==ue?ue:null,_,wi(C),sn,Ro(_),sn);te=(0,G.of)({snapshot:Ft,consumedSegments:[],remainingSegments:[]})}else te=vs(C,_,N,D).pipe((0,ct.U)(({matched:lt,consumedSegments:sn,remainingSegments:Ft,parameters:mn})=>{var xr,pr;if(!lt)return null;const ko=hr(C)+sn.length;return{snapshot:new Xi(sn,mn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Go(_),ki(_),null!==(xr=null!==(pr=_.component)&&void 0!==pr?pr:_._loadedComponent)&&void 0!==xr?xr:null,_,wi(C),ko,Ro(_),ko),consumedSegments:sn,remainingSegments:Ft}}));return te.pipe((0,ze.w)(lt=>{var sn,Ft;if(null===lt)return(0,G.of)(null);const{snapshot:mn,consumedSegments:xr,remainingSegments:pr}=lt;D=null!==(sn=_._injector)&&void 0!==sn?sn:D;const ko=null!==(Ft=_._loadedInjector)&&void 0!==Ft?Ft:D,os=function gn(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(_),{segmentGroup:qr,slicedSegments:ws}=Ei(C,xr,pr,os.filter(xs=>void 0===xs.redirectTo),this.relativeLinkResolution);if(0===ws.length&&qr.hasChildren())return this.processChildren(ko,os,qr).pipe((0,ct.U)(xs=>null===xs?null:[new Vt(mn,xs)]));if(0===os.length&&0===ws.length)return(0,G.of)([new Vt(mn,[])]);const oa=ki(_)===q;return this.processSegment(ko,os,qr,ws,oa?Mt:q).pipe((0,ct.U)(xs=>null===xs?null:[new Vt(mn,xs)]))}))}}function fn(I){const D=I.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function Jn(I){const D=[],_=new Set;for(const C of I){if(!fn(C)){D.push(C);continue}const N=D.find(q=>C.value.routeConfig===q.value.routeConfig);void 0!==N?(N.children.push(...C.children),_.add(N)):D.push(C)}for(const C of _){const N=Jn(C.children);D.push(new Vt(C.value,N))}return D.filter(C=>!_.has(C))}function wi(I){let D=I;for(;D._sourceSegment;)D=D._sourceSegment;return D}function hr(I){var D;let _=I,C=null!==(D=_._segmentIndexShift)&&void 0!==D?D:0;for(;_._sourceSegment;){var N;_=_._sourceSegment,C+=null!==(N=_._segmentIndexShift)&&void 0!==N?N:0}return C-1}function Go(I){return I.data||{}}function Ro(I){return I.resolve||{}}function na(I){return"string"==typeof I.title||null===I.title}function vo(I){return(0,ze.w)(D=>{const _=I(D);return _?(0,z.D)(_).pipe((0,ct.U)(()=>D)):(0,G.of)(D)})}let vr=(()=>{class I{buildTitle(_){let C,N=_.root;for(;void 0!==N;){var q;C=null!==(q=this.getResolvedTitleForRoute(N))&&void 0!==q?q:C,N=N.children.find(te=>te.outlet===Mt)}return C}getResolvedTitleForRoute(_){return _.data[Sr]}}return I.\u0275fac=function(_){return new(_||I)},I.\u0275prov=E.Yz7({token:I,factory:function(){return(0,E.f3M)(Zt)},providedIn:"root"}),I})(),Zt=(()=>{class I extends vr{constructor(_){super(),this.title=_}updateTitle(_){const C=this.buildTitle(_);void 0!==C&&this.title.setTitle(C)}}return I.\u0275fac=function(_){return new(_||I)(E.LFG(en.Dx))},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class dn{}class pt extends class er{shouldDetach(D){return!1}store(D,_){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,_){return D.routeConfig===_.routeConfig}}{}const ti=new E.OlP("",{providedIn:"root",factory:()=>({})}),Tt=new E.OlP("ROUTES");let wn=(()=>{class I{constructor(_,C){this.injector=_,this.compiler=C,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,G.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const C=Wn(_.loadComponent()).pipe((0,ot.b)(q=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=q}),Et(()=>{this.componentLoaders.delete(_)})),N=new it.c(C,()=>new Xe.x).pipe((0,Rn.x)());return this.componentLoaders.set(_,N),N}loadChildren(_,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,G.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const q=this.loadModuleFactoryOrRoutes(C.loadChildren).pipe((0,ct.U)(ue=>{this.onLoadEndListener&&this.onLoadEndListener(C);let Be,lt,sn=!1;Array.isArray(ue)?lt=ue:(Be=ue.create(_).injector,lt=mr(Be.get(Tt,[],E.XFs.Self|E.XFs.Optional)));return{routes:lt.map(ls),injector:Be}}),Et(()=>{this.childrenLoaders.delete(C)})),te=new it.c(q,()=>new Xe.x).pipe((0,Rn.x)());return this.childrenLoaders.set(C,te),te}loadModuleFactoryOrRoutes(_){return Wn(_()).pipe((0,$e.z)(C=>C instanceof E.YKP||Array.isArray(C)?(0,G.of)(C):(0,z.D)(this.compiler.compileModuleAsync(C))))}}return I.\u0275fac=function(_){return new(_||I)(E.LFG(E.zs3),E.LFG(E.Sil))},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class ra{}class Ct{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,_){return D}}function dt(I){throw I}function Hr(I,D,_){return D.parse("/")}const ba={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ma={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function ia(){var I,D;const _=(0,E.f3M)(Ln),C=(0,E.f3M)(gs),N=(0,E.f3M)(Ge.Ye),q=(0,E.f3M)(E.zs3),te=(0,E.f3M)(E.Sil),ue=null!==(I=(0,E.f3M)(Tt,{optional:!0}))&&void 0!==I?I:[],Be=null!==(D=(0,E.f3M)(ti,{optional:!0}))&&void 0!==D?D:{},lt=(0,E.f3M)(Zt),sn=(0,E.f3M)(vr,{optional:!0}),Ft=(0,E.f3M)(ra,{optional:!0}),mn=(0,E.f3M)(dn,{optional:!0}),xr=new Ri(null,_,C,N,q,te,mr(ue));return Ft&&(xr.urlHandlingStrategy=Ft),mn&&(xr.routeReuseStrategy=mn),xr.titleStrategy=sn??lt,function bu(I,D){I.errorHandler&&(D.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(D.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(D.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(D.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(D.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(D.canceledNavigationResolution=I.canceledNavigationResolution)}(Be,xr),xr}let Ri=(()=>{class I{constructor(_,C,N,q,te,ue,Be){this.rootComponentType=_,this.urlSerializer=C,this.rootContexts=N,this.location=q,this.config=Be,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Xe.x,this.errorHandler=dt,this.malformedUriErrorHandler=Hr,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,G.of)(void 0),this.urlHandlingStrategy=new Ct,this.routeReuseStrategy=new pt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=te.get(wn),this.configLoader.onLoadEndListener=mn=>this.triggerEvent(new Ss(mn)),this.configLoader.onLoadStartListener=mn=>this.triggerEvent(new Ts(mn)),this.ngModule=te.get(E.h0i),this.console=te.get(E.c2e);const Ft=te.get(E.R0b);this.isNgZoneEnabled=Ft instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(Be),this.currentUrlTree=function Gr(){return new bn(new Wt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=_r(this.currentUrlTree,this.rootComponentType),this.transitions=new me.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null===(_=this.location.getState())||void 0===_?void 0:_.\u0275routerPageId}setupNavigations(_){const C=this.events;return _.pipe((0,Ot.h)(N=>0!==N.id),(0,ct.U)(N=>({...N,extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,ze.w)(N=>{let q=!1,te=!1;return(0,G.of)(N).pipe((0,ot.b)(ue=>{this.currentNavigation={id:ue.id,initialUrl:ue.rawUrl,extractedUrl:ue.extractedUrl,trigger:ue.source,extras:ue.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ze.w)(ue=>{const Be=this.browserUrlTree.toString(),lt=!this.navigated||ue.extractedUrl.toString()!==Be||Be!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||lt)&&this.urlHandlingStrategy.shouldProcessUrl(ue.rawUrl))return fa(ue.source)&&(this.browserUrlTree=ue.extractedUrl),(0,G.of)(ue).pipe((0,ze.w)(Ft=>{const mn=this.transitions.getValue();return C.next(new ii(Ft.id,this.serializeUrl(Ft.extractedUrl),Ft.source,Ft.restoredState)),mn!==this.transitions.getValue()?we.E:Promise.resolve(Ft)}),function ge(I,D,_,C){return(0,ze.w)(N=>function Q(I,D,_,C,N){return new he(I,D,_,C,N).apply()}(I,D,_,N.extractedUrl,C).pipe((0,ct.U)(q=>({...N,urlAfterRedirects:q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ot.b)(Ft=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ft.urlAfterRedirects},N.urlAfterRedirects=Ft.urlAfterRedirects}),function ss(I,D,_,C,N,q){return(0,$e.z)(te=>function jt(I,D,_,C,N,q,te="emptyOnly",ue="legacy"){return new Pn(I,D,_,C,N,te,ue,q).recognize().pipe((0,ze.w)(Be=>null===Be?function St(I){return new le.y(D=>D.error(I))}(new Je):(0,G.of)(Be)))}(I,D,_,te.urlAfterRedirects,C.serialize(te.urlAfterRedirects),C,N,q).pipe((0,ct.U)(ue=>({...te,targetSnapshot:ue}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ot.b)(Ft=>{if(N.targetSnapshot=Ft.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Ft.extras.skipLocationChange){const xr=this.urlHandlingStrategy.merge(Ft.urlAfterRedirects,Ft.rawUrl);this.setBrowserUrl(xr,Ft)}this.browserUrlTree=Ft.urlAfterRedirects}const mn=new Ir(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot);C.next(mn)}));if(lt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:mn,extractedUrl:xr,source:pr,restoredState:ko,extras:os}=ue,qr=new ii(mn,this.serializeUrl(xr),pr,ko);C.next(qr);const ws=_r(xr,this.rootComponentType).snapshot;return N={...ue,targetSnapshot:ws,urlAfterRedirects:xr,extras:{...os,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(N)}return this.rawUrlTree=ue.rawUrl,ue.resolve(null),we.E}),(0,ot.b)(ue=>{const Be=new no(ue.id,this.serializeUrl(ue.extractedUrl),this.serializeUrl(ue.urlAfterRedirects),ue.targetSnapshot);this.triggerEvent(Be)}),(0,ct.U)(ue=>N={...ue,guards:Ms(ue.targetSnapshot,ue.currentSnapshot,this.rootContexts)}),function Bn(I,D){return(0,$e.z)(_=>{const{targetSnapshot:C,currentSnapshot:N,guards:{canActivateChecks:q,canDeactivateChecks:te}}=_;return 0===te.length&&0===q.length?(0,G.of)({..._,guardsResult:!0}):function hn(I,D,_,C){return(0,z.D)(I).pipe((0,$e.z)(N=>function Br(I,D,_,C,N){const q=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,G.of)(!0);const te=q.map(ue=>{var Be;const lt=null!==(Be=is(D))&&void 0!==Be?Be:N,sn=Zs(ue,lt);return Wn(function X(I){return I&&Hn(I.canDeactivate)}(sn)?sn.canDeactivate(I,D,_,C):lt.runInContext(()=>sn(I,D,_,C))).pipe((0,Ie.P)())});return(0,G.of)(te).pipe(Bt())}(N.component,N.route,_,D,C)),(0,Ie.P)(N=>!0!==N,!0))}(te,C,N,I).pipe((0,$e.z)(ue=>ue&&function mo(I){return"boolean"==typeof I}(ue)?function ar(I,D,_,C){return(0,z.D)(D).pipe((0,ke.b)(N=>(0,be.z)(function Vn(I,D){return null!==I&&D&&D(new co(I)),(0,G.of)(!0)}(N.route.parent,C),function Ur(I,D){return null!==I&&D&&D(new gi(I)),(0,G.of)(!0)}(N.route,C),function _s(I,D,_){const C=D[D.length-1],q=D.slice(0,D.length-1).reverse().map(te=>function qs(I){const D=I.routeConfig?I.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:I,guards:D}:null}(te)).filter(te=>null!==te).map(te=>(0,pe.P)(()=>{const ue=te.guards.map(Be=>{var lt;const sn=null!==(lt=is(te.node))&&void 0!==lt?lt:_,Ft=Zs(Be,sn);return Wn(function k(I){return I&&Hn(I.canActivateChild)}(Ft)?Ft.canActivateChild(C,I):sn.runInContext(()=>Ft(C,I))).pipe((0,Ie.P)())});return(0,G.of)(ue).pipe(Bt())}));return(0,G.of)(q).pipe(Bt())}(I,N.path,_),function Ar(I,D,_){const C=D.routeConfig?D.routeConfig.canActivate:null;if(!C||0===C.length)return(0,G.of)(!0);const N=C.map(q=>(0,pe.P)(()=>{var te;const ue=null!==(te=is(D))&&void 0!==te?te:_,Be=Zs(q,ue);return Wn(function B(I){return I&&Hn(I.canActivate)}(Be)?Be.canActivate(D,I):ue.runInContext(()=>Be(D,I))).pipe((0,Ie.P)())}));return(0,G.of)(N).pipe(Bt())}(I,N.route,_))),(0,Ie.P)(N=>!0!==N,!0))}(C,q,I,D):(0,G.of)(ue)),(0,ct.U)(ue=>({..._,guardsResult:ue})))})}(this.ngModule.injector,ue=>this.triggerEvent(ue)),(0,ot.b)(ue=>{if(N.guardsResult=ue.guardsResult,Re(ue.guardsResult))throw ho(0,ue.guardsResult);const Be=new Ui(ue.id,this.serializeUrl(ue.extractedUrl),this.serializeUrl(ue.urlAfterRedirects),ue.targetSnapshot,!!ue.guardsResult);this.triggerEvent(Be)}),(0,Ot.h)(ue=>!!ue.guardsResult||(this.restoreHistory(ue),this.cancelNavigationTransition(ue,"",3),!1)),vo(ue=>{if(ue.guards.canActivateChecks.length)return(0,G.of)(ue).pipe((0,ot.b)(Be=>{const lt=new Yi(Be.id,this.serializeUrl(Be.extractedUrl),this.serializeUrl(Be.urlAfterRedirects),Be.targetSnapshot);this.triggerEvent(lt)}),(0,ze.w)(Be=>{let lt=!1;return(0,G.of)(Be).pipe(function Es(I,D){return(0,$e.z)(_=>{const{targetSnapshot:C,guards:{canActivateChecks:N}}=_;if(!N.length)return(0,G.of)(_);let q=0;return(0,z.D)(N).pipe((0,ke.b)(te=>function ea(I,D,_,C){const N=I.routeConfig,q=I._resolve;return void 0!==N?.title&&!na(N)&&(q[Sr]=N.title),function Hi(I,D,_,C){const N=function ta(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===N.length)return(0,G.of)({});const q={};return(0,z.D)(N).pipe((0,$e.z)(te=>function io(I,D,_,C){var N;const q=null!==(N=is(D))&&void 0!==N?N:C,te=Zs(I,q);return Wn(te.resolve?te.resolve(D,_):q.runInContext(()=>te(D,_)))}(I[te],D,_,C).pipe((0,Ie.P)(),(0,ot.b)(ue=>{q[te]=ue}))),Ve(1),function pn(I){return(0,ct.U)(()=>I)}(q),ce(te=>yt(te)?we.E:(0,se._)(te)))}(q,I,D,C).pipe((0,ct.U)(te=>(I._resolvedData=te,I.data=Us(I,_).resolve,N&&na(N)&&(I.data[Sr]=N.title),null)))}(te.route,C,I,D)),(0,ot.b)(()=>q++),Ve(1),(0,$e.z)(te=>q===N.length?(0,G.of)(_):we.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ot.b)({next:()=>lt=!0,complete:()=>{lt||(this.restoreHistory(Be),this.cancelNavigationTransition(Be,"",2))}}))}),(0,ot.b)(Be=>{const lt=new pi(Be.id,this.serializeUrl(Be.extractedUrl),this.serializeUrl(Be.urlAfterRedirects),Be.targetSnapshot);this.triggerEvent(lt)}))}),vo(ue=>{const Be=lt=>{var sn;const Ft=[];null!==(sn=lt.routeConfig)&&void 0!==sn&&sn.loadComponent&&!lt.routeConfig._loadedComponent&&Ft.push(this.configLoader.loadComponent(lt.routeConfig).pipe((0,ot.b)(mn=>{lt.component=mn}),(0,ct.U)(()=>{})));for(const mn of lt.children)Ft.push(...Be(mn));return Ft};return(0,ve.a)(Be(ue.targetSnapshot.root)).pipe((0,gt.d)(),(0,Ke.q)(1))}),vo(()=>this.afterPreactivation()),(0,ct.U)(ue=>{const Be=function ps(I,D,_){const C=As(I,D._root,_?_._root:void 0);return new ai(C,D)}(this.routeReuseStrategy,ue.targetSnapshot,ue.currentRouterState);return N={...ue,targetRouterState:Be}}),(0,ot.b)(ue=>{this.currentUrlTree=ue.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ue.urlAfterRedirects,ue.rawUrl),this.routerState=ue.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ue.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ue),this.browserUrlTree=ue.urlAfterRedirects)}),((I,D,_)=>(0,ct.U)(C=>(new cn(D,C.targetRouterState,C.currentRouterState,_).activate(I),C)))(this.rootContexts,this.routeReuseStrategy,ue=>this.triggerEvent(ue)),(0,ot.b)({next(){q=!0},complete(){q=!0}}),Et(()=>{var ue;q||te||this.cancelNavigationTransition(N,"",1),(null===(ue=this.currentNavigation)||void 0===ue?void 0:ue.id)===N.id&&(this.currentNavigation=null)}),ce(ue=>{if(te=!0,ts(ue)){es(ue)||(this.navigated=!0,this.restoreHistory(N,!0));const lt=new to(N.id,this.serializeUrl(N.extractedUrl),ue.message,ue.cancellationCode);if(C.next(lt),es(ue)){const sn=this.urlHandlingStrategy.merge(ue.url,this.rawUrlTree),Ft={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fa(N.source)};this.scheduleNavigation(sn,"imperative",null,Ft,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{var Be;this.restoreHistory(N,!0);const lt=new si(N.id,this.serializeUrl(N.extractedUrl),ue,null!==(Be=N.targetSnapshot)&&void 0!==Be?Be:void 0);C.next(lt);try{N.resolve(this.errorHandler(ue))}catch(sn){N.reject(sn)}}return we.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const C="popstate"===_.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{var N;const q={replaceUrl:!0},te=null!==(N=_.state)&&void 0!==N&&N.navigationId?_.state:null;if(te){const Be={...te};delete Be.navigationId,delete Be.\u0275routerPageId,0!==Object.keys(Be).length&&(q.state=Be)}const ue=this.parseUrl(_.url);this.scheduleNavigation(ue,C,te,q)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(ls),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,C={}){const{relativeTo:N,queryParams:q,fragment:te,queryParamsHandling:ue,preserveFragment:Be}=C,lt=N||this.routerState.root,sn=Be?this.currentUrlTree.fragment:te;let Ft=null;switch(ue){case"merge":Ft={...this.currentUrlTree.queryParams,...q};break;case"preserve":Ft=this.currentUrlTree.queryParams;break;default:Ft=q||null}return null!==Ft&&(Ft=this.removeEmptyProps(Ft)),Kn(lt,this.currentUrlTree,_,Ft,sn??null)}navigateByUrl(_,C={skipLocationChange:!1}){const N=Re(_)?_:this.parseUrl(_),q=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(q,"imperative",null,C)}navigate(_,C={skipLocationChange:!1}){return function Tu(I){for(let D=0;D<I.length;D++){if(null==I[D])throw new E.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,C),C)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let C;try{C=this.urlSerializer.parse(_)}catch(N){C=this.malformedUriErrorHandler(N,this.urlSerializer,_)}return C}isActive(_,C){let N;if(N=!0===C?{...ba}:!1===C?{...ma}:C,Re(_))return ri(this.currentUrlTree,_,N);const q=this.parseUrl(_);return ri(this.currentUrlTree,q,N)}removeEmptyProps(_){return Object.keys(_).reduce((C,N)=>{const q=_[N];return null!=q&&(C[N]=q),C},{})}processNavigations(){this.navigations.subscribe(_=>{var C;this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new yr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(C=this.titleStrategy)||void 0===C||C.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,C,N,q,te){if(this.disposed)return Promise.resolve(!1);let ue,Be,lt;te?(ue=te.resolve,Be=te.reject,lt=te.promise):lt=new Promise((pr,ko)=>{ue=pr,Be=ko});const sn=++this.navigationId;let Ft;if("computed"===this.canceledNavigationResolution)if(0===this.currentPageId&&(N=this.location.getState()),N&&N.\u0275routerPageId)Ft=N.\u0275routerPageId;else if(q.replaceUrl||q.skipLocationChange){var mn;Ft=null!==(mn=this.browserPageId)&&void 0!==mn?mn:0}else{var xr;Ft=(null!==(xr=this.browserPageId)&&void 0!==xr?xr:0)+1}else Ft=0;return this.setTransition({id:sn,targetPageId:Ft,source:C,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:q,resolve:ue,reject:Be,promise:lt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),lt.catch(pr=>Promise.reject(pr))}setBrowserUrl(_,C){const N=this.urlSerializer.serialize(_),q={...C.extras.state,...this.generateNgRouterState(C.id,C.targetPageId)};this.location.isCurrentPathEqualTo(N)||C.extras.replaceUrl?this.location.replaceState(N,"",q):this.location.go(N,"",q)}restoreHistory(_,C=!1){if("computed"===this.canceledNavigationResolution){var N,q;const te=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(N=this.currentNavigation)||void 0===N?void 0:N.finalUrl)||0===te?this.currentUrlTree===(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)&&0===te&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(te)}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,C,N){const q=new to(_.id,this.serializeUrl(_.extractedUrl),C,N);this.triggerEvent(q),_.resolve(!1)}generateNgRouterState(_,C){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:C}:{navigationId:_}}}return I.\u0275fac=function(_){E.$Z()},I.\u0275prov=E.Yz7({token:I,factory:function(){return ia()},providedIn:"root"}),I})();function fa(I){return"imperative"!==I}let xo=(()=>{class I{constructor(_,C,N,q,te){this.router=_,this.route=C,this.tabIndexAttribute=N,this.renderer=q,this.el=te,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Xe.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(_){this._preserveFragment=(0,E.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,E.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,E.D6c)(_)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(_){if(null!=this.tabIndexAttribute)return;const C=this.renderer,N=this.el.nativeElement;null!==_?C.setAttribute(N,"tabindex",_):C.removeAttribute(N,"tabindex")}ngOnChanges(_){this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(_){return new(_||I)(E.Y36(Ri),E.Y36(Vi),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq))},I.\u0275dir=E.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(_,C){1&_&&E.NdJ("click",function(){return C.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[E.TTD]}),I})(),$a=(()=>{class I{constructor(_,C,N){this.router=_,this.route=C,this.locationStrategy=N,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Xe.x,this.subscription=_.events.subscribe(q=>{q instanceof yr&&this.updateTargetUrlAndHref()})}set preserveFragment(_){this._preserveFragment=(0,E.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,E.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,E.D6c)(_)}get replaceUrl(){return this._replaceUrl}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,C,N,q,te){return!!(0!==_||C||N||q||te||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(_){return new(_||I)(E.Y36(Ri),E.Y36(Vi),E.Y36(Ge.S$))},I.\u0275dir=E.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,C){1&_&&E.NdJ("click",function(q){return C.onClick(q.button,q.ctrlKey,q.shiftKey,q.altKey,q.metaKey)}),2&_&&E.uIk("target",C.target)("href",C.href,E.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[E.TTD]}),I})();class kn{}let ni=(()=>{class I{constructor(_,C,N,q,te){this.router=_,this.injector=N,this.preloadingStrategy=q,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ot.h)(_=>_ instanceof yr),(0,ke.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,C){const N=[];for(const Be of C){var q,te;Be.providers&&!Be._injector&&(Be._injector=(0,E.MMx)(Be.providers,_,`Route: ${Be.path}`));const lt=null!==(q=Be._injector)&&void 0!==q?q:_,sn=null!==(te=Be._loadedInjector)&&void 0!==te?te:lt;if(Be.loadChildren&&!Be._loadedRoutes&&void 0===Be.canLoad||Be.loadComponent&&!Be._loadedComponent)N.push(this.preloadConfig(lt,Be));else if(Be.children||Be._loadedRoutes){var ue;N.push(this.processRoutes(sn,null!==(ue=Be.children)&&void 0!==ue?ue:Be._loadedRoutes))}}return(0,z.D)(N).pipe((0,rn.J)())}preloadConfig(_,C){return this.preloadingStrategy.preload(C,()=>{let N;N=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(_,C):(0,G.of)(null);const q=N.pipe((0,$e.z)(te=>{var ue;return null===te?(0,G.of)(void 0):(C._loadedRoutes=te.routes,C._loadedInjector=te.injector,this.processRoutes(null!==(ue=te.injector)&&void 0!==ue?ue:_,te.routes))}));if(C.loadComponent&&!C._loadedComponent){const te=this.loader.loadComponent(C);return(0,z.D)([q,te]).pipe((0,rn.J)())}return q})}}return I.\u0275fac=function(_){return new(_||I)(E.LFG(Ri),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(kn),E.LFG(wn))},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Sn=new E.OlP("");let sa=(()=>{class I{constructor(_,C,N={}){this.router=_,this.viewportScroller=C,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof ii?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof yr&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Pe&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,C){this.router.triggerEvent(new Pe(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(_){E.$Z()},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac}),I})();function Pt(I,D){return{\u0275kind:I,\u0275providers:D}}function Po(I){return[{provide:Tt,multi:!0,useValue:I}]}function Ys(){const I=(0,E.f3M)(E.zs3);return D=>{var _,C;const N=I.get(E.z2F);if(D!==N.components[0])return;const q=I.get(Ri),te=I.get(Eo);1===I.get(No)&&q.initialNavigation(),null===(_=I.get(tu,null,E.XFs.Optional))||void 0===_||_.setUpPreloading(),null===(C=I.get(Sn,null,E.XFs.Optional))||void 0===C||C.init(),q.resetRootComponentType(N.componentTypes[0]),te.next(),te.complete()}}const Eo=new E.OlP("",{factory:()=>new Xe.x}),No=new E.OlP("",{providedIn:"root",factory:()=>1});const tu=new E.OlP("");function oo(I){return Pt(0,[{provide:tu,useExisting:ni},{provide:kn,useExisting:I}])}const wo=new E.OlP("ROUTER_FORROOT_GUARD"),Zu=[Ge.Ye,{provide:Ln,useClass:fi},{provide:Ri,useFactory:ia},gs,{provide:Vi,useFactory:function $r(I){return I.routerState.root},deps:[Ri]},wn];function et(){return new E.PXZ("Router",Ri)}let Fi=(()=>{class I{constructor(_){}static forRoot(_,C){return{ngModule:I,providers:[Zu,[],Po(_),{provide:wo,useFactory:Oo,deps:[[Ri,new E.FiY,new E.tp0]]},{provide:ti,useValue:C||{}},null!=C&&C.useHash?{provide:Ge.S$,useClass:Ge.Do}:{provide:Ge.S$,useClass:Ge.b0},{provide:Sn,useFactory:()=>{const I=(0,E.f3M)(Ri),D=(0,E.f3M)(Ge.EM),_=(0,E.f3M)(ti);return _.scrollOffset&&D.setOffset(_.scrollOffset),new sa(I,D,_)}},null!=C&&C.preloadingStrategy?oo(C.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:et},null!=C&&C.initialNavigation?uo(C):[],[{provide:ds,useFactory:Ys},{provide:E.tb,multi:!0,useExisting:ds}]]}}static forChild(_){return{ngModule:I,providers:[Po(_)]}}}return I.\u0275fac=function(_){return new(_||I)(E.LFG(wo,8))},I.\u0275mod=E.oAB({type:I}),I.\u0275inj=E.cJS({imports:[Fr]}),I})();function Oo(I){return"guarded"}function uo(I){return["disabled"===I.initialNavigation?Pt(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const D=(0,E.f3M)(Ri);return()=>{D.setUpLocationChangeListener()}}},{provide:No,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?Pt(2,[{provide:No,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:D=>{const _=D.get(Ge.V_,Promise.resolve());let C=!1;return()=>_.then(()=>new Promise(q=>{const te=D.get(Ri),ue=D.get(Eo);(function N(q){D.get(Ri).events.pipe((0,Ot.h)(ue=>ue instanceof yr||ue instanceof to||ue instanceof si),(0,ct.U)(ue=>ue instanceof yr||ue instanceof to&&(0===ue.code||1===ue.code)&&null),(0,Ot.h)(ue=>null!==ue),(0,Ke.q)(1)).subscribe(()=>{q()})})(()=>{q(!0),C=!0}),te.afterPreactivation=()=>(q(!0),C||ue.closed?(0,G.of)(void 0):ue),te.initialNavigation()}))}}]).\u0275providers:[]]}const ds=new E.OlP("")},3942:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Z:()=>Ge});var E=F(2090),z=F(4859),G=F(9681),me=F(1877);class _e{constructor(ze,Ke){this._delegate=ze,this.firebase=Ke,(0,G._addComponent)(ze,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(ze,Ke=G._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Ot=this._delegate.container.getProvider(ze);return!Ot.isInitialized()&&"EXPLICIT"===(null===(De=Ot.getComponent())||void 0===De?void 0:De.instantiationMode)&&Ot.initialize(),Ot.getImmediate({identifier:Ke})}_removeServiceInstance(ze,Ke=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Ke)}_addComponent(ze){(0,G._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,G._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),se=function Te(){const ct=function pe(ct){const ze={},Ke={__esModule:!0,initializeApp:function $e(It,ne={}){const Qe=G.initializeApp(It,ne);if((0,E.r3)(ze,Qe.name))return ze[Qe.name];const ce=new ct(Qe,Ke);return ze[Qe.name]=ce,ce},app:Ot,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function ke(It){const ne=It.name,Qe=ne.replace("-compat","");if(G._registerComponent(It)&&"PUBLIC"===It.type){const ce=(Me=Ot())=>{if("function"!=typeof Me[Qe])throw be.create("invalid-app-argument",{appName:ne});return Me[Qe]()};void 0!==It.serviceProps&&(0,E.ZB)(ce,It.serviceProps),Ke[Qe]=ce,ct.prototype[Qe]=function(...Me){return this._getService.bind(this,ne).apply(this,It.multipleInstances?Me:[])}}return"PUBLIC"===It.type?Ke[Qe]:null},removeApp:function De(It){delete ze[It]},useAsService:function ot(It,ne){return"serverAuth"===ne?null:ne},modularAPIs:G}};function Ot(It){if(!(0,E.r3)(ze,It=It||G._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:It});return ze[It]}return Ke.default=Ke,Object.defineProperty(Ke,"apps",{get:function Ie(){return Object.keys(ze).map(It=>ze[It])}}),Ot.App=ct,Ke}(_e);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function ze(Ke){(0,E.ZB)(ct,Ke)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),ct}(),le=new me.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){le.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&le.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ge=se;!function Xe(ct){(0,G.registerVersion)("@firebase/app-compat","0.1.35",ct)}()},9681:(Rt,Ue,F)=>{"use strict";F.r(Ue),F.d(Ue,{FirebaseError:()=>me.ZR,SDK_VERSION:()=>mr,_DEFAULT_ENTRY_NAME:()=>pn,_addComponent:()=>en,_addOrOverwriteComponent:()=>Mt,_apps:()=>Rn,_clearComponents:()=>Ai,_components:()=>rn,_getProvider:()=>In,_registerComponent:()=>Sr,_removeServiceInstance:()=>Dn,deleteApp:()=>Wn,getApp:()=>xn,getApps:()=>_n,initializeApp:()=>jr,onLog:()=>hi,registerVersion:()=>Gr,setLogLevel:()=>Tr});var E=F(5861),z=F(4859),G=F(1877),me=F(2090),_e=F(8766);class ve{constructor(ut){this.container=ut}getPlatformInfoString(){return this.container.getProviders().map($t=>{if(function be(kt){return"VERSION"===kt.getComponent()?.type}($t)){const ln=$t.getImmediate();return`${ln.library}/${ln.version}`}return null}).filter($t=>$t).join(" ")}}const pe="@firebase/app",se=new G.Yd("@firebase/app"),pn="[DEFAULT]",Et={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Rn=new Map,rn=new Map;function en(kt,ut){try{kt.container.addComponent(ut)}catch($t){se.debug(`Component ${ut.name} failed to register with FirebaseApp ${kt.name}`,$t)}}function Mt(kt,ut){kt.container.addOrOverwriteComponent(ut)}function Sr(kt){const ut=kt.name;if(rn.has(ut))return se.debug(`There were multiple attempts to register component ${ut}.`),!1;rn.set(ut,kt);for(const $t of Rn.values())en($t,kt);return!0}function In(kt,ut){const $t=kt.container.getProvider("heartbeat").getImmediate({optional:!0});return $t&&$t.triggerHeartbeat(),kt.container.getProvider(ut)}function Dn(kt,ut,$t=pn){In(kt,ut).clearInstance($t)}function Ai(){rn.clear()}const Yn=new me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class br{constructor(ut,$t,ln){this._isDeleted=!1,this._options=Object.assign({},ut),this._config=Object.assign({},$t),this._name=$t.name,this._automaticDataCollectionEnabled=$t.automaticDataCollectionEnabled,this._container=ln,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ut){this.checkDestroyed(),this._automaticDataCollectionEnabled=ut}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ut){this._isDeleted=ut}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}}const mr="9.11.0";function jr(kt,ut={}){let $t=kt;"object"!=typeof ut&&(ut={name:ut});const ln=Object.assign({name:pn,automaticDataCollectionEnabled:!1},ut),Jt=ln.name;if("string"!=typeof Jt||!Jt)throw Yn.create("bad-app-name",{appName:String(Jt)});if($t||($t=(0,me.aH)()),!$t)throw Yn.create("no-options");const oe=Rn.get(Jt);if(oe){if((0,me.vZ)($t,oe.options)&&(0,me.vZ)(ln,oe.config))return oe;throw Yn.create("duplicate-app",{appName:Jt})}const ye=new z.H0(Jt);for(const nt of rn.values())ye.addComponent(nt);const Ce=new br($t,ln,ye);return Rn.set(Jt,Ce),Ce}function xn(kt=pn){const ut=Rn.get(kt);if(!ut&&kt===pn)return jr();if(!ut)throw Yn.create("no-app",{appName:kt});return ut}function _n(){return Array.from(Rn.values())}function Wn(kt){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,E.Z)(function*(kt){const ut=kt.name;Rn.has(ut)&&(Rn.delete(ut),yield Promise.all(kt.container.getProviders().map($t=>$t.delete())),kt.isDeleted=!0)})).apply(this,arguments)}function Gr(kt,ut,$t){var ln;let Jt=null!==(ln=Et[kt])&&void 0!==ln?ln:kt;$t&&(Jt+=`-${$t}`);const oe=Jt.match(/\s|\//),ye=ut.match(/\s|\//);if(oe||ye){const Ce=[`Unable to register library "${Jt}" with version "${ut}":`];return oe&&Ce.push(`library name "${Jt}" contains illegal characters (whitespace or "/")`),oe&&ye&&Ce.push("and"),ye&&Ce.push(`version name "${ut}" contains illegal characters (whitespace or "/")`),void se.warn(Ce.join(" "))}Sr(new z.wA(`${Jt}-version`,()=>({library:Jt,version:ut}),"VERSION"))}function hi(kt,ut){if(null!==kt&&"function"!=typeof kt)throw Yn.create("invalid-log-argument");(0,G.Am)(kt,ut)}function Tr(kt){(0,G.Ub)(kt)}const Lr="firebase-heartbeat-store";let Nr=null;function ir(){return Nr||(Nr=(0,_e.X3)("firebase-heartbeat-database",1,{upgrade:(kt,ut)=>{0===ut&&kt.createObjectStore(Lr)}}).catch(kt=>{throw Yn.create("idb-open",{originalErrorMessage:kt.message})})),Nr}function zt(){return(zt=(0,E.Z)(function*(kt){var ut;try{return(yield ir()).transaction(Lr).objectStore(Lr).get(lr(kt))}catch($t){if($t instanceof me.ZR)se.warn($t.message);else{const ln=Yn.create("idb-get",{originalErrorMessage:null===(ut=$t)||void 0===ut?void 0:ut.message});se.warn(ln.message)}}})).apply(this,arguments)}function bn(kt,ut){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,E.Z)(function*(kt,ut){var $t;try{const Jt=(yield ir()).transaction(Lr,"readwrite");return yield Jt.objectStore(Lr).put(ut,lr(kt)),Jt.done}catch(ln){if(ln instanceof me.ZR)se.warn(ln.message);else{const Jt=Yn.create("idb-set",{originalErrorMessage:null===($t=ln)||void 0===$t?void 0:$t.message});se.warn(Jt.message)}}})).apply(this,arguments)}function lr(kt){return`${kt.name}!${kt.options.appId}`}class bi{constructor(ut){this.container=ut,this._heartbeatsCache=null;const $t=this.container.getProvider("app").getImmediate();this._storage=new Gn($t),this._heartbeatsCachePromise=this._storage.read().then(ln=>(this._heartbeatsCache=ln,ln))}triggerHeartbeat(){var ut=this;return(0,E.Z)(function*(){const ln=ut.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Jt=Ln();if(null===ut._heartbeatsCache&&(ut._heartbeatsCache=yield ut._heartbeatsCachePromise),ut._heartbeatsCache.lastSentHeartbeatDate!==Jt&&!ut._heartbeatsCache.heartbeats.some(oe=>oe.date===Jt))return ut._heartbeatsCache.heartbeats.push({date:Jt,agent:ln}),ut._heartbeatsCache.heartbeats=ut._heartbeatsCache.heartbeats.filter(oe=>{const ye=new Date(oe.date).valueOf();return Date.now()-ye<=2592e6}),ut._storage.overwrite(ut._heartbeatsCache)})()}getHeartbeatsHeader(){var ut=this;return(0,E.Z)(function*(){if(null===ut._heartbeatsCache&&(yield ut._heartbeatsCachePromise),null===ut._heartbeatsCache||0===ut._heartbeatsCache.heartbeats.length)return"";const $t=Ln(),{heartbeatsToSend:ln,unsentEntries:Jt}=function fi(kt,ut=1024){const $t=[];let ln=kt.slice();for(const Jt of kt){const oe=$t.find(ye=>ye.agent===Jt.agent);if(oe){if(oe.dates.push(Jt.date),Mr($t)>ut){oe.dates.pop();break}}else if($t.push({agent:Jt.agent,dates:[Jt.date]}),Mr($t)>ut){$t.pop();break}ln=ln.slice(1)}return{heartbeatsToSend:$t,unsentEntries:ln}}(ut._heartbeatsCache.heartbeats),oe=(0,me.L)(JSON.stringify({version:2,heartbeats:ln}));return ut._heartbeatsCache.lastSentHeartbeatDate=$t,Jt.length>0?(ut._heartbeatsCache.heartbeats=Jt,yield ut._storage.overwrite(ut._heartbeatsCache)):(ut._heartbeatsCache.heartbeats=[],ut._storage.overwrite(ut._heartbeatsCache)),oe})()}}function Ln(){return(new Date).toISOString().substring(0,10)}class Gn{constructor(ut){this.app=ut,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,me.hl)()&&(0,me.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ut=this;return(0,E.Z)(function*(){return(yield ut._canUseIndexedDBPromise)&&(yield function Xt(kt){return zt.apply(this,arguments)}(ut.app))||{heartbeats:[]}})()}overwrite(ut){var $t=this;return(0,E.Z)(function*(){var ln;if(yield $t._canUseIndexedDBPromise){const oe=yield $t.read();return bn($t.app,{lastSentHeartbeatDate:null!==(ln=ut.lastSentHeartbeatDate)&&void 0!==ln?ln:oe.lastSentHeartbeatDate,heartbeats:ut.heartbeats})}})()}add(ut){var $t=this;return(0,E.Z)(function*(){var ln;if(yield $t._canUseIndexedDBPromise){const oe=yield $t.read();return bn($t.app,{lastSentHeartbeatDate:null!==(ln=ut.lastSentHeartbeatDate)&&void 0!==ln?ln:oe.lastSentHeartbeatDate,heartbeats:[...oe.heartbeats,...ut.heartbeats]})}})()}}function Mr(kt){return(0,me.L)(JSON.stringify({version:2,heartbeats:kt})).length}!function cr(kt){Sr(new z.wA("platform-logger",ut=>new ve(ut),"PRIVATE")),Sr(new z.wA("heartbeat",ut=>new bi(ut),"PRIVATE")),Gr(pe,"0.8.0",kt),Gr(pe,"0.8.0","esm2017"),Gr("fire-js","")}("")},4859:(Rt,Ue,F)=>{"use strict";F.d(Ue,{H0:()=>pe,wA:()=>G});var E=F(5861),z=F(2090);class G{constructor(se,le,we){this.name=se,this.instanceFactory=le,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(se){return this.instantiationMode=se,this}setMultipleInstances(se){return this.multipleInstances=se,this}setServiceProps(se){return this.serviceProps=se,this}setInstanceCreatedCallback(se){return this.onInstanceCreated=se,this}}const me="[DEFAULT]";class _e{constructor(se,le){this.name=se,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(se){const le=this.normalizeInstanceIdentifier(se);if(!this.instancesDeferred.has(le)){const we=new z.BH;if(this.instancesDeferred.set(le,we),this.isInitialized(le)||this.shouldAutoInitialize())try{const it=this.getOrInitializeService({instanceIdentifier:le});it&&we.resolve(it)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(se){var le;const we=this.normalizeInstanceIdentifier(se?.identifier),it=null!==(le=se?.optional)&&void 0!==le&&le;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(it)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(Xe){if(it)return null;throw Xe}}getComponent(){return this.component}setComponent(se){if(se.name!==this.name)throw Error(`Mismatching Component ${se.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=se,this.shouldAutoInitialize()){if(function be(Te){return"EAGER"===Te.instantiationMode}(se))try{this.getOrInitializeService({instanceIdentifier:me})}catch{}for(const[le,we]of this.instancesDeferred.entries()){const it=this.normalizeInstanceIdentifier(le);try{const Xe=this.getOrInitializeService({instanceIdentifier:it});we.resolve(Xe)}catch{}}}}clearInstance(se=me){this.instancesDeferred.delete(se),this.instancesOptions.delete(se),this.instances.delete(se)}delete(){var se=this;return(0,E.Z)(function*(){const le=Array.from(se.instances.values());yield Promise.all([...le.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...le.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(se=me){return this.instances.has(se)}getOptions(se=me){return this.instancesOptions.get(se)||{}}initialize(se={}){const{options:le={}}=se,we=this.normalizeInstanceIdentifier(se.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const it=this.getOrInitializeService({instanceIdentifier:we,options:le});for(const[Xe,Ge]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(Xe)&&Ge.resolve(it);return it}onInit(se,le){var we;const it=this.normalizeInstanceIdentifier(le),Xe=null!==(we=this.onInitCallbacks.get(it))&&void 0!==we?we:new Set;Xe.add(se),this.onInitCallbacks.set(it,Xe);const Ge=this.instances.get(it);return Ge&&se(Ge,it),()=>{Xe.delete(se)}}invokeOnInitCallbacks(se,le){const we=this.onInitCallbacks.get(le);if(we)for(const it of we)try{it(se,le)}catch{}}getOrInitializeService({instanceIdentifier:se,options:le={}}){let we=this.instances.get(se);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=se,Te===me?void 0:Te),options:le}),this.instances.set(se,we),this.instancesOptions.set(se,le),this.invokeOnInitCallbacks(we,se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,se,we)}catch{}var Te;return we||null}normalizeInstanceIdentifier(se=me){return this.component?this.component.multipleInstances?se:me:se}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(se){this.name=se,this.providers=new Map}addComponent(se){const le=this.getProvider(se.name);if(le.isComponentSet())throw new Error(`Component ${se.name} has already been registered with ${this.name}`);le.setComponent(se)}addOrOverwriteComponent(se){this.getProvider(se.name).isComponentSet()&&this.providers.delete(se.name),this.addComponent(se)}getProvider(se){if(this.providers.has(se))return this.providers.get(se);const le=new _e(se,this);return this.providers.set(se,le),le}getProviders(){return Array.from(this.providers.values())}}},1877:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Am:()=>Te,Ub:()=>pe,Yd:()=>be,in:()=>z});const E=[];var z=(()=>{return(se=z||(z={}))[se.DEBUG=0]="DEBUG",se[se.VERBOSE=1]="VERBOSE",se[se.INFO=2]="INFO",se[se.WARN=3]="WARN",se[se.ERROR=4]="ERROR",se[se.SILENT=5]="SILENT",z;var se})();const G={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},me=z.INFO,_e={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},ve=(se,le,...we)=>{if(le<se.logLevel)return;const it=(new Date).toISOString(),Xe=_e[le];if(!Xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[Xe](`[${it}]  ${se.name}:`,...we)};class be{constructor(le){this.name=le,this._logLevel=me,this._logHandler=ve,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in z))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?G[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...le),this._logHandler(this,z.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...le),this._logHandler(this,z.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,z.INFO,...le),this._logHandler(this,z.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,z.WARN,...le),this._logHandler(this,z.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...le),this._logHandler(this,z.ERROR,...le)}}function pe(se){E.forEach(le=>{le.setLogLevel(se)})}function Te(se,le){for(const we of E){let it=null;le&&le.level&&(it=G[le.level]),we.userLogHandler=null===se?null:(Xe,Ge,...ct)=>{const ze=ct.map(Ke=>{if(null==Ke)return null;if("string"==typeof Ke)return Ke;if("number"==typeof Ke||"boolean"==typeof Ke)return Ke.toString();if(Ke instanceof Error)return Ke.message;try{return JSON.stringify(Ke)}catch{return null}}).filter(Ke=>Ke).join(" ");Ge>=(it??Xe.logLevel)&&se({level:z[Ge].toLowerCase(),message:ze,args:ct,type:Xe.name})}}}},8766:(Rt,Ue,F)=>{"use strict";F.d(Ue,{Lj:()=>$e,X3:()=>Ot});var E=F(5861);let G,me;const be=new WeakMap,pe=new WeakMap,Te=new WeakMap,se=new WeakMap,le=new WeakMap;let Xe={get(ne,Qe,ce){if(ne instanceof IDBTransaction){if("done"===Qe)return pe.get(ne);if("objectStoreNames"===Qe)return ne.objectStoreNames||Te.get(ne);if("store"===Qe)return ce.objectStoreNames[1]?void 0:ce.objectStore(ce.objectStoreNames[0])}return Ke(ne[Qe])},set:(ne,Qe,ce)=>(ne[Qe]=ce,!0),has:(ne,Qe)=>ne instanceof IDBTransaction&&("done"===Qe||"store"===Qe)||Qe in ne};function ze(ne){return"function"==typeof ne?function ct(ne){return ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ne)?function(...Qe){return ne.apply(De(this),Qe),Ke(be.get(this))}:function(...Qe){return Ke(ne.apply(De(this),Qe))}:function(Qe,...ce){const Me=ne.call(De(this),Qe,...ce);return Te.set(Me,Qe.sort?Qe.sort():[Qe]),Ke(Me)}}(ne):(ne instanceof IDBTransaction&&function it(ne){if(pe.has(ne))return;const Qe=new Promise((ce,Me)=>{const Ve=()=>{ne.removeEventListener("complete",Oe),ne.removeEventListener("error",gt),ne.removeEventListener("abort",gt)},Oe=()=>{ce(),Ve()},gt=()=>{Me(ne.error||new DOMException("AbortError","AbortError")),Ve()};ne.addEventListener("complete",Oe),ne.addEventListener("error",gt),ne.addEventListener("abort",gt)});pe.set(ne,Qe)}(ne),((ne,Qe)=>Qe.some(ce=>ne instanceof ce))(ne,function _e(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ne,Xe):ne)}function Ke(ne){if(ne instanceof IDBRequest)return function we(ne){const Qe=new Promise((ce,Me)=>{const Ve=()=>{ne.removeEventListener("success",Oe),ne.removeEventListener("error",gt)},Oe=()=>{ce(Ke(ne.result)),Ve()},gt=()=>{Me(ne.error),Ve()};ne.addEventListener("success",Oe),ne.addEventListener("error",gt)});return Qe.then(ce=>{ce instanceof IDBCursor&&be.set(ce,ne)}).catch(()=>{}),le.set(Qe,ne),Qe}(ne);if(se.has(ne))return se.get(ne);const Qe=ze(ne);return Qe!==ne&&(se.set(ne,Qe),le.set(Qe,ne)),Qe}const De=ne=>le.get(ne);function Ot(ne,Qe,{blocked:ce,upgrade:Me,blocking:Ve,terminated:Oe}={}){const gt=indexedDB.open(ne,Qe),mt=Ke(gt);return Me&&gt.addEventListener("upgradeneeded",Yt=>{Me(Ke(gt.result),Yt.oldVersion,Yt.newVersion,Ke(gt.transaction))}),ce&&gt.addEventListener("blocked",()=>ce()),mt.then(Yt=>{Oe&&Yt.addEventListener("close",()=>Oe()),Ve&&Yt.addEventListener("versionchange",()=>Ve())}).catch(()=>{}),mt}function $e(ne,{blocked:Qe}={}){const ce=indexedDB.deleteDatabase(ne);return Qe&&ce.addEventListener("blocked",()=>Qe()),Ke(ce).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],ot=new Map;function It(ne,Qe){if(!(ne instanceof IDBDatabase)||Qe in ne||"string"!=typeof Qe)return;if(ot.get(Qe))return ot.get(Qe);const ce=Qe.replace(/FromIndex$/,""),Me=Qe!==ce,Ve=ke.includes(ce);if(!(ce in(Me?IDBIndex:IDBObjectStore).prototype)||!Ve&&!Ie.includes(ce))return;const Oe=function(){var gt=(0,E.Z)(function*(mt,...Yt){const On=this.transaction(mt,Ve?"readwrite":"readonly");let pn=On.store;return Me&&(pn=pn.index(Yt.shift())),(yield Promise.all([pn[ce](...Yt),Ve&&On.done]))[0]});return function(Yt){return gt.apply(this,arguments)}}();return ot.set(Qe,Oe),Oe}!function Ge(ne){Xe=ne(Xe)}(ne=>({...ne,get:(Qe,ce,Me)=>It(Qe,ce)||ne.get(Qe,ce,Me),has:(Qe,ce)=>!!It(Qe,ce)||ne.has(Qe,ce)}))},5861:(Rt,Ue,F)=>{"use strict";function E(G,me,_e,ve,be,pe,Te){try{var se=G[pe](Te),le=se.value}catch(we){return void _e(we)}se.done?me(le):Promise.resolve(le).then(ve,be)}function z(G){return function(){var me=this,_e=arguments;return new Promise(function(ve,be){var pe=G.apply(me,_e);function Te(le){E(pe,ve,be,Te,se,"next",le)}function se(le){E(pe,ve,be,Te,se,"throw",le)}Te(void 0)})}}F.d(Ue,{Z:()=>z})}},Rt=>{Rt(Rt.s=4662)}]);