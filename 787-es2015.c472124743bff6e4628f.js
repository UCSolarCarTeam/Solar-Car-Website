(self.webpackChunksolar_car_website=self.webpackChunksolar_car_website||[]).push([[787],{2787:function(e,t,i){"use strict";i.r(t),i.d(t,{PortalModule:function(){return ne}});var r=i(8583),o=i(6483),s=i(4762),n=i(7716),a=(()=>(function(e){e.ADMIN="Admin",e.BUSINESS="Business",e.NONE="None"}(a||(a={})),a))(),u=i(2392),g=i(3946);let l=(()=>{class e{constructor(e){this.firestore=e}addUser(e){return this.firestore.collection("users-collection").doc(e.id).set(e)}getUser(e){return this.firestore.collection("users-collection").doc(e).get()}getUsers(){return this.firestore.collection("users-collection").snapshotChanges()}updateUser(e){return this.firestore.collection("users-collection").doc(e.id).update({email:e.email,verified:e.verified,displayName:e.displayName,userPrivileges:e.userPrivileges,userActions:e.userActions})}deleteUser(e){this.firestore.collection("users-collection").doc(e).delete()}verifyUser(e){return this.firestore.collection("users-collection").doc(e).update({verified:!0,userPrivileges:[a.NONE]})}addUserPrivilege(e,t){this.firestore.collection("users-collection").doc(e).get().subscribe(e=>{const i=e.data();i.userPrivileges.push(t),this.updateUser(i)})}removeUserPrivilege(e,t){this.firestore.collection("users-collection").doc(e).get().subscribe(e=>{const i=e.data();i.userPrivileges=i.userPrivileges.filter(e=>e!==t),this.updateUser(i)})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(g.ST))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),d=(()=>{class e{constructor(e,t,i){this.auth=e,this.router=t,this.userService=i}Login(e,t){this.auth.signInWithEmailAndPassword(e,t).then(e=>{e.user.emailVerified||(window.alert("Please verify your email address before logging in."),this.auth.signOut()),this.userService.getUser(e.user.uid).subscribe(e=>{const t=e.data();t.verified||(window.alert("Please ask your manager to verify you before logging in."),this.auth.signOut()),window.sessionStorage.setItem("User",JSON.stringify(t)),this.router.navigateByUrl("portal/user")})}).catch(e=>{window.alert(e.message)})}SignUp(e,t,i){this.auth.createUserWithEmailAndPassword(t,i).then(i=>{const r={id:i.user.uid,displayName:e,email:t,verified:!1,userPrivileges:[a.NONE],userActions:[]};this.auth.currentUser.then(e=>{e.sendEmailVerification()}),this.userService.addUser(r)}).catch(e=>{window.alert(e.message)})}LogOut(){this.auth.signOut().then(()=>{this.router.navigateByUrl("portal/login"),window.sessionStorage.removeItem("User")})}ChangeEmail(e){this.auth.currentUser.then(t=>{t.updateEmail(e).then(()=>{const t=JSON.parse(window.sessionStorage.getItem("User"));t.email=e,this.userService.updateUser(t)})})}ResetPassword(e){this.auth.sendPasswordResetEmail(e)}ChangePassword(e){this.auth.currentUser.then(t=>{t.updatePassword(e)})}isAdmin(){const e=JSON.parse(window.sessionStorage.getItem("User"));return e&&e.userPrivileges.includes(a.ADMIN)}hasBusinessPrivileges(){const e=JSON.parse(window.sessionStorage.getItem("User"));return e&&(e.userPrivileges.includes(a.ADMIN)||e.userPrivileges.includes(a.BUSINESS))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.zQ),n.LFG(o.F0),n.LFG(l))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function c(e,t){if(1&e&&(n.TgZ(0,"div"),n.TgZ(1,"li",12),n.TgZ(2,"a",13),n._uU(3),n.qZA(),n.qZA(),n.qZA()),2&e){const e=t.$implicit;n.xp6(2),n.s9C("routerLink",e.link),n.xp6(1),n.Oqu(e.label)}}function m(e,t){if(1&e&&(n.ynx(0),n.YNc(1,c,4,2,"div",11),n.BQk()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",e.routeLinks)}}function p(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"div",6),n.TgZ(2,"div",7),n.YNc(3,m,2,1,"ng-container",5),n.TgZ(4,"div"),n.TgZ(5,"button",8),n.NdJ("click",function(){return n.CHM(e),n.oxw().getAuth().LogOut()}),n._uU(6,"Log Out"),n.qZA(),n.qZA(),n.TgZ(7,"a",9),n._UZ(8,"img",10),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const e=n.oxw();n.xp6(3),n.Q6J("ngIf",e.getAuth().hasBusinessPrivileges())}}let Z=(()=>{class e{constructor(e){this.auth=e,this.routeLinks=[{label:"Team",link:"manage-team"},{label:"Sponsors",link:"manage-sponsors"},{label:"News",link:"manage-news"}]}LoggedIn(){const e=JSON.parse(window.sessionStorage.getItem("User"));return null!==e&&e.verified}getAuth(){return this.auth}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(d))},e.\u0275cmp=n.Xpm({type:e,selectors:[["portal-header"]],decls:8,vars:1,consts:[[1,"sticky-top"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-danger"],["href","./portal",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNavAltMarkup","aria-controls","navbarNavAltMarkup","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[4,"ngIf"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse"],[1,"navbar-nav","ml-auto"],[1,"nav-link","user-btn",3,"click"],["routerLink","user",1,"nav-link"],["src","../../../assets/portal/user-icon.png",1,"user-icon"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"routerLink"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"nav",1),n.TgZ(2,"a",2),n.TgZ(3,"h3"),n._uU(4," SolarCar Portal "),n.qZA(),n.qZA(),n.TgZ(5,"button",3),n._UZ(6,"span",4),n.qZA(),n.YNc(7,p,9,1,"ng-container",5),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.LoggedIn()))},directives:[r.O5,o.yS,r.sg],styles:["img[_ngcontent-%COMP%]{height:auto;max-width:348px;max-height:58px}.navbar[_ngcontent-%COMP%]{font-size:120%;padding:20px 30px}.sticky-top[_ngcontent-%COMP%]{position:sticky}.user-btn[_ngcontent-%COMP%]{background:none;border:none}.user-icon[_ngcontent-%COMP%]{max-width:40px}"]}),e})(),h=(()=>{class e{constructor(e){this.authService=e}ngOnDestroy(){return(0,s.mG)(this,void 0,void 0,function*(){yield this.authService.LogOut()})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(d))},e.\u0275cmp=n.Xpm({type:e,selectors:[["portal-root"]],decls:2,vars:0,template:function(e,t){1&e&&(n._UZ(0,"portal-header"),n._UZ(1,"router-outlet"))},directives:[Z,o.lC],styles:[""]}),e})(),A=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-edit-news"]],decls:2,vars:0,template:function(e,t){1&e&&(n.TgZ(0,"p"),n._uU(1,"Manage news page works!"),n.qZA())},styles:[""]}),e})();var q=i(1420),f=i(9351);let v=(()=>{class e{constructor(e){this.storage=e}uploadFile(e,t){const i=t+e.name;return this.storage.storage.ref().child(i).put(e)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(f.Q1))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=i(3092),T=i(3851);function b(e,t){if(1&e&&(n.TgZ(0,"option"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e)}}function _(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",16),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.qZA()),2&e){const e=t.$implicit,i=t.index;n.xp6(2),n.Oqu(i+1),n.xp6(2),n.Oqu(e.uid),n.xp6(2),n.Oqu(e.uName),n.xp6(2),n.Oqu(e.eName),n.xp6(2),n.Oqu(e.action),n.xp6(2),n.Oqu(e.dateTime)}}function y(e,t){if(1&e&&(n.TgZ(0,"div",15),n.TgZ(1,"h1",12),n._uU(2,"Action History"),n.qZA(),n.TgZ(3,"table",13),n.TgZ(4,"thead"),n.TgZ(5,"tr"),n.TgZ(6,"th",14),n._uU(7,"#"),n.qZA(),n.TgZ(8,"th",14),n._uU(9,"User ID"),n.qZA(),n.TgZ(10,"th",14),n._uU(11,"User"),n.qZA(),n.TgZ(12,"th",14),n._uU(13,"Entity"),n.qZA(),n.TgZ(14,"th",14),n._uU(15,"Action"),n.qZA(),n.TgZ(16,"th",14),n._uU(17,"Date"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(18,"tbody"),n.YNc(19,_,13,6,"tr",6),n.qZA(),n.qZA(),n._UZ(20,"br"),n.qZA()),2&e){const e=n.oxw();n.xp6(19),n.Q6J("ngForOf",e.actionHistory)}}function w(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"th",16),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n.TgZ(8,"a",17),n._UZ(9,"img",18),n.qZA(),n.qZA(),n.TgZ(10,"td"),n._uU(11),n.qZA(),n.TgZ(12,"td"),n.TgZ(13,"button",19),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().deleteSponsor(t)}),n._uU(14,"Delete"),n.qZA(),n._UZ(15,"br"),n.TgZ(16,"button",19),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().setupSponsorUpdate(t)}),n._uU(17,"Update"),n.qZA(),n._UZ(18,"br"),n.TgZ(19,"button",19),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().showActionHistory(t)}),n._uU(20,"History"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,i=t.index;n.xp6(2),n.Oqu(i+1),n.xp6(2),n.Oqu(e.id),n.xp6(2),n.Oqu(e.name),n.xp6(2),n.s9C("href",e.link,n.LSH),n.xp6(1),n.s9C("src",e.logoUrl,n.LSH),n.xp6(2),n.Oqu(e.tier)}}let x=(()=>{class e{constructor(e,t,i,r){this.sponsorService=e,this.uploadService=t,this.formBuilder=i,this.userActionService=r,this.tiers=["Lead","Platinum","Gold","Silver","Bronze","Friend"],this.addSponsorForm=this.formBuilder.group({name:[""],link:[""],logo:[""],tier:[""]}),this.mainButtonText="Add Sponsor",this.actionHistory=[]}ngOnInit(){this.sponsorService.getSponsors().subscribe(e=>{this.sponsors=e.map(e=>Object.assign({id:e.payload.doc.id},e.payload.doc.data()))})}setLogo(e){this.logo=e[0];const t=new FileReader;t.onload=e=>{this.previewLogoUrl=e.target.result},t.readAsDataURL(this.logo)}resetForm(){this.addSponsorForm.reset(),this.previewLogoUrl="",this.updateSponsorId="",this.mainButtonText="Add Sponsor"}manageSponsor(){if(this.mainButtonText.startsWith("Update")){if(null==this.logo){const e={id:this.updateSponsorId,name:this.addSponsorForm.get("name").value,link:this.addSponsorForm.get("link").value,logoUrl:this.previewLogoUrl,tier:this.addSponsorForm.get("tier").value,logo:null};this.sponsorService.updateSponsor(e)}else{const e=this.updateSponsorId,t=this.addSponsorForm.get("name").value,i=this.addSponsorForm.get("link").value,r=this.addSponsorForm.get("tier").value;this.uploadService.uploadFile(this.logo,"assets/logos/").then(o=>{o.ref.getDownloadURL().then(o=>{this.sponsorService.updateSponsor({id:e,name:t,link:i,logoUrl:o,tier:r,logo:null})})})}return void this.resetForm()}const e=this.addSponsorForm.get("name").value,t=this.addSponsorForm.get("link").value,i=this.addSponsorForm.get("tier").value;this.uploadService.uploadFile(this.logo,"assets/logos/").then(r=>{r.ref.getDownloadURL().then(r=>{this.sponsorService.addSponsor({name:e,link:t,logoUrl:r,tier:i,logo:null})})}),this.resetForm()}deleteSponsor(e){this.sponsorService.deleteSponsor(e)}setupSponsorUpdate(e){this.updateSponsorId=e.id,this.addSponsorForm.get("name").setValue(e.name),this.addSponsorForm.get("link").setValue(e.link),this.addSponsorForm.get("tier").setValue(e.tier),this.previewLogoUrl=e.logoUrl,this.logo=null,this.mainButtonText="Update Sponsor",document.documentElement.scrollTop=0}showActionHistory(e){this.actionHistory=[],this.userActionService.getEntityActions(e.id).then(e=>{e.forEach(e=>{this.actionHistory.push(Object.assign({id:e.id},e.data()))})}),document.documentElement.scrollTop=0}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(q.c),n.Y36(v),n.Y36(U.qu),n.Y36(T.X))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-edit-sponsors"]],decls:47,vars:7,consts:[[1,"formContainer"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["type","text","formControlName","link","required","",1,"form-control"],["formControlName","tier",1,"form-control"],[4,"ngFor","ngForOf"],["type","file","formControlName","logo",1,"form-control",3,"change"],[1,"logoPreview",3,"src"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","historyTable",4,"ngIf"],[1,"resultsTable"],[1,"tableHeading"],[1,"table"],["scope","col"],[1,"historyTable"],["scope","row"],["target","_blank",3,"href"],[1,"logoResultsPreview",3,"src"],[1,"btn","btn-danger","actionButton",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"form",1),n.NdJ("ngSubmit",function(){return t.manageSponsor()}),n.TgZ(2,"div",2),n.TgZ(3,"label"),n._uU(4,"Name"),n.qZA(),n._UZ(5,"input",3),n.qZA(),n.TgZ(6,"div",2),n.TgZ(7,"label"),n._uU(8,"Link"),n.qZA(),n._UZ(9,"input",4),n.qZA(),n.TgZ(10,"div",2),n.TgZ(11,"label"),n._uU(12,"Tier"),n.qZA(),n.TgZ(13,"select",5),n.YNc(14,b,2,1,"option",6),n.qZA(),n.qZA(),n.TgZ(15,"div",2),n.TgZ(16,"label"),n._uU(17,"Logo"),n.qZA(),n.TgZ(18,"input",7),n.NdJ("change",function(e){return t.setLogo(e.target.files)}),n.qZA(),n.qZA(),n.TgZ(19,"label"),n._uU(20,"Logo Preview"),n.qZA(),n._UZ(21,"br"),n._UZ(22,"img",8),n.TgZ(23,"div",2),n.TgZ(24,"button",9),n._uU(25),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(26,y,21,1,"div",10),n.TgZ(27,"div",11),n.TgZ(28,"h1",12),n._uU(29,"Sponsors"),n.qZA(),n.TgZ(30,"table",13),n.TgZ(31,"thead"),n.TgZ(32,"tr"),n.TgZ(33,"th",14),n._uU(34,"#"),n.qZA(),n.TgZ(35,"th",14),n._uU(36,"ID"),n.qZA(),n.TgZ(37,"th",14),n._uU(38,"Name"),n.qZA(),n.TgZ(39,"th",14),n._uU(40,"Logo"),n.qZA(),n.TgZ(41,"th",14),n._uU(42,"Tier"),n.qZA(),n.TgZ(43,"th",14),n._uU(44,"Action "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(45,"tbody"),n.YNc(46,w,21,6,"tr",6),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("formGroup",t.addSponsorForm),n.xp6(13),n.Q6J("ngForOf",t.tiers),n.xp6(8),n.s9C("src",t.previewLogoUrl,n.LSH),n.xp6(2),n.Q6J("disabled",!t.addSponsorForm.valid),n.xp6(1),n.Oqu(t.mainButtonText),n.xp6(1),n.Q6J("ngIf",0!==t.actionHistory.length),n.xp6(20),n.Q6J("ngForOf",t.sponsors))},directives:[U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,U.Q7,U.EJ,r.sg,r.O5,U.YN,U.Kr],styles:[".resultsTable[_ngcontent-%COMP%]{max-width:100%}.logoResultsPreview[_ngcontent-%COMP%]{min-width:500px;max-width:500px}.actionButton[_ngcontent-%COMP%]{margin-bottom:1em}.logoPreview[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px;min-width:500px}.formContainer[_ngcontent-%COMP%]{padding:3em}.tableHeading[_ngcontent-%COMP%]{padding-left:.5em}"]}),e})();var F=i(6341);function S(e,t){if(1&e&&(n.TgZ(0,"option"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e)}}function O(e,t){if(1&e&&(n.TgZ(0,"option"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e)}}function N(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",19),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.qZA()),2&e){const e=t.$implicit,i=t.index;n.xp6(2),n.Oqu(i+1),n.xp6(2),n.Oqu(e.uid),n.xp6(2),n.Oqu(e.uName),n.xp6(2),n.Oqu(e.eName),n.xp6(2),n.Oqu(e.action),n.xp6(2),n.Oqu(e.dateTime)}}function M(e,t){if(1&e&&(n.TgZ(0,"div",17),n.TgZ(1,"h1",18),n._uU(2,"Action History"),n.qZA(),n.TgZ(3,"table",15),n.TgZ(4,"thead"),n.TgZ(5,"tr"),n.TgZ(6,"th",16),n._uU(7,"#"),n.qZA(),n.TgZ(8,"th",16),n._uU(9,"User ID"),n.qZA(),n.TgZ(10,"th",16),n._uU(11,"User"),n.qZA(),n.TgZ(12,"th",16),n._uU(13,"Entity"),n.qZA(),n.TgZ(14,"th",16),n._uU(15,"Action"),n.qZA(),n.TgZ(16,"th",16),n._uU(17,"Date"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(18,"tbody"),n.YNc(19,N,13,6,"tr",5),n.qZA(),n.qZA(),n._UZ(20,"br"),n.qZA()),2&e){const e=n.oxw();n.xp6(19),n.Q6J("ngForOf",e.actionHistory)}}function P(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"th",19),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._UZ(6,"img",20),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.qZA(),n.TgZ(17,"td"),n.TgZ(18,"button",21),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().deleteMember(t)}),n._uU(19,"Delete"),n.qZA(),n._UZ(20,"br"),n.TgZ(21,"button",21),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().setupMemberUpdate(t)}),n._uU(22,"Update"),n.qZA(),n._UZ(23,"br"),n.TgZ(24,"button",21),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().showActionHistory(t)}),n._uU(25,"History"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,i=t.index;n.xp6(2),n.Oqu(i+1),n.xp6(2),n.Oqu(e.name),n.xp6(2),n.s9C("src",e.imageName,n.LSH),n.xp6(2),n.Oqu(e.position),n.xp6(2),n.Oqu(e.subteam),n.xp6(2),n.Oqu(e.major),n.xp6(2),n.Oqu(e.description),n.xp6(2),n.Oqu(e.year)}}let C=(()=>{class e{constructor(e,t,i,r,o){this.memberService=e,this.formBuilder=t,this.uploadService=i,this.userActionService=r,this.authService=o,this.addMemberForm=this.formBuilder.group({name:[""],position:[""],subteam:[""],major:[""],description:[""],year:[""],image:[""]}),this.mainButtonText="Add Member",this.positions=["Member","Manager","Team Captain","Engineering Team Manager","Business Team Manager"],this.subteams=["Mechanical","Electrical","Software","Business"],this.actionHistory=[]}ngOnInit(){this.memberService.getMembers().subscribe(e=>{this.members=e.map(e=>Object.assign({id:e.payload.doc.id},e.payload.doc.data()))})}setImage(e){this.image=e[0];const t=new FileReader;t.onload=e=>{this.previewImgUrl=e.target.result},t.readAsDataURL(this.image)}resetForm(){this.addMemberForm.reset(),this.previewImgUrl="",this.updateMemberId="",this.mainButtonText="Add Member"}deleteMember(e){this.memberService.deleteMember(e)}setupMemberUpdate(e){this.updateMemberId=e.id,this.addMemberForm.get("name").setValue(e.name),this.addMemberForm.get("position").setValue(e.position),this.addMemberForm.get("subteam").setValue(e.subteam),this.addMemberForm.get("major").setValue(e.major),this.addMemberForm.get("description").setValue(e.description),this.addMemberForm.get("year").setValue(e.year),this.previewImgUrl=e.imageName,this.image=null,this.mainButtonText="Update Member",document.documentElement.scrollTop=0}manageMember(){if(this.mainButtonText.startsWith("Update")){if(null==this.image){const e={id:this.updateMemberId,name:this.addMemberForm.get("name").value,position:this.addMemberForm.get("position").value,subteam:this.addMemberForm.get("subteam").value,major:this.addMemberForm.get("major").value,description:this.addMemberForm.get("description").value,year:this.addMemberForm.get("year").value,imageName:this.previewImgUrl,image:null};this.memberService.updateMember(e)}else{const e=this.updateMemberId,t=this.addMemberForm.get("name").value,i=this.addMemberForm.get("position").value,r=this.addMemberForm.get("subteam").value,o=this.addMemberForm.get("major").value,s=this.addMemberForm.get("description").value,n=this.addMemberForm.get("year").value;this.uploadService.uploadFile(this.image,"assets/member_images/").then(a=>{a.ref.getDownloadURL().then(a=>{this.memberService.updateMember({id:e,name:t,position:i,imageName:a,subteam:r,major:o,description:s,year:n,image:null})})})}return void this.resetForm()}const e=this.addMemberForm.get("name").value,t=this.addMemberForm.get("position").value,i=this.addMemberForm.get("subteam").value,r=this.addMemberForm.get("major").value,o=this.addMemberForm.get("description").value,s=this.addMemberForm.get("year").value;this.uploadService.uploadFile(this.image,"assets/member_images/").then(n=>{n.ref.getDownloadURL().then(n=>{this.memberService.addMember({name:e,position:t,imageName:n,subteam:i,major:r,description:o,year:s,image:null})})}),this.resetForm()}showActionHistory(e){this.actionHistory=[],this.userActionService.getEntityActions(e.id).then(e=>{e.forEach(e=>{this.actionHistory.push(Object.assign({id:e.id},e.data()))})}),document.documentElement.scrollTop=0}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(F.n),n.Y36(U.qu),n.Y36(v),n.Y36(T.X),n.Y36(d))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-edit-team"]],decls:64,vars:8,consts:[[1,"formContainer"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["formControlName","position","required","",1,"form-control"],[4,"ngFor","ngForOf"],["formControlName","subteam","required","",1,"form-control"],["type","text","formControlName","major","required","",1,"form-control"],["type","text","formControlName","description","required","",1,"form-control"],["type","text","formControlName","year","required","",1,"form-control"],["type","file","formControlName","image",1,"form-control",3,"change"],[1,"imagePreview",3,"src"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","historyTable",4,"ngIf"],[1,"resultsTable"],[1,"table"],["scope","col"],[1,"historyTable"],[1,"tableHeading"],["scope","row"],[1,"imageResultsPreview",3,"src"],[1,"btn","btn-danger","actionButton",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"form",1),n.NdJ("ngSubmit",function(){return t.manageMember()}),n.TgZ(2,"div",2),n.TgZ(3,"label"),n._uU(4,"Name"),n.qZA(),n._UZ(5,"input",3),n.qZA(),n.TgZ(6,"div",2),n.TgZ(7,"label"),n._uU(8,"Position"),n.qZA(),n.TgZ(9,"select",4),n.YNc(10,S,2,1,"option",5),n.qZA(),n.qZA(),n.TgZ(11,"div",2),n.TgZ(12,"label"),n._uU(13,"Subteam"),n.qZA(),n.TgZ(14,"select",6),n.YNc(15,O,2,1,"option",5),n.qZA(),n.qZA(),n.TgZ(16,"div",2),n.TgZ(17,"label"),n._uU(18,"Major"),n.qZA(),n._UZ(19,"input",7),n.qZA(),n.TgZ(20,"div",2),n.TgZ(21,"label"),n._uU(22,"Description"),n.qZA(),n._UZ(23,"input",8),n.qZA(),n.TgZ(24,"div",2),n.TgZ(25,"label"),n._uU(26,"Year"),n.qZA(),n._UZ(27,"input",9),n.qZA(),n.TgZ(28,"div",2),n.TgZ(29,"label"),n._uU(30,"Image"),n.qZA(),n.TgZ(31,"input",10),n.NdJ("change",function(e){return t.setImage(e.target.files)}),n.qZA(),n.qZA(),n.TgZ(32,"label"),n._uU(33,"Image Preview"),n.qZA(),n._UZ(34,"br"),n._UZ(35,"img",11),n.TgZ(36,"div",2),n.TgZ(37,"button",12),n._uU(38),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(39,M,21,1,"div",13),n.TgZ(40,"div",14),n.TgZ(41,"table",15),n.TgZ(42,"thead"),n.TgZ(43,"tr"),n.TgZ(44,"th",16),n._uU(45,"#"),n.qZA(),n.TgZ(46,"th",16),n._uU(47,"Name"),n.qZA(),n.TgZ(48,"th",16),n._uU(49,"Image"),n.qZA(),n.TgZ(50,"th",16),n._uU(51,"Position"),n.qZA(),n.TgZ(52,"th",16),n._uU(53,"Subteam"),n.qZA(),n.TgZ(54,"th",16),n._uU(55,"Major"),n.qZA(),n.TgZ(56,"th",16),n._uU(57,"Description"),n.qZA(),n.TgZ(58,"th",16),n._uU(59,"Year"),n.qZA(),n.TgZ(60,"th",16),n._uU(61,"Action "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(62,"tbody"),n.YNc(63,P,26,8,"tr",5),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("formGroup",t.addMemberForm),n.xp6(9),n.Q6J("ngForOf",t.positions),n.xp6(5),n.Q6J("ngForOf",t.subteams),n.xp6(20),n.s9C("src",t.previewImgUrl,n.LSH),n.xp6(2),n.Q6J("disabled",!t.addMemberForm.valid),n.xp6(1),n.Oqu(t.mainButtonText),n.xp6(1),n.Q6J("ngIf",0!==t.actionHistory.length),n.xp6(24),n.Q6J("ngForOf",t.members))},directives:[U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,U.Q7,U.EJ,r.sg,r.O5,U.YN,U.Kr],styles:[".resultsTable[_ngcontent-%COMP%]{max-width:100%}.imageResultsPreview[_ngcontent-%COMP%]{min-width:250px;max-width:250px}.actionButton[_ngcontent-%COMP%]{margin-bottom:1em}.imagePreview[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px;min-width:500px}.formContainer[_ngcontent-%COMP%]{padding:3em}"]}),e})();function J(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"small",8),n._uU(2," Please enter a valid email "),n.qZA(),n.qZA())}let I=(()=>{class e{constructor(e,t){this.formBuilder=e,this.authService=t,this.loginForm=this.formBuilder.group({email:["",U.kI.pattern(".+@.+.com")],password:[""]})}ngOnInit(){}Login(){this.authService.Login(this.loginForm.get("email").value,this.loginForm.get("password").value)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(U.qu),n.Y36(d))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],decls:16,vars:3,consts:[[1,"loginFormDiv"],[1,"loginForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/register",1,"error"],["routerLink","/portal/reset-password",1,"error"],[1,"error"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"form",1),n.NdJ("ngSubmit",function(){return t.Login()}),n._UZ(2,"input",2),n.YNc(3,J,3,0,"div",3),n._UZ(4,"input",4),n._UZ(5,"br"),n.TgZ(6,"button",5),n._uU(7,"Login"),n.qZA(),n._UZ(8,"br"),n.TgZ(9,"a",6),n._uU(10,"No account? "),n.TgZ(11,"strong"),n._uU(12,"Create one here"),n.qZA(),n.qZA(),n._UZ(13,"br"),n.TgZ(14,"a",7),n._uU(15,"Forgot Password"),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("formGroup",t.loginForm),n.xp6(2),n.Q6J("ngIf",t.loginForm.get("email").invalid&&t.loginForm.get("email").errors&&(t.loginForm.get("email").dirty||t.loginForm.get("email").touched)),n.xp6(3),n.Q6J("disabled",!t.loginForm.valid))},directives:[U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,U.Q7,r.O5,o.yS],styles:[".loginFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.loginForm[_ngcontent-%COMP%], .resetPasswordForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:red}"]}),e})();function k(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"small",9),n._uU(2," Please enter a valid email "),n.qZA(),n.qZA())}function Y(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"small",9),n._uU(2," Password must have at least 8 characters, uppercase letters, digits, and special characters "),n.qZA(),n.qZA())}function L(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"small",9),n._uU(2,"The passwords do not match"),n.qZA(),n.qZA())}function H(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"small",9),n._uU(2,"Sign up successfull. Please wait to be verified"),n.qZA(),n.qZA())}function Q(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"small",9),n._uU(2,"UofC blocks our registration emails. Please use another email."),n.qZA(),n.qZA())}let E=(()=>{class e{constructor(e,t){this.formBuilder=e,this.authService=t,this.ucalgaryEmailUsed=!1,this.signUpForm=this.formBuilder.group({displayName:[""],email:["",U.kI.pattern(".+@.+.c.+")],password:["",U.kI.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-zd$@$!%*?&].{8,}")],passwordConfirm:[""]})}ngOnInit(){}SignUp(){this.signUpForm.get("password").value===this.signUpForm.get("passwordConfirm").value?this.signUpForm.get("email").value.includes("ucalgary.ca")?this.ucalgaryEmailUsed=!0:(this.passwordsDoNotMatch=!1,this.authService.SignUp(this.signUpForm.get("displayName").value,this.signUpForm.get("email").value,this.signUpForm.get("password").value)):this.passwordsDoNotMatch=!0}SignUpSuccess(){const e=JSON.parse(window.sessionStorage.getItem("User"));return null!==e&&!e.verified}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(U.qu),n.Y36(d))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-register"]],decls:19,vars:7,consts:[[1,"signUpFormDiv"],[1,"signUpForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Display Name","formControlName","displayName","required","",1,"form-control"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["type","password","placeholder","Confirm Password","formControlName","passwordConfirm","required","",1,"form-control"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/login",1,"error"],[1,"error"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"form",1),n.NdJ("ngSubmit",function(){return t.SignUp()}),n._UZ(2,"input",2),n._UZ(3,"input",3),n.YNc(4,k,3,0,"div",4),n._UZ(5,"input",5),n.YNc(6,Y,3,0,"div",4),n._UZ(7,"input",6),n.YNc(8,L,3,0,"div",4),n._UZ(9,"br"),n.TgZ(10,"button",7),n._uU(11,"Sign up"),n.qZA(),n._UZ(12,"br"),n.YNc(13,H,3,0,"div",4),n.YNc(14,Q,3,0,"div",4),n.TgZ(15,"a",8),n._uU(16,"Have an account? "),n.TgZ(17,"strong"),n._uU(18,"Login here"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("formGroup",t.signUpForm),n.xp6(3),n.Q6J("ngIf",t.signUpForm.get("email").invalid&&t.signUpForm.get("email").errors&&(t.signUpForm.get("email").dirty||t.signUpForm.get("email").touched)),n.xp6(2),n.Q6J("ngIf",t.signUpForm.get("password").invalid&&t.signUpForm.get("password").errors&&(t.signUpForm.get("password").dirty||t.signUpForm.get("password").touched)),n.xp6(2),n.Q6J("ngIf",t.passwordsDoNotMatch),n.xp6(2),n.Q6J("disabled",!t.signUpForm.valid),n.xp6(3),n.Q6J("ngIf",t.SignUpSuccess()),n.xp6(1),n.Q6J("ngIf",t.ucalgaryEmailUsed))},directives:[U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,U.Q7,r.O5,o.yS],styles:[".signUpFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.signUpForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:red}"]}),e})(),B=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return"User"in window.sessionStorage?JSON.parse(window.sessionStorage.getItem("User")).verified:(this.router.navigateByUrl("portal/login"),!1)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(d),n.LFG(o.F0))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function D(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",5),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.qZA()),2&e){const e=t.$implicit,i=t.index;n.xp6(2),n.Oqu(i+1),n.xp6(2),n.Oqu(e.eName),n.xp6(2),n.Oqu(e.eid),n.xp6(2),n.Oqu(e.action),n.xp6(2),n.Oqu(e.dateTime)}}function j(e,t){if(1&e&&(n.TgZ(0,"div"),n.TgZ(1,"h1",1),n._uU(2,"Action History"),n.qZA(),n.TgZ(3,"table",2),n.TgZ(4,"thead"),n.TgZ(5,"tr"),n.TgZ(6,"th",3),n._uU(7,"#"),n.qZA(),n.TgZ(8,"th",3),n._uU(9,"Entity"),n.qZA(),n.TgZ(10,"th",3),n._uU(11,"Entity ID"),n.qZA(),n.TgZ(12,"th",3),n._uU(13,"Action"),n.qZA(),n.TgZ(14,"th",3),n._uU(15,"Date"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"tbody"),n.YNc(17,D,11,5,"tr",4),n.qZA(),n.qZA(),n._UZ(18,"br"),n.qZA()),2&e){const e=n.oxw();n.xp6(17),n.Q6J("ngForOf",e.userActionHistory)}}function $(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"input",7),n.NdJ("change",function(t){const i=n.CHM(e).$implicit,r=n.oxw().$implicit;return n.oxw().updateUserPrivileges(r.id,i,t)}),n.qZA(),n._uU(2),n.qZA()}if(2&e){const e=t.$implicit,i=n.oxw().$implicit,r=n.oxw();n.xp6(1),n.s9C("value",e),n.Q6J("checked",r.userHasPrivilege(i.id,e)),n.xp6(1),n.hij(" ",e," ")}}function G(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"td"),n.TgZ(1,"button",6),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit;return n.oxw().verifyUser(t.id)}),n._uU(2,"Verify"),n.qZA(),n.qZA()}}function R(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"th",5),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n.YNc(10,$,3,3,"div",4),n.qZA(),n.YNc(11,G,3,0,"td",0),n.TgZ(12,"td"),n.TgZ(13,"button",6),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().getUserActions(t.id)}),n._uU(14,"History"),n.qZA(),n.qZA(),n.TgZ(15,"td"),n.TgZ(16,"button",6),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().deleteUser(t.id)}),n._uU(17,"Delete"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,i=t.index,r=n.oxw();n.xp6(2),n.Oqu(i+1),n.xp6(2),n.Oqu(e.email),n.xp6(2),n.Oqu(e.displayName),n.xp6(2),n.Oqu(e.verified),n.xp6(2),n.Q6J("ngForOf",r.privileges),n.xp6(1),n.Q6J("ngIf",!e.verified)}}let V=(()=>{class e{constructor(e,t,i){this.userActionService=e,this.userService=t,this.authService=i,this.privileges=Object.keys(a).map(e=>a[e]),this.userActionHistory=[],this.userPrivileges=new Map}ngOnInit(){this.authService.isAdmin()&&this.userService.getUsers().subscribe(e=>{this.users=e.map(e=>{const t=Object.assign({id:e.payload.doc.id},e.payload.doc.data());return this.userPrivileges.set(t.id,t.userPrivileges),t})})}getUserActions(e){this.userActionHistory=[],this.userActionService.getUserActions(e).then(e=>{e.forEach(e=>{this.userActionHistory.push(Object.assign({id:e.id},e.data()));const t=this.userActionHistory.pop();this.userService.getUser(t.uid).subscribe(e=>{const i=e.data();t.uid=i.displayName,this.userActionHistory.push(t)})})})}getPrivilegeString(e){if(1===e.length)return e[0];let t="";return e.forEach(e=>{t+=e+", "}),t}verifyUser(e){this.userService.verifyUser(e)}updateUserPrivileges(e,t,i){i.target.checked?this.userService.addUserPrivilege(e,t):this.userService.removeUserPrivilege(e,t)}deleteUser(e){this.userService.deleteUser(e)}userHasPrivilege(e,t){return this.userPrivileges.get(e).includes(t)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(T.X),n.Y36(l),n.Y36(d))},e.\u0275cmp=n.Xpm({type:e,selectors:[["admin-panel"]],decls:20,vars:2,consts:[[4,"ngIf"],[1,"tableHeading"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-danger",3,"click"],["name","i","type","checkbox",3,"value","checked","change"]],template:function(e,t){1&e&&(n.YNc(0,j,19,1,"div",0),n.TgZ(1,"h1",1),n._uU(2,"Users"),n.qZA(),n.TgZ(3,"table",2),n.TgZ(4,"thead"),n.TgZ(5,"tr"),n.TgZ(6,"th",3),n._uU(7,"#"),n.qZA(),n.TgZ(8,"th",3),n._uU(9,"Email"),n.qZA(),n.TgZ(10,"th",3),n._uU(11,"Display Name"),n.qZA(),n.TgZ(12,"th",3),n._uU(13,"Verified"),n.qZA(),n.TgZ(14,"th",3),n._uU(15,"Privileges"),n.qZA(),n.TgZ(16,"th",3),n._uU(17,"Action"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(18,"tbody"),n.YNc(19,R,18,6,"tr",4),n.qZA(),n.qZA()),2&e&&(n.Q6J("ngIf",0!==t.userActionHistory.length),n.xp6(19),n.Q6J("ngForOf",t.users))},directives:[r.O5,r.sg],styles:[".tableHeading[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em}"]}),e})();function X(e,t){1&e&&(n.TgZ(0,"div",4),n.TgZ(1,"button",10),n._uU(2,"Update"),n.qZA(),n.qZA())}function z(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",14),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.qZA()),2&e){const e=t.$implicit,i=t.index;n.xp6(2),n.Oqu(i+1),n.xp6(2),n.Oqu(e.eName),n.xp6(2),n.Oqu(e.eid),n.xp6(2),n.Oqu(e.action),n.xp6(2),n.Oqu(e.dateTime)}}function W(e,t){if(1&e&&(n.TgZ(0,"div"),n.TgZ(1,"h1",1),n._uU(2,"Your Action History"),n.qZA(),n.TgZ(3,"table",11),n.TgZ(4,"thead"),n.TgZ(5,"tr"),n.TgZ(6,"th",12),n._uU(7,"#"),n.qZA(),n.TgZ(8,"th",12),n._uU(9,"Entity"),n.qZA(),n.TgZ(10,"th",12),n._uU(11,"Entity ID"),n.qZA(),n.TgZ(12,"th",12),n._uU(13,"Action"),n.qZA(),n.TgZ(14,"th",12),n._uU(15,"Date"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"tbody"),n.YNc(17,z,11,5,"tr",13),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(17),n.Q6J("ngForOf",e.userActions)}}function K(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",14),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.qZA()),2&e){const e=t.$implicit,i=t.index;n.xp6(2),n.Oqu(i+1),n.xp6(2),n.Oqu(e.eName),n.xp6(2),n.Oqu(e.eid),n.xp6(2),n.Oqu(e.action),n.xp6(2),n.Oqu(e.dateTime)}}function ee(e,t){if(1&e&&(n.TgZ(0,"div"),n.TgZ(1,"h1",1),n._uU(2,"Your Action History"),n.qZA(),n.TgZ(3,"table",11),n.TgZ(4,"thead"),n.TgZ(5,"tr"),n.TgZ(6,"th",12),n._uU(7,"#"),n.qZA(),n.TgZ(8,"th",12),n._uU(9,"Entity"),n.qZA(),n.TgZ(10,"th",12),n._uU(11,"Entity ID"),n.qZA(),n.TgZ(12,"th",12),n._uU(13,"Action"),n.qZA(),n.TgZ(14,"th",12),n._uU(15,"Date"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"tbody"),n.YNc(17,K,11,5,"tr",13),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(17),n.Q6J("ngForOf",e.userActions)}}function te(e,t){1&e&&(n.TgZ(0,"div"),n._UZ(1,"admin-panel"),n.qZA())}let ie=(()=>{class e{constructor(e,t,i,r){this.authService=e,this.userService=t,this.userActionService=i,this.formBuilder=r,this.userForm=this.formBuilder.group({displayName:"",email:"",password:""}),this.userActions=[],this.user=JSON.parse(window.sessionStorage.getItem("User"))}ngOnInit(){this.userActionService.getUserActions(this.user.id).then(e=>{e.forEach(e=>{this.userActions.push(Object.assign({id:e.id},e.data()))})}),this.userForm.get("displayName").setValue(this.user.displayName),this.userForm.get("email").setValue(this.user.email)}getAuth(){return this.authService}getUser(){return JSON.parse(window.sessionStorage.getItem("User"))}manageUser(){const e=JSON.parse(window.sessionStorage.getItem("User"));this.userForm.get("displayName").value!==e.displayName&&(e.displayName=this.userForm.get("displayName").value,this.userService.updateUser(e)),this.userForm.get("email").value!==e.email&&this.authService.ChangeEmail(this.userForm.get("email").value),""!==this.userForm.get("password").value&&this.authService.ChangePassword(this.userForm.get("password").value)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(d),n.Y36(l),n.Y36(T.X),n.Y36(U.qu))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-profile"]],decls:22,vars:7,consts:[[1,"profileContainer"],[1,"tableHeading"],[1,"userForm"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","displayName","required","",1,"form-control",3,"placeholder"],["type","text","formControlName","email","required","",1,"form-control",3,"placeholder"],["type","password","formControlName","password","required","",1,"form-control"],["class","mb-3",4,"ngIf"],[4,"ngIf"],["type","submit",1,"btn","btn-danger"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div"),n.TgZ(2,"h1",1),n._uU(3,"Profile"),n.qZA(),n.TgZ(4,"div",2),n.TgZ(5,"form",3),n.NdJ("ngSubmit",function(){return t.manageUser()}),n.TgZ(6,"div",4),n.TgZ(7,"label"),n._uU(8,"Display Name"),n.qZA(),n._UZ(9,"input",5),n.qZA(),n.TgZ(10,"div",4),n.TgZ(11,"label"),n._uU(12,"Email"),n.qZA(),n._UZ(13,"input",6),n.qZA(),n.TgZ(14,"div",4),n.TgZ(15,"label"),n._uU(16,"Password"),n.qZA(),n._UZ(17,"input",7),n.qZA(),n.YNc(18,X,3,0,"div",8),n.qZA(),n.qZA(),n.YNc(19,W,18,1,"div",9),n.qZA(),n.YNc(20,ee,18,1,"div",9),n.YNc(21,te,2,0,"div",9),n.qZA()),2&e&&(n.xp6(5),n.Q6J("formGroup",t.userForm),n.xp6(4),n.s9C("placeholder",t.getUser().displayName),n.xp6(4),n.s9C("placeholder",t.getUser().email),n.xp6(5),n.Q6J("ngIf",t.userForm.get("displayName").dirty||t.userForm.get("email").dirty||t.userForm.get("password").dirty),n.xp6(1),n.Q6J("ngIf",t.getAuth().isAdmin()),n.xp6(1),n.Q6J("ngIf",!t.getAuth().isAdmin()),n.xp6(1),n.Q6J("ngIf",t.getAuth().isAdmin()))},directives:[U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,U.Q7,r.O5,r.sg,V],styles:[".profileContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%}.tableHeading[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em}.userForm[_ngcontent-%COMP%]{max-width:80%;padding-left:1em}"]}),e})();function re(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"small",6),n._uU(2," Please enter a valid email "),n.qZA(),n.qZA())}const oe=[{path:"",component:h,children:[{path:"manage-news",component:A,canActivate:[B]},{path:"manage-sponsors",component:x,canActivate:[B]},{path:"manage-team",component:C,canActivate:[B]},{path:"login",component:I},{path:"register",component:E},{path:"reset-password",component:(()=>{class e{constructor(e,t){this.authService=e,this.formBuilder=t,this.resetForm=this.formBuilder.group({email:["",U.kI.pattern(".+@.+.com")]})}ngOnInit(){}resetPasswordSubmit(){this.authService.ResetPassword(this.resetForm.get("email").value)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(d),n.Y36(U.qu))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-reset-password"]],decls:10,vars:3,consts:[[1,"resetFormDiv"],[1,"resetPasswordForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/login",1,"backToLogin"],[1,"error"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"form",1),n.NdJ("ngSubmit",function(){return t.resetPasswordSubmit()}),n._UZ(2,"input",2),n.YNc(3,re,3,0,"div",3),n._UZ(4,"br"),n.TgZ(5,"button",4),n._uU(6,"Reset Password"),n.qZA(),n._UZ(7,"br"),n.TgZ(8,"a",5),n._uU(9,"Back to Login"),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("formGroup",t.resetForm),n.xp6(2),n.Q6J("ngIf",t.resetForm.get("email").invalid&&t.resetForm.get("email").errors&&(t.resetForm.get("email").dirty||t.resetForm.get("email").touched)),n.xp6(2),n.Q6J("disabled",!t.resetForm.valid))},directives:[U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,U.Q7,r.O5,o.yS],styles:[".resetFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.resetPasswordForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.backToLogin[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{color:red}"]}),e})()},{path:"user",component:ie,canActivate:[B]},{path:"**",redirectTo:"user",pathMatch:"full"}]}];let se=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[o.Bz.forChild(oe)],o.Bz]}),e})(),ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e,bootstrap:[h]}),e.\u0275inj=n.cJS({providers:[],imports:[[r.ez,se,U.UX]]}),e})()}}]);