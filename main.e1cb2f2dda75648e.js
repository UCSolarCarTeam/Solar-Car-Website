(self.webpackChunkSolar_Car_Website=self.webpackChunkSolar_Car_Website||[]).push([[179],{6217:(Bt,Re,j)=>{"use strict";j.d(Re,{nm:()=>js});var g=j(4976);j(4650),j(259);var ye=j(5861),te=j(6881),ce=j(4859),ze=j(2090),et=j(1877);const Fe=new Map,Ne={activated:!1,tokenObservers:[]},be={initialized:!1,enabled:!1};function ke(Ke){return Fe.get(Ke)||Object.assign({},Ne)}function Qe(){return be}class Nn{constructor(Ve,tt,yt,Pt,vn){if(this.operation=Ve,this.retryPolicy=tt,this.getWaitDuration=yt,this.lowerBound=Pt,this.upperBound=vn,this.pending=null,this.nextErrorWaitInterval=Pt,Pt>vn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ve){var tt=this;return(0,ye.Z)(function*(){tt.stop();try{tt.pending=new ze.BH,yield function On(Ke){return new Promise(Ve=>{setTimeout(Ve,Ke)})}(tt.getNextRun(Ve)),tt.pending.resolve(),yield tt.pending.promise,tt.pending=new ze.BH,yield tt.operation(),tt.pending.resolve(),yield tt.pending.promise,tt.process(!0).catch(()=>{})}catch(yt){tt.retryPolicy(yt)?tt.process(!1).catch(()=>{}):tt.stop()}})()}getNextRun(Ve){if(Ve)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const tt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),tt}}}const wt=new ze.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Cn(Ke){if(!ke(Ke).activated)throw wt.create("use-before-activation",{appName:Ke.name})}function Mr(Ke,Ve){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,ye.Z)(function*({url:Ke,body:Ve},tt){const yt={"Content-Type":"application/json"},Pt=tt.getImmediate({optional:!0});if(Pt){const Ui=yield Pt.getHeartbeatsHeader();Ui&&(yt["X-Firebase-Client"]=Ui)}const vn={method:"POST",body:JSON.stringify(Ve),headers:yt};let tr,Un;try{tr=yield fetch(Ke,vn)}catch(Ui){throw wt.create("fetch-network-error",{originalErrorMessage:Ui?.message})}if(200!==tr.status)throw wt.create("fetch-status-error",{httpStatus:tr.status});try{Un=yield tr.json()}catch(Ui){throw wt.create("fetch-parse-error",{originalErrorMessage:Ui?.message})}const Er=Un.ttl.match(/^([\d.]+)(s)$/);if(!Er||!Er[2]||isNaN(Number(Er[1])))throw wt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Un.ttl}`});const eo=1e3*Number(Er[1]),Is=Date.now();return{token:Un.token,expireTimeMillis:Is+eo,issuedAtTimeMillis:Is}})).apply(this,arguments)}function Br(Ke,Ve){const{projectId:tt,appId:yt,apiKey:Pt}=Ke.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${tt}/apps/${yt}:exchangeDebugToken?key=${Pt}`,body:{debug_token:Ve}}}const dr="firebase-app-check-store";let Vr=null;function ri(){return Vr||(Vr=new Promise((Ke,Ve)=>{try{const tt=indexedDB.open("firebase-app-check-database",1);tt.onsuccess=yt=>{Ke(yt.target.result)},tt.onerror=yt=>{var Pt;Ve(wt.create("storage-open",{originalErrorMessage:null===(Pt=yt.target.error)||void 0===Pt?void 0:Pt.message}))},tt.onupgradeneeded=yt=>{0===yt.oldVersion&&yt.target.result.createObjectStore(dr,{keyPath:"compositeKey"})}}catch(tt){Ve(wt.create("storage-open",{originalErrorMessage:tt?.message}))}}),Vr)}function Bn(){return(Bn=(0,ye.Z)(function*(Ke,Ve){const yt=(yield ri()).transaction(dr,"readwrite"),vn=yt.objectStore(dr).put({compositeKey:Ke,value:Ve});return new Promise((tr,Un)=>{vn.onsuccess=Er=>{tr()},yt.onerror=Er=>{var eo;Un(wt.create("storage-set",{originalErrorMessage:null===(eo=Er.target.error)||void 0===eo?void 0:eo.message}))}})})).apply(this,arguments)}const yn=new et.Yd("@firebase/app-check");function Gt(Ke,Ve){return(0,ze.hl)()?function fs(Ke,Ve){return function mr(Ke,Ve){return Bn.apply(this,arguments)}(function Yn(Ke){return`${Ke.options.appId}-${Ke.name}`}(Ke),Ve)}(Ke,Ve).catch(tt=>{yn.warn(`Failed to write token to IndexedDB. Error: ${tt}`)}):Promise.resolve()}function _i(){return Qe().enabled}function qn(){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,ye.Z)(function*(){const Ke=Qe();if(Ke.enabled&&Ke.token)return Ke.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Zr={error:"UNKNOWN_ERROR"};function br(Ke){return ze.US.encodeString(JSON.stringify(Ke),!1)}function Kr(Ke){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,ye.Z)(function*(Ke,Ve=!1){const tt=Ke.app;Cn(tt);const yt=ke(tt);let vn,Pt=yt.token;if(Pt&&!Ye(Pt)&&(yt.token=void 0,Pt=void 0),!Pt){const Er=yield yt.cachedTokenPromise;Er&&(Ye(Er)?Pt=Er:yield Gt(tt,void 0))}if(!Ve&&Pt&&Ye(Pt))return{token:Pt.token};let Un,tr=!1;if(_i()){yt.exchangeTokenPromise||(yt.exchangeTokenPromise=Mr(Br(tt,yield qn()),Ke.heartbeatServiceProvider).finally(()=>{yt.exchangeTokenPromise=void 0}),tr=!0);const Er=yield yt.exchangeTokenPromise;return yield Gt(tt,Er),yt.token=Er,{token:Er.token}}try{yt.exchangeTokenPromise||(yt.exchangeTokenPromise=yt.provider.getToken().finally(()=>{yt.exchangeTokenPromise=void 0}),tr=!0),Pt=yield ke(tt).exchangeTokenPromise}catch(Er){"appCheck/throttled"===Er.code?yn.warn(Er.message):yn.error(Er),vn=Er}return Pt?vn?Un=Ye(Pt)?{token:Pt.token,internalError:vn}:Mt(vn):(Un={token:Pt.token},yt.token=Pt,yield Gt(tt,Pt)):Un=Mt(vn),tr&&lt(tt,Un),Un})).apply(this,arguments)}function Oe(Ke,Ve){const tt=ke(Ke),yt=tt.tokenObservers.filter(Pt=>Pt.next!==Ve);0===yt.length&&tt.tokenRefresher&&tt.tokenRefresher.isRunning()&&tt.tokenRefresher.stop(),tt.tokenObservers=yt}function Ae(Ke){const{app:Ve}=Ke,tt=ke(Ve);let yt=tt.tokenRefresher;yt||(yt=function Be(Ke){const{app:Ve}=Ke;return new Nn((0,ye.Z)(function*(){let yt;if(yt=ke(Ve).token?yield Kr(Ke,!0):yield Kr(Ke),yt.error)throw yt.error;if(yt.internalError)throw yt.internalError}),()=>!0,()=>{const tt=ke(Ve);if(tt.token){let yt=tt.token.issuedAtTimeMillis+.5*(tt.token.expireTimeMillis-tt.token.issuedAtTimeMillis)+3e5;return yt=Math.min(yt,tt.token.expireTimeMillis-3e5),Math.max(0,yt-Date.now())}return 0},3e4,96e4)}(Ke),tt.tokenRefresher=yt),!yt.isRunning()&&tt.isTokenAutoRefreshEnabled&&yt.start()}function lt(Ke,Ve){const tt=ke(Ke).tokenObservers;for(const yt of tt)try{"EXTERNAL"===yt.type&&null!=Ve.error?yt.error(Ve.error):yt.next(Ve)}catch{}}function Ye(Ke){return Ke.expireTimeMillis-Date.now()>0}function Mt(Ke){return{token:br(Zr),error:Ke}}class fn{constructor(Ve,tt){this.app=Ve,this.heartbeatServiceProvider=tt}_delete(){const{tokenObservers:Ve}=ke(this.app);for(const tt of Ve)Oe(this.app,tt.next);return Promise.resolve()}}const hr="app-check-internal";!function Di(){(0,te._registerComponent)(new ce.wA("app-check",Ke=>function Sn(Ke,Ve){return new fn(Ke,Ve)}(Ke.getProvider("app").getImmediate(),Ke.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ke,Ve,tt)=>{Ke.getProvider(hr).initialize()})),(0,te._registerComponent)(new ce.wA(hr,Ke=>function or(Ke){return{getToken:Ve=>Kr(Ke,Ve),addTokenListener:Ve=>function ui(Ke,Ve,tt,yt){const{app:Pt}=Ke,vn=ke(Pt);if(vn.tokenObservers=[...vn.tokenObservers,{next:tt,error:yt,type:Ve}],vn.token&&Ye(vn.token)){const Un=vn.token;Promise.resolve().then(()=>{tt({token:Un.token}),Ae(Ke)}).catch(()=>{})}vn.cachedTokenPromise.then(()=>Ae(Ke))}(Ke,"INTERNAL",Ve),removeTokenListener:Ve=>Oe(Ke.app,Ve)}}(Ke.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)("@firebase/app-check","0.7.0")}();class js{constructor(){return(0,g.vb)("app-check")}}typeof window<"u"&&window},3385:(Bt,Re,j)=>{"use strict";j.d(Re,{zQ:()=>ke,ww:()=>ot,rT:()=>et,f7:()=>Ne,L6:()=>ce,_Q:()=>ze,lh:()=>Fe,Qv:()=>te,nw:()=>be});var g=j(4650),x=j(7579),S=j(9646),z=j(9751),N=j(8996),O=j(6451),K=j(5363),G=j(3900),B=j(4004),U=j(4782),F=j(590),H=j(576);function he(Qe,Et){return(0,H.m)(Et)?(0,G.w)(()=>Qe,Et):(0,G.w)(()=>Qe)}var se=j(9468),fe=j(9300),Ie=j(4976),ve=j(2011),de=j(6895),ae=j(6217),je=j(9260);const te=new g.OlP("angularfire2.auth.use-emulator"),ce=new g.OlP("angularfire2.auth.settings"),ze=new g.OlP("angularfire2.auth.tenant-id"),et=new g.OlP("angularfire2.auth.langugage-code"),Fe=new g.OlP("angularfire2.auth.use-device-language"),Ne=new g.OlP("angularfire.auth.persistence"),be=(Qe,Et,Dt,un,Ln,Dn,St,Nn)=>(0,ve.cc)(`${Qe.name}.auth`,"AngularFireAuth",Qe.name,()=>{const On=Et.runOutsideAngular(()=>Qe.auth());if(Dt&&On.useEmulator(...Dt),un&&(On.tenantId=un),On.languageCode=Ln,Dn&&On.useDeviceLanguage(),St)for(const[rn,wt]of Object.entries(St))On.settings[rn]=wt;return Nn&&On.setPersistence(Nn),On},[Dt,un,Ln,Dn,St,Nn]);let ke=(()=>{class Qe{constructor(Dt,un,Ln,Dn,St,Nn,On,rn,wt,Wn,Cn,cr){const Xn=new x.x,Mr=(0,S.of)(void 0).pipe((0,K.Q)(St.outsideAngular),(0,G.w)(()=>Dn.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,2644)))),(0,B.U)(()=>(0,ve.on)(Dt,Dn,un)),(0,B.U)(Ir=>be(Ir,Dn,Nn,rn,wt,Wn,On,Cn)),(0,U.d)({bufferSize:1,refCount:!1}));if((0,de.PM)(Ln))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,S.of)(null);else{Mr.pipe((0,F.P)()).subscribe();const ki=Mr.pipe((0,G.w)(Pn=>Pn.getRedirectResult().then(zn=>zn,()=>null)),Ie.iC,(0,U.d)({bufferSize:1,refCount:!1})),gr=Mr.pipe((0,G.w)(Pn=>new z.y(zn=>({unsubscribe:Dn.runOutsideAngular(()=>Pn.onAuthStateChanged(dr=>zn.next(dr),dr=>zn.error(dr),()=>zn.complete()))})))),Br=Mr.pipe((0,G.w)(Pn=>new z.y(zn=>({unsubscribe:Dn.runOutsideAngular(()=>Pn.onIdTokenChanged(dr=>zn.next(dr),dr=>zn.error(dr),()=>zn.complete()))}))));this.authState=ki.pipe(he(gr),(0,se.R)(St.outsideAngular),(0,K.Q)(St.insideAngular)),this.user=ki.pipe(he(Br),(0,se.R)(St.outsideAngular),(0,K.Q)(St.insideAngular)),this.idToken=this.user.pipe((0,G.w)(Pn=>Pn?(0,N.D)(Pn.getIdToken()):(0,S.of)(null))),this.idTokenResult=this.user.pipe((0,G.w)(Pn=>Pn?(0,N.D)(Pn.getIdTokenResult()):(0,S.of)(null))),this.credential=(0,O.T)(ki,Xn,this.authState.pipe((0,fe.h)(Pn=>!Pn))).pipe((0,B.U)(Pn=>Pn?.user?Pn:null),(0,se.R)(St.outsideAngular),(0,K.Q)(St.insideAngular))}return(0,ve.pX)(this,Mr,Dn,{spy:{apply:(Ir,ki,gr)=>{(Ir.startsWith("signIn")||Ir.startsWith("createUser"))&&gr.then(Br=>Xn.next(Br))}}})}}return Qe.\u0275fac=function(Dt){return new(Dt||Qe)(g.LFG(ve.Dh),g.LFG(ve.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ie.HU),g.LFG(te,8),g.LFG(ce,8),g.LFG(ze,8),g.LFG(et,8),g.LFG(Fe,8),g.LFG(Ne,8),g.LFG(ae.nm,8))},Qe.\u0275prov=g.Yz7({token:Qe,factory:Qe.\u0275fac,providedIn:"any"}),Qe})(),ot=(()=>{class Qe{constructor(){je.Z.registerVersion("angularfire",Ie.q4.full,"auth-compat")}}return Qe.\u0275fac=function(Dt){return new(Dt||Qe)},Qe.\u0275mod=g.oAB({type:Qe}),Qe.\u0275inj=g.cJS({providers:[ke]}),Qe})()},1762:(Bt,Re,j)=>{"use strict";j.d(Re,{ST:()=>km,yb:()=>Lm,L6:()=>jv});var g=j(4650),x=j(4986),S=j(9751),z=j(8996),N=j(9646),O=j(4976),K=j(8675),G=j(4482),B=j(5403);function U(){return(0,G.e)((r,e)=>{let t,s=!1;r.subscribe((0,B.x)(e,a=>{const l=t;t=a,s&&e.next([l,a]),s=!0}))})}var Fe,F=j(4004),H=j(5026),he=j(1884),se=j(9300),fe=j(2011),Ie=j(6895),de=(j(2644),j(3942)),ae=j(5861),je=j(6881),ye=j(4859),te=j(1877),ce=j(2090),ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},et={},Ne=Ne||{},be=ze||self;function ke(){}function ot(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Qe(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Dt="closure_uid_"+(1e9*Math.random()>>>0),un=0;function Ln(r,e,t){return r.call.apply(r.bind,arguments)}function Dn(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function St(r,e,t){return(St=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ln:Dn).apply(null,arguments)}function Nn(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function On(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,l){for(var p=Array(arguments.length-2),D=2;D<arguments.length;D++)p[D-2]=arguments[D];return e.prototype[a].apply(s,p)}}function rn(){this.s=this.s,this.o=this.o}rn.prototype.s=!1,rn.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function Et(r){Object.prototype.hasOwnProperty.call(r,Dt)&&r[Dt]||(r[Dt]=++un)}(this)},rn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wn=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Cn(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function cr(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(ot(s)){const a=r.length||0,l=s.length||0;r.length=a+l;for(let p=0;p<l;p++)r[a+p]=s[p]}else r.push(s)}}function Xn(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}Xn.prototype.h=function(){this.defaultPrevented=!0};var Mr=function(){if(!be.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{be.addEventListener("test",ke,e),be.removeEventListener("test",ke,e)}catch{}return r}();function Ir(r){return/^[\s\xa0]*$/.test(r)}var ki=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function gr(r,e){return r<e?-1:r>e?1:0}function Br(){var r=be.navigator;return r&&(r=r.userAgent)?r:""}function Pn(r){return-1!=Br().indexOf(r)}function zn(r){return zn[" "](r),r}function dr(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}zn[" "]=ke;var mr,r,jt=Pn("Opera"),Vr=Pn("Trident")||Pn("MSIE"),ri=Pn("Edge"),jr=ri||Vr,fs=Pn("Gecko")&&!(-1!=Br().toLowerCase().indexOf("webkit")&&!Pn("Edge"))&&!(Pn("Trident")||Pn("MSIE"))&&!Pn("Edge"),Li=-1!=Br().toLowerCase().indexOf("webkit")&&!Pn("Edge");function oi(){var r=be.document;return r?r.documentMode:void 0}e:{var Bn="",Wt=(r=Br(),fs?/rv:([^\);]+)(\)|;)/.exec(r):ri?/Edge\/([\d\.]+)/.exec(r):Vr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Li?/WebKit\/(\S+)/.exec(r):jt?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(Wt&&(Bn=Wt?Wt[1]:""),Vr){var on=oi();if(null!=on&&on>parseFloat(Bn)){mr=String(on);break e}}mr=Bn}var Yn={},Gt=be.document&&Vr&&(oi()||parseInt(mr,10))||void 0;function Dr(r,e){if(Xn.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(fs){e:{try{zn(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Vn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Dr.$.h.call(this)}}On(Dr,Xn);var Vn={2:"touch",3:"pen",4:"mouse"};Dr.prototype.h=function(){Dr.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var _i="closure_listenable_"+(1e6*Math.random()|0),qn=0;function Pr(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++qn,this.fa=this.ia=!1}function Cr(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Zr(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function br(r){const e={};for(const t in r)e[t]=r[t];return e}const Kr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hr(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let l=0;l<Kr.length;l++)t=Kr[l],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function sr(r){this.src=r,this.g={},this.h=0}function ai(r,e){var t=e.type;if(t in r.g){var l,s=r.g[t],a=Wn(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(Cr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function ui(r,e,t,s){for(var a=0;a<r.length;++a){var l=r[a];if(!l.fa&&l.listener==e&&l.capture==!!t&&l.la==s)return a}return-1}sr.prototype.add=function(r,e,t,s,a){var l=r.toString();(r=this.g[l])||(r=this.g[l]=[],this.h++);var p=ui(r,e,s,a);return-1<p?(e=r[p],t||(e.ia=!1)):((e=new Pr(e,this.src,l,!!s,a)).ia=t,r.push(e)),e};var Oe="closure_lm_"+(1e6*Math.random()|0),Ae={};function Be(r,e,t,s,a){if(s&&s.once)return Mt(r,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Be(r,e[l],t,s,a);return null}return t=Ge(t),r&&r[_i]?r.O(e,t,Qe(s)?!!s.capture:!!s,a):lt(r,e,t,!1,s,a)}function lt(r,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=Qe(a)?!!a.capture:!!a,D=De(r);if(D||(r[Oe]=D=new sr(r)),(t=D.add(e,t,s,p,l)).proxy)return t;if(s=function Ye(){const e=Ce;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Mr||(a=p),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(or(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function Mt(r,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Mt(r,e[l],t,s,a);return null}return t=Ge(t),r&&r[_i]?r.P(e,t,Qe(s)?!!s.capture:!!s,a):lt(r,e,t,!0,s,a)}function fn(r,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)fn(r,e[l],t,s,a);else s=Qe(s)?!!s.capture:!!s,t=Ge(t),r&&r[_i]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=ui(l=r.g[e],t,s,a))&&(Cr(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete r.g[e],r.h--))):r&&(r=De(r))&&(e=r.g[e.toString()],r=-1,e&&(r=ui(e,t,s,a)),(t=-1<r?e[r]:null)&&Sn(t))}function Sn(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[_i])ai(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(or(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=De(e))?(ai(t,r),0==t.h&&(t.src=null,e[Oe]=null)):Cr(r)}}}function or(r){return r in Ae?Ae[r]:Ae[r]="on"+r}function Ce(r,e){if(r.fa)r=!0;else{e=new Dr(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Sn(r),r=t.call(s,e)}return r}function De(r){return(r=r[Oe])instanceof sr?r:null}var me="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(r){return"function"==typeof r?r:(r[me]||(r[me]=function(e){return r.handleEvent(e)}),r[me])}function ht(){rn.call(this),this.i=new sr(this),this.S=this,this.J=null}function kt(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new Xn(e,r);else if(e instanceof Xn)e.target=e.target||r;else{var a=e;Hr(e=new Xn(s,r),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=ln(p,s,!0,e)&&a}if(a=ln(p=e.g=r,s,!0,e)&&a,a=ln(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=ln(p=e.g=t[l],s,!1,e)&&a}function ln(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.fa&&p.capture==t){var D=p.listener,$=p.la||p.src;p.ia&&ai(r.i,p),a=!1!==D.call($,s)&&a}}return a&&!s.defaultPrevented}On(ht,rn),ht.prototype[_i]=!0,ht.prototype.removeEventListener=function(r,e,t,s){fn(this,r,e,t,s)},ht.prototype.N=function(){if(ht.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)Cr(t[s]);delete r.g[e],r.h--}}this.J=null},ht.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},ht.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Je=be.JSON.stringify;function Ze(){var r=Ri;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var xr,Ct=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new Jt,r=>r.reset());class Jt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function An(r){be.setTimeout(()=>{throw r},0)}function er(r,e){xr||function Fn(){var r=be.Promise.resolve(void 0);xr=function(){r.then(Xi)}}(),Ti||(xr(),Ti=!0),Ri.add(r,e)}var Ti=!1,Ri=new class bt{constructor(){this.h=this.g=null}add(e,t){const s=Ct.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Xi(){for(var r;r=Ze();){try{r.h.call(r.g)}catch(t){An(t)}var e=Ct;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Ti=!1}function Us(r,e){ht.call(this),this.h=r||1,this.g=e||be,this.j=St(this.qb,this),this.l=Date.now()}function Bs(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function Kn(r,e,t){if("function"==typeof r)t&&(r=St(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=St(r.handleEvent,r)}return 2147483647<Number(e)?-1:be.setTimeout(r,e||0)}function Ei(r){r.g=Kn(()=>{r.g=null,r.i&&(r.i=!1,Ei(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}On(Us,ht),(Fe=Us.prototype).ga=!1,Fe.T=null,Fe.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),kt(this,"tick"),this.ga&&(Bs(this),this.start()))}},Fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fe.N=function(){Us.$.N.call(this),Bs(this),delete this.g};class Vs extends rn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ei(this)}N(){super.N(),this.g&&(be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(r){rn.call(this),this.h=r,this.g={}}On(ps,rn);var po=[];function hr(r,e,t,s){Array.isArray(t)||(t&&(po[0]=t.toString()),t=po);for(var a=0;a<t.length;a++){var l=Be(e,t[a],s||r.handleEvent,!1,r.h||r);if(!l)break;r.g[l.key]=l}}function Di(r){Zr(r.g,function(e,t){this.g.hasOwnProperty(t)&&Sn(e)},r),r.g={}}function rs(){this.g=!0}function Qr(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Js(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return Je(t)}catch{return e}}(r,t)+(s?" "+s:"")})}ps.prototype.N=function(){ps.$.N.call(this),Di(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rs.prototype.Ea=function(){this.g=!1},rs.prototype.info=function(){};var Mi={},is=null;function Nr(){return is=is||new ht}function ws(r){Xn.call(this,Mi.Ta,r)}function go(r){const e=Nr();kt(e,new ws(e))}function $o(r,e){Xn.call(this,Mi.STAT_EVENT,r),this.stat=e}function Fi(r){const e=Nr();kt(e,new $o(e,r))}function ea(r,e){Xn.call(this,Mi.Ua,r),this.size=e}function ar(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return be.setTimeout(function(){r()},e)}Mi.Ta="serverreachability",On(ws,Xn),Mi.STAT_EVENT="statevent",On($o,Xn),Mi.Ua="timingevent",On(ea,Xn);var Xs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ho={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $s(){}function Ve(){}$s.prototype.h=null;var vn,tt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yt(){Xn.call(this,"d")}function Pt(){Xn.call(this,"c")}function tr(){}function Un(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new ps(this),this.P=eo,this.V=new Us(r=jr?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Er}function Er(){this.i=null,this.g="",this.h=!1}On(yt,Xn),On(Pt,Xn),On(tr,$s),tr.prototype.g=function(){return new XMLHttpRequest},tr.prototype.i=function(){return{}},vn=new tr;var eo=45e3,Is={},Ui={};function oo(r,e,t){r.L=1,r.v=Pi(Ss(e)),r.s=t,r.S=!0,gs(r,null)}function gs(r,e){r.G=Date.now(),Ds(r),r.A=Ss(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),ao(t.i,"t",s),r.C=0,t=r.l.I,r.h=new Er,r.g=Le(r.l,t?e:null,!r.s),0<r.O&&(r.M=new Vs(St(r.Pa,r,r.g),r.O)),hr(r.U,r.g,"readystatechange",r.nb),e=r.I?br(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),go(),function jn(r,e,t,s,a,l){r.info(function(){if(r.g)if(l)for(var p="",D=l.split("&"),$=0;$<D.length;$++){var J=D[$].split("=");if(1<J.length){var le=J[0];J=J[1];var Me=le.split("_");p=2<=Me.length&&"type"==Me[1]?p+(le+"=")+J+"&":p+(le+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(r.j,r.u,r.A,r.m,r.W,r.s)}function bs(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function zo(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=Ts(r,t),a==Ui){4==e&&(r.o=4,Fi(14),s=!1),Qr(r.j,r.m,null,"[Incomplete Response]");break}if(a==Is){r.o=4,Fi(15),Qr(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}Qr(r.j,r.m,a,null),Go(r,a)}bs(r)&&a!=Ui&&a!=Is&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,Fi(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),lr(e),e.L=!0,Fi(11))):(Qr(r.j,r.m,t,"[Invalid Chunked Response]"),vo(r),Cs(r))}function Ts(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?Ui:(t=Number(e.substring(t,s)),isNaN(t)?Is:(s+=1)+t>e.length?Ui:(e=e.substr(s,t),r.C=s+t,e))}function Ds(r){r.Y=Date.now()+r.P,mo(r,r.P)}function mo(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=ar(St(r.lb,r),e)}function yo(r){r.B&&(be.clearTimeout(r.B),r.B=null)}function Cs(r){0==r.l.H||r.J||w(r.l,r)}function vo(r){yo(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,Bs(r.V),Di(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function Go(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||Tt(t.h,r)))if(!r.K&&Tt(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;y(t),R(t)}fr(t),Fi(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.M&&0==t.A&&!t.v&&(t.v=ar(St(t.ib,t),6e3));if(1>=ro(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else ne(t,11)}else if((r.K||t.g==r)&&y(t),!Ir(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let J=a[e];if(t.V=J[0],J=J[1],2==t.H)if("c"==J[0]){t.J=J[1],t.oa=J[2];const le=J[3];null!=le&&(t.qa=le,t.j.info("VER="+t.qa));const Me=J[4];null!=Me&&(t.Ga=Me,t.j.info("SVER="+t.Ga));const at=J[5];null!=at&&"number"==typeof at&&0<at&&(t.K=s=1.5*at,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const _t=r.g;if(_t){const Ut=_t.g?_t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ut){var l=s.h;l.g||-1==Ut.indexOf("spdy")&&-1==Ut.indexOf("quic")&&-1==Ut.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(Mn(l,l.h),l.h=null))}if(s.F){const Xt=_t.g?_t.g.getResponseHeader("X-HTTP-Session-Id"):null;Xt&&(s.Da=Xt,Gr(s.G,s.F,Xt))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var p=r;if((s=t).wa=Pe(s,s.I?s.oa:null,s.Y),p.K){na(s.h,p);var D=p,$=s.K;$&&D.setTimeout($),D.B&&(yo(D),Ds(D)),s.g=p}else Yt(s);0<t.i.length&&k(t)}else"stop"!=J[0]&&"close"!=J[0]||ne(t,7);else 3==t.H&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?ne(t,7):ts(t):"noop"!=J[0]&&t.l&&t.l.Aa(J),t.A=0)}go()}catch{}}function Ci(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(ot(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function Ea(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(ot(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function Wo(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(ot(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],r)}(Fe=Un.prototype).setTimeout=function(r){this.P=r},Fe.nb=function(r){r=r.target;const e=this.M;e&&3==kr(r)?e.l():this.Pa(r)},Fe.Pa=function(r){try{if(r==this.g)e:{const le=kr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>le)&&(3!=le||jr||this.g&&(this.h.h||this.g.ja()||Xr(this.g)))){this.J||4!=le||7==e||go(),yo(this);var t=this.g.da();this.aa=t;t:if(bs(this)){var s=Xr(this.g);r="";var a=s.length,l=4==kr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vo(this),Cs(this);var p="";break t}this.h.i=new be.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,p=this.h.g}else p=this.g.ja();if(this.i=200==t,function js(r,e,t,s,a,l,p){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.W,le,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var D,$=this.g;if((D=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ir(D)){var J=D;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,Fi(12),vo(this),Cs(this);break e}Qr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,t)}this.S?(zo(this,le,p),jr&&this.i&&3==le&&(hr(this.U,this.V,"tick",this.mb),this.V.start())):(Qr(this.j,this.m,p,null),Go(this,p)),4==le&&vo(this),this.i&&!this.J&&(4==le?w(this.l,this):(this.i=!1,Ds(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Fi(12)):(this.o=0,Fi(13)),vo(this),Cs(this)}}}catch{}},Fe.mb=function(){if(this.g){var r=kr(this.g),e=this.g.ja();this.C<e.length&&(yo(this),zo(this,r,e),this.i&&4!=r&&Ds(this))}},Fe.cancel=function(){this.J=!0,vo(this)},Fe.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function li(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(go(),Fi(17)),vo(this),this.o=2,Cs(this)):mo(this,this.Y-r)};var Si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ps(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ps){this.h=void 0!==e?e:r.h,wa(this,r.j),this.s=r.s,this.g=r.g,zr(this,r.m),this.l=r.l,e=r.i;var t=new Ai;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fi(this,t),this.o=r.o}else r&&(t=String(r).match(Si))?(this.h=!!e,wa(this,t[1]||"",!0),this.s=zi(t[2]||""),this.g=zi(t[3]||"",!0),zr(this,t[4]),this.l=zi(t[5]||"",!0),fi(this,t[6]||"",!0),this.o=zi(t[7]||"")):(this.h=!!e,this.i=new Ai(null,this.h))}function Ss(r){return new Ps(r)}function wa(r,e,t){r.j=t?zi(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function zr(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function fi(r,e,t){e instanceof Ai?(r.i=e,function Ao(r,e){e&&!r.j&&(Bi(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Vi(this,s),ao(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=qo(e,es)),r.i=new Ai(e,r.h))}function Gr(r,e,t){r.i.set(e,t)}function Pi(r){return Gr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function zi(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function qo(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,So),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function So(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Ps.prototype.toString=function(){var r=[],e=this.j;e&&r.push(qo(e,to,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(qo(e,to,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(qo(t,"/"==t.charAt(0)?Ma:nr,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",qo(t,wi)),r.join("")};var to=/[#\/\?@]/g,nr=/[#\?:]/g,Ma=/[#\?]/g,es=/[#\?@]/g,wi=/#/g;function Ai(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Bi(r){r.g||(r.g=new Map,r.h=0,r.i&&function ta(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var l=r[t].substring(0,s);a=r[t].substring(s+1)}else l=r[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Vi(r,e){Bi(r),e=no(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function gn(r,e){return Bi(r),e=no(r,e),r.g.has(e)}function ao(r,e,t){Vi(r,e),0<t.length&&(r.i=null,r.g.set(no(r,e),Cn(t)),r.h+=t.length)}function no(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function uo(r){this.l=r||Hs,r=be.PerformanceNavigationTiming?0<(r=be.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(be.g&&be.g.Ka&&be.g.Ka()&&be.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Fe=Ai.prototype).add=function(r,e){Bi(this),this.i=null,r=no(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Fe.forEach=function(r,e){Bi(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},Fe.sa=function(){Bi(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let l=0;l<a.length;l++)t.push(e[s])}return t},Fe.Z=function(r){Bi(this);let e=[];if("string"==typeof r)gn(this,r)&&(e=e.concat(this.g.get(no(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},Fe.set=function(r,e){return Bi(this),this.i=null,gn(this,r=no(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Fe.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},Fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const l=encodeURIComponent(String(s)),p=this.Z(s);for(s=0;s<p.length;s++){var a=l;""!==p[s]&&(a+="="+encodeURIComponent(String(p[s]))),r.push(a)}}return this.i=r.join("&")};var Hs=10;function Ki(r){return!!r.h||!!r.g&&r.g.size>=r.j}function ro(r){return r.h?1:r.g?r.g.size:0}function Tt(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Mn(r,e){r.g?r.g.add(e):r.h=e}function na(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Ko(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Cn(r.i)}function Yr(){}function ra(){this.g=new Yr}function xo(r,e,t){const s=t||"";try{Ci(r,function(a,l){let p=a;Qe(a)&&(p=Je(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Z(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function W(r){this.l=r.fc||null,this.j=r.ob||!1}function pe(r,e){ht.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=xe,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}uo.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},Yr.prototype.stringify=function(r){return be.JSON.stringify(r,void 0)},Yr.prototype.parse=function(r){return be.JSON.parse(r,void 0)},On(W,$s),W.prototype.g=function(){return new pe(this.l,this.j)},W.prototype.i=function(r){return function(){return r}}({}),On(pe,ht);var xe=0;function We(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function dt(r){r.readyState=4,r.l=null,r.j=null,r.A=null,vt(r)}function vt(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Fe=pe.prototype).open=function(r,e){if(this.readyState!=xe)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,vt(this)},Fe.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||be).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dt(this)),this.readyState=xe},Fe.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,vt(this)),this.g&&(this.readyState=3,vt(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof be.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;We(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},Fe.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?dt(this):vt(this),3==this.readyState&&We(this)}},Fe.Za=function(r){this.g&&(this.response=this.responseText=r,dt(this))},Fe.Ya=function(r){this.g&&(this.response=r,dt(this))},Fe.ka=function(){this.g&&dt(this)},Fe.setRequestHeader=function(r,e){this.v.append(r,e)},Fe.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Fe.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(pe.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var qt=be.JSON.parse;function Rt(r){ht.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=In,this.L=this.M=!1}On(Rt,ht);var In="",kn=/^https?$/i,pi=["POST","PUT"];function Jr(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Wr(r),Or(r)}function Wr(r){r.F||(r.F=!0,kt(r,"complete"),kt(r,"error"))}function ss(r){if(r.h&&typeof Ne<"u"&&(!r.C[1]||4!=kr(r)||2!=r.da()))if(r.v&&4==kr(r))Kn(r.La,0,r);else if(kt(r,"readystatechange"),4==kr(r)){r.h=!1;try{const D=r.da();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===D){var a=String(r.I).match(Si)[1]||null;if(!a&&be.self&&be.self.location){var l=be.self.location.protocol;a=l.substr(0,l.length-1)}s=!kn.test(a?a.toLowerCase():"")}t=s}if(t)kt(r,"complete"),kt(r,"success");else{r.m=6;try{var p=2<kr(r)?r.g.statusText:""}catch{p=""}r.j=p+" ["+r.da()+"]",Wr(r)}}finally{Or(r)}}}function Or(r,e){if(r.g){zs(r);const t=r.g,s=r.C[0]?ke:null;r.g=null,r.C=null,e||kt(r,"ready");try{t.onreadystatechange=s}catch{}}}function zs(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(be.clearTimeout(r.A),r.A=null)}function kr(r){return r.g?r.g.readyState:0}function Xr(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case In:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function gi(r){let e="";return Zr(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Gs(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=gi(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):Gr(r,e,t))}function os(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function Ro(r){this.Ga=0,this.i=[],this.j=new rs,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=os("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=os("baseRetryDelayMs",5e3,r),this.hb=os("retryDelaySeedMs",1e4,r),this.eb=os("forwardChannelMaxRetries",2,r),this.xa=os("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new uo(r&&r.concurrentRequestLimit),this.Ja=new ra,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function ts(r){if(ee(r),3==r.H){var e=r.W++,t=Ss(r.G);Gr(t,"SID",r.J),Gr(t,"RID",e),Gr(t,"TYPE","terminate"),ut(r,t),(e=new Un(r,r.j,e,void 0)).L=2,e.v=Pi(Ss(t)),t=!1,be.navigator&&be.navigator.sendBeacon&&(t=be.navigator.sendBeacon(e.v.toString(),"")),!t&&be.Image&&((new Image).src=e.v,t=!0),t||(e.g=Le(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ds(e)}ge(r)}function R(r){r.g&&(lr(r),r.g.cancel(),r.g=null)}function ee(r){R(r),r.u&&(be.clearTimeout(r.u),r.u=null),y(r),r.h.cancel(),r.m&&("number"==typeof r.m&&be.clearTimeout(r.m),r.m=null)}function k(r){Ki(r.h)||r.m||(r.m=!0,er(r.Na,r),r.C=0)}function Te(r,e){var t;t=e?e.m:r.W++;const s=Ss(r.G);Gr(s,"SID",r.J),Gr(s,"RID",t),Gr(s,"AID",r.V),ut(r,s),r.o&&r.s&&Gs(s,r.o,r.s),t=new Un(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=ft(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Mn(r.h,t),oo(t,s,e)}function ut(r,e){r.ma&&Zr(r.ma,function(t,s){Gr(e,s,t)}),r.l&&Ci({},function(t,s){Gr(e,s,t)})}function ft(r,e,t){t=Math.min(r.i.length,t);var s=r.l?St(r.l.Va,r.l,r):null;e:{var a=r.i;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let D=!0;for(let $=0;$<t;$++){let J=a[$].h;const le=a[$].g;if(J-=l,0>J)l=Math.max(0,a[$].h-100),D=!1;else try{xo(le,p,"req"+J+"_")}catch{s&&s(le)}}if(D){s=p.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function Yt(r){r.g||r.u||(r.ba=1,er(r.Ma,r),r.A=0)}function fr(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=ar(St(r.Ma,r),L(r,r.A)),r.A++,0))}function lr(r){null!=r.B&&(be.clearTimeout(r.B),r.B=null)}function Y(r){r.g=new Un(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=Ss(r.wa);Gr(e,"RID","rpc"),Gr(e,"SID",r.J),Gr(e,"CI",r.M?"0":"1"),Gr(e,"AID",r.V),Gr(e,"TYPE","xmlhttp"),ut(r,e),r.o&&r.s&&Gs(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=Pi(Ss(e)),t.s=null,t.S=!0,gs(t,r)}function y(r){null!=r.v&&(be.clearTimeout(r.v),r.v=null)}function w(r,e){var t=null;if(r.g==e){y(r),lr(r),r.g=null;var s=2}else{if(!Tt(r.h,e))return;t=e.F,na(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;kt(s=Nr(),new ea(s,t)),k(r)}else Yt(r);else if(3==(a=e.o)||0==a&&0<r.ta||!(1==s&&function re(r,e){return!(ro(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=ar(St(r.Na,r,e),L(r,r.C)),r.C++,0)))}(r,e)||2==s&&fr(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),a){case 1:ne(r,5);break;case 4:ne(r,10);break;case 3:ne(r,6);break;default:ne(r,2)}}function L(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function ne(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=St(r.pb,r);t||(t=new Ps("//www.google.com/images/cleardot.gif"),be.location&&"http"==be.location.protocol||wa(t,"https"),Pi(t)),function ms(r,e){const t=new rs;if(be.Image){const s=new Image;s.onload=Nn(Z,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Nn(Z,t,s,"TestLoadImage: error",!1,e),s.onabort=Nn(Z,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Nn(Z,t,s,"TestLoadImage: timeout",!1,e),be.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else Fi(2);r.H=0,r.l&&r.l.za(e),ge(r),ee(r)}function ge(r){if(r.H=0,r.pa=[],r.l){const e=Ko(r.h);(0!=e.length||0!=r.i.length)&&(cr(r.pa,e),cr(r.pa,r.i),r.h.i.length=0,Cn(r.i),r.i.length=0),r.l.ya()}}function Pe(r,e,t){var s=t instanceof Ps?Ss(t):new Ps(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),zr(s,s.m);else{var a=be.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new Ps(null,void 0);s&&wa(l,s),e&&(l.g=e),a&&zr(l,a),t&&(l.l=t),s=l}return e=r.Da,(t=r.F)&&e&&Gr(s,t,e),Gr(s,"VER",r.qa),ut(r,s),s}function Le(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rt(t&&r.Ha&&!r.va?new W({ob:!0}):r.va)).Oa(r.I),e}function rt(){}function gt(){if(Vr&&!(10<=Number(Gt)))throw Error("Environmental error: no available transport.")}function Nt(r,e){ht.call(this),this.g=new Ro(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!Ir(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ir(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new bn(this)}function en(r){yt.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Gn(){Pt.call(this),this.status=1}function bn(r){this.g=r}function En(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function qr(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var l=r.g[3],p=(e=r.g[0])+(l^(t=r.g[1])&((a=r.g[2])^l))+s[0]+3614090360&4294967295;p=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=t+(p<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^t&(a^l))+s[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^t&(a^l))+s[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^t&(a^l))+s[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(a^l&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^l&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^l&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^l&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(t^a^l)+s[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^l)+s[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^l)+s[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^l)+s[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(a^(t|~l))+s[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(l|~t))+s[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=t+(l^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~l))+s[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(l|~t))+s[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=t+(l^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~l))+s[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(l|~t))+s[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=t+(l^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((l=(e=t+((p=e+(a^(t|~l))+s[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((a=l+((p=a+(e^(l|~t))+s[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(p<<21&4294967295|p>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+l&4294967295}function xn(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var l=0|r[a];s&&l==e||(t[a]=l,s=!1)}this.g=t}(Fe=Rt.prototype).Oa=function(r){this.M=r},Fe.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vn.g(),this.C=function Ke(r){return r.h||(r.h=r.i())}(this.u?this.u:vn),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(l){return void Jr(this,l)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())t.set(l,s.get(l))}s=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=be.FormData&&r instanceof be.FormData,!(0<=Wn(pi,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,p]of t)this.g.setRequestHeader(l,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zs(this),0<this.B&&((this.L=function Sr(r){return Vr&&function yn(){return dr(Yn,9,function(){let r=0;const e=ki(String(mr)).split("."),t=ki("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==r&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;r=gr(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||gr(0==a[2].length,0==l[2].length)||gr(a[2],l[2]),a=a[3],l=l[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=Kn(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(l){Jr(this,l)}},Fe.ua=function(){typeof Ne<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))},Fe.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,kt(this,"complete"),kt(this,"abort"),Or(this))},Fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Or(this,!0)),Rt.$.N.call(this)},Fe.La=function(){this.s||(this.G||this.v||this.l?ss(this):this.kb())},Fe.kb=function(){ss(this)},Fe.da=function(){try{return 2<kr(this)?this.g.status:-1}catch{return-1}},Fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Fe.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),qt(e)}},Fe.Ia=function(){return this.m},Fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Fe=Ro.prototype).qa=8,Fe.H=1,Fe.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new Un(this,this.j,r,void 0);let l=this.s;if(this.U&&(l?(l=br(l),Hr(l,this.U)):l=this.U),null!==this.o||this.O||(a.I=l,l=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ft(this,a,e),Gr(t=Ss(this.G),"RID",r),Gr(t,"CVER",22),this.F&&Gr(t,"X-HTTP-Session-Id",this.F),ut(this,t),l&&(this.O?e="headers="+encodeURIComponent(String(gi(l)))+"&"+e:this.o&&Gs(t,this.o,l)),Mn(this.h,a),this.bb&&Gr(t,"TYPE","init"),this.P?(Gr(t,"$req",e),Gr(t,"SID","null"),a.ba=!0,oo(a,t,null)):oo(a,t,e),this.H=2}}else 3==this.H&&(r?Te(this,r):0==this.i.length||Ki(this.h)||Te(this))},Fe.Ma=function(){if(this.u=null,Y(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=ar(St(this.jb,this),r)}},Fe.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Fi(10),R(this),Y(this))},Fe.ib=function(){null!=this.v&&(this.v=null,R(this),fr(this),Fi(19))},Fe.pb=function(r){r?(this.j.info("Successfully pinged google.com"),Fi(2)):(this.j.info("Failed to ping google.com"),Fi(1))},(Fe=rt.prototype).Ba=function(){},Fe.Aa=function(){},Fe.za=function(){},Fe.ya=function(){},Fe.Va=function(){},gt.prototype.g=function(r,e){return new Nt(r,e)},On(Nt,ht),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;Fi(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=Pe(r,null,r.Y),k(r)},Nt.prototype.close=function(){ts(this.g)},Nt.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Je(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&k(e)},Nt.prototype.N=function(){this.g.l=null,delete this.j,ts(this.g),delete this.g,Nt.$.N.call(this)},On(en,yt),On(Gn,Pt),On(bn,rt),bn.prototype.Ba=function(){kt(this.g,"a")},bn.prototype.Aa=function(r){kt(this.g,new en(r))},bn.prototype.za=function(r){kt(this.g,new Gn)},bn.prototype.ya=function(){kt(this.g,"b")},On(En,function Rn(){this.blockSize=-1}),En.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},En.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,l=0;l<e;){if(0==a)for(;l<=t;)qr(this,r,l),l+=this.blockSize;if("string"==typeof r){for(;l<e;)if(s[a++]=r.charCodeAt(l++),a==this.blockSize){qr(this,s),a=0;break}}else for(;l<e;)if(s[a++]=r[l++],a==this.blockSize){qr(this,s),a=0;break}}this.h=a,this.i+=e},En.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var As={};function Zi(r){return-128<=r&&128>r?dr(As,r,function(e){return new xn([0|e],0>e?-1:0)}):new xn([0|r],0>r?-1:0)}function ci(r){if(isNaN(r)||!isFinite(r))return Gi;if(0>r)return ji(ci(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=Ws;return new xn(e,0)}var Ws=4294967296,Gi=Zi(0),as=Zi(1),Mo=Zi(16777216);function Qi(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Wi(r){return-1==r.h}function ji(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new xn(t,~r.h).add(as)}function Ns(r,e){return r.add(ji(e))}function qs(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function _o(r,e){this.g=r,this.h=e}function nn(r,e){if(Qi(e))throw Error("division by zero");if(Qi(r))return new _o(Gi,Gi);if(Wi(r))return e=nn(ji(r),e),new _o(ji(e.g),ji(e.h));if(Wi(e))return e=nn(r,ji(e)),new _o(ji(e.g),e.h);if(30<r.g.length){if(Wi(r)||Wi(e))throw Error("slowDivide_ only works with positive integers.");for(var t=as,s=e;0>=s.X(r);)t=wn(t),s=wn(s);var a=cn(t,1),l=cn(s,1);for(s=cn(s,2),t=cn(t,2);!Qi(s);){var p=l.add(s);0>=p.X(r)&&(a=a.add(t),l=p),s=cn(s,1),t=cn(t,1)}return e=Ns(r,a.R(e)),new _o(a,e)}for(a=Gi;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),p=(l=ci(t)).R(e);Wi(p)||0<p.X(r);)p=(l=ci(t-=s)).R(e);Qi(l)&&(l=as),a=a.add(l),r=Ns(r,p)}return new _o(a,r)}function wn(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new xn(t,r.h)}function cn(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],l=0;l<s;l++)a[l]=0<e?r.D(l+t)>>>e|r.D(l+t+1)<<32-e:r.D(l+t);return new xn(a,r.h)}(Fe=xn.prototype).ea=function(){if(Wi(this))return-ji(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:Ws+s)*e,e*=Ws}return r},Fe.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Qi(this))return"0";if(Wi(this))return"-"+ji(this).toString(r);for(var e=ci(Math.pow(r,6)),t=this,s="";;){var a=nn(t,e).g,l=((0<(t=Ns(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Qi(t=a))return l+s;for(;6>l.length;)l="0"+l;s=l+s}},Fe.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},Fe.X=function(r){return Wi(r=Ns(this,r))?-1:Qi(r)?0:1},Fe.abs=function(){return Wi(this)?ji(this):this},Fe.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var l=s+(65535&this.D(a))+(65535&r.D(a)),p=(l>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=p>>>16,t[a]=(p&=65535)<<16|(l&=65535)}return new xn(t,-2147483648&t[t.length-1]?-1:0)},Fe.R=function(r){if(Qi(this)||Qi(r))return Gi;if(Wi(this))return Wi(r)?ji(this).R(ji(r)):ji(ji(this).R(r));if(Wi(r))return ji(this.R(ji(r)));if(0>this.X(Mo)&&0>r.X(Mo))return ci(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var l=this.D(s)>>>16,p=65535&this.D(s),D=r.D(a)>>>16,$=65535&r.D(a);t[2*s+2*a]+=p*$,qs(t,2*s+2*a),t[2*s+2*a+1]+=l*$,qs(t,2*s+2*a+1),t[2*s+2*a+1]+=p*D,qs(t,2*s+2*a+1),t[2*s+2*a+2]+=l*D,qs(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new xn(t,0)},Fe.gb=function(r){return nn(this,r).h},Fe.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new xn(t,this.h&r.h)},Fe.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new xn(t,this.h|r.h)},Fe.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new xn(t,this.h^r.h)},gt.prototype.createWebChannel=gt.prototype.g,Nt.prototype.send=Nt.prototype.u,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Xs.NO_ERROR=0,Xs.TIMEOUT=8,Xs.HTTP_ERROR=6,Ho.COMPLETE="complete",Ve.EventType=tt,tt.OPEN="a",tt.CLOSE="b",tt.ERROR="c",tt.MESSAGE="d",ht.prototype.listen=ht.prototype.O,Rt.prototype.listenOnce=Rt.prototype.P,Rt.prototype.getLastError=Rt.prototype.Sa,Rt.prototype.getLastErrorCode=Rt.prototype.Ia,Rt.prototype.getStatus=Rt.prototype.da,Rt.prototype.getResponseJson=Rt.prototype.Wa,Rt.prototype.getResponseText=Rt.prototype.ja,Rt.prototype.send=Rt.prototype.ha,Rt.prototype.setWithCredentials=Rt.prototype.Oa,En.prototype.digest=En.prototype.l,En.prototype.reset=En.prototype.reset,En.prototype.update=En.prototype.j,xn.prototype.add=xn.prototype.add,xn.prototype.multiply=xn.prototype.R,xn.prototype.modulo=xn.prototype.gb,xn.prototype.compare=xn.prototype.X,xn.prototype.toNumber=xn.prototype.ea,xn.prototype.toString=xn.prototype.toString,xn.prototype.getBits=xn.prototype.D,xn.fromNumber=ci,xn.fromString=function ia(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return ji(ia(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ci(Math.pow(e,8)),s=Gi,a=0;a<r.length;a+=8){var l=Math.min(8,r.length-a),p=parseInt(r.substring(a,a+l),e);8>l?(l=ci(Math.pow(e,l)),s=s.R(l).add(ci(p))):s=(s=s.R(t)).add(ci(p))}return s};var ur=et.createWebChannelTransport=function(){return new gt},mi=et.getStatEventTarget=function(){return Nr()},Ks=et.ErrorCode=Xs,$i=et.EventType=Ho,Zs=et.Event=Mi,ii=et.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Pa=et.FetchXmlHttpFactory=W,Ia=et.WebChannel=Ve,ys=et.XhrIo=Rt,Po=et.Md5=En,yr=et.Integer=xn;const Ha="@firebase/firestore";class ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let No="9.22.0";const Os=new te.Yd("@firebase/firestore");function zu(){return Os.logLevel}function xt(r,...e){if(Os.logLevel<=te.in.DEBUG){const t=e.map(ru);Os.debug(`Firestore (${No}): ${r}`,...t)}}function vs(r,...e){if(Os.logLevel<=te.in.ERROR){const t=e.map(ru);Os.error(`Firestore (${No}): ${r}`,...t)}}function Lr(r,...e){if(Os.logLevel<=te.in.WARN){const t=e.map(ru);Os.warn(`Firestore (${No}): ${r}`,...t)}}function ru(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function tn(r="Unexpected state"){const e=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+r;throw vs(e),new Error(e)}function _n(r,e){r||tn()}function zt(r,e){return r}const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends ce.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ar{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class za{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ei.UNAUTHENTICATED))}shutdown(){}}class Ta{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ga{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=J=>this.i!==a?(a=this.i,t(J)):Promise.resolve();let p=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Ar,e.enqueueRetryable(()=>l(this.currentUser))};const D=()=>{const J=p;e.enqueueRetryable((0,ae.Z)(function*(){yield J.promise,yield l(s.currentUser)}))},$=J=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(J=>$(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?$(J):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Ar)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(_n("string"==typeof s.accessToken),new za(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _n(null===e||"string"==typeof e),new ei(e)}}class Ii{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=ei.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class dl{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Ii(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=l=>{null!=l.error&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.T;return this.T=l.token,xt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?a(l):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_n("string"==typeof t.token),this.T=t.token,new iu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Xl(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class su{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Xl(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Jn(r,e){return r<e?-1:r>e?1:0}function Zo(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function qc(r){return r+"\0"}class yi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new It(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new It(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new It(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yi.fromMillis(Date.now())}static fromDate(e){return yi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new yi(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jn(this.nanoseconds,e.nanoseconds):Jn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zt(e)}static min(){return new Zt(new yi(0,0))}static max(){return new Zt(new yi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Na{constructor(e,t,s){void 0===t?t=0:t>e.length&&tn(),void 0===s?s=e.length-t:s>e.length-t&&tn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Na.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Na?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wr extends Na{construct(e,t,s){return new wr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new It(it.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new wr(t)}static emptyPath(){return new wr([])}}const fl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yi extends Na{construct(e,t,s){return new Yi(e,t,s)}static isValidIdentifier(e){return fl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yi(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new It(it.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const D=e[a];if("\\"===D){if(a+1===e.length)throw new It(it.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const $=e[a+1];if("\\"!==$&&"."!==$&&"`"!==$)throw new It(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=$,a+=2}else"`"===D?(p=!p,a++):"."!==D||p?(s+=D,a++):(l(),a++)}if(l(),p)throw new It(it.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yi(t)}static emptyPath(){return new Yi([])}}class Lt{constructor(e){this.path=e}static fromPath(e){return new Lt(wr.fromString(e))}static fromName(e){return new Lt(wr.fromString(e).popFirst(5))}static empty(){return new Lt(wr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Lt(new wr(e.slice()))}}class lo{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Wa(r){return r.fields.find(e=>2===e.kind)}function ga(r){return r.fields.filter(e=>2!==e.kind)}lo.UNKNOWN_ID=-1;class T{constructor(e,t){this.fieldPath=e,this.kind=t}}class A{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new A(0,_e.min())}}function V(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Zt.fromTimestamp(1e9===s?new yi(t+1,0):new yi(t,s));return new _e(a,Lt.empty(),e)}function oe(r){return new _e(r.readTime,r.key,-1)}class _e{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new _e(Zt.min(),Lt.empty(),-1)}static max(){return new _e(Zt.max(),Lt.empty(),-1)}}function Se(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Lt.comparator(r.documentKey,e.documentKey),0!==t?t:Jn(r.largestBatchId,e.largestBatchId))}const st="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ft{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function sn(r){return Kt.apply(this,arguments)}function Kt(){return Kt=(0,ae.Z)(function*(r){if(r.code!==it.FAILED_PRECONDITION||r.message!==st)throw r;xt("LocalStore","Unexpectedly lost primary lease")}),Kt.apply(this,arguments)}class qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qe((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof qe?t:qe.resolve(t)}catch(t){return qe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):qe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):qe.reject(t)}static resolve(e){return new qe((t,s)=>{t(e)})}static reject(e){return new qe((t,s)=>{s(e)})}static waitFor(e){return new qe((t,s)=>{let a=0,l=0,p=!1;e.forEach(D=>{++a,D.next(()=>{++l,p&&l===a&&t()},$=>s($))}),p=!0,l===a&&t()})}static or(e){let t=qe.resolve(!1);for(const s of e)t=t.next(a=>a?qe.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new qe((s,a)=>{const l=e.length,p=new Array(l);let D=0;for(let $=0;$<l;$++){const J=$;t(e[J]).next(le=>{p[J]=le,++D,D===l&&s(p)},le=>a(le))}})}static doWhile(e,t){return new qe((s,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):s()};l()})}}class Fr{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ar,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new xs(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=Io(s.target.error);this.v.reject(new xs(e,a))}}static open(e,t,s,a){try{return new Fr(t,e.transaction(a,s))}catch(l){throw new xs(t,l)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(xt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Qo(t)}}class ti{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===ti.S((0,ce.z$)())&&vs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xt("SimpleDb","Removing database:",e),Eo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ce.hl)())return!1;if(ti.C())return!0;const e=(0,ce.z$)(),t=ti.S(e),s=0<t&&t<10,a=ti.N(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,ae.Z)(function*(){return t.db||(xt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new xs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const D=p.target.error;a("VersionError"===D.name?new It(it.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new It(it.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new xs(e,D))},l.onupgradeneeded=p=>{xt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.V.O(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{xt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,ae.Z)(function*(){const p="readonly"===t;let D=0;for(;;){++D;try{l.db=yield l.$(e);const $=Fr.open(l.db,e,p?"readonly":"readwrite",s),J=a($).next(le=>($.P(),le)).catch(le=>($.abort(le),qe.reject(le))).toPromise();return J.catch(()=>{}),yield $.R,J}catch($){const J=$,le="FirebaseError"!==J.name&&D<3;if(xt("SimpleDb","Transaction failed with error:",J.message,"Retrying:",le),l.close(),!le)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class co{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Eo(this.L.delete())}}class xs extends It{constructor(e,t){super(it.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function us(r){return"IndexedDbTransactionError"===r.name}class Qo{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(xt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(xt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Eo(s)}add(e){return xt("SimpleDb","ADD",this.store.name,e,e),Eo(this.store.add(e))}get(e){return Eo(this.store.get(e)).next(t=>(void 0===t&&(t=null),xt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xt("SimpleDb","DELETE",this.store.name,e),Eo(this.store.delete(e))}count(){return xt("SimpleDb","COUNT",this.store.name),Eo(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),l=[];return this.W(a,(p,D)=>{l.push(D)}).next(()=>l)}{const a=this.store.getAll(s.range);return new qe((l,p)=>{a.onerror=D=>{p(D.target.error)},a.onsuccess=D=>{l(D.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new qe((a,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}J(e,t){xt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(l,p,D)=>D.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new qe((s,a)=>{t.onerror=l=>{const p=Io(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(D=>{D?p.continue():s()}):s()}})}W(e,t){const s=[];return new qe((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const D=p.target.result;if(!D)return void a();const $=new co(D),J=t(D.primaryKey,D.value,$);if(J instanceof qe){const le=J.catch(Me=>($.done(),qe.reject(Me)));s.push(le)}$.isDone?a():null===$.K?D.continue():D.continue($.K)}}).next(()=>qe.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Eo(r){return new qe((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=Io(s.target.error);t(a)}})}let wo=!1;function Io(r){const e=ti.S((0,ce.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new It("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wo||(wo=!0,setTimeout(()=>{throw s},0)),s}}return r}class Oa{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;xt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{xt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){us(s)?xt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield sn(s)}yield t.et(6e4)}))}}class bo{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,l=!0;return qe.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return xt("IndexBackiller",`Processing collection: ${p}`),this.it(e,p,a).next(D=>{a-=D,s.add(p)});l=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.rt(a,l)).next(D=>(xt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>p.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,l)=>{const p=oe(l);Se(p,s)>0&&(s=p)}),new _e(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Oo=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function Du(r){return null==r}function qa(r){return 0===r&&1/r==-1/0}function Cu(r){return"number"==typeof r&&Number.isInteger(r)&&!qa(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function ls(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=pl(e)),e=To(r.get(t),e);return pl(e)}function To(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function pl(r){return r+"\x01\x01"}function vi(r){const e=r.length;if(_n(e>=2),2===e)return _n("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),wr.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=r.indexOf("\x01",l);switch((p<0||p>t)&&tn(),r.charAt(p+1)){case"\x01":const D=r.substring(l,p);let $;0===a.length?$=D:(a+=D,$=a,a=""),s.push($);break;case"\x10":a+=r.substring(l,p),a+="\0";break;case"\x11":a+=r.substring(l,p+1);break;default:tn()}l=p+2}return new wr(s)}const ec=["userId","batchId"];function ou(r,e){return[r,ls(e)]}function tc(r,e,t){return[r,ls(e),t]}const au={},nc=["prefixPath","collectionGroup","readTime","documentId"],rc=["prefixPath","collectionGroup","documentId"],gl=["collectionGroup","readTime","prefixPath","documentId"],ic=["canonicalId","targetId"],uu=["targetId","path"],ml=["path","targetId"],Su=["collectionId","parent"],Kc=["indexId","uid"],Kd=["uid","sequenceNumber"],lu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yl=["indexId","uid","orderedDocumentKey"],vl=["userId","collectionPath","documentId"],Zc=["userId","collectionPath","largestBatchId"],Zd=["userId","collectionGroup","largestBatchId"],ka=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gu=[...ka,"documentOverlays"],Qc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sc=Qc,Yc=[...sc,"indexConfiguration","indexState","indexEntries"];class Jc extends Ft{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ks(r,e){const t=zt(r);return ti.M(t.ht,e)}function Xc(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ma(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Wu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class di{constructor(e,t){this.comparator=e,this.root=t||_s.EMPTY}insert(e,t){return new di(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_s.BLACK,null,null))}remove(e){return new di(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_s.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ka(this.root,e,this.comparator,!0)}}class Ka{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _s{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??_s.RED,this.left=a??_s.EMPTY,this.right=l??_s.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new _s(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return _s.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return _s.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_s.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tn();const e=this.left.check();if(e!==this.right.check())throw tn();return e+(this.isRed()?0:1)}}_s.EMPTY=null,_s.RED=!0,_s.BLACK=!1,_s.EMPTY=new class{constructor(){this.size=0}get key(){throw tn()}get value(){throw tn()}get color(){throw tn()}get left(){throw tn()}get right(){throw tn()}copy(r,e,t,s,a){return this}insert(r,e,t){return new _s(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xi{constructor(e){this.comparator=e,this.data=new di(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _l(this.data.getIterator())}getIteratorFrom(e){return new _l(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof xi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xi(this.comparator);return t.data=e,t}}class _l{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Da(r){return r.hasNext()?r.getNext():void 0}class ho{constructor(e){this.fields=e,e.sort(Yi.comparator)}static empty(){return new ho([])}unionWith(e){let t=new xi(Yi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ho(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Au extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Es{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Au("Invalid base64 string: "+a):a}}(e);return new Es(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Es(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Es.EMPTY_BYTE_STRING=new Es("");const oc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ca(r){if(_n(!!r),"string"==typeof r){let e=0;const t=oc.exec(r);if(_n(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ni(r.seconds),nanos:Ni(r.nanos)}}function Ni(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function fo(r){return"string"==typeof r?Es.fromBase64String(r):Es.fromUint8Array(r)}function qu(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ac(r){const e=r.mapValue.fields.__previous_value__;return qu(e)?ac(e):e}function La(r){const e=Ca(r.mapValue.fields.__local_write_time__.timestampValue);return new yi(e.seconds,e.nanos)}class Fa{constructor(e,t,s,a,l,p,D,$,J){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=D,this.longPollingOptions=$,this.useFetchStreams=J}}class sa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}const Do={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ku={nullValue:"NULL_VALUE"};function Yo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qu(r)?4:Zn(r)?9007199254740991:10:tn()}function ya(r,e){if(r===e)return!0;const t=Yo(r);if(t!==Yo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return La(r).isEqual(La(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Ca(s.timestampValue),p=Ca(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,fo(r.bytesValue).isEqual(fo(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return Ni(s.geoPointValue.latitude)===Ni(a.geoPointValue.latitude)&&Ni(s.geoPointValue.longitude)===Ni(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ni(s.integerValue)===Ni(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Ni(s.doubleValue),p=Ni(a.doubleValue);return l===p?qa(l)===qa(p):isNaN(l)&&isNaN(p)}return!1}(r,e);case 9:return Zo(r.arrayValue.values||[],e.arrayValue.values||[],ya);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Xc(l)!==Xc(p))return!1;for(const D in l)if(l.hasOwnProperty(D)&&(void 0===p[D]||!ya(l[D],p[D])))return!1;return!0}(r,e);default:return tn()}var a}function Zu(r,e){return void 0!==(r.values||[]).find(t=>ya(t,e))}function Za(r,e){if(r===e)return 0;const t=Yo(r),s=Yo(e);if(t!==s)return Jn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jn(r.booleanValue,e.booleanValue);case 2:return function(a,l){const p=Ni(a.integerValue||a.doubleValue),D=Ni(l.integerValue||l.doubleValue);return p<D?-1:p>D?1:p===D?0:isNaN(p)?isNaN(D)?0:-1:1}(r,e);case 3:return Yd(r.timestampValue,e.timestampValue);case 4:return Yd(La(r),La(e));case 5:return Jn(r.stringValue,e.stringValue);case 6:return function(a,l){const p=fo(a),D=fo(l);return p.compareTo(D)}(r.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),D=l.split("/");for(let $=0;$<p.length&&$<D.length;$++){const J=Jn(p[$],D[$]);if(0!==J)return J}return Jn(p.length,D.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,l){const p=Jn(Ni(a.latitude),Ni(l.latitude));return 0!==p?p:Jn(Ni(a.longitude),Ni(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],D=l.values||[];for(let $=0;$<p.length&&$<D.length;++$){const J=Za(p[$],D[$]);if(J)return J}return Jn(p.length,D.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===Do.mapValue&&l===Do.mapValue)return 0;if(a===Do.mapValue)return 1;if(l===Do.mapValue)return-1;const p=a.fields||{},D=Object.keys(p),$=l.fields||{},J=Object.keys($);D.sort(),J.sort();for(let le=0;le<D.length&&le<J.length;++le){const Me=Jn(D[le],J[le]);if(0!==Me)return Me;const at=Za(p[D[le]],$[J[le]]);if(0!==at)return at}return Jn(D.length,J.length)}(r.mapValue,e.mapValue);default:throw tn()}}function Yd(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Jn(r,e);const t=Ca(r),s=Ca(e),a=Jn(t.seconds,s.seconds);return 0!==a?a:Jn(t.nanos,s.nanos)}function b(r){return M(r)}function M(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=Ca(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?fo(r.bytesValue).toBase64():"referenceValue"in r?Lt.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=M(p);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const D of a)p?p=!1:l+=",",l+=`${D}:${M(s.fields[D])}`;return l+"}"}(r.mapValue):tn();var e}function Ee(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function $e(r){return!!r&&"integerValue"in r}function nt(r){return!!r&&"arrayValue"in r}function mt(r){return!!r&&"nullValue"in r}function Qt(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function $t(r){return!!r&&"mapValue"in r}function mn(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ma(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=mn(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mn(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Zn(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function rr(r){return"nullValue"in r?Ku:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Ee(sa.empty(),Lt.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:tn()}function oa(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Ee(sa.empty(),Lt.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Do:tn()}function Rs(r,e){const t=Za(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Sa(r,e){const t=Za(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!$t(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mn(t)}setAll(e){let t=Yi.emptyPath(),s={},a=[];e.forEach((p,D)=>{if(!t.isImmediateParentOf(D)){const $=this.getFieldsMap(t);this.applyChanges($,s,a),s={},a=[],t=D.popLast()}p?s[D.lastSegment()]=mn(p):a.push(D.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());$t(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];$t(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ma(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Oi(mn(this.value))}}function aa(r){const e=[];return ma(r.fields,(t,s)=>{const a=new Yi([t]);if($t(s)){const l=aa(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new ho(e)}class Ur{constructor(e,t,s,a,l,p,D){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=p,this.documentState=D}static newInvalidDocument(e){return new Ur(e,0,Zt.min(),Zt.min(),Zt.min(),Oi.empty(),0)}static newFoundDocument(e,t,s,a){return new Ur(e,1,t,Zt.min(),s,a,0)}static newNoDocument(e,t){return new Ur(e,2,t,Zt.min(),Zt.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new Ur(e,3,t,Zt.min(),Zt.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class io{constructor(e,t){this.position=e,this.inclusive=t}}function El(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],p=r.position[a];if(s=l.field.isKeyField()?Lt.comparator(Lt.fromName(p.referenceValue),t.key):Za(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function Jd(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ya(r.position[t],e.position[t]))return!1;return!0}class uc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xv(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class wl{}class Rr extends wl{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new ff(e,t,s):"array-contains"===t?new gf(e,s):"in"===t?new ed(e,s):"not-in"===t?new nh(e,s):"array-contains-any"===t?new td(e,s):new Rr(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new pf(e,s):new Qu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Za(t,this.value)):null!==t&&Yo(this.value)===Yo(t)&&this.matchesComparison(Za(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class bi extends wl{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new bi(e,t)}matches(e){return Il(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Il(r){return"and"===r.op}function lc(r){return"or"===r.op}function Xd(r){return df(r)&&Il(r)}function df(r){for(const e of r.filters)if(e instanceof bi)return!1;return!0}function eh(r){if(r instanceof Rr)return r.field.canonicalString()+r.op.toString()+b(r.value);if(Xd(r))return r.filters.map(e=>eh(e)).join(",");{const e=r.filters.map(t=>eh(t)).join(",");return`${r.op}(${e})`}}function hf(r,e){return r instanceof Rr?(t=r,(s=e)instanceof Rr&&t.op===s.op&&t.field.isEqual(s.field)&&ya(t.value,s.value)):r instanceof bi?function(t,s){return s instanceof bi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,l,p)=>a&&hf(l,s.filters[p]),!0)}(r,e):void tn();var t,s}function th(r,e){const t=r.filters.concat(e);return bi.create(t,r.op)}function bl(r){return r instanceof Rr?`${(e=r).field.canonicalString()} ${e.op} ${b(e.value)}`:r instanceof bi?function(e){return e.op.toString()+" {"+e.getFilters().map(bl).join(" ,")+"}"}(r):"Filter";var e}class ff extends Rr{constructor(e,t,s){super(e,t,s),this.key=Lt.fromName(s.referenceValue)}matches(e){const t=Lt.comparator(e.key,this.key);return this.matchesComparison(t)}}class pf extends Rr{constructor(e,t){super(e,"in",t),this.keys=Ms(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qu extends Rr{constructor(e,t){super(e,"not-in",t),this.keys=Ms(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ms(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Lt.fromName(s.referenceValue))}class gf extends Rr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nt(t)&&Zu(t.arrayValue,this.value)}}class ed extends Rr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zu(this.value.arrayValue,t)}}class nh extends Rr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zu(this.value.arrayValue,t)}}class td extends Rr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Zu(this.value.arrayValue,s))}}class Hp{constructor(e,t=null,s=[],a=[],l=null,p=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=D,this.dt=null}}function rh(r,e=null,t=[],s=[],a=null,l=null,p=null){return new Hp(r,e,t,s,a,l,p)}function cu(r){const e=zt(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>eh(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Du(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>b(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>b(s)).join(",")),e.dt=t}return e.dt}function cc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Xv(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!hf(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Jd(r.startAt,e.startAt)&&Jd(r.endAt,e.endAt)}function nd(r){return Lt.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function dc(r,e){return r.filters.filter(t=>t instanceof Rr&&t.field.isEqual(e))}function zp(r,e,t){let s=Ku,a=!0;for(const l of dc(r,e)){let p=Ku,D=!0;switch(l.op){case"<":case"<=":p=rr(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,D=!1;break;case"!=":case"not-in":p=Ku}Rs({value:s,inclusive:a},{value:p,inclusive:D})<0&&(s=p,a=D)}if(null!==t)for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const p=t.position[l];Rs({value:s,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}function Tl(r,e,t){let s=Do,a=!0;for(const l of dc(r,e)){let p=Do,D=!0;switch(l.op){case">=":case">":p=oa(l.value),D=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,D=!1;break;case"!=":case"not-in":p=Do}Sa({value:s,inclusive:a},{value:p,inclusive:D})>0&&(s=p,a=D)}if(null!==t)for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const p=t.position[l];Sa({value:s,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}class Ua{constructor(e,t=null,s=[],a=[],l=null,p="F",D=null,$=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=D,this.endAt=$,this.wt=null,this._t=null}}function ih(r,e,t,s,a,l,p,D){return new Ua(r,e,t,s,a,l,p,D)}function Yu(r){return new Ua(r)}function rd(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function hc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function fc(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function id(r){return null!==r.collectionGroup}function Ba(r){const e=zt(r);if(null===e.wt){e.wt=[];const t=fc(e),s=hc(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new uc(t)),e.wt.push(new uc(Yi.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new uc(Yi.keyField(),l))}}}return e.wt}function ko(r){const e=zt(r);if(!e._t)if("F"===e.limitType)e._t=rh(e.path,e.collectionGroup,Ba(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Ba(e))t.push(new uc(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new io(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new io(e.startAt.position,e.startAt.inclusive):null;e._t=rh(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function sh(r,e){e.getFirstInequalityField(),fc(r);const t=r.filters.concat([e]);return new Ua(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Dl(r,e,t){return new Ua(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function du(r,e){return cc(ko(r),ko(e))&&r.limitType===e.limitType}function oh(r){return`${cu(ko(r))}|lt:${r.limitType}`}function hu(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>bl(s)).join(", ")}]`),Du(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>b(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>b(s)).join(",")),`Target(${t})`}(ko(r))}; limitType=${r.limitType})`}function pc(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Lt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of Ba(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,l,p){const D=El(a,l,p);return a.inclusive?D<=0:D<0}(t.startAt,Ba(t),s)||t.endAt&&!function(a,l,p){const D=El(a,l,p);return a.inclusive?D>=0:D>0}(t.endAt,Ba(t),s)));var t,s}function gc(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function mc(r){return(e,t)=>{let s=!1;for(const a of Ba(r)){const l=Gp(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function Gp(r,e,t){const s=r.field.isKeyField()?Lt.comparator(e.key,t.key):function(a,l,p){const D=l.data.field(a),$=p.data.field(a);return null!==D&&null!==$?Za(D,$):tn()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return tn()}}class Va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return Wu(this.inner)}size(){return this.innerSize}}const sd=new di(Lt.comparator);function cs(){return sd}const ah=new di(Lt.comparator);function xu(...r){let e=ah;for(const t of r)e=e.insert(t.key,t);return e}function mf(r){let e=ah;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Qa(){return Ya()}function uh(){return Ya()}function Ya(){return new Va(r=>r.toString(),(r,e)=>r.isEqual(e))}const yf=new di(Lt.comparator),lh=new xi(Lt.comparator);function pr(...r){let e=lh;for(const t of r)e=e.add(t);return e}const vf=new xi(Jn);function yc(){return vf}function od(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qa(e)?"-0":e}}function ch(r){return{integerValue:""+r}}function ua(r,e){return Cu(e)?ch(e):od(r,e)}class fu{constructor(){this._=void 0}}function Wp(r,e,t){return r instanceof Mu?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&qu(a)&&(a=ac(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):r instanceof Aa?Ju(r,e):r instanceof Xu?Pu(r,e):function(s,a){const l=Ru(s,a),p=_f(l)+_f(s.gt);return $e(l)&&$e(s.gt)?ch(p):od(s.serializer,p)}(r,e)}function qp(r,e,t){return r instanceof Aa?Ju(r,e):r instanceof Xu?Pu(r,e):t}function Ru(r,e){return r instanceof Nu?$e(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Mu extends fu{}class Aa extends fu{constructor(e){super(),this.elements=e}}function Ju(r,e){const t=Ef(e);for(const s of r.elements)t.some(a=>ya(a,s))||t.push(s);return{arrayValue:{values:t}}}class Xu extends fu{constructor(e){super(),this.elements=e}}function Pu(r,e){let t=Ef(e);for(const s of r.elements)t=t.filter(a=>!ya(a,s));return{arrayValue:{values:t}}}class Nu extends fu{constructor(e,t){super(),this.serializer=e,this.gt=t}}function _f(r){return Ni(r.integerValue||r.doubleValue)}function Ef(r){return nt(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class vc{constructor(e,t){this.field=e,this.transform=t}}class Jo{constructor(e,t){this.version=e,this.transformResults=t}}class Hi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hi}static exists(e){return new Hi(void 0,e)}static updateTime(e){return new Hi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cl(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class ad{}function xa(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new m(r.key,Hi.none()):new el(r.key,r.data,Hi.none());{const t=r.data,s=Oi.empty();let a=new xi(Yi.comparator);for(let l of e.fields)if(!a.has(l)){let p=t.field(l);null===p&&l.length>1&&(l=l.popLast(),p=t.field(l)),null===p?s.delete(l):s.set(l,p),a=a.add(l)}return new Ou(r.key,s,new ho(a.toArray()),Hi.none())}}function ud(r,e,t){r instanceof el?function(s,a,l){const p=s.value.clone(),D=Qp(s.fieldTransforms,a,l.transformResults);p.setAll(D),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(r,e,t):r instanceof Ou?function(s,a,l){if(!Cl(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=Qp(s.fieldTransforms,a,l.transformResults),D=a.data;D.setAll(Zp(s)),D.setAll(p),a.convertToFoundDocument(l.version,D).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _c(r,e,t,s){return r instanceof el?function(a,l,p,D){if(!Cl(a.precondition,l))return p;const $=a.value.clone(),J=wf(a.fieldTransforms,D,l);return $.setAll(J),l.convertToFoundDocument(l.version,$).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ou?function(a,l,p,D){if(!Cl(a.precondition,l))return p;const $=wf(a.fieldTransforms,D,l),J=l.data;return J.setAll(Zp(a)),J.setAll($),l.convertToFoundDocument(l.version,J).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(le=>le.field))}(r,e,t,s):(p=t,Cl(r.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p);var l,p}function ld(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=Ru(s.transform,a||null);null!=l&&(null===t&&(t=Oi.empty()),t.set(s.field,l))}return t||null}function Kp(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&Zo(t,s,(a,l)=>function dh(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof Aa&&s instanceof Aa||t instanceof Xu&&s instanceof Xu?Zo(t.elements,s.elements,ya):t instanceof Nu&&s instanceof Nu?ya(t.gt,s.gt):t instanceof Mu&&s instanceof Mu);var t,s}(a,l))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class el extends ad{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ou extends ad{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Zp(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Qp(r,e,t){const s=new Map;_n(r.length===t.length);for(let a=0;a<t.length;a++){const l=r[a],p=l.transform,D=e.data.field(l.field);s.set(l.field,qp(p,D,t[a]))}return s}function wf(r,e,t){const s=new Map;for(const a of r){const l=a.transform,p=t.data.field(a.field);s.set(a.field,Wp(l,p,e))}return s}class m extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class h{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&ud(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=_c(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=_c(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=uh();return this.mutations.forEach(a=>{const l=e.get(a.key),p=l.overlayedDocument;let D=this.applyToLocalView(p,l.mutatedFields);D=t.has(a.key)?null:D;const $=xa(p,D);null!==$&&s.set(a.key,$),p.isValidDocument()||p.convertToNoDocument(Zt.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pr())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(t,s)=>Kp(t,s))&&Zo(this.baseMutations,e.baseMutations,(t,s)=>Kp(t,s))}}class E{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){_n(e.mutations.length===s.length);let a=yf;const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new E(e,t,s,a)}}class q{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ue{constructor(e,t){this.count=e,this.unchangedNames=t}}var Xe,pt;function Ht(r){switch(r){default:return tn();case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0}}function hn(r){if(void 0===r)return vs("GRPC error has no .code"),it.UNKNOWN;switch(r){case Xe.OK:return it.OK;case Xe.CANCELLED:return it.CANCELLED;case Xe.UNKNOWN:return it.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return it.INTERNAL;case Xe.UNAVAILABLE:return it.UNAVAILABLE;case Xe.UNAUTHENTICATED:return it.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case Xe.NOT_FOUND:return it.NOT_FOUND;case Xe.ALREADY_EXISTS:return it.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return it.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case Xe.ABORTED:return it.ABORTED;case Xe.OUT_OF_RANGE:return it.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return it.UNIMPLEMENTED;case Xe.DATA_LOSS:return it.DATA_LOSS;default:return tn()}}(pt=Xe||(Xe={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";class pn{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return qi}static getOrCreateInstance(){return null===qi&&(qi=new pn),qi}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let qi=null;function Ra(){return new TextEncoder}const cd=new yr([4294967295,4294967295],0);function hh(r){const e=Ra().encode(r),t=new Po;return t.update(e),new Uint8Array(t.digest())}function dd(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new yr([t,s],0),new yr([a,l],0)]}class Sl{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Al(`Invalid padding: ${t}`);if(s<0)throw new Al(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Al(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Al(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=yr.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(yr.fromNumber(s)));return 1===a.compare(cd)&&(a=new yr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=hh(e),[s,a]=dd(t);for(let l=0;l<this.hashCount;l++){const p=this.Et(s,a,l);if(!this.At(p))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),p=new Sl(l,a,t);return s.forEach(D=>p.insert(D)),p}insert(e){if(0===this.It)return;const t=hh(e),[s,a]=dd(t);for(let l=0;l<this.hashCount;l++){const p=this.Et(s,a,l);this.Rt(p)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tl{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new tl(Zt.min(),a,new di(Jn),cs(),pr())}}class xl{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new xl(s,t,pr(),pr(),pr())}}class Rl{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class hd{constructor(e,t){this.targetId=e,this.Vt=t}}class fh{constructor(e,t,s=Es.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Lo{constructor(){this.St=0,this.Dt=If(),this.Ct=Es.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=pr(),t=pr(),s=pr();return this.Dt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:tn()}}),new xl(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=If()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Ec{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=cs(),this.zt=ph(),this.Wt=new di(Jn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:tn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,l=this.se(s);if(l){const p=l.target;if(nd(p))if(0===a){const D=new Lt(p.path);this.Yt(s,D,Ur.newNoDocument(D,Zt.min()))}else _n(1===a);else{const D=this.ie(s);if(D!==a){const $=this.re(e,D);0!==$&&(this.ee(s),this.Wt=this.Wt.insert(s,2===$?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=pn.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(J,le,Me){var at,_t,Ut,Xt,dn,vr;const si={localCacheCount:le,existenceFilterCount:Me.count},_r=Me.unchangedNames;return _r&&(si.bloomFilter={applied:0===J,hashCount:null!==(at=_r?.hashCount)&&void 0!==at?at:0,bitmapLength:null!==(Xt=null===(Ut=null===(_t=_r?.bits)||void 0===_t?void 0:_t.bitmap)||void 0===Ut?void 0:Ut.length)&&void 0!==Xt?Xt:0,padding:null!==(vr=null===(dn=_r?.bits)||void 0===dn?void 0:dn.padding)&&void 0!==vr?vr:0}),si}($,D,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:l="",padding:p=0},hashCount:D=0}=s;let $,J;try{$=fo(l).toUint8Array()}catch(le){if(le instanceof Au)return Lr("Decoding the base64 bloom filter in existence filter failed ("+le.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw le}try{J=new Sl($,p,D)}catch(le){return Lr(le instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",le),1}return 0===J.It?1:a!==t-this.oe(e.targetId,J)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(l=>{const p=this.Gt.ue(),D=`projects/${p.projectId}/databases/${p.database}/documents/${l.path.canonicalString()}`;t.vt(D)||(this.Yt(e,l,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((l,p)=>{const D=this.se(p);if(D){if(l.current&&nd(D.target)){const $=new Lt(D.target.path);null!==this.jt.get($)||this.ae(p,$)||this.Yt(p,$,Ur.newNoDocument($,e))}l.Mt&&(t.set(p,l.Ot()),l.Ft())}});let s=pr();this.zt.forEach((l,p)=>{let D=!0;p.forEachWhile($=>{const J=this.se($);return!J||"TargetPurposeLimboResolution"===J.purpose||(D=!1,!1)}),D&&(s=s.add(l))}),this.jt.forEach((l,p)=>p.setReadTime(e));const a=new tl(e,t,this.Wt,this.jt,s);return this.jt=cs(),this.zt=ph(),this.Wt=new di(Jn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Lo,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new xi(Jn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Lo),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ph(){return new di(Lt.comparator)}function If(){return new di(Lt.comparator)}const la={asc:"ASCENDING",desc:"DESCENDING"},gh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jm={and:"AND",or:"OR"};class e_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yp(r,e){return r.useProto3Json||Du(e)?e:{value:e}}function wc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $m(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Hm(r,e){return wc(r,e.toTimestamp())}function so(r){return _n(!!r),Zt.fromTimestamp(function(e){const t=Ca(e);return new yi(t.seconds,t.nanos)}(r))}function bf(r,e){return(t=r,new wr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function zm(r){const e=wr.fromString(r);return _n(Ic(e)),e}function mh(r,e){return bf(r.databaseId,e.path)}function pu(r,e){const t=zm(e);if(t.get(1)!==r.databaseId.projectId)throw new It(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new It(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Lt(Lu(t))}function Tf(r,e){return bf(r.databaseId,e)}function Gm(r){const e=zm(r);return 4===e.length?wr.emptyPath():Lu(e)}function ku(r){return new wr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Lu(r){return _n(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Wm(r,e,t){return{name:mh(r,e),fields:t.value.mapValue.fields}}function qm(r,e,t){const s=pu(r,e.name),a=so(e.updateTime),l=e.createTime?so(e.createTime):Zt.min(),p=new Oi({mapValue:{fields:e.fields}}),D=Ur.newFoundDocument(s,a,l,p);return t&&D.setHasCommittedMutations(),t?D.setHasCommittedMutations():D}function fd(r,e){let t;if(e instanceof el)t={update:Wm(r,e.key,e.value)};else if(e instanceof m)t={delete:mh(r,e.key)};else if(e instanceof Ou)t={update:Wm(r,e.key,e.data),updateMask:eE(e.fieldMask)};else{if(!(e instanceof d))return tn();t={verify:mh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof Mu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Aa)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Xu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Nu)return{fieldPath:l.field.canonicalString(),increment:p.gt};throw tn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Hm(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:tn()),t;var a}function Km(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Hi.updateTime(so(a.updateTime)):void 0!==a.exists?Hi.exists(a.exists):Hi.none():Hi.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let D=null;"setToServerValue"in p?(_n("REQUEST_TIME"===p.setToServerValue),D=new Mu):"appendMissingElements"in p?D=new Aa(p.appendMissingElements.values||[]):"removeAllFromArray"in p?D=new Xu(p.removeAllFromArray.values||[]):"increment"in p?D=new Nu(l,p.increment):tn();const $=Yi.fromServerFormat(p.fieldPath);return new vc($,D)}(r,a)):[];var a;if(e.update){const a=pu(r,e.update.name),l=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new ho((e.updateMask.fieldPaths||[]).map(J=>Yi.fromServerFormat(J)));return new Ou(a,l,p,t,s)}return new el(a,l,t,s)}if(e.delete){const a=pu(r,e.delete);return new m(a,t)}if(e.verify){const a=pu(r,e.verify);return new d(a,t)}return tn()}function Df(r,e){return{documents:[Tf(r,e.path)]}}function yh(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Tf(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Tf(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function($){if(0!==$.length)return Jp(bi.create($,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function($){if(0!==$.length)return $.map(J=>{return{field:Uu((le=J).field),direction:vh(le.dir)};var le})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=Yp(r,e.limit);var D,$;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!($=e.endAt).inclusive,values:$.position}),t}function Zm(r){let e=Gm(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){_n(1===s);const le=t.from[0];le.allDescendants?a=le.collectionId:e=e.child(le.collectionId)}let l=[];t.where&&(l=function(le){const Me=Ym(le);return Me instanceof bi&&Xd(Me)?Me.getFilters():[Me]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(le=>{return new uc(Ml((Me=le).field),function(at){switch(at){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Me.direction));var Me}));let D=null;t.limit&&(D=function(le){let Me;return Me="object"==typeof le?le.value:le,Du(Me)?null:Me}(t.limit));let $=null;var le;t.startAt&&($=new io((le=t.startAt).values||[],!!le.before));let J=null;return t.endAt&&(J=function(le){return new io(le.values||[],!le.before)}(t.endAt)),ih(e,a,p,l,D,"F",$,J)}function Ym(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ml(e.unaryFilter.field);return Rr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Ml(e.unaryFilter.field);return Rr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ml(e.unaryFilter.field);return Rr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ml(e.unaryFilter.field);return Rr.create(l,"!=",{nullValue:"NULL_VALUE"});default:return tn()}}(r):void 0!==r.fieldFilter?Rr.create(Ml((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return bi.create(e.compositeFilter.filters.map(t=>Ym(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return tn()}}(e.compositeFilter.op))}(r):tn();var e}function vh(r){return la[r]}function t_(r){return gh[r]}function n_(r){return jm[r]}function Uu(r){return{fieldPath:r.canonicalString()}}function Ml(r){return Yi.fromServerFormat(r.fieldPath)}function Jp(r){return r instanceof Rr?function(e){if("=="===e.op){if(Qt(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NAN"}};if(mt(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qt(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NOT_NAN"}};if(mt(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(e.field),op:t_(e.op),value:e.value}}}(r):r instanceof bi?function(e){const t=e.getFilters().map(s=>Jp(s));return 1===t.length?t[0]:{compositeFilter:{op:n_(e.op),filters:t}}}(r):tn()}function eE(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ic(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class gu{constructor(e,t,s,a,l=Zt.min(),p=Zt.min(),D=Es.EMPTY_BYTE_STRING,$=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=D,this.expectedCount=$}withSequenceNumber(e){return new gu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Xp{constructor(e){this.fe=e}}function Cf(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Sf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:mh(a=r.fe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:wc(a,l.version.toTimestamp()),createTime:wc(a,l.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:bc(e.version)};else{if(!e.isUnknownDocument())return tn();s.unknownDocument={path:t.path.toArray(),version:bc(e.version)}}var a,l;return s}function Sf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function bc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tc(r){const e=new yi(r.seconds,r.nanoseconds);return Zt.fromTimestamp(e)}function Dc(r,e){const t=(e.baseMutations||[]).map(l=>Km(r.fe,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>Km(r.fe,l)),a=yi.fromMillis(e.localWriteTimeMs);return new h(e.batchId,a,t,s)}function _h(r){const e=Tc(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Tc(r.lastLimboFreeSnapshotVersion):Zt.min();let s;var a;return void 0!==r.query.documents?(_n(1===(a=r.query).documents.length),s=ko(Yu(Gm(a.documents[0])))):s=ko(Zm(r.query)),new gu(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Es.fromBase64String(r.resumeToken))}function Jm(r,e){const t=bc(e.snapshotVersion),s=bc(e.lastLimboFreeSnapshotVersion);let a;a=nd(e.target)?Df(r.fe,e.target):yh(r.fe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cu(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Af(r){const e=Zm({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Dl(e,e.limit,"L"):e}function Eh(r,e){return new q(e.largestBatchId,Km(r.fe,e.overlayMutation))}function eg(r,e){const t=e.path.lastSegment();return[r,ls(e.path.popLast()),t]}function xf(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:bc(s.readTime),documentKey:ls(s.documentKey.path),largestBatchId:s.largestBatchId}}class i_{getBundleMetadata(e,t){return Xm(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Tc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Xm(e).put({bundleId:(s=t).id,createTime:bc(so(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return tg(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Af(a.bundledQuery),readTime:Tc(a.readTime)};var a})}saveNamedQuery(e,t){return tg(e).put({name:(s=t).name,readTime:bc(so(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Xm(r){return ks(r,"bundles")}function tg(r){return ks(r,"namedQueries")}class wh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new wh(e,t.uid||"")}getOverlay(e,t){return mu(e).get(eg(this.userId,t)).next(s=>s?Eh(this.serializer,s):null)}getOverlays(e,t){const s=Qa();return qe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((l,p)=>{const D=new q(t,p);a.push(this.we(e,D))}),qe.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add(ls(p.getCollectionPath())));const l=[];return a.forEach(p=>{const D=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push(mu(e).J("collectionPathOverlayIndex",D))}),qe.waitFor(l)}getOverlaysForCollection(e,t,s){const a=Qa(),l=ls(t),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return mu(e).j("collectionPathOverlayIndex",p).next(D=>{for(const $ of D){const J=Eh(this.serializer,$);a.set(J.getKey(),J)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const l=Qa();let p;const D=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mu(e).X({index:"collectionGroupOverlayIndex",range:D},($,J,le)=>{const Me=Eh(this.serializer,J);l.size()<a||Me.largestBatchId===p?(l.set(Me.getKey(),Me),p=Me.largestBatchId):le.done()}).next(()=>l)}we(e,t){return mu(e).put(function(s,a,l){const[p,D,$]=eg(a,l.mutation.key);return{userId:a,collectionPath:D,documentId:$,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:fd(s.fe,l.mutation)}}(this.serializer,this.userId,t))}}function mu(r){return ks(r,"documentOverlays")}class Pl{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ni(e.integerValue));else if("doubleValue"in e){const s=Ni(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),qa(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(fo(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?Zn(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):tn()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),Lt.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function ey(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function ty(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const l=ey(255&t[a]);if(s+=l,8!==l)break}return s}(r);return Math.ceil(e/8)}Pl.Ve=new Pl;class tE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=ty(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=ty(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Rf{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class s_{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class pd{constructor(){this.je=new tE,this.ze=new Rf(this.je),this.We=new s_(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Nl{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Nl(this.indexId,this.documentKey,this.arrayValue,s)}}function nl(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=Mf(r.arrayValue,e.arrayValue),0!==t?t:(t=Mf(r.directionalValue,e.directionalValue),0!==t?t:Lt.comparator(r.documentKey,e.documentKey)))}function Mf(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class ny{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){_n(e.collectionGroup===this.collectionId);const t=Wa(e);if(void 0!==t&&!this.en(t))return!1;const s=ga(e);let a=0,l=0;for(;a<s.length&&this.en(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.Ze){const p=s[a];if(!this.nn(this.Ze,p)||!this.sn(this.Ye[l++],p))return!1;++a}for(;a<s.length;++a){const p=s[a];if(l>=this.Ye.length||!this.sn(this.Ye[l++],p))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ih(r){var e,t;if(_n(r instanceof Rr||r instanceof bi),r instanceof Rr){if(r instanceof ed){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>Rr.create(r.field,"==",l)))||[];return bi.create(a,"or")}return r}const s=r.filters.map(a=>Ih(a));return bi.create(s,r.op)}function Pf(r){if(0===r.getFilters().length)return[];const e=Th(Ih(r));return _n(ng(e)),Nf(e)||bh(e)?[e]:e.getFilters()}function Nf(r){return r instanceof Rr}function bh(r){return r instanceof bi&&Xd(r)}function ng(r){return Nf(r)||bh(r)||function(e){if(e instanceof bi&&lc(e)){for(const t of e.getFilters())if(!Nf(t)&&!bh(t))return!1;return!0}return!1}(r)}function Th(r){if(_n(r instanceof Rr||r instanceof bi),r instanceof Rr)return r;if(1===r.filters.length)return Th(r.filters[0]);const e=r.filters.map(s=>Th(s));let t=bi.create(e,r.op);return t=Dh(t),ng(t)?t:(_n(t instanceof bi),_n(Il(t)),_n(t.filters.length>1),t.filters.reduce((s,a)=>Cc(s,a)))}function Cc(r,e){let t;return _n(r instanceof Rr||r instanceof bi),_n(e instanceof Rr||e instanceof bi),t=r instanceof Rr?e instanceof Rr?bi.create([r,e],"and"):ry(r,e):e instanceof Rr?ry(e,r):function(s,a){if(_n(s.filters.length>0&&a.filters.length>0),Il(s)&&Il(a))return th(s,a.getFilters());const l=lc(s)?s:a,p=lc(s)?a:s,D=l.filters.map($=>Cc($,p));return bi.create(D,"or")}(r,e),Dh(t)}function ry(r,e){if(Il(e))return th(e,r.getFilters());{const t=e.filters.map(s=>Cc(r,s));return bi.create(t,"or")}}function Dh(r){if(_n(r instanceof Rr||r instanceof bi),r instanceof Rr)return r;const e=r.getFilters();if(1===e.length)return Dh(e[0]);if(df(r))return r;const t=e.map(a=>Dh(a)),s=[];return t.forEach(a=>{a instanceof Rr?s.push(a):a instanceof bi&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:bi.create(s,r.op)}class o_{constructor(){this.rn=new rg}addToCollectionParentIndex(e,t){return this.rn.add(t),qe.resolve()}getCollectionParents(e,t){return qe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return qe.resolve()}deleteFieldIndex(e,t){return qe.resolve()}getDocumentsMatchingTarget(e,t){return qe.resolve(null)}getIndexType(e,t){return qe.resolve(0)}getFieldIndexes(e,t){return qe.resolve([])}getNextCollectionGroupToUpdate(e){return qe.resolve(null)}getMinOffset(e,t){return qe.resolve(_e.min())}getMinOffsetFromCollectionGroup(e,t){return qe.resolve(_e.min())}updateCollectionGroup(e,t,s){return qe.resolve()}updateIndexEntries(e,t){return qe.resolve()}}class rg{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new xi(wr.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new xi(wr.comparator)).toArray()}}const Ch=new Uint8Array(0);class ig{constructor(e,t){this.user=e,this.databaseId=t,this.on=new rg,this.un=new Va(s=>cu(s),(s,a)=>cc(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const l={collectionId:s,parent:ls(a)};return sg(e).put(l)}return qe.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[qc(t),""],!1,!0);return sg(e).j(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(vi(p.parent))}return s})}addFieldIndex(e,t){const s=Sh(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var p;delete a.indexId;const l=s.add(a);if(t.indexState){const p=Ah(e);return l.next(D=>{p.put(xf(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const s=Sh(e),a=Ah(e),l=Of(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Of(e);let a=!0;const l=new Map;return qe.forEach(this.cn(t),p=>this.an(e,p).next(D=>{a&&(a=!!D),l.set(p,D)})).next(()=>{if(a){let p=pr();const D=[];return qe.forEach(l,($,J)=>{var le;xt("IndexedDbIndexManager",`Using index ${le=$,`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map(_r=>`${_r.fieldPath}:${_r.kind}`).join(",")}`} to execute ${cu(t)}`);const Me=function(_r,Fs){const hs=Wa(Fs);if(void 0===hs)return null;for(const ns of dc(_r,hs.fieldPath))switch(ns.op){case"array-contains-any":return ns.value.arrayValue.values||[];case"array-contains":return[ns.value]}return null}(J,$),at=function(_r,Fs){const hs=new Map;for(const ns of ga(Fs))for(const ha of dc(_r,ns.fieldPath))switch(ha.op){case"==":case"in":hs.set(ns.fieldPath.canonicalString(),ha.value);break;case"not-in":case"!=":return hs.set(ns.fieldPath.canonicalString(),ha.value),Array.from(hs.values())}return null}(J,$),_t=function(_r,Fs){const hs=[];let ns=!0;for(const ha of ga(Fs)){const Yl=0===ha.kind?zp(_r,ha.fieldPath,_r.startAt):Tl(_r,ha.fieldPath,_r.startAt);hs.push(Yl.value),ns&&(ns=Yl.inclusive)}return new io(hs,ns)}(J,$),Ut=function(_r,Fs){const hs=[];let ns=!0;for(const ha of ga(Fs)){const Yl=0===ha.kind?Tl(_r,ha.fieldPath,_r.endAt):zp(_r,ha.fieldPath,_r.endAt);hs.push(Yl.value),ns&&(ns=Yl.inclusive)}return new io(hs,ns)}(J,$),Xt=this.hn($,J,_t),dn=this.hn($,J,Ut),vr=this.ln($,J,at),si=this.fn($.indexId,Me,Xt,_t.inclusive,dn,Ut.inclusive,vr);return qe.forEach(si,_r=>s.H(_r,t.limit).next(Fs=>{Fs.forEach(hs=>{const ns=Lt.fromSegments(hs.documentKey);p.has(ns)||(p=p.add(ns),D.push(ns))})}))}).next(()=>D)}return qe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Pf(bi.create(e.filters,"and")).map(s=>rh(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,l,p,D){const $=(null!=t?t.length:1)*Math.max(s.length,l.length),J=$/(null!=t?t.length:1),le=[];for(let Me=0;Me<$;++Me){const at=t?this.dn(t[Me/J]):Ch,_t=this.wn(e,at,s[Me%J],a),Ut=this._n(e,at,l[Me%J],p),Xt=D.map(dn=>this.wn(e,at,dn,!0));le.push(...this.createRange(_t,Ut,Xt))}return le}wn(e,t,s,a){const l=new Nl(e,Lt.empty(),t,s);return a?l:l.Je()}_n(e,t,s,a){const l=new Nl(e,Lt.empty(),t,s);return a?l.Je():l}an(e,t){const s=new ny(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let p=null;for(const D of l)s.tn(D)&&(!p||D.fields.length>p.fields.length)&&(p=D);return p})}getIndexType(e,t){let s=2;const a=this.cn(t);return qe.forEach(a,l=>this.an(e,l).next(p=>{p?0!==s&&p.fields.length<function(D){let $=new xi(Yi.comparator),J=!1;for(const le of D.filters)for(const Me of le.getFlattenedFilters())Me.field.isKeyField()||("array-contains"===Me.op||"array-contains-any"===Me.op?J=!0:$=$.add(Me.field));for(const le of D.orderBy)le.field.isKeyField()||($=$.add(le.field));return $.size+(J?1:0)}(l)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new pd;for(const a of ga(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const p=s.He(a.kind);Pl.Ve._e(l,p)}return s.Qe()}dn(e){const t=new pd;return Pl.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new pd;return Pl.Ve._e(Ee(this.databaseId,t),s.He(function(a){const l=ga(a);return 0===l.length?0:l[l.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new pd);let l=0;for(const p of ga(e)){const D=s[l++];for(const $ of a)if(this.yn(t,p.fieldPath)&&nt(D))a=this.pn(a,p,D);else{const J=$.He(p.kind);Pl.Ve._e(D,J)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],l=[];for(const p of s.arrayValue.values||[])for(const D of a){const $=new pd;$.seed(D.Qe()),Pl.Ve._e(p,$.He(t.kind)),l.push($)}return l}yn(e,t){return!!e.filters.find(s=>s instanceof Rr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Sh(e),a=Ah(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(l=>{const p=[];return qe.forEach(l,D=>a.get([D.indexId,this.uid]).next($=>{p.push(function(J,le){const Me=le?new A(le.sequenceNumber,new _e(Tc(le.readTime),new Lt(vi(le.documentKey)),le.largestBatchId)):A.empty(),at=J.fields.map(([_t,Ut])=>new T(Yi.fromServerFormat(_t),Ut));return new lo(J.indexId,J.collectionGroup,at,Me)}(D,$))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const l=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:Jn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Sh(e),l=Ah(e);return this.Tn(e).next(p=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>qe.forEach(D,$=>l.put(xf($.indexId,this.user,p,s)))))}updateIndexEntries(e,t){const s=new Map;return qe.forEach(t,(a,l)=>{const p=s.get(a.collectionGroup);return(p?qe.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(D=>(s.set(a.collectionGroup,D),qe.forEach(D,$=>this.En(e,a,$).next(J=>{const le=this.An(l,$);return J.isEqual(le)?qe.resolve():this.vn(e,l,$,J,le)}))))})}Rn(e,t,s,a){return Of(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return Of(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=Of(e);let l=new xi(nl);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(p,D)=>{l=l.add(new Nl(s.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>l)}An(e,t){let s=new xi(nl);const a=this.mn(t,e);if(null==a)return s;const l=Wa(t);if(null!=l){const p=e.data.field(l.fieldPath);if(nt(p))for(const D of p.arrayValue.values||[])s=s.add(new Nl(t.indexId,e.key,this.dn(D),a))}else s=s.add(new Nl(t.indexId,e.key,Ch,a));return s}vn(e,t,s,a,l){xt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(D,$,J,le,Me){const at=D.getIterator(),_t=$.getIterator();let Ut=Da(at),Xt=Da(_t);for(;Ut||Xt;){let dn=!1,vr=!1;if(Ut&&Xt){const si=J(Ut,Xt);si<0?vr=!0:si>0&&(dn=!0)}else null!=Ut?vr=!0:dn=!0;dn?(le(Xt),Xt=Da(_t)):vr?(Me(Ut),Ut=Da(at)):(Ut=Da(at),Xt=Da(_t))}}(a,l,nl,D=>{p.push(this.Rn(e,t,s,D))},D=>{p.push(this.Pn(e,t,s,D))}),qe.waitFor(p)}Tn(e){let t=1;return Ah(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,D)=>nl(p,D)).filter((p,D,$)=>!D||0!==nl(p,$[D-1]));const a=[];a.push(e);for(const p of s){const D=nl(p,e),$=nl(p,t);if(0===D)a[0]=e.Je();else if(D>0&&$<0)a.push(p),a.push(p.Je());else if($>0)break}a.push(t);const l=[];for(let p=0;p<a.length;p+=2){if(this.bn(a[p],a[p+1]))return[];l.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Ch,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Ch,[]]))}return l}bn(e,t){return nl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(og)}getMinOffset(e,t){return qe.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||tn())).next(og)}}function sg(r){return ks(r,"collectionParents")}function Of(r){return ks(r,"indexEntries")}function Sh(r){return ks(r,"indexConfiguration")}function Ah(r){return ks(r,"indexState")}function og(r){_n(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;Se(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new _e(e.readTime,e.documentKey,t)}const iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ca{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ca(e,ca.DEFAULT_COLLECTION_PERCENTILE,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ja(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),l=[],p=IDBKeyRange.only(t.batchId);let D=0;const $=s.X({range:p},(le,Me,at)=>(D++,at.delete()));l.push($.next(()=>{_n(1===D)}));const J=[];for(const le of t.mutations){const Me=tc(e,le.key.path,t.batchId);l.push(a.delete(Me)),J.push(le.key)}return qe.waitFor(l).next(()=>J)}function kf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw tn();e=r.noDocument}return JSON.stringify(e).length}ca.DEFAULT_COLLECTION_PERCENTILE=10,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ca.DEFAULT=new ca(41943040,ca.DEFAULT_COLLECTION_PERCENTILE,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ca.DISABLED=new ca(-1,0,0);class xh{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){_n(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new xh(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).X({index:"userMutationsIndex",range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=gd(e),p=Ol(e);return p.add({}).next(D=>{_n("number"==typeof D);const $=new h(D,t,s,a),J=function(at,_t,Ut){const Xt=Ut.baseMutations.map(vr=>fd(at.fe,vr)),dn=Ut.mutations.map(vr=>fd(at.fe,vr));return{userId:_t,batchId:Ut.batchId,localWriteTimeMs:Ut.localWriteTime.toMillis(),baseMutations:Xt,mutations:dn}}(this.serializer,this.userId,$),le=[];let Me=new xi((at,_t)=>Jn(at.canonicalString(),_t.canonicalString()));for(const at of a){const _t=tc(this.userId,at.key.path,D);Me=Me.add(at.key.path.popLast()),le.push(p.put(J)),le.push(l.put(_t,au))}return Me.forEach(at=>{le.push(this.indexManager.addToCollectionParentIndex(e,at))}),e.addOnCommittedListener(()=>{this.Vn[D]=$.keys()}),qe.waitFor(le).next(()=>$)})}lookupMutationBatch(e,t){return Ol(e).get(t).next(s=>s?(_n(s.userId===this.userId),Dc(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?qe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Ol(e).X({index:"userMutationsIndex",range:a},(p,D,$)=>{D.userId===this.userId&&(_n(D.batchId>=s),l=Dc(this.serializer,D)),$.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Ol(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).j("userMutationsIndex",t).next(s=>s.map(a=>Dc(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ou(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return gd(e).X({range:a},(p,D,$)=>{const[J,le,Me]=p,at=vi(le);if(J===this.userId&&t.path.isEqual(at))return Ol(e).get(Me).next(_t=>{if(!_t)throw tn();_n(_t.userId===this.userId),l.push(Dc(this.serializer,_t))});$.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new xi(Jn);const a=[];return t.forEach(l=>{const p=ou(this.userId,l.path),D=IDBKeyRange.lowerBound(p),$=gd(e).X({range:D},(J,le,Me)=>{const[at,_t,Ut]=J,Xt=vi(_t);at===this.userId&&l.path.isEqual(Xt)?s=s.add(Ut):Me.done()});a.push($)}),qe.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=ou(this.userId,s),p=IDBKeyRange.lowerBound(l);let D=new xi(Jn);return gd(e).X({range:p},($,J,le)=>{const[Me,at,_t]=$,Ut=vi(at);Me===this.userId&&s.isPrefixOf(Ut)?Ut.length===a&&(D=D.add(_t)):le.done()}).next(()=>this.Dn(e,D))}Dn(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Ol(e).get(l).next(p=>{if(null===p)throw tn();_n(p.userId===this.userId),s.push(Dc(this.serializer,p))}))}),qe.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Ja(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),qe.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return qe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return gd(e).X({range:s},(l,p,D)=>{if(l[0]===this.userId){const $=vi(l[1]);a.push($)}else D.done()}).next(()=>{_n(0===a.length)})})}containsKey(e,t){return sy(e,this.userId,t)}xn(e){return oy(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sy(r,e,t){const s=ou(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return gd(r).X({range:l,Y:!0},(D,$,J)=>{const[le,Me,at]=D;le===e&&Me===a&&(p=!0),J.done()}).next(()=>p)}function Ol(r){return ks(r,"mutations")}function gd(r){return ks(r,"documentMutations")}function oy(r){return ks(r,"mutationQueues")}class kl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new kl(0)}static Mn(){return new kl(-1)}}class a_{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new kl(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Zt.fromTimestamp(new yi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>md(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(_n(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return md(e).X((p,D)=>{const $=_h(D);$.sequenceNumber<=t&&null===s.get($.targetId)&&(a++,l.push(this.removeTargetData(e,$)))}).next(()=>qe.waitFor(l)).next(()=>a)}forEachTarget(e,t){return md(e).X((s,a)=>{const l=_h(a);t(l)})}$n(e){return ay(e).get("targetGlobalKey").next(t=>(_n(null!==t),t))}On(e,t){return ay(e).put("targetGlobalKey",t)}Fn(e,t){return md(e).put(Jm(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=cu(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return md(e).X({range:a,index:"queryTargetsIndex"},(p,D,$)=>{const J=_h(D);cc(t,J.target)&&(l=J,$.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Qn(e);return t.forEach(p=>{const D=ls(p.path);a.push(l.put({targetId:s,path:D})),a.push(this.referenceDelegate.addReference(e,s,p))}),qe.waitFor(a)}removeMatchingKeys(e,t,s){const a=Qn(e);return qe.forEach(t,l=>{const p=ls(l.path);return qe.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Qn(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Qn(e);let l=pr();return a.X({range:s,Y:!0},(p,D,$)=>{const J=vi(p[1]),le=new Lt(J);l=l.add(le)}).next(()=>l)}containsKey(e,t){const s=ls(t.path),a=IDBKeyRange.bound([s],[qc(s)],!1,!0);let l=0;return Qn(e).X({index:"documentTargetsIndex",Y:!0,range:a},([p,D],$,J)=>{0!==p&&(l++,J.done())}).next(()=>l>0)}le(e,t){return md(e).get(t).next(s=>s?_h(s):null)}}function md(r){return ks(r,"targets")}function ay(r){return ks(r,"targetGlobal")}function Qn(r){return ks(r,"targetDocuments")}function ag([r,e],[t,s]){const a=Jn(r,t);return 0===a?Jn(e,s):a}class uy{constructor(e){this.Ln=e,this.buffer=new xi(ag),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ag(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ug{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;xt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){us(s)?xt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield sn(s)}yield t.Qn(3e5)}))}}class u_{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return qe.resolve(Oo.ct);const s=new uy(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector","Garbage collection skipped; disabled"),qe.resolve(iy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iy):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,l,p,D,$,J;const le=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Me=>(Me>this.params.maximumSequenceNumbersToCollect?(xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Me}`),a=this.params.maximumSequenceNumbersToCollect):a=Me,p=Date.now(),this.nthSequenceNumber(e,a))).next(Me=>(s=Me,D=Date.now(),this.removeTargets(e,s,t))).next(Me=>(l=Me,$=Date.now(),this.removeOrphanedDocuments(e,s))).next(Me=>(J=Date.now(),zu()<=te.in.DEBUG&&xt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-le}ms\n\tDetermined least recently used ${a} in `+(D-p)+`ms\n\tRemoved ${l} targets in `+($-D)+`ms\n\tRemoved ${Me} documents in `+(J-$)+`ms\nTotal Duration: ${J-le}ms`),qe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:Me})))}}class cy{constructor(e,t){this.db=e,this.garbageCollector=function ly(r,e){return new u_(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Lf(e,s)}removeReference(e,t,s){return Lf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Lf(e,t)}Xn(e,t){return function(s,a){let l=!1;return oy(s).Z(p=>sy(s,p,a).next(D=>(D&&(l=!0),qe.resolve(!D)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Yn(e,(p,D)=>{if(D<=t){const $=this.Xn(e,p).next(J=>{if(!J)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,Zt.min()),Qn(e).delete([0,ls(p.path)])))});a.push($)}}).next(()=>qe.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Lf(e,t)}Yn(e,t){const s=Qn(e);let a,l=Oo.ct;return s.X({index:"documentTargetsIndex"},([p,D],{path:$,sequenceNumber:J})=>{0===p?(l!==Oo.ct&&t(new Lt(vi(a)),l),l=J,a=$):l=Oo.ct}).next(()=>{l!==Oo.ct&&t(new Lt(vi(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(r,e){return Qn(r).put((s=r.currentSequenceNumber,{targetId:0,path:ls(e.path),sequenceNumber:s}));var s}class lg{constructor(){this.changes=new Va(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?qe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class l_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Ll(e).put(s)}removeEntry(e,t,s){return Ll(e).delete(function(a,l){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Sf(l),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Ur.newInvalidDocument(t);return Ll(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(yu(t))},(a,l)=>{s=this.ts(t,l)}).next(()=>s)}es(e,t){let s={size:0,document:Ur.newInvalidDocument(t)};return Ll(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(yu(t))},(a,l)=>{s={document:this.ts(t,l),size:kf(l)}}).next(()=>s)}getEntries(e,t){let s=cs();return this.ns(e,t,(a,l)=>{const p=this.ts(a,l);s=s.insert(a,p)}).next(()=>s)}ss(e,t){let s=cs(),a=new di(Lt.comparator);return this.ns(e,t,(l,p)=>{const D=this.ts(l,p);s=s.insert(l,D),a=a.insert(l,kf(p))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return qe.resolve();let a=new xi(Ff);t.forEach($=>a=a.add($));const l=IDBKeyRange.bound(yu(a.first()),yu(a.last())),p=a.getIterator();let D=p.getNext();return Ll(e).X({index:"documentKeyIndex",range:l},($,J,le)=>{const Me=Lt.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;D&&Ff(D,Me)<0;)s(D,null),D=p.getNext();D&&D.isEqual(Me)&&(s(D,J),D=p.hasNext()?p.getNext():null),D?le.G(yu(D)):le.done()}).next(()=>{for(;D;)s(D,null),D=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const l=t.path,p=[l.popLast().toArray(),l.lastSegment(),Sf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],D=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ll(e).j(IDBKeyRange.bound(p,D,!0)).next($=>{let J=cs();for(const le of $){const Me=this.ts(Lt.fromSegments(le.prefixPath.concat(le.collectionGroup,le.documentId)),le);Me.isFoundDocument()&&(pc(t,Me)||a.has(Me.key))&&(J=J.insert(Me.key,Me))}return J})}getAllFromCollectionGroup(e,t,s,a){let l=cs();const p=hy(t,s),D=hy(t,_e.max());return Ll(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,D,!0)},($,J,le)=>{const Me=this.ts(Lt.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);l=l.insert(Me.key,Me),l.size===a&&le.done()}).next(()=>l)}newChangeBuffer(e){return new nE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return cg(e).get("remoteDocumentGlobalKey").next(t=>(_n(!!t),t))}Zn(e,t){return cg(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function r_(r,e){let t;if(e.document)t=qm(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Lt.fromSegments(e.noDocument.path),a=Tc(e.noDocument.readTime);t=Ur.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tn();{const s=Lt.fromSegments(e.unknownDocument.path),a=Tc(e.unknownDocument.version);t=Ur.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new yi(s[0],s[1]);return Zt.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Zt.min()))return s}return Ur.newInvalidDocument(e)}}function dy(r){return new l_(r)}class nE extends lg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Va(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new xi((l,p)=>Jn(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const D=this.us.get(l);if(t.push(this.os.removeEntry(e,l,D.readTime)),p.isValidDocument()){const $=Cf(this.os.serializer,p);a=a.add(l.path.popLast()),s+=kf($)-D.size,t.push(this.os.addEntry(e,l,$))}else if(s-=D.size,this.trackRemovals){const $=Cf(this.os.serializer,p.convertToNoDocument(Zt.min()));t.push(this.os.addEntry(e,l,$))}}),a.forEach(l=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.os.updateMetadata(e,s)),qe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((l,p)=>{this.us.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function cg(r){return ks(r,"remoteDocumentGlobal")}function Ll(r){return ks(r,"remoteDocumentsV14")}function yu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hy(r,e){const t=e.documentKey.path.toArray();return[r,Sf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ff(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<s.length-2;++l)if(a=Jn(t[l],s[l]),a)return a;return a=Jn(t.length,s.length),a||(a=Jn(t[t.length-2],s[s.length-2]),a||Jn(t[t.length-1],s[s.length-1]))}class dg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fy{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&_c(s.mutation,a,ho.empty(),yi.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,pr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=pr()){const a=Qa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let p=xu();return l.forEach((D,$)=>{p=p.insert(D,$.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=Qa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,pr()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((p,D)=>{t.set(p,D)})})}computeViews(e,t,s,a){let l=cs();const p=Ya(),D=Ya();return t.forEach(($,J)=>{const le=s.get(J.key);a.has(J.key)&&(void 0===le||le.mutation instanceof Ou)?l=l.insert(J.key,J):void 0!==le?(p.set(J.key,le.mutation.getFieldMask()),_c(le.mutation,J,le.mutation.getFieldMask(),yi.now())):p.set(J.key,ho.empty())}),this.recalculateAndSaveOverlays(e,l).next($=>($.forEach((J,le)=>p.set(J,le)),t.forEach((J,le)=>{var Me;return D.set(J,new dg(le,null!==(Me=p.get(J))&&void 0!==Me?Me:null))}),D))}recalculateAndSaveOverlays(e,t){const s=Ya();let a=new di((p,D)=>p-D),l=pr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const D of p)D.keys().forEach($=>{const J=t.get($);if(null===J)return;let le=s.get($)||ho.empty();le=D.applyToLocalView(J,le),s.set($,le);const Me=(a.get(D.batchId)||pr()).add($);a=a.insert(D.batchId,Me)})}).next(()=>{const p=[],D=a.getReverseIterator();for(;D.hasNext();){const $=D.getNext(),J=$.key,le=$.value,Me=uh();le.forEach(at=>{if(!l.has(at)){const _t=xa(t.get(at),s.get(at));null!==_t&&Me.set(at,_t),l=l.add(at)}}),p.push(this.documentOverlayCache.saveOverlays(e,J,Me))}return qe.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Lt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):id(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const p=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):qe.resolve(Qa());let D=-1,$=l;return p.next(J=>qe.forEach(J,(le,Me)=>(D<Me.largestBatchId&&(D=Me.largestBatchId),l.get(le)?qe.resolve():this.remoteDocumentCache.getEntry(e,le).next(at=>{$=$.insert(le,at)}))).next(()=>this.populateOverlays(e,J,l)).next(()=>this.computeViews(e,$,J,pr())).next(le=>({batchId:D,changes:mf(le)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Lt(t)).next(s=>{let a=xu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let l=xu();return this.indexManager.getCollectionParents(e,a).next(p=>qe.forEach(p,D=>{const $=(J=t,le=D.child(a),new Ua(le,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,le;return this.getDocumentsMatchingCollectionQuery(e,$,s).next(J=>{J.forEach((le,Me)=>{l=l.insert(le,Me)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(l=>{a.forEach((D,$)=>{const J=$.getKey();null===l.get(J)&&(l=l.insert(J,Ur.newInvalidDocument(J)))});let p=xu();return l.forEach((D,$)=>{const J=a.get(D);void 0!==J&&_c(J.mutation,$,ho.empty(),yi.now()),pc(t,$)&&(p=p.insert(D,$))}),p})}}class rE{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return qe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:so(s.createTime)}),qe.resolve()}getNamedQuery(e,t){return qe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:Af(s.bundledQuery),readTime:so(s.readTime)}),qe.resolve();var s}}class iE{constructor(){this.overlays=new di(Lt.comparator),this.ls=new Map}getOverlay(e,t){return qe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Qa();return qe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.we(e,t,l)}),qe.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(s)),qe.resolve()}getOverlaysForCollection(e,t,s){const a=Qa(),l=t.length+1,p=new Lt(t.child("")),D=this.overlays.getIteratorFrom(p);for(;D.hasNext();){const $=D.getNext().value,J=$.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===l&&$.largestBatchId>s&&a.set($.getKey(),$)}return qe.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new di((J,le)=>J-le);const p=this.overlays.getIterator();for(;p.hasNext();){const J=p.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>s){let le=l.get(J.largestBatchId);null===le&&(le=Qa(),l=l.insert(J.largestBatchId,le)),le.set(J.getKey(),J)}}const D=Qa(),$=l.getIterator();for(;$.hasNext()&&($.getNext().value.forEach((J,le)=>D.set(J,le)),!(D.size()>=a)););return qe.resolve(D)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const p=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new q(t,s));let l=this.ls.get(t);void 0===l&&(l=pr(),this.ls.set(t,l)),this.ls.set(t,l.add(s.key))}}class py{constructor(){this.fs=new xi(Fo.ds),this.ws=new xi(Fo._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new Fo(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new Fo(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new Lt(new wr([])),s=new Fo(t,e),a=new Fo(t,e+1),l=[];return this.ws.forEachInRange([s,a],p=>{this.ys(p),l.push(p.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Lt(new wr([])),s=new Fo(t,e),a=new Fo(t,e+1);let l=pr();return this.ws.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Fo(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Fo{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Lt.comparator(e.key,t.key)||Jn(e.As,t.As)}static _s(e,t){return Jn(e.As,t.As)||Lt.comparator(e.key,t.key)}}class gy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new xi(Fo.ds)}checkEmpty(e){return qe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const l=this.vs;this.vs++;const p=new h(l,t,s,a);this.mutationQueue.push(p);for(const D of a)this.Rs=this.Rs.add(new Fo(D.key,l)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return qe.resolve(p)}lookupMutationBatch(e,t){return qe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),l=a<0?0:a;return qe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return qe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Fo(t,0),a=new Fo(t,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([s,a],p=>{const D=this.Ps(p.As);l.push(D)}),qe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new xi(Jn);return t.forEach(a=>{const l=new Fo(a,0),p=new Fo(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,p],D=>{s=s.add(D.As)})}),qe.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Lt.isDocumentKey(l)||(l=l.child(""));const p=new Fo(new Lt(l),0);let D=new xi(Jn);return this.Rs.forEachWhile($=>{const J=$.key.path;return!!s.isPrefixOf(J)&&(J.length===a&&(D=D.add($.As)),!0)},p),qe.resolve(this.Vs(D))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){_n(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return qe.forEach(t.mutations,a=>{const l=new Fo(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new Fo(t,0),a=this.Rs.firstAfterOrEqual(s);return qe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return qe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sE{constructor(e){this.Ds=e,this.docs=new di(Lt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,p=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return qe.resolve(s?s.document.mutableCopy():Ur.newInvalidDocument(t))}getEntries(e,t){let s=cs();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Ur.newInvalidDocument(a))}),qe.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=cs();const p=t.path,D=new Lt(p.child("")),$=this.docs.getIteratorFrom(D);for(;$.hasNext();){const{key:J,value:{document:le}}=$.getNext();if(!p.isPrefixOf(J.path))break;J.path.length>p.length+1||Se(oe(le),s)<=0||(a.has(le.key)||pc(t,le))&&(l=l.insert(le.key,le.mutableCopy()))}return qe.resolve(l)}getAllFromCollectionGroup(e,t,s,a){tn()}Cs(e,t){return qe.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new c_(this)}getSize(e){return qe.resolve(this.size)}}class c_ extends lg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),qe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class yd{constructor(e){this.persistence=e,this.xs=new Va(t=>cu(t),cc),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new py,this.targetCount=0,this.Ms=kl.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),qe.resolve()}getLastRemoteSnapshotVersion(e){return qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),qe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),qe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new kl(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,qe.resolve()}updateTargetData(e,t){return this.Fn(t),qe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,qe.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.xs.forEach((p,D)=>{D.sequenceNumber<=t&&null===s.get(D.targetId)&&(this.xs.delete(p),l.push(this.removeMatchingKeysForTargetId(e,D.targetId)),a++)}),qe.waitFor(l).next(()=>a)}getTargetCount(e){return qe.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return qe.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),qe.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),qe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),qe.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return qe.resolve(s)}containsKey(e,t){return qe.resolve(this.ks.containsKey(t))}}class hg{constructor(e,t){this.$s={},this.overlays={},this.Os=new Oo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new yd(this),this.indexManager=new o_,this.remoteDocumentCache=new sE(s=>this.referenceDelegate.Ls(s)),this.serializer=new Xp(t),this.qs=new rE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new gy(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){xt("MemoryPersistence","Starting transaction:",e);const a=new my(this.Os.next());return this.referenceDelegate.Us(),s(a).next(l=>this.referenceDelegate.Ks(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Gs(e,t){return qe.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class my extends Ft{constructor(e){super(),this.currentSequenceNumber=e}}class Sc{constructor(e){this.persistence=e,this.Qs=new py,this.js=null}static zs(e){return new Sc(e)}get Ws(){if(this.js)return this.js;throw tn()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),qe.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),qe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),qe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Ws.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qe.forEach(this.Ws,s=>{const a=Lt.fromPath(s);return this.Hs(e,a).next(l=>{l||t.removeEntry(a,Zt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return qe.or([()=>qe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class yy{constructor(e){this.serializer=e}O(e,t,s,a){const l=new Fr("createOrUpgrade",t);var D;s<1&&a>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ec,{unique:!0}),D.createObjectStore("documentMutations"),vy(e),function(D){D.createObjectStore("remoteDocuments")}(e));let p=qe.resolve();return s<3&&a>=3&&(0!==s&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),vy(e)),p=p.next(()=>function(D){const $=D.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zt.min().toTimestamp(),targetCount:0};return $.put("targetGlobalKey",J)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(D,$){return $.store("mutations").j().next(J=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ec,{unique:!0});const le=$.store("mutations"),Me=J.map(at=>le.put(at));return qe.waitFor(Me)})}(e,l))),p=p.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ys(l))),s<6&&a>=6&&(p=p.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(l)))),s<7&&a>=7&&(p=p.next(()=>this.Zs(l))),s<8&&a>=8&&(p=p.next(()=>this.ti(e,l))),s<9&&a>=9&&(p=p.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.ei(l))),s<11&&a>=11&&(p=p.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(D){const $=D.createObjectStore("documentOverlays",{keyPath:vl});$.createIndex("collectionPathOverlayIndex",Zc,{unique:!1}),$.createIndex("collectionGroupOverlayIndex",Zd,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(D){const $=D.createObjectStore("remoteDocumentsV14",{keyPath:nc});$.createIndex("documentKeyIndex",rc),$.createIndex("collectionGroupIndex",gl)}(e)).next(()=>this.ni(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>this.si(e,l))),s<15&&a>=15&&(p=p.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Kc}).createIndex("sequenceNumberIndex",Kd,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:lu}).createIndex("documentKeyIndex",yl,{unique:!1})}(e))),p}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=kf(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>qe.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",p).next(D=>qe.forEach(D,$=>{_n($.userId===l.userId);const J=Dc(this.serializer,$);return Ja(e,l.userId,J).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return s.X((p,D)=>{const $=new wr(p),J=[0,ls($)];l.push(t.get(J).next(le=>le?qe.resolve():t.put({targetId:0,path:ls($),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>qe.waitFor(l))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Su});const s=t.store("collectionParents"),a=new rg,l=p=>{if(a.add(p)){const D=p.lastSegment(),$=p.popLast();return s.put({collectionId:D,parent:ls($)})}};return t.store("remoteDocuments").X({Y:!0},(p,D)=>{const $=new wr(p);return l($.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([p,D,$],J)=>{const le=vi(D);return l(le.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const l=_h(a),p=Jm(this.serializer,l);return t.put(p)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((l,p)=>{const D=t.store("remoteDocumentsV14"),$=(J=p,J.document?new Lt(wr.fromString(J.document.name).popFirst(5)):J.noDocument?Lt.fromSegments(J.noDocument.path):J.unknownDocument?Lt.fromSegments(J.unknownDocument.path):tn()).path.toArray();var J;const le={prefixPath:$.slice(0,$.length-2),collectionGroup:$[$.length-2],documentId:$[$.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(D.put(le))}).next(()=>qe.waitFor(a))}si(e,t){const s=t.store("mutations"),a=dy(this.serializer),l=new hg(Sc.zs,this.serializer.fe);return s.j().next(p=>{const D=new Map;return p.forEach($=>{var J;let le=null!==(J=D.get($.userId))&&void 0!==J?J:pr();Dc(this.serializer,$).keys().forEach(Me=>le=le.add(Me)),D.set($.userId,le)}),qe.forEach(D,($,J)=>{const le=new ei(J),Me=wh.de(this.serializer,le),at=l.getIndexManager(le),_t=xh.de(le,this.serializer,at,l.referenceDelegate);return new fy(a,_t,Me,at).recalculateAndSaveOverlaysForDocumentKeys(new Jc(t,Oo.ct),$).next()})})}}function vy(r){r.createObjectStore("targetDocuments",{keyPath:uu}).createIndex("documentTargetsIndex",ml,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ic,{unique:!0}),r.createObjectStore("targetGlobal")}const fg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pg{constructor(e,t,s,a,l,p,D,$,J,le,Me=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=l,this.window=p,this.document=D,this.ri=J,this.oi=le,this.ui=Me,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=at=>Promise.resolve(),!pg.D())throw new It(it.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cy(this,a),this.di=t+"main",this.serializer=new Xp($),this.wi=new ti(this.di,this.ui,new yy(this.serializer)),this.Bs=new a_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dy(this.serializer),this.qs=new i_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===le&&vs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new It(it.FAILED_PRECONDITION,fg);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Oo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,ae.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ae.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(us(e))return xt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Rh(e).get("owner").next(t=>qe.resolve(this.Ri(t)))}Pi(e){return Bf(e).delete(this.clientId)}bi(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=ks(s,"clientMetadata");return a.j().next(l=>{const p=e.Si(l,18e5),D=l.filter($=>-1===p.indexOf($));return qe.forEach(D,$=>a.delete($.clientId)).next(()=>D)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?qe.resolve(!0):Rh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new It(it.FAILED_PRECONDITION,fg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bf(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,D=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&xt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Jc(t,Oo.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Bf(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return xh.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ig(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return wh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){xt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(p=this.ui)?Yc:14===p?sc:13===p?Qc:12===p?Gu:11===p?ka:void tn();var p;let D;return this.wi.runTransaction(e,a,l,$=>(D=new Jc($,this.Os?this.Os.next():Oo.ct),"readwrite-primary"===t?this.Ti(D).next(J=>!!J||this.Ei(D)).next(J=>{if(!J)throw vs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new It(it.FAILED_PRECONDITION,st);return s(D)}).next(J=>this.vi(D).next(()=>J)):this.Oi(D).next(()=>s(D)))).then($=>(D.raiseOnCommittedEvent(),$))}Oi(e){return Rh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new It(it.FAILED_PRECONDITION,fg)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rh(e).put("owner",t)}static D(){return ti.D()}Ai(e){const t=Rh(e);return t.get("owner").next(s=>this.Ri(s)?(xt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):qe.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(vs(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ce.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return xt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return vs("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){vs("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rh(r){return ks(r,"owner")}function Bf(r){return ks(r,"clientMetadata")}function Vf(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class gg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=pr(),a=pr();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new gg(e,t.fromCache,s,a)}}class mg{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(l=>l||this.Gi(e,t,a,s)).next(l=>l||this.Qi(e,t))}Ki(e,t){if(rd(t))return qe.resolve(null);let s=ko(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Dl(t,null,"F"),s=ko(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const p=pr(...l);return this.Ui.getDocuments(e,p).next(D=>this.indexManager.getMinOffset(e,s).next($=>{const J=this.ji(t,D);return this.zi(t,J,p,$.readTime)?this.Ki(e,Dl(t,null,"F")):this.Wi(e,J,t,$)}))})))}Gi(e,t,s,a){return rd(t)||a.isEqual(Zt.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(l=>{const p=this.ji(t,l);return this.zi(t,p,s,a)?this.Qi(e,t):(zu()<=te.in.DEBUG&&xt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),hu(t)),this.Wi(e,p,t,V(a,-1)))})}ji(e,t){let s=new xi(mc(e));return t.forEach((a,l)=>{pc(e,l)&&(s=s.add(l))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Qi(e,t){return zu()<=te.in.DEBUG&&xt("QueryEngine","Using full collection scan to execute query:",hu(t)),this.Ui.getDocumentsMatchingQuery(e,t,_e.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(p=>{l=l.insert(p.key,p)}),l))}}class _y{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new di(Jn),this.Yi=new Va(l=>cu(l),cc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fy(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function jf(r,e,t,s){return new _y(r,e,t,s)}function d_(r,e){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,ae.Z)(function*(r,e){const t=zt(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const p=[],D=[];let $=pr();for(const J of a){p.push(J.batchId);for(const le of J.mutations)$=$.add(le.key)}for(const J of l){D.push(J.batchId);for(const le of J.mutations)$=$.add(le.key)}return t.localDocuments.getDocuments(s,$).next(J=>({er:J,removedBatchIds:p,addedBatchIds:D}))})})}),Mh.apply(this,arguments)}function h_(r,e){const t=zt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Zi.newChangeBuffer({trackRemovals:!0});return function(p,D,$,J){const le=$.batch,Me=le.keys();let at=qe.resolve();return Me.forEach(_t=>{at=at.next(()=>J.getEntry(D,_t)).next(Ut=>{const Xt=$.docVersions.get(_t);_n(null!==Xt),Ut.version.compareTo(Xt)<0&&(le.applyToRemoteDocument(Ut,$),Ut.isValidDocument()&&(Ut.setReadTime($.commitVersion),J.addEntry(Ut)))})}),at.next(()=>p.mutationQueue.removeMutationBatch(D,le))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let D=pr();for(let $=0;$<p.mutationResults.length;++$)p.mutationResults[$].transformResults.length>0&&(D=D.add(p.batch.mutations[$].key));return D}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function f_(r){const e=zt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function vd(r,e){const t=zt(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const D=[];e.targetChanges.forEach((le,Me)=>{const at=a.get(Me);if(!at)return;D.push(t.Bs.removeMatchingKeys(l,le.removedDocuments,Me).next(()=>t.Bs.addMatchingKeys(l,le.addedDocuments,Me)));let _t=at.withSequenceNumber(l.currentSequenceNumber);var Ut,Xt,dn;null!==e.targetMismatches.get(Me)?_t=_t.withResumeToken(Es.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):le.resumeToken.approximateByteSize()>0&&(_t=_t.withResumeToken(le.resumeToken,s)),a=a.insert(Me,_t),Xt=_t,dn=le,(0===(Ut=at).resumeToken.approximateByteSize()||Xt.snapshotVersion.toMicroseconds()-Ut.snapshotVersion.toMicroseconds()>=3e8||dn.addedDocuments.size+dn.modifiedDocuments.size+dn.removedDocuments.size>0)&&D.push(t.Bs.updateTargetData(l,_t))});let $=cs(),J=pr();if(e.documentUpdates.forEach(le=>{e.resolvedLimboDocuments.has(le)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(l,le))}),D.push(yg(l,p,e.documentUpdates).next(le=>{$=le.nr,J=le.sr})),!s.isEqual(Zt.min())){const le=t.Bs.getLastRemoteSnapshotVersion(l).next(Me=>t.Bs.setTargetsMetadata(l,l.currentSequenceNumber,s));D.push(le)}return qe.waitFor(D).next(()=>p.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,$,J)).next(()=>$)}).then(l=>(t.Ji=a,l))}function yg(r,e,t){let s=pr(),a=pr();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let p=cs();return t.forEach((D,$)=>{const J=l.get(D);$.isFoundDocument()!==J.isFoundDocument()&&(a=a.add(D)),$.isNoDocument()&&$.version.isEqual(Zt.min())?(e.removeEntry(D,$.readTime),p=p.insert(D,$)):!J.isValidDocument()||$.version.compareTo(J.version)>0||0===$.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry($),p=p.insert(D,$)):xt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",J.version," Watch version:",$.version)}),{nr:p,sr:a}})}function Ey(r,e){const t=zt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function rl(r,e){const t=zt(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(l=>l?(a=l,qe.resolve(a)):t.Bs.allocateTargetId(s).next(p=>(a=new gu(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function da(r,e,t){return $f.apply(this,arguments)}function $f(){return $f=(0,ae.Z)(function*(r,e,t){const s=zt(r),a=s.Ji.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!us(p))throw p;xt("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),$f.apply(this,arguments)}function Hf(r,e,t){const s=zt(r);let a=Zt.min(),l=pr();return s.persistence.runTransaction("Execute query","readonly",p=>function(D,$,J){const le=zt(D),Me=le.Yi.get(J);return void 0!==Me?qe.resolve(le.Ji.get(Me)):le.Bs.getTargetData($,J)}(s,p,ko(e)).next(D=>{if(D)return a=D.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(p,D.targetId).next($=>{l=$})}).next(()=>s.Hi.getDocumentsMatchingQuery(p,e,t?a:Zt.min(),t?l:pr())).next(D=>(Gf(s,gc(e),D),{documents:D,ir:l})))}function zf(r,e){const t=zt(r),s=zt(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.le(l,e).next(p=>p?p.target:null))}function Bu(r,e){const t=zt(r),s=t.Xi.get(e)||Zt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,V(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Gf(t,e,a),a))}function Gf(r,e,t){let s=r.Xi.get(e)||Zt.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.Xi.set(e,s)}function Ph(){return Ph=(0,ae.Z)(function*(r,e,t,s){const a=zt(r);let l=pr(),p=cs();for(const J of t){const le=e.rr(J.metadata.name);J.document&&(l=l.add(le));const Me=e.ur(J);Me.setReadTime(e.cr(J.metadata.readTime)),p=p.insert(le,Me)}const D=a.Zi.newChangeBuffer({trackRemovals:!0}),$=yield rl(a,(J=s,ko(Yu(wr.fromString(`__bundle__/docs/${J}`)))));var J;return a.persistence.runTransaction("Apply bundle documents","readwrite",J=>yg(J,D,p).next(le=>(D.apply(J),le)).next(le=>a.Bs.removeMatchingKeysForTargetId(J,$.targetId).next(()=>a.Bs.addMatchingKeys(J,l,$.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(J,le.nr,le.sr)).next(()=>le.nr)))}),Ph.apply(this,arguments)}function oE(r,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,ae.Z)(function*(r,e,t=pr()){const s=yield rl(r,ko(Af(e.bundledQuery))),a=zt(r);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=so(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.qs.saveNamedQuery(l,e);const D=s.withResumeToken(Es.EMPTY_BYTE_STRING,p);return a.Ji=a.Ji.insert(D.targetId,D),a.Bs.updateTargetData(l,D).next(()=>a.Bs.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.Bs.addMatchingKeys(l,t,s.targetId)).next(()=>a.qs.saveNamedQuery(l,e))})}),Wf.apply(this,arguments)}function p_(r,e){return`firestore_clients_${r}_${e}`}function Nh(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function _d(r,e){return`firestore_targets_${r}_${e}`}class Ed{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new It(a.error.code,a.error.message))),p?new Ed(e,t,a.state,l):(vs("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ac{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new It(s.error.code,s.error.message))),l?new Ac(e,s.state,a):(vs("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=yc();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=Cu(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new wd(e,l):(vs("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Iy{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Iy(t.clientId,t.onlineState):(vs("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vg{constructor(){this.activeTargetIds=yc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _g{constructor(e,t,s,a,l){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new di(Jn),this.started=!1,this.yr=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.pr=p_(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new vg),this.Tr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const l=e.getItem(p_(e.persistenceKey,a));if(l){const p=wd.ar(a,l);p&&(e.gr=e.gr.insert(p.clientId,p))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(_d(this.persistenceKey,e));if(s){const a=Ac.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_d(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xt("SharedClientState","READ",e,t),t}setItem(e,t){xt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(xt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void vs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(l){let p=Oo.ct;if(null!=l)try{const D=JSON.parse(l);_n("number"==typeof D),p=D}catch(D){vs("SharedClientState","Failed to read sequence number from WebStorage",D)}return p}(s.newValue);a!==Oo.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(l=>t.syncEngine.Qr(l)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new Ed(this.currentUser,e,t,s),l=Nh(this.persistenceKey,this.currentUser,e);this.setItem(l,a.hr())}Cr(e){const t=Nh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=_d(this.persistenceKey,e),l=new Ac(e,t,s);this.setItem(a,l.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return wd.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return Ed.ar(new ei(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return Ac.ar(a,t)}br(e){return Iy.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);xt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),l=this.Sr(s),p=[],D=[];return l.forEach($=>{a.has($)||p.push($)}),a.forEach($=>{l.has($)||D.push($)}),this.syncEngine.Wr(p,D).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=yc();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class by{constructor(){this.Hr=new vg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new vg,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class g_{Yr(e){}shutdown(){}}class Eg{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let wg=null;function Ig(){return null===wg?wg=268435456+Math.round(2147483648*Math.random()):wg++,"0x"+wg.toString(16)}const aE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ty{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Xo="WebChannelConnection";class m_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,l){const p=Ig(),D=this.To(e,t);xt("RestConnection",`Sending RPC '${e}' ${p}:`,D,s);const $={};return this.Eo($,a,l),this.Ao(e,D,$,s).then(J=>(xt("RestConnection",`Received RPC '${e}' ${p}: `,J),J),J=>{throw Lr("RestConnection",`RPC '${e}' ${p} failed with error: `,J,"url: ",D,"request:",s),J})}vo(e,t,s,a,l,p){return this.Io(e,t,s,a,l)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+No,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}To(e,t){return`${this.mo}/v1/${t}:${aE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const l=Ig();return new Promise((p,D)=>{const $=new ys;$.setWithCredentials(!0),$.listenOnce($i.COMPLETE,()=>{try{switch($.getLastErrorCode()){case Ks.NO_ERROR:const le=$.getResponseJson();xt(Xo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(le)),p(le);break;case Ks.TIMEOUT:xt(Xo,`RPC '${e}' ${l} timed out`),D(new It(it.DEADLINE_EXCEEDED,"Request time out"));break;case Ks.HTTP_ERROR:const Me=$.getStatus();if(xt(Xo,`RPC '${e}' ${l} failed with status:`,Me,"response text:",$.getResponseText()),Me>0){let at=$.getResponseJson();Array.isArray(at)&&(at=at[0]);const _t=at?.error;if(_t&&_t.status&&_t.message){const Ut=function(Xt){const dn=Xt.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(dn)>=0?dn:it.UNKNOWN}(_t.status);D(new It(Ut,_t.message))}else D(new It(it.UNKNOWN,"Server responded with status "+$.getStatus()))}else D(new It(it.UNAVAILABLE,"Connection failed."));break;default:tn()}}finally{xt(Xo,`RPC '${e}' ${l} completed.`)}});const J=JSON.stringify(a);xt(Xo,`RPC '${e}' ${l} sending request:`,a),$.send(t,"POST",J,s,15)})}Ro(e,t,s){const a=Ig(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=ur(),D=mi(),$={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},J=this.longPollingOptions.timeoutSeconds;void 0!==J&&($.longPollingTimeout=Math.round(1e3*J)),this.useFetchStreams&&($.xmlHttpFactory=new Pa({})),this.Eo($.initMessageHeaders,t,s),$.encodeInitMessageHeaders=!0;const le=l.join("");xt(Xo,`Creating RPC '${e}' stream ${a}: ${le}`,$);const Me=p.createWebChannel(le,$);let at=!1,_t=!1;const Ut=new Ty({ro:dn=>{_t?xt(Xo,`Not sending because RPC '${e}' stream ${a} is closed:`,dn):(at||(xt(Xo,`Opening RPC '${e}' stream ${a} transport.`),Me.open(),at=!0),xt(Xo,`RPC '${e}' stream ${a} sending:`,dn),Me.send(dn))},oo:()=>Me.close()}),Xt=(dn,vr,si)=>{dn.listen(vr,_r=>{try{si(_r)}catch(Fs){setTimeout(()=>{throw Fs},0)}})};return Xt(Me,Ia.EventType.OPEN,()=>{_t||xt(Xo,`RPC '${e}' stream ${a} transport opened.`)}),Xt(Me,Ia.EventType.CLOSE,()=>{_t||(_t=!0,xt(Xo,`RPC '${e}' stream ${a} transport closed`),Ut.wo())}),Xt(Me,Ia.EventType.ERROR,dn=>{_t||(_t=!0,Lr(Xo,`RPC '${e}' stream ${a} transport errored:`,dn),Ut.wo(new It(it.UNAVAILABLE,"The operation could not be completed")))}),Xt(Me,Ia.EventType.MESSAGE,dn=>{var vr;if(!_t){const si=dn.data[0];_n(!!si);const _r=si,Fs=_r.error||(null===(vr=_r[0])||void 0===vr?void 0:vr.error);if(Fs){xt(Xo,`RPC '${e}' stream ${a} received error:`,Fs);const hs=Fs.status;let ns=function(Yl){const v0=Xe[Yl];if(void 0!==v0)return hn(v0)}(hs),ha=Fs.message;void 0===ns&&(ns=it.INTERNAL,ha="Unknown error status: "+hs+" with message "+Fs.message),_t=!0,Ut.wo(new It(ns,ha)),Me.close()}else xt(Xo,`RPC '${e}' stream ${a} received:`,si),Ut._o(si)}}),Xt(D,Zs.STAT_EVENT,dn=>{dn.stat===ii.PROXY?xt(Xo,`RPC '${e}' stream ${a} detected buffering proxy`):dn.stat===ii.NOPROXY&&xt(Xo,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Ut.fo()},0),Ut}}function qf(){return typeof window<"u"?window:null}function bg(){return typeof document<"u"?document:null}function Kf(r){return new e_(r,!0)}class Dy{constructor(e,t,s=1e3,a=1.5,l=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&xt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class y_{constructor(e,t,s,a,l,p,D,$){this.ii=e,this.$o=s,this.Oo=a,this.connection=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=D,this.listener=$,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Dy(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ae.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ae.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,ae.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===it.RESOURCE_EXHAUSTED?(vs(t.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===it.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new It(it.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,ae.Z)(function*(){e.state=0,e.start()}))}tu(e){return xt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uE extends y_{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.serializer=l}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function X0(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===($=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===$?1:"REMOVE"===$?2:"CURRENT"===$?3:"RESET"===$?4:tn(),a=e.targetChange.targetIds||[],l=function($,J){return $.useProto3Json?(_n(void 0===J||"string"==typeof J),Es.fromBase64String(J||"")):(_n(void 0===J||J instanceof Uint8Array),Es.fromUint8Array(J||new Uint8Array))}(r,e.targetChange.resumeToken),p=e.targetChange.cause,D=p&&function($){const J=void 0===$.code?it.UNKNOWN:hn($.code);return new It(J,$.message||"")}(p);t=new fh(s,a,l,D||null)}else if("documentChange"in e){const s=e.documentChange,a=pu(r,s.document.name),l=so(s.document.updateTime),p=s.document.createTime?so(s.document.createTime):Zt.min(),D=new Oi({mapValue:{fields:s.document.fields}}),$=Ur.newFoundDocument(a,l,p,D);t=new Rl(s.targetIds||[],s.removedTargetIds||[],$.key,$)}else if("documentDelete"in e){const s=e.documentDelete,a=pu(r,s.document),l=s.readTime?so(s.readTime):Zt.min(),p=Ur.newNoDocument(a,l);t=new Rl([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=pu(r,s.document);t=new Rl([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return tn();{const s=e.filter,{count:a=0,unchangedNames:l}=s,p=new Ue(a,l);t=new hd(s.targetId,p)}}var $;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return Zt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Zt.min():l.readTime?so(l.readTime):Zt.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=ku(this.serializer),t.addTarget=function(a,l){let p;const D=l.target;if(p=nd(D)?{documents:Df(a,D)}:{query:yh(a,D)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){p.resumeToken=$m(a,l.resumeToken);const $=Yp(a,l.expectedCount);null!==$&&(p.expectedCount=$)}else if(l.snapshotVersion.compareTo(Zt.min())>0){p.readTime=wc(a,l.snapshotVersion.toTimestamp());const $=Yp(a,l.expectedCount);null!==$&&(p.expectedCount=$)}return p}(this.serializer,e);const s=function Qm(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=ku(this.serializer),t.removeTarget=e,this.Wo(t)}}class lE extends y_{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(_n(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Fu(r,e){return r&&r.length>0?(_n(void 0!==e),r.map(t=>function(s,a){let l=so(s.updateTime?s.updateTime:a);return l.isEqual(Zt.min())&&(l=so(a)),new Jo(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=so(e.commitTime);return this.listener.cu(s,t)}return _n(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=ku(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>fd(this.serializer,s))};this.Wo(t)}}class cE extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new It(it.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Io(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new It(it.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.vo(e,t,s,l,p,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new It(it.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class hE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(vs(t),this.mu=!1):xt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Fl{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(D=>{s.enqueueAndForget((0,ae.Z)(function*(){var $;Ul(p)&&(xt("RemoteStore","Restarting streams for network reachability change."),yield($=(0,ae.Z)(function*(J){const le=zt(J);le.vu.add(4),yield Rc(le),le.bu.set("Unknown"),le.vu.delete(4),yield xc(le)}),function(J){return $.apply(this,arguments)})(p))}))}),this.bu=new hE(s,a)}}function xc(r){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,ae.Z)(function*(r){if(Ul(r))for(const e of r.Ru)yield e(!0)}),Tg.apply(this,arguments)}function Rc(r){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,ae.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),Oh.apply(this,arguments)}function kh(r,e){const t=zt(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Cg(t)?Zf(t):jl(t).Ko()&&Dg(t,e))}function Mc(r,e){const t=zt(r),s=jl(t);t.Au.delete(e),s.Ko()&&il(t,e),0===t.Au.size&&(s.Ko()?s.jo():Ul(t)&&t.bu.set("Unknown"))}function Dg(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Zt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jl(r).su(e)}function il(r,e){r.Vu.qt(e),jl(r).iu(e)}function Zf(r){r.Vu=new Ec({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),jl(r).start(),r.bu.gu()}function Cg(r){return Ul(r)&&!jl(r).Uo()&&r.Au.size>0}function Ul(r){return 0===zt(r).vu.size}function Sg(r){r.Vu=void 0}function v_(r){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,ae.Z)(function*(r){r.Au.forEach((e,t)=>{Dg(r,e)})}),Ag.apply(this,arguments)}function Qf(r,e){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,ae.Z)(function*(r,e){Sg(r),Cg(r)?(r.bu.Iu(e),Zf(r)):r.bu.set("Unknown")}),Bl.apply(this,arguments)}function xg(r,e,t){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,ae.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof fh&&2===e.state&&e.cause)try{yield(s=(0,ae.Z)(function*(a,l){const p=l.cause;for(const D of l.targetIds)a.Au.has(D)&&(yield a.remoteSyncer.rejectListen(D,p),a.Au.delete(D),a.Vu.removeTarget(D))}),function(a,l){return s.apply(this,arguments)})(r,e)}catch(s){xt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Id(r,s)}else if(e instanceof Rl?r.Vu.Ht(e):e instanceof hd?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(Zt.min()))try{const s=yield f_(r.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.Vu.ce(l);return p.targetChanges.forEach((D,$)=>{if(D.resumeToken.approximateByteSize()>0){const J=a.Au.get($);J&&a.Au.set($,J.withResumeToken(D.resumeToken,l))}}),p.targetMismatches.forEach((D,$)=>{const J=a.Au.get(D);if(!J)return;a.Au.set(D,J.withResumeToken(Es.EMPTY_BYTE_STRING,J.snapshotVersion)),il(a,D);const le=new gu(J.target,D,$,J.sequenceNumber);Dg(a,le)}),a.remoteSyncer.applyRemoteEvent(p)}(r,t))}catch(s){xt("RemoteStore","Failed to raise snapshot:",s),yield Id(r,s)}var s}),Vl.apply(this,arguments)}function Id(r,e,t){return bd.apply(this,arguments)}function bd(){return bd=(0,ae.Z)(function*(r,e,t){if(!us(e))throw e;r.vu.add(1),yield Rc(r),r.bu.set("Offline"),t||(t=()=>f_(r.localStore)),r.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){xt("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield xc(r)}))}),bd.apply(this,arguments)}function Rg(r,e){return e().catch(t=>Id(r,t,e))}function Pc(r){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,ae.Z)(function*(r){const e=zt(r),t=sl(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Mg(e);)try{const a=yield Ey(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Sy(e,a)}catch(a){yield Id(e,a)}Yf(e)&&Ay(e)}),Lh.apply(this,arguments)}function Mg(r){return Ul(r)&&r.Eu.length<10}function Sy(r,e){r.Eu.push(e);const t=sl(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function Yf(r){return Ul(r)&&!sl(r).Uo()&&r.Eu.length>0}function Ay(r){sl(r).start()}function fE(r){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,ae.Z)(function*(r){sl(r).hu()}),Pg.apply(this,arguments)}function xy(r){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,ae.Z)(function*(r){const e=sl(r);for(const t of r.Eu)e.uu(t.mutations)}),Ng.apply(this,arguments)}function Ry(r,e,t){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,ae.Z)(function*(r,e,t){const s=r.Eu.shift(),a=E.from(s,e,t);yield Rg(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield Pc(r)}),Jf.apply(this,arguments)}function __(r,e){return va.apply(this,arguments)}function va(){return va=(0,ae.Z)(function*(r,e){var t;e&&sl(r).ou&&(yield(t=(0,ae.Z)(function*(s,a){if(Ht(l=a.code)&&l!==it.ABORTED){const p=s.Eu.shift();sl(s).Qo(),yield Rg(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield Pc(s)}var l}),function(s,a){return t.apply(this,arguments)})(r,e)),Yf(r)&&Ay(r)}),va.apply(this,arguments)}function Og(r,e){return kg.apply(this,arguments)}function kg(){return kg=(0,ae.Z)(function*(r,e){const t=zt(r);t.asyncQueue.verifyOperationInProgress(),xt("RemoteStore","RemoteStore received new credentials");const s=Ul(t);t.vu.add(3),yield Rc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield xc(t)}),kg.apply(this,arguments)}function My(r,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,ae.Z)(function*(r,e){const t=zt(r);e?(t.vu.delete(2),yield xc(t)):e||(t.vu.add(2),yield Rc(t),t.bu.set("Unknown"))}),Lg.apply(this,arguments)}function jl(r){return r.Su||(r.Su=function(e,t,s){const a=zt(e);return a.fu(),new uE(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:v_.bind(null,r),ao:Qf.bind(null,r),nu:xg.bind(null,r)}),r.Ru.push(function(){var e=(0,ae.Z)(function*(t){t?(r.Su.Qo(),Cg(r)?Zf(r):r.bu.set("Unknown")):(yield r.Su.stop(),Sg(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function sl(r){return r.Du||(r.Du=function(e,t,s){const a=zt(e);return a.fu(),new lE(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:fE.bind(null,r),ao:__.bind(null,r),au:xy.bind(null,r),cu:Ry.bind(null,r)}),r.Ru.push(function(){var e=(0,ae.Z)(function*(t){t?(r.Du.Qo(),yield Pc(r)):(yield r.Du.stop(),r.Eu.length>0&&(xt("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class Fg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,D=new Fg(e,t,p,a,l);return D.start(s),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new It(it.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Td(r,e){if(vs("AsyncQueue",`${e}: ${r}`),us(r))return new It(it.UNAVAILABLE,`${e}: ${r}`);throw r}class Dd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Lt.comparator(t.key,s.key):(t,s)=>Lt.comparator(t.key,s.key),this.keyedMap=xu(),this.sortedSet=new di(this.comparator)}static emptySet(e){return new Dd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Dd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Ug{constructor(){this.Cu=new di(Lt.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):tn():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Cd{constructor(e,t,s,a,l,p,D,$,J){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=D,this.excludesMetadataChanges=$,this.hasCachedResults=J}static fromInitialDocuments(e,t,s,a,l){const p=[];return t.forEach(D=>{p.push({type:0,doc:D})}),new Cd(e,t,Dd.emptySet(t),p,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Py{constructor(){this.Nu=void 0,this.listeners=[]}}class E_{constructor(){this.queries=new Va(e=>oh(e),du),this.onlineState="Unknown",this.ku=new Set}}function Bg(r,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,ae.Z)(function*(r,e){const t=zt(r),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new Py),a)try{l.Nu=yield t.onListen(s)}catch(p){const D=Td(p,`Initialization of query '${hu(e.query)}' failed`);return void e.onError(D)}t.queries.set(s,l),l.listeners.push(e),e.Mu(t.onlineState),l.Nu&&e.$u(l.Nu)&&$g(t)}),Xf.apply(this,arguments)}function ep(r,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,ae.Z)(function*(r,e){const t=zt(r),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Vg.apply(this,arguments)}function Vu(r,e){const t=zt(r);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const D of p.listeners)D.$u(a)&&(s=!0);p.Nu=a}}s&&$g(t)}function jg(r,e,t){const s=zt(r),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function $g(r){r.ku.forEach(e=>{e.next()})}class Hg{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Cd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class pE{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class zg{constructor(e){this.serializer=e}rr(e){return pu(this.serializer,e)}ur(e){return e.metadata.exists?qm(this.serializer,e.document,!1):Ur.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return so(e)}}class w_{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ny(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=wr.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new zg(this.serializer);for(const a of e)if(a.metadata.queries){const l=s.rr(a.metadata.name);for(const p of a.metadata.queries){const D=(t.get(p)||pr()).add(l);t.set(p,D)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function wy(r,e,t,s){return Ph.apply(this,arguments)}(e.localStore,new zg(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield oE(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Ny(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Oy{constructor(e){this.key=e}}class tp{constructor(e){this.key=e}}class ky{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=pr(),this.mutatedKeys=pr(),this.tc=mc(e),this.ec=new Dd(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Ug,a=t?t.ec:this.ec;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,D=!1;const $="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,J="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((le,Me)=>{const at=a.get(le),_t=pc(this.query,Me)?Me:null,Ut=!!at&&this.mutatedKeys.has(at.key),Xt=!!_t&&(_t.hasLocalMutations||this.mutatedKeys.has(_t.key)&&_t.hasCommittedMutations);let dn=!1;at&&_t?at.data.isEqual(_t.data)?Ut!==Xt&&(s.track({type:3,doc:_t}),dn=!0):this.rc(at,_t)||(s.track({type:2,doc:_t}),dn=!0,($&&this.tc(_t,$)>0||J&&this.tc(_t,J)<0)&&(D=!0)):!at&&_t?(s.track({type:0,doc:_t}),dn=!0):at&&!_t&&(s.track({type:1,doc:at}),dn=!0,($||J)&&(D=!0)),dn&&(_t?(p=p.add(_t),l=Xt?l.add(le):l.delete(le)):(p=p.delete(le),l=l.delete(le)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const le="F"===this.query.limitType?p.last():p.first();p=p.delete(le.key),l=l.delete(le.key),s.track({type:1,doc:le})}return{ec:p,ic:s,zi:D,mutatedKeys:l}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((J,le)=>function(Me,at){const _t=Ut=>{switch(Ut){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn()}};return _t(Me)-_t(at)}(J.type,le.type)||this.tc(J.doc,le.doc)),this.oc(s);const p=t?this.uc():[],D=0===this.Zu.size&&this.current?1:0,$=D!==this.Xu;return this.Xu=D,0!==l.length||$?{snapshot:new Cd(this.query,e.ec,a,l,e.mutatedKeys,0===D,$,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:p}:{cc:p}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ug,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=pr(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new tp(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Oy(s))}),t}hc(e){this.Yu=e.ir,this.Zu=pr();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Cd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class I_{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class np{constructor(e){this.key=e,this.fc=!1}}class Gg{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.dc={},this.wc=new Va(D=>oh(D),du),this._c=new Map,this.mc=new Set,this.gc=new di(Lt.comparator),this.yc=new Map,this.Ic=new py,this.Tc={},this.Ec=new Map,this.Ac=kl.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function rp(r,e){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,ae.Z)(function*(r,e){const t=ol(r);let s,a;const l=t.wc.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.lc();else{const p=yield rl(t.localStore,ko(e)),D=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Fh(t,e,s,"current"===D,p.resumeToken),t.isPrimaryClient&&kh(t.remoteStore,p)}return a}),Ly.apply(this,arguments)}function Fh(r,e,t,s,a){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,ae.Z)(function*(r,e,t,s,a){r.Rc=(Me,at,_t)=>{return(Ut=(0,ae.Z)(function*(Xt,dn,vr,si){let _r=dn.view.sc(vr);_r.zi&&(_r=yield Hf(Xt.localStore,dn.query,!1).then(({documents:ns})=>dn.view.sc(ns,_r)));const Fs=si&&si.targetChanges.get(dn.targetId),hs=dn.view.applyChanges(_r,Xt.isPrimaryClient,Fs);return Kg(Xt,dn.targetId,hs.cc),hs.snapshot}),function(Xt,dn,vr,si){return Ut.apply(this,arguments)})(r,Me,at,_t);var Ut};const l=yield Hf(r.localStore,e,!0),p=new ky(e,l.ir),D=p.sc(l.documents),$=xl.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),J=p.applyChanges(D,r.isPrimaryClient,$);Kg(r,t,J.cc);const le=new I_(e,t,p);return r.wc.set(e,le),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),J.snapshot}),Fy.apply(this,arguments)}function Uy(r,e){return ip.apply(this,arguments)}function ip(){return ip=(0,ae.Z)(function*(r,e){const t=zt(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(l=>!du(l,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield da(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Mc(t.remoteStore,s.targetId),Sd(t,s.targetId)}).catch(sn))):(Sd(t,s.targetId),yield da(t.localStore,s.targetId,!0))}),ip.apply(this,arguments)}function sp(){return sp=(0,ae.Z)(function*(r,e,t){const s=Rd(r);try{const a=yield function(l,p){const D=zt(l),$=yi.now(),J=p.reduce((at,_t)=>at.add(_t.key),pr());let le,Me;return D.persistence.runTransaction("Locally write mutations","readwrite",at=>{let _t=cs(),Ut=pr();return D.Zi.getEntries(at,J).next(Xt=>{_t=Xt,_t.forEach((dn,vr)=>{vr.isValidDocument()||(Ut=Ut.add(dn))})}).next(()=>D.localDocuments.getOverlayedDocuments(at,_t)).next(Xt=>{le=Xt;const dn=[];for(const vr of p){const si=ld(vr,le.get(vr.key).overlayedDocument);null!=si&&dn.push(new Ou(vr.key,si,aa(si.value.mapValue),Hi.exists(!0)))}return D.mutationQueue.addMutationBatch(at,$,dn,p)}).next(Xt=>{Me=Xt;const dn=Xt.applyToLocalDocumentSet(le,Ut);return D.documentOverlayCache.saveOverlays(at,Xt.batchId,dn)})}).then(()=>({batchId:Me.batchId,changes:mf(le)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,D){let $=l.Tc[l.currentUser.toKey()];$||($=new di(Jn)),$=$.insert(p,D),l.Tc[l.currentUser.toKey()]=$}(s,a.batchId,t),yield ju(s,a.changes),yield Pc(s.remoteStore)}catch(a){const l=Td(a,"Failed to persist write");t.reject(l)}}),sp.apply(this,arguments)}function op(r,e){return vu.apply(this,arguments)}function vu(){return vu=(0,ae.Z)(function*(r,e){const t=zt(r);try{const s=yield vd(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.yc.get(l);p&&(_n(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.fc=!0:a.modifiedDocuments.size>0?_n(p.fc):a.removedDocuments.size>0&&(_n(p.fc),p.fc=!1))}),yield ju(t,s,e)}catch(s){yield sn(s)}}),vu.apply(this,arguments)}function Uh(r,e,t){const s=zt(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((l,p)=>{const D=p.view.Mu(e);D.snapshot&&a.push(D.snapshot)}),function(l,p){const D=zt(l);D.onlineState=p;let $=!1;D.queries.forEach((J,le)=>{for(const Me of le.listeners)Me.Mu(p)&&($=!0)}),$&&$g(D)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function ap(r,e,t){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,ae.Z)(function*(r,e,t){const s=zt(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),l=a&&a.key;if(l){let p=new di(Lt.comparator);p=p.insert(l,Ur.newNoDocument(l,Zt.min()));const D=pr().add(l),$=new tl(Zt.min(),new Map,new di(Jn),p,D);yield op(s,$),s.gc=s.gc.remove(l),s.yc.delete(e),Zg(s)}else yield da(s.localStore,e,!1).then(()=>Sd(s,e,t)).catch(sn)}),Nc.apply(this,arguments)}function b_(r,e){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,ae.Z)(function*(r,e){const t=zt(r),s=e.batch.batchId;try{const a=yield h_(t.localStore,e);jy(t,s,null),qg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield ju(t,a)}catch(a){yield sn(a)}}),Bh.apply(this,arguments)}function Vy(r,e,t){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,ae.Z)(function*(r,e,t){const s=zt(r);try{const a=yield function(l,p){const D=zt(l);return D.persistence.runTransaction("Reject batch","readwrite-primary",$=>{let J;return D.mutationQueue.lookupMutationBatch($,p).next(le=>(_n(null!==le),J=le.keys(),D.mutationQueue.removeMutationBatch($,le))).next(()=>D.mutationQueue.performConsistencyCheck($)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId($,J,p)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys($,J)).next(()=>D.localDocuments.getDocuments($,J))})}(s.localStore,e);jy(s,e,t),qg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield ju(s,a)}catch(a){yield sn(a)}}),Wg.apply(this,arguments)}function Oc(){return Oc=(0,ae.Z)(function*(r,e){const t=zt(r);Ul(t.remoteStore)||xt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=zt(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>p.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=Td(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Oc.apply(this,arguments)}function qg(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function jy(r,e,t){const s=zt(r);let a=s.Tc[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Sd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||D_(r,s)})}function D_(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(Mc(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),Zg(r))}function Kg(r,e,t){for(const s of t)s instanceof Oy?(r.Ic.addReference(s.key,e),C_(r,s)):s instanceof tp?(xt("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||D_(r,s.key)):tn()}function C_(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||(xt("SyncEngine","New document in limbo: "+t),r.mc.add(s),Zg(r))}function Zg(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new Lt(wr.fromString(e)),s=r.Ac.next();r.yc.set(s,new np(t)),r.gc=r.gc.insert(t,s),kh(r.remoteStore,new gu(ko(Yu(t.path)),s,"TargetPurposeLimboResolution",Oo.ct))}}function ju(r,e,t){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,ae.Z)(function*(r,e,t){const s=zt(r),a=[],l=[],p=[];var D;s.wc.isEmpty()||(s.wc.forEach((D,$)=>{p.push(s.Rc($,e,t).then(J=>{if((J||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState($.targetId,J?.fromCache?"not-current":"current"),J){a.push(J);const le=gg.Li($.targetId,J);l.push(le)}}))}),yield Promise.all(p),s.dc.nu(a),yield(D=(0,ae.Z)(function*($,J){const le=zt($);try{yield le.persistence.runTransaction("notifyLocalViewChanges","readwrite",Me=>qe.forEach(J,at=>qe.forEach(at.Fi,_t=>le.persistence.referenceDelegate.addReference(Me,at.targetId,_t)).next(()=>qe.forEach(at.Bi,_t=>le.persistence.referenceDelegate.removeReference(Me,at.targetId,_t)))))}catch(Me){if(!us(Me))throw Me;xt("LocalStore","Failed to update sequence numbers: "+Me)}for(const Me of J){const at=Me.targetId;if(!Me.fromCache){const _t=le.Ji.get(at),Xt=_t.withLastLimboFreeSnapshotVersion(_t.snapshotVersion);le.Ji=le.Ji.insert(at,Xt)}}}),function($,J){return D.apply(this,arguments)})(s.localStore,l))}),Vh.apply(this,arguments)}function S_(r,e){return jh.apply(this,arguments)}function jh(){return jh=(0,ae.Z)(function*(r,e){const t=zt(r);if(!t.currentUser.isEqual(e)){xt("SyncEngine","User change. New user:",e.toKey());const s=yield d_(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(p=>{p.forEach(D=>{D.reject(new It(it.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield ju(t,s.er)}var a}),jh.apply(this,arguments)}function A_(r,e){const t=zt(r),s=t.yc.get(e);if(s&&s.fc)return pr().add(s.key);{let a=pr();const l=t._c.get(e);if(!l)return a;for(const p of l){const D=t.wc.get(p);a=a.unionWith(D.view.nc)}return a}}function x_(r,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,ae.Z)(function*(r,e){const t=zt(r),s=yield Hf(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&Kg(t,e.targetId,a.cc),a}),Qg.apply(this,arguments)}function R_(r,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,ae.Z)(function*(r,e){const t=zt(r);return Bu(t.localStore,e).then(s=>ju(t,s))}),Yg.apply(this,arguments)}function M_(r,e,t,s){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,ae.Z)(function*(r,e,t,s){const a=zt(r),l=yield function(p,D){const $=zt(p),J=zt($.mutationQueue);return $.persistence.runTransaction("Lookup mutation documents","readonly",le=>J.Sn(le,D).next(Me=>Me?$.localDocuments.getDocuments(le,Me):qe.resolve(null)))}(a.localStore,e);var D;null!==l?("pending"===t?yield Pc(a.remoteStore):"acknowledged"===t||"rejected"===t?(jy(a,e,s||null),qg(a,e),D=e,zt(zt(a.localStore).mutationQueue).Cn(D)):tn(),yield ju(a,l)):xt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ad.apply(this,arguments)}function $y(){return $y=(0,ae.Z)(function*(r,e){const t=zt(r);if(ol(t),Rd(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield xd(t,s.toArray());t.vc=!0,yield My(t.remoteStore,!0);for(const l of a)kh(t.remoteStore,l)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(Sd(t,p),da(t.localStore,p,!0))),Mc(t.remoteStore,p)}),yield a,yield xd(t,s),function(l){const p=zt(l);p.yc.forEach((D,$)=>{Mc(p.remoteStore,$)}),p.Ic.Ts(),p.yc=new Map,p.gc=new di(Lt.comparator)}(t),t.vc=!1,yield My(t.remoteStore,!1)}}),$y.apply(this,arguments)}function xd(r,e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,ae.Z)(function*(r,e,t){const s=zt(r),a=[],l=[];for(const p of e){let D;const $=s._c.get(p);if($&&0!==$.length){D=yield rl(s.localStore,ko($[0]));for(const J of $){const le=s.wc.get(J),Me=yield x_(s,le);Me.snapshot&&l.push(Me.snapshot)}}else{const J=yield zf(s.localStore,p);D=yield rl(s.localStore,J),yield Fh(s,Hy(J),p,!1,D.resumeToken)}a.push(D)}return s.dc.nu(l),a}),Jg.apply(this,arguments)}function Hy(r){return ih(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Xg(r){const e=zt(r);return zt(zt(e.localStore).persistence).$i()}function P_(r,e,t,s){return Xa.apply(this,arguments)}function Xa(){return Xa=(0,ae.Z)(function*(r,e,t,s){const a=zt(r);if(a.vc)return void xt("SyncEngine","Ignoring unexpected query state notification.");const l=a._c.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const p=yield Bu(a.localStore,gc(l[0])),D=tl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Es.EMPTY_BYTE_STRING);yield ju(a,p,D);break}case"rejected":yield da(a.localStore,e,!0),Sd(a,e,s);break;default:tn()}}),Xa.apply(this,arguments)}function $h(r,e,t){return Uo.apply(this,arguments)}function Uo(){return Uo=(0,ae.Z)(function*(r,e,t){const s=ol(r);if(s.vc){for(const a of e){if(s._c.has(a)){xt("SyncEngine","Adding an already active target "+a);continue}const l=yield zf(s.localStore,a),p=yield rl(s.localStore,l);yield Fh(s,Hy(l),p.targetId,!1,p.resumeToken),kh(s.remoteStore,p)}for(const a of t)s._c.has(a)&&(yield da(s.localStore,a,!1).then(()=>{Mc(s.remoteStore,a),Sd(s,a)}).catch(sn))}}),Uo.apply(this,arguments)}function ol(r){const e=zt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=op.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ap.bind(null,e),e.dc.nu=Vu.bind(null,e.eventManager),e.dc.Pc=jg.bind(null,e.eventManager),e}function Rd(r){const e=zt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vy.bind(null,e),e}class Lc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.serializer=Kf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return jf(this.persistence,new mg,e.initialUser,this.serializer)}createPersistence(e){return new hg(Sc.zs,this.serializer)}createSharedClientState(e){return new by}terminate(){var e=this;return(0,ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $l extends Lc{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,ae.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Rd(s.Vc.syncEngine),yield Pc(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return jf(this.persistence,new mg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new ug(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new bo(t,this.persistence);return new Oa(e.asyncQueue,s)}createPersistence(e){const t=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ca.withCacheSize(this.cacheSizeBytes):ca.DEFAULT;return new pg(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,qf(),bg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new by}}class Fc extends $l{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,ae.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof _g&&(s.sharedClientState.syncEngine={jr:M_.bind(null,a),zr:P_.bind(null,a),Wr:$h.bind(null,a),$i:Xg.bind(null,a),Qr:R_.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var l=(0,ae.Z)(function*(p){yield function kc(r,e){return $y.apply(this,arguments)}(s.Vc.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=qf();if(!_g.D(t))throw new It(it.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _g(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class _u{initialize(e,t){var s=this;return(0,ae.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>Uh(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=S_.bind(null,s.syncEngine),yield My(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new E_}createDatastore(e){const t=Kf(e.databaseInfo.databaseId),s=new m_(e.databaseInfo);return new cE(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=D=>Uh(this.syncEngine,D,0),p=Eg.D()?new Eg:new g_,new Fl(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,D,$,J){const le=new Gg(s,a,l,p,D,$);return J&&(le.vc=!0),le}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ae.Z)(function*(t){const s=zt(t);xt("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield Rc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Uc(r,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class al{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):vs("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Pd{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ar,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const l=yield e.$c(a);return new pE(JSON.parse(l),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ae.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Nd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new It(it.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,ae.Z)(function*(l,p){const D=zt(l),$=ku(D.serializer)+"/documents",J={documents:p.map(_t=>mh(D.serializer,_t))},le=yield D.vo("BatchGetDocuments",$,J,p.length),Me=new Map;le.forEach(_t=>{const Ut=function J0(r,e){return"found"in e?function(t,s){_n(!!s.found);const a=pu(t,s.found.name),l=so(s.found.updateTime),p=s.found.createTime?so(s.found.createTime):Zt.min(),D=new Oi({mapValue:{fields:s.found.fields}});return Ur.newFoundDocument(a,l,p,D)}(r,e):"missing"in e?function(t,s){_n(!!s.missing),_n(!!s.readTime);const a=pu(t,s.missing),l=so(s.readTime);return Ur.newNoDocument(a,l)}(r,e):tn()}(D.serializer,_t);Me.set(Ut.key.toString(),Ut)});const at=[];return p.forEach(_t=>{const Ut=Me.get(_t.toString());_n(!!Ut),at.push(Ut)}),at}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new m(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=Lt.fromPath(a);e.mutations.push(new d(l,e.precondition(l)))}),yield(s=(0,ae.Z)(function*(a,l){const p=zt(a),D=ku(p.serializer)+"/documents",$={writes:l.map(J=>fd(p.serializer,J))};yield p.Io("Commit",D,$)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tn();t=Zt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new It(it.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zt.min())?Hi.exists(!1):Hi.updateTime(t):Hi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zt.min()))throw new It(it.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hi.updateTime(t)}return Hi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Od{constructor(e,t,s,a,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=l,this.Bc=s.maxAttempts,this.qo=new Dy(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ae.Z)(function*(){const t=new Nd(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Uc(l)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Du(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ht(t)}return!1}}class zy{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=ei.UNAUTHENTICATED,this.clientId=su.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,ae.Z)(function*(D){xt("FirestoreClient","Received user=",D.uid),yield l.authCredentialListener(D),l.user=D});return function(D){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(xt("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new It(it.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Td(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Hh(r,e){return up.apply(this,arguments)}function up(){return up=(0,ae.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),xt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,ae.Z)(function*(l){s.isEqual(l)||(yield d_(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),up.apply(this,arguments)}function lp(r,e){return cp.apply(this,arguments)}function cp(){return cp=(0,ae.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield dp(r);xt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>Og(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,l)=>Og(e.remoteStore,l)),r._onlineComponents=e}),cp.apply(this,arguments)}function em(r){return"FirebaseError"===r.name?r.code===it.FAILED_PRECONDITION||r.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function dp(r){return hp.apply(this,arguments)}function hp(){return hp=(0,ae.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Hh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!em(t))throw t;Lr("Error using user provided cache. Falling back to memory cache: "+t),yield Hh(r,new Lc)}}else xt("FirestoreClient","Using default OfflineComponentProvider"),yield Hh(r,new Lc);return r._offlineComponents}),hp.apply(this,arguments)}function zh(r){return tm.apply(this,arguments)}function tm(){return tm=(0,ae.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xt("FirestoreClient","Using user provided OnlineComponentProvider"),yield lp(r,r._uninitializedComponentsProvider._online)):(xt("FirestoreClient","Using default OnlineComponentProvider"),yield lp(r,new _u))),r._onlineComponents}),tm.apply(this,arguments)}function Gy(r){return dp(r).then(e=>e.persistence)}function Gh(r){return dp(r).then(e=>e.localStore)}function Wy(r){return zh(r).then(e=>e.remoteStore)}function fp(r){return zh(r).then(e=>e.syncEngine)}function Hl(r){return nm.apply(this,arguments)}function nm(){return nm=(0,ae.Z)(function*(r){const e=yield zh(r),t=e.eventManager;return t.onListen=rp.bind(null,e.syncEngine),t.onUnlisten=Uy.bind(null,e.syncEngine),t}),nm.apply(this,arguments)}function qy(r,e,t={}){const s=new Ar;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(a,l,p,D,$){const J=new al({next:Me=>{l.enqueueAndForget(()=>ep(a,le));const at=Me.docs.has(p);!at&&Me.fromCache?$.reject(new It(it.UNAVAILABLE,"Failed to get document because the client is offline.")):at&&Me.fromCache&&D&&"server"===D.source?$.reject(new It(it.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):$.resolve(Me)},error:Me=>$.reject(Me)}),le=new Hg(Yu(p.path),J,{includeMetadataChanges:!0,Ku:!0});return Bg(a,le)}(yield Hl(r),r.asyncQueue,e,t,s)})),s.promise}function Wh(r,e,t={}){const s=new Ar;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(a,l,p,D,$){const J=new al({next:Me=>{l.enqueueAndForget(()=>ep(a,le)),Me.fromCache&&"server"===D.source?$.reject(new It(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):$.resolve(Me)},error:Me=>$.reject(Me)}),le=new Hg(p,J,{includeMetadataChanges:!0,Ku:!0});return Bg(a,le)}(yield Hl(r),r.asyncQueue,e,t,s)})),s.promise}function sm(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const vp=new Map;function _p(r,e,t){if(!t)throw new It(it.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Yy(r,e,t,s){if(!0===e&&!0===s)throw new It(it.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function om(r){if(!Lt.isDocumentKey(r))throw new It(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function am(r){if(Lt.isDocumentKey(r))throw new It(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function qh(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":tn()}function ni(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new It(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qh(r);throw new It(it.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Jy(r,e){if(e<=0)throw new It(it.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class um{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new It(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new It(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=sm(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new It(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new It(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new It(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new um({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new It(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new It(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new um(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new pa;switch(t.type){case"firstParty":return new dl(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new It(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vp.get(e);t&&(xt("ComponentProvider","Removing Datastore"),vp.delete(e),t.terminate())}(this),Promise.resolve()}}class Ji{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ji(this.firestore,e,this._key)}}class Bo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Bo(this.firestore,e,this._query)}}class Eu extends Bo{constructor(e,t,s){super(e,t,Yu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ji(this.firestore,null,new Lt(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function lm(r,e,...t){if(r=(0,ce.m9)(r),_p("collection","path",e),r instanceof kd){const s=wr.fromString(e,...t);return am(s),new Eu(r,null,s)}{if(!(r instanceof Ji||r instanceof Eu))throw new It(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(wr.fromString(e,...t));return am(s),new Eu(r.firestore,null,s)}}function Kh(r,e,...t){if(r=(0,ce.m9)(r),1===arguments.length&&(e=su.A()),_p("doc","path",e),r instanceof kd){const s=wr.fromString(e,...t);return om(s),new Ji(r,null,new Lt(s))}{if(!(r instanceof Ji||r instanceof Eu))throw new It(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(wr.fromString(e,...t));return om(s),new Ji(r.firestore,r instanceof Eu?r.converter:null,new Lt(s))}}function cm(r,e){return r=(0,ce.m9)(r),e=(0,ce.m9)(e),(r instanceof Ji||r instanceof Eu)&&(e instanceof Ji||e instanceof Eu)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function wp(r,e){return r=(0,ce.m9)(r),e=(0,ce.m9)(e),r instanceof Bo&&e instanceof Bo&&r.firestore===e.firestore&&du(r._query,e._query)&&r.converter===e.converter}class ev{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Dy(this,"async_queue_retry"),this.Xc=()=>{const t=bg();t&&xt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=bg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=bg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ar;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ae.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!us(t))throw t;xt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,vs("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=Fg.createAndSchedule(this,e,t,s,l=>this.na(l));return this.zc.push(a),a}Zc(){this.Wc&&tn()}verifyOperationInProgress(){}sa(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function tv(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class N_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ds extends kd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new ev,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||nv(this),this._firestoreClient.terminate()}}function Qs(r){return r._firestoreClient||nv(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function nv(r){var e,t,s;const a=r._freezeSettings(),l=(D=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Fa(r._databaseId,D,r._persistenceKey,(J=a).host,J.ssl,J.experimentalForceLongPolling,J.experimentalAutoDetectLongPolling,sm(J.experimentalLongPollingOptions),J.useFetchStreams));var D,J;r._firestoreClient=new zy(r._authCredentials,r._appCheckCredentials,r._queue,l),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function iv(r,e,t){const s=new Ar;return r.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield Hh(r,t),yield lp(r,e),s.resolve()}catch(a){const l=a;if(!em(l))throw l;Lr("Error enabling indexeddb cache. Falling back to memory cache: "+l),s.reject(l)}})).then(()=>s.promise)}function dm(r){if(r._initialized||r._terminated)throw new It(it.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class tu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tu(Es.fromBase64String(e))}catch(t){throw new It(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tu(Es.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new It(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bc{constructor(e){this._methodName=e}}class ja{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new It(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new It(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jn(this._lat,e._lat)||Jn(this._long,e._long)}}const wu=/^__.*__$/;class Iu{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new el(e,this.data,t,this.fieldTransforms)}}class fm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pm(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn()}}class bp{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===l&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Qh(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(pm(this.ca)&&wu.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class U_{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Kf(e)}ya(e,t,s,a=!1){return new bp({ca:e,methodName:t,ga:s,path:Yi.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(r){const e=r._freezeSettings(),t=Kf(r._databaseId);return new U_(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Tp(r,e,t,s,a,l={}){const p=r.ya(l.merge||l.mergeFields?2:0,e,t,a);Bd("Data must be an object, but it was:",p,s);const D=mm(s,p);let $,J;if(l.merge)$=new ho(p.fieldMask),J=p.fieldTransforms;else if(l.mergeFields){const le=[];for(const Me of l.mergeFields){const at=$c(e,Me,t);if(!p.contains(at))throw new It(it.INVALID_ARGUMENT,`Field '${at}' is specified in your field mask but missing from your input data.`);ym(le,at)||le.push(at)}$=new ho(le),J=p.fieldTransforms.filter(Me=>$.covers(Me.field))}else $=null,J=p.fieldTransforms;return new Iu(new Oi(D),$,J)}class jc extends Bc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jc}}function Fd(r,e,t){return new bp({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gm extends Bc{_toFieldTransform(e){return new vc(e.path,new Mu)}isEqual(e){return e instanceof gm}}class uv extends Bc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Fd(this,e,!0),s=this.pa.map(l=>zl(l,t)),a=new Aa(s);return new vc(e.path,a)}isEqual(e){return this===e}}class B_ extends Bc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Fd(this,e,!0),s=this.pa.map(l=>zl(l,t)),a=new Xu(s);return new vc(e.path,a)}isEqual(e){return this===e}}class lv extends Bc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Nu(e.serializer,ua(e.serializer,this.Ia));return new vc(e.path,t)}isEqual(e){return this===e}}function Dp(r,e,t,s){const a=r.ya(1,e,t);Bd("Data must be an object, but it was:",a,s);const l=[],p=Oi.empty();ma(s,($,J)=>{const le=Zh(e,$,t);J=(0,ce.m9)(J);const Me=a.da(le);if(J instanceof jc)l.push(le);else{const at=zl(J,Me);null!=at&&(l.push(le),p.set(le,at))}});const D=new ho(l);return new fm(p,D,a.fieldTransforms)}function Ud(r,e,t,s,a,l){const p=r.ya(1,e,t),D=[$c(e,s,t)],$=[a];if(l.length%2!=0)throw new It(it.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let at=0;at<l.length;at+=2)D.push($c(e,l[at])),$.push(l[at+1]);const J=[],le=Oi.empty();for(let at=D.length-1;at>=0;--at)if(!ym(J,D[at])){const _t=D[at];let Ut=$[at];Ut=(0,ce.m9)(Ut);const Xt=p.da(_t);if(Ut instanceof jc)J.push(_t);else{const dn=zl(Ut,Xt);null!=dn&&(J.push(_t),le.set(_t,dn))}}const Me=new ho(J);return new fm(le,Me,p.fieldTransforms)}function cv(r,e,t,s=!1){return zl(t,r.ya(s?4:3,e))}function zl(r,e){if(Cp(r=(0,ce.m9)(r)))return Bd("Unsupported field value:",e,r),mm(r,e);if(r instanceof Bc)return function(t,s){if(!pm(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let D=zl(p,s.wa(l));null==D&&(D={nullValue:"NULL_VALUE"}),a.push(D),l++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,ce.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ua(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=yi.fromDate(t);return{timestampValue:wc(s.serializer,a)}}if(t instanceof yi){const a=new yi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wc(s.serializer,a)}}if(t instanceof ja)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tu)return{bytesValue:$m(s.serializer,t._byteString)};if(t instanceof Ji){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:bf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${qh(t)}`)}(r,e)}function mm(r,e){const t={};return Wu(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(r,(s,a)=>{const l=zl(a,e.ha(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function Cp(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof yi||r instanceof ja||r instanceof tu||r instanceof Ji||r instanceof Bc)}function Bd(r,e,t){if(!Cp(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=qh(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function $c(r,e,t){if((e=(0,ce.m9)(e))instanceof jo)return e._internalPath;if("string"==typeof e)return Zh(r,e);throw Qh("Field path arguments must be of type string or ",r,!1,void 0,t)}const dv=new RegExp("[~\\*/\\[\\]]");function Zh(r,e,t){if(e.search(dv)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new jo(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Qh(r,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let $="";return(l||p)&&($+=" (found",l&&($+=` in field ${s}`),p&&($+=` in document ${a}`),$+=")"),new It(it.INVALID_ARGUMENT,D+r+$)}function ym(r,e){return r.some(t=>t.isEqual(e))}class Vd{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ji(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hv extends Vd{data(){return super.data()}}function Yh(r,e){return"string"==typeof e?Zh(r,e):e instanceof jo?e._internalPath:e._delegate._internalPath}function vm(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new It(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _m{}class Jh extends _m{}function Gl(r,e,...t){let s=[];e instanceof _m&&s.push(e),s=s.concat(t),function(a){const l=a.filter(D=>D instanceof jd).length,p=a.filter(D=>D instanceof Xh).length;if(l>1||l>0&&p>0)throw new It(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class Xh extends Jh{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Xh(e,t,s)}_apply(e){const t=this._parse(e);return Tm(e._query,t),new Bo(e.firestore,e.converter,sh(e._query,t))}_parse(e){const t=Vc(e.firestore);return function(a,l,p,D,$,J,le){let Me;if($.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new It(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){bm(le,J);const at=[];for(const _t of le)at.push(Im(D,a,_t));Me={arrayValue:{values:at}}}else Me=Im(D,a,le)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||bm(le,J),Me=cv(p,"where",le,"in"===J||"not-in"===J);return Rr.create($,J,Me)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class jd extends _m{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jd(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:bi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let l=s;const p=a.getFlattenedFilters();for(const D of p)Tm(l,D),l=sh(l,D)}(e._query,t),new Bo(e.firestore,e.converter,sh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Em extends Jh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Em(e,t)}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new It(it.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new It(it.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new uc(a,l);return function(D,$){if(null===hc(D)){const J=fc(D);null!==J&&Dm(0,J,$.field)}}(s,p),p}(e._query,this._field,this._direction);return new Bo(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new Ua(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Sp extends Jh{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Sp(e,t,s)}_apply(e){return new Bo(e.firestore,e.converter,Dl(e._query,this._limit,this._limitType))}}class Ap extends Jh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Ap(e,t,s)}_apply(e){const t=wm(e,this.type,this._docOrFields,this._inclusive);return new Bo(e.firestore,e.converter,(a=t,new Ua((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class xp extends Jh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new xp(e,t,s)}_apply(e){const t=wm(e,this.type,this._docOrFields,this._inclusive);return new Bo(e.firestore,e.converter,(a=t,new Ua((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function wm(r,e,t,s){if(t[0]=(0,ce.m9)(t[0]),t[0]instanceof Vd)return function(a,l,p,D,$){if(!D)throw new It(it.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const J=[];for(const le of Ba(a))if(le.field.isKeyField())J.push(Ee(l,D.key));else{const Me=D.data.field(le.field);if(qu(Me))throw new It(it.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+le.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Me){const at=le.field.canonicalString();throw new It(it.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${at}' (used as the orderBy) does not exist.`)}J.push(Me)}return new io(J,$)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=Vc(r.firestore);return function(l,p,D,$,J,le){const Me=l.explicitOrderBy;if(J.length>Me.length)throw new It(it.INVALID_ARGUMENT,`Too many arguments provided to ${$}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const at=[];for(let _t=0;_t<J.length;_t++){const Ut=J[_t];if(Me[_t].field.isKeyField()){if("string"!=typeof Ut)throw new It(it.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${$}(), but got a ${typeof Ut}`);if(!id(l)&&-1!==Ut.indexOf("/"))throw new It(it.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${$}() must be a plain document ID, but '${Ut}' contains a slash.`);const Xt=l.path.child(wr.fromString(Ut));if(!Lt.isDocumentKey(Xt))throw new It(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${$}() must result in a valid document path, but '${Xt}' is not because it contains an odd number of segments.`);const dn=new Lt(Xt);at.push(Ee(p,dn))}else{const Xt=cv(D,$,Ut);at.push(Xt)}}return new io(at,le)}(r._query,r.firestore._databaseId,a,e,t,s)}}function Im(r,e,t){if("string"==typeof(t=(0,ce.m9)(t))){if(""===t)throw new It(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!id(e)&&-1!==t.indexOf("/"))throw new It(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(wr.fromString(t));if(!Lt.isDocumentKey(s))throw new It(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ee(r,new Lt(s))}if(t instanceof Ji)return Ee(r,t._key);throw new It(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(t)}.`)}function bm(r,e){if(!Array.isArray(r)||0===r.length)throw new It(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tm(r,e){if(e.isInequality()){const s=fc(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new It(it.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const l=hc(r);null!==l&&Dm(0,a,l)}const t=function(s,a){for(const l of s)for(const p of l.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new It(it.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Dm(r,e,t){if(!t.isEqual(e))throw new It(it.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Rp{convertValue(e,t="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ni(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ma(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new ja(Ni(e.latitude),Ni(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ac(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(La(e));default:return null}}convertTimestamp(e){const t=Ca(e);return new yi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=wr.fromString(e);_n(Ic(s));const a=new sa(s.get(1),s.get(3)),l=new Lt(s.popFirst(5));return a.isEqual(t)||vs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function $d(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class gv extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ji(this.firestore,null,t)}}class ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wl extends Vd{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Yh("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class zd extends Wl{data(e={}){return super.data(e)}}class ll{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ul(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new zd(this._firestore,this._userDataWriter,s.key,s,new ul(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new It(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new zd(s._firestore,s._userDataWriter,p.doc.key,p.doc,new ul(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const D=new zd(s._firestore,s._userDataWriter,p.doc.key,p.doc,new ul(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let $=-1,J=-1;return 0!==p.type&&($=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),J=l.indexOf(p.doc.key)),{type:wE(p.type),doc:D,oldIndex:$,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn()}}function $n(r,e){return r instanceof Wl&&e instanceof Wl?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof ll&&e instanceof ll&&r._firestore===e._firestore&&wp(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class ql extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ji(this.firestore,null,t)}}function Ls(r,e,t){r=ni(r,Ji);const s=ni(r.firestore,ds),a=$d(r.converter,e,t);return Hc(s,[Tp(Vc(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,Hi.none())])}function Q_(r,e,t,...s){r=ni(r,Ji);const a=ni(r.firestore,ds),l=Vc(a);let p;return p="string"==typeof(e=(0,ce.m9)(e))||e instanceof jo?Ud(l,"updateDoc",r._key,e,t,s):Dp(l,"updateDoc",r._key,e),Hc(a,[p.toMutation(r._key,Hi.exists(!0))])}function vv(r,...e){var t,s,a;r=(0,ce.m9)(r);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||tv(e[p])||(l=e[p],p++);const D={includeMetadataChanges:l.includeMetadataChanges};if(tv(e[p])){const Me=e[p];e[p]=null===(t=Me.next)||void 0===t?void 0:t.bind(Me),e[p+1]=null===(s=Me.error)||void 0===s?void 0:s.bind(Me),e[p+2]=null===(a=Me.complete)||void 0===a?void 0:a.bind(Me)}let $,J,le;if(r instanceof Ji)J=ni(r.firestore,ds),le=Yu(r._key.path),$={next:Me=>{e[p]&&e[p](Np(J,r,Me))},error:e[p+1],complete:e[p+2]};else{const Me=ni(r,Bo);J=ni(Me.firestore,ds),le=Me._query;const at=new ql(J);$={next:_t=>{e[p]&&e[p](new ll(J,at,Me,_t))},error:e[p+1],complete:e[p+2]},vm(r._query)}return function(Me,at,_t,Ut){const Xt=new al(Ut),dn=new Hg(at,Xt,_t);return Me.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return Bg(yield Hl(Me),dn)})),()=>{Xt.Dc(),Me.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return ep(yield Hl(Me),dn)}))}}(Qs(J),le,D,$)}function Hc(r,e){return function(t,s){const a=new Ar;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function By(r,e,t){return sp.apply(this,arguments)}(yield fp(t),s,a)})),a.promise}(Qs(r),e)}function Np(r,e,t){const s=t.docs.get(e._key),a=new ql(r);return new Wl(r,a,e._key,s,new ul(t.hasPendingWrites,t.fromCache),e.converter)}const nf={maxAttempts:5};class Iv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vc(e)}set(e,t,s){this._verifyNotCommitted();const a=Kl(e,this._firestore),l=$d(a.converter,t,s),p=Tp(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,Hi.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=Kl(e,this._firestore);let p;return p="string"==typeof(t=(0,ce.m9)(t))||t instanceof jo?Ud(this._dataReader,"WriteBatch.update",l._key,t,s,a):Dp(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,Hi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Kl(e,this._firestore);return this._mutations=this._mutations.concat(new m(t._key,Hi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new It(it.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kl(r,e){if((r=(0,ce.m9)(r)).firestore!==e)throw new It(it.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class s0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vc(e)}get(e){const t=Kl(e,this._firestore),s=new gv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return tn();const l=a[0];if(l.isFoundDocument())return new Vd(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Vd(this._firestore,s,t._key,null,t.converter);throw tn()})}set(e,t,s){const a=Kl(e,this._firestore),l=$d(a.converter,t,s),p=Tp(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=Kl(e,this._firestore);let p;return p="string"==typeof(t=(0,ce.m9)(t))||t instanceof jo?Ud(this._dataReader,"Transaction.update",l._key,t,s,a):Dp(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=Kl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Kl(e,this._firestore),s=new ql(this._firestore);return super.get(e).then(a=>new Wl(this._firestore,s,t._key,a._document,new ul(!1,!1),t.converter))}}function kp(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new It("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function rf(){if(typeof Uint8Array>"u")throw new It("unimplemented","Uint8Arrays are not available in this environment.")}function Sv(){if(!function Qd(){return typeof atob<"u"}())throw new It("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){No=je.SDK_VERSION,(0,je._registerComponent)(new ye.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const l=t.getProvider("app").getImmediate(),p=new ds(new Ga(t.getProvider("auth-internal")),new Tu(t.getProvider("app-check-internal")),function(D,$){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new It(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(D.options.projectId,$)}(l,s),l);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,je.registerVersion)(Ha,"3.12.0",r),(0,je.registerVersion)(Ha,"3.12.0","esm2017")}();class sf{constructor(e){this._delegate=e}static fromBase64String(e){return Sv(),new sf(tu.fromBase64String(e))}static fromUint8Array(e){return rf(),new sf(tu.fromUint8Array(e))}toBase64(){return Sv(),this._delegate.toBase64()}toUint8Array(){return rf(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Lp(r){return function af(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class l0{enableIndexedDbPersistence(e,t){return function k_(r,e){dm(r=ni(r,ds));const t=Qs(r);if(t._uninitializedComponentsProvider)throw new It(it.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new _u;return iv(t,a,new $l(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function rv(r){dm(r=ni(r,ds));const e=Qs(r);if(e._uninitializedComponentsProvider)throw new It(it.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new _u;return iv(e,s,new Fc(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function sv(r){if(r._initialized&&!r._terminated)throw new It(it.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ar;return r._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(s){if(!ti.D())return Promise.resolve();const a=s+"main";yield ti.delete(a)}),function(s){return t.apply(this,arguments)})(Vf(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Av{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof sa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Ep(r,e,t,s={}){var a;const l=(r=ni(r,kd))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Lr("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,D;if("string"==typeof s.mockUserToken)p=s.mockUserToken,D=ei.MOCK_USER;else{p=(0,ce.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const $=s.mockUserToken.sub||s.mockUserToken.user_id;if(!$)throw new It(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new ei($)}r._authCredentials=new Ta(new za(p,D))}}(this._delegate,e,t,s)}enableNetwork(){return function Ld(r){return function gp(r){return r.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Gy(r),t=yield Wy(r);return e.setNetworkEnabled(!0),function(s){const a=zt(s);return a.vu.delete(0),xc(a)}(t)}))}(Qs(r=ni(r,ds)))}(this._delegate)}disableNetwork(){return function L_(r){return function mp(r){return r.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Gy(r),t=yield Wy(r);return e.setNetworkEnabled(!1),(s=(0,ae.Z)(function*(a){const l=zt(a);l.vu.add(0),yield Rc(l),l.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Qs(r=ni(r,ds)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Yy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ov(r){return function(e){const t=new Ar;return e.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function T_(r,e){return Oc.apply(this,arguments)}(yield fp(e),t)})),t.promise}(Qs(r=ni(r,ds)))}(this._delegate)}onSnapshotsInSync(e){return function _v(r,e){return function Ky(r,e){const t=new al(e);return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return s=yield Hl(r),a=t,zt(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return s=yield Hl(r),a=t,void zt(s).ku.delete(a);var s,a}))}}(Qs(r=ni(r,ds)),tv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new It("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zl(this,lm(this._delegate,e))}catch(t){throw Co(t,"collection()","Firestore.collection()")}}doc(e){try{return new nu(this,Kh(this._delegate,e))}catch(t){throw Co(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _a(this,function Xy(r,e){if(r=ni(r,kd),_p("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new It(it.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bo(r,null,(t=e,new Ua(wr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Co(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function bv(r,e,t){r=ni(r,ds);const s=Object.assign(Object.assign({},nf),t);return function(a){if(a.maxAttempts<1)throw new It(it.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,l,p){const D=new Ar;return a.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const $=yield function pp(r){return zh(r).then(e=>e.datastore)}(a);new Od(a.asyncQueue,$,p,l,D).run()})),D.promise}(Qs(r),a=>e(new s0(r,a)),s)}(this._delegate,t=>e(new xv(this,t)))}batch(){return Qs(this._delegate),new Am(new Iv(this._delegate,e=>Hc(this._delegate,e)))}loadBundle(e){return function av(r,e){const t=Qs(r=ni(r,ds)),s=new N_;return function Zy(r,e,t,s){const a=function(l,p){let D;return D="string"==typeof l?Ra().encode(l):l,$=function($,J){if($ instanceof Uint8Array)return Uc($,J);if($ instanceof ArrayBuffer)return Uc(new Uint8Array($),J);if($ instanceof ReadableStream)return $.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Pd($,p);var $}(t,Kf(e));r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function eu(r,e,t){const s=zt(r);var a;(a=(0,ae.Z)(function*(l,p,D){try{const $=yield p.getMetadata();if(yield function(at,_t){const Ut=zt(at),Xt=so(_t.createTime);return Ut.persistence.runTransaction("hasNewerBundle","readonly",dn=>Ut.qs.getBundleMetadata(dn,_t.id)).then(dn=>!!dn&&dn.createTime.compareTo(Xt)>=0)}(l.localStore,$))return yield p.close(),D._completeWith({taskState:"Success",documentsLoaded:(at=$).totalDocuments,bytesLoaded:at.totalBytes,totalDocuments:at.totalDocuments,totalBytes:at.totalBytes}),Promise.resolve(new Set);D._updateProgress(Ny($));const J=new w_($,l.localStore,p.serializer);let le=yield p.bc();for(;le;){const at=yield J.zu(le);at&&D._updateProgress(at),le=yield p.bc()}const Me=yield J.complete();return yield ju(l,Me.Ju,void 0),yield function(at,_t){const Ut=zt(at);return Ut.persistence.runTransaction("Save bundle","readwrite",Xt=>Ut.qs.saveBundleMetadata(Xt,_t))}(l.localStore,$),D._completeWith(Me.progress),Promise.resolve(Me.Hu)}catch($){return Lr("SyncEngine",`Loading bundle failed with ${$}`),D._failWith($),Promise.resolve(new Set)}var at}),function(l,p,D){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield fp(r),a,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function F_(r,e){return function im(r,e){return r.asyncQueue.enqueue((0,ae.Z)(function*(){return function(t,s){const a=zt(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.qs.getNamedQuery(l,s))}(yield Gh(r),e)}))}(Qs(r=ni(r,ds)),e).then(t=>t?new Bo(r,null,t.query):null)}(this._delegate,e).then(t=>t?new _a(this,t):null)}}class Fp extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new sf(new tu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return nu.forKey(t,this.firestore,null)}}class xv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}get(e){const t=Gc(e);return this._delegate.get(t).then(s=>new uf(this._firestore,new Wl(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Gc(e);return s?(kp("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Gc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Gc(e);return this._delegate.delete(t),this}}class Am{constructor(e){this._delegate=e}set(e,t,s){const a=Gc(e);return s?(kp("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Gc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Gc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zc{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new zd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wd(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=zc.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new zc(e,new Fp(e),t),a.set(t,l)),l}}zc.INSTANCES=new WeakMap;class nu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}static forPath(e,t,s){if(e.length%2!=0)throw new It("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new nu(t,new Ji(t._delegate,s,new Lt(e)))}static forKey(e,t,s){return new nu(t,new Ji(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Zl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zl(this.firestore,lm(this._delegate,e))}catch(t){throw Co(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ce.m9)(e))instanceof Ji&&cm(this._delegate,e)}set(e,t){t=kp("DocumentReference.set",t);try{return t?Ls(this._delegate,e,t):Ls(this._delegate,e)}catch(s){throw Co(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Q_(this._delegate,e):Q_(this._delegate,e,t,...s)}catch(a){throw Co(a,"updateDoc()","DocumentReference.update()")}}delete(){return function mv(r){return Hc(ni(r.firestore,ds),[new m(r._key,Hi.none())])}(this._delegate)}onSnapshot(...e){const t=Rv(e),s=xm(e,a=>new uf(this.firestore,new Wl(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return vv(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function K_(r){r=ni(r,Ji);const e=ni(r.firestore,ds),t=Qs(e),s=new ql(e);return function rm(r,e){const t=new Ar;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(s=(0,ae.Z)(function*(a,l,p){try{const D=yield function($,J){const le=zt($);return le.persistence.runTransaction("read document","readonly",Me=>le.localDocuments.getDocument(Me,J))}(a,l);D.isFoundDocument()?p.resolve(D):D.isNoDocument()?p.resolve(null):p.reject(new It(it.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const $=Td(D,`Failed to get document '${l} from cache`);p.reject($)}}),function(a,l,p){return s.apply(this,arguments)})(yield Gh(r),e,t);var s})),t.promise}(t,r._key).then(a=>new Wl(e,s,r._key,a,new ul(null!==a&&a.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===e?.source?function Gd(r){r=ni(r,Ji);const e=ni(r.firestore,ds);return qy(Qs(e),r._key,{source:"server"}).then(t=>Np(e,r,t))}(this._delegate):function q_(r){r=ni(r,Ji);const e=ni(r.firestore,ds);return qy(Qs(e),r._key).then(t=>Np(e,r,t))}(this._delegate),t.then(s=>new uf(this.firestore,new Wl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new nu(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}function Co(r,e,t){return r.message=r.message.replace(e,t),r}function Rv(r){for(const e of r)if("object"==typeof e&&!Lp(e))return e;return{}}function xm(r,e){var t,s;let a;return a=Lp(r[0])?r[0]:Lp(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class uf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new nu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $n(this._delegate,e._delegate)}}class Wd extends uf{data(e){const t=this._delegate.data(e);return function ba(r,e){r||tn()}(void 0!==t),t}}class _a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}where(e,t,s){try{return new _a(this.firestore,Gl(this._delegate,function V_(r,e,t){const s=e,a=Yh("where",r);return Xh._create(a,s,t)}(e,t,s)))}catch(a){throw Co(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _a(this.firestore,Gl(this._delegate,function j_(r,e="asc"){const t=e,s=Yh("orderBy",r);return Em._create(s,t)}(e,t)))}catch(s){throw Co(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _a(this.firestore,Gl(this._delegate,function $_(r){return Jy("limit",r),Sp._create("limit",r,"F")}(e)))}catch(t){throw Co(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _a(this.firestore,Gl(this._delegate,function H_(r){return Jy("limitToLast",r),Sp._create("limitToLast",r,"L")}(e)))}catch(t){throw Co(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _a(this.firestore,Gl(this._delegate,function z_(...r){return Ap._create("startAt",r,!0)}(...e)))}catch(t){throw Co(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _a(this.firestore,Gl(this._delegate,function G_(...r){return Ap._create("startAfter",r,!1)}(...e)))}catch(t){throw Co(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _a(this.firestore,Gl(this._delegate,function fv(...r){return xp._create("endBefore",r,!1)}(...e)))}catch(t){throw Co(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _a(this.firestore,Gl(this._delegate,function pv(...r){return xp._create("endAt",r,!0)}(...e)))}catch(t){throw Co(t,"endAt()","Query.endAt()")}}isEqual(e){return wp(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Mp(r){r=ni(r,Bo);const e=ni(r.firestore,ds),t=Qs(e),s=new ql(e);return function yp(r,e){const t=new Ar;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(s=(0,ae.Z)(function*(a,l,p){try{const D=yield Hf(a,l,!0),$=new ky(l,D.ir),J=$.sc(D.documents),le=$.applyChanges(J,!1);p.resolve(le.snapshot)}catch(D){const $=Td(D,`Failed to execute query '${l} against cache`);p.reject($)}}),function(a,l,p){return s.apply(this,arguments)})(yield Gh(r),e,t);var s})),t.promise}(t,r._query).then(a=>new ll(e,s,r,a))}(this._delegate):"server"===e?.source?function Pp(r){r=ni(r,Bo);const e=ni(r.firestore,ds),t=Qs(e),s=new ql(e);return Wh(t,r._query,{source:"server"}).then(a=>new ll(e,s,r,a))}(this._delegate):function Z_(r){r=ni(r,Bo);const e=ni(r.firestore,ds),t=Qs(e),s=new ql(e);return vm(r._query),Wh(t,r._query).then(a=>new ll(e,s,r,a))}(this._delegate),t.then(s=>new Rm(this.firestore,new ll(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Rv(e),s=xm(e,a=>new Rm(this.firestore,new ll(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return vv(this._delegate,t,s)}withConverter(e){return new _a(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}class Mv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Wd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Rm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _a(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Mv(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Wd(this._firestore,s))})}isEqual(e){return $n(this._delegate,e._delegate)}}class Zl extends _a{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new nu(this.firestore,e):null}doc(e){try{return new nu(this.firestore,void 0===e?Kh(this._delegate):Kh(this._delegate,e))}catch(t){throw Co(t,"doc()","CollectionReference.doc()")}}add(e){return function yv(r,e){const t=ni(r.firestore,ds),s=Kh(r),a=$d(r.converter,e);return Hc(t,[Tp(Vc(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,Hi.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new nu(this.firestore,t))}isEqual(e){return cm(this._delegate,e._delegate)}withConverter(e){return new Zl(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}function Gc(r){return ni(r,Ji)}class Up{constructor(...e){this._delegate=new jo(...e)}static documentId(){return new Up(Yi.keyField().canonicalString())}isEqual(e){return(e=(0,ce.m9)(e))instanceof jo&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ql{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Dv(){return new gm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ql(e)}static delete(){const e=function Tv(){return new jc("deleteField")}();return e._methodName="FieldValue.delete",new Ql(e)}static arrayUnion(...e){const t=function o0(...r){return new uv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Ql(t)}static arrayRemove(...e){const t=function Cv(...r){return new B_("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Ql(t)}static increment(e){const t=function a0(r){return new lv("increment",r)}(e);return t._methodName="FieldValue.increment",new Ql(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const d0={Firestore:Av,GeoPoint:ja,Timestamp:yi,Blob:sf,Transaction:xv,WriteBatch:Am,DocumentReference:nu,DocumentSnapshot:uf,Query:_a,QueryDocumentSnapshot:Wd,QuerySnapshot:Rm,CollectionReference:Zl,FieldPath:Up,FieldValue:Ql,setLogLevel:function c0(r){!function bu(r){Os.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function f0(r){(function h0(r,e){r.INTERNAL.registerComponent(new ye.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},d0)))})(r,(e,t)=>new Av(e,t,new l0)),r.registerVersion("@firebase/firestore-compat","0.3.9")}(de.Z);var $u=j(3385),p0=j(6217),Pv=j(9260);function Nv(r,e){return function g0(r,e=x.z){return new S.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(r,e)}function Mm(r,e){return Nv(r,e).pipe((0,F.U)(t=>({payload:t,type:"query"})))}function Bp(r,e){return Mm(r,e).pipe((0,K.O)(void 0),U(),(0,F.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,D)=>{const $=a.find(le=>le.doc.ref.isEqual(p.ref)),J=t?.payload.docs.find(le=>le.ref.isEqual(p.ref));$&&JSON.stringify($.doc.metadata)===JSON.stringify(p.metadata)||!$&&J&&JSON.stringify(J.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:p}})}),l}))}function Ov(r,e,t){return Bp(r,t).pipe((0,H.R)((s,a)=>function y0(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function kv(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Pm(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Pm(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Pm(r,e.oldIndex,1)}return r}(r,s))}),r}(s,a.map(l=>l.payload),e),[]),(0,he.x)(),(0,F.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Pm(r,e,t,...s){const a=r.slice();return a.splice(e,t,...s),a}function Nm(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class Lv{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Bp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,F.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,K.O)(void 0),U(),(0,se.h)(([s,a])=>a.length>0||!s),(0,F.U)(([s,a])=>a),O.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,H.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nm(e);return Ov(this.query,t,this.afs.schedulers.outsideAngular).pipe(O.iC)}valueChanges(e={}){return Mm(this.query,this.afs.schedulers.outsideAngular).pipe((0,F.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),O.iC)}get(e){return(0,z.D)(this.query.get(e)).pipe(O.iC)}add(e){return this.ref.add(e)}doc(e){return new Fv(this.ref.doc(e),this.afs)}}class Fv{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=Vp(s,t);return new Lv(a,l,this.afs)}snapshotChanges(){return function m0(r,e){return Nv(r,e).pipe((0,K.O)(void 0),U(),(0,F.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(O.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,F.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,z.D)(this.ref.get(e)).pipe(O.iC)}}class Uv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Bp(this.query,this.afs.schedulers.outsideAngular).pipe((0,F.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,se.h)(t=>t.length>0),O.iC):Bp(this.query,this.afs.schedulers.outsideAngular).pipe(O.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,H.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nm(e);return Ov(this.query,t,this.afs.schedulers.outsideAngular).pipe(O.iC)}valueChanges(e={}){return Mm(this.query,this.afs.schedulers.outsideAngular).pipe((0,F.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),O.iC)}get(e){return(0,z.D)(this.query.get(e)).pipe(O.iC)}}const Bv=new g.OlP("angularfire2.enableFirestorePersistence"),Vv=new g.OlP("angularfire2.firestore.persistenceSettings"),jv=new g.OlP("angularfire2.firestore.settings"),Om=new g.OlP("angularfire2.firestore.use-emulator");function Vp(r,e=(t=>t)){return{query:e(r),ref:r}}let km=(()=>{class r{constructor(t,s,a,l,p,D,$,J,le,Me,at,_t,Ut,Xt,dn,vr,si){this.schedulers=$;const _r=(0,fe.on)(t,D,s),Fs=le;Me&&(0,$u.nw)(_r,D,at,Ut,Xt,dn,_t,vr),[this.firestore,this.persistenceEnabled$]=(0,fe.cc)(`${_r.name}.firestore`,"AngularFirestore",_r.name,()=>{const hs=D.runOutsideAngular(()=>_r.firestore());if(l&&hs.settings(l),Fs&&hs.useEmulator(...Fs),a&&!(0,Ie.PM)(p)){const ns=()=>{try{return(0,z.D)(hs.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(ha){return typeof console<"u"&&console.warn(ha),(0,N.of)(!1)}};return[hs,D.runOutsideAngular(ns)]}return[hs,(0,N.of)(!1)]},[l,Fs,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=Vp(a,s),D=this.schedulers.ngZone.run(()=>l);return new Lv(D,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new Uv(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new Fv(a,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(g.LFG(fe.Dh),g.LFG(fe.xv,8),g.LFG(Bv,8),g.LFG(jv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(O.HU),g.LFG(Vv,8),g.LFG(Om,8),g.LFG($u.zQ,8),g.LFG($u.Qv,8),g.LFG($u.L6,8),g.LFG($u._Q,8),g.LFG($u.rT,8),g.LFG($u.lh,8),g.LFG($u.f7,8),g.LFG(p0.nm,8))},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),Lm=(()=>{class r{constructor(){Pv.Z.registerVersion("angularfire",O.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:Bv,useValue:!0},{provide:Vv,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=g.oAB({type:r}),r.\u0275inj=g.cJS({providers:[km]}),r})()},8445:(Bt,Re,j)=>{"use strict";j.d(Re,{Q1:()=>Yr,TE:()=>ms});var g=j(9751),x=j(9646),S=j(8996),z=j(8372),N=j(4004),O=j(3900),K=j(4976),G=j(4650),B=j(2011),U=j(3942),F=j(5861),H=j(6881),he=j(2090),se=j(4859);const fe="firebasestorage.googleapis.com",Ie="storageBucket";class je extends he.ZR{constructor(W,pe,xe=0){super(te(W),`Firebase Storage: ${pe} (${te(W)})`),this.status_=xe,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,je.prototype)}get status(){return this.status_}set status(W){this.status_=W}_codeEquals(W){return te(W)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(W){this.customData.serverResponse=W,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ye=(()=>{return(Z=ye||(ye={})).UNKNOWN="unknown",Z.OBJECT_NOT_FOUND="object-not-found",Z.BUCKET_NOT_FOUND="bucket-not-found",Z.PROJECT_NOT_FOUND="project-not-found",Z.QUOTA_EXCEEDED="quota-exceeded",Z.UNAUTHENTICATED="unauthenticated",Z.UNAUTHORIZED="unauthorized",Z.UNAUTHORIZED_APP="unauthorized-app",Z.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Z.INVALID_CHECKSUM="invalid-checksum",Z.CANCELED="canceled",Z.INVALID_EVENT_NAME="invalid-event-name",Z.INVALID_URL="invalid-url",Z.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Z.NO_DEFAULT_BUCKET="no-default-bucket",Z.CANNOT_SLICE_BLOB="cannot-slice-blob",Z.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Z.NO_DOWNLOAD_URL="no-download-url",Z.INVALID_ARGUMENT="invalid-argument",Z.INVALID_ARGUMENT_COUNT="invalid-argument-count",Z.APP_DELETED="app-deleted",Z.INVALID_ROOT_OPERATION="invalid-root-operation",Z.INVALID_FORMAT="invalid-format",Z.INTERNAL_ERROR="internal-error",Z.UNSUPPORTED_ENVIRONMENT="unsupported-environment",ye;var Z})();function te(Z){return"storage/"+Z}function ce(){return new je(ye.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ke(){return new je(ye.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ot(){return new je(ye.CANCELED,"User canceled the upload/download.")}function un(){return new je(ye.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Nn(Z){return new je(ye.INVALID_ARGUMENT,Z)}function On(){return new je(ye.APP_DELETED,"The Firebase app was deleted.")}function rn(Z){return new je(ye.INVALID_ROOT_OPERATION,"The operation '"+Z+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wt(Z,W){return new je(ye.INVALID_FORMAT,"String does not match format '"+Z+"': "+W)}function Wn(Z){throw new je(ye.INTERNAL_ERROR,"Internal error: "+Z)}class Cn{constructor(W,pe){this.bucket=W,this.path_=pe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const W=encodeURIComponent;return"/b/"+W(this.bucket)+"/o/"+W(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(W,pe){let xe;try{xe=Cn.makeFromUrl(W,pe)}catch{return new Cn(W,"")}if(""===xe.path)return xe;throw function Et(Z){return new je(ye.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+Z+"'.")}(W)}static makeFromUrl(W,pe){let xe=null;const We="([A-Za-z0-9.\\-_]+)",qt=new RegExp("^gs://"+We+"(/(.*))?$","i");function In(gi){gi.path_=decodeURIComponent(gi.path)}const pi=pe.replace(/[.]/g,"\\."),Xr=[{regex:qt,indices:{bucket:1,path:3},postModify:function dt(gi){"/"===gi.path.charAt(gi.path.length-1)&&(gi.path_=gi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${pi}/v[A-Za-z0-9_]+/b/${We}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:In},{regex:new RegExp(`^https?://${pe===fe?"(?:storage.googleapis.com|storage.cloud.google.com)":pe}/${We}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:In}];for(let gi=0;gi<Xr.length;gi++){const Gs=Xr[gi],os=Gs.regex.exec(W);if(os){let ts=os[Gs.indices.path];ts||(ts=""),xe=new Cn(os[Gs.indices.bucket],ts),Gs.postModify(xe);break}}if(null==xe)throw function Qe(Z){return new je(ye.INVALID_URL,"Invalid URL '"+Z+"'.")}(W);return xe}}class cr{constructor(W){this.promise_=Promise.reject(W)}getPromise(){return this.promise_}cancel(W=!1){}}function Br(Z){return"string"==typeof Z||Z instanceof String}function Pn(Z){return zn()&&Z instanceof Blob}function zn(){return typeof Blob<"u"&&!(0,he.UG)()}function dr(Z,W,pe,xe){if(xe<W)throw Nn(`Invalid value for '${Z}'. Expected ${W} or greater.`);if(xe>pe)throw Nn(`Invalid value for '${Z}'. Expected ${pe} or less.`)}function jt(Z,W,pe){let xe=W;return null==pe&&(xe=`https://${W}`),`${pe}://${xe}/v0${Z}`}function Vr(Z){const W=encodeURIComponent;let pe="?";for(const xe in Z)Z.hasOwnProperty(xe)&&(pe=pe+(W(xe)+"=")+W(Z[xe])+"&");return pe=pe.slice(0,-1),pe}var ri=(()=>{return(Z=ri||(ri={}))[Z.NO_ERROR=0]="NO_ERROR",Z[Z.NETWORK_ERROR=1]="NETWORK_ERROR",Z[Z.ABORT=2]="ABORT",ri;var Z})();function jr(Z,W){const pe=Z>=500&&Z<600,We=-1!==[408,429].indexOf(Z),dt=-1!==W.indexOf(Z);return pe||We||dt}class fs{constructor(W,pe,xe,We,dt,vt,qt,Rt,In,kn,pi,Sr=!0){this.url_=W,this.method_=pe,this.headers_=xe,this.body_=We,this.successCodes_=dt,this.additionalRetryCodes_=vt,this.callback_=qt,this.errorCallback_=Rt,this.timeout_=In,this.progressCallback_=kn,this.connectionFactory_=pi,this.retry=Sr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Jr,Wr)=>{this.resolve_=Jr,this.reject_=Wr,this.start_()})}start_(){const pe=(xe,We)=>{const dt=this.resolve_,vt=this.reject_,qt=We.connection;if(We.wasSuccessCode)try{const Rt=this.callback_(qt,qt.getResponse());!function Ir(Z){return void 0!==Z}(Rt)?dt():dt(Rt)}catch(Rt){vt(Rt)}else if(null!==qt){const Rt=ce();Rt.serverResponse=qt.getErrorText(),vt(this.errorCallback_?this.errorCallback_(qt,Rt):Rt)}else vt(We.canceled?this.appDelete_?On():ot():ke())};this.canceled_?pe(0,new Li(!1,null,!0)):this.backoffId_=function Xn(Z,W,pe){let xe=1,We=null,dt=null,vt=!1,qt=0;function Rt(){return 2===qt}let In=!1;function kn(...Or){In||(In=!0,W.apply(null,Or))}function pi(Or){We=setTimeout(()=>{We=null,Z(Jr,Rt())},Or)}function Sr(){dt&&clearTimeout(dt)}function Jr(Or,...zs){if(In)return void Sr();if(Or)return Sr(),void kn.call(null,Or,...zs);if(Rt()||vt)return Sr(),void kn.call(null,Or,...zs);let Xr;xe<64&&(xe*=2),1===qt?(qt=2,Xr=0):Xr=1e3*(xe+Math.random()),pi(Xr)}let Wr=!1;function ss(Or){Wr||(Wr=!0,Sr(),!In&&(null!==We?(Or||(qt=2),clearTimeout(We),pi(0)):Or||(qt=1)))}return pi(0),dt=setTimeout(()=>{vt=!0,ss(!0)},pe),ss}((xe,We)=>{if(We)return void xe(!1,new Li(!1,null,!0));const dt=this.connectionFactory_();this.pendingConnection_=dt;const vt=qt=>{null!==this.progressCallback_&&this.progressCallback_(qt.loaded,qt.lengthComputable?qt.total:-1)};null!==this.progressCallback_&&dt.addUploadProgressListener(vt),dt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&dt.removeUploadProgressListener(vt),this.pendingConnection_=null;const qt=dt.getErrorCode()===ri.NO_ERROR,Rt=dt.getStatus();if(!qt||jr(Rt,this.additionalRetryCodes_)&&this.retry){const kn=dt.getErrorCode()===ri.ABORT;return void xe(!1,new Li(!1,null,kn))}const In=-1!==this.successCodes_.indexOf(Rt);xe(!0,new Li(In,dt))})},pe,this.timeout_)}getPromise(){return this.promise_}cancel(W){this.canceled_=!0,this.appDelete_=W||!1,null!==this.backoffId_&&function Mr(Z){Z(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Li{constructor(W,pe,xe){this.wasSuccessCode=W,this.connection=pe,this.canceled=!!xe}}function yn(...Z){const W=function Yn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==W){const pe=new W;for(let xe=0;xe<Z.length;xe++)pe.append(Z[xe]);return pe.getBlob()}if(zn())return new Blob(Z);throw new je(ye.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Gt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dr{constructor(W,pe){this.data=W,this.contentType=pe||null}}function Vn(Z,W){switch(Z){case Gt.RAW:return new Dr(_i(W));case Gt.BASE64:case Gt.BASE64URL:return new Dr(Pr(Z,W));case Gt.DATA_URL:return new Dr(function Zr(Z){const W=new Cr(Z);return W.base64?Pr(Gt.BASE64,W.rest):function qn(Z){let W;try{W=decodeURIComponent(Z)}catch{throw wt(Gt.DATA_URL,"Malformed data URL.")}return _i(W)}(W.rest)}(W),function br(Z){return new Cr(Z).contentType}(W))}throw ce()}function _i(Z){const W=[];for(let pe=0;pe<Z.length;pe++){let xe=Z.charCodeAt(pe);xe<=127?W.push(xe):xe<=2047?W.push(192|xe>>6,128|63&xe):55296==(64512&xe)?pe<Z.length-1&&56320==(64512&Z.charCodeAt(pe+1))?(xe=65536|(1023&xe)<<10|1023&Z.charCodeAt(++pe),W.push(240|xe>>18,128|xe>>12&63,128|xe>>6&63,128|63&xe)):W.push(239,191,189):56320==(64512&xe)?W.push(239,191,189):W.push(224|xe>>12,128|xe>>6&63,128|63&xe)}return new Uint8Array(W)}function Pr(Z,W){switch(Z){case Gt.BASE64:{const We=-1!==W.indexOf("-"),dt=-1!==W.indexOf("_");if(We||dt)throw wt(Z,"Invalid character '"+(We?"-":"_")+"' found: is it base64url encoded?");break}case Gt.BASE64URL:{const We=-1!==W.indexOf("+"),dt=-1!==W.indexOf("/");if(We||dt)throw wt(Z,"Invalid character '"+(We?"+":"/")+"' found: is it base64 encoded?");W=W.replace(/-/g,"+").replace(/_/g,"/");break}}let pe;try{pe=function $r(Z){if(typeof atob>"u")throw function St(Z){return new je(ye.UNSUPPORTED_ENVIRONMENT,`${Z} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(Z)}(W)}catch(We){throw We.message.includes("polyfill")?We:wt(Z,"Invalid character found")}const xe=new Uint8Array(pe.length);for(let We=0;We<pe.length;We++)xe[We]=pe.charCodeAt(We);return xe}class Cr{constructor(W){this.base64=!1,this.contentType=null;const pe=W.match(/^data:([^,]+)?,/);if(null===pe)throw wt(Gt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const xe=pe[1]||null;null!=xe&&(this.base64=function Kr(Z,W){return Z.length>=W.length&&Z.substring(Z.length-W.length)===W}(xe,";base64"),this.contentType=this.base64?xe.substring(0,xe.length-7):xe),this.rest=W.substring(W.indexOf(",")+1)}}class Hr{constructor(W,pe){let xe=0,We="";Pn(W)?(this.data_=W,xe=W.size,We=W.type):W instanceof ArrayBuffer?(pe?this.data_=new Uint8Array(W):(this.data_=new Uint8Array(W.byteLength),this.data_.set(new Uint8Array(W))),xe=this.data_.length):W instanceof Uint8Array&&(pe?this.data_=W:(this.data_=new Uint8Array(W.length),this.data_.set(W)),xe=W.length),this.size_=xe,this.type_=We}size(){return this.size_}type(){return this.type_}slice(W,pe){if(Pn(this.data_)){const We=function Tr(Z,W,pe){return Z.webkitSlice?Z.webkitSlice(W,pe):Z.mozSlice?Z.mozSlice(W,pe):Z.slice?Z.slice(W,pe):null}(this.data_,W,pe);return null===We?null:new Hr(We)}{const xe=new Uint8Array(this.data_.buffer,W,pe-W);return new Hr(xe,!0)}}static getBlob(...W){if(zn()){const pe=W.map(xe=>xe instanceof Hr?xe.data_:xe);return new Hr(yn.apply(null,pe))}{const pe=W.map(vt=>Br(vt)?Vn(Gt.RAW,vt).data:vt.data_);let xe=0;pe.forEach(vt=>{xe+=vt.byteLength});const We=new Uint8Array(xe);let dt=0;return pe.forEach(vt=>{for(let qt=0;qt<vt.length;qt++)We[dt++]=vt[qt]}),new Hr(We,!0)}}uploadData(){return this.data_}}function sr(Z){let W;try{W=JSON.parse(Z)}catch{return null}return function gr(Z){return"object"==typeof Z&&!Array.isArray(Z)}(W)?W:null}function Oe(Z){const W=Z.lastIndexOf("/",Z.length-2);return-1===W?Z:Z.slice(W+1)}function Ae(Z,W){return W}class Be{constructor(W,pe,xe,We){this.server=W,this.local=pe||W,this.writable=!!xe,this.xform=We||Ae}}let lt=null;function Mt(){if(lt)return lt;const Z=[];Z.push(new Be("bucket")),Z.push(new Be("generation")),Z.push(new Be("metageneration")),Z.push(new Be("name","fullPath",!0));const pe=new Be("name");pe.xform=function W(dt,vt){return function Ye(Z){return!Br(Z)||Z.length<2?Z:Oe(Z)}(vt)},Z.push(pe);const We=new Be("size");return We.xform=function xe(dt,vt){return void 0!==vt?Number(vt):vt},Z.push(We),Z.push(new Be("timeCreated")),Z.push(new Be("updated")),Z.push(new Be("md5Hash",null,!0)),Z.push(new Be("cacheControl",null,!0)),Z.push(new Be("contentDisposition",null,!0)),Z.push(new Be("contentEncoding",null,!0)),Z.push(new Be("contentLanguage",null,!0)),Z.push(new Be("contentType",null,!0)),Z.push(new Be("metadata","customMetadata",!0)),lt=Z,lt}function or(Z,W,pe){const xe=sr(W);return null===xe?null:function Sn(Z,W,pe){const xe={type:"file"},We=pe.length;for(let dt=0;dt<We;dt++){const vt=pe[dt];xe[vt.local]=vt.xform(xe,W[vt.server])}return function fn(Z,W){Object.defineProperty(Z,"ref",{get:function pe(){const dt=new Cn(Z.bucket,Z.fullPath);return W._makeStorageReference(dt)}})}(xe,Z),xe}(Z,xe,pe)}function De(Z,W){const pe={},xe=W.length;for(let We=0;We<xe;We++){const dt=W[We];dt.writable&&(pe[dt.server]=Z[dt.local])}return JSON.stringify(pe)}const me="prefixes";class ln{constructor(W,pe,xe,We){this.url=W,this.method=pe,this.handler=xe,this.timeout=We,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Je(Z){if(!Z)throw ce()}function Ze(Z,W){return function pe(xe,We){const dt=or(Z,We,W);return Je(null!==dt),dt}}function Jt(Z){return function W(pe,xe){let We;return We=401===pe.getStatus()?pe.getErrorText().includes("Firebase App Check token is invalid")?function Ne(){return new je(ye.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Fe(){return new je(ye.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===pe.getStatus()?function et(Z){return new je(ye.QUOTA_EXCEEDED,"Quota for bucket '"+Z+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Z.bucket):403===pe.getStatus()?function be(Z){return new je(ye.UNAUTHORIZED,"User does not have permission to access '"+Z+"'.")}(Z.path):xe,We.status=pe.getStatus(),We.serverResponse=xe.serverResponse,We}}function An(Z){const W=Jt(Z);return function pe(xe,We){let dt=W(xe,We);return 404===xe.getStatus()&&(dt=function ze(Z){return new je(ye.OBJECT_NOT_FOUND,"Object '"+Z+"' does not exist.")}(Z.path)),dt.serverResponse=We.serverResponse,dt}}function er(Z,W,pe){const We=jt(W.fullServerUrl(),Z.host,Z._protocol),vt=Z.maxOperationRetryTime,qt=new ln(We,"GET",Ze(Z,pe),vt);return qt.errorHandler=An(W),qt}function xr(Z,W,pe,xe,We){const dt={};dt.prefix=W.isRoot?"":W.path+"/",pe&&pe.length>0&&(dt.delimiter=pe),xe&&(dt.pageToken=xe),We&&(dt.maxResults=We);const qt=jt(W.bucketOnlyServerUrl(),Z.host,Z._protocol),In=Z.maxOperationRetryTime,kn=new ln(qt,"GET",function bt(Z,W){return function pe(xe,We){const dt=function kt(Z,W,pe){const xe=sr(pe);return null===xe?null:function ht(Z,W,pe){const xe={prefixes:[],items:[],nextPageToken:pe.nextPageToken};if(pe[me])for(const We of pe[me]){const dt=We.replace(/\/$/,""),vt=Z._makeStorageReference(new Cn(W,dt));xe.prefixes.push(vt)}if(pe.items)for(const We of pe.items){const dt=Z._makeStorageReference(new Cn(W,We.name));xe.items.push(dt)}return xe}(Z,W,xe)}(Z,W,We);return Je(null!==dt),dt}}(Z,W.bucket),In);return kn.urlParams=dt,kn.errorHandler=Jt(W),kn}function Bs(Z,W,pe){const xe=Object.assign({},pe);return xe.fullPath=Z.path,xe.size=W.size(),xe.contentType||(xe.contentType=function Us(Z,W){return Z&&Z.contentType||W&&W.type()||"application/octet-stream"}(null,W)),xe}class Ei{constructor(W,pe,xe,We){this.current=W,this.total=pe,this.finalized=!!xe,this.metadata=We||null}}function Vs(Z,W){let pe=null;try{pe=Z.getResponseHeader("X-Goog-Upload-Status")}catch{Je(!1)}return Je(!!pe&&-1!==(W||["active"]).indexOf(pe)),pe}const rs={STATE_CHANGED:"state_changed"},jn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function js(Z){switch(Z){case"running":case"pausing":case"canceling":return jn.RUNNING;case"paused":return jn.PAUSED;case"success":return jn.SUCCESS;case"canceled":return jn.CANCELED;default:return jn.ERROR}}class Qr{constructor(W,pe,xe){if(function ki(Z){return"function"==typeof Z}(W)||null!=pe||null!=xe)this.next=W,this.error=pe??void 0,this.complete=xe??void 0;else{const dt=W;this.next=dt.next,this.error=dt.error,this.complete=dt.complete}}}function li(Z){return(...W)=>{Promise.resolve().then(()=>Z(...W))}}class is extends class Mi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ri.NO_ERROR,this.sendPromise_=new Promise(W=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ri.ABORT,W()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ri.NETWORK_ERROR,W()}),this.xhr_.addEventListener("load",()=>{W()})})}send(W,pe,xe,We){if(this.sent_)throw Wn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(pe,W,!0),void 0!==We)for(const dt in We)We.hasOwnProperty(dt)&&this.xhr_.setRequestHeader(dt,We[dt].toString());return void 0!==xe?this.xhr_.send(xe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Wn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(W){return this.xhr_.getResponseHeader(W)}addUploadProgressListener(W){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",W)}removeUploadProgressListener(W){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",W)}}{initXhr(){this.xhr_.responseType="text"}}function Nr(){return new is}class ea{constructor(W,pe,xe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=W,this._blob=pe,this._metadata=xe,this._mappings=Mt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=We=>{if(this._request=void 0,this._chunkMultiplier=1,We._codeEquals(ye.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const dt=this.isExponentialBackoffExpired();if(jr(We.status,[])){if(!dt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();We=ke()}this._error=We,this._transition("error")}},this._metadataErrorHandler=We=>{this._request=void 0,We._codeEquals(ye.CANCELED)?this.completeTransitions_():(this._error=We,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((We,dt)=>{this._resolve=We,this._reject=dt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const W=this._transferred;return pe=>this._updateProgress(W+pe)}_shouldDoResumable(W){return W.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(W){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([pe,xe])=>{switch(this._state){case"running":W(pe,xe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((W,pe)=>{const xe=function ps(Z,W,pe,xe,We){const dt=W.bucketOnlyServerUrl(),vt=Bs(W,xe,We),qt={name:vt.fullPath},Rt=jt(dt,Z.host,Z._protocol),kn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${xe.size()}`,"X-Goog-Upload-Header-Content-Type":vt.contentType,"Content-Type":"application/json; charset=utf-8"},pi=De(vt,pe),Wr=new ln(Rt,"POST",function Jr(ss){let Or;Vs(ss);try{Or=ss.getResponseHeader("X-Goog-Upload-URL")}catch{Je(!1)}return Je(Br(Or)),Or},Z.maxUploadRetryTime);return Wr.urlParams=qt,Wr.headers=kn,Wr.body=pi,Wr.errorHandler=Jt(W),Wr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),We=this._ref.storage._makeRequest(xe,Nr,W,pe);this._request=We,We.getPromise().then(dt=>{this._request=void 0,this._uploadUrl=dt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const W=this._uploadUrl;this._resolveToken((pe,xe)=>{const We=function po(Z,W,pe,xe){const Rt=new ln(pe,"POST",function dt(In){const kn=Vs(In,["active","final"]);let pi=null;try{pi=In.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Je(!1)}pi||Je(!1);const Sr=Number(pi);return Je(!isNaN(Sr)),new Ei(Sr,xe.size(),"final"===kn)},Z.maxUploadRetryTime);return Rt.headers={"X-Goog-Upload-Command":"query"},Rt.errorHandler=Jt(W),Rt}(this._ref.storage,this._ref._location,W,this._blob),dt=this._ref.storage._makeRequest(We,Nr,pe,xe);this._request=dt,dt.getPromise().then(vt=>{this._request=void 0,this._updateProgress(vt.current),this._needToFetchStatus=!1,vt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const W=262144*this._chunkMultiplier,pe=new Ei(this._transferred,this._blob.size()),xe=this._uploadUrl;this._resolveToken((We,dt)=>{let vt;try{vt=function Di(Z,W,pe,xe,We,dt,vt,qt){const Rt=new Ei(0,0);if(vt?(Rt.current=vt.current,Rt.total=vt.total):(Rt.current=0,Rt.total=xe.size()),xe.size()!==Rt.total)throw function Ln(){return new je(ye.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const In=Rt.total-Rt.current;let kn=In;We>0&&(kn=Math.min(kn,We));const pi=Rt.current;let Jr="";Jr=0===kn?"finalize":In===kn?"upload, finalize":"upload";const Wr={"X-Goog-Upload-Command":Jr,"X-Goog-Upload-Offset":`${Rt.current}`},ss=xe.slice(pi,pi+kn);if(null===ss)throw un();const Xr=new ln(pe,"POST",function Or(gi,Gs){const os=Vs(gi,["active","final"]),Ro=Rt.current+kn,ts=xe.size();let R;return R="final"===os?Ze(W,dt)(gi,Gs):null,new Ei(Ro,ts,"final"===os,R)},W.maxUploadRetryTime);return Xr.headers=Wr,Xr.body=ss.uploadData(),Xr.progressCallback=qt||null,Xr.errorHandler=Jt(Z),Xr}(this._ref._location,this._ref.storage,xe,this._blob,W,this._mappings,pe,this._makeProgressCallback())}catch(Rt){return this._error=Rt,void this._transition("error")}const qt=this._ref.storage._makeRequest(vt,Nr,We,dt,!1);this._request=qt,qt.getPromise().then(Rt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Rt.current),Rt.finalized?(this._metadata=Rt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((W,pe)=>{const xe=er(this._ref.storage,this._ref._location,this._mappings),We=this._ref.storage._makeRequest(xe,Nr,W,pe);this._request=We,We.getPromise().then(dt=>{this._request=void 0,this._metadata=dt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((W,pe)=>{const xe=function Kn(Z,W,pe,xe,We){const dt=W.bucketOnlyServerUrl(),vt={"X-Goog-Upload-Protocol":"multipart"},Rt=function qt(){let Xr="";for(let gi=0;gi<2;gi++)Xr+=Math.random().toString().slice(2);return Xr}();vt["Content-Type"]="multipart/related; boundary="+Rt;const In=Bs(W,xe,We),kn=De(In,pe),Jr=Hr.getBlob("--"+Rt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+kn+"\r\n--"+Rt+"\r\nContent-Type: "+In.contentType+"\r\n\r\n",xe,"\r\n--"+Rt+"--");if(null===Jr)throw un();const Wr={name:In.fullPath},ss=jt(dt,Z.host,Z._protocol),zs=Z.maxUploadRetryTime,kr=new ln(ss,"POST",Ze(Z,pe),zs);return kr.urlParams=Wr,kr.headers=vt,kr.body=Jr.uploadData(),kr.errorHandler=Jt(W),kr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),We=this._ref.storage._makeRequest(xe,Nr,W,pe);this._request=We,We.getPromise().then(dt=>{this._request=void 0,this._metadata=dt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(W){const pe=this._transferred;this._transferred=W,this._transferred!==pe&&this._notifyObservers()}_transition(W){if(this._state!==W)switch(W){case"canceling":case"pausing":this._state=W,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const pe="paused"===this._state;this._state=W,pe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=W,this._notifyObservers();break;case"canceled":this._error=ot(),this._state=W,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const W=js(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:W,metadata:this._metadata,task:this,ref:this._ref}}on(W,pe,xe,We){const dt=new Qr(pe||void 0,xe||void 0,We||void 0);return this._addObserver(dt),()=>{this._removeObserver(dt)}}then(W,pe){return this._promise.then(W,pe)}catch(W){return this.then(null,W)}_addObserver(W){this._observers.push(W),this._notifyObserver(W)}_removeObserver(W){const pe=this._observers.indexOf(W);-1!==pe&&this._observers.splice(pe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(pe=>{this._notifyObserver(pe)})}_finishPromise(){if(void 0!==this._resolve){let W=!0;switch(js(this._state)){case jn.SUCCESS:li(this._resolve.bind(null,this.snapshot))();break;case jn.CANCELED:case jn.ERROR:li(this._reject.bind(null,this._error))();break;default:W=!1}W&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(W){switch(js(this._state)){case jn.RUNNING:case jn.PAUSED:W.next&&li(W.next.bind(W,this.snapshot))();break;case jn.SUCCESS:W.complete&&li(W.complete.bind(W))();break;default:W.error&&li(W.error.bind(W,this._error))()}}resume(){const W="paused"===this._state||"pausing"===this._state;return W&&this._transition("running"),W}pause(){const W="running"===this._state;return W&&this._transition("pausing"),W}cancel(){const W="running"===this._state||"pausing"===this._state;return W&&this._transition("canceling"),W}}class ar{constructor(W,pe){this._service=W,this._location=pe instanceof Cn?pe:Cn.makeFromUrl(pe,W.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(W,pe){return new ar(W,pe)}get root(){const W=new Cn(this._location.bucket,"");return this._newRef(this._service,W)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Oe(this._location.path)}get storage(){return this._service}get parent(){const W=function ai(Z){if(0===Z.length)return null;const W=Z.lastIndexOf("/");return-1===W?"":Z.slice(0,W)}(this._location.path);if(null===W)return null;const pe=new Cn(this._location.bucket,W);return new ar(this._service,pe)}_throwIfRoot(W){if(""===this._location.path)throw rn(W)}}function yt(Z,W,pe){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,F.Z)(function*(Z,W,pe){const We=yield vn(Z,{pageToken:pe});W.prefixes.push(...We.prefixes),W.items.push(...We.items),null!=We.nextPageToken&&(yield yt(Z,W,We.nextPageToken))})).apply(this,arguments)}function vn(Z,W){null!=W&&"number"==typeof W.maxResults&&dr("options.maxResults",1,1e3,W.maxResults);const pe=W||{},xe=xr(Z.storage,Z._location,"/",pe.pageToken,pe.maxResults);return Z.storage.makeRequestWithTokens(xe,Nr)}function Er(Z){Z._throwIfRoot("getDownloadURL");const W=function Ti(Z,W,pe){const We=jt(W.fullServerUrl(),Z.host,Z._protocol),vt=Z.maxOperationRetryTime,qt=new ln(We,"GET",function Ct(Z,W){return function pe(xe,We){const dt=or(Z,We,W);return Je(null!==dt),function Ce(Z,W,pe,xe){const We=sr(W);if(null===We||!Br(We.downloadTokens))return null;const dt=We.downloadTokens;if(0===dt.length)return null;const vt=encodeURIComponent;return dt.split(",").map(In=>{const pi=Z.fullPath;return jt("/b/"+vt(Z.bucket)+"/o/"+vt(pi),pe,xe)+Vr({alt:"media",token:In})})[0]}(dt,We,Z.host,Z._protocol)}}(Z,pe),vt);return qt.errorHandler=An(W),qt}(Z.storage,Z._location,Mt());return Z.storage.makeRequestWithTokens(W,Nr).then(pe=>{if(null===pe)throw function Dn(){return new je(ye.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return pe})}function Is(Z,W){const pe=function ui(Z,W){const pe=W.split("/").filter(xe=>xe.length>0).join("/");return 0===Z.length?pe:Z+"/"+pe}(Z._location.path,W),xe=new Cn(Z._location.bucket,pe);return new ar(Z.storage,xe)}function gs(Z,W){if(Z instanceof Ds){const pe=Z;if(null==pe._bucket)throw function Dt(){return new je(ye.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ie+"' property when initializing the app?")}();const xe=new ar(pe,pe._bucket);return null!=W?gs(xe,W):xe}return void 0!==W?Is(Z,W):Z}function bs(Z,W){if(W&&function Ui(Z){return/^[A-Za-z]+:\/\//.test(Z)}(W)){if(Z instanceof Ds)return function oo(Z,W){return new ar(Z,W)}(Z,W);throw Nn("To use ref(service, url), the first argument must be a Storage instance.")}return gs(Z,W)}function zo(Z,W){const pe=W?.[Ie];return null==pe?null:Cn.makeFromBucketSpec(pe,Z)}class Ds{constructor(W,pe,xe,We,dt){this.app=W,this._authProvider=pe,this._appCheckProvider=xe,this._url=We,this._firebaseVersion=dt,this._bucket=null,this._host=fe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=We?Cn.makeFromBucketSpec(We,this._host):zo(this._host,this.app.options)}get host(){return this._host}set host(W){this._host=W,this._bucket=null!=this._url?Cn.makeFromBucketSpec(this._url,W):zo(W,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(W){dr("time",0,Number.POSITIVE_INFINITY,W),this._maxUploadRetryTime=W}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(W){dr("time",0,Number.POSITIVE_INFINITY,W),this._maxOperationRetryTime=W}_getAuthToken(){var W=this;return(0,F.Z)(function*(){if(W._overrideAuthToken)return W._overrideAuthToken;const pe=W._authProvider.getImmediate({optional:!0});if(pe){const xe=yield pe.getToken();if(null!==xe)return xe.accessToken}return null})()}_getAppCheckToken(){var W=this;return(0,F.Z)(function*(){const pe=W._appCheckProvider.getImmediate({optional:!0});return pe?(yield pe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(W=>W.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(W){return new ar(this,W)}_makeRequest(W,pe,xe,We,dt=!0){if(this._deleted)return new cr(On());{const vt=function on(Z,W,pe,xe,We,dt,vt=!0){const qt=Vr(Z.urlParams),Rt=Z.url+qt,In=Object.assign({},Z.headers);return function Bn(Z,W){W&&(Z["X-Firebase-GMPID"]=W)}(In,W),function oi(Z,W){null!==W&&W.length>0&&(Z.Authorization="Firebase "+W)}(In,pe),function mr(Z,W){Z["X-Firebase-Storage-Version"]="webjs/"+(W??"AppManager")}(In,dt),function Wt(Z,W){null!==W&&(Z["X-Firebase-AppCheck"]=W)}(In,xe),new fs(Rt,Z.method,In,Z.body,Z.successCodes,Z.additionalRetryCodes,Z.handler,Z.errorHandler,Z.timeout,Z.progressCallback,We,vt)}(W,this._appId,xe,We,pe,this._firebaseVersion,dt);return this._requests.add(vt),vt.getPromise().then(()=>this._requests.delete(vt),()=>this._requests.delete(vt)),vt}}makeRequestWithTokens(W,pe){var xe=this;return(0,F.Z)(function*(){const[We,dt]=yield Promise.all([xe._getAuthToken(),xe._getAppCheckToken()]);return xe._makeRequest(W,pe,We,dt).getPromise()})()}}const mo="@firebase/storage";function zr(Z,W){return bs(Z=(0,he.m9)(Z),W)}function So(Z,{instanceIdentifier:W}){const pe=Z.getProvider("app").getImmediate(),xe=Z.getProvider("auth-internal"),We=Z.getProvider("app-check-internal");return new Ds(pe,xe,We,W,H.SDK_VERSION)}!function to(){(0,H._registerComponent)(new se.wA("storage",So,"PUBLIC").setMultipleInstances(!0)),(0,H.registerVersion)(mo,"0.11.2",""),(0,H.registerVersion)(mo,"0.11.2","esm2017")}();class nr{constructor(W,pe,xe){this._delegate=W,this.task=pe,this.ref=xe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ma{constructor(W,pe){this._delegate=W,this._ref=pe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new nr(this._delegate.snapshot,this,this._ref)}then(W,pe){return this._delegate.then(xe=>{if(W)return W(new nr(xe,this,this._ref))},pe)}on(W,pe,xe,We){let dt;return pe&&(dt="function"==typeof pe?vt=>pe(new nr(vt,this,this._ref)):{next:pe.next?vt=>pe.next(new nr(vt,this,this._ref)):void 0,complete:pe.complete||void 0,error:pe.error||void 0}),this._delegate.on(W,dt,xe||void 0,We||void 0)}}class es{constructor(W,pe){this._delegate=W,this._service=pe}get prefixes(){return this._delegate.prefixes.map(W=>new wi(W,this._service))}get items(){return this._delegate.items.map(W=>new wi(W,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class wi{constructor(W,pe){this._delegate=W,this.storage=pe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(W){const pe=function fi(Z,W){return Is(Z,W)}(this._delegate,W);return new wi(pe,this.storage)}get root(){return new wi(this._delegate.root,this.storage)}get parent(){const W=this._delegate.parent;return null==W?null:new wi(W,this.storage)}put(W,pe){return this._throwIfRoot("put"),new Ma(function Ea(Z,W,pe){return function Ke(Z,W,pe){return Z._throwIfRoot("uploadBytesResumable"),new ea(Z,new Hr(W),pe)}(Z=(0,he.m9)(Z),W,pe)}(this._delegate,W,pe),this)}putString(W,pe=Gt.RAW,xe){this._throwIfRoot("putString");const We=Vn(pe,W),dt=Object.assign({},xe);return null==dt.contentType&&null!=We.contentType&&(dt.contentType=We.contentType),new Ma(new ea(this._delegate,new Hr(We.data,!0),dt),this)}listAll(){return function Ps(Z){return function tt(Z){const W={prefixes:[],items:[]};return yt(Z,W).then(()=>W)}(Z=(0,he.m9)(Z))}(this._delegate).then(W=>new es(W,this.storage))}list(W){return function ta(Z,W){return vn(Z=(0,he.m9)(Z),W)}(this._delegate,W||void 0).then(pe=>new es(pe,this.storage))}getMetadata(){return function Ci(Z){return function tr(Z){Z._throwIfRoot("getMetadata");const W=er(Z.storage,Z._location,Mt());return Z.storage.makeRequestWithTokens(W,Nr)}(Z=(0,he.m9)(Z))}(this._delegate)}updateMetadata(W){return function Si(Z,W){return function Un(Z,W){Z._throwIfRoot("updateMetadata");const pe=function Ri(Z,W,pe,xe){const dt=jt(W.fullServerUrl(),Z.host,Z._protocol),qt=De(pe,xe),In=Z.maxOperationRetryTime,kn=new ln(dt,"PATCH",Ze(Z,xe),In);return kn.headers={"Content-Type":"application/json; charset=utf-8"},kn.body=qt,kn.errorHandler=An(W),kn}(Z.storage,Z._location,W,Mt());return Z.storage.makeRequestWithTokens(pe,Nr)}(Z=(0,he.m9)(Z),W)}(this._delegate,W)}getDownloadURL(){return function Ss(Z){return Er(Z=(0,he.m9)(Z))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function wa(Z){return function eo(Z){Z._throwIfRoot("deleteObject");const W=function Xi(Z,W){const xe=jt(W.fullServerUrl(),Z.host,Z._protocol),qt=new ln(xe,"DELETE",function vt(Rt,In){},Z.maxOperationRetryTime);return qt.successCodes=[200,204],qt.errorHandler=An(W),qt}(Z.storage,Z._location);return Z.storage.makeRequestWithTokens(W,Nr)}(Z=(0,he.m9)(Z))}(this._delegate)}_throwIfRoot(W){if(""===this._delegate._location.path)throw rn(W)}}class Ai{constructor(W,pe){this.app=W,this._delegate=pe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(W){if(Bi(W))throw Nn("ref() expected a child path but got a URL, use refFromURL instead.");return new wi(zr(this._delegate,W),this)}refFromURL(W){if(!Bi(W))throw Nn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cn.makeFromUrl(W,this._delegate.host)}catch{throw Nn("refFromUrl() expected a valid full URL but got an invalid one.")}return new wi(zr(this._delegate,W),this)}setMaxUploadRetryTime(W){this._delegate.maxUploadRetryTime=W}setMaxOperationRetryTime(W){this._delegate.maxOperationRetryTime=W}useEmulator(W,pe,xe={}){!function Pi(Z,W,pe,xe={}){!function Ts(Z,W,pe,xe={}){Z.host=`${W}:${pe}`,Z._protocol="http";const{mockUserToken:We}=xe;We&&(Z._overrideAuthToken="string"==typeof We?We:(0,he.Sg)(We,Z.app.options.projectId))}(Z,W,pe,xe)}(this._delegate,W,pe,xe)}}function Bi(Z){return/^[A-Za-z]+:\/\//.test(Z)}function no(Z,{instanceIdentifier:W}){const pe=Z.getProvider("app-compat").getImmediate(),xe=Z.getProvider("storage").getImmediate({identifier:W});return new Ai(pe,xe)}!function Ao(Z){const W={TaskState:jn,TaskEvent:rs,StringFormat:Gt,Storage:Ai,Reference:wi};Z.INTERNAL.registerComponent(new se.wA("storage-compat",no,"PUBLIC").setServiceProps(W).setMultipleInstances(!0)),Z.registerVersion("@firebase/storage-compat","0.3.2")}(U.Z);var fa=j(6217),uo=j(9260);function Ki(Z){const W=function Hs(Z){return new g.y(W=>{const pe=vt=>W.next(vt);pe(Z.snapshot);const dt=Z.on("state_changed",pe);return Z.then(vt=>{pe(vt),W.complete()},vt=>{pe(Z.snapshot),(vt=>{W.error(vt)})(vt)}),function(){dt()}}).pipe((0,z.b)(0))}(Z);return{task:Z,then:Z.then.bind(Z),catch:Z.catch.bind(Z),pause:Z.pause.bind(Z),cancel:Z.cancel.bind(Z),resume:Z.resume.bind(Z),snapshotChanges:()=>W,percentageChanges:()=>W.pipe((0,N.U)(pe=>pe.bytesTransferred/pe.totalBytes*100))}}function ro(Z){return{getDownloadURL:()=>(0,x.of)(void 0).pipe(K.fc,(0,O.w)(()=>Z.getDownloadURL()),K.iC),getMetadata:()=>(0,x.of)(void 0).pipe(K.fc,(0,O.w)(()=>Z.getMetadata()),K.iC),delete:()=>(0,S.D)(Z.delete()),child:W=>ro(Z.child(W)),updateMetadata:W=>(0,S.D)(Z.updateMetadata(W)),put:(W,pe)=>Ki(Z.put(W,pe)),putString:(W,pe,xe)=>Ki(Z.putString(W,pe,xe)),list:W=>(0,S.D)(Z.list(W)),listAll:()=>(0,S.D)(Z.listAll())}}const Tt=new G.OlP("angularfire2.storageBucket"),Mn=new G.OlP("angularfire2.storage.maxUploadRetryTime"),na=new G.OlP("angularfire2.storage.maxOperationRetryTime"),Ko=new G.OlP("angularfire2.storage.use-emulator");let Yr=(()=>{class Z{constructor(pe,xe,We,dt,vt,qt,Rt,In,kn,pi){const Sr=(0,B.on)(pe,vt,xe);this.storage=(0,B.cc)(`${Sr.name}.storage.${We}`,"AngularFireStorage",Sr.name,()=>{const Jr=vt.runOutsideAngular(()=>Sr.storage(We||void 0)),Wr=kn;return Wr&&Jr.useEmulator(...Wr),Rt&&Jr.setMaxUploadRetryTime(Rt),In&&Jr.setMaxOperationRetryTime(In),Jr},[Rt,In])}ref(pe){return ro(this.storage.ref(pe))}refFromURL(pe){return ro(this.storage.refFromURL(pe))}upload(pe,xe,We){return ro(this.storage.ref(pe)).put(xe,We)}}return Z.\u0275fac=function(pe){return new(pe||Z)(G.LFG(B.Dh),G.LFG(B.xv,8),G.LFG(Tt,8),G.LFG(G.Lbi),G.LFG(G.R0b),G.LFG(K.HU),G.LFG(Mn,8),G.LFG(na,8),G.LFG(Ko,8),G.LFG(fa.nm,8))},Z.\u0275prov=G.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"any"}),Z})(),xo=(()=>{class Z{}return Z.\u0275fac=function(pe){return new(pe||Z)},Z.\u0275mod=G.oAB({type:Z}),Z.\u0275inj=G.cJS({}),Z})(),ms=(()=>{class Z{constructor(){uo.Z.registerVersion("angularfire",K.q4.full,"gcs-compat")}}return Z.\u0275fac=function(pe){return new(pe||Z)},Z.\u0275mod=G.oAB({type:Z}),Z.\u0275inj=G.cJS({providers:[Yr],imports:[xo]}),Z})()},2011:(Bt,Re,j)=>{"use strict";j.d(Re,{Dh:()=>G,GT:()=>O,cc:()=>se,hO:()=>he,on:()=>U,pX:()=>N,xv:()=>B});var g=j(4650),x=j(9260),S=j(4976);Bt=j.hmd(Bt);const z=["ngOnDestroy"],N=(de,ae,je,ye={})=>new Proxy(de,{get:(te,ce)=>je.runOutsideAngular(()=>{var ze;if(de[ce])return!(null===(ze=ye?.spy)||void 0===ze)&&ze.get&&ye.spy.get(ce,de[ce]),de[ce];if(z.indexOf(ce)>-1)return()=>{};const et=ae.toPromise().then(Fe=>{const Ne=Fe&&Fe[ce];return"function"==typeof Ne?Ne.bind(Fe):Ne&&Ne.then?Ne.then(be=>je.run(()=>be)):je.run(()=>Ne)});return new Proxy(()=>{},{get:(Fe,Ne)=>et[Ne],apply:(Fe,Ne,be)=>et.then(ke=>{var ot;const Qe=ke&&ke(...be);return!(null===(ot=ye?.spy)||void 0===ot)&&ot.apply&&ye.spy.apply(ce,be,Qe),Qe})})})}),O=(de,ae)=>{ae.forEach(je=>{Object.getOwnPropertyNames(je.prototype||je).forEach(ye=>{Object.defineProperty(de.prototype,ye,Object.getOwnPropertyDescriptor(je.prototype||je,ye))})})};class K{constructor(ae){return ae}}const G=new g.OlP("angularfire2.app.options"),B=new g.OlP("angularfire2.app.name");function U(de,ae,je){const te="object"==typeof je&&je||{};te.name=te.name||"string"==typeof je&&je||"[DEFAULT]";const ze=x.Z.apps.filter(et=>et&&et.name===te.name)[0]||ae.runOutsideAngular(()=>x.Z.initializeApp(de,te));try{JSON.stringify(de)!==JSON.stringify(ze.options)&&F("error",`${ze.name} Firebase App already initialized with different options${Bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new K(ze)}const F=(de,...ae)=>{(0,g.X6Q)()&&typeof console<"u"&&console[de](...ae)},H={provide:K,useFactory:U,deps:[G,g.R0b,[new g.FiY,B]]};let he=(()=>{class de{constructor(je){x.Z.registerVersion("angularfire",S.q4.full,"core"),x.Z.registerVersion("angularfire",S.q4.full,"app-compat"),x.Z.registerVersion("angular",g.q4F.full,je.toString())}static initializeApp(je,ye){return{ngModule:de,providers:[{provide:G,useValue:je},{provide:B,useValue:ye}]}}}return de.\u0275fac=function(je){return new(je||de)(g.LFG(g.Lbi))},de.\u0275mod=g.oAB({type:de}),de.\u0275inj=g.cJS({providers:[H]}),de})();function se(de,ae,je,ye,te){const[,ce,ze]=globalThis.\u0275AngularfireInstanceCache.find(et=>et[0]===de)||[];if(ce)return function fe(de,ae){try{return de.toString()===ae.toString()}catch{return de===ae}}(te,ze)||(ve("error",`${ae} was already initialized on the ${je} Firebase App with different settings.${Ie?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:te,was:ze})),ce;{const et=ye();return globalThis.\u0275AngularfireInstanceCache.push([de,et,te]),et}}const Ie=!!Bt.hot,ve=(de,...ae)=>{(0,g.X6Q)()&&typeof console<"u"&&console[de](...ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Bt,Re,j)=>{"use strict";j.d(Re,{q4:()=>di,iC:()=>ya,fc:()=>Ku,HU:()=>La,vb:()=>Ni,JM:()=>Ca});var g=j(4650),x=j(259),S=j(5861),z=j(6881),N=j(2090),O=j(4859),K=j(1877);let B,U;const he=new WeakMap,se=new WeakMap,fe=new WeakMap,Ie=new WeakMap,ve=new WeakMap;let je={get(b,M,X){if(b instanceof IDBTransaction){if("done"===M)return se.get(b);if("objectStoreNames"===M)return b.objectStoreNames||fe.get(b);if("store"===M)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return ze(b[M])},set:(b,M,X)=>(b[M]=X,!0),has:(b,M)=>b instanceof IDBTransaction&&("done"===M||"store"===M)||M in b};function ce(b){return"function"==typeof b?function te(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function H(){return U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...M){return b.apply(et(this),M),ze(he.get(this))}:function(...M){return ze(b.apply(et(this),M))}:function(M,...X){const Ee=b.call(et(this),M,...X);return fe.set(Ee,M.sort?M.sort():[M]),ze(Ee)}}(b):(b instanceof IDBTransaction&&function ae(b){if(se.has(b))return;const M=new Promise((X,Ee)=>{const $e=()=>{b.removeEventListener("complete",nt),b.removeEventListener("error",mt),b.removeEventListener("abort",mt)},nt=()=>{X(),$e()},mt=()=>{Ee(b.error||new DOMException("AbortError","AbortError")),$e()};b.addEventListener("complete",nt),b.addEventListener("error",mt),b.addEventListener("abort",mt)});se.set(b,M)}(b),((b,M)=>M.some(X=>b instanceof X))(b,function F(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,je):b)}function ze(b){if(b instanceof IDBRequest)return function de(b){const M=new Promise((X,Ee)=>{const $e=()=>{b.removeEventListener("success",nt),b.removeEventListener("error",mt)},nt=()=>{X(ze(b.result)),$e()},mt=()=>{Ee(b.error),$e()};b.addEventListener("success",nt),b.addEventListener("error",mt)});return M.then(X=>{X instanceof IDBCursor&&he.set(X,b)}).catch(()=>{}),ve.set(M,b),M}(b);if(Ie.has(b))return Ie.get(b);const M=ce(b);return M!==b&&(Ie.set(b,M),ve.set(M,b)),M}const et=b=>ve.get(b),be=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],ot=new Map;function Qe(b,M){if(!(b instanceof IDBDatabase)||M in b||"string"!=typeof M)return;if(ot.get(M))return ot.get(M);const X=M.replace(/FromIndex$/,""),Ee=M!==X,$e=ke.includes(X);if(!(X in(Ee?IDBIndex:IDBObjectStore).prototype)||!$e&&!be.includes(X))return;const nt=function(){var mt=(0,S.Z)(function*(Qt,...$t){const mn=this.transaction(Qt,$e?"readwrite":"readonly");let Zn=mn.store;return Ee&&(Zn=Zn.index($t.shift())),(yield Promise.all([Zn[X](...$t),$e&&mn.done]))[0]});return function($t){return mt.apply(this,arguments)}}();return ot.set(M,nt),nt}!function ye(b){je=b(je)}(b=>({...b,get:(M,X,Ee)=>Qe(M,X)||b.get(M,X,Ee),has:(M,X)=>!!Qe(M,X)||b.has(M,X)}));const Et="@firebase/installations",Ln="w:0.6.4",Dn="FIS_v2",Wn=new N.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Cn(b){return b instanceof N.ZR&&b.code.includes("request-failed")}function cr({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Xn(b){return{token:b.token,requestStatus:2,expiresIn:zn(b.expiresIn),creationTime:Date.now()}}function Mr(b,M){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,S.Z)(function*(b,M){const Ee=(yield M.json()).error;return Wn.create("request-failed",{requestName:b,serverCode:Ee.code,serverMessage:Ee.message,serverStatus:Ee.status})})).apply(this,arguments)}function ki({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function gr(b,{refreshToken:M}){const X=ki(b);return X.append("Authorization",function dr(b){return`${Dn} ${b}`}(M)),X}function Br(b){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,S.Z)(function*(b){const M=yield b();return M.status>=500&&M.status<600?b():M})).apply(this,arguments)}function zn(b){return Number(b.replace("s","000"))}function jt(b,M){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,S.Z)(function*({appConfig:b,heartbeatServiceProvider:M},{fid:X}){const Ee=cr(b),$e=ki(b),nt=M.getImmediate({optional:!0});if(nt){const mn=yield nt.getHeartbeatsHeader();mn&&$e.append("x-firebase-client",mn)}const Qt={method:"POST",headers:$e,body:JSON.stringify({fid:X,authVersion:Dn,appId:b.appId,sdkVersion:Ln})},$t=yield Br(()=>fetch(Ee,Qt));if($t.ok){const mn=yield $t.json();return{fid:mn.fid||X,registrationStatus:2,refreshToken:mn.refreshToken,authToken:Xn(mn.authToken)}}throw yield Mr("Create Installation",$t)})).apply(this,arguments)}function ri(b){return new Promise(M=>{setTimeout(M,b)})}const fs=/^[cdef][\w-]{21}$/;function oi(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const X=function mr(b){return function jr(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return fs.test(X)?X:""}catch{return""}}function Bn(b){return`${b.appName}!${b.appId}`}const Wt=new Map;function on(b,M){const X=Bn(b);Tr(X,M),function $r(b,M){const X=function Dr(){return!Gt&&"BroadcastChannel"in self&&(Gt=new BroadcastChannel("[Firebase] FID Change"),Gt.onmessage=b=>{Tr(b.data.key,b.data.fid)}),Gt}();X&&X.postMessage({key:b,fid:M}),function Vn(){0===Wt.size&&Gt&&(Gt.close(),Gt=null)}()}(X,M)}function Tr(b,M){const X=Wt.get(b);if(X)for(const Ee of X)Ee(M)}let Gt=null;const Pr="firebase-installations-store";let Cr=null;function Zr(){return Cr||(Cr=function Fe(b,M,{blocked:X,upgrade:Ee,blocking:$e,terminated:nt}={}){const mt=indexedDB.open(b,M),Qt=ze(mt);return Ee&&mt.addEventListener("upgradeneeded",$t=>{Ee(ze(mt.result),$t.oldVersion,$t.newVersion,ze(mt.transaction))}),X&&mt.addEventListener("blocked",()=>X()),Qt.then($t=>{nt&&$t.addEventListener("close",()=>nt()),$e&&$t.addEventListener("versionchange",()=>$e())}).catch(()=>{}),Qt}("firebase-installations-database",1,{upgrade:(b,M)=>{0===M&&b.createObjectStore(Pr)}})),Cr}function br(b,M){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,S.Z)(function*(b,M){const X=Bn(b),$e=(yield Zr()).transaction(Pr,"readwrite"),nt=$e.objectStore(Pr),mt=yield nt.get(X);return yield nt.put(M,X),yield $e.done,(!mt||mt.fid!==M.fid)&&on(b,M.fid),M})).apply(this,arguments)}function Hr(b){return sr.apply(this,arguments)}function sr(){return(sr=(0,S.Z)(function*(b){const M=Bn(b),Ee=(yield Zr()).transaction(Pr,"readwrite");yield Ee.objectStore(Pr).delete(M),yield Ee.done})).apply(this,arguments)}function ai(b,M){return ui.apply(this,arguments)}function ui(){return(ui=(0,S.Z)(function*(b,M){const X=Bn(b),$e=(yield Zr()).transaction(Pr,"readwrite"),nt=$e.objectStore(Pr),mt=yield nt.get(X),Qt=M(mt);return void 0===Qt?yield nt.delete(X):yield nt.put(Qt,X),yield $e.done,Qt&&(!mt||mt.fid!==Qt.fid)&&on(b,Qt.fid),Qt})).apply(this,arguments)}function Oe(b){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,S.Z)(function*(b){let M;const X=yield ai(b.appConfig,Ee=>{const $e=Be(Ee),nt=lt(b,$e);return M=nt.registrationPromise,nt.installationEntry});return""===X.fid?{installationEntry:yield M}:{installationEntry:X,registrationPromise:M}})).apply(this,arguments)}function Be(b){return Ce(b||{fid:oi(),registrationStatus:0})}function lt(b,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(Wn.create("app-offline"))};const X={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},Ee=function Ye(b,M){return Mt.apply(this,arguments)}(b,X);return{installationEntry:X,registrationPromise:Ee}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:fn(b)}:{installationEntry:M}}function Mt(){return(Mt=(0,S.Z)(function*(b,M){try{const X=yield jt(b,M);return br(b.appConfig,X)}catch(X){throw Cn(X)&&409===X.customData.serverCode?yield Hr(b.appConfig):yield br(b.appConfig,{fid:M.fid,registrationStatus:0}),X}})).apply(this,arguments)}function fn(b){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,S.Z)(function*(b){let M=yield or(b.appConfig);for(;1===M.registrationStatus;)yield ri(100),M=yield or(b.appConfig);if(0===M.registrationStatus){const{installationEntry:X,registrationPromise:Ee}=yield Oe(b);return Ee||X}return M})).apply(this,arguments)}function or(b){return ai(b,M=>{if(!M)throw Wn.create("installation-not-found");return Ce(M)})}function Ce(b){return function De(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function me(b,M){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,S.Z)(function*({appConfig:b,heartbeatServiceProvider:M},X){const Ee=ht(b,X),$e=gr(b,X),nt=M.getImmediate({optional:!0});if(nt){const mn=yield nt.getHeartbeatsHeader();mn&&$e.append("x-firebase-client",mn)}const Qt={method:"POST",headers:$e,body:JSON.stringify({installation:{sdkVersion:Ln,appId:b.appId}})},$t=yield Br(()=>fetch(Ee,Qt));if($t.ok)return Xn(yield $t.json());throw yield Mr("Generate Auth Token",$t)})).apply(this,arguments)}function ht(b,{fid:M}){return`${cr(b)}/${M}/authTokens:generate`}function kt(b){return ln.apply(this,arguments)}function ln(){return(ln=(0,S.Z)(function*(b,M=!1){let X;const Ee=yield ai(b.appConfig,nt=>{if(!An(nt))throw Wn.create("not-registered");const mt=nt.authToken;if(!M&&er(mt))return nt;if(1===mt.requestStatus)return X=Je(b,M),nt;{if(!navigator.onLine)throw Wn.create("app-offline");const Qt=Fn(nt);return X=Ct(b,Qt),Qt}});return X?yield X:Ee.authToken})).apply(this,arguments)}function Je(b,M){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,S.Z)(function*(b,M){let X=yield bt(b.appConfig);for(;1===X.authToken.requestStatus;)yield ri(100),X=yield bt(b.appConfig);const Ee=X.authToken;return 0===Ee.requestStatus?kt(b,M):Ee})).apply(this,arguments)}function bt(b){return ai(b,M=>{if(!An(M))throw Wn.create("not-registered");return function Ti(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function Ct(b,M){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,S.Z)(function*(b,M){try{const X=yield me(b,M),Ee=Object.assign(Object.assign({},M),{authToken:X});return yield br(b.appConfig,Ee),X}catch(X){if(!Cn(X)||401!==X.customData.serverCode&&404!==X.customData.serverCode){const Ee=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield br(b.appConfig,Ee)}else yield Hr(b.appConfig);throw X}})).apply(this,arguments)}function An(b){return void 0!==b&&2===b.registrationStatus}function er(b){return 2===b.requestStatus&&!function xr(b){const M=Date.now();return M<b.creationTime||b.creationTime+b.expiresIn<M+36e5}(b)}function Fn(b){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:M})}function Xi(){return(Xi=(0,S.Z)(function*(b){const M=b,{installationEntry:X,registrationPromise:Ee}=yield Oe(M);return Ee?Ee.catch(console.error):kt(M).catch(console.error),X.fid})).apply(this,arguments)}function Bs(){return(Bs=(0,S.Z)(function*(b,M=!1){const X=b;return yield Kn(X),(yield kt(X,M)).token})).apply(this,arguments)}function Kn(b){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,S.Z)(function*(b){const{registrationPromise:M}=yield Oe(b);M&&(yield M)})).apply(this,arguments)}function Qr(b){return Wn.create("missing-app-config-values",{valueName:b})}const li="installations",Mi=b=>{const M=b.getProvider("app").getImmediate(),X=function js(b){if(!b||!b.options)throw Qr("App Configuration");if(!b.name)throw Qr("App Name");const M=["projectId","apiKey","appId"];for(const X of M)if(!b.options[X])throw Qr(X);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(M);return{app:M,appConfig:X,heartbeatServiceProvider:(0,z._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},is=b=>{const M=b.getProvider("app").getImmediate(),X=(0,z._getProvider)(M,li).getImmediate();return{getId:()=>function Ri(b){return Xi.apply(this,arguments)}(X),getToken:$e=>function Us(b){return Bs.apply(this,arguments)}(X,$e)}};(function Nr(){(0,z._registerComponent)(new O.wA(li,Mi,"PUBLIC")),(0,z._registerComponent)(new O.wA("installations-internal",is,"PRIVATE"))})(),(0,z.registerVersion)(Et,"0.6.4"),(0,z.registerVersion)(Et,"0.6.4","esm2017");const ws="@firebase/remote-config",ar=new N.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ts{constructor(M,X,Ee,$e){this.client=M,this.storage=X,this.storageCache=Ee,this.logger=$e}isCachedDataFresh(M,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ee=Date.now()-X,$e=Ee<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ee}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${$e}.`),$e}fetch(M){var X=this;return(0,S.Z)(function*(){const[Ee,$e]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if($e&&X.isCachedDataFresh(M.cacheMaxAgeMillis,Ee))return $e;M.eTag=$e&&$e.eTag;const nt=yield X.client.fetch(M),mt=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===nt.status&&mt.push(X.storage.setLastSuccessfulFetchResponse(nt)),yield Promise.all(mt),nt})()}}function Ds(b=navigator){return b.languages&&b.languages[0]||b.language}class mo{constructor(M,X,Ee,$e,nt,mt){this.firebaseInstallations=M,this.sdkVersion=X,this.namespace=Ee,this.projectId=$e,this.apiKey=nt,this.appId=mt}fetch(M){var X=this;return(0,S.Z)(function*(){const[Ee,$e]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,Qt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},$t={sdk_version:X.sdkVersion,app_instance_id:Ee,app_instance_id_token:$e,app_id:X.appId,language_code:Ds()},mn={method:"POST",headers:Qt,body:JSON.stringify($t)},Zn=fetch(mt,mn),rr=new Promise((Ur,io)=>{M.signal.addEventListener(()=>{const El=new Error("The operation was aborted.");El.name="AbortError",io(El)})});let oa;try{yield Promise.race([Zn,rr]),oa=yield Zn}catch(Ur){let io="fetch-client-network";throw"AbortError"===Ur?.name&&(io="fetch-timeout"),ar.create(io,{originalErrorMessage:Ur?.message})}let Rs=oa.status;const Sa=oa.headers.get("ETag")||void 0;let Oi,aa;if(200===oa.status){let Ur;try{Ur=yield oa.json()}catch(io){throw ar.create("fetch-client-parse",{originalErrorMessage:io?.message})}Oi=Ur.entries,aa=Ur.state}if("INSTANCE_STATE_UNSPECIFIED"===aa?Rs=500:"NO_CHANGE"===aa?Rs=304:("NO_TEMPLATE"===aa||"EMPTY_CONFIG"===aa)&&(Oi={}),304!==Rs&&200!==Rs)throw ar.create("fetch-status",{httpStatus:Rs});return{status:Rs,eTag:Sa,config:Oi}})()}}class vo{constructor(M,X){this.client=M,this.storage=X}fetch(M){var X=this;return(0,S.Z)(function*(){const Ee=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch(M,Ee)})()}attemptFetch(M,{throttleEndTimeMillis:X,backoffCount:Ee}){var $e=this;return(0,S.Z)(function*(){yield function yo(b,M){return new Promise((X,Ee)=>{const $e=Math.max(M-Date.now(),0),nt=setTimeout(X,$e);b.addEventListener(()=>{clearTimeout(nt),Ee(ar.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,X);try{const nt=yield $e.client.fetch(M);return yield $e.storage.deleteThrottleMetadata(),nt}catch(nt){if(!function Cs(b){if(!(b instanceof N.ZR&&b.customData))return!1;const M=Number(b.customData.httpStatus);return 429===M||500===M||503===M||504===M}(nt))throw nt;const mt={throttleEndTimeMillis:Date.now()+(0,N.$s)(Ee),backoffCount:Ee+1};return yield $e.storage.setThrottleMetadata(mt),$e.attemptFetch(M,mt)}})()}}class Ea{constructor(M,X,Ee,$e,nt){this.app=M,this._client=X,this._storageCache=Ee,this._storage=$e,this._logger=nt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ci(b,M){const X=b.target.error||void 0;return ar.create(M,{originalErrorMessage:X&&X?.message})}const Si="app_namespace_store";class wa{constructor(M,X,Ee,$e=function Ss(){return new Promise((b,M)=>{try{const X=indexedDB.open("firebase_remote_config",1);X.onerror=Ee=>{M(Ci(Ee,"storage-open"))},X.onsuccess=Ee=>{b(Ee.target.result)},X.onupgradeneeded=Ee=>{0===Ee.oldVersion&&Ee.target.result.createObjectStore(Si,{keyPath:"compositeKey"})}}catch(X){M(ar.create("storage-open",{originalErrorMessage:X?.message}))}})}()){this.appId=M,this.appName=X,this.namespace=Ee,this.openDbPromise=$e}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var X=this;return(0,S.Z)(function*(){const Ee=yield X.openDbPromise;return new Promise(($e,nt)=>{const Qt=Ee.transaction([Si],"readonly").objectStore(Si),$t=X.createCompositeKey(M);try{const mn=Qt.get($t);mn.onerror=Zn=>{nt(Ci(Zn,"storage-get"))},mn.onsuccess=Zn=>{const rr=Zn.target.result;$e(rr?rr.value:void 0)}}catch(mn){nt(ar.create("storage-get",{originalErrorMessage:mn?.message}))}})})()}set(M,X){var Ee=this;return(0,S.Z)(function*(){const $e=yield Ee.openDbPromise;return new Promise((nt,mt)=>{const $t=$e.transaction([Si],"readwrite").objectStore(Si),mn=Ee.createCompositeKey(M);try{const Zn=$t.put({compositeKey:mn,value:X});Zn.onerror=rr=>{mt(Ci(rr,"storage-set"))},Zn.onsuccess=()=>{nt()}}catch(Zn){mt(ar.create("storage-set",{originalErrorMessage:Zn?.message}))}})})()}delete(M){var X=this;return(0,S.Z)(function*(){const Ee=yield X.openDbPromise;return new Promise(($e,nt)=>{const Qt=Ee.transaction([Si],"readwrite").objectStore(Si),$t=X.createCompositeKey(M);try{const mn=Qt.delete($t);mn.onerror=Zn=>{nt(Ci(Zn,"storage-delete"))},mn.onsuccess=()=>{$e()}}catch(mn){nt(ar.create("storage-delete",{originalErrorMessage:mn?.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class zr{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,S.Z)(function*(){const X=M.storage.getLastFetchStatus(),Ee=M.storage.getLastSuccessfulFetchTimestampMillis(),$e=M.storage.getActiveConfig(),nt=yield X;nt&&(M.lastFetchStatus=nt);const mt=yield Ee;mt&&(M.lastSuccessfulFetchTimestampMillis=mt);const Qt=yield $e;Qt&&(M.activeConfig=Qt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function zi(){return qo.apply(this,arguments)}function qo(){return(qo=(0,S.Z)(function*(){if(!(0,N.hl)())return!1;try{return yield(0,N.eu)()}catch{return!1}})).apply(this,arguments)}let to,nr;!function fi(){(0,z._registerComponent)(new O.wA("remote-config",function b(M,{instanceIdentifier:X}){const Ee=M.getProvider("app").getImmediate(),$e=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ar.create("registration-window");if(!(0,N.hl)())throw ar.create("indexed-db-unavailable");const{projectId:nt,apiKey:mt,appId:Qt}=Ee.options;if(!nt)throw ar.create("registration-project-id");if(!mt)throw ar.create("registration-api-key");if(!Qt)throw ar.create("registration-app-id");const $t=new wa(Qt,Ee.name,X=X||"firebase"),mn=new zr($t),Zn=new K.Yd(ws);Zn.logLevel=K.in.ERROR;const rr=new mo($e,z.SDK_VERSION,X,nt,mt,Qt),oa=new vo(rr,$t),Rs=new Ts(oa,$t,mn,Zn),Sa=new Ea(Ee,Rs,mn,$t,Zn);return function tr(b){const M=(0,N.m9)(b);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Sa),Sa},"PUBLIC").setMultipleInstances(!0)),(0,z.registerVersion)(ws,"0.4.4"),(0,z.registerVersion)(ws,"0.4.4","esm2017")}();const wi=new WeakMap,Ai=new WeakMap,Bi=new WeakMap,Vi=new WeakMap,gn=new WeakMap;let Ao={get(b,M,X){if(b instanceof IDBTransaction){if("done"===M)return Ai.get(b);if("objectStoreNames"===M)return b.objectStoreNames||Bi.get(b);if("store"===M)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Ki(b[M])},set:(b,M,X)=>(b[M]=X,!0),has:(b,M)=>b instanceof IDBTransaction&&("done"===M||"store"===M)||M in b};function Hs(b){return"function"==typeof b?function uo(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function es(){return nr||(nr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...M){return b.apply(ro(this),M),Ki(wi.get(this))}:function(...M){return Ki(b.apply(ro(this),M))}:function(M,...X){const Ee=b.call(ro(this),M,...X);return Bi.set(Ee,M.sort?M.sort():[M]),Ki(Ee)}}(b):(b instanceof IDBTransaction&&function no(b){if(Ai.has(b))return;const M=new Promise((X,Ee)=>{const $e=()=>{b.removeEventListener("complete",nt),b.removeEventListener("error",mt),b.removeEventListener("abort",mt)},nt=()=>{X(),$e()},mt=()=>{Ee(b.error||new DOMException("AbortError","AbortError")),$e()};b.addEventListener("complete",nt),b.addEventListener("error",mt),b.addEventListener("abort",mt)});Ai.set(b,M)}(b),((b,M)=>M.some(X=>b instanceof X))(b,function Ma(){return to||(to=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,Ao):b)}function Ki(b){if(b instanceof IDBRequest)return function ao(b){const M=new Promise((X,Ee)=>{const $e=()=>{b.removeEventListener("success",nt),b.removeEventListener("error",mt)},nt=()=>{X(Ki(b.result)),$e()},mt=()=>{Ee(b.error),$e()};b.addEventListener("success",nt),b.addEventListener("error",mt)});return M.then(X=>{X instanceof IDBCursor&&wi.set(X,b)}).catch(()=>{}),gn.set(M,b),M}(b);if(Vi.has(b))return Vi.get(b);const M=Hs(b);return M!==b&&(Vi.set(b,M),gn.set(M,b)),M}const ro=b=>gn.get(b);function Tt(b,M,{blocked:X,upgrade:Ee,blocking:$e,terminated:nt}={}){const mt=indexedDB.open(b,M),Qt=Ki(mt);return Ee&&mt.addEventListener("upgradeneeded",$t=>{Ee(Ki(mt.result),$t.oldVersion,$t.newVersion,Ki(mt.transaction))}),X&&mt.addEventListener("blocked",()=>X()),Qt.then($t=>{nt&&$t.addEventListener("close",()=>nt()),$e&&$t.addEventListener("versionchange",()=>$e())}).catch(()=>{}),Qt}function Mn(b,{blocked:M}={}){const X=indexedDB.deleteDatabase(b);return M&&X.addEventListener("blocked",()=>M()),Ki(X).then(()=>{})}const na=["get","getKey","getAll","getAllKeys","count"],Ko=["put","add","delete","clear"],Yr=new Map;function ra(b,M){if(!(b instanceof IDBDatabase)||M in b||"string"!=typeof M)return;if(Yr.get(M))return Yr.get(M);const X=M.replace(/FromIndex$/,""),Ee=M!==X,$e=Ko.includes(X);if(!(X in(Ee?IDBIndex:IDBObjectStore).prototype)||!$e&&!na.includes(X))return;const nt=function(){var mt=(0,S.Z)(function*(Qt,...$t){const mn=this.transaction(Qt,$e?"readwrite":"readonly");let Zn=mn.store;return Ee&&(Zn=Zn.index($t.shift())),(yield Promise.all([Zn[X](...$t),$e&&mn.done]))[0]});return function($t){return mt.apply(this,arguments)}}();return Yr.set(M,nt),nt}!function fa(b){Ao=b(Ao)}(b=>({...b,get:(M,X,Ee)=>ra(M,X)||b.get(M,X,Ee),has:(M,X)=>!!ra(M,X)||b.has(M,X)}));const xo="/firebase-messaging-sw.js",ms="/firebase-cloud-messaging-push-scope",Z="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pe="google.c.a.c_id",xe="google.c.a.c_l",We="google.c.a.ts",dt="google.c.a.e";var qt=(()=>{return(b=qt||(qt={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",qt;var b})();function Rt(b){const M=new Uint8Array(b);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function In(b){const X=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ee=atob(X),$e=new Uint8Array(Ee.length);for(let nt=0;nt<Ee.length;++nt)$e[nt]=Ee.charCodeAt(nt);return $e}const kn="fcm_token_details_db",Sr="fcm_token_object_Store";function Jr(b){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,S.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(nt=>nt.name).includes(kn))return null;let M=null;return(yield Tt(kn,5,{upgrade:(Ee=(0,S.Z)(function*($e,nt,mt,Qt){var $t;if(nt<2||!$e.objectStoreNames.contains(Sr))return;const mn=Qt.objectStore(Sr),Zn=yield mn.index("fcmSenderId").get(b);if(yield mn.clear(),Zn)if(2===nt){const rr=Zn;if(!rr.auth||!rr.p256dh||!rr.endpoint)return;M={token:rr.fcmToken,createTime:null!==($t=rr.createTime)&&void 0!==$t?$t:Date.now(),subscriptionOptions:{auth:rr.auth,p256dh:rr.p256dh,endpoint:rr.endpoint,swScope:rr.swScope,vapidKey:"string"==typeof rr.vapidKey?rr.vapidKey:Rt(rr.vapidKey)}}}else if(3===nt){const rr=Zn;M={token:rr.fcmToken,createTime:rr.createTime,subscriptionOptions:{auth:Rt(rr.auth),p256dh:Rt(rr.p256dh),endpoint:rr.endpoint,swScope:rr.swScope,vapidKey:Rt(rr.vapidKey)}}}else if(4===nt){const rr=Zn;M={token:rr.fcmToken,createTime:rr.createTime,subscriptionOptions:{auth:Rt(rr.auth),p256dh:Rt(rr.p256dh),endpoint:rr.endpoint,swScope:rr.swScope,vapidKey:Rt(rr.vapidKey)}}}}),function(nt,mt,Qt,$t){return Ee.apply(this,arguments)})})).close(),yield Mn(kn),yield Mn("fcm_vapid_details_db"),yield Mn("undefined"),ss(M)?M:null;var Ee}),Wr.apply(this,arguments)}function ss(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:M}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const kr="firebase-messaging-store";let Xr=null;function gi(){return Xr||(Xr=Tt("firebase-messaging-database",1,{upgrade:(b,M)=>{0===M&&b.createObjectStore(kr)}})),Xr}function Gs(b){return os.apply(this,arguments)}function os(){return(os=(0,S.Z)(function*(b){const M=k(b),Ee=yield(yield gi()).transaction(kr).objectStore(kr).get(M);if(Ee)return Ee;{const $e=yield Jr(b.appConfig.senderId);if($e)return yield Ro(b,$e),$e}})).apply(this,arguments)}function Ro(b,M){return ts.apply(this,arguments)}function ts(){return(ts=(0,S.Z)(function*(b,M){const X=k(b),$e=(yield gi()).transaction(kr,"readwrite");return yield $e.objectStore(kr).put(M,X),yield $e.done,M})).apply(this,arguments)}function R(b){return ee.apply(this,arguments)}function ee(){return(ee=(0,S.Z)(function*(b){const M=k(b),Ee=(yield gi()).transaction(kr,"readwrite");yield Ee.objectStore(kr).delete(M),yield Ee.done})).apply(this,arguments)}function k({appConfig:b}){return b.appId}const Te=new N.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ut(b,M){return ft.apply(this,arguments)}function ft(){return(ft=(0,S.Z)(function*(b,M){const X=yield w(b),Ee=ne(M),$e={method:"POST",headers:X,body:JSON.stringify(Ee)};let nt;try{nt=yield(yield fetch(y(b.appConfig),$e)).json()}catch(mt){throw Te.create("token-subscribe-failed",{errorInfo:mt?.toString()})}if(nt.error)throw Te.create("token-subscribe-failed",{errorInfo:nt.error.message});if(!nt.token)throw Te.create("token-subscribe-no-token");return nt.token})).apply(this,arguments)}function Yt(b,M){return fr.apply(this,arguments)}function fr(){return(fr=(0,S.Z)(function*(b,M){const X=yield w(b),Ee=ne(M.subscriptionOptions),$e={method:"PATCH",headers:X,body:JSON.stringify(Ee)};let nt;try{nt=yield(yield fetch(`${y(b.appConfig)}/${M.token}`,$e)).json()}catch(mt){throw Te.create("token-update-failed",{errorInfo:mt?.toString()})}if(nt.error)throw Te.create("token-update-failed",{errorInfo:nt.error.message});if(!nt.token)throw Te.create("token-update-no-token");return nt.token})).apply(this,arguments)}function lr(b,M){return Y.apply(this,arguments)}function Y(){return(Y=(0,S.Z)(function*(b,M){const Ee={method:"DELETE",headers:yield w(b)};try{const nt=yield(yield fetch(`${y(b.appConfig)}/${M}`,Ee)).json();if(nt.error)throw Te.create("token-unsubscribe-failed",{errorInfo:nt.error.message})}catch($e){throw Te.create("token-unsubscribe-failed",{errorInfo:$e?.toString()})}})).apply(this,arguments)}function y({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function w(b){return L.apply(this,arguments)}function L(){return(L=(0,S.Z)(function*({appConfig:b,installations:M}){const X=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})})).apply(this,arguments)}function ne({p256dh:b,auth:M,endpoint:X,vapidKey:Ee}){const $e={web:{endpoint:X,auth:M,p256dh:b}};return Ee!==Z&&($e.web.applicationPubKey=Ee),$e}const ge=6048e5;function Pe(b){return Le.apply(this,arguments)}function Le(){return(Le=(0,S.Z)(function*(b){const M=yield Rn(b.swRegistration,b.vapidKey),X={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:M.endpoint,auth:Rt(M.getKey("auth")),p256dh:Rt(M.getKey("p256dh"))},Ee=yield Gs(b.firebaseDependencies);if(Ee){if(qr(Ee.subscriptionOptions,X))return Date.now()>=Ee.createTime+ge?Nt(b,{token:Ee.token,createTime:Date.now(),subscriptionOptions:X}):Ee.token;try{yield lr(b.firebaseDependencies,Ee.token)}catch($e){console.warn($e)}return Gn(b.firebaseDependencies,X)}return Gn(b.firebaseDependencies,X)})).apply(this,arguments)}function rt(b){return gt.apply(this,arguments)}function gt(){return(gt=(0,S.Z)(function*(b){const M=yield Gs(b.firebaseDependencies);M&&(yield lr(b.firebaseDependencies,M.token),yield R(b.firebaseDependencies));const X=yield b.swRegistration.pushManager.getSubscription();return!X||X.unsubscribe()})).apply(this,arguments)}function Nt(b,M){return en.apply(this,arguments)}function en(){return(en=(0,S.Z)(function*(b,M){try{const X=yield Yt(b.firebaseDependencies,M),Ee=Object.assign(Object.assign({},M),{token:X,createTime:Date.now()});return yield Ro(b.firebaseDependencies,Ee),X}catch(X){throw yield rt(b),X}})).apply(this,arguments)}function Gn(b,M){return bn.apply(this,arguments)}function bn(){return(bn=(0,S.Z)(function*(b,M){const Ee={token:yield ut(b,M),createTime:Date.now(),subscriptionOptions:M};return yield Ro(b,Ee),Ee.token})).apply(this,arguments)}function Rn(b,M){return En.apply(this,arguments)}function En(){return(En=(0,S.Z)(function*(b,M){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:In(M)})})).apply(this,arguments)}function qr(b,M){return M.vapidKey===b.vapidKey&&M.endpoint===b.endpoint&&M.auth===b.auth&&M.p256dh===b.p256dh}function xn(b){const M={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function As(b,M){if(!M.notification)return;b.notification={};const X=M.notification.title;X&&(b.notification.title=X);const Ee=M.notification.body;Ee&&(b.notification.body=Ee);const $e=M.notification.image;$e&&(b.notification.image=$e);const nt=M.notification.icon;nt&&(b.notification.icon=nt)}(M,b),function Zi(b,M){!M.data||(b.data=M.data)}(M,b),function ci(b,M){var X,Ee,$e,nt,mt;if(!(M.fcmOptions||null!==(X=M.notification)&&void 0!==X&&X.click_action))return;b.fcmOptions={};const Qt=null!==($e=null===(Ee=M.fcmOptions)||void 0===Ee?void 0:Ee.link)&&void 0!==$e?$e:null===(nt=M.notification)||void 0===nt?void 0:nt.click_action;Qt&&(b.fcmOptions.link=Qt);const $t=null===(mt=M.fcmOptions)||void 0===mt?void 0:mt.analytics_label;$t&&(b.fcmOptions.analyticsLabel=$t)}(M,b),M}function ia(b){return"object"==typeof b&&!!b&&pe in b}function Ws(b,M){const X=[];for(let Ee=0;Ee<b.length;Ee++)X.push(b.charAt(Ee)),Ee<M.length&&X.push(M.charAt(Ee));return X.join("")}function as(b){return Te.create("missing-app-config-values",{valueName:b})}Ws("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ws("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mo{constructor(M,X,Ee){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $e=function Gi(b){if(!b||!b.options)throw as("App Configuration Object");if(!b.name)throw as("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:X}=b;for(const Ee of M)if(!X[Ee])throw as(Ee);return{appName:b.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:$e,installations:X,analyticsProvider:Ee}}_delete(){return Promise.resolve()}}function Qi(b){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,S.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(xo,{scope:ms}),b.swRegistration.update().catch(()=>{})}catch(M){throw Te.create("failed-service-worker-registration",{browserErrorMessage:M?.message})}})).apply(this,arguments)}function ji(b,M){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,S.Z)(function*(b,M){if(!M&&!b.swRegistration&&(yield Qi(b)),M||!b.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw Te.create("invalid-sw-registration");b.swRegistration=M}})).apply(this,arguments)}function qs(b,M){return _o.apply(this,arguments)}function _o(){return(_o=(0,S.Z)(function*(b,M){M?b.vapidKey=M:b.vapidKey||(b.vapidKey=Z)})).apply(this,arguments)}function wn(){return(wn=(0,S.Z)(function*(b,M){if(!navigator)throw Te.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Te.create("permission-blocked");return yield qs(b,M?.vapidKey),yield ji(b,M?.serviceWorkerRegistration),Pe(b)})).apply(this,arguments)}function cn(b,M,X){return ur.apply(this,arguments)}function ur(){return(ur=(0,S.Z)(function*(b,M,X){const Ee=mi(M);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(Ee,{message_id:X[pe],message_name:X[xe],message_time:X[We],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function mi(b){switch(b){case qt.NOTIFICATION_CLICKED:return"notification_open";case qt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $i(){return($i=(0,S.Z)(function*(b,M){const X=M.data;if(!X.isFirebaseMessaging)return;b.onMessageHandler&&X.messageType===qt.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(xn(X)):b.onMessageHandler.next(xn(X)));const Ee=X.data;ia(Ee)&&"1"===Ee[dt]&&(yield cn(b,X.messageType,Ee))})).apply(this,arguments)}const Zs="@firebase/messaging",Pa=b=>{const M=new Mo(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>function Ks(b,M){return $i.apply(this,arguments)}(M,X)),M},Ia=b=>{const M=b.getProvider("messaging").getImmediate();return{getToken:Ee=>function nn(b,M){return wn.apply(this,arguments)}(M,Ee)}};function Po(){return yr.apply(this,arguments)}function yr(){return(yr=(0,S.Z)(function*(){try{yield(0,N.eu)()}catch{return!1}return typeof window<"u"&&(0,N.hl)()&&(0,N.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ys(){(0,z._registerComponent)(new O.wA("messaging",Pa,"PUBLIC")),(0,z._registerComponent)(new O.wA("messaging-internal",Ia,"PRIVATE")),(0,z.registerVersion)(Zs,"0.12.4"),(0,z.registerVersion)(Zs,"0.12.4","esm2017")}();const Lr="analytics",ru="firebase_id",ba="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zt="https://www.googletagmanager.com/gtag/js",it=new K.Yd("@firebase/analytics"),Ar=new N.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function za(b){if(!b.startsWith(zt)){const M=Ar.create("invalid-gtag-resource",{gtagURL:b});return it.warn(M.message),""}return b}function pa(b){return Promise.all(b.map(M=>M.catch(X=>X)))}function Ga(b,M){const X=function Ta(b,M){let X;return window.trustedTypes&&(X=window.trustedTypes.createPolicy(b,M)),X}("firebase-js-sdk-policy",{createScriptURL:za}),Ee=document.createElement("script"),$e=`${zt}?l=${b}&id=${M}`;Ee.src=X?X?.createScriptURL($e):$e,Ee.async=!0,document.head.appendChild(Ee)}function dl(b,M,X,Ee,$e,nt){return iu.apply(this,arguments)}function iu(){return(iu=(0,S.Z)(function*(b,M,X,Ee,$e,nt){const mt=Ee[$e];try{if(mt)yield M[mt];else{const $t=(yield pa(X)).find(mn=>mn.measurementId===$e);$t&&(yield M[$t.appId])}}catch(Qt){it.error(Qt)}b("config",$e,nt)})).apply(this,arguments)}function Tu(b,M,X,Ee,$e){return hl.apply(this,arguments)}function hl(){return(hl=(0,S.Z)(function*(b,M,X,Ee,$e){try{let nt=[];if($e&&$e.send_to){let mt=$e.send_to;Array.isArray(mt)||(mt=[mt]);const Qt=yield pa(X);for(const $t of mt){const mn=Qt.find(rr=>rr.measurementId===$t),Zn=mn&&M[mn.appId];if(!Zn){nt=[];break}nt.push(Zn)}}0===nt.length&&(nt=Object.values(M)),yield Promise.all(nt),b("event",Ee,$e||{})}catch(nt){it.error(nt)}})).apply(this,arguments)}function Jn(b){const M=window.document.getElementsByTagName("script");for(const X of Object.values(M))if(X.src&&X.src.includes(zt)&&X.src.includes(b))return X;return null}const Zt=new class yi{constructor(M={},X=1e3){this.throttleMetadata=M,this.intervalMillis=X}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,X){this.throttleMetadata[M]=X}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Na(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function wr(b){return fl.apply(this,arguments)}function fl(){return(fl=(0,S.Z)(function*(b){var M;const{appId:X,apiKey:Ee}=b,$e={method:"GET",headers:Na(Ee)},nt=ba.replace("{app-id}",X),mt=yield fetch(nt,$e);if(200!==mt.status&&304!==mt.status){let Qt="";try{const $t=yield mt.json();null!==(M=$t.error)&&void 0!==M&&M.message&&(Qt=$t.error.message)}catch{}throw Ar.create("config-fetch-failed",{httpStatus:mt.status,responseMessage:Qt})}return mt.json()})).apply(this,arguments)}function Yi(b){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,S.Z)(function*(b,M=Zt,X){const{appId:Ee,apiKey:$e,measurementId:nt}=b.options;if(!Ee)throw Ar.create("no-app-id");if(!$e){if(nt)return{measurementId:nt,appId:Ee};throw Ar.create("no-api-key")}const mt=M.getThrottleMetadata(Ee)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qt=new T;return setTimeout((0,S.Z)(function*(){Qt.abort()}),void 0!==X?X:6e4),lo({appId:Ee,apiKey:$e,measurementId:nt},mt,Qt,M)})).apply(this,arguments)}function lo(b,M,X){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,S.Z)(function*(b,{throttleEndTimeMillis:M,backoffCount:X},Ee,$e=Zt){var nt;const{appId:mt,measurementId:Qt}=b;try{yield ga(Ee,M)}catch($t){if(Qt)return it.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qt} provided in the "measurementId" field in the local Firebase config. [${$t?.message}]`),{appId:mt,measurementId:Qt};throw $t}try{const $t=yield wr(b);return $e.deleteThrottleMetadata(mt),$t}catch($t){const mn=$t;if(!I(mn)){if($e.deleteThrottleMetadata(mt),Qt)return it.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qt} provided in the "measurementId" field in the local Firebase config. [${mn?.message}]`),{appId:mt,measurementId:Qt};throw $t}const Zn=503===Number(null===(nt=mn?.customData)||void 0===nt?void 0:nt.httpStatus)?(0,N.$s)(X,$e.intervalMillis,30):(0,N.$s)(X,$e.intervalMillis),rr={throttleEndTimeMillis:Date.now()+Zn,backoffCount:X+1};return $e.setThrottleMetadata(mt,rr),it.debug(`Calling attemptFetch again in ${Zn} millis`),lo(b,rr,Ee,$e)}})).apply(this,arguments)}function ga(b,M){return new Promise((X,Ee)=>{const $e=Math.max(M-Date.now(),0),nt=setTimeout(X,$e);b.addEventListener(()=>{clearTimeout(nt),Ee(Ar.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function I(b){if(!(b instanceof N.ZR&&b.customData))return!1;const M=Number(b.customData.httpStatus);return 429===M||500===M||503===M||504===M}class T{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let _,co;function V(){return(V=(0,S.Z)(function*(b,M,X,Ee,$e){if($e&&$e.global)b("event",X,Ee);else{const nt=yield M;b("event",X,Object.assign(Object.assign({},Ee),{send_to:nt}))}})).apply(this,arguments)}function xs(b){co=b}function us(b){_=b}function Qo(){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,S.Z)(function*(){if(!(0,N.hl)())return it.warn(Ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,N.eu)()}catch(b){return it.warn(Ar.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function Io(){return(Io=(0,S.Z)(function*(b,M,X,Ee,$e,nt,mt){var Qt;const $t=Yi(b);$t.then(Rs=>{X[Rs.measurementId]=Rs.appId,b.options.measurementId&&Rs.measurementId!==b.options.measurementId&&it.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Rs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rs=>it.error(Rs)),M.push($t);const mn=Qo().then(Rs=>{if(Rs)return Ee.getId()}),[Zn,rr]=yield Promise.all([$t,mn]);Jn(nt)||Ga(nt,Zn.measurementId),co&&($e("consent","default",co),xs(void 0)),$e("js",new Date);const oa=null!==(Qt=mt?.config)&&void 0!==Qt?Qt:{};return oa.origin="firebase",oa.update=!0,null!=rr&&(oa[ru]=rr),$e("config",Zn.measurementId,oa),_&&($e("set",_),us(void 0)),Zn.measurementId})).apply(this,arguments)}class Oa{constructor(M){this.app=M}_delete(){return delete bo[this.app.options.appId],Promise.resolve()}}let bo={},Oo=[];const Du={};let ls,To,qa="dataLayer",pl=!1;function ou(b,M,X){!function ec(){const b=[];if((0,N.ru)()&&b.push("This is a browser extension environment."),(0,N.zI)()||b.push("Cookies are not available."),b.length>0){const M=b.map((Ee,$e)=>`(${$e+1}) ${Ee}`).join(" "),X=Ar.create("invalid-analytics-context",{errorInfo:M});it.warn(X.message)}}();const Ee=b.options.appId;if(!Ee)throw Ar.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Ar.create("no-api-key");it.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bo[Ee])throw Ar.create("already-exists",{id:Ee});if(!pl){!function Ii(b){let M=[];Array.isArray(window[b])?M=window[b]:window[b]=M}(qa);const{wrappedGtag:nt,gtagCore:mt}=function su(b,M,X,Ee,$e){let nt=function(...mt){window[Ee].push(arguments)};return window[$e]&&"function"==typeof window[$e]&&(nt=window[$e]),window[$e]=function Xl(b,M,X,Ee){function nt(){return(nt=(0,S.Z)(function*(mt,...Qt){try{if("event"===mt){const[$t,mn]=Qt;yield Tu(b,M,X,$t,mn)}else if("config"===mt){const[$t,mn]=Qt;yield dl(b,M,X,Ee,$t,mn)}else if("consent"===mt){const[$t]=Qt;b("consent","update",$t)}else if("get"===mt){const[$t,mn,Zn]=Qt;b("get",$t,mn,Zn)}else if("set"===mt){const[$t]=Qt;b("set",$t)}else b(mt,...Qt)}catch($t){it.error($t)}})).apply(this,arguments)}return function $e(mt){return nt.apply(this,arguments)}}(nt,b,M,X),{gtagCore:nt,wrappedGtag:window[$e]}}(bo,Oo,Du,qa,"gtag");To=nt,ls=mt,pl=!0}return bo[Ee]=function wo(b,M,X,Ee,$e,nt,mt){return Io.apply(this,arguments)}(b,Oo,Du,M,ls,qa,X),new Oa(b)}function nc(){return rc.apply(this,arguments)}function rc(){return(rc=(0,S.Z)(function*(){if((0,N.ru)()||!(0,N.zI)()||!(0,N.hl)())return!1;try{return yield(0,N.eu)()}catch{return!1}})).apply(this,arguments)}const vl="@firebase/analytics";!function Zd(){(0,z._registerComponent)(new O.wA(Lr,(M,{options:X})=>ou(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,z._registerComponent)(new O.wA("analytics-internal",function b(M){try{const X=M.getProvider(Lr).getImmediate();return{logEvent:(Ee,$e,nt)=>function lu(b,M,X,Ee){b=(0,N.m9)(b),function A(b,M,X,Ee,$e){return V.apply(this,arguments)}(To,bo[b.app.options.appId],M,X,Ee).catch($e=>it.error($e))}(X,Ee,$e,nt)}}catch(X){throw Ar.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,z.registerVersion)(vl,"0.10.0"),(0,z.registerVersion)(vl,"0.10.0","esm2017")}();var ka=j(4408),Qc=j(7565);const Yc=new class sc extends Qc.v{}(class Gu extends ka.o{constructor(M,X){super(M,X),this.scheduler=M,this.work=X}schedule(M,X=0){return X>0?super.schedule(M,X):(this.delay=X,this.state=M,this.scheduler.flush(this),this)}execute(M,X){return X>0||this.closed?super.execute(M,X):this._execute(M,X)}requestAsyncId(M,X,Ee=0){return null!=Ee&&Ee>0||null==Ee&&this.delay>0?super.requestAsyncId(M,X,Ee):(M.flush(this),0)}});var ks=j(4986),Xc=j(8505),ma=j(5363),Wu=j(9468);const di=new g.GfV("7.4.1"),Ka="__angularfire_symbol__analyticsIsSupportedValue",_s="__angularfire_symbol__analyticsIsSupported",xi="__angularfire_symbol__remoteConfigIsSupportedValue",_l="__angularfire_symbol__remoteConfigIsSupported",Da="__angularfire_symbol__messagingIsSupportedValue",ho="__angularfire_symbol__messagingIsSupported";function Ca(b,M,X){if(M){if(1===M.length)return M[0];const nt=M.filter(mt=>mt.app===X);if(1===nt.length)return nt[0]}return X.container.getProvider(b).getImmediate({optional:!0})}globalThis[_s]||(globalThis[_s]=nc().then(b=>globalThis[Ka]=b).catch(()=>globalThis[Ka]=!1)),globalThis[ho]||(globalThis[ho]=Po().then(b=>globalThis[Da]=b).catch(()=>globalThis[Da]=!1)),globalThis[_l]||(globalThis[_l]=zi().then(b=>globalThis[xi]=b).catch(()=>globalThis[xi]=!1));const Ni=(b,M)=>{const X=M?[M]:(0,x.C6)(),Ee=[];return X.forEach($e=>{$e.container.getProvider(b).instances.forEach(mt=>{Ee.includes(mt)||Ee.push(mt)})}),Ee};function fo(){}class qu{constructor(M,X=Yc){this.zone=M,this.delegate=X}now(){return this.delegate.now()}schedule(M,X,Ee){const $e=this.zone;return this.delegate.schedule(function(mt){$e.runGuarded(()=>{M.apply(this,[mt])})},X,Ee)}}class ac{constructor(M){this.zone=M,this.task=null}call(M,X){const Ee=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fo,{},fo,fo)),X.pipe((0,Xc.b)({next:Ee,complete:Ee,error:Ee})).subscribe(M).add(Ee)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let La=(()=>{class b{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new qu(Zone.current)),this.insideAngular=X.run(()=>new qu(Zone.current,ks.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(X){return new(X||b)(g.LFG(g.R0b))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Fa(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Ku(b){return b.pipe((0,ma.Q)(Fa().outsideAngular))}function ya(b){return Fa(),function Zu(b){return function(X){return(X=X.lift(new ac(b.ngZone))).pipe((0,Wu.R)(b.outsideAngular),(0,ma.Q)(b.insideAngular))}}(Fa())(b)}},2090:(Bt,Re,j)=>{"use strict";j.d(Re,{$s:()=>Hr,BH:()=>ce,G6:()=>Ln,L:()=>B,LL:()=>wt,Pz:()=>te,Sg:()=>ze,UG:()=>Ne,US:()=>O,ZB:()=>H,ZR:()=>rn,aH:()=>ye,b$:()=>ot,eu:()=>St,hl:()=>Dn,jU:()=>be,m9:()=>ui,ne:()=>Bn,pd:()=>oi,r3:()=>Pn,ru:()=>ke,tV:()=>U,uI:()=>Fe,vZ:()=>Vr,w1:()=>Et,xO:()=>fs,xb:()=>dr,z$:()=>et,zI:()=>Nn,zd:()=>Li});const z=function(Oe){const Ae=[];let Be=0;for(let lt=0;lt<Oe.length;lt++){let Ye=Oe.charCodeAt(lt);Ye<128?Ae[Be++]=Ye:Ye<2048?(Ae[Be++]=Ye>>6|192,Ae[Be++]=63&Ye|128):55296==(64512&Ye)&&lt+1<Oe.length&&56320==(64512&Oe.charCodeAt(lt+1))?(Ye=65536+((1023&Ye)<<10)+(1023&Oe.charCodeAt(++lt)),Ae[Be++]=Ye>>18|240,Ae[Be++]=Ye>>12&63|128,Ae[Be++]=Ye>>6&63|128,Ae[Be++]=63&Ye|128):(Ae[Be++]=Ye>>12|224,Ae[Be++]=Ye>>6&63|128,Ae[Be++]=63&Ye|128)}return Ae},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Oe,Ae){if(!Array.isArray(Oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Be=Ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,lt=[];for(let Ye=0;Ye<Oe.length;Ye+=3){const Mt=Oe[Ye],fn=Ye+1<Oe.length,Sn=fn?Oe[Ye+1]:0,or=Ye+2<Oe.length,Ce=or?Oe[Ye+2]:0;let Ge=(15&Sn)<<2|Ce>>6,ht=63&Ce;or||(ht=64,fn||(Ge=64)),lt.push(Be[Mt>>2],Be[(3&Mt)<<4|Sn>>4],Be[Ge],Be[ht])}return lt.join("")},encodeString(Oe,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?btoa(Oe):this.encodeByteArray(z(Oe),Ae)},decodeString(Oe,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?atob(Oe):function(Oe){const Ae=[];let Be=0,lt=0;for(;Be<Oe.length;){const Ye=Oe[Be++];if(Ye<128)Ae[lt++]=String.fromCharCode(Ye);else if(Ye>191&&Ye<224){const Mt=Oe[Be++];Ae[lt++]=String.fromCharCode((31&Ye)<<6|63&Mt)}else if(Ye>239&&Ye<365){const or=((7&Ye)<<18|(63&Oe[Be++])<<12|(63&Oe[Be++])<<6|63&Oe[Be++])-65536;Ae[lt++]=String.fromCharCode(55296+(or>>10)),Ae[lt++]=String.fromCharCode(56320+(1023&or))}else{const Mt=Oe[Be++],fn=Oe[Be++];Ae[lt++]=String.fromCharCode((15&Ye)<<12|(63&Mt)<<6|63&fn)}}return Ae.join("")}(this.decodeStringToByteArray(Oe,Ae))},decodeStringToByteArray(Oe,Ae){this.init_();const Be=Ae?this.charToByteMapWebSafe_:this.charToByteMap_,lt=[];for(let Ye=0;Ye<Oe.length;){const Mt=Be[Oe.charAt(Ye++)],Sn=Ye<Oe.length?Be[Oe.charAt(Ye)]:0;++Ye;const Ce=Ye<Oe.length?Be[Oe.charAt(Ye)]:64;++Ye;const me=Ye<Oe.length?Be[Oe.charAt(Ye)]:64;if(++Ye,null==Mt||null==Sn||null==Ce||null==me)throw new K;lt.push(Mt<<2|Sn>>4),64!==Ce&&(lt.push(Sn<<4&240|Ce>>2),64!==me&&lt.push(Ce<<6&192|me))}return lt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Oe=0;Oe<this.ENCODED_VALS.length;Oe++)this.byteToCharMap_[Oe]=this.ENCODED_VALS.charAt(Oe),this.charToByteMap_[this.byteToCharMap_[Oe]]=Oe,this.byteToCharMapWebSafe_[Oe]=this.ENCODED_VALS_WEBSAFE.charAt(Oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Oe]]=Oe,Oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Oe)]=Oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Oe)]=Oe)}}};class K extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B=function(Oe){return function(Oe){const Ae=z(Oe);return O.encodeByteArray(Ae,!0)}(Oe).replace(/\./g,"")},U=function(Oe){try{return O.decodeString(Oe,!0)}catch(Ae){console.error("base64Decode failed: ",Ae)}return null};function H(Oe,Ae){if(!(Ae instanceof Object))return Ae;switch(Ae.constructor){case Date:return new Date(Ae.getTime());case Object:void 0===Oe&&(Oe={});break;case Array:Oe=[];break;default:return Ae}for(const Be in Ae)!Ae.hasOwnProperty(Be)||!he(Be)||(Oe[Be]=H(Oe[Be],Ae[Be]));return Oe}function he(Oe){return"__proto__"!==Oe}const de=()=>{try{return function se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Oe=process.env.__FIREBASE_DEFAULTS__;return Oe?JSON.parse(Oe):void 0})()||(()=>{if(typeof document>"u")return;let Oe;try{Oe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ae=Oe&&U(Oe[1]);return Ae&&JSON.parse(Ae)})()}catch(Oe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Oe}`)}},ye=()=>{var Oe;return null===(Oe=de())||void 0===Oe?void 0:Oe.config},te=Oe=>{var Ae;return null===(Ae=de())||void 0===Ae?void 0:Ae[`_${Oe}`]};class ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ae,Be)=>{this.resolve=Ae,this.reject=Be})}wrapCallback(Ae){return(Be,lt)=>{Be?this.reject(Be):this.resolve(lt),"function"==typeof Ae&&(this.promise.catch(()=>{}),1===Ae.length?Ae(Be):Ae(Be,lt))}}}function ze(Oe,Ae){if(Oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const lt=Ae||"demo-project",Ye=Oe.iat||0,Mt=Oe.sub||Oe.user_id;if(!Mt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const fn=Object.assign({iss:`https://securetoken.google.com/${lt}`,aud:lt,iat:Ye,exp:Ye+3600,auth_time:Ye,sub:Mt,user_id:Mt,firebase:{sign_in_provider:"custom",identities:{}}},Oe);return[B(JSON.stringify({alg:"none",type:"JWT"})),B(JSON.stringify(fn)),""].join(".")}function et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function Ne(){var Oe;const Ae=null===(Oe=de())||void 0===Oe?void 0:Oe.forceEnvironment;if("node"===Ae)return!0;if("browser"===Ae)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function be(){return"object"==typeof self&&self.self===self}function ke(){const Oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Oe&&void 0!==Oe.id}function ot(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Et(){const Oe=et();return Oe.indexOf("MSIE ")>=0||Oe.indexOf("Trident/")>=0}function Ln(){return!Ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dn(){try{return"object"==typeof indexedDB}catch{return!1}}function St(){return new Promise((Oe,Ae)=>{try{let Be=!0;const lt="validate-browser-context-for-indexeddb-analytics-module",Ye=self.indexedDB.open(lt);Ye.onsuccess=()=>{Ye.result.close(),Be||self.indexedDB.deleteDatabase(lt),Oe(!0)},Ye.onupgradeneeded=()=>{Be=!1},Ye.onerror=()=>{var Mt;Ae((null===(Mt=Ye.error)||void 0===Mt?void 0:Mt.message)||"")}}catch(Be){Ae(Be)}})}function Nn(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class rn extends Error{constructor(Ae,Be,lt){super(Be),this.code=Ae,this.customData=lt,this.name="FirebaseError",Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wt.prototype.create)}}class wt{constructor(Ae,Be,lt){this.service=Ae,this.serviceName=Be,this.errors=lt}create(Ae,...Be){const lt=Be[0]||{},Ye=`${this.service}/${Ae}`,Mt=this.errors[Ae],fn=Mt?function Wn(Oe,Ae){return Oe.replace(Cn,(Be,lt)=>{const Ye=Ae[lt];return null!=Ye?String(Ye):`<${lt}?>`})}(Mt,lt):"Error";return new rn(Ye,`${this.serviceName}: ${fn} (${Ye}).`,lt)}}const Cn=/\{\$([^}]+)}/g;function Pn(Oe,Ae){return Object.prototype.hasOwnProperty.call(Oe,Ae)}function dr(Oe){for(const Ae in Oe)if(Object.prototype.hasOwnProperty.call(Oe,Ae))return!1;return!0}function Vr(Oe,Ae){if(Oe===Ae)return!0;const Be=Object.keys(Oe),lt=Object.keys(Ae);for(const Ye of Be){if(!lt.includes(Ye))return!1;const Mt=Oe[Ye],fn=Ae[Ye];if(ri(Mt)&&ri(fn)){if(!Vr(Mt,fn))return!1}else if(Mt!==fn)return!1}for(const Ye of lt)if(!Be.includes(Ye))return!1;return!0}function ri(Oe){return null!==Oe&&"object"==typeof Oe}function fs(Oe){const Ae=[];for(const[Be,lt]of Object.entries(Oe))Array.isArray(lt)?lt.forEach(Ye=>{Ae.push(encodeURIComponent(Be)+"="+encodeURIComponent(Ye))}):Ae.push(encodeURIComponent(Be)+"="+encodeURIComponent(lt));return Ae.length?"&"+Ae.join("&"):""}function Li(Oe){const Ae={};return Oe.replace(/^\?/,"").split("&").forEach(lt=>{if(lt){const[Ye,Mt]=lt.split("=");Ae[decodeURIComponent(Ye)]=decodeURIComponent(Mt)}}),Ae}function oi(Oe){const Ae=Oe.indexOf("?");if(!Ae)return"";const Be=Oe.indexOf("#",Ae);return Oe.substring(Ae,Be>0?Be:void 0)}function Bn(Oe,Ae){const Be=new Wt(Oe,Ae);return Be.subscribe.bind(Be)}class Wt{constructor(Ae,Be){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Be,this.task.then(()=>{Ae(this)}).catch(lt=>{this.error(lt)})}next(Ae){this.forEachObserver(Be=>{Be.next(Ae)})}error(Ae){this.forEachObserver(Be=>{Be.error(Ae)}),this.close(Ae)}complete(){this.forEachObserver(Ae=>{Ae.complete()}),this.close()}subscribe(Ae,Be,lt){let Ye;if(void 0===Ae&&void 0===Be&&void 0===lt)throw new Error("Missing Observer.");Ye=function Yn(Oe,Ae){if("object"!=typeof Oe||null===Oe)return!1;for(const Be of Ae)if(Be in Oe&&"function"==typeof Oe[Be])return!0;return!1}(Ae,["next","error","complete"])?Ae:{next:Ae,error:Be,complete:lt},void 0===Ye.next&&(Ye.next=yn),void 0===Ye.error&&(Ye.error=yn),void 0===Ye.complete&&(Ye.complete=yn);const Mt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ye.error(this.finalError):Ye.complete()}catch{}}),this.observers.push(Ye),Mt}unsubscribeOne(Ae){void 0===this.observers||void 0===this.observers[Ae]||(delete this.observers[Ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ae){if(!this.finalized)for(let Be=0;Be<this.observers.length;Be++)this.sendOne(Be,Ae)}sendOne(Ae,Be){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ae])try{Be(this.observers[Ae])}catch(lt){typeof console<"u"&&console.error&&console.error(lt)}})}close(Ae){this.finalized||(this.finalized=!0,void 0!==Ae&&(this.finalError=Ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}function Hr(Oe,Ae=1e3,Be=2){const lt=Ae*Math.pow(Be,Oe),Ye=Math.round(.5*lt*(Math.random()-.5)*2);return Math.min(144e5,lt+Ye)}function ui(Oe){return Oe&&Oe._delegate?Oe._delegate:Oe}},4662:(Bt,Re,j)=>{"use strict";var g=j(1481),x=j(4650),S=j(7340);function N(Y){return new x.vHH(3e3,!1)}function Wn(){return typeof window<"u"&&typeof window.document<"u"}function Cn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function cr(Y){switch(Y.length){case 0:return new S.ZN;case 1:return Y[0];default:return new S.ZE(Y)}}function Xn(Y,y,w,L,ne=new Map,ge=new Map){const Pe=[],Le=[];let rt=-1,gt=null;if(L.forEach(Nt=>{const en=Nt.get("offset"),Gn=en==rt,bn=Gn&&gt||new Map;Nt.forEach((Rn,En)=>{let qr=En,xn=Rn;if("offset"!==En)switch(qr=y.normalizePropertyName(qr,Pe),xn){case S.k1:xn=ne.get(En);break;case S.l3:xn=ge.get(En);break;default:xn=y.normalizeStyleValue(En,qr,xn,Pe)}bn.set(qr,xn)}),Gn||Le.push(bn),gt=bn,rt=en}),Pe.length)throw function ke(Y){return new x.vHH(3502,!1)}();return Le}function Mr(Y,y,w,L){switch(y){case"start":Y.onStart(()=>L(w&&Ir(w,"start",Y)));break;case"done":Y.onDone(()=>L(w&&Ir(w,"done",Y)));break;case"destroy":Y.onDestroy(()=>L(w&&Ir(w,"destroy",Y)))}}function Ir(Y,y,w){const ge=ki(Y.element,Y.triggerName,Y.fromState,Y.toState,y||Y.phaseName,w.totalTime??Y.totalTime,!!w.disabled),Pe=Y._data;return null!=Pe&&(ge._data=Pe),ge}function ki(Y,y,w,L,ne="",ge=0,Pe){return{element:Y,triggerName:y,fromState:w,toState:L,phaseName:ne,totalTime:ge,disabled:!!Pe}}function gr(Y,y,w){let L=Y.get(y);return L||Y.set(y,L=w),L}function Br(Y){const y=Y.indexOf(":");return[Y.substring(1,y),Y.slice(y+1)]}let Pn=(Y,y)=>!1,zn=(Y,y,w)=>[],dr=null;function jt(Y){const y=Y.parentNode||Y.host;return y===dr?null:y}(Cn()||typeof Element<"u")&&(Wn()?(dr=(()=>document.documentElement)(),Pn=(Y,y)=>{for(;y;){if(y===Y)return!0;y=jt(y)}return!1}):Pn=(Y,y)=>Y.contains(y),zn=(Y,y,w)=>{if(w)return Array.from(Y.querySelectorAll(y));const L=Y.querySelector(y);return L?[L]:[]});let jr=null,fs=!1;const Bn=Pn,Wt=zn;let Yn=(()=>{class Y{validateStyleProperty(w){return function Li(Y){jr||(jr=function mr(){return typeof document<"u"?document.body:null}()||{},fs=!!jr.style&&"WebkitAppearance"in jr.style);let y=!0;return jr.style&&!function ri(Y){return"ebkit"==Y.substring(1,6)}(Y)&&(y=Y in jr.style,!y&&fs&&(y="Webkit"+Y.charAt(0).toUpperCase()+Y.slice(1)in jr.style)),y}(w)}matchesElement(w,L){return!1}containsElement(w,L){return Bn(w,L)}getParentElement(w){return jt(w)}query(w,L,ne){return Wt(w,L,ne)}computeStyle(w,L,ne){return ne||""}animate(w,L,ne,ge,Pe,Le=[],rt){return new S.ZN(ne,ge)}}return Y.\u0275fac=function(w){return new(w||Y)},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})(),yn=(()=>{class Y{}return Y.NOOP=new Yn,Y})();const Dr="ng-enter",Vn="ng-leave",_i="ng-trigger",qn=".ng-trigger",Pr="ng-animating",Cr=".ng-animating";function Zr(Y){if("number"==typeof Y)return Y;const y=Y.match(/^(-?[\.\d]+)(m?s)/);return!y||y.length<2?0:br(parseFloat(y[1]),y[2])}function br(Y,y){return"s"===y?1e3*Y:Y}function Kr(Y,y,w){return Y.hasOwnProperty("duration")?Y:function Hr(Y,y,w){let ne,ge=0,Pe="";if("string"==typeof Y){const Le=Y.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Le)return y.push(N()),{duration:0,delay:0,easing:""};ne=br(parseFloat(Le[1]),Le[2]);const rt=Le[3];null!=rt&&(ge=br(parseFloat(rt),Le[4]));const gt=Le[5];gt&&(Pe=gt)}else ne=Y;if(!w){let Le=!1,rt=y.length;ne<0&&(y.push(function O(){return new x.vHH(3100,!1)}()),Le=!0),ge<0&&(y.push(function K(){return new x.vHH(3101,!1)}()),Le=!0),Le&&y.splice(rt,0,N())}return{duration:ne,delay:ge,easing:Pe}}(Y,y,w)}function sr(Y,y={}){return Object.keys(Y).forEach(w=>{y[w]=Y[w]}),y}function ai(Y){const y=new Map;return Object.keys(Y).forEach(w=>{y.set(w,Y[w])}),y}function Ae(Y,y=new Map,w){if(w)for(let[L,ne]of w)y.set(L,ne);for(let[L,ne]of Y)y.set(L,ne);return y}function Be(Y,y,w){return w?y+":"+w+";":""}function lt(Y){let y="";for(let w=0;w<Y.style.length;w++){const L=Y.style.item(w);y+=Be(0,L,Y.style.getPropertyValue(L))}for(const w in Y.style)Y.style.hasOwnProperty(w)&&!w.startsWith("_")&&(y+=Be(0,kt(w),Y.style[w]));Y.setAttribute("style",y)}function Ye(Y,y,w){Y.style&&(y.forEach((L,ne)=>{const ge=ht(ne);w&&!w.has(ne)&&w.set(ne,Y.style[ge]),Y.style[ge]=L}),Cn()&&lt(Y))}function Mt(Y,y){Y.style&&(y.forEach((w,L)=>{const ne=ht(L);Y.style[ne]=""}),Cn()&&lt(Y))}function fn(Y){return Array.isArray(Y)?1==Y.length?Y[0]:(0,S.vP)(Y):Y}const or=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ce(Y){let y=[];if("string"==typeof Y){let w;for(;w=or.exec(Y);)y.push(w[1]);or.lastIndex=0}return y}function De(Y,y,w){const L=Y.toString(),ne=L.replace(or,(ge,Pe)=>{let Le=y[Pe];return null==Le&&(w.push(function B(Y){return new x.vHH(3003,!1)}()),Le=""),Le.toString()});return ne==L?Y:ne}function me(Y){const y=[];let w=Y.next();for(;!w.done;)y.push(w.value),w=Y.next();return y}const Ge=/-+([a-z0-9])/g;function ht(Y){return Y.replace(Ge,(...y)=>y[1].toUpperCase())}function kt(Y){return Y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ze(Y,y,w){switch(y.type){case 7:return Y.visitTrigger(y,w);case 0:return Y.visitState(y,w);case 1:return Y.visitTransition(y,w);case 2:return Y.visitSequence(y,w);case 3:return Y.visitGroup(y,w);case 4:return Y.visitAnimate(y,w);case 5:return Y.visitKeyframes(y,w);case 6:return Y.visitStyle(y,w);case 8:return Y.visitReference(y,w);case 9:return Y.visitAnimateChild(y,w);case 10:return Y.visitAnimateRef(y,w);case 11:return Y.visitQuery(y,w);case 12:return Y.visitStagger(y,w);default:throw function U(Y){return new x.vHH(3004,!1)}()}}function bt(Y,y){return window.getComputedStyle(Y)[y]}function Xi(Y,y){const w=[];return"string"==typeof Y?Y.split(/\s*,\s*/).forEach(L=>function Us(Y,y,w){if(":"==Y[0]){const rt=function Bs(Y,y){switch(Y){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(w,L)=>parseFloat(L)>parseFloat(w);case":decrement":return(w,L)=>parseFloat(L)<parseFloat(w);default:return y.push(function et(Y){return new x.vHH(3016,!1)}()),"* => *"}}(Y,w);if("function"==typeof rt)return void y.push(rt);Y=rt}const L=Y.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==L||L.length<4)return w.push(function ze(Y){return new x.vHH(3015,!1)}()),y;const ne=L[1],ge=L[2],Pe=L[3];y.push(Vs(ne,Pe));"<"==ge[0]&&!("*"==ne&&"*"==Pe)&&y.push(Vs(Pe,ne))}(L,w,y)):w.push(Y),w}const Kn=new Set(["true","1"]),Ei=new Set(["false","0"]);function Vs(Y,y){const w=Kn.has(Y)||Ei.has(Y),L=Kn.has(y)||Ei.has(y);return(ne,ge)=>{let Pe="*"==Y||Y==ne,Le="*"==y||y==ge;return!Pe&&w&&"boolean"==typeof ne&&(Pe=ne?Kn.has(Y):Ei.has(Y)),!Le&&L&&"boolean"==typeof ge&&(Le=ge?Kn.has(y):Ei.has(y)),Pe&&Le}}const po=new RegExp("s*:selfs*,?","g");function hr(Y,y,w,L){return new rs(Y).build(y,w,L)}class rs{constructor(y){this._driver=y}build(y,w,L){const ne=new Qr(w);return this._resetContextStyleTimingState(ne),Ze(this,fn(y),ne)}_resetContextStyleTimingState(y){y.currentQuerySelector="",y.collectedStyles=new Map,y.collectedStyles.set("",new Map),y.currentTime=0}visitTrigger(y,w){let L=w.queryCount=0,ne=w.depCount=0;const ge=[],Pe=[];return"@"==y.name.charAt(0)&&w.errors.push(function H(){return new x.vHH(3006,!1)}()),y.definitions.forEach(Le=>{if(this._resetContextStyleTimingState(w),0==Le.type){const rt=Le,gt=rt.name;gt.toString().split(/\s*,\s*/).forEach(Nt=>{rt.name=Nt,ge.push(this.visitState(rt,w))}),rt.name=gt}else if(1==Le.type){const rt=this.visitTransition(Le,w);L+=rt.queryCount,ne+=rt.depCount,Pe.push(rt)}else w.errors.push(function he(){return new x.vHH(3007,!1)}())}),{type:7,name:y.name,states:ge,transitions:Pe,queryCount:L,depCount:ne,options:null}}visitState(y,w){const L=this.visitStyle(y.styles,w),ne=y.options&&y.options.params||null;if(L.containsDynamicStyles){const ge=new Set,Pe=ne||{};L.styles.forEach(Le=>{Le instanceof Map&&Le.forEach(rt=>{Ce(rt).forEach(gt=>{Pe.hasOwnProperty(gt)||ge.add(gt)})})}),ge.size&&(me(ge.values()),w.errors.push(function se(Y,y){return new x.vHH(3008,!1)}()))}return{type:0,name:y.name,style:L,options:ne?{params:ne}:null}}visitTransition(y,w){w.queryCount=0,w.depCount=0;const L=Ze(this,fn(y.animation),w);return{type:1,matchers:Xi(y.expr,w.errors),animation:L,queryCount:w.queryCount,depCount:w.depCount,options:Mi(y.options)}}visitSequence(y,w){return{type:2,steps:y.steps.map(L=>Ze(this,L,w)),options:Mi(y.options)}}visitGroup(y,w){const L=w.currentTime;let ne=0;const ge=y.steps.map(Pe=>{w.currentTime=L;const Le=Ze(this,Pe,w);return ne=Math.max(ne,w.currentTime),Le});return w.currentTime=ne,{type:3,steps:ge,options:Mi(y.options)}}visitAnimate(y,w){const L=function Js(Y,y){if(Y.hasOwnProperty("duration"))return Y;if("number"==typeof Y)return is(Kr(Y,y).duration,0,"");const w=Y;if(w.split(/\s+/).some(ge=>"{"==ge.charAt(0)&&"{"==ge.charAt(1))){const ge=is(0,0,"");return ge.dynamic=!0,ge.strValue=w,ge}const ne=Kr(w,y);return is(ne.duration,ne.delay,ne.easing)}(y.timings,w.errors);w.currentAnimateTimings=L;let ne,ge=y.styles?y.styles:(0,S.oB)({});if(5==ge.type)ne=this.visitKeyframes(ge,w);else{let Pe=y.styles,Le=!1;if(!Pe){Le=!0;const gt={};L.easing&&(gt.easing=L.easing),Pe=(0,S.oB)(gt)}w.currentTime+=L.duration+L.delay;const rt=this.visitStyle(Pe,w);rt.isEmptyStep=Le,ne=rt}return w.currentAnimateTimings=null,{type:4,timings:L,style:ne,options:null}}visitStyle(y,w){const L=this._makeStyleAst(y,w);return this._validateStyleAst(L,w),L}_makeStyleAst(y,w){const L=[],ne=Array.isArray(y.styles)?y.styles:[y.styles];for(let Le of ne)"string"==typeof Le?Le===S.l3?L.push(Le):w.errors.push(new x.vHH(3002,!1)):L.push(ai(Le));let ge=!1,Pe=null;return L.forEach(Le=>{if(Le instanceof Map&&(Le.has("easing")&&(Pe=Le.get("easing"),Le.delete("easing")),!ge))for(let rt of Le.values())if(rt.toString().indexOf("{{")>=0){ge=!0;break}}),{type:6,styles:L,easing:Pe,offset:y.offset,containsDynamicStyles:ge,options:null}}_validateStyleAst(y,w){const L=w.currentAnimateTimings;let ne=w.currentTime,ge=w.currentTime;L&&ge>0&&(ge-=L.duration+L.delay),y.styles.forEach(Pe=>{"string"!=typeof Pe&&Pe.forEach((Le,rt)=>{const gt=w.collectedStyles.get(w.currentQuerySelector),Nt=gt.get(rt);let en=!0;Nt&&(ge!=ne&&ge>=Nt.startTime&&ne<=Nt.endTime&&(w.errors.push(function ve(Y,y,w,L,ne){return new x.vHH(3010,!1)}()),en=!1),ge=Nt.startTime),en&&gt.set(rt,{startTime:ge,endTime:ne}),w.options&&function Sn(Y,y,w){const L=y.params||{},ne=Ce(Y);ne.length&&ne.forEach(ge=>{L.hasOwnProperty(ge)||w.push(function G(Y){return new x.vHH(3001,!1)}())})}(Le,w.options,w.errors)})})}visitKeyframes(y,w){const L={type:5,styles:[],options:null};if(!w.currentAnimateTimings)return w.errors.push(function de(){return new x.vHH(3011,!1)}()),L;let ge=0;const Pe=[];let Le=!1,rt=!1,gt=0;const Nt=y.steps.map(xn=>{const As=this._makeStyleAst(xn,w);let Zi=null!=As.offset?As.offset:function li(Y){if("string"==typeof Y)return null;let y=null;if(Array.isArray(Y))Y.forEach(w=>{if(w instanceof Map&&w.has("offset")){const L=w;y=parseFloat(L.get("offset")),L.delete("offset")}});else if(Y instanceof Map&&Y.has("offset")){const w=Y;y=parseFloat(w.get("offset")),w.delete("offset")}return y}(As.styles),ci=0;return null!=Zi&&(ge++,ci=As.offset=Zi),rt=rt||ci<0||ci>1,Le=Le||ci<gt,gt=ci,Pe.push(ci),As});rt&&w.errors.push(function ae(){return new x.vHH(3012,!1)}()),Le&&w.errors.push(function je(){return new x.vHH(3200,!1)}());const en=y.steps.length;let Gn=0;ge>0&&ge<en?w.errors.push(function ye(){return new x.vHH(3202,!1)}()):0==ge&&(Gn=1/(en-1));const bn=en-1,Rn=w.currentTime,En=w.currentAnimateTimings,qr=En.duration;return Nt.forEach((xn,As)=>{const Zi=Gn>0?As==bn?1:Gn*As:Pe[As],ci=Zi*qr;w.currentTime=Rn+En.delay+ci,En.duration=ci,this._validateStyleAst(xn,w),xn.offset=Zi,L.styles.push(xn)}),L}visitReference(y,w){return{type:8,animation:Ze(this,fn(y.animation),w),options:Mi(y.options)}}visitAnimateChild(y,w){return w.depCount++,{type:9,options:Mi(y.options)}}visitAnimateRef(y,w){return{type:10,animation:this.visitReference(y.animation,w),options:Mi(y.options)}}visitQuery(y,w){const L=w.currentQuerySelector,ne=y.options||{};w.queryCount++,w.currentQuery=y;const[ge,Pe]=function jn(Y){const y=!!Y.split(/\s*,\s*/).find(w=>":self"==w);return y&&(Y=Y.replace(po,"")),Y=Y.replace(/@\*/g,qn).replace(/@\w+/g,w=>qn+"-"+w.slice(1)).replace(/:animating/g,Cr),[Y,y]}(y.selector);w.currentQuerySelector=L.length?L+" "+ge:ge,gr(w.collectedStyles,w.currentQuerySelector,new Map);const Le=Ze(this,fn(y.animation),w);return w.currentQuery=null,w.currentQuerySelector=L,{type:11,selector:ge,limit:ne.limit||0,optional:!!ne.optional,includeSelf:Pe,animation:Le,originalSelector:y.selector,options:Mi(y.options)}}visitStagger(y,w){w.currentQuery||w.errors.push(function te(){return new x.vHH(3013,!1)}());const L="full"===y.timings?{duration:0,delay:0,easing:"full"}:Kr(y.timings,w.errors,!0);return{type:12,animation:Ze(this,fn(y.animation),w),timings:L,options:null}}}class Qr{constructor(y){this.errors=y,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Mi(Y){return Y?(Y=sr(Y)).params&&(Y.params=function js(Y){return Y?sr(Y):null}(Y.params)):Y={},Y}function is(Y,y,w){return{duration:Y,delay:y,easing:w}}function Nr(Y,y,w,L,ne,ge,Pe=null,Le=!1){return{type:1,element:Y,keyframes:y,preStyleProps:w,postStyleProps:L,duration:ne,delay:ge,totalTime:ne+ge,easing:Pe,subTimeline:Le}}class ws{constructor(){this._map=new Map}get(y){return this._map.get(y)||[]}append(y,w){let L=this._map.get(y);L||this._map.set(y,L=[]),L.push(...w)}has(y){return this._map.has(y)}clear(){this._map.clear()}}const Fi=new RegExp(":enter","g"),ar=new RegExp(":leave","g");function Xs(Y,y,w,L,ne,ge=new Map,Pe=new Map,Le,rt,gt=[]){return(new Ho).buildKeyframes(Y,y,w,L,ne,ge,Pe,Le,rt,gt)}class Ho{buildKeyframes(y,w,L,ne,ge,Pe,Le,rt,gt,Nt=[]){gt=gt||new ws;const en=new Ke(y,w,gt,ne,ge,Nt,[]);en.options=rt;const Gn=rt.delay?Zr(rt.delay):0;en.currentTimeline.delayNextStep(Gn),en.currentTimeline.setStyles([Pe],null,en.errors,rt),Ze(this,L,en);const bn=en.timelines.filter(Rn=>Rn.containsAnimation());if(bn.length&&Le.size){let Rn;for(let En=bn.length-1;En>=0;En--){const qr=bn[En];if(qr.element===w){Rn=qr;break}}Rn&&!Rn.allowOnlyTimelineStyles()&&Rn.setStyles([Le],null,en.errors,rt)}return bn.length?bn.map(Rn=>Rn.buildKeyframes()):[Nr(w,[],[],[],0,Gn,"",!1)]}visitTrigger(y,w){}visitState(y,w){}visitTransition(y,w){}visitAnimateChild(y,w){const L=w.subInstructions.get(w.element);if(L){const ne=w.createSubContext(y.options),ge=w.currentTimeline.currentTime,Pe=this._visitSubInstructions(L,ne,ne.options);ge!=Pe&&w.transformIntoNewTimeline(Pe)}w.previousNode=y}visitAnimateRef(y,w){const L=w.createSubContext(y.options);L.transformIntoNewTimeline(),this._applyAnimationRefDelays([y.options,y.animation.options],w,L),this.visitReference(y.animation,L),w.transformIntoNewTimeline(L.currentTimeline.currentTime),w.previousNode=y}_applyAnimationRefDelays(y,w,L){for(const ge of y){const Pe=ge?.delay;if(Pe){var ne;const Le="number"==typeof Pe?Pe:Zr(De(Pe,null!==(ne=ge?.params)&&void 0!==ne?ne:{},w.errors));L.delayNextStep(Le)}}}_visitSubInstructions(y,w,L){let ge=w.currentTimeline.currentTime;const Pe=null!=L.duration?Zr(L.duration):null,Le=null!=L.delay?Zr(L.delay):null;return 0!==Pe&&y.forEach(rt=>{const gt=w.appendInstructionToTimeline(rt,Pe,Le);ge=Math.max(ge,gt.duration+gt.delay)}),ge}visitReference(y,w){w.updateOptions(y.options,!0),Ze(this,y.animation,w),w.previousNode=y}visitSequence(y,w){const L=w.subContextCount;let ne=w;const ge=y.options;if(ge&&(ge.params||ge.delay)&&(ne=w.createSubContext(ge),ne.transformIntoNewTimeline(),null!=ge.delay)){6==ne.previousNode.type&&(ne.currentTimeline.snapshotCurrentStyles(),ne.previousNode=$s);const Pe=Zr(ge.delay);ne.delayNextStep(Pe)}y.steps.length&&(y.steps.forEach(Pe=>Ze(this,Pe,ne)),ne.currentTimeline.applyStylesToKeyframe(),ne.subContextCount>L&&ne.transformIntoNewTimeline()),w.previousNode=y}visitGroup(y,w){const L=[];let ne=w.currentTimeline.currentTime;const ge=y.options&&y.options.delay?Zr(y.options.delay):0;y.steps.forEach(Pe=>{const Le=w.createSubContext(y.options);ge&&Le.delayNextStep(ge),Ze(this,Pe,Le),ne=Math.max(ne,Le.currentTimeline.currentTime),L.push(Le.currentTimeline)}),L.forEach(Pe=>w.currentTimeline.mergeTimelineCollectedStyles(Pe)),w.transformIntoNewTimeline(ne),w.previousNode=y}_visitTiming(y,w){if(y.dynamic){const L=y.strValue;return Kr(w.params?De(L,w.params,w.errors):L,w.errors)}return{duration:y.duration,delay:y.delay,easing:y.easing}}visitAnimate(y,w){const L=w.currentAnimateTimings=this._visitTiming(y.timings,w),ne=w.currentTimeline;L.delay&&(w.incrementTime(L.delay),ne.snapshotCurrentStyles());const ge=y.style;5==ge.type?this.visitKeyframes(ge,w):(w.incrementTime(L.duration),this.visitStyle(ge,w),ne.applyStylesToKeyframe()),w.currentAnimateTimings=null,w.previousNode=y}visitStyle(y,w){const L=w.currentTimeline,ne=w.currentAnimateTimings;!ne&&L.hasCurrentStyleProperties()&&L.forwardFrame();const ge=ne&&ne.easing||y.easing;y.isEmptyStep?L.applyEmptyStep(ge):L.setStyles(y.styles,ge,w.errors,w.options),w.previousNode=y}visitKeyframes(y,w){const L=w.currentAnimateTimings,ne=w.currentTimeline.duration,ge=L.duration,Le=w.createSubContext().currentTimeline;Le.easing=L.easing,y.styles.forEach(rt=>{Le.forwardTime((rt.offset||0)*ge),Le.setStyles(rt.styles,rt.easing,w.errors,w.options),Le.applyStylesToKeyframe()}),w.currentTimeline.mergeTimelineCollectedStyles(Le),w.transformIntoNewTimeline(ne+ge),w.previousNode=y}visitQuery(y,w){const L=w.currentTimeline.currentTime,ne=y.options||{},ge=ne.delay?Zr(ne.delay):0;ge&&(6===w.previousNode.type||0==L&&w.currentTimeline.hasCurrentStyleProperties())&&(w.currentTimeline.snapshotCurrentStyles(),w.previousNode=$s);let Pe=L;const Le=w.invokeQuery(y.selector,y.originalSelector,y.limit,y.includeSelf,!!ne.optional,w.errors);w.currentQueryTotal=Le.length;let rt=null;Le.forEach((gt,Nt)=>{w.currentQueryIndex=Nt;const en=w.createSubContext(y.options,gt);ge&&en.delayNextStep(ge),gt===w.element&&(rt=en.currentTimeline),Ze(this,y.animation,en),en.currentTimeline.applyStylesToKeyframe(),Pe=Math.max(Pe,en.currentTimeline.currentTime)}),w.currentQueryIndex=0,w.currentQueryTotal=0,w.transformIntoNewTimeline(Pe),rt&&(w.currentTimeline.mergeTimelineCollectedStyles(rt),w.currentTimeline.snapshotCurrentStyles()),w.previousNode=y}visitStagger(y,w){const L=w.parentContext,ne=w.currentTimeline,ge=y.timings,Pe=Math.abs(ge.duration),Le=Pe*(w.currentQueryTotal-1);let rt=Pe*w.currentQueryIndex;switch(ge.duration<0?"reverse":ge.easing){case"reverse":rt=Le-rt;break;case"full":rt=L.currentStaggerTime}const Nt=w.currentTimeline;rt&&Nt.delayNextStep(rt);const en=Nt.currentTime;Ze(this,y.animation,w),w.previousNode=y,L.currentStaggerTime=ne.currentTime-en+(ne.startTime-L.currentTimeline.startTime)}}const $s={};class Ke{constructor(y,w,L,ne,ge,Pe,Le,rt){this._driver=y,this.element=w,this.subInstructions=L,this._enterClassName=ne,this._leaveClassName=ge,this.errors=Pe,this.timelines=Le,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$s,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=rt||new Ve(this._driver,w,0),Le.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(y,w){if(!y)return;const L=y;let ne=this.options;null!=L.duration&&(ne.duration=Zr(L.duration)),null!=L.delay&&(ne.delay=Zr(L.delay));const ge=L.params;if(ge){let Pe=ne.params;Pe||(Pe=this.options.params={}),Object.keys(ge).forEach(Le=>{(!w||!Pe.hasOwnProperty(Le))&&(Pe[Le]=De(ge[Le],Pe,this.errors))})}}_copyOptions(){const y={};if(this.options){const w=this.options.params;if(w){const L=y.params={};Object.keys(w).forEach(ne=>{L[ne]=w[ne]})}}return y}createSubContext(y=null,w,L){const ne=w||this.element,ge=new Ke(this._driver,ne,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ne,L||0));return ge.previousNode=this.previousNode,ge.currentAnimateTimings=this.currentAnimateTimings,ge.options=this._copyOptions(),ge.updateOptions(y),ge.currentQueryIndex=this.currentQueryIndex,ge.currentQueryTotal=this.currentQueryTotal,ge.parentContext=this,this.subContextCount++,ge}transformIntoNewTimeline(y){return this.previousNode=$s,this.currentTimeline=this.currentTimeline.fork(this.element,y),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(y,w,L){const ne={duration:w??y.duration,delay:this.currentTimeline.currentTime+(L??0)+y.delay,easing:""},ge=new tt(this._driver,y.element,y.keyframes,y.preStyleProps,y.postStyleProps,ne,y.stretchStartingKeyframe);return this.timelines.push(ge),ne}incrementTime(y){this.currentTimeline.forwardTime(this.currentTimeline.duration+y)}delayNextStep(y){y>0&&this.currentTimeline.delayNextStep(y)}invokeQuery(y,w,L,ne,ge,Pe){let Le=[];if(ne&&Le.push(this.element),y.length>0){y=(y=y.replace(Fi,"."+this._enterClassName)).replace(ar,"."+this._leaveClassName);let gt=this._driver.query(this.element,y,1!=L);0!==L&&(gt=L<0?gt.slice(gt.length+L,gt.length):gt.slice(0,L)),Le.push(...gt)}return!ge&&0==Le.length&&Pe.push(function ce(Y){return new x.vHH(3014,!1)}()),Le}}class Ve{constructor(y,w,L,ne){this._driver=y,this.element=w,this.startTime=L,this._elementTimelineStylesLookup=ne,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(w),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(w,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(y){const w=1===this._keyframes.size&&this._pendingStyles.size;this.duration||w?(this.forwardTime(this.currentTime+y),w&&this.snapshotCurrentStyles()):this.startTime+=y}fork(y,w){return this.applyStylesToKeyframe(),new Ve(this._driver,y,w||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(y){this.applyStylesToKeyframe(),this.duration=y,this._loadKeyframe()}_updateStyle(y,w){this._localTimelineStyles.set(y,w),this._globalTimelineStyles.set(y,w),this._styleSummary.set(y,{time:this.currentTime,value:w})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(y){y&&this._previousKeyframe.set("easing",y);for(let[w,L]of this._globalTimelineStyles)this._backFill.set(w,L||S.l3),this._currentKeyframe.set(w,S.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(y,w,L,ne){w&&this._previousKeyframe.set("easing",w);const ge=ne&&ne.params||{},Pe=function Pt(Y,y){const w=new Map;let L;return Y.forEach(ne=>{if("*"===ne){L=L||y.keys();for(let ge of L)w.set(ge,S.l3)}else Ae(ne,w)}),w}(y,this._globalTimelineStyles);for(let[rt,gt]of Pe){const Nt=De(gt,ge,L);var Le;this._pendingStyles.set(rt,Nt),this._localTimelineStyles.has(rt)||this._backFill.set(rt,null!==(Le=this._globalTimelineStyles.get(rt))&&void 0!==Le?Le:S.l3),this._updateStyle(rt,Nt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((y,w)=>{this._currentKeyframe.set(w,y)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((y,w)=>{this._currentKeyframe.has(w)||this._currentKeyframe.set(w,y)}))}snapshotCurrentStyles(){for(let[y,w]of this._localTimelineStyles)this._pendingStyles.set(y,w),this._updateStyle(y,w)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const y=[];for(let w in this._currentKeyframe)y.push(w);return y}mergeTimelineCollectedStyles(y){y._styleSummary.forEach((w,L)=>{const ne=this._styleSummary.get(L);(!ne||w.time>ne.time)&&this._updateStyle(L,w.value)})}buildKeyframes(){this.applyStylesToKeyframe();const y=new Set,w=new Set,L=1===this._keyframes.size&&0===this.duration;let ne=[];this._keyframes.forEach((Le,rt)=>{const gt=Ae(Le,new Map,this._backFill);gt.forEach((Nt,en)=>{Nt===S.k1?y.add(en):Nt===S.l3&&w.add(en)}),L||gt.set("offset",rt/this.duration),ne.push(gt)});const ge=y.size?me(y.values()):[],Pe=w.size?me(w.values()):[];if(L){const Le=ne[0],rt=new Map(Le);Le.set("offset",0),rt.set("offset",1),ne=[Le,rt]}return Nr(this.element,ne,ge,Pe,this.duration,this.startTime,this.easing,!1)}}class tt extends Ve{constructor(y,w,L,ne,ge,Pe,Le=!1){super(y,w,Pe.delay),this.keyframes=L,this.preStyleProps=ne,this.postStyleProps=ge,this._stretchStartingKeyframe=Le,this.timings={duration:Pe.duration,delay:Pe.delay,easing:Pe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let y=this.keyframes,{delay:w,duration:L,easing:ne}=this.timings;if(this._stretchStartingKeyframe&&w){const ge=[],Pe=L+w,Le=w/Pe,rt=Ae(y[0]);rt.set("offset",0),ge.push(rt);const gt=Ae(y[0]);gt.set("offset",yt(Le)),ge.push(gt);const Nt=y.length-1;for(let en=1;en<=Nt;en++){let Gn=Ae(y[en]);const bn=Gn.get("offset");Gn.set("offset",yt((w+bn*L)/Pe)),ge.push(Gn)}L=Pe,w=0,ne="",y=ge}return Nr(this.element,y,this.preStyleProps,this.postStyleProps,L,w,ne,!0)}}function yt(Y,y=3){const w=Math.pow(10,y-1);return Math.round(Y*w)/w}class tr{}const Er=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class eo extends tr{normalizePropertyName(y,w){return ht(y)}normalizeStyleValue(y,w,L,ne){let ge="";const Pe=L.toString().trim();if(Er.has(w)&&0!==L&&"0"!==L)if("number"==typeof L)ge="px";else{const Le=L.match(/^[+-]?[\d\.]+([a-z]*)$/);Le&&0==Le[1].length&&ne.push(function F(Y,y){return new x.vHH(3005,!1)}())}return Pe+ge}}function Is(Y,y,w,L,ne,ge,Pe,Le,rt,gt,Nt,en,Gn){return{type:0,element:Y,triggerName:y,isRemovalTransition:ne,fromState:w,fromStyles:ge,toState:L,toStyles:Pe,timelines:Le,queriedElements:rt,preStyleProps:gt,postStyleProps:Nt,totalTime:en,errors:Gn}}const Ui={};class oo{constructor(y,w,L){this._triggerName=y,this.ast=w,this._stateStyles=L}match(y,w,L,ne){return function bs(Y,y,w,L,ne){return Y.some(ge=>ge(y,w,L,ne))}(this.ast.matchers,y,w,L,ne)}buildStyles(y,w,L){let ne=this._stateStyles.get("*");return void 0!==y&&(ne=this._stateStyles.get(y?.toString())||ne),ne?ne.buildStyles(w,L):new Map}build(y,w,L,ne,ge,Pe,Le,rt,gt,Nt){var en;const Gn=[],bn=this.ast.options&&this.ast.options.params||Ui,En=this.buildStyles(L,Le&&Le.params||Ui,Gn),qr=rt&&rt.params||Ui,xn=this.buildStyles(ne,qr,Gn),As=new Set,Zi=new Map,ci=new Map,ia="void"===ne,Ws={params:zo(qr,bn),delay:null===(en=this.ast.options)||void 0===en?void 0:en.delay},Gi=Nt?[]:Xs(y,w,this.ast.animation,ge,Pe,En,xn,Ws,gt,Gn);let as=0;if(Gi.forEach(Qi=>{as=Math.max(Qi.duration+Qi.delay,as)}),Gn.length)return Is(w,this._triggerName,L,ne,ia,En,xn,[],[],Zi,ci,as,Gn);Gi.forEach(Qi=>{const Wi=Qi.element,ji=gr(Zi,Wi,new Set);Qi.preStyleProps.forEach(qs=>ji.add(qs));const Ns=gr(ci,Wi,new Set);Qi.postStyleProps.forEach(qs=>Ns.add(qs)),Wi!==w&&As.add(Wi)});const Mo=me(As.values());return Is(w,this._triggerName,L,ne,ia,En,xn,Gi,Mo,Zi,ci,as)}}function zo(Y,y){const w=sr(y);for(const L in Y)Y.hasOwnProperty(L)&&null!=Y[L]&&(w[L]=Y[L]);return w}class Ts{constructor(y,w,L){this.styles=y,this.defaultParams=w,this.normalizer=L}buildStyles(y,w){const L=new Map,ne=sr(this.defaultParams);return Object.keys(y).forEach(ge=>{const Pe=y[ge];null!==Pe&&(ne[ge]=Pe)}),this.styles.styles.forEach(ge=>{"string"!=typeof ge&&ge.forEach((Pe,Le)=>{Pe&&(Pe=De(Pe,ne,w));const rt=this.normalizer.normalizePropertyName(Le,w);Pe=this.normalizer.normalizeStyleValue(Le,rt,Pe,w),L.set(rt,Pe)})}),L}}class mo{constructor(y,w,L){this.name=y,this.ast=w,this._normalizer=L,this.transitionFactories=[],this.states=new Map,w.states.forEach(ne=>{this.states.set(ne.name,new Ts(ne.style,ne.options&&ne.options.params||{},L))}),Cs(this.states,"true","1"),Cs(this.states,"false","0"),w.transitions.forEach(ne=>{this.transitionFactories.push(new oo(y,ne,this.states))}),this.fallbackTransition=function yo(Y,y,w){return new oo(Y,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Pe,Le)=>!0],options:null,queryCount:0,depCount:0},y)}(y,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(y,w,L,ne){return this.transitionFactories.find(Pe=>Pe.match(y,w,L,ne))||null}matchStyles(y,w,L){return this.fallbackTransition.buildStyles(y,w,L)}}function Cs(Y,y,w){Y.has(y)?Y.has(w)||Y.set(w,Y.get(y)):Y.has(w)&&Y.set(y,Y.get(w))}const vo=new ws;class Go{constructor(y,w,L){this.bodyNode=y,this._driver=w,this._normalizer=L,this._animations=new Map,this._playersById=new Map,this.players=[]}register(y,w){const L=[],ge=hr(this._driver,w,L,[]);if(L.length)throw function ot(Y){return new x.vHH(3503,!1)}();this._animations.set(y,ge)}_buildPlayer(y,w,L){const ne=y.element,ge=Xn(0,this._normalizer,0,y.keyframes,w,L);return this._driver.animate(ne,ge,y.duration,y.delay,y.easing,[],!0)}create(y,w,L={}){const ne=[],ge=this._animations.get(y);let Pe;const Le=new Map;if(ge?(Pe=Xs(this._driver,w,ge,Dr,Vn,new Map,new Map,L,vo,ne),Pe.forEach(Nt=>{const en=gr(Le,Nt.element,new Map);Nt.postStyleProps.forEach(Gn=>en.set(Gn,null))})):(ne.push(function Qe(){return new x.vHH(3300,!1)}()),Pe=[]),ne.length)throw function Et(Y){return new x.vHH(3504,!1)}();Le.forEach((Nt,en)=>{Nt.forEach((Gn,bn)=>{Nt.set(bn,this._driver.computeStyle(en,bn,S.l3))})});const gt=cr(Pe.map(Nt=>{const en=Le.get(Nt.element);return this._buildPlayer(Nt,new Map,en)}));return this._playersById.set(y,gt),gt.onDestroy(()=>this.destroy(y)),this.players.push(gt),gt}destroy(y){const w=this._getPlayer(y);w.destroy(),this._playersById.delete(y);const L=this.players.indexOf(w);L>=0&&this.players.splice(L,1)}_getPlayer(y){const w=this._playersById.get(y);if(!w)throw function Dt(Y){return new x.vHH(3301,!1)}();return w}listen(y,w,L,ne){const ge=ki(w,"","","");return Mr(this._getPlayer(y),L,ge,ne),()=>{}}command(y,w,L,ne){if("register"==L)return void this.register(y,ne[0]);if("create"==L)return void this.create(y,w,ne[0]||{});const ge=this._getPlayer(y);switch(L){case"play":ge.play();break;case"pause":ge.pause();break;case"reset":ge.reset();break;case"restart":ge.restart();break;case"finish":ge.finish();break;case"init":ge.init();break;case"setPosition":ge.setPosition(parseFloat(ne[0]));break;case"destroy":this.destroy(y)}}}const Wo="ng-animate-queued",Ci="ng-animate-disabled",Ss=[],wa={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},zr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fi="__ng_removed";class Gr{constructor(y,w=""){this.namespaceId=w;const L=y&&y.hasOwnProperty("value");if(this.value=function Ma(Y){return Y??null}(L?y.value:y),L){const ge=sr(y);delete ge.value,this.options=ge}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(y){const w=y.params;if(w){const L=this.options.params;Object.keys(w).forEach(ne=>{null==L[ne]&&(L[ne]=w[ne])})}}}const Pi="void",zi=new Gr(Pi);class qo{constructor(y,w,L){this.id=y,this.hostElement=w,this._engine=L,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+y,gn(w,this._hostClassName)}listen(y,w,L,ne){if(!this._triggers.has(w))throw function un(Y,y){return new x.vHH(3302,!1)}();if(null==L||0==L.length)throw function Ln(Y){return new x.vHH(3303,!1)}();if(!function wi(Y){return"start"==Y||"done"==Y}(L))throw function Dn(Y,y){return new x.vHH(3400,!1)}();const ge=gr(this._elementListeners,y,[]),Pe={name:w,phase:L,callback:ne};ge.push(Pe);const Le=gr(this._engine.statesByElement,y,new Map);return Le.has(w)||(gn(y,_i),gn(y,_i+"-"+w),Le.set(w,zi)),()=>{this._engine.afterFlush(()=>{const rt=ge.indexOf(Pe);rt>=0&&ge.splice(rt,1),this._triggers.has(w)||Le.delete(w)})}}register(y,w){return!this._triggers.has(y)&&(this._triggers.set(y,w),!0)}_getTrigger(y){const w=this._triggers.get(y);if(!w)throw function St(Y){return new x.vHH(3401,!1)}();return w}trigger(y,w,L,ne=!0){const ge=this._getTrigger(w),Pe=new to(this.id,w,y);let Le=this._engine.statesByElement.get(y);Le||(gn(y,_i),gn(y,_i+"-"+w),this._engine.statesByElement.set(y,Le=new Map));let rt=Le.get(w);const gt=new Gr(L,this.id);if(!(L&&L.hasOwnProperty("value"))&&rt&&gt.absorbOptions(rt.options),Le.set(w,gt),rt||(rt=zi),gt.value!==Pi&&rt.value===gt.value){if(!function uo(Y,y){const w=Object.keys(Y),L=Object.keys(y);if(w.length!=L.length)return!1;for(let ne=0;ne<w.length;ne++){const ge=w[ne];if(!y.hasOwnProperty(ge)||Y[ge]!==y[ge])return!1}return!0}(rt.params,gt.params)){const En=[],qr=ge.matchStyles(rt.value,rt.params,En),xn=ge.matchStyles(gt.value,gt.params,En);En.length?this._engine.reportError(En):this._engine.afterFlush(()=>{Mt(y,qr),Ye(y,xn)})}return}const Gn=gr(this._engine.playersByElement,y,[]);Gn.forEach(En=>{En.namespaceId==this.id&&En.triggerName==w&&En.queued&&En.destroy()});let bn=ge.matchTransition(rt.value,gt.value,y,gt.params),Rn=!1;if(!bn){if(!ne)return;bn=ge.fallbackTransition,Rn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:y,triggerName:w,transition:bn,fromState:rt,toState:gt,player:Pe,isFallbackTransition:Rn}),Rn||(gn(y,Wo),Pe.onStart(()=>{ao(y,Wo)})),Pe.onDone(()=>{let En=this.players.indexOf(Pe);En>=0&&this.players.splice(En,1);const qr=this._engine.playersByElement.get(y);if(qr){let xn=qr.indexOf(Pe);xn>=0&&qr.splice(xn,1)}}),this.players.push(Pe),Gn.push(Pe),Pe}deregister(y){this._triggers.delete(y),this._engine.statesByElement.forEach(w=>w.delete(y)),this._elementListeners.forEach((w,L)=>{this._elementListeners.set(L,w.filter(ne=>ne.name!=y))})}clearElementCache(y){this._engine.statesByElement.delete(y),this._elementListeners.delete(y);const w=this._engine.playersByElement.get(y);w&&(w.forEach(L=>L.destroy()),this._engine.playersByElement.delete(y))}_signalRemovalForInnerTriggers(y,w){const L=this._engine.driver.query(y,qn,!0);L.forEach(ne=>{if(ne[fi])return;const ge=this._engine.fetchNamespacesByElement(ne);ge.size?ge.forEach(Pe=>Pe.triggerLeaveAnimation(ne,w,!1,!0)):this.clearElementCache(ne)}),this._engine.afterFlushAnimationsDone(()=>L.forEach(ne=>this.clearElementCache(ne)))}triggerLeaveAnimation(y,w,L,ne){const ge=this._engine.statesByElement.get(y),Pe=new Map;if(ge){const Le=[];if(ge.forEach((rt,gt)=>{if(Pe.set(gt,rt.value),this._triggers.has(gt)){const Nt=this.trigger(y,gt,Pi,ne);Nt&&Le.push(Nt)}}),Le.length)return this._engine.markElementAsRemoved(this.id,y,!0,w,Pe),L&&cr(Le).onDone(()=>this._engine.processLeaveNode(y)),!0}return!1}prepareLeaveAnimationListeners(y){const w=this._elementListeners.get(y),L=this._engine.statesByElement.get(y);if(w&&L){const ne=new Set;w.forEach(ge=>{const Pe=ge.name;if(ne.has(Pe))return;ne.add(Pe);const rt=this._triggers.get(Pe).fallbackTransition,gt=L.get(Pe)||zi,Nt=new Gr(Pi),en=new to(this.id,Pe,y);this._engine.totalQueuedPlayers++,this._queue.push({element:y,triggerName:Pe,transition:rt,fromState:gt,toState:Nt,player:en,isFallbackTransition:!0})})}}removeNode(y,w){const L=this._engine;if(y.childElementCount&&this._signalRemovalForInnerTriggers(y,w),this.triggerLeaveAnimation(y,w,!0))return;let ne=!1;if(L.totalAnimations){const ge=L.players.length?L.playersByQueriedElement.get(y):[];if(ge&&ge.length)ne=!0;else{let Pe=y;for(;Pe=Pe.parentNode;)if(L.statesByElement.get(Pe)){ne=!0;break}}}if(this.prepareLeaveAnimationListeners(y),ne)L.markElementAsRemoved(this.id,y,!1,w);else{const ge=y[fi];(!ge||ge===wa)&&(L.afterFlush(()=>this.clearElementCache(y)),L.destroyInnerAnimations(y),L._onRemovalComplete(y,w))}}insertNode(y,w){gn(y,this._hostClassName)}drainQueuedTransitions(y){const w=[];return this._queue.forEach(L=>{const ne=L.player;if(ne.destroyed)return;const ge=L.element,Pe=this._elementListeners.get(ge);Pe&&Pe.forEach(Le=>{if(Le.name==L.triggerName){const rt=ki(ge,L.triggerName,L.fromState.value,L.toState.value);rt._data=y,Mr(L.player,Le.phase,rt,Le.callback)}}),ne.markedForDestroy?this._engine.afterFlush(()=>{ne.destroy()}):w.push(L)}),this._queue=[],w.sort((L,ne)=>{const ge=L.transition.ast.depCount,Pe=ne.transition.ast.depCount;return 0==ge||0==Pe?ge-Pe:this._engine.driver.containsElement(L.element,ne.element)?1:-1})}destroy(y){this.players.forEach(w=>w.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,y)}elementContainsData(y){let w=!1;return this._elementListeners.has(y)&&(w=!0),w=!!this._queue.find(L=>L.element===y)||w,w}}class So{constructor(y,w,L){this.bodyNode=y,this.driver=w,this._normalizer=L,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ne,ge)=>{}}_onRemovalComplete(y,w){this.onRemovalComplete(y,w)}get queuedPlayers(){const y=[];return this._namespaceList.forEach(w=>{w.players.forEach(L=>{L.queued&&y.push(L)})}),y}createNamespace(y,w){const L=new qo(y,w,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,w)?this._balanceNamespaceList(L,w):(this.newHostElements.set(w,L),this.collectEnterElement(w)),this._namespaceLookup[y]=L}_balanceNamespaceList(y,w){const L=this._namespaceList,ne=this.namespacesByHostElement;if(L.length-1>=0){let Pe=!1,Le=this.driver.getParentElement(w);for(;Le;){const rt=ne.get(Le);if(rt){const gt=L.indexOf(rt);L.splice(gt+1,0,y),Pe=!0;break}Le=this.driver.getParentElement(Le)}Pe||L.unshift(y)}else L.push(y);return ne.set(w,y),y}register(y,w){let L=this._namespaceLookup[y];return L||(L=this.createNamespace(y,w)),L}registerTrigger(y,w,L){let ne=this._namespaceLookup[y];ne&&ne.register(w,L)&&this.totalAnimations++}destroy(y,w){if(!y)return;const L=this._fetchNamespace(y);this.afterFlush(()=>{this.namespacesByHostElement.delete(L.hostElement),delete this._namespaceLookup[y];const ne=this._namespaceList.indexOf(L);ne>=0&&this._namespaceList.splice(ne,1)}),this.afterFlushAnimationsDone(()=>L.destroy(w))}_fetchNamespace(y){return this._namespaceLookup[y]}fetchNamespacesByElement(y){const w=new Set,L=this.statesByElement.get(y);if(L)for(let ne of L.values())if(ne.namespaceId){const ge=this._fetchNamespace(ne.namespaceId);ge&&w.add(ge)}return w}trigger(y,w,L,ne){if(es(w)){const ge=this._fetchNamespace(y);if(ge)return ge.trigger(w,L,ne),!0}return!1}insertNode(y,w,L,ne){if(!es(w))return;const ge=w[fi];if(ge&&ge.setForRemoval){ge.setForRemoval=!1,ge.setForMove=!0;const Pe=this.collectedLeaveElements.indexOf(w);Pe>=0&&this.collectedLeaveElements.splice(Pe,1)}if(y){const Pe=this._fetchNamespace(y);Pe&&Pe.insertNode(w,L)}ne&&this.collectEnterElement(w)}collectEnterElement(y){this.collectedEnterElements.push(y)}markElementAsDisabled(y,w){w?this.disabledNodes.has(y)||(this.disabledNodes.add(y),gn(y,Ci)):this.disabledNodes.has(y)&&(this.disabledNodes.delete(y),ao(y,Ci))}removeNode(y,w,L,ne){if(es(w)){const ge=y?this._fetchNamespace(y):null;if(ge?ge.removeNode(w,ne):this.markElementAsRemoved(y,w,!1,ne),L){const Pe=this.namespacesByHostElement.get(w);Pe&&Pe.id!==y&&Pe.removeNode(w,ne)}}else this._onRemovalComplete(w,ne)}markElementAsRemoved(y,w,L,ne,ge){this.collectedLeaveElements.push(w),w[fi]={namespaceId:y,setForRemoval:ne,hasAnimation:L,removedBeforeQueried:!1,previousTriggersValues:ge}}listen(y,w,L,ne,ge){return es(w)?this._fetchNamespace(y).listen(w,L,ne,ge):()=>{}}_buildInstruction(y,w,L,ne,ge){return y.transition.build(this.driver,y.element,y.fromState.value,y.toState.value,L,ne,y.fromState.options,y.toState.options,w,ge)}destroyInnerAnimations(y){let w=this.driver.query(y,qn,!0);w.forEach(L=>this.destroyActiveAnimationsForElement(L)),0!=this.playersByQueriedElement.size&&(w=this.driver.query(y,Cr,!0),w.forEach(L=>this.finishActiveQueriedAnimationOnElement(L)))}destroyActiveAnimationsForElement(y){const w=this.playersByElement.get(y);w&&w.forEach(L=>{L.queued?L.markedForDestroy=!0:L.destroy()})}finishActiveQueriedAnimationOnElement(y){const w=this.playersByQueriedElement.get(y);w&&w.forEach(L=>L.finish())}whenRenderingDone(){return new Promise(y=>{if(this.players.length)return cr(this.players).onDone(()=>y());y()})}processLeaveNode(y){var w;const L=y[fi];if(L&&L.setForRemoval){if(y[fi]=wa,L.namespaceId){this.destroyInnerAnimations(y);const ne=this._fetchNamespace(L.namespaceId);ne&&ne.clearElementCache(y)}this._onRemovalComplete(y,L.setForRemoval)}null!==(w=y.classList)&&void 0!==w&&w.contains(Ci)&&this.markElementAsDisabled(y,!1),this.driver.query(y,".ng-animate-disabled",!0).forEach(ne=>{this.markElementAsDisabled(ne,!1)})}flush(y=-1){let w=[];if(this.newHostElements.size&&(this.newHostElements.forEach((L,ne)=>this._balanceNamespaceList(L,ne)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let L=0;L<this.collectedEnterElements.length;L++)gn(this.collectedEnterElements[L],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const L=[];try{w=this._flushAnimations(L,y)}finally{for(let ne=0;ne<L.length;ne++)L[ne]()}}else for(let L=0;L<this.collectedLeaveElements.length;L++)this.processLeaveNode(this.collectedLeaveElements[L]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(L=>L()),this._flushFns=[],this._whenQuietFns.length){const L=this._whenQuietFns;this._whenQuietFns=[],w.length?cr(w).onDone(()=>{L.forEach(ne=>ne())}):L.forEach(ne=>ne())}}reportError(y){throw function Nn(Y){return new x.vHH(3402,!1)}()}_flushAnimations(y,w){const L=new ws,ne=[],ge=new Map,Pe=[],Le=new Map,rt=new Map,gt=new Map,Nt=new Set;this.disabledNodes.forEach(nn=>{Nt.add(nn);const wn=this.driver.query(nn,".ng-animate-queued",!0);for(let cn=0;cn<wn.length;cn++)Nt.add(wn[cn])});const en=this.bodyNode,Gn=Array.from(this.statesByElement.keys()),bn=Vi(Gn,this.collectedEnterElements),Rn=new Map;let En=0;bn.forEach((nn,wn)=>{const cn=Dr+En++;Rn.set(wn,cn),nn.forEach(ur=>gn(ur,cn))});const qr=[],xn=new Set,As=new Set;for(let nn=0;nn<this.collectedLeaveElements.length;nn++){const wn=this.collectedLeaveElements[nn],cn=wn[fi];cn&&cn.setForRemoval&&(qr.push(wn),xn.add(wn),cn.hasAnimation?this.driver.query(wn,".ng-star-inserted",!0).forEach(ur=>xn.add(ur)):As.add(wn))}const Zi=new Map,ci=Vi(Gn,Array.from(xn));ci.forEach((nn,wn)=>{const cn=Vn+En++;Zi.set(wn,cn),nn.forEach(ur=>gn(ur,cn))}),y.push(()=>{bn.forEach((nn,wn)=>{const cn=Rn.get(wn);nn.forEach(ur=>ao(ur,cn))}),ci.forEach((nn,wn)=>{const cn=Zi.get(wn);nn.forEach(ur=>ao(ur,cn))}),qr.forEach(nn=>{this.processLeaveNode(nn)})});const ia=[],Ws=[];for(let nn=this._namespaceList.length-1;nn>=0;nn--)this._namespaceList[nn].drainQueuedTransitions(w).forEach(cn=>{const ur=cn.player,mi=cn.element;if(ia.push(ur),this.collectedEnterElements.length){const ys=mi[fi];if(ys&&ys.setForMove){if(ys.previousTriggersValues&&ys.previousTriggersValues.has(cn.triggerName)){const Po=ys.previousTriggersValues.get(cn.triggerName),yr=this.statesByElement.get(cn.element);if(yr&&yr.has(cn.triggerName)){const Ha=yr.get(cn.triggerName);Ha.value=Po,yr.set(cn.triggerName,Ha)}}return void ur.destroy()}}const Ks=!en||!this.driver.containsElement(en,mi),$i=Zi.get(mi),Zs=Rn.get(mi),ii=this._buildInstruction(cn,L,Zs,$i,Ks);if(ii.errors&&ii.errors.length)return void Ws.push(ii);if(Ks)return ur.onStart(()=>Mt(mi,ii.fromStyles)),ur.onDestroy(()=>Ye(mi,ii.toStyles)),void ne.push(ur);if(cn.isFallbackTransition)return ur.onStart(()=>Mt(mi,ii.fromStyles)),ur.onDestroy(()=>Ye(mi,ii.toStyles)),void ne.push(ur);const Pa=[];ii.timelines.forEach(ys=>{ys.stretchStartingKeyframe=!0,this.disabledNodes.has(ys.element)||Pa.push(ys)}),ii.timelines=Pa,L.append(mi,ii.timelines),Pe.push({instruction:ii,player:ur,element:mi}),ii.queriedElements.forEach(ys=>gr(Le,ys,[]).push(ur)),ii.preStyleProps.forEach((ys,Po)=>{if(ys.size){let yr=rt.get(Po);yr||rt.set(Po,yr=new Set),ys.forEach((Ha,ei)=>yr.add(ei))}}),ii.postStyleProps.forEach((ys,Po)=>{let yr=gt.get(Po);yr||gt.set(Po,yr=new Set),ys.forEach((Ha,ei)=>yr.add(ei))})});if(Ws.length){const nn=[];Ws.forEach(wn=>{nn.push(function rn(Y,y){return new x.vHH(3505,!1)}())}),ia.forEach(wn=>wn.destroy()),this.reportError(nn)}const Gi=new Map,as=new Map;Pe.forEach(nn=>{const wn=nn.element;L.has(wn)&&(as.set(wn,wn),this._beforeAnimationBuild(nn.player.namespaceId,nn.instruction,Gi))}),ne.forEach(nn=>{const wn=nn.element;this._getPreviousPlayers(wn,!1,nn.namespaceId,nn.triggerName,null).forEach(ur=>{gr(Gi,wn,[]).push(ur),ur.destroy()})});const Mo=qr.filter(nn=>Hs(nn,rt,gt)),Qi=new Map;Bi(Qi,this.driver,As,gt,S.l3).forEach(nn=>{Hs(nn,rt,gt)&&Mo.push(nn)});const ji=new Map;bn.forEach((nn,wn)=>{Bi(ji,this.driver,new Set(nn),rt,S.k1)}),Mo.forEach(nn=>{var wn,cn;const ur=Qi.get(nn),mi=ji.get(nn);Qi.set(nn,new Map([...Array.from(null!==(wn=ur?.entries())&&void 0!==wn?wn:[]),...Array.from(null!==(cn=mi?.entries())&&void 0!==cn?cn:[])]))});const Ns=[],qs=[],_o={};Pe.forEach(nn=>{const{element:wn,player:cn,instruction:ur}=nn;if(L.has(wn)){if(Nt.has(wn))return cn.onDestroy(()=>Ye(wn,ur.toStyles)),cn.disabled=!0,cn.overrideTotalTime(ur.totalTime),void ne.push(cn);let mi=_o;if(as.size>1){let $i=wn;const Zs=[];for(;$i=$i.parentNode;){const ii=as.get($i);if(ii){mi=ii;break}Zs.push($i)}Zs.forEach(ii=>as.set(ii,mi))}const Ks=this._buildAnimation(cn.namespaceId,ur,Gi,ge,ji,Qi);if(cn.setRealPlayer(Ks),mi===_o)Ns.push(cn);else{const $i=this.playersByElement.get(mi);$i&&$i.length&&(cn.parentPlayer=cr($i)),ne.push(cn)}}else Mt(wn,ur.fromStyles),cn.onDestroy(()=>Ye(wn,ur.toStyles)),qs.push(cn),Nt.has(wn)&&ne.push(cn)}),qs.forEach(nn=>{const wn=ge.get(nn.element);if(wn&&wn.length){const cn=cr(wn);nn.setRealPlayer(cn)}}),ne.forEach(nn=>{nn.parentPlayer?nn.syncPlayerEvents(nn.parentPlayer):nn.destroy()});for(let nn=0;nn<qr.length;nn++){const wn=qr[nn],cn=wn[fi];if(ao(wn,Vn),cn&&cn.hasAnimation)continue;let ur=[];if(Le.size){let Ks=Le.get(wn);Ks&&Ks.length&&ur.push(...Ks);let $i=this.driver.query(wn,Cr,!0);for(let Zs=0;Zs<$i.length;Zs++){let ii=Le.get($i[Zs]);ii&&ii.length&&ur.push(...ii)}}const mi=ur.filter(Ks=>!Ks.destroyed);mi.length?no(this,wn,mi):this.processLeaveNode(wn)}return qr.length=0,Ns.forEach(nn=>{this.players.push(nn),nn.onDone(()=>{nn.destroy();const wn=this.players.indexOf(nn);this.players.splice(wn,1)}),nn.play()}),Ns}elementContainsData(y,w){let L=!1;const ne=w[fi];return ne&&ne.setForRemoval&&(L=!0),this.playersByElement.has(w)&&(L=!0),this.playersByQueriedElement.has(w)&&(L=!0),this.statesByElement.has(w)&&(L=!0),this._fetchNamespace(y).elementContainsData(w)||L}afterFlush(y){this._flushFns.push(y)}afterFlushAnimationsDone(y){this._whenQuietFns.push(y)}_getPreviousPlayers(y,w,L,ne,ge){let Pe=[];if(w){const Le=this.playersByQueriedElement.get(y);Le&&(Pe=Le)}else{const Le=this.playersByElement.get(y);if(Le){const rt=!ge||ge==Pi;Le.forEach(gt=>{gt.queued||!rt&&gt.triggerName!=ne||Pe.push(gt)})}}return(L||ne)&&(Pe=Pe.filter(Le=>!(L&&L!=Le.namespaceId||ne&&ne!=Le.triggerName))),Pe}_beforeAnimationBuild(y,w,L){const ge=w.element,Pe=w.isRemovalTransition?void 0:y,Le=w.isRemovalTransition?void 0:w.triggerName;for(const rt of w.timelines){const gt=rt.element,Nt=gt!==ge,en=gr(L,gt,[]);this._getPreviousPlayers(gt,Nt,Pe,Le,w.toState).forEach(bn=>{const Rn=bn.getRealPlayer();Rn.beforeDestroy&&Rn.beforeDestroy(),bn.destroy(),en.push(bn)})}Mt(ge,w.fromStyles)}_buildAnimation(y,w,L,ne,ge,Pe){const Le=w.triggerName,rt=w.element,gt=[],Nt=new Set,en=new Set,Gn=w.timelines.map(Rn=>{const En=Rn.element;Nt.add(En);const qr=En[fi];if(qr&&qr.removedBeforeQueried)return new S.ZN(Rn.duration,Rn.delay);const xn=En!==rt,As=function Ao(Y){const y=[];return fa(Y,y),y}((L.get(En)||Ss).map(Gi=>Gi.getRealPlayer())).filter(Gi=>!!Gi.element&&Gi.element===En),Zi=ge.get(En),ci=Pe.get(En),ia=Xn(0,this._normalizer,0,Rn.keyframes,Zi,ci),Ws=this._buildPlayer(Rn,ia,As);if(Rn.subTimeline&&ne&&en.add(En),xn){const Gi=new to(y,Le,En);Gi.setRealPlayer(Ws),gt.push(Gi)}return Ws});gt.forEach(Rn=>{gr(this.playersByQueriedElement,Rn.element,[]).push(Rn),Rn.onDone(()=>function nr(Y,y,w){let L=Y.get(y);if(L){if(L.length){const ne=L.indexOf(w);L.splice(ne,1)}0==L.length&&Y.delete(y)}return L}(this.playersByQueriedElement,Rn.element,Rn))}),Nt.forEach(Rn=>gn(Rn,Pr));const bn=cr(Gn);return bn.onDestroy(()=>{Nt.forEach(Rn=>ao(Rn,Pr)),Ye(rt,w.toStyles)}),en.forEach(Rn=>{gr(ne,Rn,[]).push(bn)}),bn}_buildPlayer(y,w,L){return w.length>0?this.driver.animate(y.element,w,y.duration,y.delay,y.easing,L):new S.ZN(y.duration,y.delay)}}class to{constructor(y,w,L){this.namespaceId=y,this.triggerName=w,this.element=L,this._player=new S.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(y){this._containsRealPlayer||(this._player=y,this._queuedCallbacks.forEach((w,L)=>{w.forEach(ne=>Mr(y,L,void 0,ne))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(y.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(y){this.totalTime=y}syncPlayerEvents(y){const w=this._player;w.triggerCallback&&y.onStart(()=>w.triggerCallback("start")),y.onDone(()=>this.finish()),y.onDestroy(()=>this.destroy())}_queueEvent(y,w){gr(this._queuedCallbacks,y,[]).push(w)}onDone(y){this.queued&&this._queueEvent("done",y),this._player.onDone(y)}onStart(y){this.queued&&this._queueEvent("start",y),this._player.onStart(y)}onDestroy(y){this.queued&&this._queueEvent("destroy",y),this._player.onDestroy(y)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(y){this.queued||this._player.setPosition(y)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(y){const w=this._player;w.triggerCallback&&w.triggerCallback(y)}}function es(Y){return Y&&1===Y.nodeType}function Ai(Y,y){const w=Y.style.display;return Y.style.display=y??"none",w}function Bi(Y,y,w,L,ne){const ge=[];w.forEach(rt=>ge.push(Ai(rt)));const Pe=[];L.forEach((rt,gt)=>{const Nt=new Map;rt.forEach(en=>{const Gn=y.computeStyle(gt,en,ne);Nt.set(en,Gn),(!Gn||0==Gn.length)&&(gt[fi]=zr,Pe.push(gt))}),Y.set(gt,Nt)});let Le=0;return w.forEach(rt=>Ai(rt,ge[Le++])),Pe}function Vi(Y,y){const w=new Map;if(Y.forEach(Le=>w.set(Le,[])),0==y.length)return w;const ne=new Set(y),ge=new Map;function Pe(Le){if(!Le)return 1;let rt=ge.get(Le);if(rt)return rt;const gt=Le.parentNode;return rt=w.has(gt)?gt:ne.has(gt)?1:Pe(gt),ge.set(Le,rt),rt}return y.forEach(Le=>{const rt=Pe(Le);1!==rt&&w.get(rt).push(Le)}),w}function gn(Y,y){var w;null===(w=Y.classList)||void 0===w||w.add(y)}function ao(Y,y){var w;null===(w=Y.classList)||void 0===w||w.remove(y)}function no(Y,y,w){cr(w).onDone(()=>Y.processLeaveNode(y))}function fa(Y,y){for(let w=0;w<Y.length;w++){const L=Y[w];L instanceof S.ZE?fa(L.players,y):y.push(L)}}function Hs(Y,y,w){const L=w.get(Y);if(!L)return!1;let ne=y.get(Y);return ne?L.forEach(ge=>ne.add(ge)):y.set(Y,L),w.delete(Y),!0}class Ki{constructor(y,w,L){this.bodyNode=y,this._driver=w,this._normalizer=L,this._triggerCache={},this.onRemovalComplete=(ne,ge)=>{},this._transitionEngine=new So(y,w,L),this._timelineEngine=new Go(y,w,L),this._transitionEngine.onRemovalComplete=(ne,ge)=>this.onRemovalComplete(ne,ge)}registerTrigger(y,w,L,ne,ge){const Pe=y+"-"+ne;let Le=this._triggerCache[Pe];if(!Le){const rt=[],Nt=hr(this._driver,ge,rt,[]);if(rt.length)throw function be(Y,y){return new x.vHH(3404,!1)}();Le=function Ds(Y,y,w){return new mo(Y,y,w)}(ne,Nt,this._normalizer),this._triggerCache[Pe]=Le}this._transitionEngine.registerTrigger(w,ne,Le)}register(y,w){this._transitionEngine.register(y,w)}destroy(y,w){this._transitionEngine.destroy(y,w)}onInsert(y,w,L,ne){this._transitionEngine.insertNode(y,w,L,ne)}onRemove(y,w,L,ne){this._transitionEngine.removeNode(y,w,ne||!1,L)}disableAnimations(y,w){this._transitionEngine.markElementAsDisabled(y,w)}process(y,w,L,ne){if("@"==L.charAt(0)){const[ge,Pe]=Br(L);this._timelineEngine.command(ge,w,Pe,ne)}else this._transitionEngine.trigger(y,w,L,ne)}listen(y,w,L,ne,ge){if("@"==L.charAt(0)){const[Pe,Le]=Br(L);return this._timelineEngine.listen(Pe,w,Le,ge)}return this._transitionEngine.listen(y,w,L,ne,ge)}flush(y=-1){this._transitionEngine.flush(y)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Tt=(()=>{class Y{constructor(w,L,ne){this._element=w,this._startStyles=L,this._endStyles=ne,this._state=0;let ge=Y.initialStylesByElement.get(w);ge||Y.initialStylesByElement.set(w,ge=new Map),this._initialStyles=ge}start(){this._state<1&&(this._startStyles&&Ye(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ye(this._element,this._initialStyles),this._endStyles&&(Ye(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Y.initialStylesByElement.delete(this._element),this._startStyles&&(Mt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mt(this._element,this._endStyles),this._endStyles=null),Ye(this._element,this._initialStyles),this._state=3)}}return Y.initialStylesByElement=new WeakMap,Y})();function Mn(Y){let y=null;return Y.forEach((w,L)=>{(function na(Y){return"display"===Y||"position"===Y})(L)&&(y=y||new Map,y.set(L,w))}),y}class Ko{constructor(y,w,L,ne){this.element=y,this.keyframes=w,this.options=L,this._specialStyles=ne,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=L.duration,this._delay=L.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(y=>y()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const y=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,y,this.options),this._finalKeyframe=y.length?y[y.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(y){const w=[];return y.forEach(L=>{w.push(Object.fromEntries(L))}),w}_triggerWebAnimation(y,w,L){return y.animate(this._convertKeyframesToObject(w),L)}onStart(y){this._originalOnStartFns.push(y),this._onStartFns.push(y)}onDone(y){this._originalOnDoneFns.push(y),this._onDoneFns.push(y)}onDestroy(y){this._onDestroyFns.push(y)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(y=>y()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(y=>y()),this._onDestroyFns=[])}setPosition(y){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=y*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const y=new Map;this.hasStarted()&&this._finalKeyframe.forEach((L,ne)=>{"offset"!==ne&&y.set(ne,this._finished?L:bt(this.element,ne))}),this.currentSnapshot=y}triggerCallback(y){const w="start"===y?this._onStartFns:this._onDoneFns;w.forEach(L=>L()),w.length=0}}class Yr{validateStyleProperty(y){return!0}validateAnimatableStyleProperty(y){return!0}matchesElement(y,w){return!1}containsElement(y,w){return Bn(y,w)}getParentElement(y){return jt(y)}query(y,w,L){return Wt(y,w,L)}computeStyle(y,w,L){return window.getComputedStyle(y)[w]}animate(y,w,L,ne,ge,Pe=[]){const rt={duration:L,delay:ne,fill:0==ne?"both":"forwards"};ge&&(rt.easing=ge);const gt=new Map,Nt=Pe.filter(bn=>bn instanceof Ko);(function ln(Y,y){return 0===Y||0===y})(L,ne)&&Nt.forEach(bn=>{bn.currentSnapshot.forEach((Rn,En)=>gt.set(En,Rn))});let en=function ui(Y){return Y.length?Y[0]instanceof Map?Y:Y.map(y=>ai(y)):[]}(w).map(bn=>Ae(bn));en=function Je(Y,y,w){if(w.size&&y.length){let L=y[0],ne=[];if(w.forEach((ge,Pe)=>{L.has(Pe)||ne.push(Pe),L.set(Pe,ge)}),ne.length)for(let ge=1;ge<y.length;ge++){let Pe=y[ge];ne.forEach(Le=>Pe.set(Le,bt(Y,Le)))}}return y}(y,en,gt);const Gn=function ro(Y,y){let w=null,L=null;return Array.isArray(y)&&y.length?(w=Mn(y[0]),y.length>1&&(L=Mn(y[y.length-1]))):y instanceof Map&&(w=Mn(y)),w||L?new Tt(Y,w,L):null}(y,en);return new Ko(y,en,rt,Gn)}}var ra=j(6895);let xo=(()=>{class Y extends S._j{constructor(w,L){super(),this._nextAnimationId=0,this._renderer=w.createRenderer(L.body,{id:"0",encapsulation:x.ifc.None,styles:[],data:{animation:[]}})}build(w){const L=this._nextAnimationId.toString();this._nextAnimationId++;const ne=Array.isArray(w)?(0,S.vP)(w):w;return W(this._renderer,null,L,"register",[ne]),new ms(L,this._renderer)}}return Y.\u0275fac=function(w){return new(w||Y)(x.LFG(x.FYo),x.LFG(ra.K0))},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})();class ms extends S.LC{constructor(y,w){super(),this._id=y,this._renderer=w}create(y,w){return new Z(this._id,y,w||{},this._renderer)}}class Z{constructor(y,w,L,ne){this.id=y,this.element=w,this._renderer=ne,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",L)}_listen(y,w){return this._renderer.listen(this.element,`@@${this.id}:${y}`,w)}_command(y,...w){return W(this._renderer,this.element,this.id,y,w)}onDone(y){this._listen("done",y)}onStart(y){this._listen("start",y)}onDestroy(y){this._listen("destroy",y)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(y){this._command("setPosition",y)}getPosition(){var y,w;return null!==(y=null===(w=this._renderer.engine.players[+this.id])||void 0===w?void 0:w.getPosition())&&void 0!==y?y:0}}function W(Y,y,w,L,ne){return Y.setProperty(y,`@@${w}:${L}`,ne)}const xe="@.disabled";let We=(()=>{class Y{constructor(w,L,ne){this.delegate=w,this.engine=L,this._zone=ne,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),L.onRemovalComplete=(ge,Pe)=>{const Le=Pe?.parentNode(ge);Le&&Pe.removeChild(Le,ge)}}createRenderer(w,L){const ge=this.delegate.createRenderer(w,L);if(!(w&&L&&L.data&&L.data.animation)){let Nt=this._rendererCache.get(ge);return Nt||(Nt=new dt("",ge,this.engine),this._rendererCache.set(ge,Nt)),Nt}const Pe=L.id,Le=L.id+"-"+this._currentId;this._currentId++,this.engine.register(Le,w);const rt=Nt=>{Array.isArray(Nt)?Nt.forEach(rt):this.engine.registerTrigger(Pe,Le,w,Nt.name,Nt)};return L.data.animation.forEach(rt),new vt(this,Le,ge,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(w,L,ne){w>=0&&w<this._microtaskId?this._zone.run(()=>L(ne)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ge=>{const[Pe,Le]=ge;Pe(Le)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([L,ne]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Y.\u0275fac=function(w){return new(w||Y)(x.LFG(x.FYo),x.LFG(Ki),x.LFG(x.R0b))},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})();class dt{constructor(y,w,L){this.namespaceId=y,this.delegate=w,this.engine=L,this.destroyNode=this.delegate.destroyNode?ne=>w.destroyNode(ne):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(y,w){return this.delegate.createElement(y,w)}createComment(y){return this.delegate.createComment(y)}createText(y){return this.delegate.createText(y)}appendChild(y,w){this.delegate.appendChild(y,w),this.engine.onInsert(this.namespaceId,w,y,!1)}insertBefore(y,w,L,ne=!0){this.delegate.insertBefore(y,w,L),this.engine.onInsert(this.namespaceId,w,y,ne)}removeChild(y,w,L){this.engine.onRemove(this.namespaceId,w,this.delegate,L)}selectRootElement(y,w){return this.delegate.selectRootElement(y,w)}parentNode(y){return this.delegate.parentNode(y)}nextSibling(y){return this.delegate.nextSibling(y)}setAttribute(y,w,L,ne){this.delegate.setAttribute(y,w,L,ne)}removeAttribute(y,w,L){this.delegate.removeAttribute(y,w,L)}addClass(y,w){this.delegate.addClass(y,w)}removeClass(y,w){this.delegate.removeClass(y,w)}setStyle(y,w,L,ne){this.delegate.setStyle(y,w,L,ne)}removeStyle(y,w,L){this.delegate.removeStyle(y,w,L)}setProperty(y,w,L){"@"==w.charAt(0)&&w==xe?this.disableAnimations(y,!!L):this.delegate.setProperty(y,w,L)}setValue(y,w){this.delegate.setValue(y,w)}listen(y,w,L){return this.delegate.listen(y,w,L)}disableAnimations(y,w){this.engine.disableAnimations(y,w)}}class vt extends dt{constructor(y,w,L,ne){super(w,L,ne),this.factory=y,this.namespaceId=w}setProperty(y,w,L){"@"==w.charAt(0)?"."==w.charAt(1)&&w==xe?this.disableAnimations(y,L=void 0===L||!!L):this.engine.process(this.namespaceId,y,w.slice(1),L):this.delegate.setProperty(y,w,L)}listen(y,w,L){if("@"==w.charAt(0)){const ne=function qt(Y){switch(Y){case"body":return document.body;case"document":return document;case"window":return window;default:return Y}}(y);let ge=w.slice(1),Pe="";return"@"!=ge.charAt(0)&&([ge,Pe]=function Rt(Y){const y=Y.indexOf(".");return[Y.substring(0,y),Y.slice(y+1)]}(ge)),this.engine.listen(this.namespaceId,ne,ge,Pe,Le=>{this.factory.scheduleListenerCallback(Le._data||-1,L,Le)})}return this.delegate.listen(y,w,L)}}const Sr=[{provide:S._j,useClass:xo},{provide:tr,useFactory:function kn(){return new eo}},{provide:Ki,useClass:(()=>{class Y extends Ki{constructor(w,L,ne,ge){super(w.body,L,ne)}ngOnDestroy(){this.flush()}}return Y.\u0275fac=function(w){return new(w||Y)(x.LFG(ra.K0),x.LFG(yn),x.LFG(tr),x.LFG(x.z2F))},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},{provide:x.FYo,useFactory:function pi(Y,y,w){return new We(Y,y,w)},deps:[g.se,Ki,x.R0b]}],Jr=[{provide:yn,useFactory:()=>new Yr},{provide:x.QbO,useValue:"BrowserAnimations"},...Sr],Wr=[{provide:yn,useClass:Yn},{provide:x.QbO,useValue:"NoopAnimations"},...Sr];let ss=(()=>{class Y{static withConfig(w){return{ngModule:Y,providers:w.disableAnimations?Wr:Jr}}}return Y.\u0275fac=function(w){return new(w||Y)},Y.\u0275mod=x.oAB({type:Y}),Y.\u0275inj=x.cJS({providers:Jr,imports:[g.b2]}),Y})();var Xr=j(9379);const gi=[{path:"portal",loadChildren:()=>Promise.all([j.e(992),j.e(444)]).then(j.bind(j,9444)).then(Y=>Y.PortalModule)},{path:"",loadChildren:()=>Promise.all([j.e(992),j.e(878)]).then(j.bind(j,878)).then(Y=>Y.BusinessModule)}];let Gs=(()=>{class Y{}return Y.\u0275fac=function(w){return new(w||Y)},Y.\u0275mod=x.oAB({type:Y}),Y.\u0275inj=x.cJS({imports:[Xr.Bz.forRoot(gi),Xr.Bz]}),Y})(),os=(()=>{class Y{constructor(){}}return Y.\u0275fac=function(w){return new(w||Y)},Y.\u0275cmp=x.Xpm({type:Y,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"site"]],template:function(w,L){1&w&&(x.TgZ(0,"div",0),x._UZ(1,"router-outlet"),x.qZA())},dependencies:[Xr.lC],styles:[".site[_ngcontent-%COMP%]{overflow-x:hidden}"]}),Y})();var Ro=j(2011),ts=j(1762),R=j(3385),ee=j(8445);const k_firebaseConfig={apiKey:"AIzaSyCKXG8CCr_9nqB7Qlup5VU5HgD4niJhN9I",authDomain:"solarcardatabase.firebaseapp.com",databaseURL:"https://solarcardatabase.firebaseio.com",projectId:"solarcardatabase",storageBucket:"solarcardatabase.appspot.com",messagingSenderId:"188569717520",appId:"1:188569717520:web:7891916923765620a47395",measurementId:"G-FR63XJDZHP"};var re=j(7395),Te=j.n(re);const ut={accessToken:"d37728bf9a104420a3712a57d61c6c7d",captureUncaught:!0,captureUnhandledRejections:!0};let ft=(()=>{class Y{constructor(w){this.rollbar=w}handleError(w){this.rollbar.error(w.originalError||w)}}return Y.\u0275fac=function(w){return new(w||Y)(x.LFG(fr))},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})();function Yt(){return new(Te())(ut)}const fr=new x.OlP("rollbar");let lr=(()=>{class Y{}return Y.\u0275fac=function(w){return new(w||Y)},Y.\u0275mod=x.oAB({type:Y,bootstrap:[os]}),Y.\u0275inj=x.cJS({providers:[{provide:ts.L6,useValue:void 0},{provide:R.L6,useValue:void 0},{provide:x.qLn,useClass:ft},{provide:fr,useFactory:Yt}],imports:[g.b2,ss,Gs,Ro.hO.initializeApp(k_firebaseConfig),ts.yb,R.ww,ee.TE]}),Y})();(0,x.G48)(),g.q6().bootstrapModule(lr).catch(Y=>console.error(Y))},7395:function(Bt){Bt.exports=function(Re){var j={};function g(x){if(j[x])return j[x].exports;var S=j[x]={i:x,l:!1,exports:{}};return Re[x].call(S.exports,S,S.exports,g),S.l=!0,S.exports}return g.m=Re,g.c=j,g.d=function(x,S,z){g.o(x,S)||Object.defineProperty(x,S,{enumerable:!0,get:z})},g.r=function(x){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},g.t=function(x,S){if(1&S&&(x=g(x)),8&S||4&S&&"object"==typeof x&&x&&x.__esModule)return x;var z=Object.create(null);if(g.r(z),Object.defineProperty(z,"default",{enumerable:!0,value:x}),2&S&&"string"!=typeof x)for(var N in x)g.d(z,N,function(O){return x[O]}.bind(null,N));return z},g.n=function(x){var S=x&&x.__esModule?function(){return x.default}:function(){return x};return g.d(S,"a",S),S},g.o=function(x,S){return Object.prototype.hasOwnProperty.call(x,S)},g.p="",g(g.s=6)}([function(Re,j,g){"use strict";var x=g(12),S={};function z(de,ae){return ae===N(de)}function N(de){var ae=typeof de;return"object"!==ae?ae:de?de instanceof Error?"error":{}.toString.call(de).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function O(de){return z(de,"function")}function K(de){var ae=Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),je=RegExp("^"+ae+"$");return G(de)&&je.test(de)}function G(de){var ae=typeof de;return null!=de&&("object"==ae||"function"==ae)}function B(){var de=ve();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ae){var je=(de+16*Math.random())%16|0;return de=Math.floor(de/16),("x"===ae?je:7&je|8).toString(16)})}var U={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function F(de,ae){var je,ye;try{je=S.stringify(de)}catch(te){if(ae&&O(ae))try{je=ae(de)}catch(ce){ye=ce}else ye=te}return{error:ye,value:je}}function H(de,ae){return function(je,ye){try{ae(je,ye)}catch(te){de.error(te)}}}function he(de){return function ae(je,ye){var te,ce,ze,et={};try{for(ce in je)(te=je[ce])&&(z(te,"object")||z(te,"array"))?ye.includes(te)?et[ce]="Removed circular reference: "+N(te):((ze=ye.slice()).push(te),et[ce]=ae(te,ze)):et[ce]=te}catch(Fe){et="Failed cloning custom data: "+Fe.message}return et}(de,[de])}var se=["log","network","dom","navigation","error","manual"],fe=["critical","error","warning","info","debug"];function Ie(de,ae){for(var je=0;je<de.length;++je)if(de[je]===ae)return!0;return!1}function ve(){return Date.now?+Date.now():+new Date}Re.exports={addParamsAndAccessTokenToPath:function(de,ae,je){(je=je||{}).access_token=de;var ye,te=[];for(ye in je)Object.prototype.hasOwnProperty.call(je,ye)&&te.push([ye,je[ye]].join("="));var ce="?"+te.sort().join("&");(ae=ae||{}).path=ae.path||"";var ze,et=ae.path.indexOf("?"),Fe=ae.path.indexOf("#");ae.path=-1!==et&&(-1===Fe||Fe>et)?(ze=ae.path).substring(0,et)+ce+"&"+ze.substring(et+1):-1!==Fe?(ze=ae.path).substring(0,Fe)+ce+ze.substring(Fe):ae.path+ce},createItem:function(de,ae,je,ye,te){for(var ce,ze,et,Fe,Ne,be,ke=[],ot=[],Qe=0,Et=de.length;Qe<Et;++Qe){var Dt=N(be=de[Qe]);switch(ot.push(Dt),Dt){case"undefined":break;case"string":ce?ke.push(be):ce=be;break;case"function":Fe=H(ae,be);break;case"date":ke.push(be);break;case"error":case"domexception":case"exception":ze?ke.push(be):ze=be;break;case"object":case"array":if(be instanceof Error||typeof DOMException<"u"&&be instanceof DOMException){ze?ke.push(be):ze=be;break}if(ye&&"object"===Dt&&!Ne){for(var un=0,Ln=ye.length;un<Ln;++un)if(void 0!==be[ye[un]]){Ne=be;break}if(Ne)break}et?ke.push(be):et=be;break;default:if(be instanceof Error||typeof DOMException<"u"&&be instanceof DOMException){ze?ke.push(be):ze=be;break}ke.push(be)}}et&&(et=he(et)),ke.length>0&&(et||(et=he({})),et.extraArgs=he(ke));var St,Nn,Dn={message:ce,err:ze,custom:et,timestamp:ve(),callback:Fe,notifier:je,diagnostic:{},uuid:B()};return St=Dn,(Nn=et)&&void 0!==Nn.level&&(St.level=Nn.level,delete Nn.level),Nn&&void 0!==Nn.skipFrames&&(St.skipFrames=Nn.skipFrames,delete Nn.skipFrames),ye&&Ne&&(Dn.request=Ne),te&&(Dn.lambdaContext=te),Dn._originalArgs=de,Dn.diagnostic.original_arg_types=ot,Dn},addErrorContext:function(de,ae){var je=de.data.custom||{},ye=!1;try{for(var te=0;te<ae.length;++te)ae[te].hasOwnProperty("rollbarContext")&&(je=x(je,he(ae[te].rollbarContext)),ye=!0);ye&&(de.data.custom=je)}catch(ce){de.diagnostic.error_context="Failed: "+ce.message}},createTelemetryEvent:function(de){for(var ae,je,ye,te,ce=0,ze=de.length;ce<ze;++ce)switch(N(te=de[ce])){case"string":!ae&&Ie(se,te)?ae=te:!ye&&Ie(fe,te)&&(ye=te);break;case"object":je=te}return{type:ae||"manual",metadata:je||{},level:ye}},filterIp:function(de,ae){if(de&&de.user_ip&&!0!==ae){var je=de.user_ip;if(ae)try{var ye;if(-1!==je.indexOf("."))(ye=je.split(".")).pop(),ye.push("0"),je=ye.join(".");else if(-1!==je.indexOf(":")){if((ye=je.split(":")).length>2){var te=ye.slice(0,3),ce=te[2].indexOf("/");-1!==ce&&(te[2]=te[2].substring(0,ce)),je=te.concat("0000:0000:0000:0000:0000").join(":")}}else je=null}catch{je=null}else je=null;de.user_ip=je}},formatArgsAsString:function(de){var ae,je,ye,te=[];for(ae=0,je=de.length;ae<je;++ae){switch(N(ye=de[ae])){case"object":(ye=(ye=F(ye)).error||ye.value).length>500&&(ye=ye.substr(0,497)+"...");break;case"null":ye="null";break;case"undefined":ye="undefined";break;case"symbol":ye=ye.toString()}te.push(ye)}return te.join(" ")},formatUrl:function(de,ae){if(!(ae=ae||de.protocol)&&de.port&&(80===de.port?ae="http:":443===de.port&&(ae="https:")),!de.hostname)return null;var je=(ae=ae||"https:")+"//"+de.hostname;return de.port&&(je=je+":"+de.port),de.path&&(je+=de.path),je},get:function(de,ae){if(de){var je=ae.split("."),ye=de;try{for(var te=0,ce=je.length;te<ce;++te)ye=ye[je[te]]}catch{ye=void 0}return ye}},handleOptions:function(de,ae,je,ye){var ce,ze,te=x(de,ae,je);return ze=ye,(ce=te).hostWhiteList&&!ce.hostSafeList&&(ce.hostSafeList=ce.hostWhiteList,ce.hostWhiteList=void 0,ze&&ze.log("hostWhiteList is deprecated. Use hostSafeList.")),ce.hostBlackList&&!ce.hostBlockList&&(ce.hostBlockList=ce.hostBlackList,ce.hostBlackList=void 0,ze&&ze.log("hostBlackList is deprecated. Use hostBlockList.")),te=ce,!ae||ae.overwriteScrubFields||ae.scrubFields&&(te.scrubFields=(de.scrubFields||[]).concat(ae.scrubFields)),te},isError:function(de){return z(de,"error")||z(de,"exception")},isFiniteNumber:function(de){return Number.isFinite(de)},isFunction:O,isIterable:function(de){var ae=N(de);return"object"===ae||"array"===ae},isNativeFunction:K,isObject:G,isString:function(de){return"string"==typeof de||de instanceof String},isType:z,isPromise:function(de){return G(de)&&z(de.then,"function")},jsonParse:function(de){var ae,je;try{ae=S.parse(de)}catch(ye){je=ye}return{error:je,value:ae}},LEVELS:{debug:0,info:1,warning:2,error:3,critical:4},makeUnhandledStackInfo:function(de,ae,je,ye,te,ce,ze,et){var Fe={url:ae||"",line:je,column:ye};Fe.func=et.guessFunctionName(Fe.url,Fe.line),Fe.context=et.gatherContext(Fe.url,Fe.line);var Ne=typeof document<"u"&&document&&document.location&&document.location.href,be=typeof window<"u"&&window&&window.navigator&&window.navigator.userAgent;return{mode:ce,message:te?String(te):de||ze,url:Ne,stack:[Fe],useragent:be}},merge:x,now:ve,redact:function(){return"********"},RollbarJSON:S,sanitizeUrl:function(de){var ae=function(je){if(z(je,"string")){for(var ye=U,te=ye.parser[ye.strictMode?"strict":"loose"].exec(je),ce={},ze=0,et=ye.key.length;ze<et;++ze)ce[ye.key[ze]]=te[ze]||"";return ce[ye.q.name]={},ce[ye.key[12]].replace(ye.q.parser,function(Fe,Ne,be){Ne&&(ce[ye.q.name][Ne]=be)}),ce}}(de);return ae?(""===ae.anchor&&(ae.source=ae.source.replace("#","")),de=ae.source.replace("?"+ae.query,"")):"(unknown)"},set:function(de,ae,je){if(de){var ye=ae.split("."),te=ye.length;if(!(te<1))if(1!==te)try{for(var ce=de[ye[0]]||{},ze=ce,et=1;et<te-1;++et)ce[ye[et]]=ce[ye[et]]||{},ce=ce[ye[et]];ce[ye[te-1]]=je,de[ye[0]]=ze}catch{return}else de[ye[0]]=je}},setupJSON:function(de){O(S.stringify)&&O(S.parse)||(z(JSON,"undefined")||(de?(K(JSON.stringify)&&(S.stringify=JSON.stringify),K(JSON.parse)&&(S.parse=JSON.parse)):(O(JSON.stringify)&&(S.stringify=JSON.stringify),O(JSON.parse)&&(S.parse=JSON.parse))),O(S.stringify)&&O(S.parse)||de&&de(S))},stringify:F,maxByteSize:function(de){for(var ae=0,je=de.length,ye=0;ye<je;ye++){var te=de.charCodeAt(ye);te<128?ae+=1:te<2048?ae+=2:te<65536&&(ae+=3)}return ae},typeName:N,uuid4:B}},function(Re,j,g){"use strict";g(17);var x=g(18),S=g(0);Re.exports={error:function(){var z=Array.prototype.slice.call(arguments,0);z.unshift("Rollbar:"),x.ieVersion()<=8?console.error(S.formatArgsAsString(z)):console.error.apply(console,z)},info:function(){var z=Array.prototype.slice.call(arguments,0);z.unshift("Rollbar:"),x.ieVersion()<=8?console.info(S.formatArgsAsString(z)):console.info.apply(console,z)},log:function(){var z=Array.prototype.slice.call(arguments,0);z.unshift("Rollbar:"),x.ieVersion()<=8?console.log(S.formatArgsAsString(z)):console.log.apply(console,z)}}},function(Re,j,g){"use strict";Re.exports={parse:function(x){var S,z,N={protocol:null,auth:null,host:null,path:null,hash:null,href:x,hostname:null,port:null,pathname:null,search:null,query:null};if(-1!==(S=x.indexOf("//"))?(N.protocol=x.substring(0,S),z=S+2):z=0,-1!==(S=x.indexOf("@",z))&&(N.auth=x.substring(z,S),z=S+1),-1===(S=x.indexOf("/",z))){if(-1===(S=x.indexOf("?",z)))return-1===(S=x.indexOf("#",z))?N.host=x.substring(z):(N.host=x.substring(z,S),N.hash=x.substring(S)),N.hostname=N.host.split(":")[0],N.port=N.host.split(":")[1],N.port&&(N.port=parseInt(N.port,10)),N;N.host=x.substring(z,S),N.hostname=N.host.split(":")[0],N.port=N.host.split(":")[1],N.port&&(N.port=parseInt(N.port,10)),z=S}else N.host=x.substring(z,S),N.hostname=N.host.split(":")[0],N.port=N.host.split(":")[1],N.port&&(N.port=parseInt(N.port,10)),z=S;if(-1===(S=x.indexOf("#",z))?N.path=x.substring(z):(N.path=x.substring(z,S),N.hash=x.substring(S)),N.path){var O=N.path.split("?");N.pathname=O[0],N.query=O[1],N.search=N.query?"?"+N.query:null}return N}}},function(Re,j,g){"use strict";var x=g(24),S=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");function N(G){var B={};return B._stackFrame=G,B.url=G.fileName,B.line=G.lineNumber,B.func=G.functionName,B.column=G.columnNumber,B.args=G.args,B.context=null,B}function O(G,B){return{stack:function(){var U=[];B=B||0;try{U=x.parse(G)}catch{U=[]}for(var F=[],H=B;H<U.length;H++)F.push(new N(U[H]));return F}(),message:G.message,name:K(G),rawStack:G.stack,rawException:G}}function K(G){var B=G.name&&G.name.length&&G.name,U=G.constructor.name&&G.constructor.name.length&&G.constructor.name;return B&&U?"Error"===B?U:B:B||U}Re.exports={guessFunctionName:function(){return"?"},guessErrorClass:function(G){if(!G||!G.match)return["Unknown error. There was no error message to display.",""];var B=G.match(S),U="(unknown)";return B&&(G=(G=G.replace((B[B.length-2]||"")+(U=B[B.length-1])+":","")).replace(/(^[\s]+|[\s]+$)/g,"")),[U,G]},gatherContext:function z(){return null},parse:function(G,B){var U=G;if(U.nested||U.cause){for(var F=[];U;)F.push(new O(U,B)),U=U.nested||U.cause,B=0;return F[0].traceChain=F,F[0]}return new O(U,B)},Stack:O,Frame:N}},function(Re,j,g){"use strict";var x=g(0),S=g(5);function z(N,O){var K=O.split("."),G=K.length-1;try{for(var B=0;B<=G;++B)B<G?N=N[K[B]]:N[K[B]]=x.redact()}catch{}}Re.exports=function(N,O,K){if(O=O||[],K)for(var G=0;G<K.length;++G)z(N,K[G]);var B=function(H){for(var se=[],fe=0;fe<H.length;++fe)se.push(new RegExp("^\\[?(%5[bB])?"+H[fe]+"\\[?(%5[bB])?\\]?(%5[dD])?$","i"));return se}(O),U=function(H){for(var se=[],fe=0;fe<H.length;++fe)se.push(new RegExp("(\\[?(%5[bB])?"+H[fe]+"\\[?(%5[bB])?\\]?(%5[dD])?=)([^&\\n]+)","igm"));return se}(O);function F(H,he){return he+x.redact()}return S(N,function H(he,se,fe){var Ie=function(ve,de){var ae;for(ae=0;ae<B.length;++ae)if(B[ae].test(ve)){de=x.redact();break}return de}(he,se);return Ie===se?x.isType(se,"object")||x.isType(se,"array")?S(se,H,fe):function(ve){var de;if(x.isType(ve,"string"))for(de=0;de<U.length;++de)ve=ve.replace(U[de],F);return ve}(Ie):Ie})}},function(Re,j,g){"use strict";var x=g(0);Re.exports=function(S,z,N){var O,K,G,B,U=x.isType(S,"object"),F=x.isType(S,"array"),H=[];if(N=N||{obj:[],mapped:[]},U){if(B=N.obj.indexOf(S),U&&-1!==B)return N.mapped[B]||N.obj[B];N.obj.push(S),B=N.obj.length-1}if(U)for(O in S)Object.prototype.hasOwnProperty.call(S,O)&&H.push(O);else if(F)for(G=0;G<S.length;++G)H.push(G);var he=U?{}:[],se=!0;for(G=0;G<H.length;++G)K=S[O=H[G]],he[O]=z(O,K,N),se=se&&he[O]===S[O];return U&&!se&&(N.mapped[B]=he),se?S:he}},function(Re,j,g){Re.exports=g(7)},function(Re,j,g){"use strict";var x=g(8),S=typeof window<"u"&&window._rollbarConfig,z=S&&S.globalAlias||"Rollbar",N=typeof window<"u"&&window[z]&&"function"==typeof window[z].shimId&&void 0!==window[z].shimId();if(typeof window>"u"||window._rollbarStartTime||(window._rollbarStartTime=(new Date).getTime()),!N&&S){var O=new x(S);window[z]=O}else typeof window<"u"?(window.rollbar=x,window._rollbarDidLoad=!0):typeof self<"u"&&(self.rollbar=x,self._rollbarDidLoad=!0);Re.exports=x},function(Re,j,g){"use strict";var x=g(9),S=g(31),z=g(32),N=g(35),O=g(37),K=g(4),G=g(38);x.setComponents({telemeter:S,instrumenter:z,polyfillJSON:N,wrapGlobals:O,scrub:K,truncation:G}),Re.exports=x},function(Re,j,g){"use strict";var x=g(10),S=g(0),z=g(15),N=g(1),O=g(19),K=g(20),G=g(2),B=g(23),U=g(26),F=g(27),H=g(28),he=g(3);function se(te,ce){this.options=S.handleOptions(ye,te,null,N),this.options._configuredOptions=te;var ze=this.components.telemeter,et=this.components.instrumenter,Fe=this.components.polyfillJSON;this.wrapGlobals=this.components.wrapGlobals,this.scrub=this.components.scrub;var Ne=this.components.truncation,be=new K(Ne),ke=new z(this.options,be,G,Ne);ze&&(this.telemeter=new ze(this.options)),this.client=ce||new x(this.options,ke,N,this.telemeter,"browser");var un,ot=de(),Qe=typeof document<"u"&&document;this.isChrome=ot.chrome&&ot.chrome.runtime,this.anonymousErrorsPending=0,un=ot,this.client.notifier.addTransform(B.handleDomException).addTransform(B.handleItemWithError).addTransform(B.ensureItemHasSomethingToSay).addTransform(B.addBaseInfo).addTransform(B.addRequestInfo(un)).addTransform(B.addClientInfo(un)).addTransform(B.addPluginInfo(un)).addTransform(B.addBody).addTransform(U.addMessageWithError).addTransform(U.addTelemetryData).addTransform(U.addConfigToPayload).addTransform(B.addScrubber(this.scrub)).addTransform(U.addPayloadOptions).addTransform(U.userTransform(N)).addTransform(U.addConfiguredOptions).addTransform(U.addDiagnosticKeys).addTransform(U.itemToPayload),this.client.queue.addPredicate(H.checkLevel).addPredicate(F.checkIgnore).addPredicate(H.userCheckIgnore(N)).addPredicate(H.urlIsNotBlockListed(N)).addPredicate(H.urlIsSafeListed(N)).addPredicate(H.messageIsIgnored(N)),this.setupUnhandledCapture(),et&&(this.instrumenter=new et(this.options,this.client.telemeter,this,ot,Qe),this.instrumenter.instrument()),S.setupJSON(Fe),this.rollbar=this}var fe=null;function Ie(te){var ce="Rollbar is not initialized";N.error(ce),te&&te(new Error(ce))}function ve(te){for(var ce=0,ze=te.length;ce<ze;++ce)if(S.isFunction(te[ce]))return te[ce]}function de(){return typeof window<"u"&&window||typeof self<"u"&&self}se.init=function(te,ce){return fe?fe.global(te).configure(te):fe=new se(te,ce)},se.prototype.components={},se.setComponents=function(te){se.prototype.components=te},se.prototype.global=function(te){return this.client.global(te),this},se.global=function(te){if(fe)return fe.global(te);Ie()},se.prototype.configure=function(te,ce){var ze=this.options,et={};return ce&&(et={payload:ce}),this.options=S.handleOptions(ze,te,et,N),this.options._configuredOptions=S.handleOptions(ze._configuredOptions,te,et),this.client.configure(this.options,ce),this.instrumenter&&this.instrumenter.configure(this.options),this.setupUnhandledCapture(),this},se.configure=function(te,ce){if(fe)return fe.configure(te,ce);Ie()},se.prototype.lastError=function(){return this.client.lastError},se.lastError=function(){if(fe)return fe.lastError();Ie()},se.prototype.log=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.log(te),{uuid:ce}},se.log=function(){if(fe)return fe.log.apply(fe,arguments);Ie(ve(arguments))},se.prototype.debug=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.debug(te),{uuid:ce}},se.debug=function(){if(fe)return fe.debug.apply(fe,arguments);Ie(ve(arguments))},se.prototype.info=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.info(te),{uuid:ce}},se.info=function(){if(fe)return fe.info.apply(fe,arguments);Ie(ve(arguments))},se.prototype.warn=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.warn(te),{uuid:ce}},se.warn=function(){if(fe)return fe.warn.apply(fe,arguments);Ie(ve(arguments))},se.prototype.warning=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.warning(te),{uuid:ce}},se.warning=function(){if(fe)return fe.warning.apply(fe,arguments);Ie(ve(arguments))},se.prototype.error=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.error(te),{uuid:ce}},se.error=function(){if(fe)return fe.error.apply(fe,arguments);Ie(ve(arguments))},se.prototype.critical=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.critical(te),{uuid:ce}},se.critical=function(){if(fe)return fe.critical.apply(fe,arguments);Ie(ve(arguments))},se.prototype.buildJsonPayload=function(te){return this.client.buildJsonPayload(te)},se.buildJsonPayload=function(){if(fe)return fe.buildJsonPayload.apply(fe,arguments);Ie()},se.prototype.sendJsonPayload=function(te){return this.client.sendJsonPayload(te)},se.sendJsonPayload=function(){if(fe)return fe.sendJsonPayload.apply(fe,arguments);Ie()},se.prototype.setupUnhandledCapture=function(){var te=de();this.unhandledExceptionsInitialized||(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(O.captureUncaughtExceptions(te,this),this.wrapGlobals&&this.options.wrapGlobalEventHandlers&&this.wrapGlobals(te,this),this.unhandledExceptionsInitialized=!0),this.unhandledRejectionsInitialized||(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&(O.captureUnhandledRejections(te,this),this.unhandledRejectionsInitialized=!0)},se.prototype.handleUncaughtException=function(te,ce,ze,et,Fe,Ne){if(this.options.captureUncaught||this.options.handleUncaughtExceptions){if(this.options.inspectAnonymousErrors&&this.isChrome&&null===Fe&&""===ce)return"anonymous";var be,ke=S.makeUnhandledStackInfo(te,ce,ze,et,Fe,"onerror","uncaught exception",he);S.isError(Fe)?(be=this._createItem([te,Fe,Ne]))._unhandledStackInfo=ke:S.isError(ce)?(be=this._createItem([te,ce,Ne]))._unhandledStackInfo=ke:(be=this._createItem([te,Ne])).stackInfo=ke,be.level=this.options.uncaughtErrorLevel,be._isUncaught=!0,this.client.log(be)}},se.prototype.handleAnonymousErrors=function(){if(this.options.inspectAnonymousErrors&&this.isChrome){var te=this;try{Error.prepareStackTrace=function(ce,ze){if(te.options.inspectAnonymousErrors&&te.anonymousErrorsPending){if(te.anonymousErrorsPending-=1,!ce)return;ce._isAnonymous=!0,te.handleUncaughtException(ce.message,null,null,null,ce)}return ce.stack}}catch(ce){this.options.inspectAnonymousErrors=!1,this.error("anonymous error handler failed",ce)}}},se.prototype.handleUnhandledRejection=function(te,ce){if(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections){var ze="unhandled rejection was null or undefined!";if(te)if(te.message)ze=te.message;else{var et=S.stringify(te);et.value&&(ze=et.value)}var Fe,Ne=te&&te._rollbarContext||ce&&ce._rollbarContext;S.isError(te)?Fe=this._createItem([ze,te,Ne]):(Fe=this._createItem([ze,te,Ne])).stackInfo=S.makeUnhandledStackInfo(ze,"",0,0,null,"unhandledrejection","",he),Fe.level=this.options.uncaughtErrorLevel,Fe._isUncaught=!0,Fe._originalArgs=Fe._originalArgs||[],Fe._originalArgs.push(ce),this.client.log(Fe)}},se.prototype.wrap=function(te,ce,ze){try{var et;if(et=S.isFunction(ce)?ce:function(){return ce||{}},!S.isFunction(te)||te._isWrap)return te;if(!te._rollbar_wrapped&&(te._rollbar_wrapped=function(){ze&&S.isFunction(ze)&&ze.apply(this,arguments);try{return te.apply(this,arguments)}catch(be){var Ne=be;throw Ne&&window._rollbarWrappedError!==Ne&&(S.isType(Ne,"string")&&(Ne=new String(Ne)),Ne._rollbarContext=et()||{},Ne._rollbarContext._wrappedSource=te.toString(),window._rollbarWrappedError=Ne),Ne}},te._rollbar_wrapped._isWrap=!0,te.hasOwnProperty))for(var Fe in te)te.hasOwnProperty(Fe)&&"_rollbar_wrapped"!==Fe&&(te._rollbar_wrapped[Fe]=te[Fe]);return te._rollbar_wrapped}catch{return te}},se.wrap=function(te,ce){if(fe)return fe.wrap(te,ce);Ie()},se.prototype.captureEvent=function(){var te=S.createTelemetryEvent(arguments);return this.client.captureEvent(te.type,te.metadata,te.level)},se.captureEvent=function(){if(fe)return fe.captureEvent.apply(fe,arguments);Ie()},se.prototype.captureDomContentLoaded=function(te,ce){return ce||(ce=new Date),this.client.captureDomContentLoaded(ce)},se.prototype.captureLoad=function(te,ce){return ce||(ce=new Date),this.client.captureLoad(ce)},se.prototype.loadFull=function(){N.info("Unexpected Rollbar.loadFull() called on a Notifier instance. This can happen when Rollbar is loaded multiple times.")},se.prototype._createItem=function(te){return S.createItem(te,N,this)};var ae=g(29),je=g(30),ye={version:ae.version,scrubFields:je.scrubFields,logLevel:ae.logLevel,reportLevel:ae.reportLevel,uncaughtErrorLevel:ae.uncaughtErrorLevel,endpoint:ae.endpoint,verbose:!1,enabled:!0,transmit:!0,sendConfig:!1,includeItemsInTelemetry:!0,captureIp:!0,inspectAnonymousErrors:!0,ignoreDuplicateErrors:!0,wrapGlobalEventHandlers:!1};Re.exports=se},function(Re,j,g){"use strict";var x=g(11),S=g(13),z=g(14),N=g(0);function O(B,U,F,H,he){this.options=N.merge(B),this.logger=F,O.rateLimiter.configureGlobal(this.options),O.rateLimiter.setPlatformOptions(he,this.options),this.api=U,this.queue=new S(O.rateLimiter,U,F,this.options);var se=this.options.tracer||null;G(se)?(this.tracer=se,this.options.tracer="opentracing-tracer-enabled",this.options._configuredOptions.tracer="opentracing-tracer-enabled"):this.tracer=null,this.notifier=new z(this.queue,this.options),this.telemeter=H,K(B),this.lastError=null,this.lastErrorHash="none"}function K(B){B.stackTraceLimit&&(Error.stackTraceLimit=B.stackTraceLimit)}function G(B){if(!B||!B.scope||"function"!=typeof B.scope)return!1;var U=B.scope();return!(!U||!U.active||"function"!=typeof U.active)}O.rateLimiter=new x({maxItems:0,itemsPerMinute:60}),O.prototype.global=function(B){return O.rateLimiter.configureGlobal(B),this},O.prototype.configure=function(B,U){var H={};U&&(H={payload:U}),this.options=N.merge(this.options,B,H);var he=this.options.tracer||null;return G(he)?(this.tracer=he,this.options.tracer="opentracing-tracer-enabled",this.options._configuredOptions.tracer="opentracing-tracer-enabled"):this.tracer=null,this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),K(B),this.global(this.options),G(B.tracer)&&(this.tracer=B.tracer),this},O.prototype.log=function(B){var U=this._defaultLogLevel();return this._log(U,B)},O.prototype.debug=function(B){this._log("debug",B)},O.prototype.info=function(B){this._log("info",B)},O.prototype.warn=function(B){this._log("warning",B)},O.prototype.warning=function(B){this._log("warning",B)},O.prototype.error=function(B){this._log("error",B)},O.prototype.critical=function(B){this._log("critical",B)},O.prototype.wait=function(B){this.queue.wait(B)},O.prototype.captureEvent=function(B,U,F){return this.telemeter&&this.telemeter.captureEvent(B,U,F)},O.prototype.captureDomContentLoaded=function(B){return this.telemeter&&this.telemeter.captureDomContentLoaded(B)},O.prototype.captureLoad=function(B){return this.telemeter&&this.telemeter.captureLoad(B)},O.prototype.buildJsonPayload=function(B){return this.api.buildJsonPayload(B)},O.prototype.sendJsonPayload=function(B){this.api.postJsonPayload(B)},O.prototype._log=function(B,U){var F;if(U.callback&&(F=U.callback,delete U.callback),this.options.ignoreDuplicateErrors&&this._sameAsLastError(U)){if(F){var H=new Error("ignored identical item");H.item=U,F(H)}}else try{this._addTracingInfo(U),U.level=U.level||B,this.telemeter&&this.telemeter._captureRollbarItem(U),U.telemetryEvents=this.telemeter&&this.telemeter.copyEvents()||[],this.notifier.log(U,F)}catch(he){F&&F(he),this.logger.error(he)}},O.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},O.prototype._sameAsLastError=function(B){if(!B._isUncaught)return!1;var F,U=((F=B).message||"")+"::"+((F.err||{}).stack||String(F.err));return this.lastErrorHash===U||(this.lastError=B.err,this.lastErrorHash=U,!1)},O.prototype._addTracingInfo=function(B){if(this.tracer){var U=this.tracer.scope().active();if(function(he){if(!he||!he.context||"function"!=typeof he.context)return!1;var se=he.context();return!(!se||!se.toSpanId||!se.toTraceId||"function"!=typeof se.toSpanId||"function"!=typeof se.toTraceId)}(U)){U.setTag("rollbar.error_uuid",B.uuid),U.setTag("rollbar.has_error",!0),U.setTag("error",!0),U.setTag("rollbar.item_url","https://rollbar.com/item/uuid/?uuid="+B.uuid),U.setTag("rollbar.occurrence_url","https://rollbar.com/occurrence/uuid/?uuid="+B.uuid);var F=U.context().toSpanId(),H=U.context().toTraceId();B.custom?(B.custom.opentracing_span_id=F,B.custom.opentracing_trace_id=H):B.custom={opentracing_span_id:F,opentracing_trace_id:H}}}},Re.exports=O},function(Re,j,g){"use strict";var x=g(0);function S(O){this.startTime=x.now(),this.counter=0,this.perMinCounter=0,this.platform=null,this.platformOptions={},this.configureGlobal(O)}function z(O,K,G){return!O.ignoreRateLimit&&K>=1&&G>K}function N(O,K,G,B,U,F,H){var se,fe,ye,he=null;return G&&(G=new Error(G)),G||B||(ye={body:{message:{body:H?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.",extra:{maxItems:U,itemsPerMinute:F}}},language:"javascript",environment:(fe=K).environment||fe.payload&&fe.payload.environment,notifier:{version:fe.notifier&&fe.notifier.version||fe.version}},"browser"===(se=O)?(ye.platform="browser",ye.framework="browser-js",ye.notifier.name="rollbar-browser-js"):"server"===se?(ye.framework=fe.framework||"node-js",ye.notifier.name=fe.notifier.name):"react-native"===se&&(ye.framework=fe.framework||"react-native",ye.notifier.name=fe.notifier.name),he=ye),{error:G,shouldSend:B,payload:he}}S.globalSettings={startTime:x.now(),maxItems:void 0,itemsPerMinute:void 0},S.prototype.configureGlobal=function(O){void 0!==O.startTime&&(S.globalSettings.startTime=O.startTime),void 0!==O.maxItems&&(S.globalSettings.maxItems=O.maxItems),void 0!==O.itemsPerMinute&&(S.globalSettings.itemsPerMinute=O.itemsPerMinute)},S.prototype.shouldSend=function(O,K){var G=(K=K||x.now())-this.startTime;(G<0||G>=6e4)&&(this.startTime=K,this.perMinCounter=0);var B=S.globalSettings.maxItems,U=S.globalSettings.itemsPerMinute;if(z(O,B,this.counter))return N(this.platform,this.platformOptions,B+" max items reached",!1);if(z(O,U,this.perMinCounter))return N(this.platform,this.platformOptions,U+" items per minute reached",!1);this.counter++,this.perMinCounter++;var F=!z(O,B,this.counter),H=F;return F=F&&!z(O,U,this.perMinCounter),N(this.platform,this.platformOptions,null,F,B,U,H)},S.prototype.setPlatformOptions=function(O,K){this.platform=O,this.platformOptions=K},Re.exports=S},function(Re,j,g){"use strict";var x=Object.prototype.hasOwnProperty,S=Object.prototype.toString,z=function(N){if(!N||"[object Object]"!==S.call(N))return!1;var O,K=x.call(N,"constructor"),G=N.constructor&&N.constructor.prototype&&x.call(N.constructor.prototype,"isPrototypeOf");if(N.constructor&&!K&&!G)return!1;for(O in N);return void 0===O||x.call(N,O)};Re.exports=function N(){var O,K,G,B,U,F={},H=null,he=arguments.length;for(O=0;O<he;O++)if(null!=(H=arguments[O]))for(U in H)K=F[U],F!==(G=H[U])&&(G&&z(G)?(B=K&&z(K)?K:{},F[U]=N(B,G)):void 0!==G&&(F[U]=G));return F}},function(Re,j,g){"use strict";var x=g(0);function S(N,O,K,G){this.rateLimiter=N,this.api=O,this.logger=K,this.options=G,this.predicates=[],this.pendingItems=[],this.pendingRequests=[],this.retryQueue=[],this.retryHandle=null,this.waitCallback=null,this.waitIntervalID=null}S.prototype.configure=function(N){return this.api&&this.api.configure(N),this.options=x.merge(this.options,N),this},S.prototype.addPredicate=function(N){return x.isFunction(N)&&this.predicates.push(N),this},S.prototype.addPendingItem=function(N){this.pendingItems.push(N)},S.prototype.removePendingItem=function(N){var O=this.pendingItems.indexOf(N);-1!==O&&this.pendingItems.splice(O,1)},S.prototype.addItem=function(N,O,K,G){O&&x.isFunction(O)||(O=function(){});var B=this._applyPredicates(N);if(B.stop)return this.removePendingItem(G),void O(B.err);if(this._maybeLog(N,K),this.removePendingItem(G),this.options.transmit){this.pendingRequests.push(N);try{this._makeApiRequest(N,function(U,F){this._dequeuePendingRequest(N),O(U,F)}.bind(this))}catch(U){this._dequeuePendingRequest(N),O(U)}}else O(new Error("Transmit disabled"))},S.prototype.wait=function(N){x.isFunction(N)&&(this.waitCallback=N,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval(function(){this._maybeCallWait()}.bind(this),500)))},S.prototype._applyPredicates=function(N){for(var O=null,K=0,G=this.predicates.length;K<G;K++)if(!(O=this.predicates[K](N,this.options))||void 0!==O.err)return{stop:!0,err:O.err};return{stop:!1,err:null}},S.prototype._makeApiRequest=function(N,O){var K=this.rateLimiter.shouldSend(N);K.shouldSend?this.api.postItem(N,function(G,B){G?this._maybeRetry(G,N,O):O(G,B)}.bind(this)):K.error?O(K.error):this.api.postItem(K.payload,O)};var z=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"];S.prototype._maybeRetry=function(N,O,K){var G=!1;if(this.options.retryInterval){for(var B=0,U=z.length;B<U;B++)if(N.code===z[B]){G=!0;break}G&&x.isFiniteNumber(this.options.maxRetries)&&(O.retries=O.retries?O.retries+1:1,O.retries>this.options.maxRetries&&(G=!1))}G?this._retryApiRequest(O,K):K(N)},S.prototype._retryApiRequest=function(N,O){this.retryQueue.push({item:N,callback:O}),this.retryHandle||(this.retryHandle=setInterval(function(){for(;this.retryQueue.length;){var K=this.retryQueue.shift();this._makeApiRequest(K.item,K.callback)}}.bind(this),this.options.retryInterval))},S.prototype._dequeuePendingRequest=function(N){var O=this.pendingRequests.indexOf(N);-1!==O&&(this.pendingRequests.splice(O,1),this._maybeCallWait())},S.prototype._maybeLog=function(N,O){if(this.logger&&this.options.verbose){var K=O;if(K=(K=K||x.get(N,"body.trace.exception.message"))||x.get(N,"body.trace_chain.0.exception.message"))return void this.logger.error(K);(K=x.get(N,"body.message.body"))&&this.logger.log(K)}},S.prototype._maybeCallWait=function(){return!(!x.isFunction(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),0))},Re.exports=S},function(Re,j,g){"use strict";var x=g(0);function S(z,N){this.queue=z,this.options=N,this.transforms=[],this.diagnostic={}}S.prototype.configure=function(z){return this.queue&&this.queue.configure(z),this.options=x.merge(this.options,z),this},S.prototype.addTransform=function(z){return x.isFunction(z)&&this.transforms.push(z),this},S.prototype.log=function(z,N){if(N&&x.isFunction(N)||(N=function(){}),!this.options.enabled)return N(new Error("Rollbar is not enabled"));this.queue.addPendingItem(z);var O=z.err;this._applyTransforms(z,function(K,G){if(K)return this.queue.removePendingItem(z),N(K,null);this.queue.addItem(G,N,O,z)}.bind(this))},S.prototype._applyTransforms=function(z,N){var O=-1,K=this.transforms.length,G=this.transforms,B=this.options,U=function(F,H){F?N(F,null):++O!==K?G[O](H,B,U):N(null,H)};U(null,z)},Re.exports=S},function(Re,j,g){"use strict";var x=g(0),S=g(16),z={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443};function N(K,G,B,U,F){this.options=K,this.transport=G,this.url=B,this.truncation=U,this.jsonBackup=F,this.accessToken=K.accessToken,this.transportOptions=O(K,B)}function O(K,G){return S.getTransportFromOptions(K,z,G)}N.prototype.postItem=function(K,G){var B=S.transportOptions(this.transportOptions,"POST"),U=S.buildPayload(this.accessToken,K,this.jsonBackup),F=this;setTimeout(function(){F.transport.post(F.accessToken,B,U,G)},0)},N.prototype.buildJsonPayload=function(K,G){var B,U=S.buildPayload(this.accessToken,K,this.jsonBackup);return(B=this.truncation?this.truncation.truncate(U):x.stringify(U)).error?(G&&G(B.error),null):B.value},N.prototype.postJsonPayload=function(K,G){var B=S.transportOptions(this.transportOptions,"POST");this.transport.postJsonPayload(this.accessToken,B,K,G)},N.prototype.configure=function(K){return this.options=x.merge(this.oldOptions,K),this.transportOptions=O(this.options,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this},Re.exports=N},function(Re,j,g){"use strict";var x=g(0);Re.exports={buildPayload:function(S,z,N){if(!x.isType(z.context,"string")){var O=x.stringify(z.context,N);z.context=O.error?"Error: could not serialize 'context'":O.value||"",z.context.length>255&&(z.context=z.context.substr(0,255))}return{access_token:S,data:z}},getTransportFromOptions:function(S,z,N){var Ie,ve,O=z.hostname,K=z.protocol,G=z.port,B=z.path,U=z.search,F=S.timeout,H=(Ie=typeof window<"u"&&window||typeof self<"u"&&self,ve=S.defaultTransport||"xhr",void 0===Ie.fetch&&(ve="xhr"),void 0===Ie.XMLHttpRequest&&(ve="fetch"),ve),he=S.proxy;if(S.endpoint){var se=N.parse(S.endpoint);O=se.hostname,K=se.protocol,G=se.port,B=se.pathname,U=se.search}return{timeout:F,hostname:O,protocol:K,port:G,path:B,search:U,proxy:he,transport:H}},transportOptions:function(S,z){var N=S.protocol||"https:",O=S.port||("http:"===N?80:"https:"===N?443:void 0),K=S.hostname,G=S.path;return S.search&&(G+=S.search),S.proxy&&(G=N+"//"+K+G,K=S.proxy.host||S.proxy.hostname,O=S.proxy.port,N=S.proxy.protocol||N),{timeout:S.timeout,protocol:N,hostname:K,path:G,port:O,method:z,transport:S.transport}},appendPathToPath:function(S,z){var N=/\/$/.test(S),O=/^\//.test(z);return N&&O?z=z.substring(1):N||O||(z="/"+z),S+z}}},function(Re,j){!function(g){"use strict";g.console||(g.console={});for(var x,S,z=g.console,N=function(){},O=["memory"],K="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");x=O.pop();)z[x]||(z[x]={});for(;S=K.pop();)z[S]||(z[S]=N)}(typeof window>"u"?this:window)},function(Re,j,g){"use strict";Re.exports={ieVersion:function(){if(typeof document<"u"){for(var S=3,z=document.createElement("div"),N=z.getElementsByTagName("i");z.innerHTML="\x3c!--[if gt IE "+ ++S+"]><i></i><![endif]--\x3e",N[0];);return S>4?S:void 0}}}},function(Re,j,g){"use strict";function x(S,z,N,O){S._rollbarWrappedError&&(O[4]||(O[4]=S._rollbarWrappedError),O[5]||(O[5]=S._rollbarWrappedError._rollbarContext),S._rollbarWrappedError=null);var K=z.handleUncaughtException.apply(z,O);N&&N.apply(S,O),"anonymous"===K&&(z.anonymousErrorsPending+=1)}Re.exports={captureUncaughtExceptions:function(S,z,N){if(S){var O;if("function"==typeof z._rollbarOldOnError)O=z._rollbarOldOnError;else if(S.onerror){for(O=S.onerror;O._rollbarOldOnError;)O=O._rollbarOldOnError;z._rollbarOldOnError=O}z.handleAnonymousErrors();var K=function(){var G=Array.prototype.slice.call(arguments,0);x(S,z,O,G)};N&&(K._rollbarOldOnError=O),S.onerror=K}},captureUnhandledRejections:function(S,z,N){if(S){"function"==typeof S._rollbarURH&&S._rollbarURH.belongsToShim&&S.removeEventListener("unhandledrejection",S._rollbarURH);var O=function(K){var G,B,U;try{G=K.reason}catch{G=void 0}try{B=K.promise}catch{B="[unhandledrejection] error getting `promise` from event"}try{U=K.detail,!G&&U&&(G=U.reason,B=U.promise)}catch{}G||(G="[unhandledrejection] error getting `reason` from event"),z&&z.handleUnhandledRejection&&z.handleUnhandledRejection(G,B)};O.belongsToShim=N,S._rollbarURH=O,S.addEventListener("unhandledrejection",O)}}}},function(Re,j,g){"use strict";var x=g(0),S=g(21),z=g(22);function N(O){this.truncation=O}N.prototype.get=function(O,K,G,B,U){B&&x.isFunction(B)||(B=function(){}),x.addParamsAndAccessTokenToPath(O,K,G);var F=x.formatUrl(K);this._makeZoneRequest(O,F,"GET",null,B,U,K.timeout,K.transport)},N.prototype.post=function(O,K,G,B,U){if(B&&x.isFunction(B)||(B=function(){}),!G)return B(new Error("Cannot send empty request"));var F;if((F=this.truncation?this.truncation.truncate(G):x.stringify(G)).error)return B(F.error);var H=F.value,he=x.formatUrl(K);this._makeZoneRequest(O,he,"POST",H,B,U,K.timeout,K.transport)},N.prototype.postJsonPayload=function(O,K,G,B,U){B&&x.isFunction(B)||(B=function(){});var F=x.formatUrl(K);this._makeZoneRequest(O,F,"POST",G,B,U,K.timeout,K.transport)},N.prototype._makeZoneRequest=function(){var O=typeof window<"u"&&window||void 0!==U&&U,K=O&&O.Zone&&O.Zone.current,G=Array.prototype.slice.call(arguments);if(K&&"angular"===K._name){var U=this;K._parent.run(function(){U._makeRequest.apply(void 0,G)})}else this._makeRequest.apply(void 0,G)},N.prototype._makeRequest=function(O,K,G,B,U,F,H,he){if(typeof RollbarProxy<"u")return se=B,fe=U,void(new RollbarProxy).sendJsonPayload(se,function(Ie){},function(Ie){fe(new Error(Ie))});var se,fe;"fetch"===he?S(O,K,G,B,U,H):z(O,K,G,B,U,F,H)},Re.exports=N},function(Re,j,g){"use strict";var x=g(1),S=g(0);Re.exports=function(z,N,O,K,G,B){var U,F;S.isFiniteNumber(B)&&(U=new AbortController,F=setTimeout(function(){U.abort()},B)),fetch(N,{method:O,headers:{"Content-Type":"application/json","X-Rollbar-Access-Token":z,signal:U&&U.signal},body:K}).then(function(H){return F&&clearTimeout(F),H.json()}).then(function(H){G(null,H)}).catch(function(H){x.error(H.message),G(H)})}},function(Re,j,g){"use strict";var x=g(0),S=g(1);function z(N,O){var K=new Error(N);return K.code=O||"ENOTFOUND",K}Re.exports=function(N,O,K,G,B,U,F){var H;if(!(H=U?U():function(){var fe,Ie,ve=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],de=ve.length;for(Ie=0;Ie<de;Ie++)try{fe=ve[Ie]();break}catch{}return fe}()))return B(new Error("No way to send a request"));try{try{var he=function(){try{if(he&&4===H.readyState){he=void 0;var fe=x.jsonParse(H.responseText);if((de=H)&&de.status&&200===de.status)return void B(fe.error,fe.value);(ae=H)&&x.isType(ae.status,"number")&&ae.status>=400&&ae.status<600?(403===H.status&&S.error(fe.value&&fe.value.message),B(new Error(String(H.status)))):B(z("XHR response had no status code (likely connection failure)"))}}catch(ae){var ve;ve=ae&&ae.stack?ae:new Error(ae),B(ve)}var ae,de};H.open(K,O,!0),H.setRequestHeader&&(H.setRequestHeader("Content-Type","application/json"),H.setRequestHeader("X-Rollbar-Access-Token",N)),x.isFiniteNumber(F)&&(H.timeout=F),H.onreadystatechange=he,H.send(G)}catch{if(typeof XDomainRequest<"u"){if(!window||!window.location)return B(new Error("No window available during request, unknown environment"));"http:"===window.location.href.substring(0,5)&&"https"===O.substring(0,5)&&(O="http"+O.substring(5));var se=new XDomainRequest;se.onprogress=function(){},se.ontimeout=function(){B(z("Request timed out","ETIMEDOUT"))},se.onerror=function(){B(new Error("Error during request"))},se.onload=function(){var Ie=x.jsonParse(se.responseText);B(Ie.error,Ie.value)},se.open(K,O,!0),se.send(G)}else B(new Error("Cannot find a method to transport a request"))}}catch(fe){B(fe)}}},function(Re,j,g){"use strict";var x=g(0),S=g(3),z=g(1);function N(B,U,F){var H=B.message,he=B.custom;H||(H="Item sent with null or missing arguments.");var se={body:H};he&&(se.extra=x.merge(he)),x.set(B,"data.body",{message:se}),F(null,B)}function O(B){var U=B.stackInfo.stack;return U&&0===U.length&&B._unhandledStackInfo&&B._unhandledStackInfo.stack&&(U=B._unhandledStackInfo.stack),U}function K(B,U,F){var H=B&&B.data.description,he=B&&B.custom,se=O(B),fe=S.guessErrorClass(U.message),Ie={exception:{class:G(U,fe[0],F),message:fe[1]}};if(H&&(Ie.exception.description=H),se){var ve,de,ae,je,ye,te,ce,ze;for(0===se.length&&(Ie.exception.stack=U.rawStack,Ie.exception.raw=String(U.rawException)),Ie.frames=[],ce=0;ce<se.length;++ce)de={filename:(ve=se[ce]).url?x.sanitizeUrl(ve.url):"(unknown)",lineno:ve.line||null,method:ve.func&&"?"!==ve.func?ve.func:"[anonymous]",colno:ve.column},F.sendFrameUrl&&(de.url=ve.url),de.method&&de.method.endsWith&&de.method.endsWith("_rollbar_wrapped")||(ae=je=ye=null,(te=ve.context?ve.context.length:0)&&(ze=Math.floor(te/2),je=ve.context.slice(0,ze),ae=ve.context[ze],ye=ve.context.slice(ze)),ae&&(de.code=ae),(je||ye)&&(de.context={},je&&je.length&&(de.context.pre=je),ye&&ye.length&&(de.context.post=ye)),ve.args&&(de.args=ve.args),Ie.frames.push(de));Ie.frames.reverse(),he&&(Ie.extra=x.merge(he))}return Ie}function G(B,U,F){return B.name?B.name:F.guessErrorClass?U:"(unknown)"}Re.exports={handleDomException:function(B,U,F){if(B.err&&"DOMException"===S.Stack(B.err).name){var H=new Error;H.name=B.err.name,H.message=B.err.message,H.stack=B.err.stack,H.nested=B.err,B.err=H}F(null,B)},handleItemWithError:function(B,U,F){if(B.data=B.data||{},B.err)try{B.stackInfo=B.err._savedStackTrace||S.parse(B.err,B.skipFrames),U.addErrorContext&&function(H){var he=[],se=H.err;for(he.push(se);se.nested||se.cause;)he.push(se=se.nested||se.cause);x.addErrorContext(H,he)}(B)}catch(H){z.error("Error while parsing the error object.",H);try{B.message=B.err.message||B.err.description||B.message||String(B.err)}catch(he){B.message=String(B.err)||String(he)}delete B.err}F(null,B)},ensureItemHasSomethingToSay:function(B,U,F){B.message||B.stackInfo||B.custom||F(new Error("No message, stack info, or custom data"),null),F(null,B)},addBaseInfo:function(B,U,F){B.data=x.merge(B.data,{environment:U.payload&&U.payload.environment||U.environment,level:B.level,endpoint:U.endpoint,platform:"browser",framework:"browser-js",language:"javascript",server:{},uuid:B.uuid,notifier:{name:"rollbar-browser-js",version:U.version},custom:B.custom}),F(null,B)},addRequestInfo:function(B){return function(U,F,H){var he={};B&&B.location&&(he.url=B.location.href,he.query_string=B.location.search);var se="$remote_ip";F.captureIp?!0!==F.captureIp&&(se+="_anonymize"):se=null,se&&(he.user_ip=se),Object.keys(he).length>0&&x.set(U,"data.request",he),H(null,U)}},addClientInfo:function(B){return function(U,F,H){if(!B)return H(null,U);var he=B.navigator||{},se=B.screen||{};x.set(U,"data.client",{runtime_ms:U.timestamp-B._rollbarStartTime,timestamp:Math.round(U.timestamp/1e3),javascript:{browser:he.userAgent,language:he.language,cookie_enabled:he.cookieEnabled,screen:{width:se.width,height:se.height}}}),H(null,U)}},addPluginInfo:function(B){return function(U,F,H){if(!B||!B.navigator)return H(null,U);for(var he,se=[],fe=B.navigator.plugins||[],Ie=0,ve=fe.length;Ie<ve;++Ie)se.push({name:(he=fe[Ie]).name,description:he.description});x.set(U,"data.client.javascript.plugins",se),H(null,U)}},addBody:function(B,U,F){B.stackInfo?B.stackInfo.traceChain?function(H,he,se){for(var fe=H.stackInfo.traceChain,Ie=[],ve=fe.length,de=0;de<ve;de++){var ae=K(H,fe[de],he);Ie.push(ae)}x.set(H,"data.body",{trace_chain:Ie}),se(null,H)}(B,U,F):function(H,he,se){if(O(H)){var fe=K(H,H.stackInfo,he);x.set(H,"data.body",{trace:fe}),se(null,H)}else{var Ie=H.stackInfo,ve=S.guessErrorClass(Ie.message),de=G(Ie,ve[0],he);H.message=de+": "+ve[1],N(H,0,se)}}(B,U,F):N(B,0,F)},addScrubber:function(B){return function(U,F,H){B&&(U.data=B(U.data,F.scrubFields||[],F.scrubPaths||[])),H(null,U)}}}},function(Re,j,g){var x,S,z;!function(N,O){"use strict";S=[g(25)],void 0===(z="function"==typeof(x=function(K){var G=/(^|@)\S+:\d+/,B=/^\s*at .*(\S+:\d+|\(native\))/m,U=/^(eval@)?(\[native code])?$/;return{parse:function(F){if(void 0!==F.stacktrace||void 0!==F["opera#sourceloc"])return this.parseOpera(F);if(F.stack&&F.stack.match(B))return this.parseV8OrIE(F);if(F.stack)return this.parseFFOrSafari(F);throw new Error("Cannot parse given Error object")},extractLocation:function(F){if(-1===F.indexOf(":"))return[F];var H=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(F.replace(/[()]/g,""));return[H[1],H[2]||void 0,H[3]||void 0]},parseV8OrIE:function(F){return F.stack.split("\n").filter(function(H){return!!H.match(B)},this).map(function(H){H.indexOf("(eval ")>-1&&(H=H.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var he=H.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),se=he.match(/ (\(.+\)$)/);he=se?he.replace(se[0],""):he;var fe=this.extractLocation(se?se[1]:he),Ie=se&&he||void 0,ve=["eval","<anonymous>"].indexOf(fe[0])>-1?void 0:fe[0];return new K({functionName:Ie,fileName:ve,lineNumber:fe[1],columnNumber:fe[2],source:H})},this)},parseFFOrSafari:function(F){return F.stack.split("\n").filter(function(H){return!H.match(U)},this).map(function(H){if(H.indexOf(" > eval")>-1&&(H=H.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===H.indexOf("@")&&-1===H.indexOf(":"))return new K({functionName:H});var he=/((.*".+"[^@]*)?[^@]*)(?:@)/,se=H.match(he),fe=se&&se[1]?se[1]:void 0,Ie=this.extractLocation(H.replace(he,""));return new K({functionName:fe,fileName:Ie[0],lineNumber:Ie[1],columnNumber:Ie[2],source:H})},this)},parseOpera:function(F){return!F.stacktrace||F.message.indexOf("\n")>-1&&F.message.split("\n").length>F.stacktrace.split("\n").length?this.parseOpera9(F):F.stack?this.parseOpera11(F):this.parseOpera10(F)},parseOpera9:function(F){for(var H=/Line (\d+).*script (?:in )?(\S+)/i,he=F.message.split("\n"),se=[],fe=2,Ie=he.length;fe<Ie;fe+=2){var ve=H.exec(he[fe]);ve&&se.push(new K({fileName:ve[2],lineNumber:ve[1],source:he[fe]}))}return se},parseOpera10:function(F){for(var H=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,he=F.stacktrace.split("\n"),se=[],fe=0,Ie=he.length;fe<Ie;fe+=2){var ve=H.exec(he[fe]);ve&&se.push(new K({functionName:ve[3]||void 0,fileName:ve[2],lineNumber:ve[1],source:he[fe]}))}return se},parseOpera11:function(F){return F.stack.split("\n").filter(function(H){return!!H.match(G)&&!H.match(/^Error created at/)},this).map(function(H){var he,se=H.split("@"),fe=this.extractLocation(se.pop()),Ie=se.shift()||"",ve=Ie.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;Ie.match(/\(([^)]*)\)/)&&(he=Ie.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var de=void 0===he||"[arguments not available]"===he?void 0:he.split(",");return new K({functionName:ve,args:de,fileName:fe[0],lineNumber:fe[1],columnNumber:fe[2],source:H})},this)}}})?x.apply(j,S):x)||(Re.exports=z)}()},function(Re,j,g){var x,S,z;!function(N,O){"use strict";S=[],void 0===(z="function"==typeof(x=function(){function K(ve){return ve.charAt(0).toUpperCase()+ve.substring(1)}function G(ve){return function(){return this[ve]}}var B=["isConstructor","isEval","isNative","isToplevel"],U=["columnNumber","lineNumber"],F=["fileName","functionName","source"],H=B.concat(U,F,["args"],["evalOrigin"]);function he(ve){if(ve)for(var de=0;de<H.length;de++)void 0!==ve[H[de]]&&this["set"+K(H[de])](ve[H[de]])}he.prototype={getArgs:function(){return this.args},setArgs:function(ve){if("[object Array]"!==Object.prototype.toString.call(ve))throw new TypeError("Args must be an Array");this.args=ve},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(ve){if(ve instanceof he)this.evalOrigin=ve;else{if(!(ve instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new he(ve)}},toString:function(){var ve=this.getFileName()||"",de=this.getLineNumber()||"",ae=this.getColumnNumber()||"",je=this.getFunctionName()||"";return this.getIsEval()?ve?"[eval] ("+ve+":"+de+":"+ae+")":"[eval]:"+de+":"+ae:je?je+" ("+ve+":"+de+":"+ae+")":ve+":"+de+":"+ae}},he.fromString=function(ve){var de=ve.indexOf("("),ae=ve.lastIndexOf(")"),je=ve.substring(0,de),ye=ve.substring(de+1,ae).split(","),te=ve.substring(ae+1);if(0===te.indexOf("@"))var ce=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(te,""),ze=ce[1],et=ce[2],Fe=ce[3];return new he({functionName:je,args:ye||void 0,fileName:ze,lineNumber:et||void 0,columnNumber:Fe||void 0})};for(var se=0;se<B.length;se++)he.prototype["get"+K(B[se])]=G(B[se]),he.prototype["set"+K(B[se])]=function(ve){return function(de){this[ve]=Boolean(de)}}(B[se]);for(var fe=0;fe<U.length;fe++)he.prototype["get"+K(U[fe])]=G(U[fe]),he.prototype["set"+K(U[fe])]=function(ve){return function(de){if(ae=de,isNaN(parseFloat(ae))||!isFinite(ae))throw new TypeError(ve+" must be a Number");var ae;this[ve]=Number(de)}}(U[fe]);for(var Ie=0;Ie<F.length;Ie++)he.prototype["get"+K(F[Ie])]=G(F[Ie]),he.prototype["set"+K(F[Ie])]=function(ve){return function(de){this[ve]=String(de)}}(F[Ie]);return he})?x.apply(j,S):x)||(Re.exports=z)}()},function(Re,j,g){"use strict";var x=g(0);function S(z,N){x.isFunction(z[N])&&(z[N]=z[N].toString())}Re.exports={itemToPayload:function(z,N,O){var K=z.data;z._isUncaught&&(K._isUncaught=!0),z._originalArgs&&(K._originalArgs=z._originalArgs),O(null,K)},addPayloadOptions:function(z,N,O){var K=N.payload||{};K.body&&delete K.body,z.data=x.merge(z.data,K),O(null,z)},addTelemetryData:function(z,N,O){z.telemetryEvents&&x.set(z,"data.body.telemetry",z.telemetryEvents),O(null,z)},addMessageWithError:function(z,N,O){if(z.message){var K="data.body.trace_chain.0",G=x.get(z,K);if(G||(G=x.get(z,K="data.body.trace")),G){if(!G.exception||!G.exception.description)return x.set(z,K+".exception.description",z.message),void O(null,z);var B=x.get(z,K+".extra")||{},U=x.merge(B,{message:z.message});x.set(z,K+".extra",U)}O(null,z)}else O(null,z)},userTransform:function(z){return function(N,O,K){var G=x.merge(N),B=null;try{x.isFunction(O.transform)&&(B=O.transform(G.data,N))}catch(U){return O.transform=null,z.error("Error while calling custom transform() function. Removing custom transform().",U),void K(null,N)}x.isPromise(B)?B.then(function(U){U&&(G.data=U),K(null,G)},function(U){K(U,N)}):K(null,G)}},addConfigToPayload:function(z,N,O){if(!N.sendConfig)return O(null,z);var K=x.get(z,"data.custom")||{};K._rollbarConfig=N,z.data.custom=K,O(null,z)},addConfiguredOptions:function(z,N,O){var K=N._configuredOptions;S(K,"transform"),S(K,"checkIgnore"),S(K,"onSendCallback"),delete K.accessToken,z.data.notifier.configured_options=K,O(null,z)},addDiagnosticKeys:function(z,N,O){var K=x.merge(z.notifier.client.notifier.diagnostic,z.diagnostic);if(x.get(z,"err._isAnonymous")&&(K.is_anonymous=!0),z._isUncaught&&(K.is_uncaught=z._isUncaught),z.err)try{K.raw_error={message:z.err.message,name:z.err.name,constructor_name:z.err.constructor&&z.err.constructor.name,filename:z.err.fileName,line:z.err.lineNumber,column:z.err.columnNumber,stack:z.err.stack}}catch(G){K.raw_error={failed:String(G)}}z.data.notifier.diagnostic=x.merge(z.data.notifier.diagnostic,K),O(null,z)}}},function(Re,j,g){"use strict";var x=g(0);Re.exports={checkIgnore:function(S,z){return!x.get(z,"plugins.jquery.ignoreAjaxErrors")||!x.get(S,"body.message.extra.isAjax")}}},function(Re,j,g){"use strict";var x=g(0);function S(N,O,K){if(!N)return!K;var G,U=N.frames;if(!U||0===U.length)return!K;for(var F=O.length,H=U.length,he=0;he<H;he++){if(!x.isType(G=U[he].filename,"string"))return!K;for(var se=0;se<F;se++)if(new RegExp(O[se]).test(G))return!0}return!1}function z(N,O,K,G){var B,U,F=!1;"blocklist"===K&&(F=!0);try{if(B=F?O.hostBlockList:O.hostSafeList,U=x.get(N,"body.trace_chain")||[x.get(N,"body.trace")],!B||0===B.length||0===U.length||!U[0])return!F;for(var H=U.length,he=0;he<H;he++)if(S(U[he],B,F))return!0}catch(fe){F?O.hostBlockList=null:O.hostSafeList=null;var se=F?"hostBlockList":"hostSafeList";return G.error("Error while reading your configuration's "+se+" option. Removing custom "+se+".",fe),!F}return!1}Re.exports={checkLevel:function(N,O){return!((x.LEVELS[N.level]||0)<(x.LEVELS[O.reportLevel]||0))},userCheckIgnore:function(N){return function(O,K){var G=!!O._isUncaught;delete O._isUncaught;var B=O._originalArgs;delete O._originalArgs;try{x.isFunction(K.onSendCallback)&&K.onSendCallback(G,B,O)}catch(U){K.onSendCallback=null,N.error("Error while calling onSendCallback, removing",U)}try{if(x.isFunction(K.checkIgnore)&&K.checkIgnore(G,B,O))return!1}catch(U){K.checkIgnore=null,N.error("Error while calling custom checkIgnore(), removing",U)}return!0}},urlIsNotBlockListed:function(N){return function(O,K){return!z(O,K,"blocklist",N)}},urlIsSafeListed:function(N){return function(O,K){return z(O,K,"safelist",N)}},messageIsIgnored:function(N){return function(O,K){var G,B,U,F,H,he;try{if(!(U=K.ignoredMessages)||0===U.length||0===(he=function(se){var fe=se.body,Ie=[];if(fe.trace_chain)for(var ve=fe.trace_chain,de=0;de<ve.length;de++)Ie.push(x.get(ve[de],"exception.message"));return fe.trace&&Ie.push(x.get(fe,"trace.exception.message")),fe.message&&Ie.push(x.get(fe,"message.body")),Ie}(O)).length)return!0;for(F=U.length,G=0;G<F;G++)for(H=new RegExp(U[G],"gi"),B=0;B<he.length;B++)if(H.test(he[B]))return!1}catch{K.ignoredMessages=null,N.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!0}}}},function(Re,j,g){"use strict";Re.exports={version:"2.26.2",endpoint:"api.rollbar.com/api/1/item/",logLevel:"debug",reportLevel:"debug",uncaughtErrorLevel:"error",maxItems:0,itemsPerMin:60}},function(Re,j,g){"use strict";Re.exports={scrubFields:["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","X-Rollbar-Access-Token","secret_key","secretKey","secretToken","cc-number","card number","cardnumber","cardnum","ccnum","ccnumber","cc num","creditcardnumber","credit card number","newcreditcardnumber","new credit card","creditcardno","credit card no","card#","card #","cc-csc","cvc","cvc2","cvv2","ccv2","security code","card verification","name on credit card","name on card","nameoncard","cardholder","card holder","name des karteninhabers","ccname","card type","cardtype","cc type","cctype","payment type","expiration date","expirationdate","expdate","cc-exp","ccmonth","ccyear"]}},function(Re,j,g){"use strict";var x=g(0);function S(N){this.queue=[],this.options=x.merge(N),this.maxQueueSize=Math.max(0,Math.min(this.options.maxTelemetryEvents||100,100))}function z(N,O){return O||{error:"error",manual:"info"}[N]||"info"}S.prototype.configure=function(N){this.options=x.merge(this.options,N);var G=Math.max(0,Math.min(this.options.maxTelemetryEvents||100,100)),B=0;this.queue.length>G&&(B=this.queue.length-G),this.maxQueueSize=G,this.queue.splice(0,B)},S.prototype.copyEvents=function(){var N=Array.prototype.slice.call(this.queue,0);if(x.isFunction(this.options.filterTelemetry))try{for(var O=N.length;O--;)this.options.filterTelemetry(N[O])&&N.splice(O,1)}catch{this.options.filterTelemetry=null}return N},S.prototype.capture=function(N,O,K,G,B){var U={level:z(N,K),type:N,timestamp_ms:B||x.now(),body:O,source:"client"};G&&(U.uuid=G);try{if(x.isFunction(this.options.filterTelemetry)&&this.options.filterTelemetry(U))return!1}catch{this.options.filterTelemetry=null}return this.push(U),U},S.prototype.captureEvent=function(N,O,K,G){return this.capture(N,O,K,G)},S.prototype.captureError=function(N,O,K,G){var B={message:N.message||String(N)};return N.stack&&(B.stack=N.stack),this.capture("error",B,O,K,G)},S.prototype.captureLog=function(N,O,K,G){return this.capture("log",{message:N},O,K,G)},S.prototype.captureNetwork=function(N,O,K,G){O=O||"xhr",N.subtype=N.subtype||O,G&&(N.request=G);var B=this.levelFromStatus(N.status_code);return this.capture("network",N,B,K)},S.prototype.levelFromStatus=function(N){return N>=200&&N<400?"info":0===N||N>=400?"error":"info"},S.prototype.captureDom=function(N,O,K,G,B){var U={subtype:N,element:O};return void 0!==K&&(U.value=K),void 0!==G&&(U.checked=G),this.capture("dom",U,"info",B)},S.prototype.captureNavigation=function(N,O,K){return this.capture("navigation",{from:N,to:O},"info",K)},S.prototype.captureDomContentLoaded=function(N){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,N&&N.getTime())},S.prototype.captureLoad=function(N){return this.capture("navigation",{subtype:"load"},"info",void 0,N&&N.getTime())},S.prototype.captureConnectivityChange=function(N,O){return this.captureNetwork({change:N},"connectivity",O)},S.prototype._captureRollbarItem=function(N){if(this.options.includeItemsInTelemetry)return N.err?this.captureError(N.err,N.level,N.uuid,N.timestamp):N.message?this.captureLog(N.message,N.level,N.uuid,N.timestamp):N.custom?this.capture("log",N.custom,N.level,N.uuid,N.timestamp):void 0},S.prototype.push=function(N){this.queue.push(N),this.queue.length>this.maxQueueSize&&this.queue.shift()},Re.exports=S},function(Re,j,g){"use strict";var x=g(0),S=g(33),z=g(4),N=g(2),O=g(34),K={network:!0,networkResponseHeaders:!1,networkResponseBody:!1,networkRequestHeaders:!1,networkRequestBody:!1,networkErrorOnHttp5xx:!1,networkErrorOnHttp4xx:!1,networkErrorOnHttp0:!1,log:!0,dom:!0,navigation:!0,connectivity:!0,contentSecurityPolicy:!0,errorOnContentSecurityPolicy:!1};function G(F,H,he,se,fe){var Ie=F[H];F[H]=he(Ie),se&&se[fe].push([F,H,Ie])}function B(F,H){for(var he;F[H].length;)(he=F[H].shift())[0][he[1]]=he[2]}function U(F,H,he,se,fe){this.options=F;var Ie=F.autoInstrument;!1===F.enabled||!1===Ie?this.autoInstrument={}:(x.isType(Ie,"object")||(Ie=K),this.autoInstrument=x.merge(K,Ie)),this.scrubTelemetryInputs=!!F.scrubTelemetryInputs,this.telemetryScrubber=F.telemetryScrubber,this.defaultValueScrubber=function(ve){for(var de=[],ae=0;ae<ve.length;++ae)de.push(new RegExp(ve[ae],"i"));return function(je){var ye=function(ce){if(!ce||!ce.attributes)return null;for(var ze=ce.attributes,et=0;et<ze.length;++et)if("name"===ze[et].key)return ze[et].value;return null}(je);if(!ye)return!1;for(var te=0;te<de.length;++te)if(de[te].test(ye))return!0;return!1}}(F.scrubFields),this.telemeter=H,this.rollbar=he,this.diagnostic=he.client.notifier.diagnostic,this._window=se||{},this._document=fe||{},this.replacements={network:[],log:[],navigation:[],connectivity:[]},this.eventRemovers={dom:[],connectivity:[],contentsecuritypolicy:[]},this._location=this._window.location,this._lastHref=this._location&&this._location.href}U.prototype.configure=function(F){this.options=x.merge(this.options,F);var H=F.autoInstrument,he=x.merge(this.autoInstrument);!1===F.enabled||!1===H?this.autoInstrument={}:(x.isType(H,"object")||(H=K),this.autoInstrument=x.merge(K,H)),this.instrument(he),void 0!==F.scrubTelemetryInputs&&(this.scrubTelemetryInputs=!!F.scrubTelemetryInputs),void 0!==F.telemetryScrubber&&(this.telemetryScrubber=F.telemetryScrubber)},U.prototype.instrument=function(F){!this.autoInstrument.network||F&&F.network?!this.autoInstrument.network&&F&&F.network&&this.deinstrumentNetwork():this.instrumentNetwork(),!this.autoInstrument.log||F&&F.log?!this.autoInstrument.log&&F&&F.log&&this.deinstrumentConsole():this.instrumentConsole(),!this.autoInstrument.dom||F&&F.dom?!this.autoInstrument.dom&&F&&F.dom&&this.deinstrumentDom():this.instrumentDom(),!this.autoInstrument.navigation||F&&F.navigation?!this.autoInstrument.navigation&&F&&F.navigation&&this.deinstrumentNavigation():this.instrumentNavigation(),!this.autoInstrument.connectivity||F&&F.connectivity?!this.autoInstrument.connectivity&&F&&F.connectivity&&this.deinstrumentConnectivity():this.instrumentConnectivity(),!this.autoInstrument.contentSecurityPolicy||F&&F.contentSecurityPolicy?!this.autoInstrument.contentSecurityPolicy&&F&&F.contentSecurityPolicy&&this.deinstrumentContentSecurityPolicy():this.instrumentContentSecurityPolicy()},U.prototype.deinstrumentNetwork=function(){B(this.replacements,"network")},U.prototype.instrumentNetwork=function(){var F=this;function H(se,fe){se in fe&&x.isFunction(fe[se])&&G(fe,se,function(Ie){return F.rollbar.wrap(Ie)})}if("XMLHttpRequest"in this._window){var he=this._window.XMLHttpRequest.prototype;G(he,"open",function(se){return function(fe,Ie){return x.isType(Ie,"string")&&(this.__rollbar_xhr?(this.__rollbar_xhr.method=fe,this.__rollbar_xhr.url=Ie,this.__rollbar_xhr.status_code=null,this.__rollbar_xhr.start_time_ms=x.now(),this.__rollbar_xhr.end_time_ms=null):this.__rollbar_xhr={method:fe,url:Ie,status_code:null,start_time_ms:x.now(),end_time_ms:null}),se.apply(this,arguments)}},this.replacements,"network"),G(he,"setRequestHeader",function(se){return function(fe,Ie){return this.__rollbar_xhr||(this.__rollbar_xhr={}),x.isType(fe,"string")&&x.isType(Ie,"string")&&(F.autoInstrument.networkRequestHeaders&&(this.__rollbar_xhr.request_headers||(this.__rollbar_xhr.request_headers={}),this.__rollbar_xhr.request_headers[fe]=Ie),"content-type"===fe.toLowerCase()&&(this.__rollbar_xhr.request_content_type=Ie)),se.apply(this,arguments)}},this.replacements,"network"),G(he,"send",function(se){return function(fe){var Ie=this;function ve(){if(Ie.__rollbar_xhr&&(null===Ie.__rollbar_xhr.status_code&&(Ie.__rollbar_xhr.status_code=0,F.autoInstrument.networkRequestBody&&(Ie.__rollbar_xhr.request=fe),Ie.__rollbar_event=F.captureNetwork(Ie.__rollbar_xhr,"xhr",void 0)),Ie.readyState<2&&(Ie.__rollbar_xhr.start_time_ms=x.now()),Ie.readyState>3)){Ie.__rollbar_xhr.end_time_ms=x.now();var de=null;if(Ie.__rollbar_xhr.response_content_type=Ie.getResponseHeader("Content-Type"),F.autoInstrument.networkResponseHeaders){var ae=F.autoInstrument.networkResponseHeaders;de={};try{var je,ye;if(!0===ae){var te=Ie.getAllResponseHeaders();if(te){var ce,ze,et=te.trim().split(/[\r\n]+/);for(ye=0;ye<et.length;ye++)je=(ce=et[ye].split(": ")).shift(),ze=ce.join(": "),de[je]=ze}}else for(ye=0;ye<ae.length;ye++)de[je=ae[ye]]=Ie.getResponseHeader(je)}catch{}}var Fe=null;if(F.autoInstrument.networkResponseBody)try{Fe=Ie.responseText}catch{}var Ne=null;(Fe||de)&&(Ne={},Fe&&(Ne.body=F.isJsonContentType(Ie.__rollbar_xhr.response_content_type)?F.scrubJson(Fe):Fe),de&&(Ne.headers=de)),Ne&&(Ie.__rollbar_xhr.response=Ne);try{var be=Ie.status;Ie.__rollbar_xhr.status_code=be=1223===be?204:be,Ie.__rollbar_event.level=F.telemeter.levelFromStatus(be),F.errorOnHttpStatus(Ie.__rollbar_xhr)}catch{}}}return H("onload",Ie),H("onerror",Ie),H("onprogress",Ie),"onreadystatechange"in Ie&&x.isFunction(Ie.onreadystatechange)?G(Ie,"onreadystatechange",function(de){return F.rollbar.wrap(de,void 0,ve)}):Ie.onreadystatechange=ve,Ie.__rollbar_xhr&&F.trackHttpErrors()&&(Ie.__rollbar_xhr.stack=(new Error).stack),se.apply(this,arguments)}},this.replacements,"network")}"fetch"in this._window&&G(this._window,"fetch",function(se){return function(fe,Ie){for(var ve=new Array(arguments.length),de=0,ae=ve.length;de<ae;de++)ve[de]=arguments[de];var je,ye=ve[0],te="GET";x.isType(ye,"string")?je=ye:ye&&(je=ye.url,ye.method&&(te=ye.method)),ve[1]&&ve[1].method&&(te=ve[1].method);var ce={method:te,url:je,status_code:null,start_time_ms:x.now(),end_time_ms:null};if(ve[1]&&ve[1].headers){var ze=S(ve[1].headers);ce.request_content_type=ze.get("Content-Type"),F.autoInstrument.networkRequestHeaders&&(ce.request_headers=F.fetchHeaders(ze,F.autoInstrument.networkRequestHeaders))}return F.autoInstrument.networkRequestBody&&(ve[1]&&ve[1].body?ce.request=ve[1].body:ve[0]&&!x.isType(ve[0],"string")&&ve[0].body&&(ce.request=ve[0].body)),F.captureNetwork(ce,"fetch",void 0),F.trackHttpErrors()&&(ce.stack=(new Error).stack),se.apply(this,ve).then(function(et){ce.end_time_ms=x.now(),ce.status_code=et.status,ce.response_content_type=et.headers.get("Content-Type");var Fe=null;F.autoInstrument.networkResponseHeaders&&(Fe=F.fetchHeaders(et.headers,F.autoInstrument.networkResponseHeaders));var Ne=null;return F.autoInstrument.networkResponseBody&&"function"==typeof et.text&&(Ne=et.clone().text()),(Fe||Ne)&&(ce.response={},Ne&&("function"==typeof Ne.then?Ne.then(function(be){ce.response.body=be&&F.isJsonContentType(ce.response_content_type)?F.scrubJson(be):be}):ce.response.body=Ne),Fe&&(ce.response.headers=Fe)),F.errorOnHttpStatus(ce),et})}},this.replacements,"network")},U.prototype.captureNetwork=function(F,H,he){return F.request&&this.isJsonContentType(F.request_content_type)&&(F.request=this.scrubJson(F.request)),this.telemeter.captureNetwork(F,H,he)},U.prototype.isJsonContentType=function(F){return!!(F&&x.isType(F,"string")&&F.toLowerCase().includes("json"))},U.prototype.scrubJson=function(F){return JSON.stringify(z(JSON.parse(F),this.options.scrubFields))},U.prototype.fetchHeaders=function(F,H){var he={};try{var se;if(!0===H){if("function"==typeof F.entries)for(var fe=F.entries(),Ie=fe.next();!Ie.done;)he[Ie.value[0]]=Ie.value[1],Ie=fe.next()}else for(se=0;se<H.length;se++){var ve=H[se];he[ve]=F.get(ve)}}catch{}return he},U.prototype.trackHttpErrors=function(){return this.autoInstrument.networkErrorOnHttp5xx||this.autoInstrument.networkErrorOnHttp4xx||this.autoInstrument.networkErrorOnHttp0},U.prototype.errorOnHttpStatus=function(F){var H=F.status_code;if(H>=500&&this.autoInstrument.networkErrorOnHttp5xx||H>=400&&this.autoInstrument.networkErrorOnHttp4xx||0===H&&this.autoInstrument.networkErrorOnHttp0){var he=new Error("HTTP request failed with Status "+H);he.stack=F.stack,this.rollbar.error(he,{skipFrames:1})}},U.prototype.deinstrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var F;this.replacements.log.length;)F=this.replacements.log.shift(),this._window.console[F[0]]=F[1]},U.prototype.instrumentConsole=function(){if("console"in this._window&&this._window.console.log){var F=this,H=this._window.console,he=["debug","info","warn","error","log"];try{for(var se=0,fe=he.length;se<fe;se++)Ie(he[se])}catch(ve){this.diagnostic.instrumentConsole={error:ve.message}}}function Ie(ve){var de=H[ve],ae=H,je="warn"===ve?"warning":ve;H[ve]=function(){var ye=Array.prototype.slice.call(arguments),te=x.formatArgsAsString(ye);F.telemeter.captureLog(te,je),de&&Function.prototype.apply.call(de,ae,ye)},F.replacements.log.push([ve,de])}},U.prototype.deinstrumentDom=function(){("addEventListener"in this._window||"attachEvent"in this._window)&&this.removeListeners("dom")},U.prototype.instrumentDom=function(){if("addEventListener"in this._window||"attachEvent"in this._window){var F=this.handleClick.bind(this),H=this.handleBlur.bind(this);this.addListener("dom",this._window,"click","onclick",F,!0),this.addListener("dom",this._window,"blur","onfocusout",H,!0)}},U.prototype.handleClick=function(F){try{var H=O.getElementFromEvent(F,this._document),he=H&&H.tagName,se=O.isDescribedElement(H,"a")||O.isDescribedElement(H,"button");he&&(se||O.isDescribedElement(H,"input",["button","submit"]))?this.captureDomEvent("click",H):O.isDescribedElement(H,"input",["checkbox","radio"])&&this.captureDomEvent("input",H,H.value,H.checked)}catch{}},U.prototype.handleBlur=function(F){try{var H=O.getElementFromEvent(F,this._document);H&&H.tagName&&(O.isDescribedElement(H,"textarea")?this.captureDomEvent("input",H,H.value):O.isDescribedElement(H,"select")&&H.options&&H.options.length?this.handleSelectInputChanged(H):O.isDescribedElement(H,"input")&&!O.isDescribedElement(H,"input",["button","submit","hidden","checkbox","radio"])&&this.captureDomEvent("input",H,H.value))}catch{}},U.prototype.handleSelectInputChanged=function(F){if(F.multiple)for(var H=0;H<F.options.length;H++)F.options[H].selected&&this.captureDomEvent("input",F,F.options[H].value);else F.selectedIndex>=0&&F.options[F.selectedIndex]&&this.captureDomEvent("input",F,F.options[F.selectedIndex].value)},U.prototype.captureDomEvent=function(F,H,he,se){if(void 0!==he)if(this.scrubTelemetryInputs||"password"===O.getElementType(H))he="[scrubbed]";else{var fe=O.describeElement(H);this.telemetryScrubber?this.telemetryScrubber(fe)&&(he="[scrubbed]"):this.defaultValueScrubber(fe)&&(he="[scrubbed]")}var Ie=O.elementArrayToString(O.treeToArray(H));this.telemeter.captureDom(F,Ie,he,se)},U.prototype.deinstrumentNavigation=function(){var F=this._window.chrome;!(F&&F.app&&F.app.runtime)&&this._window.history&&this._window.history.pushState&&B(this.replacements,"navigation")},U.prototype.instrumentNavigation=function(){var F=this._window.chrome;if(!(F&&F.app&&F.app.runtime)&&this._window.history&&this._window.history.pushState){var H=this;G(this._window,"onpopstate",function(he){return function(){H.handleUrlChange(H._lastHref,H._location.href),he&&he.apply(this,arguments)}},this.replacements,"navigation"),G(this._window.history,"pushState",function(he){return function(){var se=arguments.length>2?arguments[2]:void 0;return se&&H.handleUrlChange(H._lastHref,se+""),he.apply(this,arguments)}},this.replacements,"navigation")}},U.prototype.handleUrlChange=function(F,H){var he=N.parse(this._location.href),se=N.parse(H),fe=N.parse(F);this._lastHref=H,he.protocol===se.protocol&&he.host===se.host&&(H=se.path+(se.hash||"")),he.protocol===fe.protocol&&he.host===fe.host&&(F=fe.path+(fe.hash||"")),this.telemeter.captureNavigation(F,H)},U.prototype.deinstrumentConnectivity=function(){("addEventListener"in this._window||"body"in this._document)&&(this._window.addEventListener?this.removeListeners("connectivity"):B(this.replacements,"connectivity"))},U.prototype.instrumentConnectivity=function(){if("addEventListener"in this._window||"body"in this._document)if(this._window.addEventListener)this.addListener("connectivity",this._window,"online",void 0,function(){this.telemeter.captureConnectivityChange("online")}.bind(this),!0),this.addListener("connectivity",this._window,"offline",void 0,function(){this.telemeter.captureConnectivityChange("offline")}.bind(this),!0);else{var F=this;G(this._document.body,"ononline",function(H){return function(){F.telemeter.captureConnectivityChange("online"),H&&H.apply(this,arguments)}},this.replacements,"connectivity"),G(this._document.body,"onoffline",function(H){return function(){F.telemeter.captureConnectivityChange("offline"),H&&H.apply(this,arguments)}},this.replacements,"connectivity")}},U.prototype.handleCspEvent=function(F){var H="Security Policy Violation: blockedURI: "+F.blockedURI+", violatedDirective: "+F.violatedDirective+", effectiveDirective: "+F.effectiveDirective+", ";F.sourceFile&&(H+="location: "+F.sourceFile+", line: "+F.lineNumber+", col: "+F.columnNumber+", "),this.telemeter.captureLog(H+="originalPolicy: "+F.originalPolicy,"error"),this.handleCspError(H)},U.prototype.handleCspError=function(F){this.autoInstrument.errorOnContentSecurityPolicy&&this.rollbar.error(F)},U.prototype.deinstrumentContentSecurityPolicy=function(){"addEventListener"in this._document&&this.removeListeners("contentsecuritypolicy")},U.prototype.instrumentContentSecurityPolicy=function(){if("addEventListener"in this._document){var F=this.handleCspEvent.bind(this);this.addListener("contentsecuritypolicy",this._document,"securitypolicyviolation",null,F,!1)}},U.prototype.addListener=function(F,H,he,se,fe,Ie){H.addEventListener?(H.addEventListener(he,fe,Ie),this.eventRemovers[F].push(function(){H.removeEventListener(he,fe,Ie)})):se&&(H.attachEvent(se,fe),this.eventRemovers[F].push(function(){H.detachEvent(se,fe)}))},U.prototype.removeListeners=function(F){for(;this.eventRemovers[F].length;)this.eventRemovers[F].shift()()},Re.exports=U},function(Re,j,g){"use strict";function x(z){return"string"!=typeof z&&(z=String(z)),z.toLowerCase()}function S(z){this.map={},z instanceof S?z.forEach(function(N,O){this.append(O,N)},this):Array.isArray(z)?z.forEach(function(N){this.append(N[0],N[1])},this):z&&Object.getOwnPropertyNames(z).forEach(function(N){this.append(N,z[N])},this)}S.prototype.append=function(z,N){var K;z=x(z),"string"!=typeof(K=N)&&(K=String(K)),N=K;var O=this.map[z];this.map[z]=O?O+", "+N:N},S.prototype.get=function(z){return z=x(z),this.has(z)?this.map[z]:null},S.prototype.has=function(z){return this.map.hasOwnProperty(x(z))},S.prototype.forEach=function(z,N){for(var O in this.map)this.map.hasOwnProperty(O)&&z.call(N,this.map[O],O,this)},S.prototype.entries=function(){var N,z=[];return this.forEach(function(N,O){z.push([O,N])}),N=z,{next:function(){var O=N.shift();return{done:void 0===O,value:O}}}},Re.exports=function(z){return typeof Headers>"u"?new S(z):new Headers(z)}},function(Re,j,g){"use strict";function x(N){return(N.getAttribute("type")||"").toLowerCase()}function S(N){if(!N||!N.tagName)return"";var O=[N.tagName];N.id&&O.push("#"+N.id),N.classes&&O.push("."+N.classes.join("."));for(var K=0;K<N.attributes.length;K++)O.push("["+N.attributes[K].key+'="'+N.attributes[K].value+'"]');return O.join("")}function z(N){if(!N||!N.tagName)return null;var O,K,G,B,U={};U.tagName=N.tagName.toLowerCase(),N.id&&(U.id=N.id),(O=N.className)&&"string"==typeof O&&(U.classes=O.split(/\s+/));var F=["type","name","title","alt"];for(U.attributes=[],B=0;B<F.length;B++)(G=N.getAttribute(K=F[B]))&&U.attributes.push({key:K,value:G});return U}Re.exports={describeElement:z,descriptionToString:S,elementArrayToString:function(N){for(var O,B=[],U=0,F=N.length-1;F>=0;F--){if(O=S(N[F]),F<N.length-1&&U+3*B.length+O.length>=83){B.unshift("...");break}B.unshift(O),U+=O.length}return B.join(" > ")},treeToArray:function(N){for(var O,K=[],G=0;N&&G<5&&"html"!==(O=z(N)).tagName;G++)K.unshift(O),N=N.parentNode;return K},getElementFromEvent:function(N,O){return N.target?N.target:O&&O.elementFromPoint?O.elementFromPoint(N.clientX,N.clientY):void 0},isDescribedElement:function(N,O,K){if(N.tagName.toLowerCase()!==O.toLowerCase())return!1;if(!K)return!0;N=x(N);for(var G=0;G<K.length;G++)if(K[G]===N)return!0;return!1},getElementType:x}},function(Re,j,g){"use strict";var x=g(36);Re.exports=x},function(Re,j){Re.exports=function(g){var x,S,z,N,O,K,G,B,U,F,H,he,se,fe=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function Ie(ae){return ae<10?"0"+ae:ae}function ve(){return this.valueOf()}function de(ae){return fe.lastIndex=0,fe.test(ae)?'"'+ae.replace(fe,function(je){var ye=z[je];return"string"==typeof ye?ye:"\\u"+("0000"+je.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+ae+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+Ie(this.getUTCMonth()+1)+"-"+Ie(this.getUTCDate())+"T"+Ie(this.getUTCHours())+":"+Ie(this.getUTCMinutes())+":"+Ie(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=ve,Number.prototype.toJSON=ve,String.prototype.toJSON=ve),"function"!=typeof g.stringify&&(z={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g.stringify=function(ae,je,ye){var te;if(x="",S="","number"==typeof ye)for(te=0;te<ye;te+=1)S+=" ";else"string"==typeof ye&&(S=ye);if(N=je,je&&"function"!=typeof je&&("object"!=typeof je||"number"!=typeof je.length))throw new Error("JSON.stringify");return function ce(ze,et){var Fe,Ne,be,ke,ot,Qe=x,Et=et[ze];switch(Et&&"object"==typeof Et&&"function"==typeof Et.toJSON&&(Et=Et.toJSON(ze)),"function"==typeof N&&(Et=N.call(et,ze,Et)),typeof Et){case"string":return de(Et);case"number":return isFinite(Et)?String(Et):"null";case"boolean":case"null":return String(Et);case"object":if(!Et)return"null";if(x+=S,ot=[],"[object Array]"===Object.prototype.toString.apply(Et)){for(ke=Et.length,Fe=0;Fe<ke;Fe+=1)ot[Fe]=ce(Fe,Et)||"null";return be=0===ot.length?"[]":x?"[\n"+x+ot.join(",\n"+x)+"\n"+Qe+"]":"["+ot.join(",")+"]",x=Qe,be}if(N&&"object"==typeof N)for(ke=N.length,Fe=0;Fe<ke;Fe+=1)"string"==typeof N[Fe]&&(be=ce(Ne=N[Fe],Et))&&ot.push(de(Ne)+(x?": ":":")+be);else for(Ne in Et)Object.prototype.hasOwnProperty.call(Et,Ne)&&(be=ce(Ne,Et))&&ot.push(de(Ne)+(x?": ":":")+be);return be=0===ot.length?"{}":x?"{\n"+x+ot.join(",\n"+x)+"\n"+Qe+"}":"{"+ot.join(",")+"}",x=Qe,be}}("",{"":ae})}),"function"!=typeof g.parse&&(g.parse=(F={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},H={go:function(){O="ok"},firstokey:function(){B=U,O="colon"},okey:function(){B=U,O="colon"},ovalue:function(){O="ocomma"},firstavalue:function(){O="acomma"},avalue:function(){O="acomma"}},he={go:function(){O="ok"},ovalue:function(){O="ocomma"},firstavalue:function(){O="acomma"},avalue:function(){O="acomma"}},se={"{":{go:function(){K.push({state:"ok"}),G={},O="firstokey"},ovalue:function(){K.push({container:G,state:"ocomma",key:B}),G={},O="firstokey"},firstavalue:function(){K.push({container:G,state:"acomma"}),G={},O="firstokey"},avalue:function(){K.push({container:G,state:"acomma"}),G={},O="firstokey"}},"}":{firstokey:function(){var ae=K.pop();U=G,G=ae.container,B=ae.key,O=ae.state},ocomma:function(){var ae=K.pop();G[B]=U,U=G,G=ae.container,B=ae.key,O=ae.state}},"[":{go:function(){K.push({state:"ok"}),G=[],O="firstavalue"},ovalue:function(){K.push({container:G,state:"ocomma",key:B}),G=[],O="firstavalue"},firstavalue:function(){K.push({container:G,state:"acomma"}),G=[],O="firstavalue"},avalue:function(){K.push({container:G,state:"acomma"}),G=[],O="firstavalue"}},"]":{firstavalue:function(){var ae=K.pop();U=G,G=ae.container,B=ae.key,O=ae.state},acomma:function(){var ae=K.pop();G.push(U),U=G,G=ae.container,B=ae.key,O=ae.state}},":":{colon:function(){if(Object.hasOwnProperty.call(G,B))throw new SyntaxError("Duplicate key '"+B+'"');O="ovalue"}},",":{ocomma:function(){G[B]=U,O="okey"},acomma:function(){G.push(U),O="avalue"}},true:{go:function(){U=!0,O="ok"},ovalue:function(){U=!0,O="ocomma"},firstavalue:function(){U=!0,O="acomma"},avalue:function(){U=!0,O="acomma"}},false:{go:function(){U=!1,O="ok"},ovalue:function(){U=!1,O="ocomma"},firstavalue:function(){U=!1,O="acomma"},avalue:function(){U=!1,O="acomma"}},null:{go:function(){U=null,O="ok"},ovalue:function(){U=null,O="ocomma"},firstavalue:function(){U=null,O="acomma"},avalue:function(){U=null,O="acomma"}}},function(ae,je){var ye,ce=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;O="go",K=[];try{for(;ye=ce.exec(ae);)ye[1]?se[ye[1]][O]():ye[2]?(U=+ye[2],he[O]()):(U=ye[3].replace(/\\(?:u(.{4})|([^u]))/g,function(ze,et,Fe){return et?String.fromCharCode(parseInt(et,16)):F[Fe]}),H[O]()),ae=ae.slice(ye[0].length)}catch(ze){O=ze}if("ok"!==O||/[^\u0020\t\n\r]/.test(ae))throw O instanceof SyntaxError?O:new SyntaxError("JSON");return"function"==typeof je?function ze(et,Fe){var Ne,be,ke=et[Fe];if(ke&&"object"==typeof ke)for(Ne in U)Object.prototype.hasOwnProperty.call(ke,Ne)&&(void 0!==(be=ze(ke,Ne))?ke[Ne]=be:delete ke[Ne]);return je.call(et,Fe,ke)}({"":U},""):U}))}},function(Re,j,g){"use strict";function x(S,z,N){if(z.hasOwnProperty&&z.hasOwnProperty("addEventListener")){for(var O=z.addEventListener;O._rollbarOldAdd&&O.belongsToShim;)O=O._rollbarOldAdd;var K=function(U,F,H){O.call(this,U,S.wrap(F),H)};K._rollbarOldAdd=O,K.belongsToShim=N,z.addEventListener=K;for(var G=z.removeEventListener;G._rollbarOldRemove&&G.belongsToShim;)G=G._rollbarOldRemove;var B=function(U,F,H){G.call(this,U,F&&F._rollbar_wrapped||F,H)};B._rollbarOldRemove=G,B.belongsToShim=N,z.removeEventListener=B}}Re.exports=function(S,z,N){if(S){var O,K,G="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(O=0;O<G.length;++O)S[K=G[O]]&&S[K].prototype&&x(z,S[K].prototype,N)}}},function(Re,j,g){"use strict";var x=g(0),S=g(5);function z(H,he){return[H,x.stringify(H,he)]}function N(H,he){var se=H.length;return se>2*he?H.slice(0,he).concat(H.slice(se-he)):H}function O(H,he,se){se=void 0===se?30:se;var fe,Ie=H.data.body;if(Ie.trace_chain)for(var ve=Ie.trace_chain,de=0;de<ve.length;de++)fe=N(fe=ve[de].frames,se),ve[de].frames=fe;else Ie.trace&&(fe=N(fe=Ie.trace.frames,se),Ie.trace.frames=fe);return[H,x.stringify(H,he)]}function K(H,he){return he&&he.length>H?he.slice(0,H-3).concat("..."):he}function G(H,he,se){return[he=S(he,function fe(Ie,ve,de){switch(x.typeName(ve)){case"string":return K(H,ve);case"object":case"array":return S(ve,fe,de);default:return ve}}),x.stringify(he,se)]}function B(H){return H.exception&&(delete H.exception.description,H.exception.message=K(255,H.exception.message)),H.frames=N(H.frames,1),H}function U(H,he){var se=H.data.body;if(se.trace_chain)for(var fe=se.trace_chain,Ie=0;Ie<fe.length;Ie++)fe[Ie]=B(fe[Ie]);else se.trace&&(se.trace=B(se.trace));return[H,x.stringify(H,he)]}function F(H,he){return x.maxByteSize(H)>he}Re.exports={truncate:function(H,he,se){se=void 0===se?524288:se;for(var fe,Ie,ve,de=[z,O,G.bind(null,1024),G.bind(null,512),G.bind(null,256),U];fe=de.shift();)if(H=(Ie=fe(H,he))[0],(ve=Ie[1]).error||!F(ve.value,se))return ve;return ve},raw:z,truncateFrames:O,truncateStrings:G,maybeTruncateValue:K}}])},1135:(Bt,Re,j)=>{"use strict";j.d(Re,{X:()=>x});var g=j(7579);class x extends g.x{constructor(z){super(),this._value=z}get value(){return this.getValue()}_subscribe(z){const N=super._subscribe(z);return!N.closed&&z.next(this._value),N}getValue(){const{hasError:z,thrownError:N,_value:O}=this;if(z)throw N;return this._throwIfClosed(),O}next(z){super.next(this._value=z)}}},9751:(Bt,Re,j)=>{"use strict";j.d(Re,{y:()=>G});var g=j(930),x=j(727),S=j(8822),z=j(9635),N=j(2416),O=j(576),K=j(2806);let G=(()=>{class H{constructor(se){se&&(this._subscribe=se)}lift(se){const fe=new H;return fe.source=this,fe.operator=se,fe}subscribe(se,fe,Ie){const ve=function F(H){return H&&H instanceof g.Lv||function U(H){return H&&(0,O.m)(H.next)&&(0,O.m)(H.error)&&(0,O.m)(H.complete)}(H)&&(0,x.Nn)(H)}(se)?se:new g.Hp(se,fe,Ie);return(0,K.x)(()=>{const{operator:de,source:ae}=this;ve.add(de?de.call(ve,ae):ae?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(se){try{return this._subscribe(se)}catch(fe){se.error(fe)}}forEach(se,fe){return new(fe=B(fe))((Ie,ve)=>{const de=new g.Hp({next:ae=>{try{se(ae)}catch(je){ve(je),de.unsubscribe()}},error:ve,complete:Ie});this.subscribe(de)})}_subscribe(se){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(se)}[S.L](){return this}pipe(...se){return(0,z.U)(se)(this)}toPromise(se){return new(se=B(se))((fe,Ie)=>{let ve;this.subscribe(de=>ve=de,de=>Ie(de),()=>fe(ve))})}}return H.create=he=>new H(he),H})();function B(H){var he;return null!==(he=H??N.v.Promise)&&void 0!==he?he:Promise}},4707:(Bt,Re,j)=>{"use strict";j.d(Re,{t:()=>S});var g=j(7579),x=j(6063);class S extends g.x{constructor(N=1/0,O=1/0,K=x.l){super(),this._bufferSize=N,this._windowTime=O,this._timestampProvider=K,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=O===1/0,this._bufferSize=Math.max(1,N),this._windowTime=Math.max(1,O)}next(N){const{isStopped:O,_buffer:K,_infiniteTimeWindow:G,_timestampProvider:B,_windowTime:U}=this;O||(K.push(N),!G&&K.push(B.now()+U)),this._trimBuffer(),super.next(N)}_subscribe(N){this._throwIfClosed(),this._trimBuffer();const O=this._innerSubscribe(N),{_infiniteTimeWindow:K,_buffer:G}=this,B=G.slice();for(let U=0;U<B.length&&!N.closed;U+=K?1:2)N.next(B[U]);return this._checkFinalizedStatuses(N),O}_trimBuffer(){const{_bufferSize:N,_timestampProvider:O,_buffer:K,_infiniteTimeWindow:G}=this,B=(G?1:2)*N;if(N<1/0&&B<K.length&&K.splice(0,K.length-B),!G){const U=O.now();let F=0;for(let H=1;H<K.length&&K[H]<=U;H+=2)F=H;F&&K.splice(0,F+1)}}}},7579:(Bt,Re,j)=>{"use strict";j.d(Re,{x:()=>K});var g=j(9751),x=j(727);const z=(0,j(3888).d)(B=>function(){B(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var N=j(8737),O=j(2806);let K=(()=>{class B extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(F){const H=new G(this,this);return H.operator=F,H}_throwIfClosed(){if(this.closed)throw new z}next(F){(0,O.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const H of this.currentObservers)H.next(F)}})}error(F){(0,O.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=F;const{observers:H}=this;for(;H.length;)H.shift().error(F)}})}complete(){(0,O.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:F}=this;for(;F.length;)F.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var F;return(null===(F=this.observers)||void 0===F?void 0:F.length)>0}_trySubscribe(F){return this._throwIfClosed(),super._trySubscribe(F)}_subscribe(F){return this._throwIfClosed(),this._checkFinalizedStatuses(F),this._innerSubscribe(F)}_innerSubscribe(F){const{hasError:H,isStopped:he,observers:se}=this;return H||he?x.Lc:(this.currentObservers=null,se.push(F),new x.w0(()=>{this.currentObservers=null,(0,N.P)(se,F)}))}_checkFinalizedStatuses(F){const{hasError:H,thrownError:he,isStopped:se}=this;H?F.error(he):se&&F.complete()}asObservable(){const F=new g.y;return F.source=this,F}}return B.create=(U,F)=>new G(U,F),B})();class G extends K{constructor(U,F){super(),this.destination=U,this.source=F}next(U){var F,H;null===(H=null===(F=this.destination)||void 0===F?void 0:F.next)||void 0===H||H.call(F,U)}error(U){var F,H;null===(H=null===(F=this.destination)||void 0===F?void 0:F.error)||void 0===H||H.call(F,U)}complete(){var U,F;null===(F=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===F||F.call(U)}_subscribe(U){var F,H;return null!==(H=null===(F=this.source)||void 0===F?void 0:F.subscribe(U))&&void 0!==H?H:x.Lc}}},930:(Bt,Re,j)=>{"use strict";j.d(Re,{Hp:()=>Ie,Lv:()=>H});var g=j(576),x=j(727),S=j(2416),z=j(7849),N=j(5032);const O=B("C",void 0,void 0);function B(ye,te,ce){return{kind:ye,value:te,error:ce}}var U=j(3410),F=j(2806);class H extends x.w0{constructor(te){super(),this.isStopped=!1,te?(this.destination=te,(0,x.Nn)(te)&&te.add(this)):this.destination=je}static create(te,ce,ze){return new Ie(te,ce,ze)}next(te){this.isStopped?ae(function G(ye){return B("N",ye,void 0)}(te),this):this._next(te)}error(te){this.isStopped?ae(function K(ye){return B("E",void 0,ye)}(te),this):(this.isStopped=!0,this._error(te))}complete(){this.isStopped?ae(O,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(te){this.destination.next(te)}_error(te){try{this.destination.error(te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const he=Function.prototype.bind;function se(ye,te){return he.call(ye,te)}class fe{constructor(te){this.partialObserver=te}next(te){const{partialObserver:ce}=this;if(ce.next)try{ce.next(te)}catch(ze){ve(ze)}}error(te){const{partialObserver:ce}=this;if(ce.error)try{ce.error(te)}catch(ze){ve(ze)}else ve(te)}complete(){const{partialObserver:te}=this;if(te.complete)try{te.complete()}catch(ce){ve(ce)}}}class Ie extends H{constructor(te,ce,ze){let et;if(super(),(0,g.m)(te)||!te)et={next:te??void 0,error:ce??void 0,complete:ze??void 0};else{let Fe;this&&S.v.useDeprecatedNextContext?(Fe=Object.create(te),Fe.unsubscribe=()=>this.unsubscribe(),et={next:te.next&&se(te.next,Fe),error:te.error&&se(te.error,Fe),complete:te.complete&&se(te.complete,Fe)}):et=te}this.destination=new fe(et)}}function ve(ye){S.v.useDeprecatedSynchronousErrorHandling?(0,F.O)(ye):(0,z.h)(ye)}function ae(ye,te){const{onStoppedNotification:ce}=S.v;ce&&U.z.setTimeout(()=>ce(ye,te))}const je={closed:!0,next:N.Z,error:function de(ye){throw ye},complete:N.Z}},727:(Bt,Re,j)=>{"use strict";j.d(Re,{Lc:()=>O,w0:()=>N,Nn:()=>K});var g=j(576);const S=(0,j(3888).d)(B=>function(F){B(this),this.message=F?`${F.length} errors occurred during unsubscription:\n${F.map((H,he)=>`${he+1}) ${H.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=F});var z=j(8737);class N{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:F}=this;if(F)if(this._parentage=null,Array.isArray(F))for(const se of F)se.remove(this);else F.remove(this);const{initialTeardown:H}=this;if((0,g.m)(H))try{H()}catch(se){U=se instanceof S?se.errors:[se]}const{_finalizers:he}=this;if(he){this._finalizers=null;for(const se of he)try{G(se)}catch(fe){U=U??[],fe instanceof S?U=[...U,...fe.errors]:U.push(fe)}}if(U)throw new S(U)}}add(U){var F;if(U&&U!==this)if(this.closed)G(U);else{if(U instanceof N){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(F=this._finalizers)&&void 0!==F?F:[]).push(U)}}_hasParent(U){const{_parentage:F}=this;return F===U||Array.isArray(F)&&F.includes(U)}_addParent(U){const{_parentage:F}=this;this._parentage=Array.isArray(F)?(F.push(U),F):F?[F,U]:U}_removeParent(U){const{_parentage:F}=this;F===U?this._parentage=null:Array.isArray(F)&&(0,z.P)(F,U)}remove(U){const{_finalizers:F}=this;F&&(0,z.P)(F,U),U instanceof N&&U._removeParent(this)}}N.EMPTY=(()=>{const B=new N;return B.closed=!0,B})();const O=N.EMPTY;function K(B){return B instanceof N||B&&"closed"in B&&(0,g.m)(B.remove)&&(0,g.m)(B.add)&&(0,g.m)(B.unsubscribe)}function G(B){(0,g.m)(B)?B():B.unsubscribe()}},2416:(Bt,Re,j)=>{"use strict";j.d(Re,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(Bt,Re,j)=>{"use strict";j.d(Re,{c:()=>O});var g=j(9751),x=j(727),S=j(8343),z=j(5403),N=j(4482);class O extends g.y{constructor(G,B){super(),this.source=G,this.subjectFactory=B,this._subject=null,this._refCount=0,this._connection=null,(0,N.A)(G)&&(this.lift=G.lift)}_subscribe(G){return this.getSubject().subscribe(G)}getSubject(){const G=this._subject;return(!G||G.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:G}=this;this._subject=this._connection=null,G?.unsubscribe()}connect(){let G=this._connection;if(!G){G=this._connection=new x.w0;const B=this.getSubject();G.add(this.source.subscribe((0,z.x)(B,void 0,()=>{this._teardown(),B.complete()},U=>{this._teardown(),B.error(U)},()=>this._teardown()))),G.closed&&(this._connection=null,G=x.w0.EMPTY)}return G}refCount(){return(0,S.x)()(this)}}},9841:(Bt,Re,j)=>{"use strict";j.d(Re,{a:()=>U});var g=j(9751),x=j(4742),S=j(8996),z=j(4671),N=j(3268),O=j(3269),K=j(1810),G=j(5403),B=j(9672);function U(...he){const se=(0,O.yG)(he),fe=(0,O.jO)(he),{args:Ie,keys:ve}=(0,x.D)(he);if(0===Ie.length)return(0,S.D)([],se);const de=new g.y(function F(he,se,fe=z.y){return Ie=>{H(se,()=>{const{length:ve}=he,de=new Array(ve);let ae=ve,je=ve;for(let ye=0;ye<ve;ye++)H(se,()=>{const te=(0,S.D)(he[ye],se);let ce=!1;te.subscribe((0,G.x)(Ie,ze=>{de[ye]=ze,ce||(ce=!0,je--),je||Ie.next(fe(de.slice()))},()=>{--ae||Ie.complete()}))},Ie)},Ie)}}(Ie,se,ve?ae=>(0,K.n)(ve,ae):z.y));return fe?de.pipe((0,N.Z)(fe)):de}function H(he,se,fe){he?(0,B.f)(fe,he,se):se()}},7272:(Bt,Re,j)=>{"use strict";j.d(Re,{z:()=>N});var g=j(8189),S=j(3269),z=j(8996);function N(...O){return function x(){return(0,g.J)(1)}()((0,z.D)(O,(0,S.yG)(O)))}},9770:(Bt,Re,j)=>{"use strict";j.d(Re,{P:()=>S});var g=j(9751),x=j(8421);function S(z){return new g.y(N=>{(0,x.Xf)(z()).subscribe(N)})}},515:(Bt,Re,j)=>{"use strict";j.d(Re,{E:()=>x});const x=new(j(9751).y)(N=>N.complete())},8996:(Bt,Re,j)=>{"use strict";j.d(Re,{D:()=>te});var g=j(8421),x=j(5363),S=j(9468),O=j(9751),G=j(2202),B=j(576),U=j(9672);function H(ce,ze){if(!ce)throw new Error("Iterable cannot be null");return new O.y(et=>{(0,U.f)(et,ze,()=>{const Fe=ce[Symbol.asyncIterator]();(0,U.f)(et,ze,()=>{Fe.next().then(Ne=>{Ne.done?et.complete():et.next(Ne.value)})},0,!0)})})}var he=j(3670),se=j(8239),fe=j(1144),Ie=j(6495),ve=j(2206),de=j(4532),ae=j(3260);function te(ce,ze){return ze?function ye(ce,ze){if(null!=ce){if((0,he.c)(ce))return function z(ce,ze){return(0,g.Xf)(ce).pipe((0,S.R)(ze),(0,x.Q)(ze))}(ce,ze);if((0,fe.z)(ce))return function K(ce,ze){return new O.y(et=>{let Fe=0;return ze.schedule(function(){Fe===ce.length?et.complete():(et.next(ce[Fe++]),et.closed||this.schedule())})})}(ce,ze);if((0,se.t)(ce))return function N(ce,ze){return(0,g.Xf)(ce).pipe((0,S.R)(ze),(0,x.Q)(ze))}(ce,ze);if((0,ve.D)(ce))return H(ce,ze);if((0,Ie.T)(ce))return function F(ce,ze){return new O.y(et=>{let Fe;return(0,U.f)(et,ze,()=>{Fe=ce[G.h](),(0,U.f)(et,ze,()=>{let Ne,be;try{({value:Ne,done:be}=Fe.next())}catch(ke){return void et.error(ke)}be?et.complete():et.next(Ne)},0,!0)}),()=>(0,B.m)(Fe?.return)&&Fe.return()})}(ce,ze);if((0,ae.L)(ce))return function je(ce,ze){return H((0,ae.Q)(ce),ze)}(ce,ze)}throw(0,de.z)(ce)}(ce,ze):(0,g.Xf)(ce)}},8421:(Bt,Re,j)=>{"use strict";j.d(Re,{Xf:()=>he});var g=j(655),x=j(1144),S=j(8239),z=j(9751),N=j(3670),O=j(2206),K=j(4532),G=j(6495),B=j(3260),U=j(576),F=j(7849),H=j(8822);function he(ye){if(ye instanceof z.y)return ye;if(null!=ye){if((0,N.c)(ye))return function se(ye){return new z.y(te=>{const ce=ye[H.L]();if((0,U.m)(ce.subscribe))return ce.subscribe(te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ye);if((0,x.z)(ye))return function fe(ye){return new z.y(te=>{for(let ce=0;ce<ye.length&&!te.closed;ce++)te.next(ye[ce]);te.complete()})}(ye);if((0,S.t)(ye))return function Ie(ye){return new z.y(te=>{ye.then(ce=>{te.closed||(te.next(ce),te.complete())},ce=>te.error(ce)).then(null,F.h)})}(ye);if((0,O.D)(ye))return de(ye);if((0,G.T)(ye))return function ve(ye){return new z.y(te=>{for(const ce of ye)if(te.next(ce),te.closed)return;te.complete()})}(ye);if((0,B.L)(ye))return function ae(ye){return de((0,B.Q)(ye))}(ye)}throw(0,K.z)(ye)}function de(ye){return new z.y(te=>{(function je(ye,te){var ce,ze,et,Fe;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ce=(0,g.KL)(ye);!(ze=yield ce.next()).done;)if(te.next(ze.value),te.closed)return}catch(Ne){et={error:Ne}}finally{try{ze&&!ze.done&&(Fe=ce.return)&&(yield Fe.call(ce))}finally{if(et)throw et.error}}te.complete()})})(ye,te).catch(ce=>te.error(ce))})}},6451:(Bt,Re,j)=>{"use strict";j.d(Re,{T:()=>O});var g=j(8189),x=j(8421),S=j(515),z=j(3269),N=j(8996);function O(...K){const G=(0,z.yG)(K),B=(0,z._6)(K,1/0),U=K;return U.length?1===U.length?(0,x.Xf)(U[0]):(0,g.J)(B)((0,N.D)(U,G)):S.E}},9646:(Bt,Re,j)=>{"use strict";j.d(Re,{of:()=>S});var g=j(3269),x=j(8996);function S(...z){const N=(0,g.yG)(z);return(0,x.D)(z,N)}},2843:(Bt,Re,j)=>{"use strict";j.d(Re,{_:()=>S});var g=j(9751),x=j(576);function S(z,N){const O=(0,x.m)(z)?z:()=>z,K=G=>G.error(O());return new g.y(N?G=>N.schedule(K,0,G):K)}},5403:(Bt,Re,j)=>{"use strict";j.d(Re,{x:()=>x});var g=j(930);function x(z,N,O,K,G){return new S(z,N,O,K,G)}class S extends g.Lv{constructor(N,O,K,G,B,U){super(N),this.onFinalize=B,this.shouldUnsubscribe=U,this._next=O?function(F){try{O(F)}catch(H){N.error(H)}}:super._next,this._error=G?function(F){try{G(F)}catch(H){N.error(H)}finally{this.unsubscribe()}}:super._error,this._complete=K?function(){try{K()}catch(F){N.error(F)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var N;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:O}=this;super.unsubscribe(),!O&&(null===(N=this.onFinalize)||void 0===N||N.call(this))}}}},4351:(Bt,Re,j)=>{"use strict";j.d(Re,{b:()=>S});var g=j(5577),x=j(576);function S(z,N){return(0,x.m)(N)?(0,g.z)(z,N,1):(0,g.z)(z,1)}},8372:(Bt,Re,j)=>{"use strict";j.d(Re,{b:()=>z});var g=j(4986),x=j(4482),S=j(5403);function z(N,O=g.z){return(0,x.e)((K,G)=>{let B=null,U=null,F=null;const H=()=>{if(B){B.unsubscribe(),B=null;const se=U;U=null,G.next(se)}};function he(){const se=F+N,fe=O.now();if(fe<se)return B=this.schedule(void 0,se-fe),void G.add(B);H()}K.subscribe((0,S.x)(G,se=>{U=se,F=O.now(),B||(B=O.schedule(he,N),G.add(B))},()=>{H(),G.complete()},void 0,()=>{U=B=null}))})}},6590:(Bt,Re,j)=>{"use strict";j.d(Re,{d:()=>S});var g=j(4482),x=j(5403);function S(z){return(0,g.e)((N,O)=>{let K=!1;N.subscribe((0,x.x)(O,G=>{K=!0,O.next(G)},()=>{K||O.next(z),O.complete()}))})}},1884:(Bt,Re,j)=>{"use strict";j.d(Re,{x:()=>z});var g=j(4671),x=j(4482),S=j(5403);function z(O,K=g.y){return O=O??N,(0,x.e)((G,B)=>{let U,F=!0;G.subscribe((0,S.x)(B,H=>{const he=K(H);(F||!O(U,he))&&(F=!1,U=he,B.next(H))}))})}function N(O,K){return O===K}},9300:(Bt,Re,j)=>{"use strict";j.d(Re,{h:()=>S});var g=j(4482),x=j(5403);function S(z,N){return(0,g.e)((O,K)=>{let G=0;O.subscribe((0,x.x)(K,B=>z.call(N,B,G++)&&K.next(B)))})}},590:(Bt,Re,j)=>{"use strict";j.d(Re,{P:()=>K});var g=j(6805),x=j(9300),S=j(5698),z=j(6590),N=j(8068),O=j(4671);function K(G,B){const U=arguments.length>=2;return F=>F.pipe(G?(0,x.h)((H,he)=>G(H,he,F)):O.y,(0,S.q)(1),U?(0,z.d)(B):(0,N.T)(()=>new g.K))}},4004:(Bt,Re,j)=>{"use strict";j.d(Re,{U:()=>S});var g=j(4482),x=j(5403);function S(z,N){return(0,g.e)((O,K)=>{let G=0;O.subscribe((0,x.x)(K,B=>{K.next(z.call(N,B,G++))}))})}},8189:(Bt,Re,j)=>{"use strict";j.d(Re,{J:()=>S});var g=j(5577),x=j(4671);function S(z=1/0){return(0,g.z)(x.y,z)}},5577:(Bt,Re,j)=>{"use strict";j.d(Re,{z:()=>G});var g=j(4004),x=j(8421),S=j(4482),z=j(9672),N=j(5403),K=j(576);function G(B,U,F=1/0){return(0,K.m)(U)?G((H,he)=>(0,g.U)((se,fe)=>U(H,se,he,fe))((0,x.Xf)(B(H,he))),F):("number"==typeof U&&(F=U),(0,S.e)((H,he)=>function O(B,U,F,H,he,se,fe,Ie){const ve=[];let de=0,ae=0,je=!1;const ye=()=>{je&&!ve.length&&!de&&U.complete()},te=ze=>de<H?ce(ze):ve.push(ze),ce=ze=>{se&&U.next(ze),de++;let et=!1;(0,x.Xf)(F(ze,ae++)).subscribe((0,N.x)(U,Fe=>{he?.(Fe),se?te(Fe):U.next(Fe)},()=>{et=!0},void 0,()=>{if(et)try{for(de--;ve.length&&de<H;){const Fe=ve.shift();fe?(0,z.f)(U,fe,()=>ce(Fe)):ce(Fe)}ye()}catch(Fe){U.error(Fe)}}))};return B.subscribe((0,N.x)(U,te,()=>{je=!0,ye()})),()=>{Ie?.()}}(H,he,B,F)))}},5363:(Bt,Re,j)=>{"use strict";j.d(Re,{Q:()=>z});var g=j(9672),x=j(4482),S=j(5403);function z(N,O=0){return(0,x.e)((K,G)=>{K.subscribe((0,S.x)(G,B=>(0,g.f)(G,N,()=>G.next(B),O),()=>(0,g.f)(G,N,()=>G.complete(),O),B=>(0,g.f)(G,N,()=>G.error(B),O)))})}},8343:(Bt,Re,j)=>{"use strict";j.d(Re,{x:()=>S});var g=j(4482),x=j(5403);function S(){return(0,g.e)((z,N)=>{let O=null;z._refCount++;const K=(0,x.x)(N,void 0,void 0,void 0,()=>{if(!z||z._refCount<=0||0<--z._refCount)return void(O=null);const G=z._connection,B=O;O=null,G&&(!B||G===B)&&G.unsubscribe(),N.unsubscribe()});z.subscribe(K),K.closed||(O=z.connect())})}},5026:(Bt,Re,j)=>{"use strict";j.d(Re,{R:()=>z});var g=j(4482),x=j(5403);function S(N,O,K,G,B){return(U,F)=>{let H=K,he=O,se=0;U.subscribe((0,x.x)(F,fe=>{const Ie=se++;he=H?N(he,fe,Ie):(H=!0,fe),G&&F.next(he)},B&&(()=>{H&&F.next(he),F.complete()})))}}function z(N,O){return(0,g.e)(S(N,O,arguments.length>=2,!0))}},3099:(Bt,Re,j)=>{"use strict";j.d(Re,{B:()=>N});var g=j(8421),x=j(7579),S=j(930),z=j(4482);function N(K={}){const{connector:G=(()=>new x.x),resetOnError:B=!0,resetOnComplete:U=!0,resetOnRefCountZero:F=!0}=K;return H=>{let he,se,fe,Ie=0,ve=!1,de=!1;const ae=()=>{se?.unsubscribe(),se=void 0},je=()=>{ae(),he=fe=void 0,ve=de=!1},ye=()=>{const te=he;je(),te?.unsubscribe()};return(0,z.e)((te,ce)=>{Ie++,!de&&!ve&&ae();const ze=fe=fe??G();ce.add(()=>{Ie--,0===Ie&&!de&&!ve&&(se=O(ye,F))}),ze.subscribe(ce),!he&&Ie>0&&(he=new S.Hp({next:et=>ze.next(et),error:et=>{de=!0,ae(),se=O(je,B,et),ze.error(et)},complete:()=>{ve=!0,ae(),se=O(je,U),ze.complete()}}),(0,g.Xf)(te).subscribe(he))})(H)}}function O(K,G,...B){if(!0===G)return void K();if(!1===G)return;const U=new S.Hp({next:()=>{U.unsubscribe(),K()}});return G(...B).subscribe(U)}},4782:(Bt,Re,j)=>{"use strict";j.d(Re,{d:()=>S});var g=j(4707),x=j(3099);function S(z,N,O){let K,G=!1;return z&&"object"==typeof z?({bufferSize:K=1/0,windowTime:N=1/0,refCount:G=!1,scheduler:O}=z):K=z??1/0,(0,x.B)({connector:()=>new g.t(K,N,O),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:G})}},8675:(Bt,Re,j)=>{"use strict";j.d(Re,{O:()=>z});var g=j(7272),x=j(3269),S=j(4482);function z(...N){const O=(0,x.yG)(N);return(0,S.e)((K,G)=>{(O?(0,g.z)(N,K,O):(0,g.z)(N,K)).subscribe(G)})}},9468:(Bt,Re,j)=>{"use strict";j.d(Re,{R:()=>x});var g=j(4482);function x(S,z=0){return(0,g.e)((N,O)=>{O.add(S.schedule(()=>N.subscribe(O),z))})}},3900:(Bt,Re,j)=>{"use strict";j.d(Re,{w:()=>z});var g=j(8421),x=j(4482),S=j(5403);function z(N,O){return(0,x.e)((K,G)=>{let B=null,U=0,F=!1;const H=()=>F&&!B&&G.complete();K.subscribe((0,S.x)(G,he=>{B?.unsubscribe();let se=0;const fe=U++;(0,g.Xf)(N(he,fe)).subscribe(B=(0,S.x)(G,Ie=>G.next(O?O(he,Ie,fe,se++):Ie),()=>{B=null,H()}))},()=>{F=!0,H()}))})}},5698:(Bt,Re,j)=>{"use strict";j.d(Re,{q:()=>z});var g=j(515),x=j(4482),S=j(5403);function z(N){return N<=0?()=>g.E:(0,x.e)((O,K)=>{let G=0;O.subscribe((0,S.x)(K,B=>{++G<=N&&(K.next(B),N<=G&&K.complete())}))})}},2529:(Bt,Re,j)=>{"use strict";j.d(Re,{o:()=>S});var g=j(4482),x=j(5403);function S(z,N=!1){return(0,g.e)((O,K)=>{let G=0;O.subscribe((0,x.x)(K,B=>{const U=z(B,G++);(U||N)&&K.next(B),!U&&K.complete()}))})}},8505:(Bt,Re,j)=>{"use strict";j.d(Re,{b:()=>N});var g=j(576),x=j(4482),S=j(5403),z=j(4671);function N(O,K,G){const B=(0,g.m)(O)||K||G?{next:O,error:K,complete:G}:O;return B?(0,x.e)((U,F)=>{var H;null===(H=B.subscribe)||void 0===H||H.call(B);let he=!0;U.subscribe((0,S.x)(F,se=>{var fe;null===(fe=B.next)||void 0===fe||fe.call(B,se),F.next(se)},()=>{var se;he=!1,null===(se=B.complete)||void 0===se||se.call(B),F.complete()},se=>{var fe;he=!1,null===(fe=B.error)||void 0===fe||fe.call(B,se),F.error(se)},()=>{var se,fe;he&&(null===(se=B.unsubscribe)||void 0===se||se.call(B)),null===(fe=B.finalize)||void 0===fe||fe.call(B)}))}):z.y}},8068:(Bt,Re,j)=>{"use strict";j.d(Re,{T:()=>z});var g=j(6805),x=j(4482),S=j(5403);function z(O=N){return(0,x.e)((K,G)=>{let B=!1;K.subscribe((0,S.x)(G,U=>{B=!0,G.next(U)},()=>B?G.complete():G.error(O())))})}function N(){return new g.K}},4408:(Bt,Re,j)=>{"use strict";j.d(Re,{o:()=>N});var g=j(727);class x extends g.w0{constructor(K,G){super()}schedule(K,G=0){return this}}const S={setInterval(O,K,...G){const{delegate:B}=S;return B?.setInterval?B.setInterval(O,K,...G):setInterval(O,K,...G)},clearInterval(O){const{delegate:K}=S;return(K?.clearInterval||clearInterval)(O)},delegate:void 0};var z=j(8737);class N extends x{constructor(K,G){super(K,G),this.scheduler=K,this.work=G,this.pending=!1}schedule(K,G=0){var B;if(this.closed)return this;this.state=K;const U=this.id,F=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(F,U,G)),this.pending=!0,this.delay=G,this.id=null!==(B=this.id)&&void 0!==B?B:this.requestAsyncId(F,this.id,G),this}requestAsyncId(K,G,B=0){return S.setInterval(K.flush.bind(K,this),B)}recycleAsyncId(K,G,B=0){if(null!=B&&this.delay===B&&!1===this.pending)return G;null!=G&&S.clearInterval(G)}execute(K,G){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const B=this._execute(K,G);if(B)return B;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(K,G){let U,B=!1;try{this.work(K)}catch(F){B=!0,U=F||new Error("Scheduled action threw falsy error")}if(B)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:K,scheduler:G}=this,{actions:B}=G;this.work=this.state=this.scheduler=null,this.pending=!1,(0,z.P)(B,this),null!=K&&(this.id=this.recycleAsyncId(G,K,null)),this.delay=null,super.unsubscribe()}}}},7565:(Bt,Re,j)=>{"use strict";j.d(Re,{v:()=>S});var g=j(6063);class x{constructor(N,O=x.now){this.schedulerActionCtor=N,this.now=O}schedule(N,O=0,K){return new this.schedulerActionCtor(this,N).schedule(K,O)}}x.now=g.l.now;class S extends x{constructor(N,O=x.now){super(N,O),this.actions=[],this._active=!1}flush(N){const{actions:O}=this;if(this._active)return void O.push(N);let K;this._active=!0;do{if(K=N.execute(N.state,N.delay))break}while(N=O.shift());if(this._active=!1,K){for(;N=O.shift();)N.unsubscribe();throw K}}}},4986:(Bt,Re,j)=>{"use strict";j.d(Re,{P:()=>z,z:()=>S});var g=j(4408);const S=new(j(7565).v)(g.o),z=S},6063:(Bt,Re,j)=>{"use strict";j.d(Re,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Bt,Re,j)=>{"use strict";j.d(Re,{z:()=>g});const g={setTimeout(x,S,...z){const{delegate:N}=g;return N?.setTimeout?N.setTimeout(x,S,...z):setTimeout(x,S,...z)},clearTimeout(x){const{delegate:S}=g;return(S?.clearTimeout||clearTimeout)(x)},delegate:void 0}},2202:(Bt,Re,j)=>{"use strict";j.d(Re,{h:()=>x});const x=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Bt,Re,j)=>{"use strict";j.d(Re,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Bt,Re,j)=>{"use strict";j.d(Re,{K:()=>x});const x=(0,j(3888).d)(S=>function(){S(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Bt,Re,j)=>{"use strict";j.d(Re,{_6:()=>O,jO:()=>z,yG:()=>N});var g=j(576),x=j(3532);function S(K){return K[K.length-1]}function z(K){return(0,g.m)(S(K))?K.pop():void 0}function N(K){return(0,x.K)(S(K))?K.pop():void 0}function O(K,G){return"number"==typeof S(K)?K.pop():G}},4742:(Bt,Re,j)=>{"use strict";j.d(Re,{D:()=>N});const{isArray:g}=Array,{getPrototypeOf:x,prototype:S,keys:z}=Object;function N(K){if(1===K.length){const G=K[0];if(g(G))return{args:G,keys:null};if(function O(K){return K&&"object"==typeof K&&x(K)===S}(G)){const B=z(G);return{args:B.map(U=>G[U]),keys:B}}}return{args:K,keys:null}}},8737:(Bt,Re,j)=>{"use strict";function g(x,S){if(x){const z=x.indexOf(S);0<=z&&x.splice(z,1)}}j.d(Re,{P:()=>g})},3888:(Bt,Re,j)=>{"use strict";function g(x){const z=x(N=>{Error.call(N),N.stack=(new Error).stack});return z.prototype=Object.create(Error.prototype),z.prototype.constructor=z,z}j.d(Re,{d:()=>g})},1810:(Bt,Re,j)=>{"use strict";function g(x,S){return x.reduce((z,N,O)=>(z[N]=S[O],z),{})}j.d(Re,{n:()=>g})},2806:(Bt,Re,j)=>{"use strict";j.d(Re,{O:()=>z,x:()=>S});var g=j(2416);let x=null;function S(N){if(g.v.useDeprecatedSynchronousErrorHandling){const O=!x;if(O&&(x={errorThrown:!1,error:null}),N(),O){const{errorThrown:K,error:G}=x;if(x=null,K)throw G}}else N()}function z(N){g.v.useDeprecatedSynchronousErrorHandling&&x&&(x.errorThrown=!0,x.error=N)}},9672:(Bt,Re,j)=>{"use strict";function g(x,S,z,N=0,O=!1){const K=S.schedule(function(){z(),O?x.add(this.schedule(null,N)):this.unsubscribe()},N);if(x.add(K),!O)return K}j.d(Re,{f:()=>g})},4671:(Bt,Re,j)=>{"use strict";function g(x){return x}j.d(Re,{y:()=>g})},1144:(Bt,Re,j)=>{"use strict";j.d(Re,{z:()=>g});const g=x=>x&&"number"==typeof x.length&&"function"!=typeof x},2206:(Bt,Re,j)=>{"use strict";j.d(Re,{D:()=>x});var g=j(576);function x(S){return Symbol.asyncIterator&&(0,g.m)(S?.[Symbol.asyncIterator])}},576:(Bt,Re,j)=>{"use strict";function g(x){return"function"==typeof x}j.d(Re,{m:()=>g})},3670:(Bt,Re,j)=>{"use strict";j.d(Re,{c:()=>S});var g=j(8822),x=j(576);function S(z){return(0,x.m)(z[g.L])}},6495:(Bt,Re,j)=>{"use strict";j.d(Re,{T:()=>S});var g=j(2202),x=j(576);function S(z){return(0,x.m)(z?.[g.h])}},8239:(Bt,Re,j)=>{"use strict";j.d(Re,{t:()=>x});var g=j(576);function x(S){return(0,g.m)(S?.then)}},3260:(Bt,Re,j)=>{"use strict";j.d(Re,{L:()=>z,Q:()=>S});var g=j(655),x=j(576);function S(N){return(0,g.FC)(this,arguments,function*(){const K=N.getReader();try{for(;;){const{value:G,done:B}=yield(0,g.qq)(K.read());if(B)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(G)}}finally{K.releaseLock()}})}function z(N){return(0,x.m)(N?.getReader)}},3532:(Bt,Re,j)=>{"use strict";j.d(Re,{K:()=>x});var g=j(576);function x(S){return S&&(0,g.m)(S.schedule)}},4482:(Bt,Re,j)=>{"use strict";j.d(Re,{A:()=>x,e:()=>S});var g=j(576);function x(z){return(0,g.m)(z?.lift)}function S(z){return N=>{if(x(N))return N.lift(function(O){try{return z(O,this)}catch(K){this.error(K)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Bt,Re,j)=>{"use strict";j.d(Re,{Z:()=>z});var g=j(4004);const{isArray:x}=Array;function z(N){return(0,g.U)(O=>function S(N,O){return x(O)?N(...O):N(O)}(N,O))}},5032:(Bt,Re,j)=>{"use strict";function g(){}j.d(Re,{Z:()=>g})},9635:(Bt,Re,j)=>{"use strict";j.d(Re,{U:()=>S,z:()=>x});var g=j(4671);function x(...z){return S(z)}function S(z){return 0===z.length?g.y:1===z.length?z[0]:function(O){return z.reduce((K,G)=>G(K),O)}}},7849:(Bt,Re,j)=>{"use strict";j.d(Re,{h:()=>S});var g=j(2416),x=j(3410);function S(z){x.z.setTimeout(()=>{const{onUnhandledError:N}=g.v;if(!N)throw z;N(z)})}},4532:(Bt,Re,j)=>{"use strict";function g(x){return new TypeError(`You provided ${null!==x&&"object"==typeof x?"an invalid object":`'${x}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Re,{z:()=>g})},655:(Bt,Re,j)=>{"use strict";function z(be,ke){var ot={};for(var Qe in be)Object.prototype.hasOwnProperty.call(be,Qe)&&ke.indexOf(Qe)<0&&(ot[Qe]=be[Qe]);if(null!=be&&"function"==typeof Object.getOwnPropertySymbols){var Et=0;for(Qe=Object.getOwnPropertySymbols(be);Et<Qe.length;Et++)ke.indexOf(Qe[Et])<0&&Object.prototype.propertyIsEnumerable.call(be,Qe[Et])&&(ot[Qe[Et]]=be[Qe[Et]])}return ot}function G(be,ke,ot,Qe){return new(ot||(ot=Promise))(function(Dt,un){function Ln(Nn){try{St(Qe.next(Nn))}catch(On){un(On)}}function Dn(Nn){try{St(Qe.throw(Nn))}catch(On){un(On)}}function St(Nn){Nn.done?Dt(Nn.value):function Et(Dt){return Dt instanceof ot?Dt:new ot(function(un){un(Dt)})}(Nn.value).then(Ln,Dn)}St((Qe=Qe.apply(be,ke||[])).next())})}function ve(be){return this instanceof ve?(this.v=be,this):new ve(be)}function de(be,ke,ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Et,Qe=ot.apply(be,ke||[]),Dt=[];return Et={},un("next"),un("throw"),un("return"),Et[Symbol.asyncIterator]=function(){return this},Et;function un(rn){Qe[rn]&&(Et[rn]=function(wt){return new Promise(function(Wn,Cn){Dt.push([rn,wt,Wn,Cn])>1||Ln(rn,wt)})})}function Ln(rn,wt){try{!function Dn(rn){rn.value instanceof ve?Promise.resolve(rn.value.v).then(St,Nn):On(Dt[0][2],rn)}(Qe[rn](wt))}catch(Wn){On(Dt[0][3],Wn)}}function St(rn){Ln("next",rn)}function Nn(rn){Ln("throw",rn)}function On(rn,wt){rn(wt),Dt.shift(),Dt.length&&Ln(Dt[0][0],Dt[0][1])}}function je(be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,ke=be[Symbol.asyncIterator];return ke?ke.call(be):(be=function H(be){var ke="function"==typeof Symbol&&Symbol.iterator,ot=ke&&be[ke],Qe=0;if(ot)return ot.call(be);if(be&&"number"==typeof be.length)return{next:function(){return be&&Qe>=be.length&&(be=void 0),{value:be&&be[Qe++],done:!be}}};throw new TypeError(ke?"Object is not iterable.":"Symbol.iterator is not defined.")}(be),ot={},Qe("next"),Qe("throw"),Qe("return"),ot[Symbol.asyncIterator]=function(){return this},ot);function Qe(Dt){ot[Dt]=be[Dt]&&function(un){return new Promise(function(Ln,Dn){!function Et(Dt,un,Ln,Dn){Promise.resolve(Dn).then(function(St){Dt({value:St,done:Ln})},un)}(Ln,Dn,(un=be[Dt](un)).done,un.value)})}}}j.d(Re,{FC:()=>de,KL:()=>je,_T:()=>z,mG:()=>G,qq:()=>ve})},7340:(Bt,Re,j)=>{"use strict";j.d(Re,{F4:()=>U,IO:()=>fe,LC:()=>x,SB:()=>B,X$:()=>z,ZE:()=>ae,ZN:()=>de,_j:()=>g,eR:()=>F,jt:()=>N,k1:()=>je,l3:()=>S,oB:()=>G,pV:()=>he,vP:()=>K});class g{}class x{}const S="*";function z(ye,te){return{type:7,name:ye,definitions:te,options:{}}}function N(ye,te=null){return{type:4,styles:te,timings:ye}}function K(ye,te=null){return{type:2,steps:ye,options:te}}function G(ye){return{type:6,styles:ye,offset:null}}function B(ye,te,ce){return{type:0,name:ye,styles:te,options:ce}}function U(ye){return{type:5,steps:ye}}function F(ye,te,ce=null){return{type:1,expr:ye,animation:te,options:ce}}function he(ye=null){return{type:9,options:ye}}function fe(ye,te,ce=null){return{type:11,selector:ye,animation:te,options:ce}}function ve(ye){Promise.resolve().then(ye)}class de{constructor(te=0,ce=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=te+ce}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(te=>te()),this._onDoneFns=[])}onStart(te){this._originalOnStartFns.push(te),this._onStartFns.push(te)}onDone(te){this._originalOnDoneFns.push(te),this._onDoneFns.push(te)}onDestroy(te){this._onDestroyFns.push(te)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ve(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(te=>te()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(te=>te()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(te){this._position=this.totalTime?te*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(te){const ce="start"==te?this._onStartFns:this._onDoneFns;ce.forEach(ze=>ze()),ce.length=0}}class ae{constructor(te){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=te;let ce=0,ze=0,et=0;const Fe=this.players.length;0==Fe?ve(()=>this._onFinish()):this.players.forEach(Ne=>{Ne.onDone(()=>{++ce==Fe&&this._onFinish()}),Ne.onDestroy(()=>{++ze==Fe&&this._onDestroy()}),Ne.onStart(()=>{++et==Fe&&this._onStart()})}),this.totalTime=this.players.reduce((Ne,be)=>Math.max(Ne,be.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(te=>te()),this._onDoneFns=[])}init(){this.players.forEach(te=>te.init())}onStart(te){this._onStartFns.push(te)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(te=>te()),this._onStartFns=[])}onDone(te){this._onDoneFns.push(te)}onDestroy(te){this._onDestroyFns.push(te)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(te=>te.play())}pause(){this.players.forEach(te=>te.pause())}restart(){this.players.forEach(te=>te.restart())}finish(){this._onFinish(),this.players.forEach(te=>te.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(te=>te.destroy()),this._onDestroyFns.forEach(te=>te()),this._onDestroyFns=[])}reset(){this.players.forEach(te=>te.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(te){const ce=te*this.totalTime;this.players.forEach(ze=>{const et=ze.totalTime?Math.min(1,ce/ze.totalTime):1;ze.setPosition(et)})}getPosition(){const te=this.players.reduce((ce,ze)=>null===ce||ze.totalTime>ce.totalTime?ze:ce,null);return null!=te?te.getPosition():0}beforeDestroy(){this.players.forEach(te=>{te.beforeDestroy&&te.beforeDestroy()})}triggerCallback(te){const ce="start"==te?this._onStartFns:this._onDoneFns;ce.forEach(ze=>ze()),ce.length=0}}const je="!"},6895:(Bt,Re,j)=>{"use strict";j.d(Re,{Do:()=>je,ED:()=>is,EM:()=>fi,HT:()=>N,JF:()=>So,K0:()=>K,Mx:()=>Bs,NF:()=>ta,O5:()=>jn,Ov:()=>Ve,PM:()=>Ps,RF:()=>Js,S$:()=>ve,V_:()=>U,Ye:()=>ye,b0:()=>ae,bD:()=>Wo,ez:()=>Go,mk:()=>Kn,n9:()=>Mi,q:()=>S,sg:()=>hr,w_:()=>O});var g=j(4650);let x=null;function S(){return x}function N(R){x||(x=R)}class O{}const K=new g.OlP("DocumentToken");let G=(()=>{class R{historyGo(k){throw new Error("Not implemented")}}return R.\u0275fac=function(k){return new(k||R)},R.\u0275prov=g.Yz7({token:R,factory:function(){return function B(){return(0,g.LFG)(F)}()},providedIn:"platform"}),R})();const U=new g.OlP("Location Initialized");let F=(()=>{class R extends G{constructor(k){super(),this._doc=k,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return S().getBaseHref(this._doc)}onPopState(k){const re=S().getGlobalEventTarget(this._doc,"window");return re.addEventListener("popstate",k,!1),()=>re.removeEventListener("popstate",k)}onHashChange(k){const re=S().getGlobalEventTarget(this._doc,"window");return re.addEventListener("hashchange",k,!1),()=>re.removeEventListener("hashchange",k)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(k){this.location.pathname=k}pushState(k,re,Te){H()?this._history.pushState(k,re,Te):this.location.hash=Te}replaceState(k,re,Te){H()?this._history.replaceState(k,re,Te):this.location.hash=Te}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}}return R.\u0275fac=function(k){return new(k||R)(g.LFG(K))},R.\u0275prov=g.Yz7({token:R,factory:function(){return function he(){return new F((0,g.LFG)(K))}()},providedIn:"platform"}),R})();function H(){return!!window.history.pushState}function se(R,ee){if(0==R.length)return ee;if(0==ee.length)return R;let k=0;return R.endsWith("/")&&k++,ee.startsWith("/")&&k++,2==k?R+ee.substring(1):1==k?R+ee:R+"/"+ee}function fe(R){const ee=R.match(/#|\?|$/),k=ee&&ee.index||R.length;return R.slice(0,k-("/"===R[k-1]?1:0))+R.slice(k)}function Ie(R){return R&&"?"!==R[0]?"?"+R:R}let ve=(()=>{class R{historyGo(k){throw new Error("Not implemented")}}return R.\u0275fac=function(k){return new(k||R)},R.\u0275prov=g.Yz7({token:R,factory:function(){return(0,g.f3M)(ae)},providedIn:"root"}),R})();const de=new g.OlP("appBaseHref");let ae=(()=>{class R extends ve{constructor(k,re){var Te,ut,ft;super(),this._platformLocation=k,this._removeListenerFns=[],this._baseHref=null!==(Te=null!==(ut=re??this._platformLocation.getBaseHrefFromDOM())&&void 0!==ut?ut:null===(ft=(0,g.f3M)(K).location)||void 0===ft?void 0:ft.origin)&&void 0!==Te?Te:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return se(this._baseHref,k)}path(k=!1){const re=this._platformLocation.pathname+Ie(this._platformLocation.search),Te=this._platformLocation.hash;return Te&&k?`${re}${Te}`:re}pushState(k,re,Te,ut){const ft=this.prepareExternalUrl(Te+Ie(ut));this._platformLocation.pushState(k,re,ft)}replaceState(k,re,Te,ut){const ft=this.prepareExternalUrl(Te+Ie(ut));this._platformLocation.replaceState(k,re,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){var re,Te;null===(re=(Te=this._platformLocation).historyGo)||void 0===re||re.call(Te,k)}}return R.\u0275fac=function(k){return new(k||R)(g.LFG(G),g.LFG(de,8))},R.\u0275prov=g.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),je=(()=>{class R extends ve{constructor(k,re){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=re&&(this._baseHref=re)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let re=this._platformLocation.hash;return null==re&&(re="#"),re.length>0?re.substring(1):re}prepareExternalUrl(k){const re=se(this._baseHref,k);return re.length>0?"#"+re:re}pushState(k,re,Te,ut){let ft=this.prepareExternalUrl(Te+Ie(ut));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.pushState(k,re,ft)}replaceState(k,re,Te,ut){let ft=this.prepareExternalUrl(Te+Ie(ut));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.replaceState(k,re,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){var re,Te;null===(re=(Te=this._platformLocation).historyGo)||void 0===re||re.call(Te,k)}}return R.\u0275fac=function(k){return new(k||R)(g.LFG(G),g.LFG(de,8))},R.\u0275prov=g.Yz7({token:R,factory:R.\u0275fac}),R})(),ye=(()=>{class R{constructor(k){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=k;const re=this._locationStrategy.getBaseHref();this._baseHref=fe(ze(re)),this._locationStrategy.onPopState(Te=>{this._subject.emit({url:this.path(!0),pop:!0,state:Te.state,type:Te.type})})}ngOnDestroy(){var k;null===(k=this._urlChangeSubscription)||void 0===k||k.unsubscribe(),this._urlChangeListeners=[]}path(k=!1){return this.normalize(this._locationStrategy.path(k))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(k,re=""){return this.path()==this.normalize(k+Ie(re))}normalize(k){return R.stripTrailingSlash(function ce(R,ee){return R&&ee.startsWith(R)?ee.substring(R.length):ee}(this._baseHref,ze(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._locationStrategy.prepareExternalUrl(k)}go(k,re="",Te=null){this._locationStrategy.pushState(Te,"",k,re),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Ie(re)),Te)}replaceState(k,re="",Te=null){this._locationStrategy.replaceState(Te,"",k,re),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Ie(re)),Te)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(k=0){var re,Te;null===(re=(Te=this._locationStrategy).historyGo)||void 0===re||re.call(Te,k)}onUrlChange(k){return this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(re=>{this._notifyUrlChangeListeners(re.url,re.state)})),()=>{const re=this._urlChangeListeners.indexOf(k);var Te;this._urlChangeListeners.splice(re,1),0===this._urlChangeListeners.length&&(null===(Te=this._urlChangeSubscription)||void 0===Te||Te.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(k="",re){this._urlChangeListeners.forEach(Te=>Te(k,re))}subscribe(k,re,Te){return this._subject.subscribe({next:k,error:re,complete:Te})}}return R.normalizeQueryParams=Ie,R.joinWithSlash=se,R.stripTrailingSlash=fe,R.\u0275fac=function(k){return new(k||R)(g.LFG(ve))},R.\u0275prov=g.Yz7({token:R,factory:function(){return function te(){return new ye((0,g.LFG)(ve))}()},providedIn:"root"}),R})();function ze(R){return R.replace(/\/index.html$/,"")}function Bs(R,ee){ee=encodeURIComponent(ee);for(const k of R.split(";")){const re=k.indexOf("="),[Te,ut]=-1==re?[k,""]:[k.slice(0,re),k.slice(re+1)];if(Te.trim()===ee)return decodeURIComponent(ut)}return null}let Kn=(()=>{class R{constructor(k,re,Te,ut){this._iterableDiffers=k,this._keyValueDiffers=re,this._ngEl=Te,this._renderer=ut,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(k){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof k?k.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(k){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof k?k.split(/\s+/):k,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const k=this._iterableDiffer.diff(this._rawClass);k&&this._applyIterableChanges(k)}else if(this._keyValueDiffer){const k=this._keyValueDiffer.diff(this._rawClass);k&&this._applyKeyValueChanges(k)}}_applyKeyValueChanges(k){k.forEachAddedItem(re=>this._toggleClass(re.key,re.currentValue)),k.forEachChangedItem(re=>this._toggleClass(re.key,re.currentValue)),k.forEachRemovedItem(re=>{re.previousValue&&this._toggleClass(re.key,!1)})}_applyIterableChanges(k){k.forEachAddedItem(re=>{if("string"!=typeof re.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(re.item)}`);this._toggleClass(re.item,!0)}),k.forEachRemovedItem(re=>this._toggleClass(re.item,!1))}_applyClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(re=>this._toggleClass(re,!0)):Object.keys(k).forEach(re=>this._toggleClass(re,!!k[re])))}_removeClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(re=>this._toggleClass(re,!1)):Object.keys(k).forEach(re=>this._toggleClass(re,!1)))}_toggleClass(k,re){(k=k.trim())&&k.split(/\s+/g).forEach(Te=>{re?this._renderer.addClass(this._ngEl.nativeElement,Te):this._renderer.removeClass(this._ngEl.nativeElement,Te)})}}return R.\u0275fac=function(k){return new(k||R)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},R.\u0275dir=g.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),R})();class po{constructor(ee,k,re,Te){this.$implicit=ee,this.ngForOf=k,this.index=re,this.count=Te}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hr=(()=>{class R{constructor(k,re,Te){this._viewContainer=k,this._template=re,this._differs=Te,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const re=this._viewContainer;k.forEachOperation((Te,ut,ft)=>{if(null==Te.previousIndex)re.createEmbeddedView(this._template,new po(Te.item,this._ngForOf,-1,-1),null===ft?void 0:ft);else if(null==ft)re.remove(null===ut?void 0:ut);else if(null!==ut){const Yt=re.get(ut);re.move(Yt,ft),Di(Yt,Te)}});for(let Te=0,ut=re.length;Te<ut;Te++){const Yt=re.get(Te).context;Yt.index=Te,Yt.count=ut,Yt.ngForOf=this._ngForOf}k.forEachIdentityChange(Te=>{Di(re.get(Te.currentIndex),Te)})}static ngTemplateContextGuard(k,re){return!0}}return R.\u0275fac=function(k){return new(k||R)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},R.\u0275dir=g.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),R})();function Di(R,ee){R.context.$implicit=ee.item}let jn=(()=>{class R{constructor(k,re){this._viewContainer=k,this._context=new js,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=re}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){Qr("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){Qr("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,re){return!0}}return R.\u0275fac=function(k){return new(k||R)(g.Y36(g.s_b),g.Y36(g.Rgc))},R.\u0275dir=g.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),R})();class js{constructor(){this.$implicit=null,this.ngIf=null}}function Qr(R,ee){if(ee&&!ee.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,g.AaK)(ee)}'.`)}class li{constructor(ee,k){this._viewContainerRef=ee,this._templateRef=k,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ee){ee&&!this._created?this.create():!ee&&this._created&&this.destroy()}}let Js=(()=>{class R{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(k){this._ngSwitch=k,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(k){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(k)}_matchCase(k){const re=k==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||re,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),re}_updateDefaultCases(k){if(this._defaultViews&&k!==this._defaultUsed){this._defaultUsed=k;for(let re=0;re<this._defaultViews.length;re++)this._defaultViews[re].enforceState(k)}}}return R.\u0275fac=function(k){return new(k||R)},R.\u0275dir=g.lG2({type:R,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),R})(),Mi=(()=>{class R{constructor(k,re,Te){this.ngSwitch=Te,Te._addCase(),this._view=new li(k,re)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return R.\u0275fac=function(k){return new(k||R)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(Js,9))},R.\u0275dir=g.lG2({type:R,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),R})(),is=(()=>{class R{constructor(k,re,Te){Te._addDefault(new li(k,re))}}return R.\u0275fac=function(k){return new(k||R)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(Js,9))},R.\u0275dir=g.lG2({type:R,selectors:[["","ngSwitchDefault",""]],standalone:!0}),R})();class Xs{createSubscription(ee,k){return ee.subscribe({next:k,error:re=>{throw re}})}dispose(ee){ee.unsubscribe()}}class Ho{createSubscription(ee,k){return ee.then(k,re=>{throw re})}dispose(ee){}}const $s=new Ho,Ke=new Xs;let Ve=(()=>{class R{constructor(k){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=k}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(k){return this._obj?k!==this._obj?(this._dispose(),this.transform(k)):this._latestValue:(k&&this._subscribe(k),this._latestValue)}_subscribe(k){this._obj=k,this._strategy=this._selectStrategy(k),this._subscription=this._strategy.createSubscription(k,re=>this._updateLatestValue(k,re))}_selectStrategy(k){if((0,g.QGY)(k))return $s;if((0,g.F4k)(k))return Ke;throw function ar(R,ee){return new g.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(k,re){k===this._obj&&(this._latestValue=re,this._ref.markForCheck())}}return R.\u0275fac=function(k){return new(k||R)(g.Y36(g.sBO,16))},R.\u0275pipe=g.Yjl({name:"async",type:R,pure:!1,standalone:!0}),R})(),Go=(()=>{class R{}return R.\u0275fac=function(k){return new(k||R)},R.\u0275mod=g.oAB({type:R}),R.\u0275inj=g.cJS({}),R})();const Wo="browser";function ta(R){return R===Wo}function Ps(R){return"server"===R}let fi=(()=>{class R{}return R.\u0275prov=(0,g.Yz7)({token:R,providedIn:"root",factory:()=>new Gr((0,g.LFG)(K),window)}),R})();class Gr{constructor(ee,k){this.document=ee,this.window=k,this.offset=()=>[0,0]}setOffset(ee){this.offset=Array.isArray(ee)?()=>ee:ee}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ee){this.supportsScrolling()&&this.window.scrollTo(ee[0],ee[1])}scrollToAnchor(ee){if(!this.supportsScrolling())return;const k=function zi(R,ee){const k=R.getElementById(ee)||R.getElementsByName(ee)[0];if(k)return k;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const re=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let Te=re.currentNode;for(;Te;){const ut=Te.shadowRoot;if(ut){const ft=ut.getElementById(ee)||ut.querySelector(`[name="${ee}"]`);if(ft)return ft}Te=re.nextNode()}}return null}(this.document,ee);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(ee){if(this.supportScrollRestoration()){const k=this.window.history;k&&k.scrollRestoration&&(k.scrollRestoration=ee)}}scrollToElement(ee){const k=ee.getBoundingClientRect(),re=k.left+this.window.pageXOffset,Te=k.top+this.window.pageYOffset,ut=this.offset();this.window.scrollTo(re-ut[0],Te-ut[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ee=Pi(this.window.history)||Pi(Object.getPrototypeOf(this.window.history));return!(!ee||!ee.writable&&!ee.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Pi(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class So{}},4650:(Bt,Re,j)=>{"use strict";j.d(Re,{$8M:()=>ba,$Z:()=>yg,AFp:()=>mw,ALo:()=>LE,AaK:()=>G,AcB:()=>hl,AsE:()=>$c,BQk:()=>Wh,CHM:()=>na,CRH:()=>WE,CZH:()=>qv,CqO:()=>sm,D6c:()=>Fb,DdM:()=>AE,EJc:()=>JI,EiD:()=>ff,EpF:()=>Zy,F$t:()=>um,F4k:()=>Qy,FYo:()=>Nu,FiY:()=>uu,G48:()=>_b,Gf:()=>zE,GfV:()=>dh,Gpc:()=>F,Gre:()=>vm,Hsn:()=>kd,IIB:()=>WI,Ikx:()=>$d,JOm:()=>Fu,JVY:()=>$e,Jf7:()=>pu,KtG:()=>Ko,L6k:()=>nt,LAX:()=>Qt,LFG:()=>vi,LSH:()=>nh,Lbi:()=>KI,Lck:()=>D,MAs:()=>fp,MGl:()=>Ji,MMx:()=>at,NdJ:()=>vp,O4$:()=>Yt,OlP:()=>Ii,Oqu:()=>Cp,PXZ:()=>fb,PiD:()=>ml,Q6J:()=>pp,QGY:()=>im,QP$:()=>fn,QbO:()=>ZI,Qsj:()=>_f,R0b:()=>Hu,RDi:()=>Qd,Rgc:()=>Bm,SBq:()=>Ju,Sil:()=>eb,Suo:()=>GE,TTD:()=>Ts,TgZ:()=>gp,Udp:()=>hm,VKq:()=>xE,W1O:()=>QE,X6Q:()=>vb,XFs:()=>jt,Xpm:()=>br,Xts:()=>Ua,Y36:()=>vd,YKP:()=>p,YNc:()=>Gh,Yjl:()=>Be,Yz7:()=>wt,Z0I:()=>Xn,ZZ4:()=>j0,_Bn:()=>a,_UZ:()=>rm,_Vd:()=>Ru,_c5:()=>kb,_uU:()=>mm,aQg:()=>$0,c2e:()=>QI,cJS:()=>Cn,cg1:()=>ul,dDg:()=>lb,dqk:()=>Yn,eBb:()=>mt,eFA:()=>xw,ekj:()=>tu,eoX:()=>Cw,evT:()=>Tf,f3M:()=>ou,g9A:()=>vw,h0i:()=>l,hGG:()=>Lb,hij:()=>Bd,iGM:()=>HE,ifc:()=>on,ip1:()=>gw,jDz:()=>Ut,kL8:()=>zd,kYT:()=>ui,kcU:()=>lr,lG2:()=>Ae,lcZ:()=>FE,lqb:()=>cs,lri:()=>Tw,mCW:()=>Sa,n5z:()=>Lr,n_E:()=>$v,oAB:()=>ai,oJD:()=>gf,oxw:()=>ni,pB0:()=>$t,q3G:()=>Ms,q4F:()=>Jo,qLn:()=>pt,qOj:()=>Vh,qZA:()=>mp,qzn:()=>X,rFY:()=>RE,rWj:()=>Dw,r_U:()=>qI,s9C:()=>Ep,sBO:()=>Eb,sIi:()=>xd,s_b:()=>zv,soG:()=>Kv,tBr:()=>ic,tb:()=>_w,tp0:()=>Su,uIk:()=>Lc,vHH:()=>fe,vpe:()=>Jl,wAp:()=>$n,xp6:()=>ag,ynx:()=>yp,z2F:()=>Zv,z3N:()=>M,zSh:()=>gc,zs3:()=>yu});var g=j(7579),x=j(727),S=j(9751),z=j(6451),N=j(3099);function O(n){for(let i in n)if(n[i]===O)return i;throw Error("Could not find renamed property on target object.")}function K(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function G(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(G).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function B(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const U=O({__forward_ref__:O});function F(n){return n.__forward_ref__=F,n.toString=function(){return G(this())},n}function H(n){return he(n)?n():n}function he(n){return"function"==typeof n&&n.hasOwnProperty(U)&&n.__forward_ref__===F}class fe extends Error{constructor(i,o){super(function Ie(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}(i,o)),this.code=i}}function ve(n){return"string"==typeof n?n:null==n?"":String(n)}function te(n,i){throw new fe(-201,!1)}function Dn(n,i){null==n&&function St(n,i,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,n,null,"!=")}function wt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Cn(n){return{providers:n.providers||[],imports:n.imports||[]}}function cr(n){return Mr(n,Br)||Mr(n,zn)}function Xn(n){return null!==cr(n)}function Mr(n,i){return n.hasOwnProperty(i)?n[i]:null}function gr(n){return n&&(n.hasOwnProperty(Pn)||n.hasOwnProperty(dr))?n[Pn]:null}const Br=O({\u0275prov:O}),Pn=O({\u0275inj:O}),zn=O({ngInjectableDef:O}),dr=O({ngInjectorDef:O});var jt=(()=>((jt=jt||{})[jt.Default=0]="Default",jt[jt.Host=1]="Host",jt[jt.Self=2]="Self",jt[jt.SkipSelf=4]="SkipSelf",jt[jt.Optional=8]="Optional",jt))();let Vr;function jr(n){const i=Vr;return Vr=n,i}function fs(n,i,o){const u=cr(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&jt.Optional?null:void 0!==i?i:void te(G(n))}function oi(n){return{toString:n}.toString()}var mr=(()=>((mr=mr||{})[mr.OnPush=0]="OnPush",mr[mr.Default=1]="Default",mr))(),on=(()=>{return(n=on||(on={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",on;var n})();const Yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),$r={},Gt=[],Dr=O({\u0275cmp:O}),Vn=O({\u0275dir:O}),_i=O({\u0275pipe:O}),qn=O({\u0275mod:O}),Pr=O({\u0275fac:O}),Cr=O({__NG_ELEMENT_ID__:O});let Zr=0;function br(n){return oi(()=>{const o=!0===n.standalone,u={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===mr.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Gt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||on.Emulated,id:"c"+Zr++,styles:n.styles||Gt,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.dependencies,v=n.features;return c.inputs=Oe(n.inputs,u),c.outputs=Oe(n.outputs),v&&v.forEach(C=>C(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(Hr).filter(sr):null,c.pipeDefs=f?()=>("function"==typeof f?f():f).map(Mt).filter(sr):null,c})}function Hr(n){return lt(n)||Ye(n)}function sr(n){return null!==n}function ai(n){return oi(()=>({type:n.type,bootstrap:n.bootstrap||Gt,declarations:n.declarations||Gt,imports:n.imports||Gt,exports:n.exports||Gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ui(n,i){return oi(()=>{const o=Sn(n,!0);o.declarations=i.declarations||Gt,o.imports=i.imports||Gt,o.exports=i.exports||Gt})}function Oe(n,i){if(null==n)return $r;const o={};for(const u in n)if(n.hasOwnProperty(u)){let c=n[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),o[c]=u,i&&(i[c]=f)}return o}const Ae=br;function Be(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function lt(n){return n[Dr]||null}function Ye(n){return n[Vn]||null}function Mt(n){return n[_i]||null}function fn(n){const i=lt(n)||Ye(n)||Mt(n);return null!==i&&i.standalone}function Sn(n,i){const o=n[qn]||null;if(!o&&!0===i)throw new Error(`Type ${G(n)} does not have '\u0275mod' property.`);return o}function Qr(n){return Array.isArray(n)&&"object"==typeof n[1]}function li(n){return Array.isArray(n)&&!0===n[1]}function Js(n){return 0!=(8&n.flags)}function Mi(n){return 2==(2&n.flags)}function is(n){return 1==(1&n.flags)}function Nr(n){return null!==n.template}function ws(n){return 0!=(256&n[2])}function bs(n,i){return n.hasOwnProperty(Pr)?n[Pr]:null}class zo{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ts(){return Ds}function Ds(n){return n.type.prototype.ngOnChanges&&(n.setInput=yo),mo}function mo(){const n=vo(this),i=n?.current;if(i){const o=n.previous;if(o===$r)n.previous=i;else for(let u in i)o[u]=i[u];n.current=null,this.ngOnChanges(i)}}function yo(n,i,o,u){const c=vo(n)||function Go(n,i){return n[Cs]=i}(n,{previous:$r,current:null}),f=c.current||(c.current={}),v=c.previous,C=this.declaredInputs[o],P=v[C];f[C]=new zo(P&&P.currentValue,i,v===$r),n[u]=i}Ts.ngInherit=!0;const Cs="__ngSimpleChanges__";function vo(n){return n[Cs]||null}function zr(n){for(;Array.isArray(n);)n=n[0];return n}function Pi(n,i){return zr(i[n])}function zi(n,i){return zr(i[n.index])}function So(n,i){return n.data[i]}function to(n,i){return n[i]}function nr(n,i){const o=i[n];return Qr(o)?o:o[0]}function es(n){return 64==(64&n[2])}function Ai(n,i){return null==i?null:n[i]}function Bi(n){n[18]=0}function Vi(n,i){n[5]+=i;let o=n,u=n[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const gn={lFrame:Ro(null),bindingsEnabled:!0};function Hs(){return gn.bindingsEnabled}function Tt(){return gn.lFrame.lView}function Mn(){return gn.lFrame.tView}function na(n){return gn.lFrame.contextLView=n,n[8]}function Ko(n){return gn.lFrame.contextLView=null,n}function Yr(){let n=ra();for(;null!==n&&64===n.type;)n=n.parent;return n}function ra(){return gn.lFrame.currentTNode}function ms(n,i){const o=gn.lFrame;o.currentTNode=n,o.isParent=i}function Z(){return gn.lFrame.isParent}function W(){gn.lFrame.isParent=!1}function vt(){const n=gn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function In(){return gn.lFrame.bindingIndex++}function kn(n){const i=gn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Jr(n,i){const o=gn.lFrame;o.bindingIndex=o.bindingRootIndex=n,ss(i)}function ss(n){gn.lFrame.currentDirectiveIndex=n}function zs(){return gn.lFrame.currentQueryIndex}function kr(n){gn.lFrame.currentQueryIndex=n}function Xr(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function gi(n,i,o){if(o&jt.SkipSelf){let c=i,f=n;for(;!(c=c.parent,null!==c||o&jt.Host||(c=Xr(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;i=c,n=f}const u=gn.lFrame=os();return u.currentTNode=i,u.lView=n,!0}function Gs(n){const i=os(),o=n[1];gn.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function os(){const n=gn.lFrame,i=null===n?null:n.child;return null===i?Ro(n):i}function Ro(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function ts(){const n=gn.lFrame;return gn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const R=ts;function ee(){const n=ts();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Te(){return gn.lFrame.selectedIndex}function ut(n){gn.lFrame.selectedIndex=n}function ft(){const n=gn.lFrame;return So(n.tView,n.selectedIndex)}function Yt(){gn.lFrame.currentNamespace="svg"}function lr(){!function Y(){gn.lFrame.currentNamespace=null}()}function L(n,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const f=n.data[o].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:P,ngAfterViewChecked:Q,ngOnDestroy:ue}=f;v&&(n.contentHooks||(n.contentHooks=[])).push(-o,v),C&&((n.contentHooks||(n.contentHooks=[])).push(o,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,C)),P&&(n.viewHooks||(n.viewHooks=[])).push(-o,P),Q&&((n.viewHooks||(n.viewHooks=[])).push(o,Q),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,Q)),null!=ue&&(n.destroyHooks||(n.destroyHooks=[])).push(o,ue)}}function ne(n,i,o){Le(n,i,3,o)}function ge(n,i,o,u){(3&n[2])===o&&Le(n,i,o,u)}function Pe(n,i){let o=n[2];(3&o)===i&&(o&=2047,o+=1,n[2]=o)}function Le(n,i,o,u){const f=u??-1,v=i.length-1;let C=0;for(let P=void 0!==u?65535&n[18]:0;P<v;P++)if("number"==typeof i[P+1]){if(C=i[P],null!=u&&C>=u)break}else i[P]<0&&(n[18]+=65536),(C<f||-1==f)&&(rt(n,o,i,P),n[18]=(4294901760&n[18])+P+2),P++}function rt(n,i,o,u){const c=o[u]<0,f=o[u+1],C=n[c?-o[u]:o[u]];if(c){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class Nt{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Zi(n,i,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const f=o[u++],v=o[u++],C=o[u++];n.setAttribute(i,v,C,f)}else{const f=c,v=o[++u];ia(f)?n.setProperty(i,f,v):n.setAttribute(i,f,v),u++}}return u}function ci(n){return 3===n||4===n||6===n}function ia(n){return 64===n.charCodeAt(0)}function Ws(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||Gi(n,o,c,null,-1===o||2===o?i[++u]:null)}}return n}function Gi(n,i,o,u,c){let f=0,v=n.length;if(-1===i)v=-1;else for(;f<n.length;){const C=n[f++];if("number"==typeof C){if(C===i){v=-1;break}if(C>i){v=f-1;break}}}for(;f<n.length;){const C=n[f];if("number"==typeof C)break;if(C===o){if(null===u)return void(null!==c&&(n[f+1]=c));if(u===n[f+1])return void(n[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==v&&(n.splice(v,0,i),f=v+1),n.splice(f++,0,o),null!==u&&n.splice(f++,0,u),null!==c&&n.splice(f++,0,c)}function as(n){return-1!==n}function Mo(n){return 32767&n}function Wi(n,i){let o=function Qi(n){return n>>16}(n),u=i;for(;o>0;)u=u[15],o--;return u}let ji=!0;function Ns(n){const i=ji;return ji=n,i}let wn=0;const cn={};function mi(n,i){const o=$i(n,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(n.injectorIndex=i.length,Ks(u.data,n),Ks(i,null),Ks(u.blueprint,null));const c=Zs(n,i),f=n.injectorIndex;if(as(c)){const v=Mo(c),C=Wi(c,i),P=C[1].data;for(let Q=0;Q<8;Q++)i[f+Q]=C[v+Q]|P[v+Q]}return i[f+8]=c,f}function Ks(n,i){n.push(0,0,0,0,0,0,0,0,i)}function $i(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Zs(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){if(u=_n(c),null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function ii(n,i,o){!function ur(n,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Cr)&&(u=o[Cr]),null==u&&(u=o[Cr]=wn++);const c=255&u;i.data[n+(c>>5)]|=1<<c}(n,i,o)}function Ia(n,i,o){if(o&jt.Optional||void 0!==n)return n;te()}function ys(n,i,o,u){if(o&jt.Optional&&void 0===u&&(u=null),0==(o&(jt.Self|jt.Host))){const c=n[9],f=jr(void 0);try{return c?c.get(i,u,o&jt.Optional):fs(i,u,o&jt.Optional)}finally{jr(f)}}return Ia(u,0,o)}function Po(n,i,o,u=jt.Default,c){if(null!==n){if(1024&i[2]){const v=function tn(n,i,o,u,c){let f=n,v=i;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=yr(f,v,o,u|jt.Self,cn);if(C!==cn)return C;let P=f.parent;if(!P){const Q=v[21];if(Q){const ue=Q.get(o,cn,u);if(ue!==cn)return ue}P=_n(v),v=v[15]}f=P}return c}(n,i,o,u,cn);if(v!==cn)return v}const f=yr(n,i,o,u,cn);if(f!==cn)return f}return ys(i,o,u,c)}function yr(n,i,o,u,c){const f=function Os(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Cr)?n[Cr]:void 0;return"number"==typeof i?i>=0?255&i:vs:i}(o);if("function"==typeof f){if(!gi(i,n,u))return u&jt.Host?Ia(c,0,u):ys(i,o,u,c);try{const v=f(u);if(null!=v||u&jt.Optional)return v;te()}finally{R()}}else if("number"==typeof f){let v=null,C=$i(n,i),P=-1,Q=u&jt.Host?i[16][6]:null;for((-1===C||u&jt.SkipSelf)&&(P=-1===C?Zs(n,i):i[C+8],-1!==P&&bu(u,!1)?(v=i[1],C=Mo(P),i=Wi(P,i)):C=-1);-1!==C;){const ue=i[1];if(zu(f,C,ue.data)){const we=Ha(C,i,o,v,u,Q);if(we!==cn)return we}P=i[C+8],-1!==P&&bu(u,i[1].data[C+8]===Q)&&zu(f,C,i)?(v=ue,C=Mo(P),i=Wi(P,i)):C=-1}}return c}function Ha(n,i,o,u,c,f){const v=i[1],C=v.data[n+8],ue=ei(C,v,o,null==u?Mi(C)&&ji:u!=v&&0!=(3&C.type),c&jt.Host&&f===C);return null!==ue?No(i,v,ue,C):cn}function ei(n,i,o,u,c){const f=n.providerIndexes,v=i.data,C=1048575&f,P=n.directiveStart,ue=f>>20,He=c?C+ue:n.directiveEnd;for(let ct=u?C:C+ue;ct<He;ct++){const At=v[ct];if(ct<P&&o===At||ct>=P&&At.type===o)return ct}if(c){const ct=v[P];if(ct&&Nr(ct)&&ct.type===o)return P}return null}function No(n,i,o,u){let c=n[o];const f=i.data;if(function en(n){return n instanceof Nt}(c)){const v=c;v.resolving&&function ae(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new fe(-200,`Circular dependency in DI detected for ${n}${o}`)}(function de(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ve(n)}(f[o]));const C=Ns(v.canSeeViewProviders);v.resolving=!0;const P=v.injectImpl?jr(v.injectImpl):null;gi(n,u,jt.Default);try{c=n[o]=v.factory(void 0,f,n,u),i.firstCreatePass&&o>=u.directiveStart&&function w(n,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=i.type.prototype;if(u){const v=Ds(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,v),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,v)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,c),f&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,f))}(o,f[o],i)}finally{null!==P&&jr(P),Ns(C),v.resolving=!1,R()}}return c}function zu(n,i,o){return!!(o[i+(n>>5)]&1<<n)}function bu(n,i){return!(n&jt.Self||n&jt.Host&&i)}class xt{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Po(this._tNode,this._lView,i,u,o)}}function vs(){return new xt(Yr(),Tt())}function Lr(n){return oi(()=>{const i=n.prototype.constructor,o=i[Pr]||ru(i),u=Object.prototype;let c=Object.getPrototypeOf(n.prototype).constructor;for(;c&&c!==u;){const f=c[Pr]||ru(c);if(f&&f!==o)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function ru(n){return he(n)?()=>{const i=ru(H(n));return i&&i()}:bs(n)}function _n(n){const i=n[1],o=i.type;return 2===o?i.declTNode:1===o?n[6]:null}function ba(n){return function Pa(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const f=o[c];if(ci(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(f===i)return o[c+1];c+=2}}}return null}(Yr(),n)}const it="__parameters__",It="__prop__metadata__";function za(n){return function(...o){if(n){const u=n(...o);for(const c in u)this[c]=u[c]}}}function pa(n,i,o){return oi(()=>{const u=za(i);function c(...f){if(this instanceof c)return u.apply(this,f),this;const v=new c(...f);return C.annotation=v,C;function C(P,Q,ue){const we=P.hasOwnProperty(it)?P[it]:Object.defineProperty(P,it,{value:[]})[it];for(;we.length<=ue;)we.push(null);return(we[ue]=we[ue]||[]).push(v),P}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}function Ta(n,i,o,u){return oi(()=>{const c=za(i);function f(...v){if(this instanceof f)return c.apply(this,v),this;const C=new f(...v);return function P(Q,ue){const we=Q.constructor,He=we.hasOwnProperty(It)?we[It]:Object.defineProperty(we,It,{value:{}})[It];He[ue]=He.hasOwnProperty(ue)&&He[ue]||[],He[ue].unshift(C),u&&u(Q,ue,...v)}}return o&&(f.prototype=Object.create(o.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class Ii{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=wt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}class Tu{}const hl=Ta("ContentChildren",(n,i={})=>({selector:n,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...i}),Tu);function Lt(n,i){void 0===i&&(i=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(i===n&&(i=n.slice(0,o)),Lt(u,i)):i!==n&&i.push(u)}return i}function lo(n,i){n.forEach(o=>Array.isArray(o)?lo(o,i):i(o))}function Wa(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function ga(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function I(n,i){const o=[];for(let u=0;u<n;u++)o.push(i);return o}function Se(n,i,o){let u=Ft(n,i);return u>=0?n[1|u]=o:(u=~u,function A(n,i,o,u){let c=n.length;if(c==i)n.push(o,u);else if(1===c)n.push(u,n[0]),n[0]=o;else{for(c--,n.push(n[c-1],n[c]);c>i;)n[c]=n[c-2],c--;n[i]=o,n[i+1]=u}}(n,u,i,o)),u}function st(n,i){const o=Ft(n,i);if(o>=0)return n[1|o]}function Ft(n,i){return function Kt(n,i,o){let u=0,c=n.length>>o;for(;c!==u;){const f=u+(c-u>>1),v=n[f<<o];if(i===v)return f<<o;v>i?c=f:u=f+1}return~(c<<o)}(n,i,1)}const Io={},Oa="__NG_DI_FLAG__",bo="ngTempTokenPath",Du=/\n/gm,Cu="__source";let ls;function To(n){const i=ls;return ls=n,i}function pl(n,i=jt.Default){if(void 0===ls)throw new fe(-203,!1);return null===ls?fs(n,void 0,i):ls.get(n,i&jt.Optional?null:void 0,i)}function vi(n,i=jt.Default){return(function ri(){return Vr}()||pl)(H(n),i)}function ou(n,i=jt.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),vi(n,i)}function tc(n){const i=[];for(let o=0;o<n.length;o++){const u=H(n[o]);if(Array.isArray(u)){if(0===u.length)throw new fe(900,!1);let c,f=jt.Default;for(let v=0;v<u.length;v++){const C=u[v],P=nc(C);"number"==typeof P?-1===P?c=C.token:f|=P:c=C}i.push(vi(c,f))}else i.push(vi(u))}return i}function au(n,i){return n[Oa]=i,n.prototype[Oa]=i,n}function nc(n){return n[Oa]}const ic=au(pa("Inject",n=>({token:n})),-1),uu=au(pa("Optional"),8),ml=au(pa("Self"),2),Su=au(pa("SkipSelf"),4);let Au,oc,La;function Qd(n){Au=n}function Ni(n){var i;return(null===(i=function Ca(){if(void 0===oc&&(oc=null,Yn.trustedTypes))try{oc=Yn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return oc}())||void 0===i?void 0:i.createHTML(n))||n}function sa(n){var i;return(null===(i=function Fa(){if(void 0===La&&(La=null,Yn.trustedTypes))try{La=Yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return La}())||void 0===i?void 0:i.createHTML(n))||n}class Yo{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ya extends Yo{getTypeName(){return"HTML"}}class Zu extends Yo{getTypeName(){return"Style"}}class Za extends Yo{getTypeName(){return"Script"}}class Yd extends Yo{getTypeName(){return"URL"}}class b extends Yo{getTypeName(){return"ResourceURL"}}function M(n){return n instanceof Yo?n.changingThisBreaksApplicationSecurity:n}function X(n,i){const o=function Ee(n){return n instanceof Yo&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function $e(n){return new ya(n)}function nt(n){return new Zu(n)}function mt(n){return new Za(n)}function Qt(n){return new Yd(n)}function $t(n){return new b(n)}class Zn{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Ni(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class rr{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Ni(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Ni(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const v=o.item(c).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&i.removeAttribute(v)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Rs=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Sa(n){return(n=String(n)).match(Rs)?n:"unsafe:"+n}function Oi(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function aa(...n){const i={};for(const o of n)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const Ur=Oi("area,br,col,hr,img,wbr"),io=Oi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),El=Oi("rp,rt"),wl=aa(Ur,aa(io,Oi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),aa(El,Oi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),aa(El,io)),Rr=Oi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lc=aa(Rr,Oi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Oi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xd=Oi("script,style,template");class df{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!wl.hasOwnProperty(o))return this.sanitizedSomething=!0,!Xd.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const f=u.item(c),v=f.name,C=v.toLowerCase();if(!lc.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let P=f.value;Rr[C]&&(P=Sa(P)),this.buf.push(" ",v,'="',th(P),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();wl.hasOwnProperty(o)&&!Ur.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(th(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const eh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hf=/([^\#-~ |!])/g;function th(n){return n.replace(/&/g,"&amp;").replace(eh,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(hf,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let bl;function ff(n,i){let o=null;try{bl=bl||function mn(n){const i=new rr(n);return function oa(){try{return!!(new window.DOMParser).parseFromString(Ni(""),"text/html")}catch{return!1}}()?new Zn(i):i}(n);let u=i?String(i):"";o=bl.getInertBodyElement(u);let c=5,f=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=f,f=o.innerHTML,o=bl.getInertBodyElement(u)}while(u!==f);return Ni((new df).sanitizeChildren(pf(o)||o))}finally{if(o){const u=pf(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function pf(n){return"content"in n&&function Qu(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ms=(()=>((Ms=Ms||{})[Ms.NONE=0]="NONE",Ms[Ms.HTML=1]="HTML",Ms[Ms.STYLE=2]="STYLE",Ms[Ms.SCRIPT=3]="SCRIPT",Ms[Ms.URL=4]="URL",Ms[Ms.RESOURCE_URL=5]="RESOURCE_URL",Ms))();function gf(n){const i=Tl();return i?sa(i.sanitize(Ms.HTML,n)||""):X(n,"HTML")?sa(M(n)):ff(function Es(){return void 0!==Au?Au:typeof document<"u"?document:void 0}(),ve(n))}function nh(n){const i=Tl();return i?i.sanitize(Ms.URL,n)||"":X(n,"URL")?M(n):Sa(ve(n))}function Tl(){const n=Tt();return n&&n[12]}const Ua=new Ii("ENVIRONMENT_INITIALIZER"),ih=new Ii("INJECTOR",-1),Yu=new Ii("INJECTOR_DEF_TYPES");class rd{get(i,o=Io){if(o===Io){const u=new Error(`NullInjectorError: No provider for ${G(i)}!`);throw u.name="NullInjectorError",u}return o}}function hc(...n){return{\u0275providers:fc(0,n)}}function fc(n,...i){const o=[],u=new Set;let c;return lo(i,f=>{const v=f;Ba(v,o,[],u)&&(c||(c=[]),c.push(v))}),void 0!==c&&id(c,o),o}function id(n,i){for(let o=0;o<n.length;o++){const{providers:c}=n[o];lo(c,f=>{i.push(f)})}}function Ba(n,i,o,u){if(!(n=H(n)))return!1;let c=null,f=gr(n);const v=!f&&lt(n);if(f||v){if(v&&!v.standalone)return!1;c=n}else{const P=n.ngModule;if(f=gr(P),!f)return!1;c=P}const C=u.has(c);if(v){if(C)return!1;if(u.add(c),v.dependencies){const P="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const Q of P)Ba(Q,i,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!C){let Q;u.add(c);try{lo(f.imports,ue=>{Ba(ue,i,o,u)&&(Q||(Q=[]),Q.push(ue))})}finally{}void 0!==Q&&id(Q,i)}if(!C){const Q=bs(c)||(()=>new c);i.push({provide:c,useFactory:Q,deps:Gt},{provide:Yu,useValue:c,multi:!0},{provide:Ua,useValue:()=>vi(c),multi:!0})}const P=f.providers;null==P||C||lo(P,ue=>{i.push(ue)})}}return c!==n&&void 0!==n.providers}const sh=O({provide:String,useValue:O});function Dl(n){return null!==n&&"object"==typeof n&&sh in n}function hu(n){return"function"==typeof n}const gc=new Ii("Set Injector scope."),mc={},Gp={};let Va;function sd(){return void 0===Va&&(Va=new rd),Va}class cs{}class ah extends cs{constructor(i,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yc(i,v=>this.processProvider(v)),this.records.set(ih,Ya(void 0,this)),c.has("environment")&&this.records.set(cs,Ya(void 0,this));const f=this.records.get(gc);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Yu.multi,Gt,jt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=To(this),u=jr(void 0);try{return i()}finally{To(o),jr(u)}}get(i,o=Io,u=jt.Default){this.assertNotDestroyed();const c=To(this),f=jr(void 0);try{if(!(u&jt.SkipSelf)){let C=this.records.get(i);if(void 0===C){const P=function pr(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ii}(i)&&cr(i);C=P&&this.injectableDefInScope(P)?Ya(xu(i),mc):null,this.records.set(i,C)}if(null!=C)return this.hydrate(i,C)}return(u&jt.Self?sd():this.parent).get(i,o=u&jt.Optional&&o===Io?null:o)}catch(v){if("NullInjectorError"===v.name){if((v[bo]=v[bo]||[]).unshift(G(i)),c)throw v;return function rc(n,i,o,u){const c=n[bo];throw i[Cu]&&c.unshift(i[Cu]),n.message=function gl(n,i,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let c=G(i);if(Array.isArray(i))c=i.map(G).join(" -> ");else if("object"==typeof i){let f=[];for(let v in i)if(i.hasOwnProperty(v)){let C=i[v];f.push(v+":"+("string"==typeof C?JSON.stringify(C):G(C)))}c=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${n.replace(Du,"\n  ")}`}("\n"+n.message,c,o,u),n.ngTokenPath=c,n[bo]=null,n}(v,i,"R3InjectorError",this.source)}throw v}finally{jr(f),To(c)}}resolveInjectorInitializers(){const i=To(this),o=jr(void 0);try{const u=this.get(Ua.multi,Gt,jt.Self);for(const c of u)c()}finally{To(i),jr(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(G(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(i){let o=hu(i=H(i))?i:H(i&&i.provide);const u=function Qa(n){return Dl(n)?Ya(void 0,n.useValue):Ya(uh(n),mc)}(i);if(hu(i)||!0!==i.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=Ya(void 0,mc,!0),c.factory=()=>tc(c.multi),this.records.set(o,c)),o=i,c.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===mc&&(o.value=Gp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function lh(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=H(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function xu(n){const i=cr(n),o=null!==i?i.factory:bs(n);if(null!==o)return o;if(n instanceof Ii)throw new fe(204,!1);if(n instanceof Function)return function mf(n){const i=n.length;if(i>0)throw I(i,"?"),new fe(204,!1);const o=function Ir(n){const i=n&&(n[Br]||n[zn]);if(i){const o=function ki(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new fe(204,!1)}function uh(n,i,o){let u;if(hu(n)){const c=H(n);return bs(c)||xu(c)}if(Dl(n))u=()=>H(n.useValue);else if(function oh(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...tc(n.deps||[]));else if(function du(n){return!(!n||!n.useExisting)}(n))u=()=>vi(H(n.useExisting));else{const c=H(n&&(n.useClass||n.provide));if(!function yf(n){return!!n.deps}(n))return bs(c)||xu(c);u=()=>new c(...tc(n.deps))}return u}function Ya(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function vf(n){return!!n.\u0275providers}function yc(n,i){for(const o of n)Array.isArray(o)?yc(o,i):vf(o)?yc(o.\u0275providers,i):i(o)}class ch{}class qp{resolveComponentFactory(i){throw function ua(n){const i=Error(`No component factory found for ${G(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Ru=(()=>{class n{}return n.NULL=new qp,n})();function Mu(){return Aa(Yr(),Tt())}function Aa(n,i){return new Ju(zi(n,i))}let Ju=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Mu,n})();function Xu(n){return n instanceof Ju?n.nativeElement:n}class Nu{}let _f=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ef(){const n=Tt(),o=nr(Yr().index,n);return(Qr(o)?o:n)[11]}(),n})(),vc=(()=>{class n{}return n.\u0275prov=wt({token:n,providedIn:"root",factory:()=>null}),n})();class dh{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Jo=new dh("14.2.5"),Hi={};function Xe(n){return n.ngOriginalError}class pt{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Xe(i);for(;o&&Xe(o);)o=Xe(o);return o||null}}const Sl=new Map;let Al=0;const If="__ngContext__";function la(n,i){Qr(i)?(n[If]=i[20],function xl(n){Sl.set(n[20],n)}(i)):n[If]=i}function pu(n){return n.ownerDocument.defaultView}function Tf(n){return n.ownerDocument}function Lu(n){return n instanceof Function?n():n}var Fu=(()=>((Fu=Fu||{})[Fu.Important=1]="Important",Fu[Fu.DashCase=2]="DashCase",Fu))();function yh(n,i){return undefined(n,i)}function vh(n){const i=n[3];return li(i)?i[3]:i}function Uu(n){return Jp(n[13])}function Ml(n){return Jp(n[4])}function Jp(n){for(;null!==n&&!li(n);)n=n[4];return n}function Ic(n,i,o,u,c){if(null!=u){let f,v=!1;li(u)?f=u:Qr(u)&&(v=!0,u=u[0]);const C=zr(u);0===n&&null!==o?null==c?Pl(i,o,C):mu(i,o,C,c||null,!0):1===n&&null!==o?mu(i,o,C,c||null,!0):2===n?function ng(n,i,o){const u=Rf(n,i);u&&function ty(n,i,o,u){n.removeChild(i,o,u)}(n,u,i,o)}(i,C,v):3===n&&i.destroyNode(C),null!=f&&function o_(n,i,o,u,c){const f=o[7];f!==zr(o)&&Ic(i,n,u,f,c);for(let C=10;C<o.length;C++){const P=o[C];Cc(P[1],P,n,i,u,f)}}(i,n,f,o,c)}}function Cf(n,i,o){return n.createElement(i,o)}function Af(n,i){const o=n[9],u=o.indexOf(i),c=i[3];512&i[2]&&(i[2]&=-513,Vi(c,-1)),o.splice(u,1)}function Eh(n,i){if(n.length<=10)return;const o=10+i,u=n[o];if(u){const c=u[17];null!==c&&c!==n&&Af(c,u),i>0&&(n[o-1][4]=u[4]);const f=ga(n,10+i);!function Sf(n,i){Cc(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const v=f[19];null!==v&&v.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function eg(n,i){if(!(128&i[2])){const o=i[11];o.destroyNode&&Cc(n,i,o,3,null,null),function Dc(n){let i=n[13];if(!i)return xf(n[1],n);for(;i;){let o=null;if(Qr(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==n;)Qr(i)&&xf(i[1],i),i=i[3];null===i&&(i=n),Qr(i)&&xf(i[1],i),o=i&&i[4]}i=o}}(i)}}function xf(n,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function Xm(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Nt)){const f=o[u+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const C=c[f[v]],P=f[v+1];try{P.call(C)}finally{}}else try{f.call(c)}finally{}}}}(n,i),function i_(n,i){const o=n.cleanup,u=i[7];let c=-1;if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const v=o[f+1],C="function"==typeof v?v(i):zr(i[v]),P=u[c=o[f+2]],Q=o[f+3];"boolean"==typeof Q?C.removeEventListener(o[f],P,Q):Q>=0?u[c=Q]():u[c=-Q].unsubscribe(),f+=2}else{const v=u[c=o[f+1]];o[f].call(v)}if(null!==u){for(let f=c+1;f<u.length;f++)(0,u[f])();i[7]=null}}(n,i),1===i[1].type&&i[11].destroy();const o=i[17];if(null!==o&&li(i[3])){o!==i[3]&&Af(o,i);const u=i[19];null!==u&&u.detachView(n)}!function hd(n){Sl.delete(n[20])}(i)}}function tg(n,i,o){return function wh(n,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=n.data[u.directiveStart].encapsulation;if(c===on.None||c===on.Emulated)return null}return zi(u,o)}(n,i.parent,o)}function mu(n,i,o,u,c){n.insertBefore(i,o,u,c)}function Pl(n,i,o){n.appendChild(i,o)}function ey(n,i,o,u,c){null!==u?mu(n,i,o,u,c):Pl(n,i,o)}function Rf(n,i){return n.parentNode(i)}function pd(n,i,o){return nl(n,i,o)}let nl=function Nl(n,i,o){return 40&n.type?zi(n,o):null};function Ih(n,i,o,u){const c=tg(n,u,i),f=i[11],C=pd(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let P=0;P<o.length;P++)ey(f,c,o[P],C,!1);else ey(f,c,o,C,!1)}function Pf(n,i){if(null!==i){const o=i.type;if(3&o)return zi(i,n);if(4&o)return bh(-1,n[i.index]);if(8&o){const u=i.child;if(null!==u)return Pf(n,u);{const c=n[i.index];return li(c)?bh(-1,c):zr(c)}}if(32&o)return yh(i,n)()||zr(n[i.index]);{const u=Nf(n,i);return null!==u?Array.isArray(u)?u[0]:Pf(vh(n[16]),u):Pf(n,i.next)}}return null}function Nf(n,i){return null!==i?n[16][6].projection[i.projection]:null}function bh(n,i){const o=10+n+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return Pf(u,c)}return i[7]}function Th(n,i,o,u,c,f,v){for(;null!=o;){const C=u[o.index],P=o.type;if(v&&0===i&&(C&&la(zr(C),u),o.flags|=4),64!=(64&o.flags))if(8&P)Th(n,i,o.child,u,c,f,!1),Ic(i,n,c,C,f);else if(32&P){const Q=yh(o,u);let ue;for(;ue=Q();)Ic(i,n,c,ue,f);Ic(i,n,c,C,f)}else 16&P?Dh(n,i,u,o,c,f):Ic(i,n,c,C,f);o=v?o.projectionNext:o.next}}function Cc(n,i,o,u,c,f){Th(o,u,n.firstChild,i,c,f,!1)}function Dh(n,i,o,u,c,f){const v=o[16],P=v[6].projection[u.projection];if(Array.isArray(P))for(let Q=0;Q<P.length;Q++)Ic(i,n,c,P[Q],f);else Th(n,i,P,v[3],c,f,!0)}function Ch(n,i,o){n.setAttribute(i,"style",o)}function ig(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function sg(n,i,o){let u=n.length;for(;;){const c=n.indexOf(i,o);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){const f=i.length;if(c+f===u||n.charCodeAt(c+f)<=32)return c}o=c+1}}const Sh="ng-template";function Ah(n,i,o){let u=0;for(;u<n.length;){let c=n[u++];if(o&&"class"===c){if(c=n[u],-1!==sg(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<n.length&&"string"==typeof(c=n[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function og(n){return 4===n.type&&n.value!==Sh}function iy(n,i,o){return i===(4!==n.type||o?n.value:Sh)}function ca(n,i,o){let u=4;const c=n.attrs||[],f=function Ol(n){for(let i=0;i<n.length;i++)if(ci(n[i]))return i;return n.length}(c);let v=!1;for(let C=0;C<i.length;C++){const P=i[C];if("number"!=typeof P){if(!v)if(4&u){if(u=2|1&u,""!==P&&!iy(n,P,o)||""===P&&1===i.length){if(Ja(u))return!1;v=!0}}else{const Q=8&u?P:i[++C];if(8&u&&null!==n.attrs){if(!Ah(n.attrs,Q,o)){if(Ja(u))return!1;v=!0}continue}const we=kf(8&u?"class":P,c,og(n),o);if(-1===we){if(Ja(u))return!1;v=!0;continue}if(""!==Q){let He;He=we>f?"":c[we+1].toLowerCase();const ct=8&u?He:null;if(ct&&-1!==sg(ct,Q,0)||2&u&&Q!==He){if(Ja(u))return!1;v=!0}}}}else{if(!v&&!Ja(u)&&!Ja(P))return!1;if(v&&Ja(P))continue;v=!1,u=P|1&u}}return Ja(u)||v}function Ja(n){return 0==(1&n)}function kf(n,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let f=!1;for(;c<i.length;){const v=i[c];if(v===n)return c;if(3===v||6===v)f=!0;else{if(1===v||2===v){let C=i[++c];for(;"string"==typeof C;)C=i[++c];continue}if(4===v)break;if(0===v){c+=4;continue}}c+=f?1:2}return-1}return function gd(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,n)}function xh(n,i,o=!1){for(let u=0;u<i.length;u++)if(ca(n,i[u],o))return!0;return!1}function oy(n,i){e:for(let o=0;o<i.length;o++){const u=i[o];if(n.length===u.length){for(let c=0;c<n.length;c++)if(n[c]!==u[c])continue e;return!0}}return!1}function kl(n,i){return n?":not("+i.trim()+")":i}function a_(n){let i=n[0],o=1,u=2,c="",f=!1;for(;o<n.length;){let v=n[o];if("string"==typeof v)if(2&u){const C=n[++o];c+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?c+="."+v:4&u&&(c+=" "+v);else""!==c&&!Ja(v)&&(i+=kl(f,c),c=""),u=v,f=f||!Ja(u);o++}return""!==c&&(i+=kl(f,c)),i}const Qn={};function ag(n){uy(Mn(),Tt(),Te()+n,!1)}function uy(n,i,o,u){if(!u)if(3==(3&i[2])){const f=n.preOrderCheckHooks;null!==f&&ne(i,f,o)}else{const f=n.preOrderHooks;null!==f&&ge(i,f,0,o)}ut(o)}function cg(n,i=null,o=null,u){const c=Ll(n,i,o,u);return c.resolveInjectorInitializers(),c}function Ll(n,i=null,o=null,u,c=new Set){const f=[o||Gt,hc(n)];return u=u||("object"==typeof n?void 0:G(n)),new ah(f,i||sd(),u||null,c)}let yu=(()=>{class n{static create(o,u){if(Array.isArray(o))return cg({name:""},u,o,"");{var c;const f=null!==(c=o.name)&&void 0!==c?c:"";return cg({name:f},o.parent,o.providers,f)}}}return n.THROW_IF_NOT_FOUND=Io,n.NULL=new rd,n.\u0275prov=wt({token:n,providedIn:"any",factory:()=>vi(ih)}),n.__NG_ELEMENT_ID__=-1,n})();function vd(n,i=jt.Default){const o=Tt();return null===o?vi(n,i):Po(Yr(),o,H(n),i)}function yg(){throw new Error("invalid")}function rl(n,i){return n<<17|i<<2}function da(n){return n>>17&32767}function zf(n){return 2|n}function Bu(n){return(131068&n)>>2}function Gf(n,i){return-131069&n|i<<2}function Ph(n){return 1|n}function Sg(n,i){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],f=o[u+1];if(-1!==f){const v=n.data[f];kr(c),v.contentQueries(2,i[f],f)}}}function Qf(n,i,o,u,c,f,v,C,P,Q,ue){const we=i.blueprint.slice();return we[0]=c,we[2]=76|u,(null!==ue||n&&1024&n[2])&&(we[2]|=1024),Bi(we),we[3]=we[15]=n,we[8]=o,we[10]=v||n&&n[10],we[11]=C||n&&n[11],we[12]=P||n&&n[12]||null,we[9]=Q||n&&n[9]||null,we[6]=f,we[20]=function tl(){return Al++}(),we[21]=ue,we[16]=2==i.type?n[16]:we,we}function Bl(n,i,o,u,c){let f=n.data[i];if(null===f)f=function xg(n,i,o,u,c){const f=ra(),v=Z(),P=n.data[i]=function Ng(n,i,o,u,c,f){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,o,i,u,c);return null===n.firstChild&&(n.firstChild=P),null!==f&&(v?null==f.child&&null!==P.parent&&(f.child=P):null===f.next&&(f.next=P)),P}(n,i,o,u,c),function pi(){return gn.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=o,f.value=u,f.attrs=c;const v=function xo(){const n=gn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return ms(f,!0),f}function Vl(n,i,o,u){if(0===o)return-1;const c=i.length;for(let f=0;f<o;f++)i.push(u),n.blueprint.push(u),n.data.push(null);return c}function Id(n,i,o){Gs(i);try{const u=n.viewQuery;null!==u&&Fh(1,u,o);const c=n.template;null!==c&&Rg(n,i,c,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Sg(n,i),n.staticViewQueries&&Fh(2,n.viewQuery,o);const f=n.components;null!==f&&function Ag(n,i){for(let o=0;o<i.length;o++)ky(n,i[o])}(i,f)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{i[2]&=-5,ee()}}function bd(n,i,o,u){const c=i[2];if(128!=(128&c)){Gs(i);try{Bi(i),function Rt(n){return gn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Rg(n,i,o,2,u);const v=3==(3&c);if(v){const Q=n.preOrderCheckHooks;null!==Q&&ne(i,Q,null)}else{const Q=n.preOrderHooks;null!==Q&&ge(i,Q,0,null),Pe(i,0)}if(function Ny(n){for(let i=Uu(n);null!==i;i=Ml(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],f=c[3];0==(512&c[2])&&Vi(f,1),c[2]|=512}}}(i),function w_(n){for(let i=Uu(n);null!==i;i=Ml(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];es(u)&&bd(c,u,c.template,u[8])}}(i),null!==n.contentQueries&&Sg(n,i),v){const Q=n.contentCheckHooks;null!==Q&&ne(i,Q)}else{const Q=n.contentHooks;null!==Q&&ge(i,Q,1),Pe(i,1)}!function Ul(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)ut(~c);else{const f=c,v=o[++u],C=o[++u];Jr(v,f),C(2,i[f])}}}finally{ut(-1)}}(n,i);const C=n.components;null!==C&&function v_(n,i){for(let o=0;o<i.length;o++)Oy(n,i[o])}(i,C);const P=n.viewQuery;if(null!==P&&Fh(2,P,u),v){const Q=n.viewCheckHooks;null!==Q&&ne(i,Q)}else{const Q=n.viewHooks;null!==Q&&ge(i,Q,2),Pe(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,Vi(i[3],-1))}finally{ee()}}}function Rg(n,i,o,u,c){const f=Te(),v=2&u;try{ut(-1),v&&i.length>22&&uy(n,i,22,!1),o(u,c)}finally{ut(f)}}function Pc(n,i,o){if(Js(i)){const c=i.directiveEnd;for(let f=i.directiveStart;f<c;f++){const v=n.data[f];v.contentQueries&&v.contentQueries(1,o[f],f)}}}function Lh(n,i,o){!Hs()||(function Td(n,i,o,u){const c=o.directiveStart,f=o.directiveEnd;n.firstCreatePass||mi(o,i),la(u,i);const v=o.initialInputs;for(let C=c;C<f;C++){const P=n.data[C],Q=Nr(P);Q&&Vg(i,o,P);const ue=No(i,n,C,o);la(ue,i),null!==v&&$g(0,C-c,ue,P,0,v),Q&&(nr(o.index,i)[8]=ue)}}(n,i,o,zi(o,i)),128==(128&o.flags)&&function Dd(n,i,o){const u=o.directiveStart,c=o.directiveEnd,f=o.index,v=function Wr(){return gn.lFrame.currentDirectiveIndex}();try{ut(f);for(let C=u;C<c;C++){const P=n.data[C],Q=i[C];ss(C),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&Ug(P,Q)}}finally{ut(-1),ss(v)}}(n,i,o))}function Mg(n,i,o=zi){const u=i.localNames;if(null!==u){let c=i.index+1;for(let f=0;f<u.length;f+=2){const v=u[f+1],C=-1===v?o(i,n):n[v];n[c++]=C}}}function Sy(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Yf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Yf(n,i,o,u,c,f,v,C,P,Q){const ue=22+u,we=ue+c,He=function Ay(n,i){const o=[];for(let u=0;u<i;u++)o.push(u<n?null:Qn);return o}(ue,we),ct="function"==typeof Q?Q():Q;return He[1]={type:n,blueprint:He,template:o,queries:null,viewQuery:C,declTNode:i,data:He.slice().fill(null,ue),bindingStartIndex:ue,expandoStartIndex:we,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:P,consts:ct,incompleteFirstPass:!1}}function xy(n,i,o,u){const c=Uy(i);null===o?c.push(u):(c.push(o),n.firstCreatePass&&ip(n).push(u,c.length-1))}function Ry(n,i,o){for(let u in n)if(n.hasOwnProperty(u)){const c=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function Jf(n,i){const u=i.directiveEnd,c=n.data,f=i.attrs,v=[];let C=null,P=null;for(let Q=i.directiveStart;Q<u;Q++){const ue=c[Q],we=ue.inputs,He=null===f||og(i)?null:Hg(we,f);v.push(He),C=Ry(we,Q,C),P=Ry(ue.outputs,Q,P)}null!==C&&(C.hasOwnProperty("class")&&(i.flags|=16),C.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=v,i.inputs=C,i.outputs=P}function va(n,i,o,u,c,f,v,C){const P=zi(i,o);let ue,Q=i.inputs;!C&&null!=Q&&(ue=Q[u])?(op(n,o,ue,u,c),Mi(i)&&Og(o,i.index)):3&i.type&&(u=function __(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),c=null!=v?v(c,i.value||"",u):c,f.setProperty(P,u,c))}function Og(n,i){const o=nr(i,n);16&o[2]||(o[2]|=32)}function jl(n,i,o,u){let c=!1;if(Hs()){const f=function Cd(n,i,o){const u=n.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const v=u[f];xh(o,v.selectors,!1)&&(c||(c=[]),ii(mi(o,i),n,v.type),Nr(v)?(Py(n,o),c.unshift(v)):c.push(v))}return c}(n,i,o),v=null===u?null:{"":-1};if(null!==f){c=!0,Xf(o,n.data.length,f.length);for(let ue=0;ue<f.length;ue++){const we=f[ue];we.providersResolver&&we.providersResolver(we)}let C=!1,P=!1,Q=Vl(n,i,f.length,null);for(let ue=0;ue<f.length;ue++){const we=f[ue];o.mergedAttrs=Ws(o.mergedAttrs,we.hostAttrs),ep(n,o,i,Q,we),Bg(Q,we,v),null!==we.contentQueries&&(o.flags|=8),(null!==we.hostBindings||null!==we.hostAttrs||0!==we.hostVars)&&(o.flags|=128);const He=we.type.prototype;!C&&(He.ngOnChanges||He.ngOnInit||He.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),C=!0),!P&&(He.ngOnChanges||He.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),P=!0),Q++}Jf(n,o)}v&&function E_(n,i,o){if(i){const u=n.localNames=[];for(let c=0;c<i.length;c+=2){const f=o[i[c+1]];if(null==f)throw new fe(-301,!1);u.push(i[c],f)}}}(o,u,v)}return o.mergedAttrs=Ws(o.mergedAttrs,o.attrs),c}function sl(n,i,o,u,c,f){const v=f.hostBindings;if(v){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const P=~i.index;(function Fg(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(C)!=P&&C.push(P),C.push(u,c,v)}}function Ug(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Py(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Bg(n,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=n;Nr(i)&&(o[""]=n)}}function Xf(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}function ep(n,i,o,u,c){n.data[u]=c;const f=c.factory||(c.factory=bs(c.type)),v=new Nt(f,Nr(c),vd);n.blueprint[u]=v,o[u]=v,sl(n,i,0,u,Vl(n,o,c.hostVars,Qn),c)}function Vg(n,i,o){const u=zi(i,n),c=Sy(o),f=n[10],v=np(n,Qf(n,c,null,o.onPush?32:16,u,i,f,f.createRenderer(u,o),null,null,null));n[i.index]=v}function Vu(n,i,o,u,c,f){const v=zi(n,i);!function jg(n,i,o,u,c,f,v){if(null==f)n.removeAttribute(i,c,o);else{const C=null==v?ve(f):v(f,u||"",c);n.setAttribute(i,c,C,o)}}(i[11],v,f,n.value,o,u,c)}function $g(n,i,o,u,c,f){const v=f[i];if(null!==v){const C=u.setInput;for(let P=0;P<v.length;){const Q=v[P++],ue=v[P++],we=v[P++];null!==C?u.setInput(o,we,Q,ue):o[ue]=we}}}function Hg(n,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;n.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,n[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function zg(n,i,o,u){return new Array(n,!0,!1,i,null,0,u,o,null,null)}function Oy(n,i){const o=nr(i,n);if(es(o)){const u=o[1];48&o[2]?bd(u,o,u.template,o[8]):o[5]>0&&tp(o)}}function tp(n){for(let u=Uu(n);null!==u;u=Ml(u))for(let c=10;c<u.length;c++){const f=u[c];if(es(f))if(512&f[2]){const v=f[1];bd(v,f,v.template,f[8])}else f[5]>0&&tp(f)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=nr(o[u],n);es(c)&&c[5]>0&&tp(c)}}function ky(n,i){const o=nr(i,n),u=o[1];(function I_(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(u,o),Id(u,o,o[8])}function np(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Gg(n){for(;n;){n[2]|=32;const i=vh(n);if(ws(n)&&!i)return n;n=i}return null}function rp(n,i,o,u=!0){const c=i[10];c.begin&&c.begin();try{bd(n,i,n.template,o)}catch(v){throw u&&sp(i,v),v}finally{c.end&&c.end()}}function Fh(n,i,o){kr(0),i(n,o)}function Uy(n){return n[7]||(n[7]=[])}function ip(n){return n.cleanup||(n.cleanup=[])}function sp(n,i){const o=n[9],u=o?o.get(pt,null):null;u&&u.handleError(i)}function op(n,i,o,u,c){for(let f=0;f<o.length;){const v=o[f++],C=o[f++],P=i[v],Q=n.data[v];null!==Q.setInput?Q.setInput(P,c,u,C):P[C]=c}}function vu(n,i,o){const u=Pi(i,n);!function Xp(n,i,o){n.setValue(i,o)}(n[11],u,o)}function Uh(n,i,o){let u=o?n.styles:null,c=o?n.classes:null,f=0;if(null!==i)for(let v=0;v<i.length;v++){const C=i[v];"number"==typeof C?f=C:1==f?c=B(c,C):2==f&&(u=B(u,C+": "+i[++v]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=c:n.classesWithoutHost=c}function ap(n,i,o,u,c=!1){for(;null!==o;){const f=i[o.index];if(null!==f&&u.push(zr(f)),li(f))for(let C=10;C<f.length;C++){const P=f[C],Q=P[1].firstChild;null!==Q&&ap(P[1],P,Q,u)}const v=o.type;if(8&v)ap(n,i,o.child,u);else if(32&v){const C=yh(o,i);let P;for(;P=C();)u.push(P)}else if(16&v){const C=Nf(i,o);if(Array.isArray(C))u.push(...C);else{const P=vh(i[16]);ap(P[1],P,C,u,!0)}}o=c?o.projectionNext:o.next}return u}class Nc{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return ap(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(li(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(Eh(i,u),ga(o,u))}this._attachedToViewContainer=!1}eg(this._lView[1],this._lView)}onDestroy(i){xy(this._lView[1],this._lView,null,i)}markForCheck(){Gg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){rp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Tc(n,i){Cc(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=i}}class b_ extends Nc{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;rp(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class Bh extends Ru{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=lt(i);return new Oc(o,this.ngModule)}}function Vy(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class T_{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){const c=this.injector.get(i,Hi,u);return c!==Hi||o===Hi?c:this.parentInjector.get(i,o,u)}}class Oc extends ch{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function md(n){return n.map(a_).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Vy(this.componentDef.inputs)}get outputs(){return Vy(this.componentDef.outputs)}create(i,o,u,c){var f;let v=(c=c||this.ngModule)instanceof cs?c:null===(f=c)||void 0===f?void 0:f.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const C=v?new T_(i,v):i,P=C.get(Nu,null);if(null===P)throw new fe(407,!1);const Q=C.get(vc,null),ue=P.createRenderer(null,this.componentDef),we=this.componentDef.selectors[0][0]||"div",He=u?function Pg(n,i,o){return n.selectRootElement(i,o===on.ShadowDom)}(ue,u,this.componentDef.encapsulation):Cf(P.createRenderer(null,this.componentDef),we,function Wg(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(we)),ct=this.componentDef.onPush?288:272,At=Yf(0,null,null,1,0,null,null,null,null,null),Vt=Qf(null,At,null,ct,null,null,P,ue,Q,C,null);let an,Tn;Gs(Vt);try{const ir=function Kg(n,i,o,u,c,f){const v=o[1];o[22]=n;const P=Bl(v,22,2,"#host",null),Q=P.mergedAttrs=i.hostAttrs;null!==Q&&(Uh(P,Q,!0),null!==n&&(Zi(c,n,Q),null!==P.classes&&ig(c,n,P.classes),null!==P.styles&&Ch(c,n,P.styles)));const ue=u.createRenderer(n,i),we=Qf(o,Sy(i),null,i.onPush?32:16,o[22],P,u,ue,f||null,null,null);return v.firstCreatePass&&(ii(mi(P,o),v,i.type),Py(v,P),Xf(P,o.length,1)),np(o,we),o[22]=we}(He,this.componentDef,Vt,P,ue);if(He)if(u)Zi(ue,He,["ng-version",Jo.full]);else{const{attrs:Ot,classes:Hn}=function ay(n){const i=[],o=[];let u=1,c=2;for(;u<n.length;){let f=n[u];if("string"==typeof f)2===c?""!==f&&i.push(f,n[++u]):8===c&&o.push(f);else{if(!Ja(c))break;c=f}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);Ot&&Zi(ue,He,Ot),Hn&&Hn.length>0&&ig(ue,He,Hn.join(" "))}if(Tn=So(At,22),void 0!==o){const Ot=Tn.projection=[];for(let Hn=0;Hn<this.ngContentSelectors.length;Hn++){const hi=o[Hn];Ot.push(null!=hi?Array.from(hi):null)}}an=function C_(n,i,o,u){const c=o[1],f=function Lg(n,i,o){const u=Yr();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),ep(n,u,i,Vl(n,i,1,null),o),Jf(n,u));const c=No(i,n,u.directiveStart,u);la(c,i);const f=zi(u,i);return f&&la(f,i),c}(c,o,i);if(n[8]=o[8]=f,null!==u)for(const C of u)C(f,i);if(i.contentQueries){const C=Yr();i.contentQueries(1,f,C.directiveStart)}const v=Yr();return!c.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(ut(v.index),sl(o[1],v,0,v.directiveStart,v.directiveEnd,i),Ug(i,f)),f}(ir,this.componentDef,Vt,[Zg]),Id(At,Vt,null)}finally{ee()}return new Sd(this.componentType,an,Aa(Tn,Vt),Vt,Tn)}}class Sd extends class od{}{constructor(i,o,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=o,this.hostView=this.changeDetectorRef=new b_(c),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[i])){const f=this._rootLView;op(f[1],f,c,i,o),Og(f,this._tNode.index)}}get injector(){return new xt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Zg(){const n=Yr();L(Tt()[1],n)}function Vh(n){let i=function ju(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;i;){let c;if(Nr(n))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new fe(903,!1);c=i.\u0275dir}if(c){if(o){u.push(c);const v=n;v.inputs=jh(n.inputs),v.declaredInputs=jh(n.declaredInputs),v.outputs=jh(n.outputs);const C=c.hostBindings;C&&Qg(n,C);const P=c.viewQuery,Q=c.contentQueries;if(P&&A_(n,P),Q&&x_(n,Q),K(n.inputs,c.inputs),K(n.declaredInputs,c.declaredInputs),K(n.outputs,c.outputs),Nr(c)&&c.data.animation){const ue=n.data;ue.animation=(ue.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let v=0;v<f.length;v++){const C=f[v];C&&C.ngInherit&&C(n),C===Vh&&(o=!1)}}i=Object.getPrototypeOf(i)}!function S_(n){let i=0,o=null;for(let u=n.length-1;u>=0;u--){const c=n[u];c.hostVars=i+=c.hostVars,c.hostAttrs=Ws(c.hostAttrs,o=Ws(o,c.hostAttrs))}}(u)}function jh(n){return n===$r?{}:n===Gt?[]:n}function A_(n,i){const o=n.viewQuery;n.viewQuery=o?(u,c)=>{i(u,c),o(u,c)}:i}function x_(n,i){const o=n.contentQueries;n.contentQueries=o?(u,c,f)=>{i(u,c,f),o(u,c,f)}:i}function Qg(n,i){const o=n.hostBindings;n.hostBindings=o?(u,c)=>{i(u,c),o(u,c)}:i}let Ad=null;function kc(){if(!Ad){const n=Yn.Symbol;if(n&&n.iterator)Ad=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Ad=u)}}}return Ad}function xd(n){return!!Xg(n)&&(Array.isArray(n)||!(n instanceof Map)&&kc()in n)}function Xg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Xa(n,i,o){return n[i]=o}function Uo(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function Lc(n,i,o,u){const c=Tt();return Uo(c,In(),i)&&(Mn(),Vu(ft(),c,n,i,o,u)),Lc}function $l(n,i,o,u){return Uo(n,In(),o)?i+ve(o)+u:Qn}function Fc(n,i,o,u,c,f){const C=function ol(n,i,o,u){const c=Uo(n,i,o);return Uo(n,i+1,u)||c}(n,function qt(){return gn.lFrame.bindingIndex}(),o,c);return kn(2),C?i+ve(o)+u+ve(c)+f:Qn}function Gh(n,i,o,u,c,f,v,C){const P=Tt(),Q=Mn(),ue=n+22,we=Q.firstCreatePass?function Gy(n,i,o,u,c,f,v,C,P){const Q=i.consts,ue=Bl(i,n,4,v||null,Ai(Q,C));jl(i,o,ue,Ai(Q,P)),L(i,ue);const we=ue.tViews=Yf(2,ue,u,c,f,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Q);return null!==i.queries&&(i.queries.template(i,ue),we.queries=i.queries.embeddedTView(ue)),ue}(ue,Q,P,i,o,u,c,f,v):Q.data[ue];ms(we,!1);const He=P[11].createComment("");Ih(Q,P,He,we),la(He,P),np(P,P[ue]=zg(He,P,He,we)),is(we)&&Lh(Q,P,we),null!=v&&Mg(P,we,C)}function fp(n){return to(function xe(){return gn.lFrame.contextLView}(),22+n)}function pp(n,i,o){const u=Tt();return Uo(u,In(),i)&&va(Mn(),ft(),u,n,i,u[11],o,!1),pp}function Hl(n,i,o,u,c){const v=c?"class":"style";op(n,o,i.inputs[v],v,u)}function gp(n,i,o,u){const c=Tt(),f=Mn(),v=22+n,C=c[11],P=c[v]=Cf(C,i,function y(){return gn.lFrame.currentNamespace}()),Q=f.firstCreatePass?function nm(n,i,o,u,c,f,v){const C=i.consts,Q=Bl(i,n,2,c,Ai(C,f));return jl(i,o,Q,Ai(C,v)),null!==Q.attrs&&Uh(Q,Q.attrs,!1),null!==Q.mergedAttrs&&Uh(Q,Q.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,Q),Q}(v,f,c,0,i,o,u):f.data[v];ms(Q,!0);const ue=Q.mergedAttrs;null!==ue&&Zi(C,P,ue);const we=Q.classes;null!==we&&ig(C,P,we);const He=Q.styles;return null!==He&&Ch(C,P,He),64!=(64&Q.flags)&&Ih(f,c,P,Q),0===function Ao(){return gn.lFrame.elementDepthCount}()&&la(P,c),function fa(){gn.lFrame.elementDepthCount++}(),is(Q)&&(Lh(f,c,Q),Pc(f,Q,c)),null!==u&&Mg(c,Q),gp}function mp(){let n=Yr();Z()?W():(n=n.parent,ms(n,!1));const i=n;!function uo(){gn.lFrame.elementDepthCount--}();const o=Mn();return o.firstCreatePass&&(L(o,n),Js(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function En(n){return 0!=(16&n.flags)}(i)&&Hl(o,i,Tt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function qr(n){return 0!=(32&n.flags)}(i)&&Hl(o,i,Tt(),i.stylesWithoutHost,!1),mp}function rm(n,i,o,u){return gp(n,i,o,u),mp(),rm}function yp(n,i,o){const u=Tt(),c=Mn(),f=n+22,v=c.firstCreatePass?function qy(n,i,o,u,c){const f=i.consts,v=Ai(f,u),C=Bl(i,n,8,"ng-container",v);return null!==v&&Uh(C,v,!0),jl(i,o,C,Ai(f,c)),null!==i.queries&&i.queries.elementStart(i,C),C}(f,c,u,i,o):c.data[f];ms(v,!0);const C=u[f]=u[11].createComment("");return Ih(c,u,C,v),la(C,u),is(v)&&(Lh(c,u,v),Pc(c,v,u)),null!=o&&Mg(u,v),yp}function Wh(){let n=Yr();const i=Mn();return Z()?W():(n=n.parent,ms(n,!1)),i.firstCreatePass&&(L(i,n),Js(n)&&i.queries.elementEnd(n)),Wh}function Zy(){return Tt()}function im(n){return!!n&&"function"==typeof n.then}function Qy(n){return!!n&&"function"==typeof n.subscribe}const sm=Qy;function vp(n,i,o,u){const c=Tt(),f=Mn(),v=Yr();return function om(n,i,o,u,c,f,v,C){const P=is(u),ue=n.firstCreatePass&&ip(n),we=i[8],He=Uy(i);let ct=!0;if(3&u.type||C){const an=zi(u,i),Tn=C?C(an):an,ir=He.length,Ot=C?hi=>C(zr(hi[u.index])):u.index;let Hn=null;if(!C&&P&&(Hn=function Yy(n,i,o,u){const c=n.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const v=c[f];if(v===o&&c[f+1]===u){const C=i[7],P=c[f+2];return C.length>P?C[P]:null}"string"==typeof v&&(f+=2)}return null}(n,i,c,u.index)),null!==Hn)(Hn.__ngLastListenerFn__||Hn).__ngNextListenerFn__=f,Hn.__ngLastListenerFn__=f,ct=!1;else{f=qh(u,i,we,f,!1);const hi=o.listen(Tn,c,f);He.push(f,hi),ue&&ue.push(c,Ot,ir,ir+1)}}else f=qh(u,i,we,f,!1);const At=u.outputs;let Vt;if(ct&&null!==At&&(Vt=At[c])){const an=Vt.length;if(an)for(let Tn=0;Tn<an;Tn+=2){const Ys=i[Vt[Tn]][Vt[Tn+1]].subscribe(f),cf=He.length;He.push(f,Ys),ue&&ue.push(c,u.index,cf,-(cf+1))}}}(f,c,c[11],v,n,i,0,u),vp}function am(n,i,o,u){try{return!1!==o(u)}catch(c){return sp(n,c),!1}}function qh(n,i,o,u,c){return function f(v){if(v===Function)return u;Gg(2&n.flags?nr(n.index,i):i);let P=am(i,0,u,v),Q=f.__ngNextListenerFn__;for(;Q;)P=am(i,0,Q,v)&&P,Q=Q.__ngNextListenerFn__;return c&&!1===P&&(v.preventDefault(),v.returnValue=!1),P}}function ni(n=1){return function k(n){return(gn.lFrame.contextLView=function re(n,i){for(;n>0;)i=i[15],n--;return i}(n,gn.lFrame.contextLView))[8]}(n)}function Jy(n,i){let o=null;const u=function sy(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(0==(1&o))return i[o+1]}return null}(n);for(let c=0;c<i.length;c++){const f=i[c];if("*"!==f){if(null===u?xh(n,f,!0):oy(u,f))return c}else o=c}return o}function um(n){const i=Tt()[16][6];if(!i.projection){const u=i.projection=I(n?n.length:1,null),c=u.slice();let f=i.child;for(;null!==f;){const v=n?Jy(f,n):0;null!==v&&(c[v]?c[v].projectionNext=f:u[v]=f,c[v]=f),f=f.next}}}function kd(n,i=0,o){const u=Tt(),c=Mn(),f=Bl(c,22+n,16,null,o||null);null===f.projection&&(f.projection=i),W(),64!=(64&f.flags)&&function ry(n,i,o){Dh(i[11],0,i,o,tg(n,o,i),pd(o.parent||i[6],o,i))}(c,u,f)}function Ep(n,i,o){return Ji(n,"",i,"",o),Ep}function Ji(n,i,o,u,c){const f=Tt(),v=$l(f,i,o,u);return v!==Qn&&va(Mn(),ft(),f,n,v,f[11],c,!1),Ji}function ds(n,i,o,u,c){const f=n[o+1],v=null===i;let C=u?da(f):Bu(f),P=!1;for(;0!==C&&(!1===P||v);){const ue=n[C+1];gE(n[C],i)&&(P=!0,n[C+1]=u?Ph(ue):zf(ue)),C=u?da(ue):Bu(ue)}P&&(n[o+1]=u?zf(f):Ph(f))}function gE(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ft(n,i)>=0}const Vo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Qs(n){return n.substring(Vo.key,Vo.keyEnd)}function rv(n,i){const o=Vo.textEnd;return o===i?-1:(i=Vo.keyEnd=function L_(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,Vo.key=i,o),Ld(n,i,o))}function Ld(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function hm(n,i,o){return wu(n,i,o,!1),hm}function tu(n,i){return wu(n,i,null,!0),tu}function ja(n,i){for(let o=function k_(n){return function ov(n){Vo.key=0,Vo.keyEnd=0,Vo.value=0,Vo.valueEnd=0,Vo.textEnd=n.length}(n),rv(n,Ld(n,0,Vo.textEnd))}(i);o>=0;o=rv(i,o))Se(n,Qs(i),!0)}function wu(n,i,o,u){const c=Tt(),f=Mn(),v=kn(2);f.firstUpdatePass&&pm(f,n,v,u),i!==Qn&&Uo(c,v,i)&&lv(f,f.data[Te()],c,c[11],n,c[v+1]=function cv(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=G(M(n)))),n}(i,o),u,v)}function fm(n,i){return i>=n.expandoStartIndex}function pm(n,i,o,u){const c=n.data;if(null===c[o+1]){const f=c[Te()],v=fm(n,o);zl(f,u)&&null===i&&!v&&(i=!1),i=function bp(n,i,o,u){const c=function Or(n){const i=gn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let f=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(o=Fd(o=jc(null,n,i,o,u),i.attrs,u),f=null);else{const v=i.directiveStylingLast;if(-1===v||n[v]!==c)if(o=jc(c,n,i,o,u),null===f){let P=function U_(n,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==Bu(u))return n[da(u)]}(n,i,u);void 0!==P&&Array.isArray(P)&&(P=jc(null,n,i,P[1],u),P=Fd(P,i.attrs,u),function Vc(n,i,o,u){n[da(o?i.classBindings:i.styleBindings)]=u}(n,i,u,P))}else f=function Tp(n,i,o){let u;const c=i.directiveEnd;for(let f=1+i.directiveStylingLast;f<c;f++)u=Fd(u,n[f].hostAttrs,o);return Fd(u,i.attrs,o)}(n,i,u)}return void 0!==f&&(u?i.residualClasses=f:i.residualStyles=f),o}(c,f,i,u),function N_(n,i,o,u,c,f){let v=f?i.classBindings:i.styleBindings,C=da(v),P=Bu(v);n[u]=o;let ue,Q=!1;if(Array.isArray(o)){const we=o;ue=we[1],(null===ue||Ft(we,ue)>0)&&(Q=!0)}else ue=o;if(c)if(0!==P){const He=da(n[C+1]);n[u+1]=rl(He,C),0!==He&&(n[He+1]=Gf(n[He+1],u)),n[C+1]=function Hf(n,i){return 131071&n|i<<17}(n[C+1],u)}else n[u+1]=rl(C,0),0!==C&&(n[C+1]=Gf(n[C+1],u)),C=u;else n[u+1]=rl(P,0),0===C?C=u:n[P+1]=Gf(n[P+1],u),P=u;Q&&(n[u+1]=zf(n[u+1])),ds(n,ue,u,!0),ds(n,ue,u,!1),function O_(n,i,o,u,c){const f=c?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof i&&Ft(f,i)>=0&&(o[u+1]=Ph(o[u+1]))}(i,ue,n,u,f),v=rl(C,P),f?i.classBindings=v:i.styleBindings=v}(c,f,i,o,v,u)}}function jc(n,i,o,u,c){let f=null;const v=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<v&&(f=i[C],u=Fd(u,f.hostAttrs,c),f!==n);)C++;return null!==n&&(o.directiveStylingLast=C),u}function Fd(n,i,o){const u=o?1:2;let c=-1;if(null!==i)for(let f=0;f<i.length;f++){const v=i[f];"number"==typeof v?c=v:c===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Se(n,v,!!o||i[++f]))}return void 0===n?null:n}function lv(n,i,o,u,c,f,v,C){if(!(3&i.type))return;const P=n.data,Q=P[C+1];Ud(function wy(n){return 1==(1&n)}(Q)?Dp(P,i,o,c,Bu(Q),v):void 0)||(Ud(f)||function $f(n){return 2==(2&n)}(Q)&&(f=Dp(P,null,o,c,C,v)),function rg(n,i,o,u,c){if(i)c?n.addClass(o,u):n.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:Fu.DashCase;null==c?n.removeStyle(o,u,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=Fu.Important),n.setStyle(o,u,c,f))}}(u,v,Pi(Te(),o),c,f))}function Dp(n,i,o,u,c,f){const v=null===i;let C;for(;c>0;){const P=n[c],Q=Array.isArray(P),ue=Q?P[1]:P,we=null===ue;let He=o[c+1];He===Qn&&(He=we?Gt:void 0);let ct=we?st(He,u):ue===u?He:void 0;if(Q&&!Ud(ct)&&(ct=st(P,u)),Ud(ct)&&(C=ct,v))return C;const At=n[c+1];c=v?da(At):Bu(At)}if(null!==i){let P=f?i.residualClasses:i.residualStyles;null!=P&&(C=st(P,u))}return C}function Ud(n){return void 0!==n}function zl(n,i){return 0!=(n.flags&(i?16:32))}function mm(n,i=""){const o=Tt(),u=Mn(),c=n+22,f=u.firstCreatePass?Bl(u,c,1,i,null):u.data[c],v=o[c]=function gu(n,i){return n.createText(i)}(o[11],i);Ih(u,o,v,f),ms(f,!1)}function Cp(n){return Bd("",n,""),Cp}function Bd(n,i,o){const u=Tt(),c=$l(u,n,i,o);return c!==Qn&&vu(u,Te(),c),Bd}function $c(n,i,o,u,c){const f=Tt(),v=Fc(f,n,i,o,u,c);return v!==Qn&&vu(f,Te(),v),$c}function vm(n,i,o){!function Iu(n,i,o,u){const c=Mn(),f=kn(2);c.firstUpdatePass&&pm(c,null,f,u);const v=Tt();if(o!==Qn&&Uo(v,f,o)){const C=c.data[Te()];if(zl(C,u)&&!fm(c,f)){let P=u?C.classesWithoutHost:C.stylesWithoutHost;null!==P&&(o=B(P,o||"")),Hl(c,C,v,o,u)}else!function B_(n,i,o,u,c,f,v,C){c===Qn&&(c=Gt);let P=0,Q=0,ue=0<c.length?c[0]:null,we=0<f.length?f[0]:null;for(;null!==ue||null!==we;){const He=P<c.length?c[P+1]:void 0,ct=Q<f.length?f[Q+1]:void 0;let Vt,At=null;ue===we?(P+=2,Q+=2,He!==ct&&(At=we,Vt=ct)):null===we||null!==ue&&ue<we?(P+=2,At=ue):(Q+=2,At=we,Vt=ct),null!==At&&lv(n,i,o,u,At,Vt,v,C),ue=P<c.length?c[P]:null,we=Q<f.length?f[Q]:null}}(c,C,v,v[11],v[f+1],v[f+1]=function gm(n,i,o){if(null==o||""===o)return Gt;const u=[],c=M(o);if(Array.isArray(c))for(let f=0;f<c.length;f++)n(u,c[f],!0);else if("object"==typeof c)for(const f in c)c.hasOwnProperty(f)&&n(u,f,c[f]);else"string"==typeof c&&i(u,c);return u}(n,i,o),u,f)}}(Se,ja,$l(Tt(),n,i,o),!0)}function $d(n,i,o){const u=Tt();return Uo(u,In(),i)&&va(Mn(),ft(),u,n,i,u[11],o,!0),$d}const Hd=void 0;var W_=["en",[["a","p"],["AM","PM"],Hd],[["AM","PM"],Hd,Hd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hd,"{1} 'at' {0}",Hd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function EE(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ef={};function ul(n){const i=function q_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=ll(i);if(o)return o;const u=i.split("-")[0];if(o=ll(u),o)return o;if("en"===u)return W_;throw new fe(701,!1)}function zd(n){return ul(n)[$n.PluralCase]}function ll(n){return n in ef||(ef[n]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[n]),ef[n]}var $n=(()=>(($n=$n||{})[$n.LocaleId=0]="LocaleId",$n[$n.DayPeriodsFormat=1]="DayPeriodsFormat",$n[$n.DayPeriodsStandalone=2]="DayPeriodsStandalone",$n[$n.DaysFormat=3]="DaysFormat",$n[$n.DaysStandalone=4]="DaysStandalone",$n[$n.MonthsFormat=5]="MonthsFormat",$n[$n.MonthsStandalone=6]="MonthsStandalone",$n[$n.Eras=7]="Eras",$n[$n.FirstDayOfWeek=8]="FirstDayOfWeek",$n[$n.WeekendRange=9]="WeekendRange",$n[$n.DateFormat=10]="DateFormat",$n[$n.TimeFormat=11]="TimeFormat",$n[$n.DateTimeFormat=12]="DateTimeFormat",$n[$n.NumberSymbols=13]="NumberSymbols",$n[$n.NumberFormats=14]="NumberFormats",$n[$n.CurrencyCode=15]="CurrencyCode",$n[$n.CurrencySymbol=16]="CurrencySymbol",$n[$n.CurrencyName=17]="CurrencyName",$n[$n.Currencies=18]="Currencies",$n[$n.Directionality=19]="Directionality",$n[$n.PluralCase=20]="PluralCase",$n[$n.ExtraData=21]="ExtraData",$n))();const Gd="en-US";let mv=Gd;function Om(n,i,o,u,c){if(n=H(n),Array.isArray(n))for(let f=0;f<n.length;f++)Om(n[f],i,o,u,c);else{const f=Mn(),v=Tt();let C=hu(n)?n:H(n.provide),P=uh(n);const Q=Yr(),ue=1048575&Q.providerIndexes,we=Q.directiveStart,He=Q.providerIndexes>>20;if(hu(n)||!n.multi){const ct=new Nt(P,c,vd),At=Lm(C,i,c?ue:ue+He,we);-1===At?(ii(mi(Q,v),f,C),Vp(f,n,i.length),i.push(C),Q.directiveStart++,Q.directiveEnd++,c&&(Q.providerIndexes+=1048576),o.push(ct),v.push(ct)):(o[At]=ct,v[At]=ct)}else{const ct=Lm(C,i,ue+He,we),At=Lm(C,i,ue,ue+He),Vt=ct>=0&&o[ct],an=At>=0&&o[At];if(c&&!an||!c&&!Vt){ii(mi(Q,v),f,C);const Tn=function s(n,i,o,u,c){const f=new Nt(n,o,vd);return f.multi=[],f.index=i,f.componentProviders=0,km(f,c,u&&!o),f}(c?e:r,o.length,c,u,P);!c&&an&&(o[At].providerFactory=Tn),Vp(f,n,i.length,0),i.push(C),Q.directiveStart++,Q.directiveEnd++,c&&(Q.providerIndexes+=1048576),o.push(Tn),v.push(Tn)}else Vp(f,n,ct>-1?ct:At,km(o[c?At:ct],P,!c&&u));!c&&u&&an&&o[At].componentProviders++}}}function Vp(n,i,o,u){const c=hu(i),f=function pc(n){return!!n.useClass}(i);if(c||f){const P=(f?H(i.useClass):i).prototype.ngOnDestroy;if(P){const Q=n.destroyHooks||(n.destroyHooks=[]);if(!c&&i.multi){const ue=Q.indexOf(o);-1===ue?Q.push(o,[u,P]):Q[ue+1].push(u,P)}else Q.push(o,P)}}}function km(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Lm(n,i,o,u){for(let c=o;c<u;c++)if(i[c]===n)return c;return-1}function r(n,i,o,u){return t(this.multi,[])}function e(n,i,o,u){const c=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=No(o,o[1],this.providerFactory.index,u);f=C.slice(0,v),t(c,f);for(let P=v;P<C.length;P++)f.push(C[P])}else f=[],t(c,f);return f}function t(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function a(n,i=[]){return o=>{o.providersResolver=(u,c)=>function jv(n,i,o){const u=Mn();if(u.firstCreatePass){const c=Nr(n);Om(o,u.data,u.blueprint,c,!0),Om(i,u.data,u.blueprint,c,!1)}}(u,c?c(n):n,i)}}class l{}class p{}function D(n,i){return new J(n,i??null)}class J extends l{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Bh(this);const u=Sn(i);this._bootstrapComponents=Lu(u.bootstrap),this._r3Injector=Ll(i,o,[{provide:l,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver}],G(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class le extends p{constructor(i){super(),this.moduleType=i}create(i){return new J(this.moduleType,i)}}class Me extends l{constructor(i,o,u){super(),this.componentFactoryResolver=new Bh(this),this.instance=null;const c=new ah([...i,{provide:l,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver}],o||sd(),u,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function at(n,i,o=null){return new Me(n,i,o).injector}let _t=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=fc(0,o.type),c=u.length>0?at([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=wt({token:n,providedIn:"environment",factory:()=>new n(vi(cs))}),n})();function Ut(n){n.getStandaloneInjector=i=>i.get(_t).getOrCreateStandaloneInjector(n)}function AE(n,i,o){const u=vt()+n,c=Tt();return c[u]===Qn?Xa(c,u,o?i.call(o):i()):function $h(n,i){return n[i]}(c,u)}function xE(n,i,o,u){return ME(Tt(),vt(),n,i,o,u)}function RE(n,i,o,u){return function kE(n,i,o,u,c,f){let v=i+o,C=!1;for(let P=0;P<c.length;P++)Uo(n,v++,c[P])&&(C=!0);return C?Xa(n,v,u.apply(f,c)):Fm(n,v)}(Tt(),vt(),n,i,o,u)}function Fm(n,i){const o=n[i];return o===Qn?void 0:o}function ME(n,i,o,u,c,f){const v=i+o;return Uo(n,v,c)?Xa(n,v+1,f?u.call(f,c):u(c)):Fm(n,v+1)}function LE(n,i){const o=Mn();let u;const c=n+22;o.firstCreatePass?(u=function aI(n,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(n===u.name)return u}}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const f=u.factory||(u.factory=bs(u.type)),v=jr(vd);try{const C=Ns(!1),P=f();return Ns(C),function Wy(n,i,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=u}(o,Tt(),c,P),P}finally{jr(v)}}function FE(n,i,o){const u=n+22,c=Tt(),f=to(c,u);return function Um(n,i){return n[1].data[i].pure}(c,u)?ME(c,vt(),i,f.transform,o,f):f.transform(o)}function _0(n){return i=>{setTimeout(n,void 0,i)}}const Jl=class hI extends g.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let c=i,f=o||(()=>null),v=u;if(i&&"object"==typeof i){var C,P,Q;const we=i;c=null===(C=we.next)||void 0===C?void 0:C.bind(we),f=null===(P=we.error)||void 0===P?void 0:P.bind(we),v=null===(Q=we.complete)||void 0===Q?void 0:Q.bind(we)}this.__isAsync&&(f=_0(f),c&&(c=_0(c)),v&&(v=_0(v)));const ue=super.subscribe({next:c,error:f,complete:v});return i instanceof x.w0&&i.add(ue),ue}};function fI(){return this._results[kc()]()}class $v{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=kc(),u=$v.prototype;u[o]||(u[o]=fI)}get changes(){return this._changes||(this._changes=new Jl)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=Lt(i);(this._changesDetected=!function Yi(n,i,o){if(n.length!==i.length)return!1;for(let u=0;u<n.length;u++){let c=n[u],f=i[u];if(o&&(c=o(c),f=o(f)),f!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Bm=(()=>{class n{}return n.__NG_ELEMENT_ID__=mI,n})();const pI=Bm,gI=class extends pI{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i,o){const u=this._declarationTContainer.tViews,c=Qf(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(c[19]=v.createEmbeddedView(u)),Id(u,c,i),new Nc(c)}};function mI(){return Hv(Yr(),Tt())}function Hv(n,i){return 4&n.type?new gI(i,n,Aa(n,i)):null}let zv=(()=>{class n{}return n.__NG_ELEMENT_ID__=yI,n})();function yI(){return VE(Yr(),Tt())}const vI=zv,UE=class extends vI{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Aa(this._hostTNode,this._hostLView)}get injector(){return new xt(this._hostTNode,this._hostLView)}get parentInjector(){const i=Zs(this._hostTNode,this._hostLView);if(as(i)){const o=Wi(i,this._hostLView),u=Mo(i);return new xt(o[1].data[u+8],o)}return new xt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=BE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){let c,f;"number"==typeof u?c=u:null!=u&&(c=u.index,f=u.injector);const v=i.createEmbeddedView(o||{},f);return this.insert(v,c),v}createComponent(i,o,u,c,f){const v=i&&!function wr(n){return"function"==typeof n}(i);let C;if(v)C=o;else{const we=o||{};C=we.index,u=we.injector,c=we.projectableNodes,f=we.environmentInjector||we.ngModuleRef}const P=v?i:new Oc(lt(i)),Q=u||this.parentInjector;if(!f&&null==P.ngModule){const He=(v?Q:this.parentInjector).get(cs,null);He&&(f=He)}const ue=P.create(Q,c,void 0,f);return this.insert(ue.hostView,C),ue}insert(i,o){const u=i._lView,c=u[1];if(function wi(n){return li(n[3])}(u)){const ue=this.indexOf(i);if(-1!==ue)this.detach(ue);else{const we=u[3],He=new UE(we,we[6],we[3]);He.detach(He.indexOf(i))}}const f=this._adjustIndex(o),v=this._lContainer;!function _h(n,i,o,u){const c=10+u,f=o.length;u>0&&(o[c-1][4]=i),u<f-10?(i[4]=o[c],Wa(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const v=i[17];null!==v&&o!==v&&function Jm(n,i){const o=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===o?n[9]=[i]:o.push(i)}(v,i);const C=i[19];null!==C&&C.insertView(n),i[2]|=64}(c,u,v,f);const C=bh(f,v),P=u[11],Q=Rf(P,v[7]);return null!==Q&&function bc(n,i,o,u,c,f){u[0]=c,u[6]=i,Cc(n,u,o,1,c,f)}(c,v[6],P,u,Q,C),i.attachToViewContainerRef(),Wa(E0(v),f,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=BE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=Eh(this._lContainer,o);u&&(ga(E0(this._lContainer),o),eg(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=Eh(this._lContainer,o);return u&&null!=ga(E0(this._lContainer),o)?new Nc(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function BE(n){return n[8]}function E0(n){return n[8]||(n[8]=[])}function VE(n,i){let o;const u=i[n.index];if(li(u))o=u;else{let c;if(8&n.type)c=zr(u);else{const f=i[11];c=f.createComment("");const v=zi(n,i);mu(f,Rf(f,v),c,function s_(n,i){return n.nextSibling(i)}(f,v),!1)}i[n.index]=o=zg(u,i,c,n),np(i,o)}return new UE(o,n,i)}class w0{constructor(i){this.queryList=i,this.matches=null}clone(){return new w0(this.queryList)}setDirty(){this.queryList.setDirty()}}class I0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let f=0;f<u;f++){const v=o.getByIndex(f);c.push(this.queries[v.indexInDeclarationView].clone())}return new I0(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==ZE(i,o).matches&&this.queries[o].setDirty()}}class jE{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class b0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(i,c);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new b0(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class T0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new T0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(i,o,wI(o,f)),this.matchTNodeWithReadOption(i,o,ei(o,i,f,!1,!1))}else u===Bm?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,ei(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Ju||c===zv||c===Bm&&4&o.type)this.addMatch(o.index,-2);else{const f=ei(o,i,c,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function wI(n,i){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function bI(n,i,o,u){return-1===o?function II(n,i){return 11&n.type?Aa(n,i):4&n.type?Hv(n,i):null}(i,n):-2===o?function TI(n,i,o){return o===Ju?Aa(i,n):o===Bm?Hv(i,n):o===zv?VE(i,n):void 0}(n,i,u):No(n,n[1],o,i)}function $E(n,i,o,u){const c=i[19].queries[u];if(null===c.matches){const f=n.data,v=o.matches,C=[];for(let P=0;P<v.length;P+=2){const Q=v[P];C.push(Q<0?null:bI(i,f[Q],v[P+1],o.metadata.read))}c.matches=C}return c.matches}function D0(n,i,o,u){const c=n.queries.getByIndex(o),f=c.matches;if(null!==f){const v=$E(n,i,c,o);for(let C=0;C<f.length;C+=2){const P=f[C];if(P>0)u.push(v[C/2]);else{const Q=f[C+1],ue=i[-P];for(let we=10;we<ue.length;we++){const He=ue[we];He[17]===He[3]&&D0(He[1],He,Q,u)}if(null!==ue[9]){const we=ue[9];for(let He=0;He<we.length;He++){const ct=we[He];D0(ct[1],ct,Q,u)}}}}}return u}function HE(n){const i=Tt(),o=Mn(),u=zs();kr(u+1);const c=ZE(o,u);if(n.dirty&&function Ma(n){return 4==(4&n[2])}(i)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{const f=c.crossesNgTemplate?D0(o,i,u,[]):$E(o,i,c,u);n.reset(f,Xu),n.notifyOnChanges()}return!0}return!1}function zE(n,i,o){const u=Mn();u.firstCreatePass&&(KE(u,new jE(n,i,o),-1),2==(2&i)&&(u.staticViewQueries=!0)),qE(u,Tt(),i)}function GE(n,i,o,u){const c=Mn();if(c.firstCreatePass){const f=Yr();KE(c,new jE(i,o,u),f.index),function CI(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(c,n),2==(2&o)&&(c.staticContentQueries=!0)}qE(c,Tt(),o)}function WE(){return function DI(n,i){return n[19].queries[i].queryList}(Tt(),zs())}function qE(n,i,o){const u=new $v(4==(4&o));xy(n,i,u,u.destroy),null===i[19]&&(i[19]=new I0),i[19].queries.push(new w0(u))}function KE(n,i,o){null===n.queries&&(n.queries=new b0),n.queries.track(new T0(i,o))}function ZE(n,i){return n.queries.getByIndex(i)}function QE(n,i){return Hv(n,i)}const WI=Ta("Input",n=>({bindingPropertyName:n})),qI=Ta("Output",n=>({bindingPropertyName:n}));function Wv(...n){}const gw=new Ii("Application Initializer");let qv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Wv,this.reject=Wv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(im(f))o.push(f);else if(sm(f)){const v=new Promise((C,P)=>{f.subscribe({complete:C,error:P})});o.push(v)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(vi(gw,8))},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mw=new Ii("AppId",{providedIn:"root",factory:function yw(){return`${R0()}${R0()}${R0()}`}});function R0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vw=new Ii("Platform Initializer"),KI=new Ii("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_w=new Ii("appBootstrapListener"),ZI=new Ii("AnimationModuleType");let QI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Kv=new Ii("LocaleId",{providedIn:"root",factory:()=>ou(Kv,jt.Optional|jt.SkipSelf)||function YI(){return typeof $localize<"u"&&$localize.locale||Gd}()}),JI=new Ii("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class XI{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let eb=(()=>{class n{compileModuleSync(o){return new le(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),f=Lu(Sn(o).declarations).reduce((v,C)=>{const P=lt(C);return P&&v.push(new Oc(P)),v},[]);return new XI(u,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rb=(()=>Promise.resolve(0))();function M0(n){typeof Zone>"u"?rb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Hu{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jl(!1),this.onMicrotaskEmpty=new Jl(!1),this.onStable=new Jl(!1),this.onError=new Jl(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function ib(){let n=Yn.requestAnimationFrame,i=Yn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function ab(n){const i=()=>{!function ob(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,N0(n),n.isCheckStableRunning=!0,P0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),N0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,f,v,C)=>{try{return Iw(n),o.invokeTask(c,f,v,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&i(),bw(n)}},onInvoke:(o,u,c,f,v,C,P)=>{try{return Iw(n),o.invoke(c,f,v,C,P)}finally{n.shouldCoalesceRunChangeDetection&&i(),bw(n)}},onHasTask:(o,u,c,f)=>{o.hasTask(c,f),u===c&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,N0(n),P0(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,c,f)=>(o.handleError(c,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hu.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(Hu.isInAngularZone())throw new fe(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+c,i,sb,Wv,Wv);try{return f.runTask(v,o,u)}finally{f.cancelTask(v)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const sb={};function P0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function N0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Iw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bw(n){n._nesting--,P0(n)}class ub{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jl,this.onMicrotaskEmpty=new Jl,this.onStable=new Jl,this.onError=new Jl}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}const Tw=new Ii(""),Dw=new Ii("");let O0,lb=(()=>{class n{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,O0||(function cb(n){O0=n}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hu.assertNotInAngularZone(),M0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())M0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}}return n.\u0275fac=function(o){return new(o||n)(vi(Hu),vi(Cw),vi(Dw))},n.\u0275prov=wt({token:n,factory:n.\u0275fac}),n})(),Cw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){var c,f;return null!==(c=null===(f=O0)||void 0===f?void 0:f.findTestabilityInTree(this,o,u))&&void 0!==c?c:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),qd=null;const Sw=new Ii("AllowMultipleToken"),k0=new Ii("PlatformDestroyListeners");class fb{constructor(i,o){this.name=i,this.token=o}}function xw(n,i,o=[]){const u=`Platform: ${i}`,c=new Ii(u);return(f=[])=>{let v=L0();if(!v||v.injector.get(Sw,!1)){const C=[...o,...f,{provide:c,useValue:!0}];n?n(C):function pb(n){if(qd&&!qd.get(Sw,!1))throw new fe(400,!1);qd=n;const i=n.get(Mw);(function Aw(n){const i=n.get(vw,null);i&&i.forEach(o=>o())})(n)}(function Rw(n=[],i){return yu.create({name:i,providers:[{provide:gc,useValue:"platform"},{provide:k0,useValue:new Set([()=>qd=null])},...n]})}(C,u))}return function mb(n){const i=L0();if(!i)throw new fe(401,!1);return i}()}}function L0(){var n,i;return null!==(n=null===(i=qd)||void 0===i?void 0:i.get(Mw))&&void 0!==n?n:null}let Mw=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function Nw(n,i){let o;return o="noop"===n?new ub:("zone.js"===n?void 0:n)||new Hu(i),o}(u?.ngZone,function Pw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),f=[{provide:Hu,useValue:c}];return c.run(()=>{const v=yu.create({providers:f,parent:this.injector,name:o.moduleType.name}),C=o.create(v),P=C.injector.get(pt,null);if(!P)throw new fe(402,!1);return c.runOutsideAngular(()=>{const Q=c.onError.subscribe({next:ue=>{P.handleError(ue)}});C.onDestroy(()=>{Qv(this._modules,C),Q.unsubscribe()})}),function Ow(n,i,o){try{const u=o();return im(u)?u.catch(c=>{throw i.runOutsideAngular(()=>n.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>n.handleError(u)),u}}(P,c,()=>{const Q=C.injector.get(qv);return Q.runInitializers(),Q.donePromise.then(()=>(function yv(n){Dn(n,"Expected localeId to be defined"),"string"==typeof n&&(mv=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Kv,Gd)||Gd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,u=[]){const c=kw({},u);return function db(n,i,o){const u=new le(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(o){const u=o.injector.get(Zv);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new fe(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(k0,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(vi(yu))},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function kw(n,i){return Array.isArray(i)?i.reduce(kw,n):{...n,...i}}let Zv=(()=>{class n{constructor(o,u,c){this._zone=o,this._injector=u,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new S.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new S.y(C=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{Hu.assertNotInAngularZone(),M0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const Q=this._zone.onUnstable.subscribe(()=>{Hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{P.unsubscribe(),Q.unsubscribe()}});this.isStable=(0,z.T)(f,v.pipe((0,N.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const c=o instanceof ch;if(!this._injector.get(qv).done)throw!c&&fn(o),new fe(405,false);let v;v=c?o:this._injector.get(Ru).resolveComponentFactory(o),this.componentTypes.push(v.componentType);const C=function hb(n){return n.isBoundToModule}(v)?void 0:this._injector.get(l),Q=v.create(yu.NULL,[],u||v.selector,C),ue=Q.location.nativeElement,we=Q.injector.get(Tw,null);return we?.registerApplication(ue),Q.onDestroy(()=>{this.detachView(Q.hostView),Qv(this.components,Q),we?.unregisterApplication(ue)}),this._loadComponent(Q),Q}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Qv(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(_w,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Qv(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new fe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(vi(Hu),vi(cs),vi(pt))},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qv(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let Fw=!0,Uw=!1;function vb(){return Uw=!0,Fw}function _b(){if(Uw)throw new Error("Cannot enable prod mode after platform setup.");Fw=!1}let Eb=(()=>{class n{}return n.__NG_ELEMENT_ID__=wb,n})();function wb(n){return function Ib(n,i,o){if(Mi(n)&&!o){const u=nr(n.index,i);return new Nc(u,u)}return 47&n.type?new Nc(i[16],i):null}(Yr(),Tt(),16==(16&n))}class $w{constructor(){}supports(i){return xd(i)}create(i){return new Ab(i)}}const Sb=(n,i)=>i;class Ab{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Sb}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,f=null;for(;o||u;){const v=!u||o&&o.currentIndex<zw(u,c,f)?o:u,C=zw(v,c,f),P=v.currentIndex;if(v===u)c--,u=u._nextRemoved;else if(o=o._next,null==v.previousIndex)c++;else{f||(f=[]);const Q=C-c,ue=P-c;if(Q!=ue){for(let He=0;He<Q;He++){const ct=He<f.length?f[He]:f[He]=0,At=ct+He;ue<=At&&At<Q&&(f[He]=ct+1)}f[v.previousIndex]=ue-Q}}C!==P&&i(v,C,P)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!xd(i))throw new fe(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,f,v,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let C=0;C<this.length;C++)f=i[C],v=this._trackByFn(C,f),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,f,v,C)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,v,C),u=!0),o=o._next}else c=0,function Hy(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[kc()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,C=>{v=this._trackByFn(c,C),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,C,v,c)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,v,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let f;return null===i?f=this._itTail:(f=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,f,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,f,c)):i=this._addAfter(new xb(o,u),f,c),i}_verifyReinsertion(i,o,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?i=this._reinsertAfter(f,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,f=i._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Hw),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class xb{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Rb{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Hw{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new Rb,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zw(n,i,o){const u=n.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class Gw{constructor(){}supports(i){return i instanceof Map||Xg(i)}create(){return new Mb}}class Mb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Xg(i)))throw new fe(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const f=c._prev,v=c._next;return f&&(f._next=v),v&&(v._prev=f),c._next=null,c._prev=null,c}const u=new Pb(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class Pb{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ww(){return new j0([new $w])}let j0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||Ww()),deps:[[n,new Su,new uu]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new fe(901,!1)}}return n.\u0275prov=wt({token:n,providedIn:"root",factory:Ww}),n})();function qw(){return new $0([new Gw])}let $0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||qw()),deps:[[n,new Su,new uu]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new fe(901,!1)}}return n.\u0275prov=wt({token:n,providedIn:"root",factory:qw}),n})();const kb=xw(null,"core",[]);let Lb=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(vi(Zv))},n.\u0275mod=ai({type:n}),n.\u0275inj=Cn({}),n})();function Fb(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},1481:(Bt,Re,j)=>{"use strict";j.d(Re,{Dx:()=>mr,H7:()=>Mt,b2:()=>ri,q6:()=>zn,se:()=>Qe});var g=j(6895),x=j(4650);class S extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class z extends S{static makeCurrent(){(0,g.HT)(new z)}onAndCancel(De,me,Ge){return De.addEventListener(me,Ge,!1),()=>{De.removeEventListener(me,Ge,!1)}}dispatchEvent(De,me){De.dispatchEvent(me)}remove(De){De.parentNode&&De.parentNode.removeChild(De)}createElement(De,me){return(me=me||this.getDefaultDocument()).createElement(De)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(De){return De.nodeType===Node.ELEMENT_NODE}isShadowRoot(De){return De instanceof DocumentFragment}getGlobalEventTarget(De,me){return"window"===me?window:"document"===me?De:"body"===me?De.body:null}getBaseHref(De){const me=function O(){return N=N||document.querySelector("base"),N?N.getAttribute("href"):null}();return null==me?null:function G(Ce){K=K||document.createElement("a"),K.setAttribute("href",Ce);const De=K.pathname;return"/"===De.charAt(0)?De:`/${De}`}(me)}resetBaseElement(){N=null}getUserAgent(){return window.navigator.userAgent}getCookie(De){return(0,g.Mx)(document.cookie,De)}}let K,N=null;const B=new x.OlP("TRANSITION_ID"),F=[{provide:x.ip1,useFactory:function U(Ce,De,me){return()=>{me.get(x.CZH).donePromise.then(()=>{const Ge=(0,g.q)(),ht=De.querySelectorAll(`style[ng-transition="${Ce}"]`);for(let kt=0;kt<ht.length;kt++)Ge.remove(ht[kt])})}},deps:[B,g.K0,x.zs3],multi:!0}];let he=(()=>{class Ce{build(){return new XMLHttpRequest}}return Ce.\u0275fac=function(me){return new(me||Ce)},Ce.\u0275prov=x.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();const se=new x.OlP("EventManagerPlugins");let fe=(()=>{class Ce{constructor(me,Ge){this._zone=Ge,this._eventNameToPlugin=new Map,me.forEach(ht=>ht.manager=this),this._plugins=me.slice().reverse()}addEventListener(me,Ge,ht){return this._findPluginFor(Ge).addEventListener(me,Ge,ht)}addGlobalEventListener(me,Ge,ht){return this._findPluginFor(Ge).addGlobalEventListener(me,Ge,ht)}getZone(){return this._zone}_findPluginFor(me){const Ge=this._eventNameToPlugin.get(me);if(Ge)return Ge;const ht=this._plugins;for(let kt=0;kt<ht.length;kt++){const ln=ht[kt];if(ln.supports(me))return this._eventNameToPlugin.set(me,ln),ln}throw new Error(`No event manager plugin found for event ${me}`)}}return Ce.\u0275fac=function(me){return new(me||Ce)(x.LFG(se),x.LFG(x.R0b))},Ce.\u0275prov=x.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();class Ie{constructor(De){this._doc=De}addGlobalEventListener(De,me,Ge){const ht=(0,g.q)().getGlobalEventTarget(this._doc,De);if(!ht)throw new Error(`Unsupported event target ${ht} for event ${me}`);return this.addEventListener(ht,me,Ge)}}let ve=(()=>{class Ce{constructor(){this._stylesSet=new Set}addStyles(me){const Ge=new Set;me.forEach(ht=>{this._stylesSet.has(ht)||(this._stylesSet.add(ht),Ge.add(ht))}),this.onStylesAdded(Ge)}onStylesAdded(me){}getAllStyles(){return Array.from(this._stylesSet)}}return Ce.\u0275fac=function(me){return new(me||Ce)},Ce.\u0275prov=x.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})(),de=(()=>{class Ce extends ve{constructor(me){super(),this._doc=me,this._hostNodes=new Map,this._hostNodes.set(me.head,[])}_addStylesToHost(me,Ge,ht){me.forEach(kt=>{const ln=this._doc.createElement("style");ln.textContent=kt,ht.push(Ge.appendChild(ln))})}addHost(me){const Ge=[];this._addStylesToHost(this._stylesSet,me,Ge),this._hostNodes.set(me,Ge)}removeHost(me){const Ge=this._hostNodes.get(me);Ge&&Ge.forEach(ae),this._hostNodes.delete(me)}onStylesAdded(me){this._hostNodes.forEach((Ge,ht)=>{this._addStylesToHost(me,ht,Ge)})}ngOnDestroy(){this._hostNodes.forEach(me=>me.forEach(ae))}}return Ce.\u0275fac=function(me){return new(me||Ce)(x.LFG(g.K0))},Ce.\u0275prov=x.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();function ae(Ce){(0,g.q)().remove(Ce)}const je={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ye=/%COMP%/g;function be(Ce,De,me){for(let Ge=0;Ge<De.length;Ge++){let ht=De[Ge];Array.isArray(ht)?be(Ce,ht,me):(ht=ht.replace(ye,Ce),me.push(ht))}return me}function ke(Ce){return De=>{if("__ngUnwrap__"===De)return Ce;!1===Ce(De)&&(De.preventDefault(),De.returnValue=!1)}}let Qe=(()=>{class Ce{constructor(me,Ge,ht){this.eventManager=me,this.sharedStylesHost=Ge,this.appId=ht,this.rendererByCompId=new Map,this.defaultRenderer=new Et(me)}createRenderer(me,Ge){if(!me||!Ge)return this.defaultRenderer;switch(Ge.encapsulation){case x.ifc.Emulated:{let ht=this.rendererByCompId.get(Ge.id);return ht||(ht=new Dn(this.eventManager,this.sharedStylesHost,Ge,this.appId),this.rendererByCompId.set(Ge.id,ht)),ht.applyToHost(me),ht}case 1:case x.ifc.ShadowDom:return new St(this.eventManager,this.sharedStylesHost,me,Ge);default:if(!this.rendererByCompId.has(Ge.id)){const ht=be(Ge.id,Ge.styles,[]);this.sharedStylesHost.addStyles(ht),this.rendererByCompId.set(Ge.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ce.\u0275fac=function(me){return new(me||Ce)(x.LFG(fe),x.LFG(de),x.LFG(x.AFp))},Ce.\u0275prov=x.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();class Et{constructor(De){this.eventManager=De,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(De,me){return me?document.createElementNS(je[me]||me,De):document.createElement(De)}createComment(De){return document.createComment(De)}createText(De){return document.createTextNode(De)}appendChild(De,me){(Ln(De)?De.content:De).appendChild(me)}insertBefore(De,me,Ge){De&&(Ln(De)?De.content:De).insertBefore(me,Ge)}removeChild(De,me){De&&De.removeChild(me)}selectRootElement(De,me){let Ge="string"==typeof De?document.querySelector(De):De;if(!Ge)throw new Error(`The selector "${De}" did not match any elements`);return me||(Ge.textContent=""),Ge}parentNode(De){return De.parentNode}nextSibling(De){return De.nextSibling}setAttribute(De,me,Ge,ht){if(ht){me=ht+":"+me;const kt=je[ht];kt?De.setAttributeNS(kt,me,Ge):De.setAttribute(me,Ge)}else De.setAttribute(me,Ge)}removeAttribute(De,me,Ge){if(Ge){const ht=je[Ge];ht?De.removeAttributeNS(ht,me):De.removeAttribute(`${Ge}:${me}`)}else De.removeAttribute(me)}addClass(De,me){De.classList.add(me)}removeClass(De,me){De.classList.remove(me)}setStyle(De,me,Ge,ht){ht&(x.JOm.DashCase|x.JOm.Important)?De.style.setProperty(me,Ge,ht&x.JOm.Important?"important":""):De.style[me]=Ge}removeStyle(De,me,Ge){Ge&x.JOm.DashCase?De.style.removeProperty(me):De.style[me]=""}setProperty(De,me,Ge){De[me]=Ge}setValue(De,me){De.nodeValue=me}listen(De,me,Ge){return"string"==typeof De?this.eventManager.addGlobalEventListener(De,me,ke(Ge)):this.eventManager.addEventListener(De,me,ke(Ge))}}function Ln(Ce){return"TEMPLATE"===Ce.tagName&&void 0!==Ce.content}class Dn extends Et{constructor(De,me,Ge,ht){super(De),this.component=Ge;const kt=be(ht+"-"+Ge.id,Ge.styles,[]);me.addStyles(kt),this.contentAttr=function Fe(Ce){return"_ngcontent-%COMP%".replace(ye,Ce)}(ht+"-"+Ge.id),this.hostAttr=function Ne(Ce){return"_nghost-%COMP%".replace(ye,Ce)}(ht+"-"+Ge.id)}applyToHost(De){super.setAttribute(De,this.hostAttr,"")}createElement(De,me){const Ge=super.createElement(De,me);return super.setAttribute(Ge,this.contentAttr,""),Ge}}class St extends Et{constructor(De,me,Ge,ht){super(De),this.sharedStylesHost=me,this.hostEl=Ge,this.shadowRoot=Ge.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const kt=be(ht.id,ht.styles,[]);for(let ln=0;ln<kt.length;ln++){const Je=document.createElement("style");Je.textContent=kt[ln],this.shadowRoot.appendChild(Je)}}nodeOrShadowRoot(De){return De===this.hostEl?this.shadowRoot:De}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(De,me){return super.appendChild(this.nodeOrShadowRoot(De),me)}insertBefore(De,me,Ge){return super.insertBefore(this.nodeOrShadowRoot(De),me,Ge)}removeChild(De,me){return super.removeChild(this.nodeOrShadowRoot(De),me)}parentNode(De){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(De)))}}let Nn=(()=>{class Ce extends Ie{constructor(me){super(me)}supports(me){return!0}addEventListener(me,Ge,ht){return me.addEventListener(Ge,ht,!1),()=>this.removeEventListener(me,Ge,ht)}removeEventListener(me,Ge,ht){return me.removeEventListener(Ge,ht)}}return Ce.\u0275fac=function(me){return new(me||Ce)(x.LFG(g.K0))},Ce.\u0275prov=x.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();const On=["alt","control","meta","shift"],rn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wt={alt:Ce=>Ce.altKey,control:Ce=>Ce.ctrlKey,meta:Ce=>Ce.metaKey,shift:Ce=>Ce.shiftKey};let Wn=(()=>{class Ce extends Ie{constructor(me){super(me)}supports(me){return null!=Ce.parseEventName(me)}addEventListener(me,Ge,ht){const kt=Ce.parseEventName(Ge),ln=Ce.eventCallback(kt.fullKey,ht,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(me,kt.domEventName,ln))}static parseEventName(me){const Ge=me.toLowerCase().split("."),ht=Ge.shift();if(0===Ge.length||"keydown"!==ht&&"keyup"!==ht)return null;const kt=Ce._normalizeKey(Ge.pop());let ln="",Je=Ge.indexOf("code");if(Je>-1&&(Ge.splice(Je,1),ln="code."),On.forEach(bt=>{const Ct=Ge.indexOf(bt);Ct>-1&&(Ge.splice(Ct,1),ln+=bt+".")}),ln+=kt,0!=Ge.length||0===kt.length)return null;const Ze={};return Ze.domEventName=ht,Ze.fullKey=ln,Ze}static matchEventFullKeyCode(me,Ge){let ht=rn[me.key]||me.key,kt="";return Ge.indexOf("code.")>-1&&(ht=me.code,kt="code."),!(null==ht||!ht)&&(ht=ht.toLowerCase()," "===ht?ht="space":"."===ht&&(ht="dot"),On.forEach(ln=>{ln!==ht&&(0,wt[ln])(me)&&(kt+=ln+".")}),kt+=ht,kt===Ge)}static eventCallback(me,Ge,ht){return kt=>{Ce.matchEventFullKeyCode(kt,me)&&ht.runGuarded(()=>Ge(kt))}}static _normalizeKey(me){return"esc"===me?"escape":me}}return Ce.\u0275fac=function(me){return new(me||Ce)(x.LFG(g.K0))},Ce.\u0275prov=x.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();const zn=(0,x.eFA)(x._c5,"browser",[{provide:x.Lbi,useValue:g.bD},{provide:x.g9A,useValue:function ki(){z.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function Br(){return(0,x.RDi)(document),document},deps:[]}]),dr=new x.OlP(""),jt=[{provide:x.rWj,useClass:class H{addToWindow(De){x.dqk.getAngularTestability=(Ge,ht=!0)=>{const kt=De.findTestabilityInTree(Ge,ht);if(null==kt)throw new Error("Could not find testability for element.");return kt},x.dqk.getAllAngularTestabilities=()=>De.getAllTestabilities(),x.dqk.getAllAngularRootElements=()=>De.getAllRootElements(),x.dqk.frameworkStabilizers||(x.dqk.frameworkStabilizers=[]),x.dqk.frameworkStabilizers.push(Ge=>{const ht=x.dqk.getAllAngularTestabilities();let kt=ht.length,ln=!1;const Je=function(Ze){ln=ln||Ze,kt--,0==kt&&Ge(ln)};ht.forEach(function(Ze){Ze.whenStable(Je)})})}findTestabilityInTree(De,me,Ge){return null==me?null:De.getTestability(me)??(Ge?(0,g.q)().isShadowRoot(me)?this.findTestabilityInTree(De,me.host,!0):this.findTestabilityInTree(De,me.parentElement,!0):null)}},deps:[]},{provide:x.lri,useClass:x.dDg,deps:[x.R0b,x.eoX,x.rWj]},{provide:x.dDg,useClass:x.dDg,deps:[x.R0b,x.eoX,x.rWj]}],Vr=[{provide:x.zSh,useValue:"root"},{provide:x.qLn,useFactory:function gr(){return new x.qLn},deps:[]},{provide:se,useClass:Nn,multi:!0,deps:[g.K0,x.R0b,x.Lbi]},{provide:se,useClass:Wn,multi:!0,deps:[g.K0]},{provide:Qe,useClass:Qe,deps:[fe,de,x.AFp]},{provide:x.FYo,useExisting:Qe},{provide:ve,useExisting:de},{provide:de,useClass:de,deps:[g.K0]},{provide:fe,useClass:fe,deps:[se,x.R0b]},{provide:g.JF,useClass:he,deps:[]},[]];let ri=(()=>{class Ce{constructor(me){}static withServerTransition(me){return{ngModule:Ce,providers:[{provide:x.AFp,useValue:me.appId},{provide:B,useExisting:x.AFp},F]}}}return Ce.\u0275fac=function(me){return new(me||Ce)(x.LFG(dr,12))},Ce.\u0275mod=x.oAB({type:Ce}),Ce.\u0275inj=x.cJS({providers:[...Vr,...jt],imports:[g.ez,x.hGG]}),Ce})(),mr=(()=>{class Ce{constructor(me){this._doc=me}getTitle(){return this._doc.title}setTitle(me){this._doc.title=me||""}}return Ce.\u0275fac=function(me){return new(me||Ce)(x.LFG(g.K0))},Ce.\u0275prov=x.Yz7({token:Ce,factory:function(me){let Ge=null;return Ge=me?new me:function oi(){return new mr((0,x.LFG)(g.K0))}(),Ge},providedIn:"root"}),Ce})();typeof window<"u"&&window;let Mt=(()=>{class Ce{}return Ce.\u0275fac=function(me){return new(me||Ce)},Ce.\u0275prov=x.Yz7({token:Ce,factory:function(me){let Ge=null;return Ge=me?new(me||Ce):x.LFG(Sn),Ge},providedIn:"root"}),Ce})(),Sn=(()=>{class Ce extends Mt{constructor(me){super(),this._doc=me}sanitize(me,Ge){if(null==Ge)return null;switch(me){case x.q3G.NONE:return Ge;case x.q3G.HTML:return(0,x.qzn)(Ge,"HTML")?(0,x.z3N)(Ge):(0,x.EiD)(this._doc,String(Ge)).toString();case x.q3G.STYLE:return(0,x.qzn)(Ge,"Style")?(0,x.z3N)(Ge):Ge;case x.q3G.SCRIPT:if((0,x.qzn)(Ge,"Script"))return(0,x.z3N)(Ge);throw new Error("unsafe value used in a script context");case x.q3G.URL:return(0,x.qzn)(Ge,"URL")?(0,x.z3N)(Ge):(0,x.mCW)(String(Ge));case x.q3G.RESOURCE_URL:if((0,x.qzn)(Ge,"ResourceURL"))return(0,x.z3N)(Ge);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${me} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(me){return(0,x.JVY)(me)}bypassSecurityTrustStyle(me){return(0,x.L6k)(me)}bypassSecurityTrustScript(me){return(0,x.eBb)(me)}bypassSecurityTrustUrl(me){return(0,x.LAX)(me)}bypassSecurityTrustResourceUrl(me){return(0,x.pB0)(me)}}return Ce.\u0275fac=function(me){return new(me||Ce)(x.LFG(g.K0))},Ce.\u0275prov=x.Yz7({token:Ce,factory:function(me){let Ge=null;return Ge=me?new me:function fn(Ce){return new Sn(Ce.get(g.K0))}(x.LFG(x.zs3)),Ge},providedIn:"root"}),Ce})()},9379:(Bt,Re,j)=>{"use strict";j.d(Re,{gz:()=>Un,m2:()=>jn,F0:()=>yr,rH:()=>No,yS:()=>Os,Bz:()=>Zt,lC:()=>Ps});var g=j(4650),x=j(8996),S=j(9646),z=j(1135),N=j(6805),O=j(9841),K=j(7272),G=j(9770),B=j(9635),U=j(2843),F=j(9751),H=j(515),he=j(4033),se=j(7579),fe=j(6895),Ie=j(4004),ve=j(3900),de=j(5698),ae=j(8675),je=j(9300),ye=j(5577),te=j(590),ce=j(4351),ze=j(8505),et=j(8421),Fe=j(5403),Ne=j(4482);function be(I){return(0,Ne.e)((T,_)=>{let oe,A=null,V=!1;A=T.subscribe((0,Fe.x)(_,void 0,void 0,_e=>{oe=(0,et.Xf)(I(_e,be(I)(T))),A?(A.unsubscribe(),A=null,oe.subscribe(_)):V=!0})),V&&(A.unsubscribe(),A=null,oe.subscribe(_))})}var ke=j(5026);function ot(I){return I<=0?()=>H.E:(0,Ne.e)((T,_)=>{let A=[];T.subscribe((0,Fe.x)(_,V=>{A.push(V),I<A.length&&A.shift()},()=>{for(const V of A)_.next(V);_.complete()},void 0,()=>{A=null}))})}var Qe=j(8068),Et=j(6590),Dt=j(4671);function un(I,T){const _=arguments.length>=2;return A=>A.pipe(I?(0,je.h)((V,oe)=>I(V,oe,A)):Dt.y,ot(1),_?(0,Et.d)(T):(0,Qe.T)(()=>new N.K))}var Ln=j(2529);function St(I){return(0,Ne.e)((T,_)=>{try{T.subscribe(_)}finally{_.add(I)}})}var Nn=j(8343),On=j(8189),rn=j(1481);const wt="primary",Wn=Symbol("RouteTitle");class Cn{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const _=this.params[T];return Array.isArray(_)?_[0]:_}return null}getAll(T){if(this.has(T)){const _=this.params[T];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function cr(I){return new Cn(I)}function Xn(I,T,_){const A=_.path.split("/");if(A.length>I.length||"full"===_.pathMatch&&(T.hasChildren()||A.length<I.length))return null;const V={};for(let oe=0;oe<A.length;oe++){const _e=A[oe],Se=I[oe];if(_e.startsWith(":"))V[_e.substring(1)]=Se;else if(_e!==Se.path)return null}return{consumed:I.slice(0,A.length),posParams:V}}function Ir(I,T){const _=I?Object.keys(I):void 0,A=T?Object.keys(T):void 0;if(!_||!A||_.length!=A.length)return!1;let V;for(let oe=0;oe<_.length;oe++)if(V=_[oe],!ki(I[V],T[V]))return!1;return!0}function ki(I,T){if(Array.isArray(I)&&Array.isArray(T)){if(I.length!==T.length)return!1;const _=[...I].sort(),A=[...T].sort();return _.every((V,oe)=>A[oe]===V)}return I===T}function gr(I){return Array.prototype.concat.apply([],I)}function Br(I){return I.length>0?I[I.length-1]:null}function zn(I,T){for(const _ in I)I.hasOwnProperty(_)&&T(I[_],_)}function dr(I){return(0,g.CqO)(I)?I:(0,g.QGY)(I)?(0,x.D)(Promise.resolve(I)):(0,S.of)(I)}const ri={exact:function oi(I,T,_){if(!Gt(I.segments,T.segments)||!on(I.segments,T.segments,_)||I.numberOfChildren!==T.numberOfChildren)return!1;for(const A in T.children)if(!I.children[A]||!oi(I.children[A],T.children[A],_))return!1;return!0},subset:Bn},jr={exact:function Li(I,T){return Ir(I,T)},subset:function mr(I,T){return Object.keys(T).length<=Object.keys(I).length&&Object.keys(T).every(_=>ki(I[_],T[_]))},ignored:()=>!0};function fs(I,T,_){return ri[_.paths](I.root,T.root,_.matrixParams)&&jr[_.queryParams](I.queryParams,T.queryParams)&&!("exact"===_.fragment&&I.fragment!==T.fragment)}function Bn(I,T,_){return Wt(I,T,T.segments,_)}function Wt(I,T,_,A){if(I.segments.length>_.length){const V=I.segments.slice(0,_.length);return!(!Gt(V,_)||T.hasChildren()||!on(V,_,A))}if(I.segments.length===_.length){if(!Gt(I.segments,_)||!on(I.segments,_,A))return!1;for(const V in T.children)if(!I.children[V]||!Bn(I.children[V],T.children[V],A))return!1;return!0}{const V=_.slice(0,I.segments.length),oe=_.slice(I.segments.length);return!!(Gt(I.segments,V)&&on(I.segments,V,A)&&I.children[wt])&&Wt(I.children[wt],T,oe,A)}}function on(I,T,_){return T.every((A,V)=>jr[_](I[V].parameters,A.parameters))}class Yn{constructor(T,_,A){this.root=T,this.queryParams=_,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return qn.serialize(this)}}class yn{constructor(T,_){this.segments=T,this.children=_,this.parent=null,zn(_,(A,V)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pr(this)}}class Tr{constructor(T,_){this.path=T,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=cr(this.parameters)),this._parameterMap}toString(){return ui(this)}}function Gt(I,T){return I.length===T.length&&I.every((_,A)=>_.path===T[A].path)}let Vn=(()=>{class I{}return I.\u0275fac=function(_){return new(_||I)},I.\u0275prov=g.Yz7({token:I,factory:function(){return new _i},providedIn:"root"}),I})();class _i{parse(T){const _=new or(T);return new Yn(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(T){const _=`/${Cr(T.root,!0)}`,A=function Ae(I){const T=Object.keys(I).map(_=>{const A=I[_];return Array.isArray(A)?A.map(V=>`${br(_)}=${br(V)}`).join("&"):`${br(_)}=${br(A)}`}).filter(_=>!!_);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${_}${A}${"string"==typeof T.fragment?`#${function Kr(I){return encodeURI(I)}(T.fragment)}`:""}`}}const qn=new _i;function Pr(I){return I.segments.map(T=>ui(T)).join("/")}function Cr(I,T){if(!I.hasChildren())return Pr(I);if(T){const _=I.children[wt]?Cr(I.children[wt],!1):"",A=[];return zn(I.children,(V,oe)=>{oe!==wt&&A.push(`${oe}:${Cr(V,!1)}`)}),A.length>0?`${_}(${A.join("//")})`:_}{const _=function Dr(I,T){let _=[];return zn(I.children,(A,V)=>{V===wt&&(_=_.concat(T(A,V)))}),zn(I.children,(A,V)=>{V!==wt&&(_=_.concat(T(A,V)))}),_}(I,(A,V)=>V===wt?[Cr(I.children[wt],!1)]:[`${V}:${Cr(A,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[wt]?`${Pr(I)}/${_[0]}`:`${Pr(I)}/(${_.join("//")})`}}function Zr(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function br(I){return Zr(I).replace(/%3B/gi,";")}function Hr(I){return Zr(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sr(I){return decodeURIComponent(I)}function ai(I){return sr(I.replace(/\+/g,"%20"))}function ui(I){return`${Hr(I.path)}${function Oe(I){return Object.keys(I).map(T=>`;${Hr(T)}=${Hr(I[T])}`).join("")}(I.parameters)}`}const Be=/^[^\/()?;=#]+/;function lt(I){const T=I.match(Be);return T?T[0]:""}const Ye=/^[^=?&#]+/,fn=/^[^&#]+/;class or{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(T.length>0||Object.keys(_).length>0)&&(A[wt]=new yn(T,_)),A}parseSegment(){const T=lt(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(T),new Tr(sr(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const _=lt(this.remaining);if(!_)return;this.capture(_);let A="";if(this.consumeOptional("=")){const V=lt(this.remaining);V&&(A=V,this.capture(A))}T[sr(_)]=sr(A)}parseQueryParam(T){const _=function Mt(I){const T=I.match(Ye);return T?T[0]:""}(this.remaining);if(!_)return;this.capture(_);let A="";if(this.consumeOptional("=")){const _e=function Sn(I){const T=I.match(fn);return T?T[0]:""}(this.remaining);_e&&(A=_e,this.capture(A))}const V=ai(_),oe=ai(A);if(T.hasOwnProperty(V)){let _e=T[V];Array.isArray(_e)||(_e=[_e],T[V]=_e),_e.push(oe)}else T[V]=oe}parseParens(T){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=lt(this.remaining),V=this.remaining[A.length];if("/"!==V&&")"!==V&&";"!==V)throw new g.vHH(4010,!1);let oe;A.indexOf(":")>-1?(oe=A.slice(0,A.indexOf(":")),this.capture(oe),this.capture(":")):T&&(oe=wt);const _e=this.parseChildren();_[oe]=1===Object.keys(_e).length?_e[wt]:new yn([],_e),this.consumeOptional("//")}return _}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new g.vHH(4011,!1)}}function Ce(I){return I.segments.length>0?new yn([],{[wt]:I}):I}function De(I){const T={};for(const A of Object.keys(I.children)){const oe=De(I.children[A]);(oe.segments.length>0||oe.hasChildren())&&(T[A]=oe)}return function me(I){if(1===I.numberOfChildren&&I.children[wt]){const T=I.children[wt];return new yn(I.segments.concat(T.segments),T.children)}return I}(new yn(I.segments,T))}function Ge(I){return I instanceof Yn}function Ze(I,T,_,A,V){var oe;if(0===_.length)return Jt(T.root,T.root,T.root,A,V);const _e=function xr(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new er(!0,0,I);let T=0,_=!1;const A=I.reduce((V,oe,_e)=>{if("object"==typeof oe&&null!=oe){if(oe.outlets){const Se={};return zn(oe.outlets,(st,Ft)=>{Se[Ft]="string"==typeof st?st.split("/"):st}),[...V,{outlets:Se}]}if(oe.segmentPath)return[...V,oe.segmentPath]}return"string"!=typeof oe?[...V,oe]:0===_e?(oe.split("/").forEach((Se,st)=>{0==st&&"."===Se||(0==st&&""===Se?_=!0:".."===Se?T++:""!=Se&&V.push(Se))}),V):[...V,oe]},[]);return new er(_,T,A)}(_);if(_e.toRoot())return Jt(T.root,T.root,new yn([],{}),A,V);const st=function Se(sn){var Kt;const qe=function Ri(I,T,_,A){if(I.isAbsolute)return new Fn(T.root,!0,0);if(-1===A)return new Fn(_,_===T.root,0);return function Xi(I,T,_){let A=I,V=T,oe=_;for(;oe>V;){if(oe-=V,A=A.parent,!A)throw new g.vHH(4005,!1);V=A.segments.length}return new Fn(A,!1,V-oe)}(_,A+(bt(I.commands[0])?0:1),I.numberOfDoubleDots)}(_e,T,null===(Kt=I.snapshot)||void 0===Kt?void 0:Kt._urlSegment,sn),Fr=qe.processChildren?Kn(qe.segmentGroup,qe.index,_e.commands):Bs(qe.segmentGroup,qe.index,_e.commands);return Jt(T.root,qe.segmentGroup,Fr,A,V)}(null===(oe=I.snapshot)||void 0===oe?void 0:oe._lastPathIndex);return st}function bt(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Ct(I){return"object"==typeof I&&null!=I&&I.outlets}function Jt(I,T,_,A,V){let _e,oe={};A&&zn(A,(st,Ft)=>{oe[Ft]=Array.isArray(st)?st.map(sn=>`${sn}`):`${st}`}),_e=I===T?_:An(I,T,_);const Se=Ce(De(_e));return new Yn(Se,oe,V)}function An(I,T,_){const A={};return zn(I.children,(V,oe)=>{A[oe]=V===T?_:An(V,T,_)}),new yn(I.segments,A)}class er{constructor(T,_,A){if(this.isAbsolute=T,this.numberOfDoubleDots=_,this.commands=A,T&&A.length>0&&bt(A[0]))throw new g.vHH(4003,!1);const V=A.find(Ct);if(V&&V!==Br(A))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fn{constructor(T,_,A){this.segmentGroup=T,this.processChildren=_,this.index=A}}function Bs(I,T,_){if(I||(I=new yn([],{})),0===I.segments.length&&I.hasChildren())return Kn(I,T,_);const A=function Ei(I,T,_){let A=0,V=T;const oe={match:!1,pathIndex:0,commandIndex:0};for(;V<I.segments.length;){if(A>=_.length)return oe;const _e=I.segments[V],Se=_[A];if(Ct(Se))break;const st=`${Se}`,Ft=A<_.length-1?_[A+1]:null;if(V>0&&void 0===st)break;if(st&&Ft&&"object"==typeof Ft&&void 0===Ft.outlets){if(!hr(st,Ft,_e))return oe;A+=2}else{if(!hr(st,{},_e))return oe;A++}V++}return{match:!0,pathIndex:V,commandIndex:A}}(I,T,_),V=_.slice(A.commandIndex);if(A.match&&A.pathIndex<I.segments.length){const oe=new yn(I.segments.slice(0,A.pathIndex),{});return oe.children[wt]=new yn(I.segments.slice(A.pathIndex),I.children),Kn(oe,0,V)}return A.match&&0===V.length?new yn(I.segments,{}):A.match&&!I.hasChildren()?Vs(I,T,_):A.match?Kn(I,0,V):Vs(I,T,_)}function Kn(I,T,_){if(0===_.length)return new yn(I.segments,{});{const A=function Us(I){return Ct(I[0])?I[0].outlets:{[wt]:I}}(_),V={};return zn(A,(oe,_e)=>{"string"==typeof oe&&(oe=[oe]),null!==oe&&(V[_e]=Bs(I.children[_e],T,oe))}),zn(I.children,(oe,_e)=>{void 0===A[_e]&&(V[_e]=oe)}),new yn(I.segments,V)}}function Vs(I,T,_){const A=I.segments.slice(0,T);let V=0;for(;V<_.length;){const oe=_[V];if(Ct(oe)){const st=ps(oe.outlets);return new yn(A,st)}if(0===V&&bt(_[0])){A.push(new Tr(I.segments[T].path,po(_[0]))),V++;continue}const _e=Ct(oe)?oe.outlets[wt]:`${oe}`,Se=V<_.length-1?_[V+1]:null;_e&&Se&&bt(Se)?(A.push(new Tr(_e,po(Se))),V+=2):(A.push(new Tr(_e,{})),V++)}return new yn(A,{})}function ps(I){const T={};return zn(I,(_,A)=>{"string"==typeof _&&(_=[_]),null!==_&&(T[A]=Vs(new yn([],{}),0,_))}),T}function po(I){const T={};return zn(I,(_,A)=>T[A]=`${_}`),T}function hr(I,T,_){return I==_.path&&Ir(T,_.parameters)}class Di{constructor(T,_){this.id=T,this.url=_}}class rs extends Di{constructor(T,_,A="imperative",V=null){super(T,_),this.type=0,this.navigationTrigger=A,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jn extends Di{constructor(T,_,A){super(T,_),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class js extends Di{constructor(T,_,A,V){super(T,_),this.reason=A,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qr extends Di{constructor(T,_,A,V){super(T,_),this.error=A,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class li extends Di{constructor(T,_,A,V){super(T,_),this.urlAfterRedirects=A,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Js extends Di{constructor(T,_,A,V){super(T,_),this.urlAfterRedirects=A,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mi extends Di{constructor(T,_,A,V,oe){super(T,_),this.urlAfterRedirects=A,this.state=V,this.shouldActivate=oe,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class is extends Di{constructor(T,_,A,V){super(T,_),this.urlAfterRedirects=A,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nr extends Di{constructor(T,_,A,V){super(T,_),this.urlAfterRedirects=A,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ws{constructor(T){this.route=T,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class go{constructor(T){this.route=T,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $o{constructor(T){this.snapshot=T,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fi{constructor(T){this.snapshot=T,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ea{constructor(T){this.snapshot=T,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ar{constructor(T){this.snapshot=T,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xs{constructor(T,_,A){this.routerEvent=T,this.position=_,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $s{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const _=this.pathFromRoot(T);return _.length>1?_[_.length-2]:null}children(T){const _=Ke(T,this._root);return _?_.children.map(A=>A.value):[]}firstChild(T){const _=Ke(T,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(T){const _=Ve(T,this._root);return _.length<2?[]:_[_.length-2].children.map(V=>V.value).filter(V=>V!==T)}pathFromRoot(T){return Ve(T,this._root).map(_=>_.value)}}function Ke(I,T){if(I===T.value)return T;for(const _ of T.children){const A=Ke(I,_);if(A)return A}return null}function Ve(I,T){if(I===T.value)return[T];for(const _ of T.children){const A=Ve(I,_);if(A.length)return A.unshift(T),A}return[]}class tt{constructor(T,_){this.value=T,this.children=_}toString(){return`TreeNode(${this.value})`}}function yt(I){const T={};return I&&I.children.forEach(_=>T[_.value.outlet]=_),T}class Pt extends $s{constructor(T,_){super(T),this.snapshot=_,oo(this,T)}toString(){return this.snapshot.toString()}}function vn(I,T){const _=function tr(I,T){const _e=new Is([],{},{},"",{},wt,T,null,I.root,-1,{});return new Ui("",new tt(_e,[]))}(I,T),A=new z.X([new Tr("",{})]),V=new z.X({}),oe=new z.X({}),_e=new z.X({}),Se=new z.X(""),st=new Un(A,V,_e,Se,oe,wt,T,_.root);return st.snapshot=_.root,new Pt(new tt(st,[]),_)}class Un{constructor(T,_,A,V,oe,_e,Se,st){var Ft,sn;this.url=T,this.params=_,this.queryParams=A,this.fragment=V,this.data=oe,this.outlet=_e,this.component=Se,this.title=null!==(Ft=null===(sn=this.data)||void 0===sn?void 0:sn.pipe((0,Ie.U)(Kt=>Kt[Wn])))&&void 0!==Ft?Ft:(0,S.of)(void 0),this._futureSnapshot=st}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ie.U)(T=>cr(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ie.U)(T=>cr(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Er(I,T="emptyOnly"){const _=I.pathFromRoot;let A=0;if("always"!==T)for(A=_.length-1;A>=1;){const V=_[A],oe=_[A-1];if(V.routeConfig&&""===V.routeConfig.path)A--;else{if(oe.component)break;A--}}return function eo(I){return I.reduce((T,_)=>{var A;return{params:{...T.params,..._.params},data:{...T.data,..._.data},resolve:{..._.data,...T.resolve,...null===(A=_.routeConfig)||void 0===A?void 0:A.data,..._._resolvedData}}},{params:{},data:{},resolve:{}})}(_.slice(A))}class Is{constructor(T,_,A,V,oe,_e,Se,st,Ft,sn,Kt,qe){var Fr;this.url=T,this.params=_,this.queryParams=A,this.fragment=V,this.data=oe,this.outlet=_e,this.component=Se,this.title=null===(Fr=this.data)||void 0===Fr?void 0:Fr[Wn],this.routeConfig=st,this._urlSegment=Ft,this._lastPathIndex=sn,this._correctedLastPathIndex=qe??sn,this._resolve=Kt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ui extends $s{constructor(T,_){super(_),this.url=T,oo(this,_)}toString(){return gs(this._root)}}function oo(I,T){T.value._routerState=I,T.children.forEach(_=>oo(I,_))}function gs(I){const T=I.children.length>0?` { ${I.children.map(gs).join(", ")} } `:"";return`${I.value}${T}`}function bs(I){if(I.snapshot){const T=I.snapshot,_=I._futureSnapshot;I.snapshot=_,Ir(T.queryParams,_.queryParams)||I.queryParams.next(_.queryParams),T.fragment!==_.fragment&&I.fragment.next(_.fragment),Ir(T.params,_.params)||I.params.next(_.params),function Mr(I,T){if(I.length!==T.length)return!1;for(let _=0;_<I.length;++_)if(!Ir(I[_],T[_]))return!1;return!0}(T.url,_.url)||I.url.next(_.url),Ir(T.data,_.data)||I.data.next(_.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function zo(I,T){const _=Ir(I.params,T.params)&&function $r(I,T){return Gt(I,T)&&I.every((_,A)=>Ir(_.parameters,T[A].parameters))}(I.url,T.url);return _&&!(!I.parent!=!T.parent)&&(!I.parent||zo(I.parent,T.parent))}function Ds(I,T,_){if(_&&I.shouldReuseRoute(T.value,_.value.snapshot)){const A=_.value;A._futureSnapshot=T.value;const V=function mo(I,T,_){return T.children.map(A=>{for(const V of _.children)if(I.shouldReuseRoute(A.value,V.value.snapshot))return Ds(I,A,V);return Ds(I,A)})}(I,T,_);return new tt(A,V)}{if(I.shouldAttach(T.value)){const oe=I.retrieve(T.value);if(null!==oe){const _e=oe.route;return _e.value._futureSnapshot=T.value,_e.children=T.children.map(Se=>Ds(I,Se)),_e}}const A=function yo(I){return new Un(new z.X(I.url),new z.X(I.params),new z.X(I.queryParams),new z.X(I.fragment),new z.X(I.data),I.outlet,I.component,I)}(T.value),V=T.children.map(oe=>Ds(I,oe));return new tt(A,V)}}const Cs="ngNavigationCancelingError";function vo(I,T){const{redirectTo:_,navigationBehaviorOptions:A}=Ge(T)?{redirectTo:T,navigationBehaviorOptions:void 0}:T,V=Go(!1,0,T);return V.url=_,V.navigationBehaviorOptions=A,V}function Go(I,T,_){const A=new Error("NavigationCancelingError: "+(I||""));return A[Cs]=!0,A.cancellationCode=T,_&&(A.url=_),A}function Wo(I){return Ea(I)&&Ge(I.url)}function Ea(I){return I&&I[Cs]}class Ci{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Si,this.attachRef=null}}let Si=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(_,A){const V=this.getOrCreateContext(_);V.outlet=A,this.contexts.set(_,V)}onChildOutletDestroyed(_){const A=this.getContext(_);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let A=this.getContext(_);return A||(A=new Ci,this.contexts.set(_,A)),A}getContext(_){return this.contexts.get(_)||null}}return I.\u0275fac=function(_){return new(_||I)},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const ta=!1;let Ps=(()=>{class I{constructor(_,A,V,oe,_e){this.parentContexts=_,this.location=A,this.changeDetector=oe,this.environmentInjector=_e,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=V||wt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){var _;(null===(_=this.parentContexts.getContext(this.name))||void 0===_?void 0:_.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,ta);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,ta);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,ta);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,A){this.activated=_,this._activatedRoute=A,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,A){if(this.isActivated)throw new g.vHH(4013,ta);this._activatedRoute=_;const V=this.location,_e=_._futureSnapshot.component,Se=this.parentContexts.getOrCreateContext(this.name).children,st=new Ss(_,Se,V.injector);if(A&&function wa(I){return!!I.resolveComponentFactory}(A)){const Ft=A.resolveComponentFactory(_e);this.activated=V.createComponent(Ft,V.length,st)}else this.activated=V.createComponent(_e,{index:V.length,injector:st,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(_){return new(_||I)(g.Y36(Si),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},I.\u0275dir=g.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),I})();class Ss{constructor(T,_,A){this.route=T,this.childContexts=_,this.parent=A}get(T,_){return T===Un?this.route:T===Si?this.childContexts:this.parent.get(T,_)}}let zr=(()=>{class I{}return I.\u0275fac=function(_){return new(_||I)},I.\u0275cmp=g.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(_,A){1&_&&g._UZ(0,"router-outlet")},dependencies:[Ps],encapsulation:2}),I})();function fi(I,T){var _;return I.providers&&!I._injector&&(I._injector=(0,g.MMx)(I.providers,T,`Route: ${I.path}`)),null!==(_=I._injector)&&void 0!==_?_:T}function es(I){const T=I.children&&I.children.map(es),_=T?{...I,children:T}:{...I};return!_.component&&!_.loadComponent&&(T||_.loadChildren)&&_.outlet&&_.outlet!==wt&&(_.component=zr),_}function wi(I){return I.outlet||wt}function Ai(I,T){const _=I.filter(A=>wi(A)===T);return _.push(...I.filter(A=>wi(A)!==T)),_}function Bi(I){var T;if(!I)return null;if(null!==(T=I.routeConfig)&&void 0!==T&&T._injector)return I.routeConfig._injector;for(let _=I.parent;_;_=_.parent){const A=_.routeConfig;if(null!=A&&A._loadedInjector)return A._loadedInjector;if(null!=A&&A._injector)return A._injector}return null}class gn{constructor(T,_,A,V){this.routeReuseStrategy=T,this.futureState=_,this.currState=A,this.forwardEvent=V}activate(T){const _=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,A,T),bs(this.futureState.root),this.activateChildRoutes(_,A,T)}deactivateChildRoutes(T,_,A){const V=yt(_);T.children.forEach(oe=>{const _e=oe.value.outlet;this.deactivateRoutes(oe,V[_e],A),delete V[_e]}),zn(V,(oe,_e)=>{this.deactivateRouteAndItsChildren(oe,A)})}deactivateRoutes(T,_,A){const V=T.value,oe=_?_.value:null;if(V===oe)if(V.component){const _e=A.getContext(V.outlet);_e&&this.deactivateChildRoutes(T,_,_e.children)}else this.deactivateChildRoutes(T,_,A);else oe&&this.deactivateRouteAndItsChildren(_,A)}deactivateRouteAndItsChildren(T,_){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,_):this.deactivateRouteAndOutlet(T,_)}detachAndStoreRouteSubtree(T,_){const A=_.getContext(T.value.outlet),V=A&&T.value.component?A.children:_,oe=yt(T);for(const _e of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[_e],V);if(A&&A.outlet){const _e=A.outlet.detach(),Se=A.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:_e,route:T,contexts:Se})}}deactivateRouteAndOutlet(T,_){const A=_.getContext(T.value.outlet),V=A&&T.value.component?A.children:_,oe=yt(T);for(const _e of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[_e],V);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(T,_,A){const V=yt(_);T.children.forEach(oe=>{this.activateRoutes(oe,V[oe.value.outlet],A),this.forwardEvent(new ar(oe.value.snapshot))}),T.children.length&&this.forwardEvent(new Fi(T.value.snapshot))}activateRoutes(T,_,A){const V=T.value,oe=_?_.value:null;if(bs(V),V===oe)if(V.component){const Se=A.getOrCreateContext(V.outlet);this.activateChildRoutes(T,_,Se.children)}else this.activateChildRoutes(T,_,A);else if(V.component){const Se=A.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const st=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),Se.children.onOutletReAttached(st.contexts),Se.attachRef=st.componentRef,Se.route=st.route.value,Se.outlet&&Se.outlet.attach(st.componentRef,st.route.value),bs(st.route.value),this.activateChildRoutes(T,null,Se.children)}else{var _e;const st=Bi(V.snapshot),Ft=null!==(_e=st?.get(g._Vd))&&void 0!==_e?_e:null;Se.attachRef=null,Se.route=V,Se.resolver=Ft,Se.injector=st,Se.outlet&&Se.outlet.activateWith(V,Se.injector),this.activateChildRoutes(T,null,Se.children)}}else this.activateChildRoutes(T,null,A)}}class ao{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class no{constructor(T,_){this.component=T,this.route=_}}function Ao(I,T,_){const A=I._root;return Hs(A,T?T._root:null,_,[A.value])}function uo(I,T){const _=Symbol(),A=T.get(I,_);return A===_?"function"!=typeof I||(0,g.Z0I)(I)?T.get(I):I:A}function Hs(I,T,_,A,V={canDeactivateChecks:[],canActivateChecks:[]}){const oe=yt(T);return I.children.forEach(_e=>{(function Ki(I,T,_,A,V={canDeactivateChecks:[],canActivateChecks:[]}){const oe=I.value,_e=T?T.value:null,Se=_?_.getContext(I.value.outlet):null;if(_e&&oe.routeConfig===_e.routeConfig){const st=function ro(I,T,_){if("function"==typeof _)return _(I,T);switch(_){case"pathParamsChange":return!Gt(I.url,T.url);case"pathParamsOrQueryParamsChange":return!Gt(I.url,T.url)||!Ir(I.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zo(I,T)||!Ir(I.queryParams,T.queryParams);default:return!zo(I,T)}}(_e,oe,oe.routeConfig.runGuardsAndResolvers);st?V.canActivateChecks.push(new ao(A)):(oe.data=_e.data,oe._resolvedData=_e._resolvedData),Hs(I,T,oe.component?Se?Se.children:null:_,A,V),st&&Se&&Se.outlet&&Se.outlet.isActivated&&V.canDeactivateChecks.push(new no(Se.outlet.component,_e))}else _e&&Tt(T,Se,V),V.canActivateChecks.push(new ao(A)),Hs(I,null,oe.component?Se?Se.children:null:_,A,V)})(_e,oe[_e.value.outlet],_,A.concat([_e.value]),V),delete oe[_e.value.outlet]}),zn(oe,(_e,Se)=>Tt(_e,_.getContext(Se),V)),V}function Tt(I,T,_){const A=yt(I),V=I.value;zn(A,(oe,_e)=>{Tt(oe,V.component?T?T.children.getContext(_e):null:T,_)}),_.canDeactivateChecks.push(new no(V.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,V))}function Mn(I){return"function"==typeof I}function pe(I){return I instanceof N.K||"EmptyError"===I?.name}const xe=Symbol("INITIAL_VALUE");function We(){return(0,ve.w)(I=>(0,O.a)(I.map(T=>T.pipe((0,de.q)(1),(0,ae.O)(xe)))).pipe((0,Ie.U)(T=>{for(const _ of T)if(!0!==_){if(_===xe)return xe;if(!1===_||_ instanceof Yn)return _}return!0}),(0,je.h)(T=>T!==xe),(0,de.q)(1)))}function Wr(I){return(0,B.z)((0,ze.b)(T=>{if(Ge(T))throw vo(0,T)}),(0,Ie.U)(T=>!0===T))}const Or={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zs(I,T,_,A,V){const oe=kr(I,T,_);return oe.matched?function ss(I,T,_,A){const V=T.canMatch;if(!V||0===V.length)return(0,S.of)(!0);const oe=V.map(_e=>{const Se=uo(_e,I);return dr(function ms(I){return I&&Mn(I.canMatch)}(Se)?Se.canMatch(T,_):I.runInContext(()=>Se(T,_)))});return(0,S.of)(oe).pipe(We(),Wr())}(A=fi(T,A),T,_).pipe((0,Ie.U)(_e=>!0===_e?oe:{...Or})):(0,S.of)(oe)}function kr(I,T,_){var A;if(""===T.path)return"full"===T.pathMatch&&(I.hasChildren()||_.length>0)?{...Or}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const oe=(T.matcher||Xn)(_,I,T);if(!oe)return{...Or};const _e={};zn(oe.posParams,(st,Ft)=>{_e[Ft]=st.path});const Se=oe.consumed.length>0?{..._e,...oe.consumed[oe.consumed.length-1].parameters}:_e;return{matched:!0,consumedSegments:oe.consumed,remainingSegments:_.slice(oe.consumed.length),parameters:Se,positionalParamSegments:null!==(A=oe.posParams)&&void 0!==A?A:{}}}function Xr(I,T,_,A,V="corrected"){if(_.length>0&&function os(I,T,_){return _.some(A=>ts(I,T,A)&&wi(A)!==wt)}(I,_,A)){const _e=new yn(T,function Gs(I,T,_,A){const V={};V[wt]=A,A._sourceSegment=I,A._segmentIndexShift=T.length;for(const oe of _)if(""===oe.path&&wi(oe)!==wt){const _e=new yn([],{});_e._sourceSegment=I,_e._segmentIndexShift=T.length,V[wi(oe)]=_e}return V}(I,T,A,new yn(_,I.children)));return _e._sourceSegment=I,_e._segmentIndexShift=T.length,{segmentGroup:_e,slicedSegments:[]}}if(0===_.length&&function Ro(I,T,_){return _.some(A=>ts(I,T,A))}(I,_,A)){const _e=new yn(I.segments,function gi(I,T,_,A,V,oe){const _e={};for(const Se of A)if(ts(I,_,Se)&&!V[wi(Se)]){const st=new yn([],{});st._sourceSegment=I,st._segmentIndexShift="legacy"===oe?I.segments.length:T.length,_e[wi(Se)]=st}return{...V,..._e}}(I,T,_,A,I.children,V));return _e._sourceSegment=I,_e._segmentIndexShift=T.length,{segmentGroup:_e,slicedSegments:_}}const oe=new yn(I.segments,I.children);return oe._sourceSegment=I,oe._segmentIndexShift=T.length,{segmentGroup:oe,slicedSegments:_}}function ts(I,T,_){return(!(I.hasChildren()||T.length>0)||"full"!==_.pathMatch)&&""===_.path}function R(I,T,_,A){return!!(wi(I)===A||A!==wt&&ts(T,_,I))&&("**"===I.path||kr(T,I,_).matched)}function ee(I,T,_){return 0===T.length&&!I.children[_]}const k=!1;class re{constructor(T){this.segmentGroup=T||null}}class Te{constructor(T){this.urlTree=T}}function ut(I){return(0,U._)(new re(I))}function ft(I){return(0,U._)(new Te(I))}class Y{constructor(T,_,A,V,oe){this.injector=T,this.configLoader=_,this.urlSerializer=A,this.urlTree=V,this.config=oe,this.allowRedirects=!0}apply(){const T=Xr(this.urlTree.root,[],[],this.config).segmentGroup,_=new yn(T.segments,T.children);return this.expandSegmentGroup(this.injector,this.config,_,wt).pipe((0,Ie.U)(oe=>this.createUrlTree(De(oe),this.urlTree.queryParams,this.urlTree.fragment))).pipe(be(oe=>{if(oe instanceof Te)return this.allowRedirects=!1,this.match(oe.urlTree);throw oe instanceof re?this.noMatchError(oe):oe}))}match(T){return this.expandSegmentGroup(this.injector,this.config,T.root,wt).pipe((0,Ie.U)(V=>this.createUrlTree(De(V),T.queryParams,T.fragment))).pipe(be(V=>{throw V instanceof re?this.noMatchError(V):V}))}noMatchError(T){return new g.vHH(4002,k)}createUrlTree(T,_,A){const V=Ce(T);return new Yn(V,_,A)}expandSegmentGroup(T,_,A,V){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(T,_,A).pipe((0,Ie.U)(oe=>new yn([],oe))):this.expandSegment(T,A,_,A.segments,V,!0)}expandChildren(T,_,A){const V=[];for(const oe of Object.keys(A.children))"primary"===oe?V.unshift(oe):V.push(oe);return(0,x.D)(V).pipe((0,ce.b)(oe=>{const _e=A.children[oe],Se=Ai(_,oe);return this.expandSegmentGroup(T,Se,_e,oe).pipe((0,Ie.U)(st=>({segment:st,outlet:oe})))}),(0,ke.R)((oe,_e)=>(oe[_e.outlet]=_e.segment,oe),{}),un())}expandSegment(T,_,A,V,oe,_e){return(0,x.D)(A).pipe((0,ce.b)(Se=>this.expandSegmentAgainstRoute(T,_,A,Se,V,oe,_e).pipe(be(Ft=>{if(Ft instanceof re)return(0,S.of)(null);throw Ft}))),(0,te.P)(Se=>!!Se),be((Se,st)=>{if(pe(Se))return ee(_,V,oe)?(0,S.of)(new yn([],{})):ut(_);throw Se}))}expandSegmentAgainstRoute(T,_,A,V,oe,_e,Se){return R(V,_,oe,_e)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(T,_,V,oe,_e):Se&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,_,A,V,oe,_e):ut(_):ut(_)}expandSegmentAgainstRouteUsingRedirect(T,_,A,V,oe,_e){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,A,V,_e):this.expandRegularSegmentAgainstRouteUsingRedirect(T,_,A,V,oe,_e)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,_,A,V){const oe=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?ft(oe):this.lineralizeSegments(A,oe).pipe((0,ye.z)(_e=>{const Se=new yn(_e,{});return this.expandSegment(T,Se,_,_e,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,_,A,V,oe,_e){const{matched:Se,consumedSegments:st,remainingSegments:Ft,positionalParamSegments:sn}=kr(_,V,oe);if(!Se)return ut(_);const Kt=this.applyRedirectCommands(st,V.redirectTo,sn);return V.redirectTo.startsWith("/")?ft(Kt):this.lineralizeSegments(V,Kt).pipe((0,ye.z)(qe=>this.expandSegment(T,_,A,qe.concat(Ft),_e,!1)))}matchSegmentAgainstRoute(T,_,A,V,oe){return"**"===A.path?(T=fi(A,T),A.loadChildren?(A._loadedRoutes?(0,S.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(T,A)).pipe((0,Ie.U)(Se=>(A._loadedRoutes=Se.routes,A._loadedInjector=Se.injector,new yn(V,{})))):(0,S.of)(new yn(V,{}))):zs(_,A,V,T).pipe((0,ve.w)(({matched:_e,consumedSegments:Se,remainingSegments:st})=>{var Ft;return _e?(T=null!==(Ft=A._injector)&&void 0!==Ft?Ft:T,this.getChildConfig(T,A,V).pipe((0,ye.z)(Kt=>{var qe;const Fr=null!==(qe=Kt.injector)&&void 0!==qe?qe:T,ti=Kt.routes,{segmentGroup:co,slicedSegments:xs}=Xr(_,Se,st,ti),us=new yn(co.segments,co.children);if(0===xs.length&&us.hasChildren())return this.expandChildren(Fr,ti,us).pipe((0,Ie.U)(Io=>new yn(Se,Io)));if(0===ti.length&&0===xs.length)return(0,S.of)(new yn(Se,{}));const Qo=wi(A)===oe;return this.expandSegment(Fr,us,ti,xs,Qo?wt:oe,!0).pipe((0,Ie.U)(wo=>new yn(Se.concat(wo.segments),wo.children)))}))):ut(_)}))}getChildConfig(T,_,A){return _.children?(0,S.of)({routes:_.children,injector:T}):_.loadChildren?void 0!==_._loadedRoutes?(0,S.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function Jr(I,T,_,A){const V=T.canLoad;if(void 0===V||0===V.length)return(0,S.of)(!0);const oe=V.map(_e=>{const Se=uo(_e,I);return dr(function Ko(I){return I&&Mn(I.canLoad)}(Se)?Se.canLoad(T,_):I.runInContext(()=>Se(T,_)))});return(0,S.of)(oe).pipe(We(),Wr())}(T,_,A).pipe((0,ye.z)(V=>V?this.configLoader.loadChildren(T,_).pipe((0,ze.b)(oe=>{_._loadedRoutes=oe.routes,_._loadedInjector=oe.injector})):function fr(I){return(0,U._)(Go(k,3))}())):(0,S.of)({routes:[],injector:T})}lineralizeSegments(T,_){let A=[],V=_.root;for(;;){if(A=A.concat(V.segments),0===V.numberOfChildren)return(0,S.of)(A);if(V.numberOfChildren>1||!V.children[wt])return(0,U._)(new g.vHH(4e3,k));V=V.children[wt]}}applyRedirectCommands(T,_,A){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),T,A)}applyRedirectCreateUrlTree(T,_,A,V){const oe=this.createSegmentGroup(T,_.root,A,V);return new Yn(oe,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(T,_){const A={};return zn(T,(V,oe)=>{if("string"==typeof V&&V.startsWith(":")){const Se=V.substring(1);A[oe]=_[Se]}else A[oe]=V}),A}createSegmentGroup(T,_,A,V){const oe=this.createSegments(T,_.segments,A,V);let _e={};return zn(_.children,(Se,st)=>{_e[st]=this.createSegmentGroup(T,Se,A,V)}),new yn(oe,_e)}createSegments(T,_,A,V){return _.map(oe=>oe.path.startsWith(":")?this.findPosParam(T,oe,V):this.findOrReturn(oe,A))}findPosParam(T,_,A){const V=A[_.path.substring(1)];if(!V)throw new g.vHH(4001,k);return V}findOrReturn(T,_){let A=0;for(const V of _){if(V.path===T.path)return _.splice(A),V;A++}return T}}class L{}class Pe{constructor(T,_,A,V,oe,_e,Se,st){this.injector=T,this.rootComponentType=_,this.config=A,this.urlTree=V,this.url=oe,this.paramsInheritanceStrategy=_e,this.relativeLinkResolution=Se,this.urlSerializer=st}recognize(){const T=Xr(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,T,wt).pipe((0,Ie.U)(_=>{if(null===_)return null;const A=new Is([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wt,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new tt(A,_),oe=new Ui(this.url,V);return this.inheritParamsAndData(oe._root),oe}))}inheritParamsAndData(T){const _=T.value,A=Er(_,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data),T.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(T,_,A,V){return 0===A.segments.length&&A.hasChildren()?this.processChildren(T,_,A):this.processSegment(T,_,A,A.segments,V)}processChildren(T,_,A){return(0,x.D)(Object.keys(A.children)).pipe((0,ce.b)(V=>{const oe=A.children[V],_e=Ai(_,V);return this.processSegmentGroup(T,_e,oe,V)}),(0,ke.R)((V,oe)=>V&&oe?(V.push(...oe),V):null),(0,Ln.o)(V=>null!==V),(0,Et.d)(null),un(),(0,Ie.U)(V=>{if(null===V)return null;const oe=Nt(V);return function Le(I){I.sort((T,_)=>T.value.outlet===wt?-1:_.value.outlet===wt?1:T.value.outlet.localeCompare(_.value.outlet))}(oe),oe}))}processSegment(T,_,A,V,oe){return(0,x.D)(_).pipe((0,ce.b)(_e=>{var Se;return this.processSegmentAgainstRoute(null!==(Se=_e._injector)&&void 0!==Se?Se:T,_e,A,V,oe)}),(0,te.P)(_e=>!!_e),be(_e=>{if(pe(_e))return ee(A,V,oe)?(0,S.of)([]):(0,S.of)(null);throw _e}))}processSegmentAgainstRoute(T,_,A,V,oe){if(_.redirectTo||!R(_,A,V,oe))return(0,S.of)(null);let _e;if("**"===_.path){var Se,st;const Ft=V.length>0?Br(V).parameters:{},sn=bn(A)+V.length,Kt=new Is(V,Ft,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,En(_),wi(_),null!==(Se=null!==(st=_.component)&&void 0!==st?st:_._loadedComponent)&&void 0!==Se?Se:null,_,Gn(A),sn,qr(_),sn);_e=(0,S.of)({snapshot:Kt,consumedSegments:[],remainingSegments:[]})}else _e=zs(A,_,V,T).pipe((0,Ie.U)(({matched:Ft,consumedSegments:sn,remainingSegments:Kt,parameters:qe})=>{var Fr,ti;if(!Ft)return null;const co=bn(A)+sn.length;return{snapshot:new Is(sn,qe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,En(_),wi(_),null!==(Fr=null!==(ti=_.component)&&void 0!==ti?ti:_._loadedComponent)&&void 0!==Fr?Fr:null,_,Gn(A),co,qr(_),co),consumedSegments:sn,remainingSegments:Kt}}));return _e.pipe((0,ve.w)(Ft=>{var sn,Kt;if(null===Ft)return(0,S.of)(null);const{snapshot:qe,consumedSegments:Fr,remainingSegments:ti}=Ft;T=null!==(sn=_._injector)&&void 0!==sn?sn:T;const co=null!==(Kt=_._loadedInjector)&&void 0!==Kt?Kt:T,xs=function rt(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(_),{segmentGroup:us,slicedSegments:Qo}=Xr(A,Fr,ti,xs.filter(wo=>void 0===wo.redirectTo),this.relativeLinkResolution);if(0===Qo.length&&us.hasChildren())return this.processChildren(co,xs,us).pipe((0,Ie.U)(wo=>null===wo?null:[new tt(qe,wo)]));if(0===xs.length&&0===Qo.length)return(0,S.of)([new tt(qe,[])]);const Eo=wi(_)===oe;return this.processSegment(co,xs,us,Qo,Eo?wt:oe).pipe((0,Ie.U)(wo=>null===wo?null:[new tt(qe,wo)]))}))}}function gt(I){const T=I.value.routeConfig;return T&&""===T.path&&void 0===T.redirectTo}function Nt(I){const T=[],_=new Set;for(const A of I){if(!gt(A)){T.push(A);continue}const V=T.find(oe=>A.value.routeConfig===oe.value.routeConfig);void 0!==V?(V.children.push(...A.children),_.add(V)):T.push(A)}for(const A of _){const V=Nt(A.children);T.push(new tt(A.value,V))}return T.filter(A=>!_.has(A))}function Gn(I){let T=I;for(;T._sourceSegment;)T=T._sourceSegment;return T}function bn(I){var T;let _=I,A=null!==(T=_._segmentIndexShift)&&void 0!==T?T:0;for(;_._sourceSegment;){var V;_=_._sourceSegment,A+=null!==(V=_._segmentIndexShift)&&void 0!==V?V:0}return A-1}function En(I){return I.data||{}}function qr(I){return I.resolve||{}}function Gi(I){return"string"==typeof I.title||null===I.title}function as(I){return(0,ve.w)(T=>{const _=I(T);return _?(0,x.D)(_).pipe((0,Ie.U)(()=>T)):(0,S.of)(T)})}let Mo=(()=>{class I{buildTitle(_){let A,V=_.root;for(;void 0!==V;){var oe;A=null!==(oe=this.getResolvedTitleForRoute(V))&&void 0!==oe?oe:A,V=V.children.find(_e=>_e.outlet===wt)}return A}getResolvedTitleForRoute(_){return _.data[Wn]}}return I.\u0275fac=function(_){return new(_||I)},I.\u0275prov=g.Yz7({token:I,factory:function(){return(0,g.f3M)(Qi)},providedIn:"root"}),I})(),Qi=(()=>{class I extends Mo{constructor(_){super(),this.title=_}updateTitle(_){const A=this.buildTitle(_);void 0!==A&&this.title.setTitle(A)}}return I.\u0275fac=function(_){return new(_||I)(g.LFG(rn.Dx))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class ji{}class qs extends class Ns{shouldDetach(T){return!1}store(T,_){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,_){return T.routeConfig===_.routeConfig}}{}const nn=new g.OlP("",{providedIn:"root",factory:()=>({})}),cn=new g.OlP("ROUTES");let ur=(()=>{class I{constructor(_,A){this.injector=_,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,S.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const A=dr(_.loadComponent()).pipe((0,ze.b)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=oe}),St(()=>{this.componentLoaders.delete(_)})),V=new he.c(A,()=>new se.x).pipe((0,Nn.x)());return this.componentLoaders.set(_,V),V}loadChildren(_,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,S.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const oe=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,Ie.U)(Se=>{this.onLoadEndListener&&this.onLoadEndListener(A);let st,Ft,sn=!1;Array.isArray(Se)?Ft=Se:(st=Se.create(_).injector,Ft=gr(st.get(cn,[],g.XFs.Self|g.XFs.Optional)));return{routes:Ft.map(es),injector:st}}),St(()=>{this.childrenLoaders.delete(A)})),_e=new he.c(oe,()=>new se.x).pipe((0,Nn.x)());return this.childrenLoaders.set(A,_e),_e}loadModuleFactoryOrRoutes(_){return dr(_()).pipe((0,ye.z)(A=>A instanceof g.YKP||Array.isArray(A)?(0,S.of)(A):(0,x.D)(this.compiler.compileModuleAsync(A))))}}return I.\u0275fac=function(_){return new(_||I)(g.LFG(g.zs3),g.LFG(g.Sil))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class mi{}class Ks{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,_){return T}}function Zs(I){throw I}function ii(I,T,_){return T.parse("/")}const Pa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ia={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Po(){var I,T;const _=(0,g.f3M)(Vn),A=(0,g.f3M)(Si),V=(0,g.f3M)(fe.Ye),oe=(0,g.f3M)(g.zs3),_e=(0,g.f3M)(g.Sil),Se=null!==(I=(0,g.f3M)(cn,{optional:!0}))&&void 0!==I?I:[],st=null!==(T=(0,g.f3M)(nn,{optional:!0}))&&void 0!==T?T:{},Ft=(0,g.f3M)(Qi),sn=(0,g.f3M)(Mo,{optional:!0}),Kt=(0,g.f3M)(mi,{optional:!0}),qe=(0,g.f3M)(ji,{optional:!0}),Fr=new yr(null,_,A,V,oe,_e,gr(Se));return Kt&&(Fr.urlHandlingStrategy=Kt),qe&&(Fr.routeReuseStrategy=qe),Fr.titleStrategy=sn??Ft,function ys(I,T){I.errorHandler&&(T.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(T.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(T.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(T.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(T.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(T.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(T.canceledNavigationResolution=I.canceledNavigationResolution)}(st,Fr),Fr}let yr=(()=>{class I{constructor(_,A,V,oe,_e,Se,st){this.rootComponentType=_,this.urlSerializer=A,this.rootContexts=V,this.location=oe,this.config=st,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new se.x,this.errorHandler=Zs,this.malformedUriErrorHandler=ii,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,S.of)(void 0),this.urlHandlingStrategy=new Ks,this.routeReuseStrategy=new qs,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=_e.get(ur),this.configLoader.onLoadEndListener=qe=>this.triggerEvent(new go(qe)),this.configLoader.onLoadStartListener=qe=>this.triggerEvent(new ws(qe)),this.ngModule=_e.get(g.h0i),this.console=_e.get(g.c2e);const Kt=_e.get(g.R0b);this.isNgZoneEnabled=Kt instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(st),this.currentUrlTree=function Vr(){return new Yn(new yn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vn(this.currentUrlTree,this.rootComponentType),this.transitions=new z.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null===(_=this.location.getState())||void 0===_?void 0:_.\u0275routerPageId}setupNavigations(_){const A=this.events;return _.pipe((0,je.h)(V=>0!==V.id),(0,Ie.U)(V=>({...V,extractedUrl:this.urlHandlingStrategy.extract(V.rawUrl)})),(0,ve.w)(V=>{let oe=!1,_e=!1;return(0,S.of)(V).pipe((0,ze.b)(Se=>{this.currentNavigation={id:Se.id,initialUrl:Se.rawUrl,extractedUrl:Se.extractedUrl,trigger:Se.source,extras:Se.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ve.w)(Se=>{const st=this.browserUrlTree.toString(),Ft=!this.navigated||Se.extractedUrl.toString()!==st||st!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ft)&&this.urlHandlingStrategy.shouldProcessUrl(Se.rawUrl))return ei(Se.source)&&(this.browserUrlTree=Se.extractedUrl),(0,S.of)(Se).pipe((0,ve.w)(Kt=>{const qe=this.transitions.getValue();return A.next(new rs(Kt.id,this.serializeUrl(Kt.extractedUrl),Kt.source,Kt.restoredState)),qe!==this.transitions.getValue()?H.E:Promise.resolve(Kt)}),function y(I,T,_,A){return(0,ve.w)(V=>function lr(I,T,_,A,V){return new Y(I,T,_,A,V).apply()}(I,T,_,V.extractedUrl,A).pipe((0,Ie.U)(oe=>({...V,urlAfterRedirects:oe}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ze.b)(Kt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Kt.urlAfterRedirects},V.urlAfterRedirects=Kt.urlAfterRedirects}),function xn(I,T,_,A,V,oe){return(0,ye.z)(_e=>function ge(I,T,_,A,V,oe,_e="emptyOnly",Se="legacy"){return new Pe(I,T,_,A,V,_e,Se,oe).recognize().pipe((0,ve.w)(st=>null===st?function ne(I){return new F.y(T=>T.error(I))}(new L):(0,S.of)(st)))}(I,T,_,_e.urlAfterRedirects,A.serialize(_e.urlAfterRedirects),A,V,oe).pipe((0,Ie.U)(Se=>({..._e,targetSnapshot:Se}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ze.b)(Kt=>{if(V.targetSnapshot=Kt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Kt.extras.skipLocationChange){const Fr=this.urlHandlingStrategy.merge(Kt.urlAfterRedirects,Kt.rawUrl);this.setBrowserUrl(Fr,Kt)}this.browserUrlTree=Kt.urlAfterRedirects}const qe=new li(Kt.id,this.serializeUrl(Kt.extractedUrl),this.serializeUrl(Kt.urlAfterRedirects),Kt.targetSnapshot);A.next(qe)}));if(Ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:qe,extractedUrl:Fr,source:ti,restoredState:co,extras:xs}=Se,us=new rs(qe,this.serializeUrl(Fr),ti,co);A.next(us);const Qo=vn(Fr,this.rootComponentType).snapshot;return V={...Se,targetSnapshot:Qo,urlAfterRedirects:Fr,extras:{...xs,skipLocationChange:!1,replaceUrl:!1}},(0,S.of)(V)}return this.rawUrlTree=Se.rawUrl,Se.resolve(null),H.E}),(0,ze.b)(Se=>{const st=new Js(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot);this.triggerEvent(st)}),(0,Ie.U)(Se=>V={...Se,guards:Ao(Se.targetSnapshot,Se.currentSnapshot,this.rootContexts)}),function dt(I,T){return(0,ye.z)(_=>{const{targetSnapshot:A,currentSnapshot:V,guards:{canActivateChecks:oe,canDeactivateChecks:_e}}=_;return 0===_e.length&&0===oe.length?(0,S.of)({..._,guardsResult:!0}):function vt(I,T,_,A){return(0,x.D)(I).pipe((0,ye.z)(V=>function Sr(I,T,_,A,V){const oe=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!oe||0===oe.length)return(0,S.of)(!0);const _e=oe.map(Se=>{var st;const Ft=null!==(st=Bi(T))&&void 0!==st?st:V,sn=uo(Se,Ft);return dr(function xo(I){return I&&Mn(I.canDeactivate)}(sn)?sn.canDeactivate(I,T,_,A):Ft.runInContext(()=>sn(I,T,_,A))).pipe((0,te.P)())});return(0,S.of)(_e).pipe(We())}(V.component,V.route,_,T,A)),(0,te.P)(V=>!0!==V,!0))}(_e,A,V,I).pipe((0,ye.z)(Se=>Se&&function na(I){return"boolean"==typeof I}(Se)?function qt(I,T,_,A){return(0,x.D)(T).pipe((0,ce.b)(V=>(0,K.z)(function In(I,T){return null!==I&&T&&T(new $o(I)),(0,S.of)(!0)}(V.route.parent,A),function Rt(I,T){return null!==I&&T&&T(new ea(I)),(0,S.of)(!0)}(V.route,A),function pi(I,T,_){const A=T[T.length-1],oe=T.slice(0,T.length-1).reverse().map(_e=>function fa(I){const T=I.routeConfig?I.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:I,guards:T}:null}(_e)).filter(_e=>null!==_e).map(_e=>(0,G.P)(()=>{const Se=_e.guards.map(st=>{var Ft;const sn=null!==(Ft=Bi(_e.node))&&void 0!==Ft?Ft:_,Kt=uo(st,sn);return dr(function ra(I){return I&&Mn(I.canActivateChild)}(Kt)?Kt.canActivateChild(A,I):sn.runInContext(()=>Kt(A,I))).pipe((0,te.P)())});return(0,S.of)(Se).pipe(We())}));return(0,S.of)(oe).pipe(We())}(I,V.path,_),function kn(I,T,_){const A=T.routeConfig?T.routeConfig.canActivate:null;if(!A||0===A.length)return(0,S.of)(!0);const V=A.map(oe=>(0,G.P)(()=>{var _e;const Se=null!==(_e=Bi(T))&&void 0!==_e?_e:_,st=uo(oe,Se);return dr(function Yr(I){return I&&Mn(I.canActivate)}(st)?st.canActivate(T,I):Se.runInContext(()=>st(T,I))).pipe((0,te.P)())}));return(0,S.of)(V).pipe(We())}(I,V.route,_))),(0,te.P)(V=>!0!==V,!0))}(A,oe,I,T):(0,S.of)(Se)),(0,Ie.U)(Se=>({..._,guardsResult:Se})))})}(this.ngModule.injector,Se=>this.triggerEvent(Se)),(0,ze.b)(Se=>{if(V.guardsResult=Se.guardsResult,Ge(Se.guardsResult))throw vo(0,Se.guardsResult);const st=new Mi(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot,!!Se.guardsResult);this.triggerEvent(st)}),(0,je.h)(Se=>!!Se.guardsResult||(this.restoreHistory(Se),this.cancelNavigationTransition(Se,"",3),!1)),as(Se=>{if(Se.guards.canActivateChecks.length)return(0,S.of)(Se).pipe((0,ze.b)(st=>{const Ft=new is(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(Ft)}),(0,ve.w)(st=>{let Ft=!1;return(0,S.of)(st).pipe(function As(I,T){return(0,ye.z)(_=>{const{targetSnapshot:A,guards:{canActivateChecks:V}}=_;if(!V.length)return(0,S.of)(_);let oe=0;return(0,x.D)(V).pipe((0,ce.b)(_e=>function Zi(I,T,_,A){const V=I.routeConfig,oe=I._resolve;return void 0!==V?.title&&!Gi(V)&&(oe[Wn]=V.title),function ci(I,T,_,A){const V=function ia(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===V.length)return(0,S.of)({});const oe={};return(0,x.D)(V).pipe((0,ye.z)(_e=>function Ws(I,T,_,A){var V;const oe=null!==(V=Bi(T))&&void 0!==V?V:A,_e=uo(I,oe);return dr(_e.resolve?_e.resolve(T,_):oe.runInContext(()=>_e(T,_)))}(I[_e],T,_,A).pipe((0,te.P)(),(0,ze.b)(Se=>{oe[_e]=Se}))),ot(1),function Dn(I){return(0,Ie.U)(()=>I)}(oe),be(_e=>pe(_e)?H.E:(0,U._)(_e)))}(oe,I,T,A).pipe((0,Ie.U)(_e=>(I._resolvedData=_e,I.data=Er(I,_).resolve,V&&Gi(V)&&(I.data[Wn]=V.title),null)))}(_e.route,A,I,T)),(0,ze.b)(()=>oe++),ot(1),(0,ye.z)(_e=>oe===V.length?(0,S.of)(_):H.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ze.b)({next:()=>Ft=!0,complete:()=>{Ft||(this.restoreHistory(st),this.cancelNavigationTransition(st,"",2))}}))}),(0,ze.b)(st=>{const Ft=new Nr(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(Ft)}))}),as(Se=>{const st=Ft=>{var sn;const Kt=[];null!==(sn=Ft.routeConfig)&&void 0!==sn&&sn.loadComponent&&!Ft.routeConfig._loadedComponent&&Kt.push(this.configLoader.loadComponent(Ft.routeConfig).pipe((0,ze.b)(qe=>{Ft.component=qe}),(0,Ie.U)(()=>{})));for(const qe of Ft.children)Kt.push(...st(qe));return Kt};return(0,O.a)(st(Se.targetSnapshot.root)).pipe((0,Et.d)(),(0,de.q)(1))}),as(()=>this.afterPreactivation()),(0,Ie.U)(Se=>{const st=function Ts(I,T,_){const A=Ds(I,T._root,_?_._root:void 0);return new Pt(A,T)}(this.routeReuseStrategy,Se.targetSnapshot,Se.currentRouterState);return V={...Se,targetRouterState:st}}),(0,ze.b)(Se=>{this.currentUrlTree=Se.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Se.urlAfterRedirects,Se.rawUrl),this.routerState=Se.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Se.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Se),this.browserUrlTree=Se.urlAfterRedirects)}),((I,T,_)=>(0,Ie.U)(A=>(new gn(T,A.targetRouterState,A.currentRouterState,_).activate(I),A)))(this.rootContexts,this.routeReuseStrategy,Se=>this.triggerEvent(Se)),(0,ze.b)({next(){oe=!0},complete(){oe=!0}}),St(()=>{var Se;oe||_e||this.cancelNavigationTransition(V,"",1),(null===(Se=this.currentNavigation)||void 0===Se?void 0:Se.id)===V.id&&(this.currentNavigation=null)}),be(Se=>{if(_e=!0,Ea(Se)){Wo(Se)||(this.navigated=!0,this.restoreHistory(V,!0));const Ft=new js(V.id,this.serializeUrl(V.extractedUrl),Se.message,Se.cancellationCode);if(A.next(Ft),Wo(Se)){const sn=this.urlHandlingStrategy.merge(Se.url,this.rawUrlTree),Kt={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ei(V.source)};this.scheduleNavigation(sn,"imperative",null,Kt,{resolve:V.resolve,reject:V.reject,promise:V.promise})}else V.resolve(!1)}else{var st;this.restoreHistory(V,!0);const Ft=new Qr(V.id,this.serializeUrl(V.extractedUrl),Se,null!==(st=V.targetSnapshot)&&void 0!==st?st:void 0);A.next(Ft);try{V.resolve(this.errorHandler(Se))}catch(sn){V.reject(sn)}}return H.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const A="popstate"===_.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{var V;const oe={replaceUrl:!0},_e=null!==(V=_.state)&&void 0!==V&&V.navigationId?_.state:null;if(_e){const st={..._e};delete st.navigationId,delete st.\u0275routerPageId,0!==Object.keys(st).length&&(oe.state=st)}const Se=this.parseUrl(_.url);this.scheduleNavigation(Se,A,_e,oe)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(es),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,A={}){const{relativeTo:V,queryParams:oe,fragment:_e,queryParamsHandling:Se,preserveFragment:st}=A,Ft=V||this.routerState.root,sn=st?this.currentUrlTree.fragment:_e;let Kt=null;switch(Se){case"merge":Kt={...this.currentUrlTree.queryParams,...oe};break;case"preserve":Kt=this.currentUrlTree.queryParams;break;default:Kt=oe||null}return null!==Kt&&(Kt=this.removeEmptyProps(Kt)),Ze(Ft,this.currentUrlTree,_,Kt,sn??null)}navigateByUrl(_,A={skipLocationChange:!1}){const V=Ge(_)?_:this.parseUrl(_),oe=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(oe,"imperative",null,A)}navigate(_,A={skipLocationChange:!1}){return function Ha(I){for(let T=0;T<I.length;T++){if(null==I[T])throw new g.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,A),A)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let A;try{A=this.urlSerializer.parse(_)}catch(V){A=this.malformedUriErrorHandler(V,this.urlSerializer,_)}return A}isActive(_,A){let V;if(V=!0===A?{...Pa}:!1===A?{...Ia}:A,Ge(_))return fs(this.currentUrlTree,_,V);const oe=this.parseUrl(_);return fs(this.currentUrlTree,oe,V)}removeEmptyProps(_){return Object.keys(_).reduce((A,V)=>{const oe=_[V];return null!=oe&&(A[V]=oe),A},{})}processNavigations(){this.navigations.subscribe(_=>{var A;this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new jn(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(A=this.titleStrategy)||void 0===A||A.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,A,V,oe,_e){if(this.disposed)return Promise.resolve(!1);let Se,st,Ft;_e?(Se=_e.resolve,st=_e.reject,Ft=_e.promise):Ft=new Promise((ti,co)=>{Se=ti,st=co});const sn=++this.navigationId;let Kt;if("computed"===this.canceledNavigationResolution)if(0===this.currentPageId&&(V=this.location.getState()),V&&V.\u0275routerPageId)Kt=V.\u0275routerPageId;else if(oe.replaceUrl||oe.skipLocationChange){var qe;Kt=null!==(qe=this.browserPageId)&&void 0!==qe?qe:0}else{var Fr;Kt=(null!==(Fr=this.browserPageId)&&void 0!==Fr?Fr:0)+1}else Kt=0;return this.setTransition({id:sn,targetPageId:Kt,source:A,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:oe,resolve:Se,reject:st,promise:Ft,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ft.catch(ti=>Promise.reject(ti))}setBrowserUrl(_,A){const V=this.urlSerializer.serialize(_),oe={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(V)||A.extras.replaceUrl?this.location.replaceState(V,"",oe):this.location.go(V,"",oe)}restoreHistory(_,A=!1){if("computed"===this.canceledNavigationResolution){var V,oe;const _e=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(V=this.currentNavigation)||void 0===V?void 0:V.finalUrl)||0===_e?this.currentUrlTree===(null===(oe=this.currentNavigation)||void 0===oe?void 0:oe.finalUrl)&&0===_e&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(_e)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,A,V){const oe=new js(_.id,this.serializeUrl(_.extractedUrl),A,V);this.triggerEvent(oe),_.resolve(!1)}generateNgRouterState(_,A){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:A}:{navigationId:_}}}return I.\u0275fac=function(_){g.$Z()},I.\u0275prov=g.Yz7({token:I,factory:function(){return Po()},providedIn:"root"}),I})();function ei(I){return"imperative"!==I}let No=(()=>{class I{constructor(_,A,V,oe,_e){this.router=_,this.route=A,this.tabIndexAttribute=V,this.renderer=oe,this.el=_e,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new se.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(_){this._preserveFragment=(0,g.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,g.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,g.D6c)(_)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(_){if(null!=this.tabIndexAttribute)return;const A=this.renderer,V=this.el.nativeElement;null!==_?A.setAttribute(V,"tabindex",_):A.removeAttribute(V,"tabindex")}ngOnChanges(_){this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(_){return new(_||I)(g.Y36(yr),g.Y36(Un),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},I.\u0275dir=g.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(_,A){1&_&&g.NdJ("click",function(){return A.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),I})(),Os=(()=>{class I{constructor(_,A,V){this.router=_,this.route=A,this.locationStrategy=V,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new se.x,this.subscription=_.events.subscribe(oe=>{oe instanceof jn&&this.updateTargetUrlAndHref()})}set preserveFragment(_){this._preserveFragment=(0,g.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,g.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,g.D6c)(_)}get replaceUrl(){return this._replaceUrl}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,A,V,oe,_e){return!!(0!==_||A||V||oe||_e||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(_){return new(_||I)(g.Y36(yr),g.Y36(Un),g.Y36(fe.S$))},I.\u0275dir=g.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,A){1&_&&g.NdJ("click",function(oe){return A.onClick(oe.button,oe.ctrlKey,oe.shiftKey,oe.altKey,oe.metaKey)}),2&_&&g.uIk("target",A.target)("href",A.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),I})();class xt{}let ru=(()=>{class I{constructor(_,A,V,oe,_e){this.router=_,this.injector=V,this.preloadingStrategy=oe,this.loader=_e}setUpPreloading(){this.subscription=this.router.events.pipe((0,je.h)(_=>_ instanceof jn),(0,ce.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,A){const V=[];for(const st of A){var oe,_e;st.providers&&!st._injector&&(st._injector=(0,g.MMx)(st.providers,_,`Route: ${st.path}`));const Ft=null!==(oe=st._injector)&&void 0!==oe?oe:_,sn=null!==(_e=st._loadedInjector)&&void 0!==_e?_e:Ft;if(st.loadChildren&&!st._loadedRoutes&&void 0===st.canLoad||st.loadComponent&&!st._loadedComponent)V.push(this.preloadConfig(Ft,st));else if(st.children||st._loadedRoutes){var Se;V.push(this.processRoutes(sn,null!==(Se=st.children)&&void 0!==Se?Se:st._loadedRoutes))}}return(0,x.D)(V).pipe((0,On.J)())}preloadConfig(_,A){return this.preloadingStrategy.preload(A,()=>{let V;V=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(_,A):(0,S.of)(null);const oe=V.pipe((0,ye.z)(_e=>{var Se;return null===_e?(0,S.of)(void 0):(A._loadedRoutes=_e.routes,A._loadedInjector=_e.injector,this.processRoutes(null!==(Se=_e.injector)&&void 0!==Se?Se:_,_e.routes))}));if(A.loadComponent&&!A._loadedComponent){const _e=this.loader.loadComponent(A);return(0,x.D)([oe,_e]).pipe((0,On.J)())}return oe})}}return I.\u0275fac=function(_){return new(_||I)(g.LFG(yr),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(xt),g.LFG(ur))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const tn=new g.OlP("");let _n=(()=>{class I{constructor(_,A,V={}){this.router=_,this.viewportScroller=A,this.options=V,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},V.scrollPositionRestoration=V.scrollPositionRestoration||"disabled",V.anchorScrolling=V.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof rs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof jn&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Xs&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,A){this.router.triggerEvent(new Xs(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(_){g.$Z()},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac}),I})();function It(I,T){return{\u0275kind:I,\u0275providers:T}}function Ar(I){return[{provide:cn,multi:!0,useValue:I}]}function pa(){const I=(0,g.f3M)(g.zs3);return T=>{var _,A;const V=I.get(g.z2F);if(T!==V.components[0])return;const oe=I.get(yr),_e=I.get(Ta);1===I.get(Ga)&&oe.initialNavigation(),null===(_=I.get(Tu,null,g.XFs.Optional))||void 0===_||_.setUpPreloading(),null===(A=I.get(tn,null,g.XFs.Optional))||void 0===A||A.init(),oe.resetRootComponentType(V.componentTypes[0]),_e.next(),_e.complete()}}const Ta=new g.OlP("",{factory:()=>new se.x}),Ga=new g.OlP("",{providedIn:"root",factory:()=>1});const Tu=new g.OlP("");function hl(I){return It(0,[{provide:Tu,useExisting:ru},{provide:xt,useExisting:I}])}const Zo=new g.OlP("ROUTER_FORROOT_GUARD"),qc=[fe.Ye,{provide:Vn,useClass:_i},{provide:yr,useFactory:Po},Si,{provide:Un,useFactory:function it(I){return I.routerState.root},deps:[yr]},ur];function yi(){return new g.PXZ("Router",yr)}let Zt=(()=>{class I{constructor(_){}static forRoot(_,A){return{ngModule:I,providers:[qc,[],Ar(_),{provide:Zo,useFactory:Yi,deps:[[yr,new g.FiY,new g.tp0]]},{provide:nn,useValue:A||{}},null!=A&&A.useHash?{provide:fe.S$,useClass:fe.Do}:{provide:fe.S$,useClass:fe.b0},{provide:tn,useFactory:()=>{const I=(0,g.f3M)(yr),T=(0,g.f3M)(fe.EM),_=(0,g.f3M)(nn);return _.scrollOffset&&T.setOffset(_.scrollOffset),new _n(I,T,_)}},null!=A&&A.preloadingStrategy?hl(A.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:yi},null!=A&&A.initialNavigation?Lt(A):[],[{provide:lo,useFactory:pa},{provide:g.tb,multi:!0,useExisting:lo}]]}}static forChild(_){return{ngModule:I,providers:[Ar(_)]}}}return I.\u0275fac=function(_){return new(_||I)(g.LFG(Zo,8))},I.\u0275mod=g.oAB({type:I}),I.\u0275inj=g.cJS({imports:[zr]}),I})();function Yi(I){return"guarded"}function Lt(I){return["disabled"===I.initialNavigation?It(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const T=(0,g.f3M)(yr);return()=>{T.setUpLocationChangeListener()}}},{provide:Ga,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?It(2,[{provide:Ga,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:T=>{const _=T.get(fe.V_,Promise.resolve());let A=!1;return()=>_.then(()=>new Promise(oe=>{const _e=T.get(yr),Se=T.get(Ta);(function V(oe){T.get(yr).events.pipe((0,je.h)(Se=>Se instanceof jn||Se instanceof js||Se instanceof Qr),(0,Ie.U)(Se=>Se instanceof jn||Se instanceof js&&(0===Se.code||1===Se.code)&&null),(0,je.h)(Se=>null!==Se),(0,de.q)(1)).subscribe(()=>{oe()})})(()=>{oe(!0),A=!0}),_e.afterPreactivation=()=>(oe(!0),A||Se.closed?(0,S.of)(void 0):Se),_e.initialNavigation()}))}}]).\u0275providers:[]]}const lo=new g.OlP("")},3942:(Bt,Re,j)=>{"use strict";j.d(Re,{Z:()=>fe});var g=j(2090),x=j(4859),S=j(6881),z=j(1877);class N{constructor(ve,de){this._delegate=ve,this.firebase=de,(0,S._addComponent)(ve,new x.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,S.deleteApp)(this._delegate)))}_getService(ve,de=S._DEFAULT_ENTRY_NAME){var ae;this._delegate.checkDestroyed();const je=this._delegate.container.getProvider(ve);return!je.isInitialized()&&"EXPLICIT"===(null===(ae=je.getComponent())||void 0===ae?void 0:ae.instantiationMode)&&je.initialize(),je.getImmediate({identifier:de})}_removeServiceInstance(ve,de=S._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(de)}_addComponent(ve){(0,S._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,S._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const K=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function B(){const Ie=function G(Ie){const ve={},de={__esModule:!0,initializeApp:function ye(et,Fe={}){const Ne=S.initializeApp(et,Fe);if((0,g.r3)(ve,Ne.name))return ve[Ne.name];const be=new Ie(Ne,de);return ve[Ne.name]=be,be},app:je,registerVersion:S.registerVersion,setLogLevel:S.setLogLevel,onLog:S.onLog,apps:null,SDK_VERSION:S.SDK_VERSION,INTERNAL:{registerComponent:function ce(et){const Fe=et.name,Ne=Fe.replace("-compat","");if(S._registerComponent(et)&&"PUBLIC"===et.type){const be=(ke=je())=>{if("function"!=typeof ke[Ne])throw K.create("invalid-app-argument",{appName:Fe});return ke[Ne]()};void 0!==et.serviceProps&&(0,g.ZB)(be,et.serviceProps),de[Ne]=be,Ie.prototype[Ne]=function(...ke){return this._getService.bind(this,Fe).apply(this,et.multipleInstances?ke:[])}}return"PUBLIC"===et.type?de[Ne]:null},removeApp:function ae(et){delete ve[et]},useAsService:function ze(et,Fe){return"serverAuth"===Fe?null:Fe},modularAPIs:S}};function je(et){if(!(0,g.r3)(ve,et=et||S._DEFAULT_ENTRY_NAME))throw K.create("no-app",{appName:et});return ve[et]}return de.default=de,Object.defineProperty(de,"apps",{get:function te(){return Object.keys(ve).map(et=>ve[et])}}),je.App=Ie,de}(N);return Ie.INTERNAL=Object.assign(Object.assign({},Ie.INTERNAL),{createFirebaseNamespace:B,extendNamespace:function ve(de){(0,g.ZB)(Ie,de)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ie}(),F=new z.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){F.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ie=self.firebase.SDK_VERSION;Ie&&Ie.indexOf("LITE")>=0&&F.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const fe=U;!function se(Ie){(0,S.registerVersion)("@firebase/app-compat","0.2.10",Ie)}()},6881:(Bt,Re,j)=>{"use strict";j.r(Re),j.d(Re,{FirebaseError:()=>z.ZR,SDK_VERSION:()=>_i,_DEFAULT_ENTRY_NAME:()=>Li,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>on,_apps:()=>mr,_clearComponents:()=>$r,_components:()=>Bn,_getProvider:()=>yn,_registerComponent:()=>Yn,_removeServiceInstance:()=>Tr,deleteApp:()=>Zr,getApp:()=>Pr,getApps:()=>Cr,initializeApp:()=>qn,onLog:()=>Hr,registerVersion:()=>Kr,setLogLevel:()=>sr});var g=j(5861),x=j(4859),S=j(1877),z=j(2090);let O,K;const U=new WeakMap,F=new WeakMap,H=new WeakMap,he=new WeakMap,se=new WeakMap;let ve={get(Je,Ze,bt){if(Je instanceof IDBTransaction){if("done"===Ze)return F.get(Je);if("objectStoreNames"===Ze)return Je.objectStoreNames||H.get(Je);if("store"===Ze)return bt.objectStoreNames[1]?void 0:bt.objectStore(bt.objectStoreNames[0])}return ye(Je[Ze])},set:(Je,Ze,bt)=>(Je[Ze]=bt,!0),has:(Je,Ze)=>Je instanceof IDBTransaction&&("done"===Ze||"store"===Ze)||Ze in Je};function je(Je){return"function"==typeof Je?function ae(Je){return Je!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function B(){return K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Je)?function(...Ze){return Je.apply(te(this),Ze),ye(U.get(this))}:function(...Ze){return ye(Je.apply(te(this),Ze))}:function(Ze,...bt){const Ct=Je.call(te(this),Ze,...bt);return H.set(Ct,Ze.sort?Ze.sort():[Ze]),ye(Ct)}}(Je):(Je instanceof IDBTransaction&&function Ie(Je){if(F.has(Je))return;const Ze=new Promise((bt,Ct)=>{const Jt=()=>{Je.removeEventListener("complete",An),Je.removeEventListener("error",er),Je.removeEventListener("abort",er)},An=()=>{bt(),Jt()},er=()=>{Ct(Je.error||new DOMException("AbortError","AbortError")),Jt()};Je.addEventListener("complete",An),Je.addEventListener("error",er),Je.addEventListener("abort",er)});F.set(Je,Ze)}(Je),((Je,Ze)=>Ze.some(bt=>Je instanceof bt))(Je,function G(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Je,ve):Je)}function ye(Je){if(Je instanceof IDBRequest)return function fe(Je){const Ze=new Promise((bt,Ct)=>{const Jt=()=>{Je.removeEventListener("success",An),Je.removeEventListener("error",er)},An=()=>{bt(ye(Je.result)),Jt()},er=()=>{Ct(Je.error),Jt()};Je.addEventListener("success",An),Je.addEventListener("error",er)});return Ze.then(bt=>{bt instanceof IDBCursor&&U.set(bt,Je)}).catch(()=>{}),se.set(Ze,Je),Ze}(Je);if(he.has(Je))return he.get(Je);const Ze=je(Je);return Ze!==Je&&(he.set(Je,Ze),se.set(Ze,Je)),Ze}const te=Je=>se.get(Je),et=["get","getKey","getAll","getAllKeys","count"],Fe=["put","add","delete","clear"],Ne=new Map;function be(Je,Ze){if(!(Je instanceof IDBDatabase)||Ze in Je||"string"!=typeof Ze)return;if(Ne.get(Ze))return Ne.get(Ze);const bt=Ze.replace(/FromIndex$/,""),Ct=Ze!==bt,Jt=Fe.includes(bt);if(!(bt in(Ct?IDBIndex:IDBObjectStore).prototype)||!Jt&&!et.includes(bt))return;const An=function(){var er=(0,g.Z)(function*(xr,...Fn){const Ti=this.transaction(xr,Jt?"readwrite":"readonly");let Ri=Ti.store;return Ct&&(Ri=Ri.index(Fn.shift())),(yield Promise.all([Ri[bt](...Fn),Jt&&Ti.done]))[0]});return function(Fn){return er.apply(this,arguments)}}();return Ne.set(Ze,An),An}!function de(Je){ve=Je(ve)}(Je=>({...Je,get:(Ze,bt,Ct)=>be(Ze,bt)||Je.get(Ze,bt,Ct),has:(Ze,bt)=>!!be(Ze,bt)||Je.has(Ze,bt)}));class ke{constructor(Ze){this.container=Ze}getPlatformInfoString(){return this.container.getProviders().map(bt=>{if(function ot(Je){return"VERSION"===Je.getComponent()?.type}(bt)){const Ct=bt.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(bt=>bt).join(" ")}}const Qe="@firebase/app",Dt=new S.Yd("@firebase/app"),Li="[DEFAULT]",oi={[Qe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mr=new Map,Bn=new Map;function Wt(Je,Ze){try{Je.container.addComponent(Ze)}catch(bt){Dt.debug(`Component ${Ze.name} failed to register with FirebaseApp ${Je.name}`,bt)}}function on(Je,Ze){Je.container.addOrOverwriteComponent(Ze)}function Yn(Je){const Ze=Je.name;if(Bn.has(Ze))return Dt.debug(`There were multiple attempts to register component ${Ze}.`),!1;Bn.set(Ze,Je);for(const bt of mr.values())Wt(bt,Je);return!0}function yn(Je,Ze){const bt=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return bt&&bt.triggerHeartbeat(),Je.container.getProvider(Ze)}function Tr(Je,Ze,bt=Li){yn(Je,Ze).clearInstance(bt)}function $r(){Bn.clear()}const Dr=new z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vn{constructor(Ze,bt,Ct){this._isDeleted=!1,this._options=Object.assign({},Ze),this._config=Object.assign({},bt),this._name=bt.name,this._automaticDataCollectionEnabled=bt.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new x.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ze){this._isDeleted=Ze}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}const _i="9.22.0";function qn(Je,Ze={}){let bt=Je;"object"!=typeof Ze&&(Ze={name:Ze});const Ct=Object.assign({name:Li,automaticDataCollectionEnabled:!1},Ze),Jt=Ct.name;if("string"!=typeof Jt||!Jt)throw Dr.create("bad-app-name",{appName:String(Jt)});if(bt||(bt=(0,z.aH)()),!bt)throw Dr.create("no-options");const An=mr.get(Jt);if(An){if((0,z.vZ)(bt,An.options)&&(0,z.vZ)(Ct,An.config))return An;throw Dr.create("duplicate-app",{appName:Jt})}const er=new x.H0(Jt);for(const Fn of Bn.values())er.addComponent(Fn);const xr=new Vn(bt,Ct,er);return mr.set(Jt,xr),xr}function Pr(Je=Li){const Ze=mr.get(Je);if(!Ze&&Je===Li&&(0,z.aH)())return qn();if(!Ze)throw Dr.create("no-app",{appName:Je});return Ze}function Cr(){return Array.from(mr.values())}function Zr(Je){return br.apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(Je){const Ze=Je.name;mr.has(Ze)&&(mr.delete(Ze),yield Promise.all(Je.container.getProviders().map(bt=>bt.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function Kr(Je,Ze,bt){var Ct;let Jt=null!==(Ct=oi[Je])&&void 0!==Ct?Ct:Je;bt&&(Jt+=`-${bt}`);const An=Jt.match(/\s|\//),er=Ze.match(/\s|\//);if(An||er){const xr=[`Unable to register library "${Jt}" with version "${Ze}":`];return An&&xr.push(`library name "${Jt}" contains illegal characters (whitespace or "/")`),An&&er&&xr.push("and"),er&&xr.push(`version name "${Ze}" contains illegal characters (whitespace or "/")`),void Dt.warn(xr.join(" "))}Yn(new x.wA(`${Jt}-version`,()=>({library:Jt,version:Ze}),"VERSION"))}function Hr(Je,Ze){if(null!==Je&&"function"!=typeof Je)throw Dr.create("invalid-log-argument");(0,S.Am)(Je,Ze)}function sr(Je){(0,S.Ub)(Je)}const Oe="firebase-heartbeat-store";let Ae=null;function Be(){return Ae||(Ae=function ce(Je,Ze,{blocked:bt,upgrade:Ct,blocking:Jt,terminated:An}={}){const er=indexedDB.open(Je,Ze),xr=ye(er);return Ct&&er.addEventListener("upgradeneeded",Fn=>{Ct(ye(er.result),Fn.oldVersion,Fn.newVersion,ye(er.transaction),Fn)}),bt&&er.addEventListener("blocked",Fn=>bt(Fn.oldVersion,Fn.newVersion,Fn)),xr.then(Fn=>{An&&Fn.addEventListener("close",()=>An()),Jt&&Fn.addEventListener("versionchange",Ti=>Jt(Ti.oldVersion,Ti.newVersion,Ti))}).catch(()=>{}),xr}("firebase-heartbeat-database",1,{upgrade:(Je,Ze)=>{0===Ze&&Je.createObjectStore(Oe)}}).catch(Je=>{throw Dr.create("idb-open",{originalErrorMessage:Je.message})})),Ae}function Ye(){return(Ye=(0,g.Z)(function*(Je){try{return yield(yield Be()).transaction(Oe).objectStore(Oe).get(Sn(Je))}catch(Ze){if(Ze instanceof z.ZR)Dt.warn(Ze.message);else{const bt=Dr.create("idb-get",{originalErrorMessage:Ze?.message});Dt.warn(bt.message)}}})).apply(this,arguments)}function Mt(Je,Ze){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(Je,Ze){try{const Ct=(yield Be()).transaction(Oe,"readwrite");yield Ct.objectStore(Oe).put(Ze,Sn(Je)),yield Ct.done}catch(bt){if(bt instanceof z.ZR)Dt.warn(bt.message);else{const Ct=Dr.create("idb-set",{originalErrorMessage:bt?.message});Dt.warn(Ct.message)}}})).apply(this,arguments)}function Sn(Je){return`${Je.name}!${Je.options.appId}`}class De{constructor(Ze){this.container=Ze,this._heartbeatsCache=null;const bt=this.container.getProvider("app").getImmediate();this._storage=new ht(bt),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Ze=this;return(0,g.Z)(function*(){const Ct=Ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Jt=me();if(null===Ze._heartbeatsCache&&(Ze._heartbeatsCache=yield Ze._heartbeatsCachePromise),Ze._heartbeatsCache.lastSentHeartbeatDate!==Jt&&!Ze._heartbeatsCache.heartbeats.some(An=>An.date===Jt))return Ze._heartbeatsCache.heartbeats.push({date:Jt,agent:Ct}),Ze._heartbeatsCache.heartbeats=Ze._heartbeatsCache.heartbeats.filter(An=>{const er=new Date(An.date).valueOf();return Date.now()-er<=2592e6}),Ze._storage.overwrite(Ze._heartbeatsCache)})()}getHeartbeatsHeader(){var Ze=this;return(0,g.Z)(function*(){if(null===Ze._heartbeatsCache&&(yield Ze._heartbeatsCachePromise),null===Ze._heartbeatsCache||0===Ze._heartbeatsCache.heartbeats.length)return"";const bt=me(),{heartbeatsToSend:Ct,unsentEntries:Jt}=function Ge(Je,Ze=1024){const bt=[];let Ct=Je.slice();for(const Jt of Je){const An=bt.find(er=>er.agent===Jt.agent);if(An){if(An.dates.push(Jt.date),kt(bt)>Ze){An.dates.pop();break}}else if(bt.push({agent:Jt.agent,dates:[Jt.date]}),kt(bt)>Ze){bt.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:bt,unsentEntries:Ct}}(Ze._heartbeatsCache.heartbeats),An=(0,z.L)(JSON.stringify({version:2,heartbeats:Ct}));return Ze._heartbeatsCache.lastSentHeartbeatDate=bt,Jt.length>0?(Ze._heartbeatsCache.heartbeats=Jt,yield Ze._storage.overwrite(Ze._heartbeatsCache)):(Ze._heartbeatsCache.heartbeats=[],Ze._storage.overwrite(Ze._heartbeatsCache)),An})()}}function me(){return(new Date).toISOString().substring(0,10)}class ht{constructor(Ze){this.app=Ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,z.hl)()&&(0,z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ze=this;return(0,g.Z)(function*(){return(yield Ze._canUseIndexedDBPromise)&&(yield function lt(Je){return Ye.apply(this,arguments)}(Ze.app))||{heartbeats:[]}})()}overwrite(Ze){var bt=this;return(0,g.Z)(function*(){var Ct;if(yield bt._canUseIndexedDBPromise){const An=yield bt.read();return Mt(bt.app,{lastSentHeartbeatDate:null!==(Ct=Ze.lastSentHeartbeatDate)&&void 0!==Ct?Ct:An.lastSentHeartbeatDate,heartbeats:Ze.heartbeats})}})()}add(Ze){var bt=this;return(0,g.Z)(function*(){var Ct;if(yield bt._canUseIndexedDBPromise){const An=yield bt.read();return Mt(bt.app,{lastSentHeartbeatDate:null!==(Ct=Ze.lastSentHeartbeatDate)&&void 0!==Ct?Ct:An.lastSentHeartbeatDate,heartbeats:[...An.heartbeats,...Ze.heartbeats]})}})()}}function kt(Je){return(0,z.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function ln(Je){Yn(new x.wA("platform-logger",Ze=>new ke(Ze),"PRIVATE")),Yn(new x.wA("heartbeat",Ze=>new De(Ze),"PRIVATE")),Kr(Qe,"0.9.10",Je),Kr(Qe,"0.9.10","esm2017"),Kr("fire-js","")}("")},4859:(Bt,Re,j)=>{"use strict";j.d(Re,{H0:()=>G,wA:()=>S});var g=j(5861),x=j(2090);class S{constructor(U,F,H){this.name=U,this.instanceFactory=F,this.type=H,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const z="[DEFAULT]";class N{constructor(U,F){this.name=U,this.container=F,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const F=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(F)){const H=new x.BH;if(this.instancesDeferred.set(F,H),this.isInitialized(F)||this.shouldAutoInitialize())try{const he=this.getOrInitializeService({instanceIdentifier:F});he&&H.resolve(he)}catch{}}return this.instancesDeferred.get(F).promise}getImmediate(U){var F;const H=this.normalizeInstanceIdentifier(U?.identifier),he=null!==(F=U?.optional)&&void 0!==F&&F;if(!this.isInitialized(H)&&!this.shouldAutoInitialize()){if(he)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:H})}catch(se){if(he)return null;throw se}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function K(B){return"EAGER"===B.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:z})}catch{}for(const[F,H]of this.instancesDeferred.entries()){const he=this.normalizeInstanceIdentifier(F);try{const se=this.getOrInitializeService({instanceIdentifier:he});H.resolve(se)}catch{}}}}clearInstance(U=z){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,g.Z)(function*(){const F=Array.from(U.instances.values());yield Promise.all([...F.filter(H=>"INTERNAL"in H).map(H=>H.INTERNAL.delete()),...F.filter(H=>"_delete"in H).map(H=>H._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=z){return this.instances.has(U)}getOptions(U=z){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:F={}}=U,H=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(H))throw Error(`${this.name}(${H}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const he=this.getOrInitializeService({instanceIdentifier:H,options:F});for(const[se,fe]of this.instancesDeferred.entries())H===this.normalizeInstanceIdentifier(se)&&fe.resolve(he);return he}onInit(U,F){var H;const he=this.normalizeInstanceIdentifier(F),se=null!==(H=this.onInitCallbacks.get(he))&&void 0!==H?H:new Set;se.add(U),this.onInitCallbacks.set(he,se);const fe=this.instances.get(he);return fe&&U(fe,he),()=>{se.delete(U)}}invokeOnInitCallbacks(U,F){const H=this.onInitCallbacks.get(F);if(H)for(const he of H)try{he(U,F)}catch{}}getOrInitializeService({instanceIdentifier:U,options:F={}}){let H=this.instances.get(U);if(!H&&this.component&&(H=this.component.instanceFactory(this.container,{instanceIdentifier:(B=U,B===z?void 0:B),options:F}),this.instances.set(U,H),this.instancesOptions.set(U,F),this.invokeOnInitCallbacks(H,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,H)}catch{}var B;return H||null}normalizeInstanceIdentifier(U=z){return this.component?this.component.multipleInstances?U:z:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class G{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const F=this.getProvider(U.name);if(F.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);F.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const F=new N(U,this);return this.providers.set(U,F),F}getProviders(){return Array.from(this.providers.values())}}},1877:(Bt,Re,j)=>{"use strict";j.d(Re,{Am:()=>B,Ub:()=>G,Yd:()=>K,in:()=>x});const g=[];var x=(()=>{return(U=x||(x={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",x;var U})();const S={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},z=x.INFO,N={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},O=(U,F,...H)=>{if(F<U.logLevel)return;const he=(new Date).toISOString(),se=N[F];if(!se)throw new Error(`Attempted to log a message with an invalid logType (value: ${F})`);console[se](`[${he}]  ${U.name}:`,...H)};class K{constructor(F){this.name=F,this._logLevel=z,this._logHandler=O,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(F){if(!(F in x))throw new TypeError(`Invalid value "${F}" assigned to \`logLevel\``);this._logLevel=F}setLogLevel(F){this._logLevel="string"==typeof F?S[F]:F}get logHandler(){return this._logHandler}set logHandler(F){if("function"!=typeof F)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=F}get userLogHandler(){return this._userLogHandler}set userLogHandler(F){this._userLogHandler=F}debug(...F){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...F),this._logHandler(this,x.DEBUG,...F)}log(...F){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...F),this._logHandler(this,x.VERBOSE,...F)}info(...F){this._userLogHandler&&this._userLogHandler(this,x.INFO,...F),this._logHandler(this,x.INFO,...F)}warn(...F){this._userLogHandler&&this._userLogHandler(this,x.WARN,...F),this._logHandler(this,x.WARN,...F)}error(...F){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...F),this._logHandler(this,x.ERROR,...F)}}function G(U){g.forEach(F=>{F.setLogLevel(U)})}function B(U,F){for(const H of g){let he=null;F&&F.level&&(he=S[F.level]),H.userLogHandler=null===U?null:(se,fe,...Ie)=>{const ve=Ie.map(de=>{if(null==de)return null;if("string"==typeof de)return de;if("number"==typeof de||"boolean"==typeof de)return de.toString();if(de instanceof Error)return de.message;try{return JSON.stringify(de)}catch{return null}}).filter(de=>de).join(" ");fe>=(he??se.logLevel)&&U({level:x[fe].toLowerCase(),message:ve,args:Ie,type:se.name})}}}},259:(Bt,Re,j)=>{"use strict";j.d(Re,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=j(6881);(0,g.registerVersion)("firebase","9.22.0","app")},9260:(Bt,Re,j)=>{"use strict";j.d(Re,{Z:()=>g.Z});var g=j(3942);g.Z.registerVersion("firebase","9.22.0","app-compat")},2644:(Bt,Re,j)=>{"use strict";j.r(Re);var g=j(5861),x=j(3942),S=j(2090),z=j(6881),N=j(655),O=j(1877),K=j(4859);const fe=function he(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ie=function se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new S.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ae=new O.Yd("@firebase/auth");function ye(m,...d){ae.logLevel<=O.in.ERROR&&ae.error(`Auth (${z.SDK_VERSION}): ${m}`,...d)}function te(m,...d){throw Fe(m,...d)}function ce(m,...d){return Fe(m,...d)}function ze(m,d,h){const E=Object.assign(Object.assign({},Ie()),{[d]:h});return new S.LL("auth","Firebase",E).create(d,{appName:m.name})}function et(m,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&te(m,"argument-error"),ze(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fe(m,...d){if("string"!=typeof m){const h=d[0],E=[...d.slice(1)];return E[0]&&(E[0].appName=m.name),m._errorFactory.create(h,...E)}return ve.create(m,...d)}function Ne(m,d,...h){if(!m)throw Fe(d,...h)}function be(m){const d="INTERNAL ASSERTION FAILED: "+m;throw ye(d),new Error(d)}function ke(m,d){m||be(d)}function ot(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Qe(){return"http:"===Et()||"https:"===Et()}function Et(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Ln{constructor(d,h){this.shortDelay=d,this.longDelay=h,ke(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,S.uI)()||(0,S.b$)()}get(){return function Dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qe()||(0,S.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dn(m,d){ke(m.emulator,"Emulator should always be set here");const{url:h}=m.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class St{static initialize(d,h,E){this.fetchImpl=d,h&&(this.headersImpl=h),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},On=new Ln(3e4,6e4);function rn(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function wt(m,d,h,E){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,g.Z)(function*(m,d,h,E,q={}){return Cn(m,q,(0,g.Z)(function*(){let ie={},Ue={};E&&("GET"===d?Ue=E:ie={body:JSON.stringify(E)});const Xe=(0,S.xO)(Object.assign({key:m.config.apiKey},Ue)).slice(1),pt=yield m._getAdditionalHeaders();return pt["Content-Type"]="application/json",m.languageCode&&(pt["X-Firebase-Locale"]=m.languageCode),St.fetch()(Ir(m,m.config.apiHost,h,Xe),Object.assign({method:d,headers:pt,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function Cn(m,d,h){return cr.apply(this,arguments)}function cr(){return(cr=(0,g.Z)(function*(m,d,h){m._canInitEmulator=!1;const E=Object.assign(Object.assign({},Nn),d);try{const q=new ki(m),ie=yield Promise.race([h(),q.promise]);q.clearNetworkTimeout();const Ue=yield ie.json();if("needConfirmation"in Ue)throw gr(m,"account-exists-with-different-credential",Ue);if(ie.ok&&!("errorMessage"in Ue))return Ue;{const Xe=ie.ok?Ue.errorMessage:Ue.error.message,[pt,Ht]=Xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pt)throw gr(m,"credential-already-in-use",Ue);if("EMAIL_EXISTS"===pt)throw gr(m,"email-already-in-use",Ue);if("USER_DISABLED"===pt)throw gr(m,"user-disabled",Ue);const hn=E[pt]||pt.toLowerCase().replace(/[_\s]+/g,"-");if(Ht)throw ze(m,hn,Ht);te(m,hn)}}catch(q){if(q instanceof S.ZR)throw q;te(m,"network-request-failed",{message:String(q)})}})).apply(this,arguments)}function Xn(m,d,h,E){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(m,d,h,E,q={}){const ie=yield wt(m,d,h,E,q);return"mfaPendingCredential"in ie&&te(m,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function Ir(m,d,h,E){const q=`${d}${h}?${E}`;return m.config.emulator?Dn(m.config,q):`${m.config.apiScheme}://${q}`}class ki{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,E)=>{this.timer=setTimeout(()=>E(ce(this.auth,"network-request-failed")),On.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gr(m,d,h){const E={appName:m.name};h.email&&(E.email=h.email),h.phoneNumber&&(E.phoneNumber=h.phoneNumber);const q=ce(m,d,E);return q.customData._tokenResponse=h,q}function Pn(){return(Pn=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function zn(m,d){return dr.apply(this,arguments)}function dr(){return(dr=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function jt(m,d){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function ri(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Li(){return(Li=(0,g.Z)(function*(m,d=!1){const h=(0,S.m9)(m),E=yield h.getIdToken(d),q=mr(E);Ne(q&&q.exp&&q.auth_time&&q.iat,h.auth,"internal-error");const ie="object"==typeof q.firebase?q.firebase:void 0,Ue=ie?.sign_in_provider;return{claims:q,token:E,authTime:ri(oi(q.auth_time)),issuedAtTime:ri(oi(q.iat)),expirationTime:ri(oi(q.exp)),signInProvider:Ue||null,signInSecondFactor:ie?.sign_in_second_factor||null}})).apply(this,arguments)}function oi(m){return 1e3*Number(m)}function mr(m){const[d,h,E]=m.split(".");if(void 0===d||void 0===h||void 0===E)return ye("JWT malformed, contained fewer than 3 sections"),null;try{const q=(0,S.tV)(h);return q?JSON.parse(q):(ye("Failed to decode base64 JWT payload"),null)}catch(q){return ye("Caught error parsing JWT payload as JSON",q?.toString()),null}}function Wt(m,d){return on.apply(this,arguments)}function on(){return(on=(0,g.Z)(function*(m,d,h=!1){if(h)return d;try{return yield d}catch(E){throw E instanceof S.ZR&&Yn(E)&&m.auth.currentUser===m&&(yield m.auth.signOut()),E}})).apply(this,arguments)}function Yn({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class yn{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const q=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,q)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const E=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield h.iteration()}),E)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class Tr{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $r(m){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,g.Z)(function*(m){var d;const h=m.auth,E=yield m.getIdToken(),q=yield Wt(m,jt(h,{idToken:E}));Ne(q?.users.length,h,"internal-error");const ie=q.users[0];m._notifyReloadListener(ie);const Ue=null!==(d=ie.providerUserInfo)&&void 0!==d&&d.length?qn(ie.providerUserInfo):[],Xe=_i(m.providerData,Ue),hn=!!m.isAnonymous&&!(m.email&&ie.passwordHash||Xe?.length),pn={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:Xe,metadata:new Tr(ie.createdAt,ie.lastLoginAt),isAnonymous:hn};Object.assign(m,pn)})).apply(this,arguments)}function Vn(){return(Vn=(0,g.Z)(function*(m){const d=(0,S.m9)(m);yield $r(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function _i(m,d){return[...m.filter(E=>!d.some(q=>q.providerId===E.providerId)),...d]}function qn(m){return m.map(d=>{var{providerId:h}=d,E=(0,N._T)(d,["providerId"]);return{providerId:h,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Cr(){return(Cr=(0,g.Z)(function*(m,d){const h=yield Cn(m,{},(0,g.Z)(function*(){const E=(0,S.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:q,apiKey:ie}=m.config,Ue=Ir(m,q,"/v1/token",`key=${ie}`),Xe=yield m._getAdditionalHeaders();return Xe["Content-Type"]="application/x-www-form-urlencoded",St.fetch()(Ue,{method:"POST",headers:Xe,body:E})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class Zr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ne(d.idToken,"internal-error"),Ne(typeof d.idToken<"u","internal-error"),Ne(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Bn(m){const d=mr(m);return Ne(d,"internal-error"),Ne(typeof d.exp<"u","internal-error"),Ne(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}getToken(d,h=!1){var E=this;return(0,g.Z)(function*(){return Ne(!E.accessToken||E.refreshToken,d,"user-token-expired"),h||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(d,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var E=this;return(0,g.Z)(function*(){const{accessToken:q,refreshToken:ie,expiresIn:Ue}=yield function Pr(m,d){return Cr.apply(this,arguments)}(d,h);E.updateTokensAndExpiration(q,ie,Number(Ue))})()}updateTokensAndExpiration(d,h,E){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(d,h){const{refreshToken:E,accessToken:q,expirationTime:ie}=h,Ue=new Zr;return E&&(Ne("string"==typeof E,"internal-error",{appName:d}),Ue.refreshToken=E),q&&(Ne("string"==typeof q,"internal-error",{appName:d}),Ue.accessToken=q),ie&&(Ne("number"==typeof ie,"internal-error",{appName:d}),Ue.expirationTime=ie),Ue}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Zr,this.toJSON())}_performRefresh(){return be("not implemented")}}function br(m,d){Ne("string"==typeof m||typeof m>"u","internal-error",{appName:d})}class Kr{constructor(d){var{uid:h,auth:E,stsTokenManager:q}=d,ie=(0,N._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=E,this.stsTokenManager=q,this.accessToken=q.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new Tr(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,g.Z)(function*(){const E=yield Wt(h,h.stsTokenManager.getToken(h.auth,d));return Ne(E,h.auth,"internal-error"),h.accessToken!==E&&(h.accessToken=E,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),E})()}getIdTokenResult(d){return function fs(m){return Li.apply(this,arguments)}(this,d)}reload(){return function Dr(m){return Vn.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ne(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new Kr(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var E=this;return(0,g.Z)(function*(){let q=!1;d.idToken&&d.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(d),q=!0),h&&(yield $r(E)),yield E.auth._persistUserIfCurrent(E),q&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var d=this;return(0,g.Z)(function*(){const h=yield d.getIdToken();return yield Wt(d,function Br(m,d){return Pn.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var E,q,ie,Ue,Xe,pt,Ht,hn;const pn=null!==(E=h.displayName)&&void 0!==E?E:void 0,qi=null!==(q=h.email)&&void 0!==q?q:void 0,Ra=null!==(ie=h.phoneNumber)&&void 0!==ie?ie:void 0,cd=null!==(Ue=h.photoURL)&&void 0!==Ue?Ue:void 0,hh=null!==(Xe=h.tenantId)&&void 0!==Xe?Xe:void 0,dd=null!==(pt=h._redirectEventId)&&void 0!==pt?pt:void 0,Sl=null!==(Ht=h.createdAt)&&void 0!==Ht?Ht:void 0,Al=null!==(hn=h.lastLoginAt)&&void 0!==hn?hn:void 0,{uid:tl,emailVerified:xl,isAnonymous:Rl,providerData:hd,stsTokenManager:fh}=h;Ne(tl&&fh,d,"internal-error");const Lo=Zr.fromJSON(this.name,fh);Ne("string"==typeof tl,d,"internal-error"),br(pn,d.name),br(qi,d.name),Ne("boolean"==typeof xl,d,"internal-error"),Ne("boolean"==typeof Rl,d,"internal-error"),br(Ra,d.name),br(cd,d.name),br(hh,d.name),br(dd,d.name),br(Sl,d.name),br(Al,d.name);const Ec=new Kr({uid:tl,auth:d,email:qi,emailVerified:xl,displayName:pn,isAnonymous:Rl,photoURL:cd,phoneNumber:Ra,tenantId:hh,stsTokenManager:Lo,createdAt:Sl,lastLoginAt:Al});return hd&&Array.isArray(hd)&&(Ec.providerData=hd.map(ph=>Object.assign({},ph))),dd&&(Ec._redirectEventId=dd),Ec}static _fromIdTokenResponse(d,h,E=!1){return(0,g.Z)(function*(){const q=new Zr;q.updateFromServerResponse(h);const ie=new Kr({uid:h.localId,auth:d,stsTokenManager:q,isAnonymous:E});return yield $r(ie),ie})()}}const Hr=new Map;function sr(m){ke(m instanceof Function,"Expected a class definition");let d=Hr.get(m);return d?(ke(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,Hr.set(m,d),d)}const ui=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(h,E){var q=this;return(0,g.Z)(function*(){q.storage[h]=E})()}_get(h){var E=this;return(0,g.Z)(function*(){const q=E.storage[h];return void 0===q?null:q})()}_remove(h){var E=this;return(0,g.Z)(function*(){delete E.storage[h]})()}_addListener(h,E){}_removeListener(h,E){}}return m.type="NONE",m})();function Oe(m,d,h){return`firebase:${m}:${d}:${h}`}class Ae{constructor(d,h,E){this.persistence=d,this.auth=h,this.userKey=E;const{config:q,name:ie}=this.auth;this.fullUserKey=Oe(this.userKey,q.apiKey,ie),this.fullPersistenceKey=Oe("persistence",q.apiKey,ie),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?Kr._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,g.Z)(function*(){if(h.persistence===d)return;const E=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,E?h.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,E="authUser"){return(0,g.Z)(function*(){if(!h.length)return new Ae(sr(ui),d,E);const q=(yield Promise.all(h.map(function(){var Ht=(0,g.Z)(function*(hn){if(yield hn._isAvailable())return hn});return function(hn){return Ht.apply(this,arguments)}}()))).filter(Ht=>Ht);let ie=q[0]||sr(ui);const Ue=Oe(E,d.config.apiKey,d.name);let Xe=null;for(const Ht of h)try{const hn=yield Ht._get(Ue);if(hn){const pn=Kr._fromJSON(d,hn);Ht!==ie&&(Xe=pn),ie=Ht;break}}catch{}const pt=q.filter(Ht=>Ht._shouldAllowMigration);return ie._shouldAllowMigration&&pt.length?(ie=pt[0],Xe&&(yield ie._set(Ue,Xe.toJSON())),yield Promise.all(h.map(function(){var Ht=(0,g.Z)(function*(hn){if(hn!==ie)try{yield hn._remove(Ue)}catch{}});return function(hn){return Ht.apply(this,arguments)}}())),new Ae(ie,d,E)):new Ae(ie,d,E)})()}}function Be(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(fn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(lt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(or(d))return"Blackberry";if(Ce(d))return"Webos";if(Ye(d))return"Safari";if((d.includes("chrome/")||Mt(d))&&!d.includes("edge/"))return"Chrome";if(Sn(d))return"Android";{const E=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function lt(m=(0,S.z$)()){return/firefox\//i.test(m)}function Ye(m=(0,S.z$)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Mt(m=(0,S.z$)()){return/crios\//i.test(m)}function fn(m=(0,S.z$)()){return/iemobile/i.test(m)}function Sn(m=(0,S.z$)()){return/android/i.test(m)}function or(m=(0,S.z$)()){return/blackberry/i.test(m)}function Ce(m=(0,S.z$)()){return/webos/i.test(m)}function De(m=(0,S.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function kt(m=(0,S.z$)()){return De(m)||Sn(m)||Ce(m)||or(m)||/windows phone/i.test(m)||fn(m)}function Je(m,d=[]){let h;switch(m){case"Browser":h=Be((0,S.z$)());break;case"Worker":h=`${Be((0,S.z$)())}-${m}`;break;default:h=m}const E=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${z.SDK_VERSION}/${E}`}function bt(){return(bt=(0,g.Z)(function*(m){return(yield wt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ct(m,d){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,g.Z)(function*(m,d){return wt(m,"GET","/v2/recaptchaConfig",rn(m,d))})).apply(this,arguments)}function An(m){return void 0!==m&&void 0!==m.getResponse}function er(m){return void 0!==m&&void 0!==m.enterprise}class xr{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(h=>"EMAIL_PASSWORD_PROVIDER"===h.provider&&"OFF"!==h.enforcementState)}}function Ti(m){return new Promise((d,h)=>{const E=document.createElement("script");E.setAttribute("src",m),E.onload=d,E.onerror=q=>{const ie=ce("internal-error");ie.customData=q,h(ie)},E.type="text/javascript",E.charset="UTF-8",function Fn(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(E)})}function Ri(m){return`__${m}${Math.floor(1e6*Math.random())}`}class Kn{constructor(d){this.type="recaptcha-enterprise",this.auth=hr(d)}verify(d="verify",h=!1){var E=this;return(0,g.Z)(function*(){function ie(){return ie=(0,g.Z)(function*(Xe){if(!h){if(null==Xe.tenantId&&null!=Xe._agentRecaptchaConfig)return Xe._agentRecaptchaConfig.siteKey;if(null!=Xe.tenantId&&void 0!==Xe._tenantRecaptchaConfigs[Xe.tenantId])return Xe._tenantRecaptchaConfigs[Xe.tenantId].siteKey}return new Promise(function(){var pt=(0,g.Z)(function*(Ht,hn){Ct(Xe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(pn=>{if(void 0!==pn.recaptchaKey){const qi=new xr(pn);return null==Xe.tenantId?Xe._agentRecaptchaConfig=qi:Xe._tenantRecaptchaConfigs[Xe.tenantId]=qi,Ht(qi.siteKey)}hn(new Error("recaptcha Enterprise site key undefined"))}).catch(pn=>{hn(pn)})});return function(Ht,hn){return pt.apply(this,arguments)}}())}),ie.apply(this,arguments)}function Ue(Xe,pt,Ht){const hn=window.grecaptcha;er(hn)?hn.enterprise.ready(()=>{hn.enterprise.execute(Xe,{action:d}).then(pn=>{pt(pn)}).catch(()=>{pt("NO_RECAPTCHA")})}):Ht(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Xe,pt)=>{(function q(Xe){return ie.apply(this,arguments)})(E.auth).then(Ht=>{if(!h&&er(window.grecaptcha))Ue(Ht,Xe,pt);else{if(typeof window>"u")return void pt(new Error("RecaptchaVerifier is only supported in browser"));Ti("https://www.google.com/recaptcha/enterprise.js?render="+Ht).then(()=>{Ue(Ht,Xe,pt)}).catch(hn=>{pt(hn)})}}).catch(Ht=>{pt(Ht)})})})()}}function Ei(m,d,h){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,g.Z)(function*(m,d,h,E=!1){const q=new Kn(m);let ie;try{ie=yield q.verify(h)}catch{ie=yield q.verify(h,!0)}const Ue=Object.assign({},d);return Object.assign(Ue,E?{captchaResp:ie}:{captchaResponse:ie}),Object.assign(Ue,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ue,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ue})).apply(this,arguments)}class ps{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const E=ie=>new Promise((Ue,Xe)=>{try{Ue(d(ie))}catch(pt){Xe(pt)}});E.onAbort=h,this.queue.push(E);const q=this.queue.length-1;return()=>{this.queue[q]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,g.Z)(function*(){if(h.auth.currentUser===d)return;const E=[];try{for(const q of h.queue)yield q(d),q.onAbort&&E.push(q.onAbort)}catch(q){E.reverse();for(const ie of E)try{ie()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:q?.message})}})()}}class po{constructor(d,h,E,q){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=E,this.config=q,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Di(this),this.idTokenSubscription=new Di(this),this.beforeStateQueue=new ps(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=q.sdkClientVersion}_initializeWithPersistence(d,h){var E=this;return h&&(this._popupRedirectResolver=sr(h)),this._initializationPromise=this.queue((0,g.Z)(function*(){var q,ie;if(!E._deleted&&(E.persistenceManager=yield Ae.create(E,d),!E._deleted)){if(null!==(q=E._popupRedirectResolver)&&void 0!==q&&q._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(h),E.lastNotifiedUid=(null===(ie=E.currentUser)||void 0===ie?void 0:ie.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUser(d){var h=this;return(0,g.Z)(function*(){var E;const q=yield h.assertedPersistence.getCurrentUser();let ie=q,Ue=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Xe=null===(E=h.redirectUser)||void 0===E?void 0:E._redirectEventId,pt=ie?._redirectEventId,Ht=yield h.tryRedirectSignIn(d);(!Xe||Xe===pt)&&Ht?.user&&(ie=Ht.user,Ue=!0)}if(!ie)return h.directlySetCurrentUser(null);if(!ie._redirectEventId){if(Ue)try{yield h.beforeStateQueue.runMiddleware(ie)}catch(Xe){ie=q,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Xe))}return ie?h.reloadAndSetCurrentUserOrClear(ie):h.directlySetCurrentUser(null)}return Ne(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===ie._redirectEventId?h.directlySetCurrentUser(ie):h.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(d){var h=this;return(0,g.Z)(function*(){let E=null;try{E=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,g.Z)(function*(){try{yield $r(d)}catch(E){if("auth/network-request-failed"!==E?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function un(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,g.Z)(function*(){const E=d?(0,S.m9)(d):null;return E&&Ne(E.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(E&&E._clone(h))})()}_updateCurrentUser(d,h=!1){var E=this;return(0,g.Z)(function*(){if(!E._deleted)return d&&Ne(E.tenantId===d.tenantId,E,"tenant-id-mismatch"),h||(yield E.beforeStateQueue.runMiddleware(d)),E.queue((0,g.Z)(function*(){yield E.directlySetCurrentUser(d),E.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var h=this;return this.queue((0,g.Z)(function*(){yield h.assertedPersistence.setPersistence(sr(d))}))}initializeRecaptchaConfig(){var d=this;return(0,g.Z)(function*(){const h=yield Ct(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new xr(h);null==d.tenantId?d._agentRecaptchaConfig=E:d._tenantRecaptchaConfigs[d.tenantId]=E,E.emailPasswordEnabled&&new Kn(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new S.LL("auth","Firebase",d())}onAuthStateChanged(d,h,E){return this.registerStateListener(this.authStateSubscription,d,h,E)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,E){return this.registerStateListener(this.idTokenSubscription,d,h,E)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var E=this;return(0,g.Z)(function*(){const q=yield E.getOrInitRedirectPersistenceManager(h);return null===d?q.removeCurrentUser():q.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,g.Z)(function*(){if(!h.redirectPersistenceManager){const E=d&&sr(d)||h._popupRedirectResolver;Ne(E,h,"argument-error"),h.redirectPersistenceManager=yield Ae.create(h,[sr(E._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,g.Z)(function*(){var E,q;return h._isInitialized&&(yield h.queue((0,g.Z)(function*(){}))),(null===(E=h._currentUser)||void 0===E?void 0:E._redirectEventId)===d?h._currentUser:(null===(q=h.redirectUser)||void 0===q?void 0:q._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,g.Z)(function*(){if(d===h.currentUser)return h.queue((0,g.Z)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,E,q){if(this._deleted)return()=>{};const ie="function"==typeof h?h:h.next.bind(h),Ue=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(Ue,this,"internal-error"),Ue.then(()=>ie(this.currentUser)),"function"==typeof h?d.addObserver(h,E,q):d.addObserver(h)}directlySetCurrentUser(d){var h=this;return(0,g.Z)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Je(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){var h;const E={"X-Client-Version":d.clientVersion};d.app.options.appId&&(E["X-Firebase-gmpid"]=d.app.options.appId);const q=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();q&&(E["X-Firebase-Client"]=q);const ie=yield d._getAppCheckToken();return ie&&(E["X-Firebase-AppCheck"]=ie),E})()}_getAppCheckToken(){var d=this;return(0,g.Z)(function*(){var h;const E=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return E?.error&&function je(m,...d){ae.logLevel<=O.in.WARN&&ae.warn(`Auth (${z.SDK_VERSION}): ${m}`,...d)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function hr(m){return(0,S.m9)(m)}class Di{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,S.ne)(h=>this.observer=h)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qr(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function Js(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class is{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return be("not implemented")}_getIdTokenResponse(d){return be("not implemented")}_linkToIdToken(d,h){return be("not implemented")}_getReauthenticationResolver(d){return be("not implemented")}}function Nr(m,d){return ws.apply(this,arguments)}function ws(){return(ws=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:resetPassword",rn(m,d))})).apply(this,arguments)}function go(m,d){return $o.apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Fi(m,d){return ea.apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:update",rn(m,d))})).apply(this,arguments)}function ar(m,d){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,g.Z)(function*(m,d){return Xn(m,"POST","/v1/accounts:signInWithPassword",rn(m,d))})).apply(this,arguments)}function Ho(m,d){return $s.apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:sendOobCode",rn(m,d))})).apply(this,arguments)}function Ke(m,d){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,g.Z)(function*(m,d){return Ho(m,d)})).apply(this,arguments)}function tt(m,d){return yt.apply(this,arguments)}function yt(){return(yt=(0,g.Z)(function*(m,d){return Ho(m,d)})).apply(this,arguments)}function Pt(m,d){return vn.apply(this,arguments)}function vn(){return(vn=(0,g.Z)(function*(m,d){return Ho(m,d)})).apply(this,arguments)}function tr(m,d){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(m,d){return Ho(m,d)})).apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(m,d){return Xn(m,"POST","/v1/accounts:signInWithEmailLink",rn(m,d))})).apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(m,d){return Xn(m,"POST","/v1/accounts:signInWithEmailLink",rn(m,d))})).apply(this,arguments)}class oo extends is{constructor(d,h,E,q=null){super("password",E),this._email=d,this._password=h,this._tenantId=q}static _fromEmailAndPassword(d,h){return new oo(d,h,"password")}static _fromEmailAndCode(d,h,E=null){return new oo(d,h,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,g.Z)(function*(){var E;switch(h.signInMethod){case"password":const q={returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=d._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const ie=yield Ei(d,q,"signInWithPassword");return ar(d,ie)}return ar(d,q).catch(function(){var ie=(0,g.Z)(function*(Ue){if("auth/missing-recaptcha-token"===Ue.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Xe=yield Ei(d,q,"signInWithPassword");return ar(d,Xe)}return Promise.reject(Ue)});return function(Ue){return ie.apply(this,arguments)}}());case"emailLink":return function Er(m,d){return eo.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:te(d,"internal-error")}})()}_linkToIdToken(d,h){var E=this;return(0,g.Z)(function*(){switch(E.signInMethod){case"password":return go(d,{idToken:h,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Is(m,d){return Ui.apply(this,arguments)}(d,{idToken:h,email:E._email,oobCode:E._password});default:te(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function gs(m,d){return bs.apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(m,d){return Xn(m,"POST","/v1/accounts:signInWithIdp",rn(m,d))})).apply(this,arguments)}class Ts extends is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new Ts(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):te("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:q}=h,ie=(0,N._T)(h,["providerId","signInMethod"]);if(!E||!q)return null;const Ue=new Ts(E,q);return Ue.idToken=ie.idToken||void 0,Ue.accessToken=ie.accessToken||void 0,Ue.secret=ie.secret,Ue.nonce=ie.nonce,Ue.pendingToken=ie.pendingToken||null,Ue}_getIdTokenResponse(d){return gs(d,this.buildRequest())}_linkToIdToken(d,h){const E=this.buildRequest();return E.idToken=h,gs(d,E)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,gs(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,S.xO)(h)}return d}}function Ds(m,d){return mo.apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:sendVerificationCode",rn(m,d))})).apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(m,d){return Xn(m,"POST","/v1/accounts:signInWithPhoneNumber",rn(m,d))})).apply(this,arguments)}function Go(){return(Go=(0,g.Z)(function*(m,d){const h=yield Xn(m,"POST","/v1/accounts:signInWithPhoneNumber",rn(m,d));if(h.temporaryProof)throw gr(m,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Wo={USER_NOT_FOUND:"user-not-found"};function Ci(){return(Ci=(0,g.Z)(function*(m,d){return Xn(m,"POST","/v1/accounts:signInWithPhoneNumber",rn(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Wo)})).apply(this,arguments)}class Si extends is{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new Si({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new Si({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function yo(m,d){return Cs.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function vo(m,d){return Go.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Ea(m,d){return Ci.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:E,verificationCode:q}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:E,code:q}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:E,phoneNumber:q,temporaryProof:ie}=d;return E||h||q||ie?new Si({verificationId:h,verificationCode:E,phoneNumber:q,temporaryProof:ie}):null}}class Ss{constructor(d){var h,E,q,ie,Ue,Xe;const pt=(0,S.zd)((0,S.pd)(d)),Ht=null!==(h=pt.apiKey)&&void 0!==h?h:null,hn=null!==(E=pt.oobCode)&&void 0!==E?E:null,pn=function ta(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(q=pt.mode)&&void 0!==q?q:null);Ne(Ht&&hn&&pn,"argument-error"),this.apiKey=Ht,this.operation=pn,this.code=hn,this.continueUrl=null!==(ie=pt.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(Ue=pt.languageCode)&&void 0!==Ue?Ue:null,this.tenantId=null!==(Xe=pt.tenantId)&&void 0!==Xe?Xe:null}static parseLink(d){const h=function Ps(m){const d=(0,S.zd)((0,S.pd)(m)).link,h=d?(0,S.zd)((0,S.pd)(d)).deep_link_id:null,E=(0,S.zd)((0,S.pd)(m)).deep_link_id;return(E?(0,S.zd)((0,S.pd)(E)).link:null)||E||h||d||m}(d);try{return new Ss(h)}catch{return null}}}let zr=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(h,E){return oo._fromEmailAndPassword(h,E)}static credentialWithLink(h,E){const q=Ss.parseLink(E);return Ne(q,"argument-error"),oo._fromEmailAndCode(h,q.code,q.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class fi{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Gr extends fi{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Pi extends Gr{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return Ne("providerId"in h&&"signInMethod"in h,"argument-error"),Ts._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ne(d.idToken||d.accessToken,"argument-error"),Ts._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Pi.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Pi.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:E,oauthTokenSecret:q,pendingToken:ie,nonce:Ue,providerId:Xe}=d;if(!E&&!q&&!h&&!ie||!Xe)return null;try{return new Pi(Xe)._credential({idToken:h,accessToken:E,nonce:Ue,pendingToken:ie})}catch{return null}}}let zi=(()=>{class m extends Gr{constructor(){super("facebook.com")}static credential(h){return Ts._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),qo=(()=>{class m extends Gr{constructor(){super("google.com"),this.addScope("profile")}static credential(h,E){return Ts._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:E})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:E,oauthAccessToken:q}=h;if(!E&&!q)return null;try{return m.credential(E,q)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),So=(()=>{class m extends Gr{constructor(){super("github.com")}static credential(h){return Ts._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class nr extends is{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return gs(d,this.buildRequest())}_linkToIdToken(d,h){const E=this.buildRequest();return E.idToken=h,gs(d,E)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,gs(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:q,pendingToken:ie}=h;return E&&q&&ie&&E===q?new nr(E,ie):null}static _create(d,h){return new nr(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class es extends fi{constructor(d){Ne(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return es.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return es.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=nr.fromJSON(d);return Ne(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:E}=d;if(!h||!E)return null;try{return nr._create(E,h)}catch{return null}}}let wi=(()=>{class m extends Gr{constructor(){super("twitter.com")}static credential(h,E){return Ts._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:E})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:E,oauthTokenSecret:q}=h;if(!E||!q)return null;try{return m.credential(E,q)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Ai(m,d){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,g.Z)(function*(m,d){return Xn(m,"POST","/v1/accounts:signUp",rn(m,d))})).apply(this,arguments)}class Vi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,E,q=!1){return(0,g.Z)(function*(){const ie=yield Kr._fromIdTokenResponse(d,E,q),Ue=gn(E);return new Vi({user:ie,providerId:Ue,_tokenResponse:E,operationType:h})})()}static _forOperation(d,h,E){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(E,!0);const q=gn(E);return new Vi({user:d,providerId:q,_tokenResponse:E,operationType:h})})()}}function gn(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function no(){return(no=(0,g.Z)(function*(m){var d;const h=hr(m);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new Vi({user:h.currentUser,providerId:null,operationType:"signIn"});const E=yield Ai(h,{returnSecureToken:!0}),q=yield Vi._fromIdTokenResponse(h,"signIn",E,!0);return yield h._updateCurrentUser(q.user),q})).apply(this,arguments)}class Ao extends S.ZR{constructor(d,h,E,q){var ie;super(h.code,h.message),this.operationType=E,this.user=q,Object.setPrototypeOf(this,Ao.prototype),this.customData={appName:d.name,tenantId:null!==(ie=d.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:h.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(d,h,E,q){return new Ao(d,h,E,q)}}function fa(m,d,h,E){return("reauthenticate"===d?h._getReauthenticationResolver(m):h._getIdTokenResponse(m)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?Ao._fromErrorAndOperation(m,ie,d,E):ie})}function uo(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function Ki(){return(Ki=(0,g.Z)(function*(m,d){const h=(0,S.m9)(m);yield Mn(!0,h,d);const{providerUserInfo:E}=yield zn(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),q=uo(E||[]);return h.providerData=h.providerData.filter(ie=>q.has(ie.providerId)),q.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h})).apply(this,arguments)}function ro(m,d){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,g.Z)(function*(m,d,h=!1){const E=yield Wt(m,d._linkToIdToken(m.auth,yield m.getIdToken()),h);return Vi._forOperation(m,"link",E)})).apply(this,arguments)}function Mn(m,d,h){return na.apply(this,arguments)}function na(){return(na=(0,g.Z)(function*(m,d,h){yield $r(d);const q=!1===m?"provider-already-linked":"no-such-provider";Ne(uo(d.providerData).has(h)===m,d.auth,q)})).apply(this,arguments)}function Ko(m,d){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*(m,d,h=!1){const{auth:E}=m,q="reauthenticate";try{const ie=yield Wt(m,fa(E,q,d,m),h);Ne(ie.idToken,E,"internal-error");const Ue=mr(ie.idToken);Ne(Ue,E,"internal-error");const{sub:Xe}=Ue;return Ne(m.uid===Xe,E,"user-mismatch"),Vi._forOperation(m,q,ie)}catch(ie){throw"auth/user-not-found"===ie?.code&&te(E,"user-mismatch"),ie}})).apply(this,arguments)}function ra(m,d){return xo.apply(this,arguments)}function xo(){return(xo=(0,g.Z)(function*(m,d,h=!1){const E="signIn",q=yield fa(m,E,d),ie=yield Vi._fromIdTokenResponse(m,E,q);return h||(yield m._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function ms(m,d){return Z.apply(this,arguments)}function Z(){return(Z=(0,g.Z)(function*(m,d){return ra(hr(m),d)})).apply(this,arguments)}function W(m,d){return pe.apply(this,arguments)}function pe(){return(pe=(0,g.Z)(function*(m,d){const h=(0,S.m9)(m);return yield Mn(!1,h,d.providerId),ro(h,d)})).apply(this,arguments)}function xe(m,d){return We.apply(this,arguments)}function We(){return(We=(0,g.Z)(function*(m,d){return Ko((0,S.m9)(m),d)})).apply(this,arguments)}function dt(m,d){return vt.apply(this,arguments)}function vt(){return(vt=(0,g.Z)(function*(m,d){return Xn(m,"POST","/v1/accounts:signInWithCustomToken",rn(m,d))})).apply(this,arguments)}function Rt(){return(Rt=(0,g.Z)(function*(m,d){const h=hr(m),E=yield dt(h,{token:d,returnSecureToken:!0}),q=yield Vi._fromIdTokenResponse(h,"signIn",E);return yield h._updateCurrentUser(q.user),q})).apply(this,arguments)}class In{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?kn._fromServerResponse(d,h):"totpInfo"in h?pi._fromServerResponse(d,h):te(d,"internal-error")}}class kn extends In{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new kn(h)}}class pi extends In{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new pi(h)}}function Sr(m,d,h){var E;Ne((null===(E=h.url)||void 0===E?void 0:E.length)>0,m,"invalid-continue-uri"),Ne(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(Ne(h.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(Ne(h.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function Wr(){return Wr=(0,g.Z)(function*(m,d,h){var E;const q=hr(m),ie={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=q._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ue=yield Ei(q,ie,"getOobCode",!0);h&&Sr(q,Ue,h),yield tt(q,Ue)}else h&&Sr(q,ie,h),yield tt(q,ie).catch(function(){var Ue=(0,g.Z)(function*(Xe){if("auth/missing-recaptcha-token"!==Xe.code)return Promise.reject(Xe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const pt=yield Ei(q,ie,"getOobCode",!0);h&&Sr(q,pt,h),yield tt(q,pt)}});return function(Xe){return Ue.apply(this,arguments)}}())}),Wr.apply(this,arguments)}function Or(){return(Or=(0,g.Z)(function*(m,d,h){yield Nr((0,S.m9)(m),{oobCode:d,newPassword:h})})).apply(this,arguments)}function kr(){return(kr=(0,g.Z)(function*(m,d){yield Fi((0,S.m9)(m),{oobCode:d})})).apply(this,arguments)}function Xr(m,d){return gi.apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(m,d){const h=(0,S.m9)(m),E=yield Nr(h,{oobCode:d}),q=E.requestType;switch(Ne(q,h,"internal-error"),q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(E.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(E.mfaInfo,h,"internal-error");default:Ne(E.email,h,"internal-error")}let ie=null;return E.mfaInfo&&(ie=In._fromServerResponse(hr(h),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:ie},operation:q}})).apply(this,arguments)}function os(){return(os=(0,g.Z)(function*(m,d){const{data:h}=yield Xr((0,S.m9)(m),d);return h.email})).apply(this,arguments)}function ts(){return ts=(0,g.Z)(function*(m,d,h){var E;const q=hr(m),ie={returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"};let Ue;if(null!==(E=q._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ht=yield Ei(q,ie,"signUpPassword");Ue=Ai(q,Ht)}else Ue=Ai(q,ie).catch(function(){var Ht=(0,g.Z)(function*(hn){if("auth/missing-recaptcha-token"===hn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const pn=yield Ei(q,ie,"signUpPassword");return Ai(q,pn)}return Promise.reject(hn)});return function(hn){return Ht.apply(this,arguments)}}());const Xe=yield Ue.catch(Ht=>Promise.reject(Ht)),pt=yield Vi._fromIdTokenResponse(q,"signIn",Xe);return yield q._updateCurrentUser(pt.user),pt}),ts.apply(this,arguments)}function k(){return k=(0,g.Z)(function*(m,d,h){var E;const q=hr(m),ie={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function Ue(Xe,pt){Ne(pt.handleCodeInApp,q,"argument-error"),pt&&Sr(q,Xe,pt)}if(null!==(E=q._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Xe=yield Ei(q,ie,"getOobCode",!0);Ue(Xe,h),yield Pt(q,Xe)}else Ue(ie,h),yield Pt(q,ie).catch(function(){var Xe=(0,g.Z)(function*(pt){if("auth/missing-recaptcha-token"!==pt.code)return Promise.reject(pt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ht=yield Ei(q,ie,"getOobCode",!0);Ue(Ht,h),yield Pt(q,Ht)}});return function(pt){return Xe.apply(this,arguments)}}())}),k.apply(this,arguments)}function ut(){return(ut=(0,g.Z)(function*(m,d,h){const E=(0,S.m9)(m),q=zr.credentialWithLink(d,h||ot());return Ne(q._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ms(E,q)})).apply(this,arguments)}function ft(m,d){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:createAuthUri",rn(m,d))})).apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(m,d){const E={identifier:d,continueUri:Qe()?ot():"http://localhost"},{signinMethods:q}=yield ft((0,S.m9)(m),E);return q||[]})).apply(this,arguments)}function y(){return(y=(0,g.Z)(function*(m,d){const h=(0,S.m9)(m),q={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&Sr(h.auth,q,d);const{email:ie}=yield Ke(h.auth,q);ie!==m.email&&(yield m.reload())})).apply(this,arguments)}function L(){return(L=(0,g.Z)(function*(m,d,h){const E=(0,S.m9)(m),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};h&&Sr(E.auth,ie,h);const{email:Ue}=yield tr(E.auth,ie);Ue!==m.email&&(yield m.reload())})).apply(this,arguments)}function ne(m,d){return ge.apply(this,arguments)}function ge(){return(ge=(0,g.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Le(){return(Le=(0,g.Z)(function*(m,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const E=(0,S.m9)(m),ie={idToken:yield E.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},Ue=yield Wt(E,ne(E.auth,ie));E.displayName=Ue.displayName||null,E.photoURL=Ue.photoUrl||null;const Xe=E.providerData.find(({providerId:pt})=>"password"===pt);Xe&&(Xe.displayName=E.displayName,Xe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Ue)})).apply(this,arguments)}function Nt(m,d,h){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(function*(m,d,h){const{auth:E}=m,ie={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(ie.email=d),h&&(ie.password=h);const Ue=yield Wt(m,go(E,ie));yield m._updateTokensIfNecessary(Ue,!0)})).apply(this,arguments)}class bn{constructor(d,h,E={}){this.isNewUser=d,this.providerId=h,this.profile=E}}class Rn extends bn{constructor(d,h,E,q){super(d,h,E),this.username=q}}class En extends bn{constructor(d,h){super(d,"facebook.com",h)}}class qr extends Rn{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class xn extends bn{constructor(d,h){super(d,"google.com",h)}}class As extends Rn{constructor(d,h,E){super(d,"twitter.com",h,E)}}function Zi(m){const{user:d,_tokenResponse:h}=m;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function Gn(m){var d,h;if(!m)return null;const{providerId:E}=m,q=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},ie=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!E&&m?.idToken){const Ue=null===(h=null===(d=mr(m.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(Ue)return new bn(ie,"anonymous"!==Ue&&"custom"!==Ue?Ue:null)}if(!E)return null;switch(E){case"facebook.com":return new En(ie,q);case"github.com":return new qr(ie,q);case"google.com":return new xn(ie,q);case"twitter.com":return new As(ie,q,m.screenName||null);case"custom":case"anonymous":return new bn(ie,null);default:return new bn(ie,E,q)}}(h)}class qs{constructor(d,h,E){this.type=d,this.credential=h,this.auth=E}static _fromIdtoken(d,h){return new qs("enroll",d,h)}static _fromMfaPendingCredential(d){return new qs("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,E;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return qs._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(E=d.multiFactorSession)&&void 0!==E&&E.idToken)return qs._fromIdtoken(d.multiFactorSession.idToken)}return null}}class _o{constructor(d,h,E){this.session=d,this.hints=h,this.signInResolver=E}static _fromError(d,h){const E=hr(d),q=h.customData._serverResponse,ie=(q.mfaInfo||[]).map(Xe=>In._fromServerResponse(E,Xe));Ne(q.mfaPendingCredential,E,"internal-error");const Ue=qs._fromMfaPendingCredential(q.mfaPendingCredential);return new _o(Ue,ie,function(){var Xe=(0,g.Z)(function*(pt){const Ht=yield pt._process(E,Ue);delete q.mfaInfo,delete q.mfaPendingCredential;const hn=Object.assign(Object.assign({},q),{idToken:Ht.idToken,refreshToken:Ht.refreshToken});switch(h.operationType){case"signIn":const pn=yield Vi._fromIdTokenResponse(E,h.operationType,hn);return yield E._updateCurrentUser(pn.user),pn;case"reauthenticate":return Ne(h.user,E,"internal-error"),Vi._forOperation(h.user,h.operationType,hn);default:te(E,"internal-error")}});return function(pt){return Xe.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,g.Z)(function*(){return h.signInResolver(d)})()}}function wn(m,d){return wt(m,"POST","/v2/accounts/mfaEnrollment:start",rn(m,d))}class $i{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(E=>In._fromServerResponse(d.auth,E)))})}static _fromUser(d){return new $i(d)}getSession(){var d=this;return(0,g.Z)(function*(){return qs._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,h){var E=this;return(0,g.Z)(function*(){const q=d,ie=yield E.getSession(),Ue=yield Wt(E.user,q._process(E.user.auth,ie,h));return yield E.user._updateTokensIfNecessary(Ue),E.user.reload()})()}unenroll(d){var h=this;return(0,g.Z)(function*(){const E="string"==typeof d?d:d.uid,q=yield h.user.getIdToken();try{const ie=yield Wt(h.user,function Ks(m,d){return wt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(m,d))}(h.user.auth,{idToken:q,mfaEnrollmentId:E}));h.enrolledFactors=h.enrolledFactors.filter(({uid:Ue})=>Ue!==E),yield h.user._updateTokensIfNecessary(ie),yield h.user.reload()}catch(ie){throw ie}})()}}const Zs=new WeakMap,Pa="__sak";class Ia{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Pa,"1"),this.storage.removeItem(Pa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const ei=(()=>{class m extends Ia{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,E)=>this.onStorageEvent(h,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ys(){const m=(0,S.z$)();return Ye(m)||De(m)}()&&function ln(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=kt(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const E of Object.keys(this.listeners)){const q=this.storage.getItem(E),ie=this.localCache[E];q!==ie&&h(E,ie,q)}}onStorageEvent(h,E=!1){if(!h.key)return void this.forAllChangedKeys((Xe,pt,Ht)=>{this.notifyListeners(Xe,Ht)});const q=h.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Xe=this.storage.getItem(q);if(h.newValue!==Xe)null!==h.newValue?this.storage.setItem(q,h.newValue):this.storage.removeItem(q);else if(this.localCache[q]===h.newValue&&!E)return}const ie=()=>{const Xe=this.storage.getItem(q);!E&&this.localCache[q]===Xe||this.notifyListeners(q,Xe)},Ue=this.storage.getItem(q);!function ht(){return(0,S.w1)()&&10===document.documentMode}()||Ue===h.newValue||h.newValue===h.oldValue?ie():setTimeout(ie,10)}notifyListeners(h,E){this.localCache[h]=E;const q=this.listeners[h];if(q)for(const ie of Array.from(q))ie(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,E,q)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:E,newValue:q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(E)}_removeListener(h,E){this.listeners[h]&&(this.listeners[h].delete(E),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,E){var q=()=>super._set,ie=this;return(0,g.Z)(function*(){yield q().call(ie,h,E),ie.localCache[h]=JSON.stringify(E)})()}_get(h){var E=()=>super._get,q=this;return(0,g.Z)(function*(){const ie=yield E().call(q,h);return q.localCache[h]=JSON.stringify(ie),ie})()}_remove(h){var E=()=>super._remove,q=this;return(0,g.Z)(function*(){yield E().call(q,h),delete q.localCache[h]})()}}return m.type="LOCAL",m})(),Os=(()=>{class m extends Ia{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,E){}_removeListener(h,E){}}return m.type="SESSION",m})();let bu=(()=>{class m{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const E=this.receivers.find(ie=>ie.isListeningto(h));if(E)return E;const q=new m(h);return this.receivers.push(q),q}isListeningto(h){return this.eventTarget===h}handleEvent(h){var E=this;return(0,g.Z)(function*(){const q=h,{eventId:ie,eventType:Ue,data:Xe}=q.data,pt=E.handlersMap[Ue];if(!pt?.size)return;q.ports[0].postMessage({status:"ack",eventId:ie,eventType:Ue});const Ht=Array.from(pt).map(function(){var pn=(0,g.Z)(function*(qi){return qi(q.origin,Xe)});return function(qi){return pn.apply(this,arguments)}}()),hn=yield function zu(m){return Promise.all(m.map(function(){var d=(0,g.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(E){return{fulfilled:!1,reason:E}}});return function(h){return d.apply(this,arguments)}}()))}(Ht);q.ports[0].postMessage({status:"done",eventId:ie,eventType:Ue,response:hn})})()}_subscribe(h,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(E)}_unsubscribe(h,E){this.handlersMap[h]&&E&&this.handlersMap[h].delete(E),(!E||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function xt(m="",d=10){let h="";for(let E=0;E<d;E++)h+=Math.floor(10*Math.random());return m+h}class vs{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,E=50){var q=this;return(0,g.Z)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let Ue,Xe;return new Promise((pt,Ht)=>{const hn=xt("",20);ie.port1.start();const pn=setTimeout(()=>{Ht(new Error("unsupported_event"))},E);Xe={messageChannel:ie,onMessage(qi){const Ra=qi;if(Ra.data.eventId===hn)switch(Ra.data.status){case"ack":clearTimeout(pn),Ue=setTimeout(()=>{Ht(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ue),pt(Ra.data.response);break;default:clearTimeout(pn),clearTimeout(Ue),Ht(new Error("invalid_response"))}}},q.handlers.add(Xe),ie.port1.addEventListener("message",Xe.onMessage),q.target.postMessage({eventType:d,eventId:hn,data:h},[ie.port2])}).finally(()=>{Xe&&q.removeMessageHandler(Xe)})})()}}function Lr(){return window}function tn(){return typeof Lr().WorkerGlobalScope<"u"&&"function"==typeof Lr().importScripts}function ba(){return(ba=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const It="firebaseLocalStorageDb",za="firebaseLocalStorage",pa="fbase_key";class Ta{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function Ga(m,d){return m.transaction([za],d?"readwrite":"readonly").objectStore(za)}function dl(){const m=indexedDB.open(It,1);return new Promise((d,h)=>{m.addEventListener("error",()=>{h(m.error)}),m.addEventListener("upgradeneeded",()=>{const E=m.result;try{E.createObjectStore(za,{keyPath:pa})}catch(q){h(q)}}),m.addEventListener("success",(0,g.Z)(function*(){const E=m.result;E.objectStoreNames.contains(za)?d(E):(E.close(),yield function Ii(){const m=indexedDB.deleteDatabase(It);return new Ta(m).toPromise()}(),d(yield dl()))}))})}function iu(m,d,h){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,g.Z)(function*(m,d,h){const E=Ga(m,!0).put({[pa]:d,value:h});return new Ta(E).toPromise()})).apply(this,arguments)}function Xl(){return(Xl=(0,g.Z)(function*(m,d){const h=Ga(m,!1).get(d),E=yield new Ta(h).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function su(m,d){const h=Ga(m,!0).delete(d);return new Ta(h).toPromise()}const yi=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,g.Z)(function*(){return h.db||(h.db=yield dl()),h.db})()}_withRetries(h){var E=this;return(0,g.Z)(function*(){let q=0;for(;;)try{const ie=yield E._openDb();return yield h(ie)}catch(ie){if(q++>3)throw ie;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,g.Z)(function*(){return tn()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,g.Z)(function*(){h.receiver=bu._getInstance(function it(){return tn()?self:null}()),h.receiver._subscribe("keyChanged",function(){var E=(0,g.Z)(function*(q,ie){return{keyProcessed:(yield h._poll()).includes(ie.key)}});return function(q,ie){return E.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var E=(0,g.Z)(function*(q,ie){return["keyChanged"]});return function(q,ie){return E.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,g.Z)(function*(){var E,q;if(h.activeServiceWorker=yield function _n(){return ba.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new vs(h.activeServiceWorker);const ie=yield h.sender._send("ping",{},800);!ie||(null===(E=ie[0])||void 0===E?void 0:E.fulfilled)&&(null===(q=ie[0])||void 0===q?void 0:q.value.includes("keyChanged"))&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var E=this;return(0,g.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function zt(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:h},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const h=yield dl();return yield iu(h,Pa,"1"),yield su(h,Pa),!0}catch{}return!1})()}_withPendingWrite(h){var E=this;return(0,g.Z)(function*(){E.pendingWrites++;try{yield h()}finally{E.pendingWrites--}})()}_set(h,E){var q=this;return(0,g.Z)(function*(){return q._withPendingWrite((0,g.Z)(function*(){return yield q._withRetries(ie=>iu(ie,h,E)),q.localCache[h]=E,q.notifyServiceWorker(h)}))})()}_get(h){var E=this;return(0,g.Z)(function*(){const q=yield E._withRetries(ie=>function hl(m,d){return Xl.apply(this,arguments)}(ie,h));return E.localCache[h]=q,q})()}_remove(h){var E=this;return(0,g.Z)(function*(){return E._withPendingWrite((0,g.Z)(function*(){return yield E._withRetries(q=>su(q,h)),delete E.localCache[h],E.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,g.Z)(function*(){const E=yield h._withRetries(Ue=>{const Xe=Ga(Ue,!1).getAll();return new Ta(Xe).toPromise()});if(!E)return[];if(0!==h.pendingWrites)return[];const q=[],ie=new Set;for(const{fbase_key:Ue,value:Xe}of E)ie.add(Ue),JSON.stringify(h.localCache[Ue])!==JSON.stringify(Xe)&&(h.notifyListeners(Ue,Xe),q.push(Ue));for(const Ue of Object.keys(h.localCache))h.localCache[Ue]&&!ie.has(Ue)&&(h.notifyListeners(Ue,null),q.push(Ue));return q})()}notifyListeners(h,E){this.localCache[h]=E;const q=this.listeners[h];if(q)for(const ie of Array.from(q))ie(E)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(E)}_removeListener(h,E){this.listeners[h]&&(this.listeners[h].delete(E),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Zt(m,d){return wt(m,"POST","/v2/accounts/mfaSignIn:start",rn(m,d))}const Lt=1e12;class lo{constructor(d){this.auth=d,this.counter=Lt,this._widgets=new Map}render(d,h){const E=this.counter;return this._widgets.set(E,new Wa(d,this.auth.name,h||{})),this.counter++,E}reset(d){var h;const E=d||Lt;null===(h=this._widgets.get(E))||void 0===h||h.delete(),this._widgets.delete(E)}getResponse(d){var h;return(null===(h=this._widgets.get(d||Lt))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,g.Z)(function*(){var E;return null===(E=h._widgets.get(d||Lt))||void 0===E||E.execute(),""})()}}class Wa{constructor(d,h,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const q="string"==typeof d?document.getElementById(d):d;Ne(q,"argument-error",{appName:h}),this.container=q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ga(m){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<m;E++)d.push(h.charAt(Math.floor(Math.random()*h.length)));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const I=Ri("rcb"),T=new Ln(3e4,6e4);class A{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Lr().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return Ne(function V(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&An(Lr().grecaptcha)?Promise.resolve(Lr().grecaptcha):new Promise((E,q)=>{const ie=Lr().setTimeout(()=>{q(ce(d,"network-request-failed"))},T.get());Lr()[I]=()=>{Lr().clearTimeout(ie),delete Lr()[I];const Xe=Lr().grecaptcha;if(!Xe||!An(Xe))return void q(ce(d,"internal-error"));const pt=Xe.render;Xe.render=(Ht,hn)=>{const pn=pt(Ht,hn);return this.counter++,pn},this.hostLanguage=h,E(Xe)},Ti(`https://www.google.com/recaptcha/api.js??${(0,S.xO)({onload:I,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(ie),q(ce(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=Lr().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oe{load(d){return(0,g.Z)(function*(){return new lo(d)})()}clearedOneInstance(){}}const _e="recaptcha",Se={theme:"light",type:"image"};class st{constructor(d,h=Object.assign({},Se),E){this.parameters=h,this.type=_e,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hr(E),this.isInvisible="invisible"===this.parameters.size,Ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const q="string"==typeof d?document.getElementById(d):d;Ne(q,this.auth,"argument-error"),this.container=q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oe:new A,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const h=yield d.render(),E=d.getAssertedRecaptcha();return E.getResponse(h)||new Promise(ie=>{const Ue=Xe=>{!Xe||(d.tokenChangeListeners.delete(Ue),ie(Xe))};d.tokenChangeListeners.add(Ue),d.isInvisible&&E.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(E=>E(h)),"function"==typeof d)d(h);else if("string"==typeof d){const E=Lr()[d];"function"==typeof E&&E(h)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const E=document.createElement("div");h.appendChild(E),h=E}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){Ne(Qe()&&!tn(),d.auth,"internal-error"),yield function Ft(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function Ze(m){return bt.apply(this,arguments)}(d.auth);Ne(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class sn{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=Si._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function qe(){return(qe=(0,g.Z)(function*(m,d,h){const E=hr(m),q=yield us(E,d,(0,S.m9)(h));return new sn(q,ie=>ms(E,ie))})).apply(this,arguments)}function ti(){return(ti=(0,g.Z)(function*(m,d,h){const E=(0,S.m9)(m);yield Mn(!1,E,"phone");const q=yield us(E.auth,d,(0,S.m9)(h));return new sn(q,ie=>W(E,ie))})).apply(this,arguments)}function xs(){return(xs=(0,g.Z)(function*(m,d,h){const E=(0,S.m9)(m),q=yield us(E.auth,d,(0,S.m9)(h));return new sn(q,ie=>xe(E,ie))})).apply(this,arguments)}function us(m,d,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,g.Z)(function*(m,d,h){var E;const q=yield h.verify();try{let ie;if(Ne("string"==typeof q,m,"argument-error"),Ne(h.type===_e,m,"argument-error"),ie="string"==typeof d?{phoneNumber:d}:d,"session"in ie){const Ue=ie.session;if("phoneNumber"in ie)return Ne("enroll"===Ue.type,m,"internal-error"),(yield wn(m,{idToken:Ue.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:q}})).phoneSessionInfo.sessionInfo;{Ne("signin"===Ue.type,m,"internal-error");const Xe=(null===(E=ie.multiFactorHint)||void 0===E?void 0:E.uid)||ie.multiFactorUid;return Ne(Xe,m,"missing-multi-factor-info"),(yield Zt(m,{mfaPendingCredential:Ue.credential,mfaEnrollmentId:Xe,phoneSignInInfo:{recaptchaToken:q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ue}=yield Ds(m,{phoneNumber:ie.phoneNumber,recaptchaToken:q});return Ue}}finally{h._reset()}})).apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(m,d){yield ro((0,S.m9)(m),d)})).apply(this,arguments)}let Io=(()=>{class m{constructor(h){this.providerId=m.PROVIDER_ID,this.auth=hr(h)}verifyPhoneNumber(h,E){return us(this.auth,h,(0,S.m9)(E))}static credential(h,E){return Si._fromVerification(h,E)}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:E,temporaryProof:q}=h;return E&&q?Si._fromTokenResponse(E,q):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Oa(m,d){return d?sr(d):(Ne(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class bo extends is{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return gs(d,this._buildIdpRequest())}_linkToIdToken(d,h){return gs(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return gs(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function Oo(m){return ra(m.auth,new bo(m),m.bypassAuthState)}function Du(m){const{auth:d,user:h}=m;return Ne(h,d,"internal-error"),Ko(h,new bo(m),m.bypassAuthState)}function qa(m){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,g.Z)(function*(m){const{auth:d,user:h}=m;return Ne(h,d,"internal-error"),ro(h,new bo(m),m.bypassAuthState)})).apply(this,arguments)}class ls{constructor(d,h,E,q,ie=!1){this.auth=d,this.resolver=E,this.user=q,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,g.Z)(function*(E,q){d.pendingPromise={resolve:E,reject:q};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(ie){d.reject(ie)}});return function(E,q){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,g.Z)(function*(){const{urlResponse:E,sessionId:q,postBody:ie,tenantId:Ue,error:Xe,type:pt}=d;if(Xe)return void h.reject(Xe);const Ht={auth:h.auth,requestUri:E,sessionId:q,tenantId:Ue||void 0,postBody:ie||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(pt)(Ht))}catch(hn){h.reject(hn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Oo;case"linkViaPopup":case"linkViaRedirect":return qa;case"reauthViaPopup":case"reauthViaRedirect":return Du;default:te(this.auth,"internal-error")}}resolve(d){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const To=new Ln(2e3,1e4);function vi(){return(vi=(0,g.Z)(function*(m,d,h){const E=hr(m);et(m,d,fi);const q=Oa(E,h);return new nc(E,"signInViaPopup",d,q).executeNotNull()})).apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(m,d,h){const E=(0,S.m9)(m);et(E.auth,d,fi);const q=Oa(E.auth,h);return new nc(E.auth,"reauthViaPopup",d,q,E).executeNotNull()})).apply(this,arguments)}function au(){return(au=(0,g.Z)(function*(m,d,h){const E=(0,S.m9)(m);et(E.auth,d,fi);const q=Oa(E.auth,h);return new nc(E.auth,"linkViaPopup",d,q,E).executeNotNull()})).apply(this,arguments)}let nc=(()=>{class m extends ls{constructor(h,E,q,ie,Ue){super(h,E,ie,Ue),this.provider=q,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var h=this;return(0,g.Z)(function*(){const E=yield h.execute();return Ne(E,h.auth,"internal-error"),E})()}onExecution(){var h=this;return(0,g.Z)(function*(){ke(1===h.filter.length,"Popup operations only handle one event");const E=xt();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],E),h.authWindow.associatedEvent=E,h.resolver._originValidation(h.auth).catch(q=>{h.reject(q)}),h.resolver._isIframeWebStorageSupported(h.auth,q=>{q||h.reject(ce(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const h=()=>{var E,q;this.pollId=null!==(q=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==q&&q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,To.get())};h()}}return m.currentPopupAction=null,m})();const gl=new Map;class ic extends ls{constructor(d,h,E=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,E),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,g.Z)(function*(){let E=gl.get(h.auth._key());if(!E){try{const ie=(yield function uu(m,d){return ml.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;E=()=>Promise.resolve(ie)}catch(q){E=()=>Promise.reject(q)}gl.set(h.auth._key(),E)}return h.bypassAuthState||gl.set(h.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,E=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return h().call(E,d);if("unknown"!==d.type){if(d.eventId){const q=yield E.auth._redirectUserForId(d.eventId);if(q)return E.user=q,h().call(E,d);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ml(){return(ml=(0,g.Z)(function*(m,d){const h=vl(d),E=yl(m);if(!(yield E._isAvailable()))return!1;const q="true"===(yield E._get(h));return yield E._remove(h),q})).apply(this,arguments)}function Su(m,d){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,g.Z)(function*(m,d){return yl(m)._set(vl(d),"true")})).apply(this,arguments)}function lu(m,d){gl.set(m._key(),d)}function yl(m){return sr(m._redirectPersistence)}function vl(m){return Oe("pendingRedirect",m.config.apiKey,m.name)}function ka(){return(ka=(0,g.Z)(function*(m,d,h){const E=hr(m);et(m,d,fi),yield E._initializationPromise;const q=Oa(E,h);return yield Su(q,E),q._openRedirect(E,d,"signInViaRedirect")})).apply(this,arguments)}function sc(){return(sc=(0,g.Z)(function*(m,d,h){const E=(0,S.m9)(m);et(E.auth,d,fi),yield E.auth._initializationPromise;const q=Oa(E.auth,h);yield Su(q,E.auth);const ie=yield Ka(E);return q._openRedirect(E.auth,d,"reauthViaRedirect",ie)})).apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(m,d,h){const E=(0,S.m9)(m);et(E.auth,d,fi),yield E.auth._initializationPromise;const q=Oa(E.auth,h);yield Mn(!1,E,d.providerId),yield Su(q,E.auth);const ie=yield Ka(E);return q._openRedirect(E.auth,d,"linkViaRedirect",ie)})).apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(m,d){return yield hr(m)._initializationPromise,Wu(m,d,!1)})).apply(this,arguments)}function Wu(m,d){return di.apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(m,d,h=!1){const E=hr(m),q=Oa(E,d),Ue=yield new ic(E,q,h).execute();return Ue&&!h&&(delete Ue.user._redirectEventId,yield E._persistUserIfCurrent(Ue.user),yield E._setRedirectUser(null,d)),Ue})).apply(this,arguments)}function Ka(m){return _s.apply(this,arguments)}function _s(){return(_s=(0,g.Z)(function*(m){const d=xt(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class _l{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(d,E)&&(h=!0,this.sendToConsumer(d,E),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Au(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ho(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var E;if(d.error&&!ho(d)){const q=(null===(E=d.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";h.onError(ce(this.auth,q))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const E=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&E}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Da(d))}saveEventToCache(d){this.cachedEventUids.add(Da(d)),this.lastProcessedEventTime=Date.now()}}function Da(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function ho({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===d?.code}function Qd(m){return Es.apply(this,arguments)}function Es(){return(Es=(0,g.Z)(function*(m,d={}){return wt(m,"GET","/v1/projects",d)})).apply(this,arguments)}const oc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ca=/^https?/;function fo(){return(fo=(0,g.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield Qd(m);for(const h of d)try{if(qu(h))return}catch{}te(m,"unauthorized-domain")})).apply(this,arguments)}function qu(m){const d=ot(),{protocol:h,hostname:E}=new URL(d);if(m.startsWith("chrome-extension://")){const Ue=new URL(m);return""===Ue.hostname&&""===E?"chrome-extension:"===h&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&Ue.hostname===E}if(!Ca.test(h))return!1;if(oc.test(m))return E===m;const q=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+q+"|"+q+")$","i").test(E)}const ac=new Ln(3e4,6e4);function La(){const m=Lr().___jsl;if(m?.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let h=0;h<m.CP.length;h++)m.CP[h]=null}let sa=null;function Do(m){return sa=sa||function Fa(m){return new Promise((d,h)=>{var E,q,ie;function Ue(){La(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{La(),h(ce(m,"network-request-failed"))},timeout:ac.get()})}if(null!==(q=null===(E=Lr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==q&&q.Iframe)d(gapi.iframes.getContext());else{if(null===(ie=Lr().gapi)||void 0===ie||!ie.load){const Xe=Ri("iframefcb");return Lr()[Xe]=()=>{gapi.load?Ue():h(ce(m,"network-request-failed"))},Ti(`https://apis.google.com/js/api.js?onload=${Xe}`).catch(pt=>h(pt))}Ue()}}).catch(d=>{throw sa=null,d})}(m),sa}const Ku=new Ln(5e3,15e3),Zu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Za=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yd(m){const d=m.config;Ne(d.authDomain,m,"auth-domain-config-required");const h=d.emulator?Dn(d,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,E={apiKey:d.apiKey,appName:m.name,v:z.SDK_VERSION},q=Za.get(m.config.apiHost);q&&(E.eid=q);const ie=m._getFrameworks();return ie.length&&(E.fw=ie.join(",")),`${h}?${(0,S.xO)(E).slice(1)}`}function M(){return M=(0,g.Z)(function*(m){const d=yield Do(m),h=Lr().gapi;return Ne(h,m,"internal-error"),d.open({where:document.body,url:Yd(m),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zu,dontclear:!0},E=>new Promise(function(){var q=(0,g.Z)(function*(ie,Ue){yield E.restyle({setHideOnLeave:!1});const Xe=ce(m,"network-request-failed"),pt=Lr().setTimeout(()=>{Ue(Xe)},Ku.get());function Ht(){Lr().clearTimeout(pt),ie(E)}E.ping(Ht).then(Ht,()=>{Ue(Xe)})});return function(ie,Ue){return q.apply(this,arguments)}}()))}),M.apply(this,arguments)}const X={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qt{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const oa=encodeURIComponent("fac");function Rs(m,d,h,E,q,ie){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,g.Z)(function*(m,d,h,E,q,ie){Ne(m.config.authDomain,m,"auth-domain-config-required"),Ne(m.config.apiKey,m,"invalid-api-key");const Ue={apiKey:m.config.apiKey,appName:m.name,authType:h,redirectUrl:E,v:z.SDK_VERSION,eventId:q};if(d instanceof fi){d.setDefaultLanguage(m.languageCode),Ue.providerId=d.providerId||"",(0,S.xb)(d.getCustomParameters())||(Ue.customParameters=JSON.stringify(d.getCustomParameters()));for(const[hn,pn]of Object.entries(ie||{}))Ue[hn]=pn}if(d instanceof Gr){const hn=d.getScopes().filter(pn=>""!==pn);hn.length>0&&(Ue.scopes=hn.join(","))}m.tenantId&&(Ue.tid=m.tenantId);const Xe=Ue;for(const hn of Object.keys(Xe))void 0===Xe[hn]&&delete Xe[hn];const pt=yield m._getAppCheckToken(),Ht=pt?`#${oa}=${encodeURIComponent(pt)}`:"";return`${Oi(m)}?${(0,S.xO)(Xe).slice(1)}${Ht}`})).apply(this,arguments)}function Oi({config:m}){return m.emulator?Dn(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}const aa="webStorageSupport";class Jd extends class El{constructor(d){this.factorId=d}_process(d,h,E){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,E);case"signin":return this._finalizeSignIn(d,h.credential);default:return be("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Jd(d)}_finalizeEnroll(d,h,E){return function cn(m,d){return wt(m,"POST","/v2/accounts/mfaEnrollment:finalize",rn(m,d))}(d,{idToken:h,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function Na(m,d){return wt(m,"POST","/v2/accounts/mfaSignIn:finalize",rn(m,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uc=(()=>{class m{constructor(){}static assertion(h){return Jd._fromCredential(h)}}return m.FACTOR_ID="phone",m})();var Il="@firebase/auth";class Xd{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,g.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(E=>{d(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);!h||(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qu(){return window}function ed(){return(ed=(0,g.Z)(function*(m,d,h){var E;const{BuildInfo:q}=Qu();ke(d.sessionId,"AuthEvent did not contain a session ID");const ie=yield nd(d.sessionId),Ue={};return De()?Ue.ibi=q.packageName:Sn()?Ue.apn=q.packageName:te(m,"operation-not-supported-in-this-environment"),q.displayName&&(Ue.appDisplayName=q.displayName),Ue.sessionId=ie,Rs(m,h,d.type,void 0,null!==(E=d.eventId)&&void 0!==E?E:void 0,Ue)})).apply(this,arguments)}function td(){return(td=(0,g.Z)(function*(m){const{BuildInfo:d}=Qu(),h={};De()?h.iosBundleId=d.packageName:Sn()?h.androidPackageName=d.packageName:te(m,"operation-not-supported-in-this-environment"),yield Qd(m,h)})).apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(m,d,h){const{cordova:E}=Qu();let q=()=>{};try{yield new Promise((ie,Ue)=>{let Xe=null;function pt(){var pn;ie();const qi=null===(pn=E.plugins.browsertab)||void 0===pn?void 0:pn.close;"function"==typeof qi&&qi(),"function"==typeof h?.close&&h.close()}function Ht(){Xe||(Xe=window.setTimeout(()=>{Ue(ce(m,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&Ht()}d.addPassiveListener(pt),document.addEventListener("resume",Ht,!1),Sn()&&document.addEventListener("visibilitychange",hn,!1),q=()=>{d.removePassiveListener(pt),document.removeEventListener("resume",Ht,!1),document.removeEventListener("visibilitychange",hn,!1),Xe&&window.clearTimeout(Xe)}})}finally{q()}})).apply(this,arguments)}function nd(m){return dc.apply(this,arguments)}function dc(){return(dc=(0,g.Z)(function*(m){const d=zp(m),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(q=>q.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function zp(m){if(ke(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),h=new Uint8Array(d);for(let E=0;E<m.length;E++)h[E]=m.charCodeAt(E);return h}(0,S.Pz)("authIdTokenMaxAge"),function eh(m){(0,z._registerComponent)(new K.wA("auth",(d,{options:h})=>{const E=d.getProvider("app").getImmediate(),q=d.getProvider("heartbeat"),ie=d.getProvider("app-check-internal"),{apiKey:Ue,authDomain:Xe}=E.options;Ne(Ue&&!Ue.includes(":"),"invalid-api-key",{appName:E.name});const pt={apiKey:Ue,authDomain:Xe,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Je(m)},Ht=new po(E,q,ie,pt);return function jn(m,d){const h=d?.persistence||[],E=(Array.isArray(h)?h:[h]).map(sr);d?.errorMap&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(E,d?.popupRedirectResolver)}(Ht,h),Ht},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,E)=>{d.getProvider("auth-internal").initialize()})),(0,z._registerComponent)(new K.wA("auth-internal",d=>{const h=hr(d.getProvider("auth").getImmediate());return new Xd(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,z.registerVersion)(Il,"0.23.2",function df(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,z.registerVersion)(Il,"0.23.2","esm2017")}("Browser");class Ua extends _l{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,g.Z)(function*(){yield d.initPromise})()}}function rd(m){return hc.apply(this,arguments)}function hc(){return(hc=(0,g.Z)(function*(m){const d=yield Ba()._get(ko(m));return d&&(yield Ba()._remove(ko(m))),d})).apply(this,arguments)}function id(){const m=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let h=0;h<20;h++){const E=Math.floor(Math.random()*d.length);m.push(d.charAt(E))}return m.join("")}function Ba(){return sr(ei)}function ko(m){return Oe("authEvent",m.config.apiKey,m.name)}function du(m){if(!m?.includes("?"))return{};const[d,...h]=m.split("?");return(0,S.zd)(h.join("?"))}function gc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ce("no-auth-event")}}function cs(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function xu(m=(0,S.z$)()){return!("file:"!==cs()&&"ionic:"!==cs()&&"capacitor:"!==cs()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function yf(){try{const m=self.localStorage,d=xt();if(m)return m.setItem(d,"1"),m.removeItem(d),!function Ya(m=(0,S.z$)()){return function Qa(){return(0,S.w1)()&&11===document?.documentMode}()||function uh(m=(0,S.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,S.hl)()}catch{return lh()&&(0,S.hl)()}return!1}function lh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function pr(){return(function ah(){return"http:"===cs()||"https:"===cs()}()||(0,S.ru)()||xu())&&!function mf(){return(0,S.b$)()||(0,S.UG)()}()&&yf()&&!lh()}function vf(){return xu()&&typeof document<"u"}function od(){return(od=(0,g.Z)(function*(){return!!vf()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const ua={LOCAL:"local",NONE:"none",SESSION:"session"},fu=Ne,Wp="persistence";function Ru(m){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,g.Z)(function*(m){yield m._initializationPromise;const d=Ju(),h=Oe(Wp,m.config.apiKey,m.name);d&&d.setItem(h,m._getPersistence())})).apply(this,arguments)}function Ju(){var m;try{return(null===(m=function ch(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Xu=Ne;class Pu{constructor(){this.browserResolver=sr(class Ur{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Os,this._completeRedirectFn=Wu,this._overrideRedirectResult=lu}_openPopup(d,h,E,q){var ie=this;return(0,g.Z)(function*(){var Ue;ke(null===(Ue=ie.eventManagers[d._key()])||void 0===Ue?void 0:Ue.manager,"_initialize() not called before _openPopup()");const Xe=yield Rs(d,h,E,ot(),q);return function $t(m,d,h,E=500,q=600){const ie=Math.max((window.screen.availHeight-q)/2,0).toString(),Ue=Math.max((window.screen.availWidth-E)/2,0).toString();let Xe="";const pt=Object.assign(Object.assign({},X),{width:E.toString(),height:q.toString(),top:ie,left:Ue}),Ht=(0,S.z$)().toLowerCase();h&&(Xe=Mt(Ht)?"_blank":h),lt(Ht)&&(d=d||"http://localhost",pt.scrollbars="yes");const hn=Object.entries(pt).reduce((qi,[Ra,cd])=>`${qi}${Ra}=${cd},`,"");if(function Ge(m=(0,S.z$)()){var d;return De(m)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Ht)&&"_self"!==Xe)return function mn(m,d){const h=document.createElement("a");h.href=m,h.target=d;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(E)}(d||"",Xe),new Qt(null);const pn=window.open(d||"",Xe,hn);Ne(pn,m,"popup-blocked");try{pn.focus()}catch{}return new Qt(pn)}(d,Xe,xt())})()}_openRedirect(d,h,E,q){var ie=this;return(0,g.Z)(function*(){return yield ie._originValidation(d),function ru(m){Lr().location.href=m}(yield Rs(d,h,E,ot(),q)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:q,promise:ie}=this.eventManagers[h];return q?Promise.resolve(q):(ke(ie,"If manager is not set, promise should be"),ie)}const E=this.initAndGetManager(d);return this.eventManagers[h]={promise:E},E.catch(()=>{delete this.eventManagers[h]}),E}initAndGetManager(d){var h=this;return(0,g.Z)(function*(){const E=yield function b(m){return M.apply(this,arguments)}(d),q=new _l(d);return E.register("authEvent",ie=>(Ne(ie?.authEvent,d,"invalid-auth-event"),{status:q.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:q},h.iframes[d._key()]=E,q})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(aa,{type:aa},q=>{var ie;const Ue=null===(ie=q?.[0])||void 0===ie?void 0:ie[aa];void 0!==Ue&&h(!!Ue),te(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Ni(m){return fo.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return kt()||Ye()||De()}}),this.cordovaResolver=sr(class hu{constructor(){this._redirectPersistence=Os,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wu,this._overrideRedirectResult=lu}_initialize(d){var h=this;return(0,g.Z)(function*(){const E=d._key();let q=h.eventManagers.get(E);return q||(q=new Ua(d),h.eventManagers.set(E,q),h.attachCallbackListeners(d,q)),q})()}_openPopup(d){te(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,E,q){var ie=this;return(0,g.Z)(function*(){!function cc(m){var d,h,E,q,ie,Ue,Xe,pt,Ht,hn;const pn=Qu();Ne("function"==typeof(null===(d=pn?.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ne(typeof(null===(h=pn?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ne("function"==typeof(null===(ie=null===(q=null===(E=pn?.cordova)||void 0===E?void 0:E.plugins)||void 0===q?void 0:q.browsertab)||void 0===ie?void 0:ie.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(pt=null===(Xe=null===(Ue=pn?.cordova)||void 0===Ue?void 0:Ue.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===pt?void 0:pt.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(hn=null===(Ht=pn?.cordova)||void 0===Ht?void 0:Ht.InAppBrowser)||void 0===hn?void 0:hn.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Ue=yield ie._initialize(d);yield Ue.initialized(),Ue.resetRedirect(),function Kd(){gl.clear()}(),yield ie._originValidation(d);const Xe=function ih(m,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:id(),postBody:null,tenantId:m.tenantId,error:ce(m,"no-auth-event")}}(d,E,q);yield function Yu(m,d){return Ba()._set(ko(m),d)}(d,Xe);const pt=yield function gf(m,d,h){return ed.apply(this,arguments)}(d,Xe,h),Ht=yield function Hp(m){const{cordova:d}=Qu();return new Promise(h=>{d.plugins.browsertab.isAvailable(E=>{let q=null;E?d.plugins.browsertab.openUrl(m):q=d.InAppBrowser.open(m,function me(m=(0,S.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),h(q)})})}(pt);return function rh(m,d,h){return cu.apply(this,arguments)}(d,Ue,Ht)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function nh(m){return td.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:E,handleOpenURL:q,BuildInfo:ie}=Qu(),Ue=setTimeout((0,g.Z)(function*(){yield rd(d),h.onEvent(gc())}),500),Xe=function(){var hn=(0,g.Z)(function*(pn){clearTimeout(Ue);const qi=yield rd(d);let Ra=null;qi&&pn?.url&&(Ra=function fc(m,d){var h,E;const q=function Dl(m){const d=du(m),h=d.link?decodeURIComponent(d.link):void 0,E=du(h).link,q=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return du(q).link||q||E||h||m}(d);if(q.includes("/__/auth/callback")){const ie=du(q),Ue=ie.firebaseError?function sh(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(ie.firebaseError)):null,Xe=null===(E=null===(h=Ue?.code)||void 0===h?void 0:h.split("auth/"))||void 0===E?void 0:E[1],pt=Xe?ce(Xe):null;return pt?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:pt,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:q,postBody:null}}return null}(qi,pn.url)),h.onEvent(Ra||gc())});return function(qi){return hn.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Xe);const pt=q,Ht=`${ie.packageName.toLowerCase()}://`;Qu().handleOpenURL=function(){var hn=(0,g.Z)(function*(pn){if(pn.toLowerCase().startsWith(Ht)&&Xe({url:pn}),"function"==typeof pt)try{pt(pn)}catch(qi){console.error(qi)}});return function(pn){return hn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Os,this._completeRedirectFn=Wu,this._overrideRedirectResult=lu}_initialize(d){var h=this;return(0,g.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,E,q){var ie=this;return(0,g.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openPopup(d,h,E,q)})()}_openRedirect(d,h,E,q){var ie=this;return(0,g.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openRedirect(d,h,E,q)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return vf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,g.Z)(function*(){if(d.underlyingResolver)return;const h=yield function yc(){return od.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function Nu(m){return m.unwrap()}function Ef(m){return dh(m)}function dh(m){const{_tokenResponse:d}=m instanceof S.ZR?m.customData:m;if(!d)return null;if(!(m instanceof S.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Io.credentialFromResult(m);const h=d.providerId;if(!h||"password"===h)return null;let E;switch(h){case"google.com":E=qo;break;case"facebook.com":E=zi;break;case"github.com":E=So;break;case"twitter.com":E=wi;break;default:const{oauthIdToken:q,oauthAccessToken:ie,oauthTokenSecret:Ue,pendingToken:Xe,nonce:pt}=d;return ie||Ue||q||Xe?Xe?h.startsWith("saml.")?nr._create(h,Xe):Ts._fromParams({providerId:h,signInMethod:h,pendingToken:Xe,idToken:q,accessToken:ie}):new Pi(h).credential({idToken:q,accessToken:ie,rawNonce:pt}):null}return m instanceof S.ZR?E.credentialFromError(m):E.credentialFromResult(m)}function Jo(m,d){return d.catch(h=>{throw h instanceof S.ZR&&function vc(m,d){var h;const E=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new ad(m,function nn(m,d){var h;const E=(0,S.m9)(m),q=d;return Ne(d.customData.operationType,E,"argument-error"),Ne(null===(h=q.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,E,"argument-error"),_o._fromError(E,q)}(m,d));else if(E){const q=dh(d),ie=d;q&&(ie.credential=q,ie.tenantId=E.tenantId||void 0,ie.email=E.email||void 0,ie.phoneNumber=E.phoneNumber||void 0)}}(m,h),h}).then(h=>{const q=h.user;return{operationType:h.operationType,credential:Ef(h),additionalUserInfo:Zi(h),user:xa.getOrCreate(q)}})}function Hi(m,d){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,g.Z)(function*(m,d){const h=yield d;return{verificationId:h.verificationId,confirm:E=>Jo(m,h.confirm(E))}})).apply(this,arguments)}class ad{constructor(d,h){this.resolver=h,this.auth=function _f(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Jo(Nu(this.auth),this.resolver.resolveSignIn(d))}}class xa{constructor(d){this._delegate=d,this.multiFactor=function ii(m){const d=(0,S.m9)(m);return Zs.has(d)||Zs.set(d,$i._fromUser(d)),Zs.get(d)}(d)}static getOrCreate(d){return xa.USER_MAP.has(d)||xa.USER_MAP.set(d,new xa(d)),xa.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,g.Z)(function*(){return Jo(h.auth,W(h._delegate,d))})()}linkWithPhoneNumber(d,h){var E=this;return(0,g.Z)(function*(){return Hi(E.auth,function Fr(m,d,h){return ti.apply(this,arguments)}(E._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,g.Z)(function*(){return Jo(h.auth,function tc(m,d,h){return au.apply(this,arguments)}(h._delegate,d,Pu))})()}linkWithRedirect(d){var h=this;return(0,g.Z)(function*(){return yield Ru(hr(h.auth)),function Yc(m,d,h){return function Jc(m,d,h){return ks.apply(this,arguments)}(m,d,h)}(h._delegate,d,Pu)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,g.Z)(function*(){return Jo(h.auth,xe(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return Hi(this.auth,function co(m,d,h){return xs.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return Jo(this.auth,function ec(m,d,h){return ou.apply(this,arguments)}(this._delegate,d,Pu))}reauthenticateWithRedirect(d){var h=this;return(0,g.Z)(function*(){return yield Ru(hr(h.auth)),function Gu(m,d,h){return function Qc(m,d,h){return sc.apply(this,arguments)}(m,d,h)}(h._delegate,d,Pu)})()}sendEmailVerification(d){return function Y(m,d){return y.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,g.Z)(function*(){return yield function Hs(m,d){return Ki.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function rt(m,d){return Nt((0,S.m9)(m),d,null)}(this._delegate,d)}updatePassword(d){return function gt(m,d){return Nt((0,S.m9)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Eo(m,d){return wo.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Pe(m,d){return Le.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function w(m,d,h){return L.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xa.USER_MAP=new WeakMap;const ud=Ne;let _c=(()=>{class m{constructor(h,E){if(this.app=h,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:q}=h.options;ud(q,"invalid-api-key",{appName:h.name}),ud(q,"invalid-api-key",{appName:h.name});const ie=typeof window<"u"?Pu:void 0;this._delegate=E.initialize({options:{persistence:Kp(q,h.name),popupRedirectResolver:ie}}),this._delegate._updateErrorMap(fe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,E){!function js(m,d,h){const E=hr(m);Ne(E._canInitEmulator,E,"emulator-config-failed"),Ne(/^https?:\/\//.test(d),E,"invalid-emulator-scheme");const q=!!h?.disableWarnings,ie=Qr(d),{host:Ue,port:Xe}=function li(m){const d=Qr(m),h=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!h)return{host:"",port:null};const E=h[2].split("@").pop()||"",q=/^(\[[^\]]+\])(:|$)/.exec(E);if(q){const ie=q[1];return{host:ie,port:Js(E.substr(ie.length+1))}}{const[ie,Ue]=E.split(":");return{host:ie,port:Js(Ue)}}}(d);E.config.emulator={url:`${ie}//${Ue}${null===Xe?"":`:${Xe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Ue,port:Xe,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:q})}),q||function Mi(){function m(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,h,E)}applyActionCode(h){return function zs(m,d){return kr.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return Xr(this._delegate,h)}confirmPasswordReset(h,E){return function ss(m,d,h){return Or.apply(this,arguments)}(this._delegate,h,E)}createUserWithEmailAndPassword(h,E){var q=this;return(0,g.Z)(function*(){return Jo(q._delegate,function Ro(m,d,h){return ts.apply(this,arguments)}(q._delegate,h,E))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function fr(m,d){return lr.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function re(m,d){return"EMAIL_SIGNIN"===Ss.parseLink(d)?.operation}(0,h)}getRedirectResult(){var h=this;return(0,g.Z)(function*(){ud(pr(),h._delegate,"operation-not-supported-in-this-environment");const E=yield function Xc(m,d){return ma.apply(this,arguments)}(h._delegate,Pu);return E?Jo(h._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function mc(m,d){hr(m)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,E,q){const{next:ie,error:Ue,complete:Xe}=ld(h,E,q);return this._delegate.onAuthStateChanged(ie,Ue,Xe)}onIdTokenChanged(h,E,q){const{next:ie,error:Ue,complete:Xe}=ld(h,E,q);return this._delegate.onIdTokenChanged(ie,Ue,Xe)}sendSignInLinkToEmail(h,E){return function ee(m,d,h){return k.apply(this,arguments)}(this._delegate,h,E)}sendPasswordResetEmail(h,E){return function Jr(m,d,h){return Wr.apply(this,arguments)}(this._delegate,h,E||void 0)}setPersistence(h){var E=this;return(0,g.Z)(function*(){let q;switch(function qp(m,d){fu(Object.values(ua).includes(d),m,"invalid-persistence-type"),(0,S.b$)()?fu(d!==ua.SESSION,m,"unsupported-persistence-type"):(0,S.UG)()?fu(d===ua.NONE,m,"unsupported-persistence-type"):lh()?fu(d===ua.NONE||d===ua.LOCAL&&(0,S.hl)(),m,"unsupported-persistence-type"):fu(d===ua.NONE||yf(),m,"unsupported-persistence-type")}(E._delegate,h),h){case ua.SESSION:q=Os;break;case ua.LOCAL:q=(yield sr(yi)._isAvailable())?yi:ei;break;case ua.NONE:q=ui;break;default:return te("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(q)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return Jo(this._delegate,function ao(m){return no.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return Jo(this._delegate,ms(this._delegate,h))}signInWithCustomToken(h){return Jo(this._delegate,function qt(m,d){return Rt.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,E){return Jo(this._delegate,function R(m,d,h){return ms((0,S.m9)(m),zr.credential(d,h))}(this._delegate,h,E))}signInWithEmailLink(h,E){return Jo(this._delegate,function Te(m,d,h){return ut.apply(this,arguments)}(this._delegate,h,E))}signInWithPhoneNumber(h,E){return Hi(this._delegate,function Kt(m,d,h){return qe.apply(this,arguments)}(this._delegate,h,E))}signInWithPopup(h){var E=this;return(0,g.Z)(function*(){return ud(pr(),E._delegate,"operation-not-supported-in-this-environment"),Jo(E._delegate,function pl(m,d,h){return vi.apply(this,arguments)}(E._delegate,h,Pu))})()}signInWithRedirect(h){var E=this;return(0,g.Z)(function*(){return ud(pr(),E._delegate,"operation-not-supported-in-this-environment"),yield Ru(E._delegate),function Zc(m,d,h){return function Zd(m,d,h){return ka.apply(this,arguments)}(m,d,h)}(E._delegate,h,Pu)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Gs(m,d){return os.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=ua,m})();function ld(m,d,h){let E=m;"function"!=typeof m&&({next:E,error:d,complete:h}=m);const q=E;return{next:Ue=>q(Ue&&xa.getOrCreate(Ue)),error:d,complete:h}}function Kp(m,d){const h=function Aa(m,d){const h=Ju();if(!h)return[];const E=Oe(Wp,m,d);switch(h.getItem(E)){case ua.NONE:return[ui];case ua.LOCAL:return[yi,Os];case ua.SESSION:return[Os];default:return[]}}(m,d);if(typeof self<"u"&&!h.includes(yi)&&h.push(yi),typeof window<"u")for(const E of[ei,Os])h.includes(E)||h.push(E);return h.includes(ui)||h.push(ui),h}class el{constructor(){this.providerId="phone",this._delegate=new Io(Nu(x.Z.auth()))}static credential(d,h){return Io.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}el.PHONE_SIGN_IN_METHOD=Io.PHONE_SIGN_IN_METHOD,el.PROVIDER_ID=Io.PROVIDER_ID;const Ou=Ne;class Zp{constructor(d,h,E=x.Z.app()){var q;Ou(null===(q=E.options)||void 0===q?void 0:q.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new st(d,h,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wf(m){m.INTERNAL.registerComponent(new K.wA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),E=d.getProvider("auth");return new _c(h,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zr,FacebookAuthProvider:zi,GithubAuthProvider:So,GoogleAuthProvider:qo,OAuthProvider:Pi,SAMLAuthProvider:es,PhoneAuthProvider:el,PhoneMultiFactorGenerator:uc,RecaptchaVerifier:Zp,TwitterAuthProvider:wi,Auth:_c,AuthCredential:is,Error:S.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.4.2")}(x.Z)},5861:(Bt,Re,j)=>{"use strict";function g(S,z,N,O,K,G,B){try{var U=S[G](B),F=U.value}catch(H){return void N(H)}U.done?z(F):Promise.resolve(F).then(O,K)}function x(S){return function(){var z=this,N=arguments;return new Promise(function(O,K){var G=S.apply(z,N);function B(F){g(G,O,K,B,U,"next",F)}function U(F){g(G,O,K,B,U,"throw",F)}B(void 0)})}}j.d(Re,{Z:()=>x})}},Bt=>{Bt(Bt.s=4662)}]);