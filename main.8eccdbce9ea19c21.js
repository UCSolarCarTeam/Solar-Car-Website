(self.webpackChunkSolar_Car_Website=self.webpackChunkSolar_Car_Website||[]).push([[179],{6217:($t,Re,H)=>{"use strict";H.d(Re,{nm:()=>Xs});var m=H(4976);H(4650),H(259);var fe=H(5861),te=H(6881),ce=H(4859),Qe=H(2090),Ye=H(1877);const Le=new Map,Pe={activated:!1,tokenObservers:[]},Ie={initialized:!1,enabled:!1};function Me(Ze){return Le.get(Ze)||Object.assign({},Pe)}function We(){return Ie}class kn{constructor($e,nt,vt,At,mn){if(this.operation=$e,this.retryPolicy=nt,this.getWaitDuration=vt,this.lowerBound=At,this.upperBound=mn,this.pending=null,this.nextErrorWaitInterval=At,At>mn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process($e){var nt=this;return(0,fe.Z)(function*(){nt.stop();try{nt.pending=new Qe.BH,yield function Fn(Ze){return new Promise($e=>{setTimeout($e,Ze)})}(nt.getNextRun($e)),nt.pending.resolve(),yield nt.pending.promise,nt.pending=new Qe.BH,yield nt.operation(),nt.pending.resolve(),yield nt.pending.promise,nt.process(!0).catch(()=>{})}catch(vt){nt.retryPolicy(vt)?nt.process(!1).catch(()=>{}):nt.stop()}})()}getNextRun($e){if($e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const nt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),nt}}}const Vt=new Qe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Lt(Ze){if(!Me(Ze).activated)throw Vt.create("use-before-activation",{appName:Ze.name})}function fr(Ze,$e){return mi.apply(this,arguments)}function mi(){return(mi=(0,fe.Z)(function*({url:Ze,body:$e},nt){const vt={"Content-Type":"application/json"},At=nt.getImmediate({optional:!0});if(At){const Vi=yield At.getHeartbeatsHeader();Vi&&(vt["X-Firebase-Client"]=Vi)}const mn={method:"POST",body:JSON.stringify($e),headers:vt};let Yn,ir;try{Yn=yield fetch(Ze,mn)}catch(Vi){throw Vt.create("fetch-network-error",{originalErrorMessage:Vi?.message})}if(200!==Yn.status)throw Vt.create("fetch-status-error",{httpStatus:Yn.status});try{ir=yield Yn.json()}catch(Vi){throw Vt.create("fetch-parse-error",{originalErrorMessage:Vi?.message})}const Tr=ir.ttl.match(/^([\d.]+)(s)$/);if(!Tr||!Tr[2]||isNaN(Number(Tr[1])))throw Vt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ir.ttl}`});const Wi=1e3*Number(Tr[1]),$s=Date.now();return{token:ir.token,expireTimeMillis:$s+Wi,issuedAtTimeMillis:$s}})).apply(this,arguments)}function Lr(Ze,$e){const{projectId:nt,appId:vt,apiKey:At}=Ze.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${nt}/apps/${vt}:exchangeDebugToken?key=${At}`,body:{debug_token:$e}}}const zr="firebase-app-check-store";let cr=null;function Gr(){return cr||(cr=new Promise((Ze,$e)=>{try{const nt=indexedDB.open("firebase-app-check-database",1);nt.onsuccess=vt=>{Ze(vt.target.result)},nt.onerror=vt=>{var At;$e(Vt.create("storage-open",{originalErrorMessage:null===(At=vt.target.error)||void 0===At?void 0:At.message}))},nt.onupgradeneeded=vt=>{0===vt.oldVersion&&vt.target.result.createObjectStore(zr,{keyPath:"compositeKey"})}}catch(nt){$e(Vt.create("storage-open",{originalErrorMessage:nt?.message}))}}),cr)}function Vn(){return(Vn=(0,fe.Z)(function*(Ze,$e){const vt=(yield Gr()).transaction(zr,"readwrite"),mn=vt.objectStore(zr).put({compositeKey:Ze,value:$e});return new Promise((Yn,ir)=>{mn.onsuccess=Tr=>{Yn()},vt.onerror=Tr=>{var Wi;ir(Vt.create("storage-set",{originalErrorMessage:null===(Wi=Tr.target.error)||void 0===Wi?void 0:Wi.message}))}})})).apply(this,arguments)}const ni=new Ye.Yd("@firebase/app-check");function qt(Ze,$e){return(0,Qe.hl)()?function Cs(Ze,$e){return function pr(Ze,$e){return Vn.apply(this,arguments)}(function gr(Ze){return`${Ze.options.appId}-${Ze.name}`}(Ze),$e)}(Ze,$e).catch(nt=>{ni.warn(`Failed to write token to IndexedDB. Error: ${nt}`)}):Promise.resolve()}function xi(){return We().enabled}function Gn(){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,fe.Z)(function*(){const Ze=We();if(Ze.enabled&&Ze.token)return Ze.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ur={error:"UNKNOWN_ERROR"};function Er(Ze){return Qe.US.encodeString(JSON.stringify(Ze),!1)}function Br(Ze){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,fe.Z)(function*(Ze,$e=!1){const nt=Ze.app;Lt(nt);const vt=Me(nt);let mn,At=vt.token;if(At&&!Je(At)&&(vt.token=void 0,At=void 0),!At){const Tr=yield vt.cachedTokenPromise;Tr&&(Je(Tr)?At=Tr:yield qt(nt,void 0))}if(!$e&&At&&Je(At))return{token:At.token};let ir,Yn=!1;if(xi()){vt.exchangeTokenPromise||(vt.exchangeTokenPromise=fr(Lr(nt,yield Gn()),Ze.heartbeatServiceProvider).finally(()=>{vt.exchangeTokenPromise=void 0}),Yn=!0);const Tr=yield vt.exchangeTokenPromise;return yield qt(nt,Tr),vt.token=Tr,{token:Tr.token}}try{vt.exchangeTokenPromise||(vt.exchangeTokenPromise=vt.provider.getToken().finally(()=>{vt.exchangeTokenPromise=void 0}),Yn=!0),At=yield Me(nt).exchangeTokenPromise}catch(Tr){"appCheck/throttled"===Tr.code?ni.warn(Tr.message):ni.error(Tr),mn=Tr}return At?mn?ir=Je(At)?{token:At.token,internalError:mn}:Rt(mn):(ir={token:At.token},vt.token=At,yield qt(nt,At)):ir=Rt(mn),Yn&&lt(nt,ir),ir})).apply(this,arguments)}function Oe(Ze,$e){const nt=Me(Ze),vt=nt.tokenObservers.filter(At=>At.next!==$e);0===vt.length&&nt.tokenRefresher&&nt.tokenRefresher.isRunning()&&nt.tokenRefresher.stop(),nt.tokenObservers=vt}function Se(Ze){const{app:$e}=Ze,nt=Me($e);let vt=nt.tokenRefresher;vt||(vt=function je(Ze){const{app:$e}=Ze;return new kn((0,fe.Z)(function*(){let vt;if(vt=Me($e).token?yield Br(Ze,!0):yield Br(Ze),vt.error)throw vt.error;if(vt.internalError)throw vt.internalError}),()=>!0,()=>{const nt=Me($e);if(nt.token){let vt=nt.token.issuedAtTimeMillis+.5*(nt.token.expireTimeMillis-nt.token.issuedAtTimeMillis)+3e5;return vt=Math.min(vt,nt.token.expireTimeMillis-3e5),Math.max(0,vt-Date.now())}return 0},3e4,96e4)}(Ze),nt.tokenRefresher=vt),!vt.isRunning()&&nt.isTokenAutoRefreshEnabled&&vt.start()}function lt(Ze,$e){const nt=Me(Ze).tokenObservers;for(const vt of nt)try{"EXTERNAL"===vt.type&&null!=$e.error?vt.error($e.error):vt.next($e)}catch{}}function Je(Ze){return Ze.expireTimeMillis-Date.now()>0}function Rt(Ze){return{token:Er(Ur),error:Ze}}class gn{constructor($e,nt){this.app=$e,this.heartbeatServiceProvider=nt}_delete(){const{tokenObservers:$e}=Me(this.app);for(const nt of $e)Oe(this.app,nt.next);return Promise.resolve()}}const yr="app-check-internal";!function fs(){(0,te._registerComponent)(new ce.wA("app-check",Ze=>function xn(Ze,$e){return new gn(Ze,$e)}(Ze.getProvider("app").getImmediate(),Ze.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ze,$e,nt)=>{Ze.getProvider(yr).initialize()})),(0,te._registerComponent)(new ce.wA(yr,Ze=>function nr(Ze){return{getToken:$e=>Br(Ze,$e),addTokenListener:$e=>function ii(Ze,$e,nt,vt){const{app:At}=Ze,mn=Me(At);if(mn.tokenObservers=[...mn.tokenObservers,{next:nt,error:vt,type:$e}],mn.token&&Je(mn.token)){const ir=mn.token;Promise.resolve().then(()=>{nt({token:ir.token}),Se(Ze)}).catch(()=>{})}mn.cachedTokenPromise.then(()=>Se(Ze))}(Ze,"INTERNAL",$e),removeTokenListener:$e=>Oe(Ze.app,$e)}}(Ze.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)("@firebase/app-check","0.7.0")}();class Xs{constructor(){return(0,m.vb)("app-check")}}typeof window<"u"&&window},3385:($t,Re,H)=>{"use strict";H.d(Re,{zQ:()=>Me,ww:()=>at,rT:()=>Ye,f7:()=>Pe,L6:()=>ce,_Q:()=>Qe,lh:()=>Le,Qv:()=>te,nw:()=>Ie});var m=H(4650),x=H(7579),S=H(9646),W=H(9751),N=H(8996),O=H(6451),Z=H(5363),K=H(3900),V=H(4004),B=H(3151),L=H(590),$=H(576);function de(We,wt){return(0,$.m)(wt)?(0,K.w)(()=>We,wt):(0,K.w)(()=>We)}var oe=H(9468),pe=H(9300),Ce=H(4976),ve=H(2011),he=H(6895),ae=H(6217),Ve=H(9260);const te=new m.OlP("angularfire2.auth.use-emulator"),ce=new m.OlP("angularfire2.auth.settings"),Qe=new m.OlP("angularfire2.auth.tenant-id"),Ye=new m.OlP("angularfire2.auth.langugage-code"),Le=new m.OlP("angularfire2.auth.use-device-language"),Pe=new m.OlP("angularfire.auth.persistence"),Ie=(We,wt,Et,hn,Pn,Cn,Dt,kn)=>(0,ve.cc)(`${We.name}.auth`,"AngularFireAuth",We.name,()=>{const Fn=wt.runOutsideAngular(()=>We.auth());if(Et&&Fn.useEmulator(...Et),hn&&(Fn.tenantId=hn),Fn.languageCode=Pn,Cn&&Fn.useDeviceLanguage(),Dt)for(const[en,Vt]of Object.entries(Dt))Fn.settings[en]=Vt;return kn&&Fn.setPersistence(kn),Fn},[Et,hn,Pn,Cn,Dt,kn]);let Me=(()=>{class We{constructor(Et,hn,Pn,Cn,Dt,kn,Fn,en,Vt,sr,Lt,hr){const Xn=new x.x,fr=(0,S.of)(void 0).pipe((0,Z.Q)(Dt.outsideAngular),(0,K.w)(()=>Cn.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,2644)))),(0,V.U)(()=>(0,ve.on)(Et,Cn,hn)),(0,V.U)(mi=>Ie(mi,Cn,kn,en,Vt,sr,Fn,Lt)),(0,B.d)({bufferSize:1,refCount:!1}));if((0,he.PM)(Pn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,S.of)(null);else{fr.pipe((0,L.P)()).subscribe();const Bi=fr.pipe((0,K.w)(Rn=>Rn.getRedirectResult().then(Qr=>Qr,()=>null)),Ce.iC,(0,B.d)({bufferSize:1,refCount:!1})),Bn=fr.pipe((0,K.w)(Rn=>new W.y(Qr=>({unsubscribe:Cn.runOutsideAngular(()=>Rn.onAuthStateChanged(zr=>Qr.next(zr),zr=>Qr.error(zr),()=>Qr.complete()))})))),Lr=fr.pipe((0,K.w)(Rn=>new W.y(Qr=>({unsubscribe:Cn.runOutsideAngular(()=>Rn.onIdTokenChanged(zr=>Qr.next(zr),zr=>Qr.error(zr),()=>Qr.complete()))}))));this.authState=Bi.pipe(de(Bn),(0,oe.R)(Dt.outsideAngular),(0,Z.Q)(Dt.insideAngular)),this.user=Bi.pipe(de(Lr),(0,oe.R)(Dt.outsideAngular),(0,Z.Q)(Dt.insideAngular)),this.idToken=this.user.pipe((0,K.w)(Rn=>Rn?(0,N.D)(Rn.getIdToken()):(0,S.of)(null))),this.idTokenResult=this.user.pipe((0,K.w)(Rn=>Rn?(0,N.D)(Rn.getIdTokenResult()):(0,S.of)(null))),this.credential=(0,O.T)(Bi,Xn,this.authState.pipe((0,pe.h)(Rn=>!Rn))).pipe((0,V.U)(Rn=>Rn?.user?Rn:null),(0,oe.R)(Dt.outsideAngular),(0,Z.Q)(Dt.insideAngular))}return(0,ve.pX)(this,fr,Cn,{spy:{apply:(mi,Bi,Bn)=>{(mi.startsWith("signIn")||mi.startsWith("createUser"))&&Bn.then(Lr=>Xn.next(Lr))}}})}}return We.\u0275fac=function(Et){return new(Et||We)(m.LFG(ve.Dh),m.LFG(ve.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ce.HU),m.LFG(te,8),m.LFG(ce,8),m.LFG(Qe,8),m.LFG(Ye,8),m.LFG(Le,8),m.LFG(Pe,8),m.LFG(ae.nm,8))},We.\u0275prov=m.Yz7({token:We,factory:We.\u0275fac,providedIn:"any"}),We})(),at=(()=>{class We{constructor(){Ve.Z.registerVersion("angularfire",Ce.q4.full,"auth-compat")}}return We.\u0275fac=function(Et){return new(Et||We)},We.\u0275mod=m.oAB({type:We}),We.\u0275inj=m.cJS({providers:[Me]}),We})()},1762:($t,Re,H)=>{"use strict";H.d(Re,{ST:()=>km,yb:()=>Lm,L6:()=>jv});var m=H(4650),x=H(4986),S=H(9751),W=H(8996),N=H(9646),O=H(4976),Z=H(8675),K=H(4482),V=H(5403);function B(){return(0,K.e)((r,e)=>{let t,s=!1;r.subscribe((0,V.x)(e,a=>{const l=t;t=a,s&&e.next([l,a]),s=!0}))})}var Le,L=H(4004),$=H(5026),de=H(1884),oe=H(9300),pe=H(2011),Ce=H(6895),he=(H(2644),H(3942)),ae=H(5861),Ve=H(6881),fe=H(4859),te=H(1877),ce=H(2090),Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ye={},Pe=Pe||{},Ie=Qe||self;function Me(){}function at(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function We(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Et="closure_uid_"+(1e9*Math.random()>>>0),hn=0;function Pn(r,e,t){return r.call.apply(r.bind,arguments)}function Cn(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function Dt(r,e,t){return(Dt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pn:Cn).apply(null,arguments)}function kn(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function Fn(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,l){for(var p=Array(arguments.length-2),D=2;D<arguments.length;D++)p[D-2]=arguments[D];return e.prototype[a].apply(s,p)}}function en(){this.s=this.s,this.o=this.o}en.prototype.s=!1,en.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function wt(r){Object.prototype.hasOwnProperty.call(r,Et)&&r[Et]||(r[Et]=++hn)}(this)},en.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sr=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Lt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function hr(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(at(s)){const a=r.length||0,l=s.length||0;r.length=a+l;for(let p=0;p<l;p++)r[a+p]=s[p]}else r.push(s)}}function Xn(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}Xn.prototype.h=function(){this.defaultPrevented=!0};var fr=function(){if(!Ie.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Ie.addEventListener("test",Me,e),Ie.removeEventListener("test",Me,e)}catch{}return r}();function mi(r){return/^[\s\xa0]*$/.test(r)}var Bi=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function Bn(r,e){return r<e?-1:r>e?1:0}function Lr(){var r=Ie.navigator;return r&&(r=r.userAgent)?r:""}function Rn(r){return-1!=Lr().indexOf(r)}function Qr(r){return Qr[" "](r),r}function zr(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}Qr[" "]=Me;var pr,r,Nt=Rn("Opera"),cr=Rn("Trident")||Rn("MSIE"),Gr=Rn("Edge"),Wr=Gr||cr,Cs=Rn("Gecko")&&!(-1!=Lr().toLowerCase().indexOf("webkit")&&!Rn("Edge"))&&!(Rn("Trident")||Rn("MSIE"))&&!Rn("Edge"),Ai=-1!=Lr().toLowerCase().indexOf("webkit")&&!Rn("Edge");function li(){var r=Ie.document;return r?r.documentMode:void 0}e:{var Vn="",Wt=(r=Lr(),Cs?/rv:([^\);]+)(\)|;)/.exec(r):Gr?/Edge\/([\d\.]+)/.exec(r):cr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Ai?/WebKit\/(\S+)/.exec(r):Nt?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(Wt&&(Vn=Wt?Wt[1]:""),cr){var fn=li();if(null!=fn&&fn>parseFloat(Vn)){pr=String(fn);break e}}pr=Vn}var gr={},qt=Ie.document&&cr&&(li()||parseInt(pr,10))||void 0;function Dr(r,e){if(Xn.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Cs){e:{try{Qr(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Nn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Dr.$.h.call(this)}}Fn(Dr,Xn);var Nn={2:"touch",3:"pen",4:"mouse"};Dr.prototype.h=function(){Dr.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var xi="closure_listenable_"+(1e6*Math.random()|0),Gn=0;function Fr(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Gn,this.fa=this.ia=!1}function qr(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Ur(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function Er(r){const e={};for(const t in r)e[t]=r[t];return e}const Br="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pr(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let l=0;l<Br.length;l++)t=Br[l],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function mr(r){this.src=r,this.g={},this.h=0}function ri(r,e){var t=e.type;if(t in r.g){var l,s=r.g[t],a=sr(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(qr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function ii(r,e,t,s){for(var a=0;a<r.length;++a){var l=r[a];if(!l.fa&&l.listener==e&&l.capture==!!t&&l.la==s)return a}return-1}mr.prototype.add=function(r,e,t,s,a){var l=r.toString();(r=this.g[l])||(r=this.g[l]=[],this.h++);var p=ii(r,e,s,a);return-1<p?(e=r[p],t||(e.ia=!1)):((e=new Fr(e,this.src,l,!!s,a)).ia=t,r.push(e)),e};var Oe="closure_lm_"+(1e6*Math.random()|0),Se={};function je(r,e,t,s,a){if(s&&s.once)return Rt(r,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)je(r,e[l],t,s,a);return null}return t=Ge(t),r&&r[xi]?r.O(e,t,We(s)?!!s.capture:!!s,a):lt(r,e,t,!1,s,a)}function lt(r,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=We(a)?!!a.capture:!!a,D=Te(r);if(D||(r[Oe]=D=new mr(r)),(t=D.add(e,t,s,p,l)).proxy)return t;if(s=function Je(){const e=De;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)fr||(a=p),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(nr(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function Rt(r,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Rt(r,e[l],t,s,a);return null}return t=Ge(t),r&&r[xi]?r.P(e,t,We(s)?!!s.capture:!!s,a):lt(r,e,t,!0,s,a)}function gn(r,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)gn(r,e[l],t,s,a);else s=We(s)?!!s.capture:!!s,t=Ge(t),r&&r[xi]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=ii(l=r.g[e],t,s,a))&&(qr(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete r.g[e],r.h--))):r&&(r=Te(r))&&(e=r.g[e.toString()],r=-1,e&&(r=ii(e,t,s,a)),(t=-1<r?e[r]:null)&&xn(t))}function xn(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[xi])ri(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(nr(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Te(e))?(ri(t,r),0==t.h&&(t.src=null,e[Oe]=null)):qr(r)}}}function nr(r){return r in Se?Se[r]:Se[r]="on"+r}function De(r,e){if(r.fa)r=!0;else{e=new Dr(e,this);var t=r.listener,s=r.la||r.src;r.ia&&xn(r),r=t.call(s,e)}return r}function Te(r){return(r=r[Oe])instanceof mr?r:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(r){return"function"==typeof r?r:(r[ge]||(r[ge]=function(e){return r.handleEvent(e)}),r[ge])}function ht(){en.call(this),this.i=new mr(this),this.S=this,this.J=null}function Mt(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new Xn(e,r);else if(e instanceof Xn)e.target=e.target||r;else{var a=e;Pr(e=new Xn(s,r),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=rn(p,s,!0,e)&&a}if(a=rn(p=e.g=r,s,!0,e)&&a,a=rn(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=rn(p=e.g=t[l],s,!1,e)&&a}function rn(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.fa&&p.capture==t){var D=p.listener,j=p.la||p.src;p.ia&&ri(r.i,p),a=!1!==D.call(j,s)&&a}}return a&&!s.defaultPrevented}Fn(ht,en),ht.prototype[xi]=!0,ht.prototype.removeEventListener=function(r,e,t,s){gn(this,r,e,t,s)},ht.prototype.N=function(){if(ht.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)qr(t[s]);delete r.g[e],r.h--}}this.J=null},ht.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},ht.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Xe=Ie.JSON.stringify;function Ke(){var r=si;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var xr,St=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new tn,r=>r.reset());class tn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function En(r){Ie.setTimeout(()=>{throw r},0)}function jn(r,e){xr||function Wn(){var r=Ie.Promise.resolve(void 0);xr=function(){r.then(ts)}}(),wi||(xr(),wi=!0),si.add(r,e)}var wi=!1,si=new class It{constructor(){this.h=this.g=null}add(e,t){const s=St.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function ts(){for(var r;r=Ke();){try{r.h.call(r.g)}catch(t){En(t)}var e=St;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}wi=!1}function Bs(r,e){ht.call(this),this.h=r||1,this.g=e||Ie,this.j=Dt(this.qb,this),this.l=Date.now()}function Js(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function or(r,e,t){if("function"==typeof r)t&&(r=Dt(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Dt(r.handleEvent,r)}return 2147483647<Number(e)?-1:Ie.setTimeout(r,e||0)}function ci(r){r.g=or(()=>{r.g=null,r.i&&(r.i=!1,ci(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Fn(Bs,ht),(Le=Bs.prototype).ga=!1,Le.T=null,Le.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Mt(this,"tick"),this.ga&&(Js(this),this.start()))}},Le.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Le.N=function(){Bs.$.N.call(this),Js(this),delete this.g};class Ss extends en{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ci(this)}N(){super.N(),this.g&&(Ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hs(r){en.call(this),this.h=r,this.g={}}Fn(hs,en);var uo=[];function yr(r,e,t,s){Array.isArray(t)||(t&&(uo[0]=t.toString()),t=uo);for(var a=0;a<t.length;a++){var l=je(e,t[a],s||r.handleEvent,!1,r.h||r);if(!l)break;r.g[l.key]=l}}function fs(r){Ur(r.g,function(e,t){this.g.hasOwnProperty(t)&&xn(e)},r),r.g={}}function ps(){this.g=!0}function br(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Vs(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return Xe(t)}catch{return e}}(r,t)+(s?" "+s:"")})}hs.prototype.N=function(){hs.$.N.call(this),fs(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ps.prototype.Ea=function(){this.g=!1},ps.prototype.info=function(){};var Ri={},ns=null;function Nr(){return ns=ns||new ht}function As(r){Xn.call(this,Ri.Ta,r)}function mo(r){const e=Nr();Mt(e,new As(e))}function Ho(r,e){Xn.call(this,Ri.STAT_EVENT,r),this.stat=e}function Li(r){const e=Nr();Mt(e,new Ho(e,r))}function Jo(r,e){Xn.call(this,Ri.Ua,r),this.size=e}function rr(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Ie.setTimeout(function(){r()},e)}Ri.Ta="serverreachability",Fn(As,Xn),Ri.STAT_EVENT="statevent",Fn(Ho,Xn),Ri.Ua="timingevent",Fn(Jo,Xn);var lo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},zo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function js(){}function $e(){}js.prototype.h=null;var mn,nt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vt(){Xn.call(this,"d")}function At(){Xn.call(this,"c")}function Yn(){}function ir(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new hs(this),this.P=Wi,this.V=new Bs(r=Wr?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Tr}function Tr(){this.i=null,this.g="",this.h=!1}Fn(vt,Xn),Fn(At,Xn),Fn(Yn,js),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},mn=new Yn;var Wi=45e3,$s={},Vi={};function eo(r,e,t){r.L=1,r.v=bi(Ji(e)),r.s=t,r.S=!0,gs(r,null)}function gs(r,e){r.G=Date.now(),Hs(r),r.A=Ji(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),vo(t.i,"t",s),r.C=0,t=r.l.I,r.h=new Tr,r.g=Fe(r.l,t?e:null,!r.s),0<r.O&&(r.M=new Ss(Dt(r.Pa,r,r.g),r.O)),yr(r.U,r.g,"readystatechange",r.nb),e=r.I?Er(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),mo(),function Un(r,e,t,s,a,l){r.info(function(){if(r.g)if(l)for(var p="",D=l.split("&"),j=0;j<D.length;j++){var J=D[j].split("=");if(1<J.length){var le=J[0];J=J[1];var Ne=le.split("_");p=2<=Ne.length&&"type"==Ne[1]?p+(le+"=")+J+"&":p+(le+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(r.j,r.u,r.A,r.m,r.W,r.s)}function xs(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function Xo(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=rs(r,t),a==Vi){4==e&&(r.o=4,Li(14),s=!1),br(r.j,r.m,null,"[Incomplete Response]");break}if(a==$s){r.o=4,Li(15),br(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}br(r.j,r.m,a,null),So(r,a)}xs(r)&&a!=Vi&&a!=$s&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,Li(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ur(e),e.L=!0,Li(11))):(br(r.j,r.m,t,"[Invalid Chunked Response]"),Co(r),zs(r))}function rs(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?Vi:(t=Number(e.substring(t,s)),isNaN(t)?$s:(s+=1)+t>e.length?Vi:(e=e.substr(s,t),r.C=s+t,e))}function Hs(r){r.Y=Date.now()+r.P,yo(r,r.P)}function yo(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=rr(Dt(r.lb,r),e)}function ks(r){r.B&&(Ie.clearTimeout(r.B),r.B=null)}function zs(r){0==r.l.H||r.J||E(r.l,r)}function Co(r){ks(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,Js(r.V),fs(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function So(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||Tt(t.h,r)))if(!r.K&&Tt(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;y(t),R(t)}ar(t),Li(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.M&&0==t.A&&!t.v&&(t.v=rr(Dt(t.ib,t),6e3));if(1>=vs(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else ne(t,11)}else if((r.K||t.g==r)&&y(t),!mi(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let J=a[e];if(t.V=J[0],J=J[1],2==t.H)if("c"==J[0]){t.J=J[1],t.oa=J[2];const le=J[3];null!=le&&(t.qa=le,t.j.info("VER="+t.qa));const Ne=J[4];null!=Ne&&(t.Ga=Ne,t.j.info("SVER="+t.Ga));const ot=J[5];null!=ot&&"number"==typeof ot&&0<ot&&(t.K=s=1.5*ot,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const _t=r.g;if(_t){const Bt=_t.g?_t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bt){var l=s.h;l.g||-1==Bt.indexOf("spdy")&&-1==Bt.indexOf("quic")&&-1==Bt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(Ln(l,l.h),l.h=null))}if(s.F){const Xt=_t.g?_t.g.getResponseHeader("X-HTTP-Session-Id"):null;Xt&&(s.Da=Xt,Cr(s.G,s.F,Xt))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var p=r;if((s=t).wa=ke(s,s.I?s.oa:null,s.Y),p.K){ho(s.h,p);var D=p,j=s.K;j&&D.setTimeout(j),D.B&&(ks(D),Hs(D)),s.g=p}else Zt(s);0<t.i.length&&k(t)}else"stop"!=J[0]&&"close"!=J[0]||ne(t,7);else 3==t.H&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?ne(t,7):Rs(t):"noop"!=J[0]&&t.l&&t.l.Aa(J),t.A=0)}mo()}catch{}}function Ei(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(at(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function wa(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(at(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function Go(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(at(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],r)}(Le=ir.prototype).setTimeout=function(r){this.P=r},Le.nb=function(r){r=r.target;const e=this.M;e&&3==Or(r)?e.l():this.Pa(r)},Le.Pa=function(r){try{if(r==this.g)e:{const le=Or(this.g);var e=this.g.Ia();if(this.g.da(),!(3>le)&&(3!=le||Wr||this.g&&(this.h.h||this.g.ja()||di(this.g)))){this.J||4!=le||7==e||mo(),ks(this);var t=this.g.da();this.aa=t;t:if(xs(this)){var s=di(this.g);r="";var a=s.length,l=4==Or(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Co(this),zs(this);var p="";break t}this.h.i=new Ie.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,p=this.h.g}else p=this.g.ja();if(this.i=200==t,function Xs(r,e,t,s,a,l,p){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.W,le,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var D,j=this.g;if((D=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mi(D)){var J=D;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,Li(12),Co(this),zs(this);break e}br(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,So(this,t)}this.S?(Xo(this,le,p),Wr&&this.i&&3==le&&(yr(this.U,this.V,"tick",this.mb),this.V.start())):(br(this.j,this.m,p,null),So(this,p)),4==le&&Co(this),this.i&&!this.J&&(4==le?E(this.l,this):(this.i=!1,Hs(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Li(12)):(this.o=0,Li(13)),Co(this),zs(this)}}}catch{}},Le.mb=function(){if(this.g){var r=Or(this.g),e=this.g.ja();this.C<e.length&&(ks(this),Xo(this,r,e),this.i&&4!=r&&Hs(this))}},Le.cancel=function(){this.J=!0,Co(this)},Le.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Kr(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(mo(),Li(17)),Co(this),this.o=2,zs(this)):yo(this,this.Y-r)};var ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ms(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof ms){this.h=void 0!==e?e:r.h,ea(this,r.j),this.s=r.s,this.g=r.g,Yr(this,r.m),this.l=r.l,e=r.i;var t=new Ti;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ii(this,t),this.o=r.o}else r&&(t=String(r).match(ji))?(this.h=!!e,ea(this,t[1]||"",!0),this.s=$i(t[2]||""),this.g=$i(t[3]||"",!0),Yr(this,t[4]),this.l=$i(t[5]||"",!0),Ii(this,t[6]||"",!0),this.o=$i(t[7]||"")):(this.h=!!e,this.i=new Ti(null,this.h))}function Ji(r){return new ms(r)}function ea(r,e,t){r.j=t?$i(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Yr(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function Ii(r,e,t){e instanceof Ti?(r.i=e,function _o(r,e){e&&!r.j&&(Jr(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Mi(this,s),vo(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=Wo(e,ys)),r.i=new Ti(e,r.h))}function Cr(r,e,t){r.i.set(e,t)}function bi(r){return Cr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function $i(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Wo(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,ha),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function ha(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}ms.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Wo(e,co,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Wo(e,co,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(Wo(t,"/"==t.charAt(0)?xa:Kn,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Wo(t,Gs)),r.join("")};var co=/[#\/\?@]/g,Kn=/[#\?:]/g,xa=/[#\?]/g,ys=/[#\?@]/g,Gs=/#/g;function Ti(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Jr(r){r.g||(r.g=new Map,r.h=0,r.i&&function Aa(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var l=r[t].substring(0,s);a=r[t].substring(s+1)}else l=r[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Mi(r,e){Jr(r),e=Ao(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function ln(r,e){return Jr(r),e=Ao(r,e),r.g.has(e)}function vo(r,e,t){Mi(r,e),0<t.length&&(r.i=null,r.g.set(Ao(r,e),Lt(t)),r.h+=t.length)}function Ao(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function fa(r){this.l=r||Ro,r=Ie.PerformanceNavigationTiming?0<(r=Ie.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Ie.g&&Ie.g.Ka&&Ie.g.Ka()&&Ie.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Le=Ti.prototype).add=function(r,e){Jr(this),this.i=null,r=Ao(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Le.forEach=function(r,e){Jr(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},Le.sa=function(){Jr(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let l=0;l<a.length;l++)t.push(e[s])}return t},Le.Z=function(r){Jr(this);let e=[];if("string"==typeof r)ln(this,r)&&(e=e.concat(this.g.get(Ao(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},Le.set=function(r,e){return Jr(this),this.i=null,ln(this,r=Ao(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Le.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},Le.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const l=encodeURIComponent(String(s)),p=this.Z(s);for(s=0;s<p.length;s++){var a=l;""!==p[s]&&(a+="="+encodeURIComponent(String(p[s]))),r.push(a)}}return this.i=r.join("&")};var Ro=10;function Di(r){return!!r.h||!!r.g&&r.g.size>=r.j}function vs(r){return r.h?1:r.g?r.g.size:0}function Tt(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Ln(r,e){r.g?r.g.add(e):r.h=e}function ho(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function to(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Lt(r.i)}function Xr(){}function ta(){this.g=new Xr}function Mo(r,e,t){const s=t||"";try{Ei(r,function(a,l){let p=a;We(a)&&(p=Xe(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function q(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function z(r){this.l=r.fc||null,this.j=r.ob||!1}function me(r,e){ht.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=xe,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fa.prototype.cancel=function(){if(this.i=to(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},Xr.prototype.stringify=function(r){return Ie.JSON.stringify(r,void 0)},Xr.prototype.parse=function(r){return Ie.JSON.parse(r,void 0)},Fn(z,js),z.prototype.g=function(){return new me(this.l,this.j)},z.prototype.i=function(r){return function(){return r}}({}),Fn(me,ht);var xe=0;function qe(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function dt(r){r.readyState=4,r.l=null,r.j=null,r.A=null,gt(r)}function gt(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Le=me.prototype).open=function(r,e){if(this.readyState!=xe)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,gt(this)},Le.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||Ie).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dt(this)),this.readyState=xe},Le.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,gt(this)),this.g&&(this.readyState=3,gt(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ie.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qe(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},Le.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?dt(this):gt(this),3==this.readyState&&qe(this)}},Le.Za=function(r){this.g&&(this.response=this.responseText=r,dt(this))},Le.Ya=function(r){this.g&&(this.response=r,dt(this))},Le.ka=function(){this.g&&dt(this)},Le.setRequestHeader=function(r,e){this.v.append(r,e)},Le.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Le.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(me.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var Kt=Ie.JSON.parse;function Pt(r){ht.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bn,this.L=this.M=!1}Fn(Pt,ht);var bn="",On=/^https?$/i,yi=["POST","PUT"];function ei(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Zr(r),Vr(r)}function Zr(r){r.F||(r.F=!0,Mt(r,"complete"),Mt(r,"error"))}function is(r){if(r.h&&typeof Pe<"u"&&(!r.C[1]||4!=Or(r)||2!=r.da()))if(r.v&&4==Or(r))or(r.La,0,r);else if(Mt(r,"readystatechange"),4==Or(r)){r.h=!1;try{const D=r.da();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===D){var a=String(r.I).match(ji)[1]||null;if(!a&&Ie.self&&Ie.self.location){var l=Ie.self.location.protocol;a=l.substr(0,l.length-1)}s=!On.test(a?a.toLowerCase():"")}t=s}if(t)Mt(r,"complete"),Mt(r,"success");else{r.m=6;try{var p=2<Or(r)?r.g.statusText:""}catch{p=""}r.j=p+" ["+r.da()+"]",Zr(r)}}finally{Vr(r)}}}function Vr(r,e){if(r.g){no(r);const t=r.g,s=r.C[0]?Me:null;r.g=null,r.C=null,e||Mt(r,"ready");try{t.onreadystatechange=s}catch{}}}function no(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(Ie.clearTimeout(r.A),r.A=null)}function Or(r){return r.g?r.g.readyState:0}function di(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case bn:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function oi(r){let e="";return Ur(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function ws(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=oi(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):Cr(r,e,t))}function ss(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function Po(r){this.Ga=0,this.i=[],this.j=new ps,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ss("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ss("baseRetryDelayMs",5e3,r),this.hb=ss("retryDelaySeedMs",1e4,r),this.eb=ss("forwardChannelMaxRetries",2,r),this.xa=ss("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new fa(r&&r.concurrentRequestLimit),this.Ja=new ta,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Rs(r){if(ee(r),3==r.H){var e=r.W++,t=Ji(r.G);Cr(t,"SID",r.J),Cr(t,"RID",e),Cr(t,"TYPE","terminate"),ut(r,t),(e=new ir(r,r.j,e,void 0)).L=2,e.v=bi(Ji(t)),t=!1,Ie.navigator&&Ie.navigator.sendBeacon&&(t=Ie.navigator.sendBeacon(e.v.toString(),"")),!t&&Ie.Image&&((new Image).src=e.v,t=!0),t||(e.g=Fe(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Hs(e)}ye(r)}function R(r){r.g&&(ur(r),r.g.cancel(),r.g=null)}function ee(r){R(r),r.u&&(Ie.clearTimeout(r.u),r.u=null),y(r),r.h.cancel(),r.m&&("number"==typeof r.m&&Ie.clearTimeout(r.m),r.m=null)}function k(r){Di(r.h)||r.m||(r.m=!0,jn(r.Na,r),r.C=0)}function be(r,e){var t;t=e?e.m:r.W++;const s=Ji(r.G);Cr(s,"SID",r.J),Cr(s,"RID",t),Cr(s,"AID",r.V),ut(r,s),r.o&&r.s&&ws(s,r.o,r.s),t=new ir(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=ft(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Ln(r.h,t),eo(t,s,e)}function ut(r,e){r.ma&&Ur(r.ma,function(t,s){Cr(e,s,t)}),r.l&&Ei({},function(t,s){Cr(e,s,t)})}function ft(r,e,t){t=Math.min(r.i.length,t);var s=r.l?Dt(r.l.Va,r.l,r):null;e:{var a=r.i;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let D=!0;for(let j=0;j<t;j++){let J=a[j].h;const le=a[j].g;if(J-=l,0>J)l=Math.max(0,a[j].h-100),D=!1;else try{Mo(le,p,"req"+J+"_")}catch{s&&s(le)}}if(D){s=p.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function Zt(r){r.g||r.u||(r.ba=1,jn(r.Ma,r),r.A=0)}function ar(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=rr(Dt(r.Ma,r),F(r,r.A)),r.A++,0))}function ur(r){null!=r.B&&(Ie.clearTimeout(r.B),r.B=null)}function Y(r){r.g=new ir(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=Ji(r.wa);Cr(e,"RID","rpc"),Cr(e,"SID",r.J),Cr(e,"CI",r.M?"0":"1"),Cr(e,"AID",r.V),Cr(e,"TYPE","xmlhttp"),ut(r,e),r.o&&r.s&&ws(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=bi(Ji(e)),t.s=null,t.S=!0,gs(t,r)}function y(r){null!=r.v&&(Ie.clearTimeout(r.v),r.v=null)}function E(r,e){var t=null;if(r.g==e){y(r),ur(r),r.g=null;var s=2}else{if(!Tt(r.h,e))return;t=e.F,ho(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;Mt(s=Nr(),new Jo(s,t)),k(r)}else Zt(r);else if(3==(a=e.o)||0==a&&0<r.ta||!(1==s&&function se(r,e){return!(vs(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=rr(Dt(r.Na,r,e),F(r,r.C)),r.C++,0)))}(r,e)||2==s&&ar(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),a){case 1:ne(r,5);break;case 4:ne(r,10);break;case 3:ne(r,6);break;default:ne(r,2)}}function F(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function ne(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=Dt(r.pb,r);t||(t=new ms("//www.google.com/images/cleardot.gif"),Ie.location&&"http"==Ie.location.protocol||ea(t,"https"),bi(t)),function _s(r,e){const t=new ps;if(Ie.Image){const s=new Image;s.onload=kn(q,t,s,"TestLoadImage: loaded",!0,e),s.onerror=kn(q,t,s,"TestLoadImage: error",!1,e),s.onabort=kn(q,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=kn(q,t,s,"TestLoadImage: timeout",!1,e),Ie.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else Li(2);r.H=0,r.l&&r.l.za(e),ye(r),ee(r)}function ye(r){if(r.H=0,r.pa=[],r.l){const e=to(r.h);(0!=e.length||0!=r.i.length)&&(hr(r.pa,e),hr(r.pa,r.i),r.h.i.length=0,Lt(r.i),r.i.length=0),r.l.ya()}}function ke(r,e,t){var s=t instanceof ms?Ji(t):new ms(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Yr(s,s.m);else{var a=Ie.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new ms(null,void 0);s&&ea(l,s),e&&(l.g=e),a&&Yr(l,a),t&&(l.l=t),s=l}return e=r.Da,(t=r.F)&&e&&Cr(s,t,e),Cr(s,"VER",r.qa),ut(r,s),s}function Fe(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pt(t&&r.Ha&&!r.va?new z({ob:!0}):r.va)).Oa(r.I),e}function rt(){}function mt(){if(cr&&!(10<=Number(qt)))throw Error("Environmental error: no available transport.")}function Ot(r,e){ht.call(this),this.g=new Po(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!mi(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mi(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Sn(this)}function nn(r){vt.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function qn(){At.call(this),this.status=1}function Sn(r){this.g=r}function _n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function jr(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var l=r.g[3],p=(e=r.g[0])+(l^(t=r.g[1])&((a=r.g[2])^l))+s[0]+3614090360&4294967295;p=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=t+(p<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^t&(a^l))+s[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^t&(a^l))+s[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^t&(a^l))+s[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(a^l&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^l&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^l&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^l&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(t^a^l)+s[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^l)+s[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^l)+s[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^l)+s[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(a^(t|~l))+s[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(l|~t))+s[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=t+(l^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~l))+s[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(l|~t))+s[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=t+(l^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~l))+s[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(l|~t))+s[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=t+(l^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((l=(e=t+((p=e+(a^(t|~l))+s[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((a=l+((p=a+(e^(l|~t))+s[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(p<<21&4294967295|p>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+l&4294967295}function An(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var l=0|r[a];s&&l==e||(t[a]=l,s=!1)}this.g=t}(Le=Pt.prototype).Oa=function(r){this.M=r},Le.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mn.g(),this.C=function Ze(r){return r.h||(r.h=r.i())}(this.u?this.u:mn),this.g.onreadystatechange=Dt(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(l){return void ei(this,l)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())t.set(l,s.get(l))}s=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=Ie.FormData&&r instanceof Ie.FormData,!(0<=sr(yi,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,p]of t)this.g.setRequestHeader(l,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{no(this),0<this.B&&((this.L=function Sr(r){return cr&&function ni(){return zr(gr,9,function(){let r=0;const e=Bi(String(pr)).split("."),t=Bi("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==r&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;r=Bn(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||Bn(0==a[2].length,0==l[2].length)||Bn(a[2],l[2]),a=a[3],l=l[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dt(this.ua,this)):this.A=or(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(l){ei(this,l)}},Le.ua=function(){typeof Pe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mt(this,"timeout"),this.abort(8))},Le.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,Mt(this,"complete"),Mt(this,"abort"),Vr(this))},Le.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vr(this,!0)),Pt.$.N.call(this)},Le.La=function(){this.s||(this.G||this.v||this.l?is(this):this.kb())},Le.kb=function(){is(this)},Le.da=function(){try{return 2<Or(this)?this.g.status:-1}catch{return-1}},Le.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Le.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),Kt(e)}},Le.Ia=function(){return this.m},Le.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Le=Po.prototype).qa=8,Le.H=1,Le.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new ir(this,this.j,r,void 0);let l=this.s;if(this.U&&(l?(l=Er(l),Pr(l,this.U)):l=this.U),null!==this.o||this.O||(a.I=l,l=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ft(this,a,e),Cr(t=Ji(this.G),"RID",r),Cr(t,"CVER",22),this.F&&Cr(t,"X-HTTP-Session-Id",this.F),ut(this,t),l&&(this.O?e="headers="+encodeURIComponent(String(oi(l)))+"&"+e:this.o&&ws(t,this.o,l)),Ln(this.h,a),this.bb&&Cr(t,"TYPE","init"),this.P?(Cr(t,"$req",e),Cr(t,"SID","null"),a.ba=!0,eo(a,t,null)):eo(a,t,e),this.H=2}}else 3==this.H&&(r?be(this,r):0==this.i.length||Di(this.h)||be(this))},Le.Ma=function(){if(this.u=null,Y(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=rr(Dt(this.jb,this),r)}},Le.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Li(10),R(this),Y(this))},Le.ib=function(){null!=this.v&&(this.v=null,R(this),ar(this),Li(19))},Le.pb=function(r){r?(this.j.info("Successfully pinged google.com"),Li(2)):(this.j.info("Failed to ping google.com"),Li(1))},(Le=rt.prototype).Ba=function(){},Le.Aa=function(){},Le.za=function(){},Le.ya=function(){},Le.Va=function(){},mt.prototype.g=function(r,e){return new Ot(r,e)},Fn(Ot,ht),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;Li(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=ke(r,null,r.Y),k(r)},Ot.prototype.close=function(){Rs(this.g)},Ot.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Xe(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&k(e)},Ot.prototype.N=function(){this.g.l=null,delete this.j,Rs(this.g),delete this.g,Ot.$.N.call(this)},Fn(nn,vt),Fn(qn,At),Fn(Sn,rt),Sn.prototype.Ba=function(){Mt(this.g,"a")},Sn.prototype.Aa=function(r){Mt(this.g,new nn(r))},Sn.prototype.za=function(r){Mt(this.g,new qn)},Sn.prototype.ya=function(){Mt(this.g,"b")},Fn(_n,function Mn(){this.blockSize=-1}),_n.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},_n.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,l=0;l<e;){if(0==a)for(;l<=t;)jr(this,r,l),l+=this.blockSize;if("string"==typeof r){for(;l<e;)if(s[a++]=r.charCodeAt(l++),a==this.blockSize){jr(this,s),a=0;break}}else for(;l<e;)if(s[a++]=r[l++],a==this.blockSize){jr(this,s),a=0;break}}this.h=a,this.i+=e},_n.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var Es={};function qi(r){return-128<=r&&128>r?zr(Es,r,function(e){return new An([0|e],0>e?-1:0)}):new An([0|r],0>r?-1:0)}function hi(r){if(isNaN(r)||!isFinite(r))return Ki;if(0>r)return Ni(hi(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=Ws;return new An(e,0)}var Ws=4294967296,Ki=qi(0),Ms=qi(1),No=qi(16777216);function Hi(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Pi(r){return-1==r.h}function Ni(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new An(t,~r.h).add(Ms)}function qs(r,e){return r.add(Ni(e))}function Ks(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function wo(r,e){this.g=r,this.h=e}function cn(r,e){if(Hi(e))throw Error("division by zero");if(Hi(r))return new wo(Ki,Ki);if(Pi(r))return e=cn(Ni(r),e),new wo(Ni(e.g),Ni(e.h));if(Pi(e))return e=cn(r,Ni(e)),new wo(Ni(e.g),e.h);if(30<r.g.length){if(Pi(r)||Pi(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Ms,s=e;0>=s.X(r);)t=In(t),s=In(s);var a=on(t,1),l=on(s,1);for(s=on(s,2),t=on(t,2);!Hi(s);){var p=l.add(s);0>=p.X(r)&&(a=a.add(t),l=p),s=on(s,1),t=on(t,1)}return e=qs(r,a.R(e)),new wo(a,e)}for(a=Ki;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),p=(l=hi(t)).R(e);Pi(p)||0<p.X(r);)p=(l=hi(t-=s)).R(e);Hi(l)&&(l=Ms),a=a.add(l),r=qs(r,p)}return new wo(a,r)}function In(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new An(t,r.h)}function on(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],l=0;l<s;l++)a[l]=0<e?r.D(l+t)>>>e|r.D(l+t+1)<<32-e:r.D(l+t);return new An(a,r.h)}(Le=An.prototype).ea=function(){if(Pi(this))return-Ni(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:Ws+s)*e,e*=Ws}return r},Le.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Hi(this))return"0";if(Pi(this))return"-"+Ni(this).toString(r);for(var e=hi(Math.pow(r,6)),t=this,s="";;){var a=cn(t,e).g,l=((0<(t=qs(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Hi(t=a))return l+s;for(;6>l.length;)l="0"+l;s=l+s}},Le.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},Le.X=function(r){return Pi(r=qs(this,r))?-1:Hi(r)?0:1},Le.abs=function(){return Pi(this)?Ni(this):this},Le.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var l=s+(65535&this.D(a))+(65535&r.D(a)),p=(l>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=p>>>16,t[a]=(p&=65535)<<16|(l&=65535)}return new An(t,-2147483648&t[t.length-1]?-1:0)},Le.R=function(r){if(Hi(this)||Hi(r))return Ki;if(Pi(this))return Pi(r)?Ni(this).R(Ni(r)):Ni(Ni(this).R(r));if(Pi(r))return Ni(this.R(Ni(r)));if(0>this.X(No)&&0>r.X(No))return hi(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var l=this.D(s)>>>16,p=65535&this.D(s),D=r.D(a)>>>16,j=65535&r.D(a);t[2*s+2*a]+=p*j,Ks(t,2*s+2*a),t[2*s+2*a+1]+=l*j,Ks(t,2*s+2*a+1),t[2*s+2*a+1]+=p*D,Ks(t,2*s+2*a+1),t[2*s+2*a+2]+=l*D,Ks(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new An(t,0)},Le.gb=function(r){return cn(this,r).h},Le.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new An(t,this.h&r.h)},Le.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new An(t,this.h|r.h)},Le.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new An(t,this.h^r.h)},mt.prototype.createWebChannel=mt.prototype.g,Ot.prototype.send=Ot.prototype.u,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,lo.NO_ERROR=0,lo.TIMEOUT=8,lo.HTTP_ERROR=6,zo.COMPLETE="complete",$e.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",ht.prototype.listen=ht.prototype.O,Pt.prototype.listenOnce=Pt.prototype.P,Pt.prototype.getLastError=Pt.prototype.Sa,Pt.prototype.getLastErrorCode=Pt.prototype.Ia,Pt.prototype.getStatus=Pt.prototype.da,Pt.prototype.getResponseJson=Pt.prototype.Wa,Pt.prototype.getResponseText=Pt.prototype.ja,Pt.prototype.send=Pt.prototype.ha,Pt.prototype.setWithCredentials=Pt.prototype.Oa,_n.prototype.digest=_n.prototype.l,_n.prototype.reset=_n.prototype.reset,_n.prototype.update=_n.prototype.j,An.prototype.add=An.prototype.add,An.prototype.multiply=An.prototype.R,An.prototype.modulo=An.prototype.gb,An.prototype.compare=An.prototype.X,An.prototype.toNumber=An.prototype.ea,An.prototype.toString=An.prototype.toString,An.prototype.getBits=An.prototype.D,An.fromNumber=hi,An.fromString=function na(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Ni(na(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=hi(Math.pow(e,8)),s=Ki,a=0;a<r.length;a+=8){var l=Math.min(8,r.length-a),p=parseInt(r.substring(a,a+l),e);8>l?(l=hi(Math.pow(e,l)),s=s.R(l).add(hi(p))):s=(s=s.R(t)).add(hi(p))}return s};var lr=Ye.createWebChannelTransport=function(){return new mt},ai=Ye.getStatEventTarget=function(){return Nr()},Ps=Ye.ErrorCode=lo,Xi=Ye.EventType=zo,Zs=Ye.Event=Ri,$r=Ye.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ra=Ye.FetchXmlHttpFactory=z,Ea=Ye.WebChannel=$e,Is=Ye.XhrIo=Pt,qo=Ye.Md5=_n,Zi=Ye.Integer=An;const Ma="@firebase/firestore";class $n{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");let pa="9.22.0";const ro=new te.Yd("@firebase/firestore");function za(){return ro.logLevel}function xt(r,...e){if(ro.logLevel<=te.in.DEBUG){const t=e.map(wu);ro.debug(`Firestore (${pa}): ${r}`,...t)}}function os(r,...e){if(ro.logLevel<=te.in.ERROR){const t=e.map(wu);ro.error(`Firestore (${pa}): ${r}`,...t)}}function Ar(r,...e){if(ro.logLevel<=te.in.WARN){const t=e.map(wu);ro.warn(`Firestore (${pa}): ${r}`,...t)}}function wu(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function an(r="Unexpected state"){const e=`FIRESTORE (${pa}) INTERNAL ASSERTION FAILED: `+r;throw os(e),new Error(e)}function wn(r,e){r||an()}function Ht(r,e){return r}const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends ce.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Oo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ra{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($n.UNAUTHENTICATED))}shutdown(){}}class Hu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nu{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=J=>this.i!==a?(a=this.i,t(J)):Promise.resolve();let p=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Rr,e.enqueueRetryable(()=>l(this.currentUser))};const D=()=>{const J=p;e.enqueueRetryable((0,ae.Z)(function*(){yield J.promise,yield l(s.currentUser)}))},j=J=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(J=>j(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?j(J):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Rr)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(wn("string"==typeof s.accessToken),new Oo(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wn(null===e||"string"==typeof e),new $n(e)}}class vi{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Eu{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new vi(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t($n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Iu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=l=>{null!=l.error&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.T;return this.T=l.token,xt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?a(l):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wn("string"==typeof t.token),this.T=t.token,new Iu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zu(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class hl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=zu(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Jn(r,e){return r<e?-1:r>e?1:0}function Eo(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function qd(r){return r+"\0"}class fi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new bt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fi.fromMillis(Date.now())}static fromDate(e){return fi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new fi(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jn(this.nanoseconds,e.nanoseconds):Jn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new fi(0,0))}static max(){return new Yt(new fi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Oa{constructor(e,t,s){void 0===t?t=0:t>e.length&&an(),void 0===s?s=e.length-t:s>e.length-t&&an(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Oa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ir extends Oa{construct(e,t,s){return new Ir(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new bt(st.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Ir(t)}static emptyPath(){return new Ir([])}}const fl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qi extends Oa{construct(e,t,s){return new Qi(e,t,s)}static isValidIdentifier(e){return fl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qi(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new bt(st.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const D=e[a];if("\\"===D){if(a+1===e.length)throw new bt(st.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const j=e[a+1];if("\\"!==j&&"."!==j&&"`"!==j)throw new bt(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=j,a+=2}else"`"===D?(p=!p,a++):"."!==D||p?(s+=D,a++):(l(),a++)}if(l(),p)throw new bt(st.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qi(t)}static emptyPath(){return new Qi([])}}class Ft{constructor(e){this.path=e}static fromPath(e){return new Ft(Ir.fromString(e))}static fromName(e){return new Ft(Ir.fromString(e).popFirst(5))}static empty(){return new Ft(Ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ir.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ir.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ft(new Ir(e.slice()))}}class Io{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Ga(r){return r.fields.find(e=>2===e.kind)}function Ko(r){return r.fields.filter(e=>2!==e.kind)}Io.UNKNOWN_ID=-1;class bu{constructor(e,t){this.fieldPath=e,this.kind=t}}class b{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new b(0,U.min())}}function v(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Yt.fromTimestamp(1e9===s?new fi(t+1,0):new fi(t,s));return new U(a,Ft.empty(),e)}function A(r){return new U(r.readTime,r.key,-1)}class U{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new U(Yt.min(),Ft.empty(),-1)}static max(){return new U(Yt.max(),Ft.empty(),-1)}}function re(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ft.comparator(r.documentKey,e.documentKey),0!==t?t:Jn(r.largestBatchId,e.largestBatchId))}const Ee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ae{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function it(r){return Ut.apply(this,arguments)}function Ut(){return Ut=(0,ae.Z)(function*(r){if(r.code!==st.FAILED_PRECONDITION||r.message!==Ee)throw r;xt("LocalStore","Unexpectedly lost primary lease")}),Ut.apply(this,arguments)}class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&an(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ue((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ue?t:Ue.resolve(t)}catch(t){return Ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.reject(t)}static resolve(e){return new Ue((t,s)=>{t(e)})}static reject(e){return new Ue((t,s)=>{s(e)})}static waitFor(e){return new Ue((t,s)=>{let a=0,l=0,p=!1;e.forEach(D=>{++a,D.next(()=>{++l,p&&l===a&&t()},j=>s(j))}),p=!0,l===a&&t()})}static or(e){let t=Ue.resolve(!1);for(const s of e)t=t.next(a=>a?Ue.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new Ue((s,a)=>{const l=e.length,p=new Array(l);let D=0;for(let j=0;j<l;j++){const J=j;t(e[J]).next(le=>{p[J]=le,++D,D===l&&s(p)},le=>a(le))}})}static doWhile(e,t){return new Ue((s,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):s()};l()})}}class Qt{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Rr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Fi(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=fo(s.target.error);this.v.reject(new Fi(e,a))}}static open(e,t,s,a){try{return new Qt(t,e.transaction(a,s))}catch(l){throw new Fi(t,l)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(xt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new io(t)}}class Tn{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===Tn.S((0,ce.z$)())&&os("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xt("SimpleDb","Removing database:",e),as(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ce.hl)())return!1;if(Tn.C())return!0;const e=(0,ce.z$)(),t=Tn.S(e),s=0<t&&t<10,a=Tn.N(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,ae.Z)(function*(){return t.db||(xt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new Fi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const D=p.target.error;a("VersionError"===D.name?new bt(st.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new bt(st.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Fi(e,D))},l.onupgradeneeded=p=>{xt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.V.O(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{xt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,ae.Z)(function*(){const p="readonly"===t;let D=0;for(;;){++D;try{l.db=yield l.$(e);const j=Qt.open(l.db,e,p?"readonly":"readwrite",s),J=a(j).next(le=>(j.P(),le)).catch(le=>(j.abort(le),Ue.reject(le))).toPromise();return J.catch(()=>{}),yield j.R,J}catch(j){const J=j,le="FirebaseError"!==J.name&&D<3;if(xt("SimpleDb","Transaction failed with error:",J.message,"Retrying:",le),l.close(),!le)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Hr{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return as(this.L.delete())}}class Fi extends bt{constructor(e,t){super(st.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zi(r){return"IndexedDbTransactionError"===r.name}class io{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(xt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(xt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),as(s)}add(e){return xt("SimpleDb","ADD",this.store.name,e,e),as(this.store.add(e))}get(e){return as(this.store.get(e)).next(t=>(void 0===t&&(t=null),xt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xt("SimpleDb","DELETE",this.store.name,e),as(this.store.delete(e))}count(){return xt("SimpleDb","COUNT",this.store.name),as(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),l=[];return this.W(a,(p,D)=>{l.push(D)}).next(()=>l)}{const a=this.store.getAll(s.range);return new Ue((l,p)=>{a.onerror=D=>{p(D.target.error)},a.onsuccess=D=>{l(D.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Ue((a,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}J(e,t){xt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(l,p,D)=>D.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new Ue((s,a)=>{t.onerror=l=>{const p=fo(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(D=>{D?p.continue():s()}):s()}})}W(e,t){const s=[];return new Ue((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const D=p.target.result;if(!D)return void a();const j=new Hr(D),J=t(D.primaryKey,D.value,j);if(J instanceof Ue){const le=J.catch(Ne=>(j.done(),Ue.reject(Ne)));s.push(le)}j.isDone?a():null===j.K?D.continue():D.continue(j.K)}}).next(()=>Ue.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function as(r){return new Ue((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=fo(s.target.error);t(a)}})}let ga=!1;function fo(r){const e=Tn.S((0,ce.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new bt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ga||(ga=!0,setTimeout(()=>{throw s},0)),s}}return r}class bs{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;xt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{xt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){zi(s)?xt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield it(s)}yield t.et(6e4)}))}}class so{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,l=!0;return Ue.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return xt("IndexBackiller",`Processing collection: ${p}`),this.it(e,p,a).next(D=>{a-=D,s.add(p)});l=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.rt(a,l)).next(D=>(xt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>p.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,l)=>{const p=A(l);re(p,s)>0&&(s=p)}),new U(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ko=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function Tu(r){return null==r}function Wa(r){return 0===r&&1/r==-1/0}function Du(r){return"number"==typeof r&&Number.isInteger(r)&&!Wa(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function us(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=pl(e)),e=bo(r.get(t),e);return pl(e)}function bo(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function pl(r){return r+"\x01\x01"}function _i(r){const e=r.length;if(wn(e>=2),2===e)return wn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Ir.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=r.indexOf("\x01",l);switch((p<0||p>t)&&an(),r.charAt(p+1)){case"\x01":const D=r.substring(l,p);let j;0===a.length?j=D:(a+=D,j=a,a=""),s.push(j);break;case"\x10":a+=r.substring(l,p),a+="\0";break;case"\x11":a+=r.substring(l,p+1);break;default:an()}l=p+2}return new Ir(s)}const Xl=["userId","batchId"];function ru(r,e){return[r,us(e)]}function ec(r,e,t){return[r,us(e),t]}const iu={},tc=["prefixPath","collectionGroup","readTime","documentId"],nc=["prefixPath","collectionGroup","documentId"],gl=["collectionGroup","readTime","prefixPath","documentId"],Wc=["canonicalId","targetId"],su=["targetId","path"],rc=["path","targetId"],Cu=["collectionId","parent"],qc=["indexId","uid"],Kd=["uid","sequenceNumber"],ou=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ml=["indexId","uid","orderedDocumentKey"],yl=["userId","collectionPath","documentId"],Kc=["userId","collectionPath","largestBatchId"],Zd=["userId","collectionGroup","largestBatchId"],La=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gu=[...La,"documentOverlays"],Zc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ic=Zc,Qc=[...ic,"indexConfiguration","indexState","indexEntries"];class Yc extends Ae{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ls(r,e){const t=Ht(r);return Tn.M(t.ht,e)}function Jc(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ma(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Wu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class pi{constructor(e,t){this.comparator=e,this.root=t||Ts.EMPTY}insert(e,t){return new pi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ts.BLACK,null,null))}remove(e){return new pi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ts.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qa(this.root,e,this.comparator,!0)}}class qa{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ts{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Ts.RED,this.left=a??Ts.EMPTY,this.right=l??Ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Ts(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Ts.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw an();const e=this.left.check();if(e!==this.right.check())throw an();return e+(this.isRed()?0:1)}}Ts.EMPTY=null,Ts.RED=!0,Ts.BLACK=!1,Ts.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(r,e,t,s,a){return this}insert(r,e,t){return new Ts(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Si{constructor(e){this.comparator=e,this.data=new pi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vl(this.data.getIterator())}getIteratorFrom(e){return new vl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Si)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Si(this.comparator);return t.data=e,t}}class vl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ia(r){return r.hasNext()?r.getNext():void 0}class po{constructor(e){this.fields=e,e.sort(Qi.comparator)}static empty(){return new po([])}unionWith(e){let t=new Si(Qi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new po(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Su extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ds{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Su("Invalid base64 string: "+a):a}}(e);return new Ds(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Ds(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ds.EMPTY_BYTE_STRING=new Ds("");const sc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ba(r){if(wn(!!r),"string"==typeof r){let e=0;const t=sc.exec(r);if(wn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Oi(r.seconds),nanos:Oi(r.nanos)}}function Oi(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function go(r){return"string"==typeof r?Ds.fromBase64String(r):Ds.fromUint8Array(r)}function qu(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function oc(r){const e=r.mapValue.fields.__previous_value__;return qu(e)?oc(e):e}function Fa(r){const e=ba(r.mapValue.fields.__local_write_time__.timestampValue);return new fi(e.seconds,e.nanos)}class Ua{constructor(e,t,s,a,l,p,D,j,J){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=D,this.longPollingOptions=j,this.useFetchStreams=J}}class ia{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ia("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ia&&e.projectId===this.projectId&&e.database===this.database}}const To={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ku={nullValue:"NULL_VALUE"};function Zo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qu(r)?4:Zn(r)?9007199254740991:10:an()}function ya(r,e){if(r===e)return!0;const t=Zo(r);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Fa(r).isEqual(Fa(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=ba(s.timestampValue),p=ba(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,go(r.bytesValue).isEqual(go(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return Oi(s.geoPointValue.latitude)===Oi(a.geoPointValue.latitude)&&Oi(s.geoPointValue.longitude)===Oi(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Oi(s.integerValue)===Oi(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Oi(s.doubleValue),p=Oi(a.doubleValue);return l===p?Wa(l)===Wa(p):isNaN(l)&&isNaN(p)}return!1}(r,e);case 9:return Eo(r.arrayValue.values||[],e.arrayValue.values||[],ya);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Jc(l)!==Jc(p))return!1;for(const D in l)if(l.hasOwnProperty(D)&&(void 0===p[D]||!ya(l[D],p[D])))return!1;return!0}(r,e);default:return an()}var a}function Zu(r,e){return void 0!==(r.values||[]).find(t=>ya(t,e))}function Ka(r,e){if(r===e)return 0;const t=Zo(r),s=Zo(e);if(t!==s)return Jn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jn(r.booleanValue,e.booleanValue);case 2:return function(a,l){const p=Oi(a.integerValue||a.doubleValue),D=Oi(l.integerValue||l.doubleValue);return p<D?-1:p>D?1:p===D?0:isNaN(p)?isNaN(D)?0:-1:1}(r,e);case 3:return Yd(r.timestampValue,e.timestampValue);case 4:return Yd(Fa(r),Fa(e));case 5:return Jn(r.stringValue,e.stringValue);case 6:return function(a,l){const p=go(a),D=go(l);return p.compareTo(D)}(r.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),D=l.split("/");for(let j=0;j<p.length&&j<D.length;j++){const J=Jn(p[j],D[j]);if(0!==J)return J}return Jn(p.length,D.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,l){const p=Jn(Oi(a.latitude),Oi(l.latitude));return 0!==p?p:Jn(Oi(a.longitude),Oi(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],D=l.values||[];for(let j=0;j<p.length&&j<D.length;++j){const J=Ka(p[j],D[j]);if(J)return J}return Jn(p.length,D.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===To.mapValue&&l===To.mapValue)return 0;if(a===To.mapValue)return 1;if(l===To.mapValue)return-1;const p=a.fields||{},D=Object.keys(p),j=l.fields||{},J=Object.keys(j);D.sort(),J.sort();for(let le=0;le<D.length&&le<J.length;++le){const Ne=Jn(D[le],J[le]);if(0!==Ne)return Ne;const ot=Ka(p[D[le]],j[J[le]]);if(0!==ot)return ot}return Jn(D.length,J.length)}(r.mapValue,e.mapValue);default:throw an()}}function Yd(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Jn(r,e);const t=ba(r),s=ba(e),a=Jn(t.seconds,s.seconds);return 0!==a?a:Jn(t.nanos,s.nanos)}function T(r){return M(r)}function M(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=ba(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?go(r.bytesValue).toBase64():"referenceValue"in r?Ft.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=M(p);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const D of a)p?p=!1:l+=",",l+=`${D}:${M(s.fields[D])}`;return l+"}"}(r.mapValue):an();var e}function _e(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function He(r){return!!r&&"integerValue"in r}function tt(r){return!!r&&"arrayValue"in r}function yt(r){return!!r&&"nullValue"in r}function Jt(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function zt(r){return!!r&&"mapValue"in r}function vn(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ma(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=vn(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vn(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Zn(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function er(r){return"nullValue"in r?Ku:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?_e(ia.empty(),Ft.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:an()}function sa(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?_e(ia.empty(),Ft.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?To:an()}function Ns(r,e){const t=Ka(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Ta(r,e){const t=Ka(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!zt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vn(t)}setAll(e){let t=Qi.emptyPath(),s={},a=[];e.forEach((p,D)=>{if(!t.isImmediateParentOf(D)){const j=this.getFieldsMap(t);this.applyChanges(j,s,a),s={},a=[],t=D.popLast()}p?s[D.lastSegment()]=vn(p):a.push(D.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());zt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];zt(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ma(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new ki(vn(this.value))}}function oa(r){const e=[];return ma(r.fields,(t,s)=>{const a=new Qi([t]);if(zt(s)){const l=oa(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new po(e)}class kr{constructor(e,t,s,a,l,p,D){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=p,this.documentState=D}static newInvalidDocument(e){return new kr(e,0,Yt.min(),Yt.min(),Yt.min(),ki.empty(),0)}static newFoundDocument(e,t,s,a){return new kr(e,1,t,Yt.min(),s,a,0)}static newNoDocument(e,t){return new kr(e,2,t,Yt.min(),Yt.min(),ki.empty(),0)}static newUnknownDocument(e,t){return new kr(e,3,t,Yt.min(),Yt.min(),ki.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oo{constructor(e,t){this.position=e,this.inclusive=t}}function _l(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],p=r.position[a];if(s=l.field.isKeyField()?Ft.comparator(Ft.fromName(p.referenceValue),t.key):Ka(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function Jd(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ya(r.position[t],e.position[t]))return!1;return!0}class ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xv(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class wl{}class Mr extends wl{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new ff(e,t,s):"array-contains"===t?new gf(e,s):"in"===t?new Xc(e,s):"not-in"===t?new nh(e,s):"array-contains-any"===t?new ed(e,s):new Mr(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new pf(e,s):new Qu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ka(t,this.value)):null!==t&&Zo(this.value)===Zo(t)&&this.matchesComparison(Ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return an()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ci extends wl{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ci(e,t)}matches(e){return El(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function El(r){return"and"===r.op}function uc(r){return"or"===r.op}function Xd(r){return df(r)&&El(r)}function df(r){for(const e of r.filters)if(e instanceof Ci)return!1;return!0}function eh(r){if(r instanceof Mr)return r.field.canonicalString()+r.op.toString()+T(r.value);if(Xd(r))return r.filters.map(e=>eh(e)).join(",");{const e=r.filters.map(t=>eh(t)).join(",");return`${r.op}(${e})`}}function hf(r,e){return r instanceof Mr?(t=r,(s=e)instanceof Mr&&t.op===s.op&&t.field.isEqual(s.field)&&ya(t.value,s.value)):r instanceof Ci?function(t,s){return s instanceof Ci&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,l,p)=>a&&hf(l,s.filters[p]),!0)}(r,e):void an();var t,s}function th(r,e){const t=r.filters.concat(e);return Ci.create(t,r.op)}function Il(r){return r instanceof Mr?`${(e=r).field.canonicalString()} ${e.op} ${T(e.value)}`:r instanceof Ci?function(e){return e.op.toString()+" {"+e.getFilters().map(Il).join(" ,")+"}"}(r):"Filter";var e}class ff extends Mr{constructor(e,t,s){super(e,t,s),this.key=Ft.fromName(s.referenceValue)}matches(e){const t=Ft.comparator(e.key,this.key);return this.matchesComparison(t)}}class pf extends Mr{constructor(e,t){super(e,"in",t),this.keys=Os(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qu extends Mr{constructor(e,t){super(e,"not-in",t),this.keys=Os(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Os(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Ft.fromName(s.referenceValue))}class gf extends Mr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tt(t)&&Zu(t.arrayValue,this.value)}}class Xc extends Mr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zu(this.value.arrayValue,t)}}class nh extends Mr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zu(this.value.arrayValue,t)}}class ed extends Mr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Zu(this.value.arrayValue,s))}}class Hp{constructor(e,t=null,s=[],a=[],l=null,p=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=D,this.dt=null}}function rh(r,e=null,t=[],s=[],a=null,l=null,p=null){return new Hp(r,e,t,s,a,l,p)}function au(r){const e=Ht(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>eh(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Tu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>T(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>T(s)).join(",")),e.dt=t}return e.dt}function lc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Xv(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!hf(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Jd(r.startAt,e.startAt)&&Jd(r.endAt,e.endAt)}function td(r){return Ft.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function cc(r,e){return r.filters.filter(t=>t instanceof Mr&&t.field.isEqual(e))}function zp(r,e,t){let s=Ku,a=!0;for(const l of cc(r,e)){let p=Ku,D=!0;switch(l.op){case"<":case"<=":p=er(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,D=!1;break;case"!=":case"not-in":p=Ku}Ns({value:s,inclusive:a},{value:p,inclusive:D})<0&&(s=p,a=D)}if(null!==t)for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const p=t.position[l];Ns({value:s,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}function bl(r,e,t){let s=To,a=!0;for(const l of cc(r,e)){let p=To,D=!0;switch(l.op){case">=":case">":p=sa(l.value),D=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,D=!1;break;case"!=":case"not-in":p=To}Ta({value:s,inclusive:a},{value:p,inclusive:D})>0&&(s=p,a=D)}if(null!==t)for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const p=t.position[l];Ta({value:s,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}class Ba{constructor(e,t=null,s=[],a=[],l=null,p="F",D=null,j=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=D,this.endAt=j,this.wt=null,this._t=null}}function ih(r,e,t,s,a,l,p,D){return new Ba(r,e,t,s,a,l,p,D)}function Yu(r){return new Ba(r)}function nd(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function dc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function hc(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function rd(r){return null!==r.collectionGroup}function Va(r){const e=Ht(r);if(null===e.wt){e.wt=[];const t=hc(e),s=dc(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new ac(t)),e.wt.push(new ac(Qi.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ac(Qi.keyField(),l))}}}return e.wt}function Lo(r){const e=Ht(r);if(!e._t)if("F"===e.limitType)e._t=rh(e.path,e.collectionGroup,Va(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Va(e))t.push(new ac(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new oo(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new oo(e.startAt.position,e.startAt.inclusive):null;e._t=rh(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function sh(r,e){e.getFirstInequalityField(),hc(r);const t=r.filters.concat([e]);return new Ba(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Tl(r,e,t){return new Ba(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function uu(r,e){return lc(Lo(r),Lo(e))&&r.limitType===e.limitType}function oh(r){return`${au(Lo(r))}|lt:${r.limitType}`}function lu(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Il(s)).join(", ")}]`),Tu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>T(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>T(s)).join(",")),`Target(${t})`}(Lo(r))}; limitType=${r.limitType})`}function fc(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ft.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of Va(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,l,p){const D=_l(a,l,p);return a.inclusive?D<=0:D<0}(t.startAt,Va(t),s)||t.endAt&&!function(a,l,p){const D=_l(a,l,p);return a.inclusive?D>=0:D>0}(t.endAt,Va(t),s)));var t,s}function pc(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function gc(r){return(e,t)=>{let s=!1;for(const a of Va(r)){const l=Gp(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function Gp(r,e,t){const s=r.field.isKeyField()?Ft.comparator(e.key,t.key):function(a,l,p){const D=l.data.field(a),j=p.data.field(a);return null!==D&&null!==j?Ka(D,j):an()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return an()}}class ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return Wu(this.inner)}size(){return this.innerSize}}const id=new pi(Ft.comparator);function ls(){return id}const ah=new pi(Ft.comparator);function Au(...r){let e=ah;for(const t of r)e=e.insert(t.key,t);return e}function mf(r){let e=ah;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Za(){return Qa()}function uh(){return Qa()}function Qa(){return new ja(r=>r.toString(),(r,e)=>r.isEqual(e))}const yf=new pi(Ft.comparator),lh=new Si(Ft.comparator);function dr(...r){let e=lh;for(const t of r)e=e.add(t);return e}const vf=new Si(Jn);function mc(){return vf}function sd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wa(e)?"-0":e}}function ch(r){return{integerValue:""+r}}function aa(r,e){return Du(e)?ch(e):sd(r,e)}class cu{constructor(){this._=void 0}}function Wp(r,e,t){return r instanceof Ru?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&qu(a)&&(a=oc(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):r instanceof Da?Ju(r,e):r instanceof Xu?Mu(r,e):function(s,a){const l=xu(s,a),p=_f(l)+_f(s.gt);return He(l)&&He(s.gt)?ch(p):sd(s.serializer,p)}(r,e)}function qp(r,e,t){return r instanceof Da?Ju(r,e):r instanceof Xu?Mu(r,e):t}function xu(r,e){return r instanceof Pu?He(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Ru extends cu{}class Da extends cu{constructor(e){super(),this.elements=e}}function Ju(r,e){const t=wf(e);for(const s of r.elements)t.some(a=>ya(a,s))||t.push(s);return{arrayValue:{values:t}}}class Xu extends cu{constructor(e){super(),this.elements=e}}function Mu(r,e){let t=wf(e);for(const s of r.elements)t=t.filter(a=>!ya(a,s));return{arrayValue:{values:t}}}class Pu extends cu{constructor(e,t){super(),this.serializer=e,this.gt=t}}function _f(r){return Oi(r.integerValue||r.doubleValue)}function wf(r){return tt(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class yc{constructor(e,t){this.field=e,this.transform=t}}class Qo{constructor(e,t){this.version=e,this.transformResults=t}}class Ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dl(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class od{}function Ca(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new g(r.key,Ui.none()):new el(r.key,r.data,Ui.none());{const t=r.data,s=ki.empty();let a=new Si(Qi.comparator);for(let l of e.fields)if(!a.has(l)){let p=t.field(l);null===p&&l.length>1&&(l=l.popLast(),p=t.field(l)),null===p?s.delete(l):s.set(l,p),a=a.add(l)}return new Nu(r.key,s,new po(a.toArray()),Ui.none())}}function ad(r,e,t){r instanceof el?function(s,a,l){const p=s.value.clone(),D=Qp(s.fieldTransforms,a,l.transformResults);p.setAll(D),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(r,e,t):r instanceof Nu?function(s,a,l){if(!Dl(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=Qp(s.fieldTransforms,a,l.transformResults),D=a.data;D.setAll(Zp(s)),D.setAll(p),a.convertToFoundDocument(l.version,D).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vc(r,e,t,s){return r instanceof el?function(a,l,p,D){if(!Dl(a.precondition,l))return p;const j=a.value.clone(),J=Ef(a.fieldTransforms,D,l);return j.setAll(J),l.convertToFoundDocument(l.version,j).setHasLocalMutations(),null}(r,e,t,s):r instanceof Nu?function(a,l,p,D){if(!Dl(a.precondition,l))return p;const j=Ef(a.fieldTransforms,D,l),J=l.data;return J.setAll(Zp(a)),J.setAll(j),l.convertToFoundDocument(l.version,J).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(le=>le.field))}(r,e,t,s):(p=t,Dl(r.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p);var l,p}function ud(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=xu(s.transform,a||null);null!=l&&(null===t&&(t=ki.empty()),t.set(s.field,l))}return t||null}function Kp(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&Eo(t,s,(a,l)=>function dh(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof Da&&s instanceof Da||t instanceof Xu&&s instanceof Xu?Eo(t.elements,s.elements,ya):t instanceof Pu&&s instanceof Pu?ya(t.gt,s.gt):t instanceof Ru&&s instanceof Ru);var t,s}(a,l))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class el extends od{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Nu extends od{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Zp(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Qp(r,e,t){const s=new Map;wn(r.length===t.length);for(let a=0;a<t.length;a++){const l=r[a],p=l.transform,D=e.data.field(l.field);s.set(l.field,qp(p,D,t[a]))}return s}function Ef(r,e,t){const s=new Map;for(const a of r){const l=a.transform,p=t.data.field(a.field);s.set(a.field,Wp(l,p,e))}return s}class g extends od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d extends od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class h{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&ad(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=vc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=vc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=uh();return this.mutations.forEach(a=>{const l=e.get(a.key),p=l.overlayedDocument;let D=this.applyToLocalView(p,l.mutatedFields);D=t.has(a.key)?null:D;const j=Ca(p,D);null!==j&&s.set(a.key,j),p.isValidDocument()||p.convertToNoDocument(Yt.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dr())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(t,s)=>Kp(t,s))&&Eo(this.baseMutations,e.baseMutations,(t,s)=>Kp(t,s))}}class w{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){wn(e.mutations.length===s.length);let a=yf;const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new w(e,t,s,a)}}class G{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Be{constructor(e,t){this.count=e,this.unchangedNames=t}}var et,pt;function Gt(r){switch(r){default:return an();case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0}}function pn(r){if(void 0===r)return os("GRPC error has no .code"),st.UNKNOWN;switch(r){case et.OK:return st.OK;case et.CANCELLED:return st.CANCELLED;case et.UNKNOWN:return st.UNKNOWN;case et.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case et.INTERNAL:return st.INTERNAL;case et.UNAVAILABLE:return st.UNAVAILABLE;case et.UNAUTHENTICATED:return st.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case et.NOT_FOUND:return st.NOT_FOUND;case et.ALREADY_EXISTS:return st.ALREADY_EXISTS;case et.PERMISSION_DENIED:return st.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case et.ABORTED:return st.ABORTED;case et.OUT_OF_RANGE:return st.OUT_OF_RANGE;case et.UNIMPLEMENTED:return st.UNIMPLEMENTED;case et.DATA_LOSS:return st.DATA_LOSS;default:return an()}}(pt=et||(et={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";class yn{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Gi}static getOrCreateInstance(){return null===Gi&&(Gi=new yn),Gi}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Gi=null;function Sa(){return new TextEncoder}const ld=new Zi([4294967295,4294967295],0);function hh(r){const e=Sa().encode(r),t=new qo;return t.update(e),new Uint8Array(t.digest())}function cd(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Zi([t,s],0),new Zi([a,l],0)]}class Cl{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Sl(`Invalid padding: ${t}`);if(s<0)throw new Sl(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Sl(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Sl(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Zi.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(Zi.fromNumber(s)));return 1===a.compare(ld)&&(a=new Zi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=hh(e),[s,a]=cd(t);for(let l=0;l<this.hashCount;l++){const p=this.Et(s,a,l);if(!this.At(p))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),p=new Cl(l,a,t);return s.forEach(D=>p.insert(D)),p}insert(e){if(0===this.It)return;const t=hh(e),[s,a]=cd(t);for(let l=0;l<this.hashCount;l++){const p=this.Et(s,a,l);this.Rt(p)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tl{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new tl(Yt.min(),a,new pi(Jn),ls(),dr())}}class Al{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Al(s,t,dr(),dr(),dr())}}class xl{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class dd{constructor(e,t){this.targetId=e,this.Vt=t}}class fh{constructor(e,t,s=Ds.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Fo{constructor(){this.St=0,this.Dt=If(),this.Ct=Ds.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=dr(),t=dr(),s=dr();return this.Dt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:an()}}),new Al(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=If()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class _c{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ls(),this.zt=ph(),this.Wt=new pi(Jn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:an()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,l=this.se(s);if(l){const p=l.target;if(td(p))if(0===a){const D=new Ft(p.path);this.Yt(s,D,kr.newNoDocument(D,Yt.min()))}else wn(1===a);else{const D=this.ie(s);if(D!==a){const j=this.re(e,D);0!==j&&(this.ee(s),this.Wt=this.Wt.insert(s,2===j?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=yn.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(J,le,Ne){var ot,_t,Bt,Xt,dn,vr;const ui={localCacheCount:le,existenceFilterCount:Ne.count},_r=Ne.unchangedNames;return _r&&(ui.bloomFilter={applied:0===J,hashCount:null!==(ot=_r?.hashCount)&&void 0!==ot?ot:0,bitmapLength:null!==(Xt=null===(Bt=null===(_t=_r?.bits)||void 0===_t?void 0:_t.bitmap)||void 0===Bt?void 0:Bt.length)&&void 0!==Xt?Xt:0,padding:null!==(vr=null===(dn=_r?.bits)||void 0===dn?void 0:dn.padding)&&void 0!==vr?vr:0}),ui}(j,D,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:l="",padding:p=0},hashCount:D=0}=s;let j,J;try{j=go(l).toUint8Array()}catch(le){if(le instanceof Su)return Ar("Decoding the base64 bloom filter in existence filter failed ("+le.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw le}try{J=new Cl(j,p,D)}catch(le){return Ar(le instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",le),1}return 0===J.It?1:a!==t-this.oe(e.targetId,J)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(l=>{const p=this.Gt.ue(),D=`projects/${p.projectId}/databases/${p.database}/documents/${l.path.canonicalString()}`;t.vt(D)||(this.Yt(e,l,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((l,p)=>{const D=this.se(p);if(D){if(l.current&&td(D.target)){const j=new Ft(D.target.path);null!==this.jt.get(j)||this.ae(p,j)||this.Yt(p,j,kr.newNoDocument(j,e))}l.Mt&&(t.set(p,l.Ot()),l.Ft())}});let s=dr();this.zt.forEach((l,p)=>{let D=!0;p.forEachWhile(j=>{const J=this.se(j);return!J||"TargetPurposeLimboResolution"===J.purpose||(D=!1,!1)}),D&&(s=s.add(l))}),this.jt.forEach((l,p)=>p.setReadTime(e));const a=new tl(e,t,this.Wt,this.jt,s);return this.jt=ls(),this.zt=ph(),this.Wt=new pi(Jn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Fo,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Si(Jn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Fo),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ph(){return new pi(Ft.comparator)}function If(){return new pi(Ft.comparator)}const ua={asc:"ASCENDING",desc:"DESCENDING"},gh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jm={and:"AND",or:"OR"};class e_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yp(r,e){return r.useProto3Json||Tu(e)?e:{value:e}}function wc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $m(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Hm(r,e){return wc(r,e.toTimestamp())}function ao(r){return wn(!!r),Yt.fromTimestamp(function(e){const t=ba(e);return new fi(t.seconds,t.nanos)}(r))}function bf(r,e){return(t=r,new Ir(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function zm(r){const e=Ir.fromString(r);return wn(Ec(e)),e}function mh(r,e){return bf(r.databaseId,e.path)}function du(r,e){const t=zm(e);if(t.get(1)!==r.databaseId.projectId)throw new bt(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new bt(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ft(ku(t))}function Tf(r,e){return bf(r.databaseId,e)}function Gm(r){const e=zm(r);return 4===e.length?Ir.emptyPath():ku(e)}function Ou(r){return new Ir(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function ku(r){return wn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Wm(r,e,t){return{name:mh(r,e),fields:t.value.mapValue.fields}}function qm(r,e,t){const s=du(r,e.name),a=ao(e.updateTime),l=e.createTime?ao(e.createTime):Yt.min(),p=new ki({mapValue:{fields:e.fields}}),D=kr.newFoundDocument(s,a,l,p);return t&&D.setHasCommittedMutations(),t?D.setHasCommittedMutations():D}function hd(r,e){let t;if(e instanceof el)t={update:Wm(r,e.key,e.value)};else if(e instanceof g)t={delete:mh(r,e.key)};else if(e instanceof Nu)t={update:Wm(r,e.key,e.data),updateMask:ew(e.fieldMask)};else{if(!(e instanceof d))return an();t={verify:mh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof Ru)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Da)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Xu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Pu)return{fieldPath:l.field.canonicalString(),increment:p.gt};throw an()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Hm(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:an()),t;var a}function Km(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ui.updateTime(ao(a.updateTime)):void 0!==a.exists?Ui.exists(a.exists):Ui.none():Ui.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let D=null;"setToServerValue"in p?(wn("REQUEST_TIME"===p.setToServerValue),D=new Ru):"appendMissingElements"in p?D=new Da(p.appendMissingElements.values||[]):"removeAllFromArray"in p?D=new Xu(p.removeAllFromArray.values||[]):"increment"in p?D=new Pu(l,p.increment):an();const j=Qi.fromServerFormat(p.fieldPath);return new yc(j,D)}(r,a)):[];var a;if(e.update){const a=du(r,e.update.name),l=new ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new po((e.updateMask.fieldPaths||[]).map(J=>Qi.fromServerFormat(J)));return new Nu(a,l,p,t,s)}return new el(a,l,t,s)}if(e.delete){const a=du(r,e.delete);return new g(a,t)}if(e.verify){const a=du(r,e.verify);return new d(a,t)}return an()}function Df(r,e){return{documents:[Tf(r,e.path)]}}function yh(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Tf(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Tf(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(j){if(0!==j.length)return Jp(Ci.create(j,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(j){if(0!==j.length)return j.map(J=>{return{field:Fu((le=J).field),direction:vh(le.dir)};var le})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=Yp(r,e.limit);var D,j;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(j=e.endAt).inclusive,values:j.position}),t}function Zm(r){let e=Gm(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){wn(1===s);const le=t.from[0];le.allDescendants?a=le.collectionId:e=e.child(le.collectionId)}let l=[];t.where&&(l=function(le){const Ne=Ym(le);return Ne instanceof Ci&&Xd(Ne)?Ne.getFilters():[Ne]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(le=>{return new ac(Rl((Ne=le).field),function(ot){switch(ot){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ne.direction));var Ne}));let D=null;t.limit&&(D=function(le){let Ne;return Ne="object"==typeof le?le.value:le,Tu(Ne)?null:Ne}(t.limit));let j=null;var le;t.startAt&&(j=new oo((le=t.startAt).values||[],!!le.before));let J=null;return t.endAt&&(J=function(le){return new oo(le.values||[],!le.before)}(t.endAt)),ih(e,a,p,l,D,"F",j,J)}function Ym(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Rl(e.unaryFilter.field);return Mr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Rl(e.unaryFilter.field);return Mr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Rl(e.unaryFilter.field);return Mr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Rl(e.unaryFilter.field);return Mr.create(l,"!=",{nullValue:"NULL_VALUE"});default:return an()}}(r):void 0!==r.fieldFilter?Mr.create(Rl((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return an()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Ci.create(e.compositeFilter.filters.map(t=>Ym(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return an()}}(e.compositeFilter.op))}(r):an();var e}function vh(r){return ua[r]}function t_(r){return gh[r]}function n_(r){return jm[r]}function Fu(r){return{fieldPath:r.canonicalString()}}function Rl(r){return Qi.fromServerFormat(r.fieldPath)}function Jp(r){return r instanceof Mr?function(e){if("=="===e.op){if(Jt(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NAN"}};if(yt(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jt(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NAN"}};if(yt(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(e.field),op:t_(e.op),value:e.value}}}(r):r instanceof Ci?function(e){const t=e.getFilters().map(s=>Jp(s));return 1===t.length?t[0]:{compositeFilter:{op:n_(e.op),filters:t}}}(r):an()}function ew(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ec(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class hu{constructor(e,t,s,a,l=Yt.min(),p=Yt.min(),D=Ds.EMPTY_BYTE_STRING,j=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=D,this.expectedCount=j}withSequenceNumber(e){return new hu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Xp{constructor(e){this.fe=e}}function Cf(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Sf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:mh(a=r.fe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:wc(a,l.version.toTimestamp()),createTime:wc(a,l.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Ic(e.version)};else{if(!e.isUnknownDocument())return an();s.unknownDocument={path:t.path.toArray(),version:Ic(e.version)}}var a,l;return s}function Sf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ic(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bc(r){const e=new fi(r.seconds,r.nanoseconds);return Yt.fromTimestamp(e)}function Tc(r,e){const t=(e.baseMutations||[]).map(l=>Km(r.fe,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>Km(r.fe,l)),a=fi.fromMillis(e.localWriteTimeMs);return new h(e.batchId,a,t,s)}function _h(r){const e=bc(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?bc(r.lastLimboFreeSnapshotVersion):Yt.min();let s;var a;return void 0!==r.query.documents?(wn(1===(a=r.query).documents.length),s=Lo(Yu(Gm(a.documents[0])))):s=Lo(Zm(r.query)),new hu(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Ds.fromBase64String(r.resumeToken))}function Jm(r,e){const t=Ic(e.snapshotVersion),s=Ic(e.lastLimboFreeSnapshotVersion);let a;a=td(e.target)?Df(r.fe,e.target):yh(r.fe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:au(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Af(r){const e=Zm({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Tl(e,e.limit,"L"):e}function wh(r,e){return new G(e.largestBatchId,Km(r.fe,e.overlayMutation))}function eg(r,e){const t=e.path.lastSegment();return[r,us(e.path.popLast()),t]}function xf(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Ic(s.readTime),documentKey:us(s.documentKey.path),largestBatchId:s.largestBatchId}}class i_{getBundleMetadata(e,t){return Xm(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:bc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Xm(e).put({bundleId:(s=t).id,createTime:Ic(ao(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return tg(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Af(a.bundledQuery),readTime:bc(a.readTime)};var a})}saveNamedQuery(e,t){return tg(e).put({name:(s=t).name,readTime:Ic(ao(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Xm(r){return Ls(r,"bundles")}function tg(r){return Ls(r,"namedQueries")}class Eh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Eh(e,t.uid||"")}getOverlay(e,t){return fu(e).get(eg(this.userId,t)).next(s=>s?wh(this.serializer,s):null)}getOverlays(e,t){const s=Za();return Ue.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((l,p)=>{const D=new G(t,p);a.push(this.we(e,D))}),Ue.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add(us(p.getCollectionPath())));const l=[];return a.forEach(p=>{const D=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push(fu(e).J("collectionPathOverlayIndex",D))}),Ue.waitFor(l)}getOverlaysForCollection(e,t,s){const a=Za(),l=us(t),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return fu(e).j("collectionPathOverlayIndex",p).next(D=>{for(const j of D){const J=wh(this.serializer,j);a.set(J.getKey(),J)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const l=Za();let p;const D=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fu(e).X({index:"collectionGroupOverlayIndex",range:D},(j,J,le)=>{const Ne=wh(this.serializer,J);l.size()<a||Ne.largestBatchId===p?(l.set(Ne.getKey(),Ne),p=Ne.largestBatchId):le.done()}).next(()=>l)}we(e,t){return fu(e).put(function(s,a,l){const[p,D,j]=eg(a,l.mutation.key);return{userId:a,collectionPath:D,documentId:j,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:hd(s.fe,l.mutation)}}(this.serializer,this.userId,t))}}function fu(r){return Ls(r,"documentOverlays")}class Ml{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Oi(e.integerValue));else if("doubleValue"in e){const s=Oi(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),Wa(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(go(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?Zn(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):an()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),Ft.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function ey(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function ty(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const l=ey(255&t[a]);if(s+=l,8!==l)break}return s}(r);return Math.ceil(e/8)}Ml.Ve=new Ml;class tw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=ty(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=ty(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Rf{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class s_{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class fd{constructor(){this.je=new tw,this.ze=new Rf(this.je),this.We=new s_(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Pl{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Pl(this.indexId,this.documentKey,this.arrayValue,s)}}function nl(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=Mf(r.arrayValue,e.arrayValue),0!==t?t:(t=Mf(r.directionalValue,e.directionalValue),0!==t?t:Ft.comparator(r.documentKey,e.documentKey)))}function Mf(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class ny{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){wn(e.collectionGroup===this.collectionId);const t=Ga(e);if(void 0!==t&&!this.en(t))return!1;const s=Ko(e);let a=0,l=0;for(;a<s.length&&this.en(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.Ze){const p=s[a];if(!this.nn(this.Ze,p)||!this.sn(this.Ye[l++],p))return!1;++a}for(;a<s.length;++a){const p=s[a];if(l>=this.Ye.length||!this.sn(this.Ye[l++],p))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ih(r){var e,t;if(wn(r instanceof Mr||r instanceof Ci),r instanceof Mr){if(r instanceof Xc){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>Mr.create(r.field,"==",l)))||[];return Ci.create(a,"or")}return r}const s=r.filters.map(a=>Ih(a));return Ci.create(s,r.op)}function Pf(r){if(0===r.getFilters().length)return[];const e=Th(Ih(r));return wn(ng(e)),Nf(e)||bh(e)?[e]:e.getFilters()}function Nf(r){return r instanceof Mr}function bh(r){return r instanceof Ci&&Xd(r)}function ng(r){return Nf(r)||bh(r)||function(e){if(e instanceof Ci&&uc(e)){for(const t of e.getFilters())if(!Nf(t)&&!bh(t))return!1;return!0}return!1}(r)}function Th(r){if(wn(r instanceof Mr||r instanceof Ci),r instanceof Mr)return r;if(1===r.filters.length)return Th(r.filters[0]);const e=r.filters.map(s=>Th(s));let t=Ci.create(e,r.op);return t=Dh(t),ng(t)?t:(wn(t instanceof Ci),wn(El(t)),wn(t.filters.length>1),t.filters.reduce((s,a)=>Dc(s,a)))}function Dc(r,e){let t;return wn(r instanceof Mr||r instanceof Ci),wn(e instanceof Mr||e instanceof Ci),t=r instanceof Mr?e instanceof Mr?Ci.create([r,e],"and"):ry(r,e):e instanceof Mr?ry(e,r):function(s,a){if(wn(s.filters.length>0&&a.filters.length>0),El(s)&&El(a))return th(s,a.getFilters());const l=uc(s)?s:a,p=uc(s)?a:s,D=l.filters.map(j=>Dc(j,p));return Ci.create(D,"or")}(r,e),Dh(t)}function ry(r,e){if(El(e))return th(e,r.getFilters());{const t=e.filters.map(s=>Dc(r,s));return Ci.create(t,"or")}}function Dh(r){if(wn(r instanceof Mr||r instanceof Ci),r instanceof Mr)return r;const e=r.getFilters();if(1===e.length)return Dh(e[0]);if(df(r))return r;const t=e.map(a=>Dh(a)),s=[];return t.forEach(a=>{a instanceof Mr?s.push(a):a instanceof Ci&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Ci.create(s,r.op)}class o_{constructor(){this.rn=new rg}addToCollectionParentIndex(e,t){return this.rn.add(t),Ue.resolve()}getCollectionParents(e,t){return Ue.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ue.resolve()}deleteFieldIndex(e,t){return Ue.resolve()}getDocumentsMatchingTarget(e,t){return Ue.resolve(null)}getIndexType(e,t){return Ue.resolve(0)}getFieldIndexes(e,t){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,t){return Ue.resolve(U.min())}getMinOffsetFromCollectionGroup(e,t){return Ue.resolve(U.min())}updateCollectionGroup(e,t,s){return Ue.resolve()}updateIndexEntries(e,t){return Ue.resolve()}}class rg{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Si(Ir.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Si(Ir.comparator)).toArray()}}const Ch=new Uint8Array(0);class ig{constructor(e,t){this.user=e,this.databaseId=t,this.on=new rg,this.un=new ja(s=>au(s),(s,a)=>lc(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const l={collectionId:s,parent:us(a)};return sg(e).put(l)}return Ue.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[qd(t),""],!1,!0);return sg(e).j(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(_i(p.parent))}return s})}addFieldIndex(e,t){const s=Sh(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var p;delete a.indexId;const l=s.add(a);if(t.indexState){const p=Ah(e);return l.next(D=>{p.put(xf(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const s=Sh(e),a=Ah(e),l=Of(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Of(e);let a=!0;const l=new Map;return Ue.forEach(this.cn(t),p=>this.an(e,p).next(D=>{a&&(a=!!D),l.set(p,D)})).next(()=>{if(a){let p=dr();const D=[];return Ue.forEach(l,(j,J)=>{var le;xt("IndexedDbIndexManager",`Using index ${le=j,`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map(_r=>`${_r.fieldPath}:${_r.kind}`).join(",")}`} to execute ${au(t)}`);const Ne=function(_r,Us){const ds=Ga(Us);if(void 0===ds)return null;for(const es of cc(_r,ds.fieldPath))switch(es.op){case"array-contains-any":return es.value.arrayValue.values||[];case"array-contains":return[es.value]}return null}(J,j),ot=function(_r,Us){const ds=new Map;for(const es of Ko(Us))for(const da of cc(_r,es.fieldPath))switch(da.op){case"==":case"in":ds.set(es.fieldPath.canonicalString(),da.value);break;case"not-in":case"!=":return ds.set(es.fieldPath.canonicalString(),da.value),Array.from(ds.values())}return null}(J,j),_t=function(_r,Us){const ds=[];let es=!0;for(const da of Ko(Us)){const Ql=0===da.kind?zp(_r,da.fieldPath,_r.startAt):bl(_r,da.fieldPath,_r.startAt);ds.push(Ql.value),es&&(es=Ql.inclusive)}return new oo(ds,es)}(J,j),Bt=function(_r,Us){const ds=[];let es=!0;for(const da of Ko(Us)){const Ql=0===da.kind?bl(_r,da.fieldPath,_r.endAt):zp(_r,da.fieldPath,_r.endAt);ds.push(Ql.value),es&&(es=Ql.inclusive)}return new oo(ds,es)}(J,j),Xt=this.hn(j,J,_t),dn=this.hn(j,J,Bt),vr=this.ln(j,J,ot),ui=this.fn(j.indexId,Ne,Xt,_t.inclusive,dn,Bt.inclusive,vr);return Ue.forEach(ui,_r=>s.H(_r,t.limit).next(Us=>{Us.forEach(ds=>{const es=Ft.fromSegments(ds.documentKey);p.has(es)||(p=p.add(es),D.push(es))})}))}).next(()=>D)}return Ue.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Pf(Ci.create(e.filters,"and")).map(s=>rh(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,l,p,D){const j=(null!=t?t.length:1)*Math.max(s.length,l.length),J=j/(null!=t?t.length:1),le=[];for(let Ne=0;Ne<j;++Ne){const ot=t?this.dn(t[Ne/J]):Ch,_t=this.wn(e,ot,s[Ne%J],a),Bt=this._n(e,ot,l[Ne%J],p),Xt=D.map(dn=>this.wn(e,ot,dn,!0));le.push(...this.createRange(_t,Bt,Xt))}return le}wn(e,t,s,a){const l=new Pl(e,Ft.empty(),t,s);return a?l:l.Je()}_n(e,t,s,a){const l=new Pl(e,Ft.empty(),t,s);return a?l.Je():l}an(e,t){const s=new ny(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let p=null;for(const D of l)s.tn(D)&&(!p||D.fields.length>p.fields.length)&&(p=D);return p})}getIndexType(e,t){let s=2;const a=this.cn(t);return Ue.forEach(a,l=>this.an(e,l).next(p=>{p?0!==s&&p.fields.length<function(D){let j=new Si(Qi.comparator),J=!1;for(const le of D.filters)for(const Ne of le.getFlattenedFilters())Ne.field.isKeyField()||("array-contains"===Ne.op||"array-contains-any"===Ne.op?J=!0:j=j.add(Ne.field));for(const le of D.orderBy)le.field.isKeyField()||(j=j.add(le.field));return j.size+(J?1:0)}(l)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new fd;for(const a of Ko(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const p=s.He(a.kind);Ml.Ve._e(l,p)}return s.Qe()}dn(e){const t=new fd;return Ml.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new fd;return Ml.Ve._e(_e(this.databaseId,t),s.He(function(a){const l=Ko(a);return 0===l.length?0:l[l.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new fd);let l=0;for(const p of Ko(e)){const D=s[l++];for(const j of a)if(this.yn(t,p.fieldPath)&&tt(D))a=this.pn(a,p,D);else{const J=j.He(p.kind);Ml.Ve._e(D,J)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],l=[];for(const p of s.arrayValue.values||[])for(const D of a){const j=new fd;j.seed(D.Qe()),Ml.Ve._e(p,j.He(t.kind)),l.push(j)}return l}yn(e,t){return!!e.filters.find(s=>s instanceof Mr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Sh(e),a=Ah(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(l=>{const p=[];return Ue.forEach(l,D=>a.get([D.indexId,this.uid]).next(j=>{p.push(function(J,le){const Ne=le?new b(le.sequenceNumber,new U(bc(le.readTime),new Ft(_i(le.documentKey)),le.largestBatchId)):b.empty(),ot=J.fields.map(([_t,Bt])=>new bu(Qi.fromServerFormat(_t),Bt));return new Io(J.indexId,J.collectionGroup,ot,Ne)}(D,j))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const l=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:Jn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Sh(e),l=Ah(e);return this.Tn(e).next(p=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>Ue.forEach(D,j=>l.put(xf(j.indexId,this.user,p,s)))))}updateIndexEntries(e,t){const s=new Map;return Ue.forEach(t,(a,l)=>{const p=s.get(a.collectionGroup);return(p?Ue.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(D=>(s.set(a.collectionGroup,D),Ue.forEach(D,j=>this.En(e,a,j).next(J=>{const le=this.An(l,j);return J.isEqual(le)?Ue.resolve():this.vn(e,l,j,J,le)}))))})}Rn(e,t,s,a){return Of(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return Of(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=Of(e);let l=new Si(nl);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(p,D)=>{l=l.add(new Pl(s.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>l)}An(e,t){let s=new Si(nl);const a=this.mn(t,e);if(null==a)return s;const l=Ga(t);if(null!=l){const p=e.data.field(l.fieldPath);if(tt(p))for(const D of p.arrayValue.values||[])s=s.add(new Pl(t.indexId,e.key,this.dn(D),a))}else s=s.add(new Pl(t.indexId,e.key,Ch,a));return s}vn(e,t,s,a,l){xt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(D,j,J,le,Ne){const ot=D.getIterator(),_t=j.getIterator();let Bt=Ia(ot),Xt=Ia(_t);for(;Bt||Xt;){let dn=!1,vr=!1;if(Bt&&Xt){const ui=J(Bt,Xt);ui<0?vr=!0:ui>0&&(dn=!0)}else null!=Bt?vr=!0:dn=!0;dn?(le(Xt),Xt=Ia(_t)):vr?(Ne(Bt),Bt=Ia(ot)):(Bt=Ia(ot),Xt=Ia(_t))}}(a,l,nl,D=>{p.push(this.Rn(e,t,s,D))},D=>{p.push(this.Pn(e,t,s,D))}),Ue.waitFor(p)}Tn(e){let t=1;return Ah(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,D)=>nl(p,D)).filter((p,D,j)=>!D||0!==nl(p,j[D-1]));const a=[];a.push(e);for(const p of s){const D=nl(p,e),j=nl(p,t);if(0===D)a[0]=e.Je();else if(D>0&&j<0)a.push(p),a.push(p.Je());else if(j>0)break}a.push(t);const l=[];for(let p=0;p<a.length;p+=2){if(this.bn(a[p],a[p+1]))return[];l.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Ch,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Ch,[]]))}return l}bn(e,t){return nl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(og)}getMinOffset(e,t){return Ue.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||an())).next(og)}}function sg(r){return Ls(r,"collectionParents")}function Of(r){return Ls(r,"indexEntries")}function Sh(r){return Ls(r,"indexConfiguration")}function Ah(r){return Ls(r,"indexState")}function og(r){wn(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;re(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new U(e.readTime,e.documentKey,t)}const iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class la{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new la(e,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ya(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),l=[],p=IDBKeyRange.only(t.batchId);let D=0;const j=s.X({range:p},(le,Ne,ot)=>(D++,ot.delete()));l.push(j.next(()=>{wn(1===D)}));const J=[];for(const le of t.mutations){const Ne=ec(e,le.key.path,t.batchId);l.push(a.delete(Ne)),J.push(le.key)}return Ue.waitFor(l).next(()=>J)}function kf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw an();e=r.noDocument}return JSON.stringify(e).length}la.DEFAULT_COLLECTION_PERCENTILE=10,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,la.DEFAULT=new la(41943040,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),la.DISABLED=new la(-1,0,0);class xh{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){wn(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new xh(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nl(e).X({index:"userMutationsIndex",range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=pd(e),p=Nl(e);return p.add({}).next(D=>{wn("number"==typeof D);const j=new h(D,t,s,a),J=function(ot,_t,Bt){const Xt=Bt.baseMutations.map(vr=>hd(ot.fe,vr)),dn=Bt.mutations.map(vr=>hd(ot.fe,vr));return{userId:_t,batchId:Bt.batchId,localWriteTimeMs:Bt.localWriteTime.toMillis(),baseMutations:Xt,mutations:dn}}(this.serializer,this.userId,j),le=[];let Ne=new Si((ot,_t)=>Jn(ot.canonicalString(),_t.canonicalString()));for(const ot of a){const _t=ec(this.userId,ot.key.path,D);Ne=Ne.add(ot.key.path.popLast()),le.push(p.put(J)),le.push(l.put(_t,iu))}return Ne.forEach(ot=>{le.push(this.indexManager.addToCollectionParentIndex(e,ot))}),e.addOnCommittedListener(()=>{this.Vn[D]=j.keys()}),Ue.waitFor(le).next(()=>j)})}lookupMutationBatch(e,t){return Nl(e).get(t).next(s=>s?(wn(s.userId===this.userId),Tc(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?Ue.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Nl(e).X({index:"userMutationsIndex",range:a},(p,D,j)=>{D.userId===this.userId&&(wn(D.batchId>=s),l=Tc(this.serializer,D)),j.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Nl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nl(e).j("userMutationsIndex",t).next(s=>s.map(a=>Tc(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ru(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return pd(e).X({range:a},(p,D,j)=>{const[J,le,Ne]=p,ot=_i(le);if(J===this.userId&&t.path.isEqual(ot))return Nl(e).get(Ne).next(_t=>{if(!_t)throw an();wn(_t.userId===this.userId),l.push(Tc(this.serializer,_t))});j.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Si(Jn);const a=[];return t.forEach(l=>{const p=ru(this.userId,l.path),D=IDBKeyRange.lowerBound(p),j=pd(e).X({range:D},(J,le,Ne)=>{const[ot,_t,Bt]=J,Xt=_i(_t);ot===this.userId&&l.path.isEqual(Xt)?s=s.add(Bt):Ne.done()});a.push(j)}),Ue.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=ru(this.userId,s),p=IDBKeyRange.lowerBound(l);let D=new Si(Jn);return pd(e).X({range:p},(j,J,le)=>{const[Ne,ot,_t]=j,Bt=_i(ot);Ne===this.userId&&s.isPrefixOf(Bt)?Bt.length===a&&(D=D.add(_t)):le.done()}).next(()=>this.Dn(e,D))}Dn(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Nl(e).get(l).next(p=>{if(null===p)throw an();wn(p.userId===this.userId),s.push(Tc(this.serializer,p))}))}),Ue.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Ya(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Ue.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ue.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return pd(e).X({range:s},(l,p,D)=>{if(l[0]===this.userId){const j=_i(l[1]);a.push(j)}else D.done()}).next(()=>{wn(0===a.length)})})}containsKey(e,t){return sy(e,this.userId,t)}xn(e){return oy(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sy(r,e,t){const s=ru(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return pd(r).X({range:l,Y:!0},(D,j,J)=>{const[le,Ne,ot]=D;le===e&&Ne===a&&(p=!0),J.done()}).next(()=>p)}function Nl(r){return Ls(r,"mutations")}function pd(r){return Ls(r,"documentMutations")}function oy(r){return Ls(r,"mutationQueues")}class Ol{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ol(0)}static Mn(){return new Ol(-1)}}class a_{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new Ol(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Yt.fromTimestamp(new fi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>gd(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(wn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return gd(e).X((p,D)=>{const j=_h(D);j.sequenceNumber<=t&&null===s.get(j.targetId)&&(a++,l.push(this.removeTargetData(e,j)))}).next(()=>Ue.waitFor(l)).next(()=>a)}forEachTarget(e,t){return gd(e).X((s,a)=>{const l=_h(a);t(l)})}$n(e){return ay(e).get("targetGlobalKey").next(t=>(wn(null!==t),t))}On(e,t){return ay(e).put("targetGlobalKey",t)}Fn(e,t){return gd(e).put(Jm(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=au(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return gd(e).X({range:a,index:"queryTargetsIndex"},(p,D,j)=>{const J=_h(D);lc(t,J.target)&&(l=J,j.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Qn(e);return t.forEach(p=>{const D=us(p.path);a.push(l.put({targetId:s,path:D})),a.push(this.referenceDelegate.addReference(e,s,p))}),Ue.waitFor(a)}removeMatchingKeys(e,t,s){const a=Qn(e);return Ue.forEach(t,l=>{const p=us(l.path);return Ue.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Qn(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Qn(e);let l=dr();return a.X({range:s,Y:!0},(p,D,j)=>{const J=_i(p[1]),le=new Ft(J);l=l.add(le)}).next(()=>l)}containsKey(e,t){const s=us(t.path),a=IDBKeyRange.bound([s],[qd(s)],!1,!0);let l=0;return Qn(e).X({index:"documentTargetsIndex",Y:!0,range:a},([p,D],j,J)=>{0!==p&&(l++,J.done())}).next(()=>l>0)}le(e,t){return gd(e).get(t).next(s=>s?_h(s):null)}}function gd(r){return Ls(r,"targets")}function ay(r){return Ls(r,"targetGlobal")}function Qn(r){return Ls(r,"targetDocuments")}function ag([r,e],[t,s]){const a=Jn(r,t);return 0===a?Jn(e,s):a}class uy{constructor(e){this.Ln=e,this.buffer=new Si(ag),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ag(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ug{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;xt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){zi(s)?xt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield it(s)}yield t.Qn(3e5)}))}}class u_{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Ue.resolve(ko.ct);const s=new uy(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(iy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iy):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,l,p,D,j,J;const le=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ne=>(Ne>this.params.maximumSequenceNumbersToCollect?(xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ne}`),a=this.params.maximumSequenceNumbersToCollect):a=Ne,p=Date.now(),this.nthSequenceNumber(e,a))).next(Ne=>(s=Ne,D=Date.now(),this.removeTargets(e,s,t))).next(Ne=>(l=Ne,j=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ne=>(J=Date.now(),za()<=te.in.DEBUG&&xt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-le}ms\n\tDetermined least recently used ${a} in `+(D-p)+`ms\n\tRemoved ${l} targets in `+(j-D)+`ms\n\tRemoved ${Ne} documents in `+(J-j)+`ms\nTotal Duration: ${J-le}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:Ne})))}}class cy{constructor(e,t){this.db=e,this.garbageCollector=function ly(r,e){return new u_(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Lf(e,s)}removeReference(e,t,s){return Lf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Lf(e,t)}Xn(e,t){return function(s,a){let l=!1;return oy(s).Z(p=>sy(s,p,a).next(D=>(D&&(l=!0),Ue.resolve(!D)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Yn(e,(p,D)=>{if(D<=t){const j=this.Xn(e,p).next(J=>{if(!J)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,Yt.min()),Qn(e).delete([0,us(p.path)])))});a.push(j)}}).next(()=>Ue.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Lf(e,t)}Yn(e,t){const s=Qn(e);let a,l=ko.ct;return s.X({index:"documentTargetsIndex"},([p,D],{path:j,sequenceNumber:J})=>{0===p?(l!==ko.ct&&t(new Ft(_i(a)),l),l=J,a=j):l=ko.ct}).next(()=>{l!==ko.ct&&t(new Ft(_i(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(r,e){return Qn(r).put((s=r.currentSequenceNumber,{targetId:0,path:us(e.path),sequenceNumber:s}));var s}class lg{constructor(){this.changes=new ja(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Ue.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class l_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return kl(e).put(s)}removeEntry(e,t,s){return kl(e).delete(function(a,l){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Sf(l),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=kr.newInvalidDocument(t);return kl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(pu(t))},(a,l)=>{s=this.ts(t,l)}).next(()=>s)}es(e,t){let s={size:0,document:kr.newInvalidDocument(t)};return kl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(pu(t))},(a,l)=>{s={document:this.ts(t,l),size:kf(l)}}).next(()=>s)}getEntries(e,t){let s=ls();return this.ns(e,t,(a,l)=>{const p=this.ts(a,l);s=s.insert(a,p)}).next(()=>s)}ss(e,t){let s=ls(),a=new pi(Ft.comparator);return this.ns(e,t,(l,p)=>{const D=this.ts(l,p);s=s.insert(l,D),a=a.insert(l,kf(p))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return Ue.resolve();let a=new Si(Ff);t.forEach(j=>a=a.add(j));const l=IDBKeyRange.bound(pu(a.first()),pu(a.last())),p=a.getIterator();let D=p.getNext();return kl(e).X({index:"documentKeyIndex",range:l},(j,J,le)=>{const Ne=Ft.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;D&&Ff(D,Ne)<0;)s(D,null),D=p.getNext();D&&D.isEqual(Ne)&&(s(D,J),D=p.hasNext()?p.getNext():null),D?le.G(pu(D)):le.done()}).next(()=>{for(;D;)s(D,null),D=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const l=t.path,p=[l.popLast().toArray(),l.lastSegment(),Sf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],D=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return kl(e).j(IDBKeyRange.bound(p,D,!0)).next(j=>{let J=ls();for(const le of j){const Ne=this.ts(Ft.fromSegments(le.prefixPath.concat(le.collectionGroup,le.documentId)),le);Ne.isFoundDocument()&&(fc(t,Ne)||a.has(Ne.key))&&(J=J.insert(Ne.key,Ne))}return J})}getAllFromCollectionGroup(e,t,s,a){let l=ls();const p=hy(t,s),D=hy(t,U.max());return kl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,D,!0)},(j,J,le)=>{const Ne=this.ts(Ft.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);l=l.insert(Ne.key,Ne),l.size===a&&le.done()}).next(()=>l)}newChangeBuffer(e){return new nw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return cg(e).get("remoteDocumentGlobalKey").next(t=>(wn(!!t),t))}Zn(e,t){return cg(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function r_(r,e){let t;if(e.document)t=qm(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ft.fromSegments(e.noDocument.path),a=bc(e.noDocument.readTime);t=kr.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return an();{const s=Ft.fromSegments(e.unknownDocument.path),a=bc(e.unknownDocument.version);t=kr.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new fi(s[0],s[1]);return Yt.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Yt.min()))return s}return kr.newInvalidDocument(e)}}function dy(r){return new l_(r)}class nw extends lg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ja(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Si((l,p)=>Jn(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const D=this.us.get(l);if(t.push(this.os.removeEntry(e,l,D.readTime)),p.isValidDocument()){const j=Cf(this.os.serializer,p);a=a.add(l.path.popLast()),s+=kf(j)-D.size,t.push(this.os.addEntry(e,l,j))}else if(s-=D.size,this.trackRemovals){const j=Cf(this.os.serializer,p.convertToNoDocument(Yt.min()));t.push(this.os.addEntry(e,l,j))}}),a.forEach(l=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.os.updateMetadata(e,s)),Ue.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((l,p)=>{this.us.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function cg(r){return Ls(r,"remoteDocumentGlobal")}function kl(r){return Ls(r,"remoteDocumentsV14")}function pu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hy(r,e){const t=e.documentKey.path.toArray();return[r,Sf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ff(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<s.length-2;++l)if(a=Jn(t[l],s[l]),a)return a;return a=Jn(t.length,s.length),a||(a=Jn(t[t.length-2],s[s.length-2]),a||Jn(t[t.length-1],s[s.length-1]))}class dg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fy{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&vc(s.mutation,a,po.empty(),fi.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,dr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=dr()){const a=Za();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let p=Au();return l.forEach((D,j)=>{p=p.insert(D,j.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=Za();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,dr()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((p,D)=>{t.set(p,D)})})}computeViews(e,t,s,a){let l=ls();const p=Qa(),D=Qa();return t.forEach((j,J)=>{const le=s.get(J.key);a.has(J.key)&&(void 0===le||le.mutation instanceof Nu)?l=l.insert(J.key,J):void 0!==le?(p.set(J.key,le.mutation.getFieldMask()),vc(le.mutation,J,le.mutation.getFieldMask(),fi.now())):p.set(J.key,po.empty())}),this.recalculateAndSaveOverlays(e,l).next(j=>(j.forEach((J,le)=>p.set(J,le)),t.forEach((J,le)=>{var Ne;return D.set(J,new dg(le,null!==(Ne=p.get(J))&&void 0!==Ne?Ne:null))}),D))}recalculateAndSaveOverlays(e,t){const s=Qa();let a=new pi((p,D)=>p-D),l=dr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const D of p)D.keys().forEach(j=>{const J=t.get(j);if(null===J)return;let le=s.get(j)||po.empty();le=D.applyToLocalView(J,le),s.set(j,le);const Ne=(a.get(D.batchId)||dr()).add(j);a=a.insert(D.batchId,Ne)})}).next(()=>{const p=[],D=a.getReverseIterator();for(;D.hasNext();){const j=D.getNext(),J=j.key,le=j.value,Ne=uh();le.forEach(ot=>{if(!l.has(ot)){const _t=Ca(t.get(ot),s.get(ot));null!==_t&&Ne.set(ot,_t),l=l.add(ot)}}),p.push(this.documentOverlayCache.saveOverlays(e,J,Ne))}return Ue.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Ft.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):rd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const p=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):Ue.resolve(Za());let D=-1,j=l;return p.next(J=>Ue.forEach(J,(le,Ne)=>(D<Ne.largestBatchId&&(D=Ne.largestBatchId),l.get(le)?Ue.resolve():this.remoteDocumentCache.getEntry(e,le).next(ot=>{j=j.insert(le,ot)}))).next(()=>this.populateOverlays(e,J,l)).next(()=>this.computeViews(e,j,J,dr())).next(le=>({batchId:D,changes:mf(le)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ft(t)).next(s=>{let a=Au();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let l=Au();return this.indexManager.getCollectionParents(e,a).next(p=>Ue.forEach(p,D=>{const j=(J=t,le=D.child(a),new Ba(le,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,le;return this.getDocumentsMatchingCollectionQuery(e,j,s).next(J=>{J.forEach((le,Ne)=>{l=l.insert(le,Ne)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(l=>{a.forEach((D,j)=>{const J=j.getKey();null===l.get(J)&&(l=l.insert(J,kr.newInvalidDocument(J)))});let p=Au();return l.forEach((D,j)=>{const J=a.get(D);void 0!==J&&vc(J.mutation,j,po.empty(),fi.now()),fc(t,j)&&(p=p.insert(D,j))}),p})}}class rw{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ue.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:ao(s.createTime)}),Ue.resolve()}getNamedQuery(e,t){return Ue.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:Af(s.bundledQuery),readTime:ao(s.readTime)}),Ue.resolve();var s}}class iw{constructor(){this.overlays=new pi(Ft.comparator),this.ls=new Map}getOverlay(e,t){return Ue.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Za();return Ue.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.we(e,t,l)}),Ue.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(s)),Ue.resolve()}getOverlaysForCollection(e,t,s){const a=Za(),l=t.length+1,p=new Ft(t.child("")),D=this.overlays.getIteratorFrom(p);for(;D.hasNext();){const j=D.getNext().value,J=j.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===l&&j.largestBatchId>s&&a.set(j.getKey(),j)}return Ue.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new pi((J,le)=>J-le);const p=this.overlays.getIterator();for(;p.hasNext();){const J=p.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>s){let le=l.get(J.largestBatchId);null===le&&(le=Za(),l=l.insert(J.largestBatchId,le)),le.set(J.getKey(),J)}}const D=Za(),j=l.getIterator();for(;j.hasNext()&&(j.getNext().value.forEach((J,le)=>D.set(J,le)),!(D.size()>=a)););return Ue.resolve(D)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const p=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new G(t,s));let l=this.ls.get(t);void 0===l&&(l=dr(),this.ls.set(t,l)),this.ls.set(t,l.add(s.key))}}class py{constructor(){this.fs=new Si(Uo.ds),this.ws=new Si(Uo._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new Uo(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new Uo(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new Ft(new Ir([])),s=new Uo(t,e),a=new Uo(t,e+1),l=[];return this.ws.forEachInRange([s,a],p=>{this.ys(p),l.push(p.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ft(new Ir([])),s=new Uo(t,e),a=new Uo(t,e+1);let l=dr();return this.ws.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Uo(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Uo{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ft.comparator(e.key,t.key)||Jn(e.As,t.As)}static _s(e,t){return Jn(e.As,t.As)||Ft.comparator(e.key,t.key)}}class gy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Si(Uo.ds)}checkEmpty(e){return Ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const l=this.vs;this.vs++;const p=new h(l,t,s,a);this.mutationQueue.push(p);for(const D of a)this.Rs=this.Rs.add(new Uo(D.key,l)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return Ue.resolve(p)}lookupMutationBatch(e,t){return Ue.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),l=a<0?0:a;return Ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Uo(t,0),a=new Uo(t,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([s,a],p=>{const D=this.Ps(p.As);l.push(D)}),Ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Si(Jn);return t.forEach(a=>{const l=new Uo(a,0),p=new Uo(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,p],D=>{s=s.add(D.As)})}),Ue.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ft.isDocumentKey(l)||(l=l.child(""));const p=new Uo(new Ft(l),0);let D=new Si(Jn);return this.Rs.forEachWhile(j=>{const J=j.key.path;return!!s.isPrefixOf(J)&&(J.length===a&&(D=D.add(j.As)),!0)},p),Ue.resolve(this.Vs(D))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){wn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return Ue.forEach(t.mutations,a=>{const l=new Uo(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new Uo(t,0),a=this.Rs.firstAfterOrEqual(s);return Ue.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Ue.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sw{constructor(e){this.Ds=e,this.docs=new pi(Ft.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,p=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ue.resolve(s?s.document.mutableCopy():kr.newInvalidDocument(t))}getEntries(e,t){let s=ls();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():kr.newInvalidDocument(a))}),Ue.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=ls();const p=t.path,D=new Ft(p.child("")),j=this.docs.getIteratorFrom(D);for(;j.hasNext();){const{key:J,value:{document:le}}=j.getNext();if(!p.isPrefixOf(J.path))break;J.path.length>p.length+1||re(A(le),s)<=0||(a.has(le.key)||fc(t,le))&&(l=l.insert(le.key,le.mutableCopy()))}return Ue.resolve(l)}getAllFromCollectionGroup(e,t,s,a){an()}Cs(e,t){return Ue.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new c_(this)}getSize(e){return Ue.resolve(this.size)}}class c_ extends lg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),Ue.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class md{constructor(e){this.persistence=e,this.xs=new ja(t=>au(t),lc),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new py,this.targetCount=0,this.Ms=Ol.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),Ue.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ol(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ue.resolve()}updateTargetData(e,t){return this.Fn(t),Ue.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.xs.forEach((p,D)=>{D.sequenceNumber<=t&&null===s.get(D.targetId)&&(this.xs.delete(p),l.push(this.removeMatchingKeysForTargetId(e,D.targetId)),a++)}),Ue.waitFor(l).next(()=>a)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return Ue.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),Ue.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),Ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ue.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return Ue.resolve(s)}containsKey(e,t){return Ue.resolve(this.ks.containsKey(t))}}class hg{constructor(e,t){this.$s={},this.overlays={},this.Os=new ko(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new md(this),this.indexManager=new o_,this.remoteDocumentCache=new sw(s=>this.referenceDelegate.Ls(s)),this.serializer=new Xp(t),this.qs=new rw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new gy(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){xt("MemoryPersistence","Starting transaction:",e);const a=new my(this.Os.next());return this.referenceDelegate.Us(),s(a).next(l=>this.referenceDelegate.Ks(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Gs(e,t){return Ue.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class my extends Ae{constructor(e){super(),this.currentSequenceNumber=e}}class Cc{constructor(e){this.persistence=e,this.Qs=new py,this.js=null}static zs(e){return new Cc(e)}get Ws(){if(this.js)return this.js;throw an()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),Ue.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),Ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ue.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Ws.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.Ws,s=>{const a=Ft.fromPath(s);return this.Hs(e,a).next(l=>{l||t.removeEntry(a,Yt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Ue.or([()=>Ue.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class yy{constructor(e){this.serializer=e}O(e,t,s,a){const l=new Qt("createOrUpgrade",t);var D;s<1&&a>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xl,{unique:!0}),D.createObjectStore("documentMutations"),vy(e),function(D){D.createObjectStore("remoteDocuments")}(e));let p=Ue.resolve();return s<3&&a>=3&&(0!==s&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),vy(e)),p=p.next(()=>function(D){const j=D.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yt.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",J)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(D,j){return j.store("mutations").j().next(J=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xl,{unique:!0});const le=j.store("mutations"),Ne=J.map(ot=>le.put(ot));return Ue.waitFor(Ne)})}(e,l))),p=p.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ys(l))),s<6&&a>=6&&(p=p.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(l)))),s<7&&a>=7&&(p=p.next(()=>this.Zs(l))),s<8&&a>=8&&(p=p.next(()=>this.ti(e,l))),s<9&&a>=9&&(p=p.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.ei(l))),s<11&&a>=11&&(p=p.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(D){const j=D.createObjectStore("documentOverlays",{keyPath:yl});j.createIndex("collectionPathOverlayIndex",Kc,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",Zd,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(D){const j=D.createObjectStore("remoteDocumentsV14",{keyPath:tc});j.createIndex("documentKeyIndex",nc),j.createIndex("collectionGroupIndex",gl)}(e)).next(()=>this.ni(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>this.si(e,l))),s<15&&a>=15&&(p=p.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:qc}).createIndex("sequenceNumberIndex",Kd,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:ou}).createIndex("documentKeyIndex",ml,{unique:!1})}(e))),p}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=kf(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>Ue.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",p).next(D=>Ue.forEach(D,j=>{wn(j.userId===l.userId);const J=Tc(this.serializer,j);return Ya(e,l.userId,J).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return s.X((p,D)=>{const j=new Ir(p),J=[0,us(j)];l.push(t.get(J).next(le=>le?Ue.resolve():t.put({targetId:0,path:us(j),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>Ue.waitFor(l))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Cu});const s=t.store("collectionParents"),a=new rg,l=p=>{if(a.add(p)){const D=p.lastSegment(),j=p.popLast();return s.put({collectionId:D,parent:us(j)})}};return t.store("remoteDocuments").X({Y:!0},(p,D)=>{const j=new Ir(p);return l(j.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([p,D,j],J)=>{const le=_i(D);return l(le.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const l=_h(a),p=Jm(this.serializer,l);return t.put(p)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((l,p)=>{const D=t.store("remoteDocumentsV14"),j=(J=p,J.document?new Ft(Ir.fromString(J.document.name).popFirst(5)):J.noDocument?Ft.fromSegments(J.noDocument.path):J.unknownDocument?Ft.fromSegments(J.unknownDocument.path):an()).path.toArray();var J;const le={prefixPath:j.slice(0,j.length-2),collectionGroup:j[j.length-2],documentId:j[j.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(D.put(le))}).next(()=>Ue.waitFor(a))}si(e,t){const s=t.store("mutations"),a=dy(this.serializer),l=new hg(Cc.zs,this.serializer.fe);return s.j().next(p=>{const D=new Map;return p.forEach(j=>{var J;let le=null!==(J=D.get(j.userId))&&void 0!==J?J:dr();Tc(this.serializer,j).keys().forEach(Ne=>le=le.add(Ne)),D.set(j.userId,le)}),Ue.forEach(D,(j,J)=>{const le=new $n(J),Ne=Eh.de(this.serializer,le),ot=l.getIndexManager(le),_t=xh.de(le,this.serializer,ot,l.referenceDelegate);return new fy(a,_t,Ne,ot).recalculateAndSaveOverlaysForDocumentKeys(new Yc(t,ko.ct),j).next()})})}}function vy(r){r.createObjectStore("targetDocuments",{keyPath:su}).createIndex("documentTargetsIndex",rc,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wc,{unique:!0}),r.createObjectStore("targetGlobal")}const fg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pg{constructor(e,t,s,a,l,p,D,j,J,le,Ne=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=l,this.window=p,this.document=D,this.ri=J,this.oi=le,this.ui=Ne,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=ot=>Promise.resolve(),!pg.D())throw new bt(st.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cy(this,a),this.di=t+"main",this.serializer=new Xp(j),this.wi=new Tn(this.di,this.ui,new yy(this.serializer)),this.Bs=new a_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dy(this.serializer),this.qs=new i_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===le&&os("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new bt(st.FAILED_PRECONDITION,fg);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ko(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,ae.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ae.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(zi(e))return xt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Rh(e).get("owner").next(t=>Ue.resolve(this.Ri(t)))}Pi(e){return Bf(e).delete(this.clientId)}bi(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Ls(s,"clientMetadata");return a.j().next(l=>{const p=e.Si(l,18e5),D=l.filter(j=>-1===p.indexOf(j));return Ue.forEach(D,j=>a.delete(j.clientId)).next(()=>D)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Ue.resolve(!0):Rh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new bt(st.FAILED_PRECONDITION,fg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bf(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,D=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&xt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Yc(t,ko.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Bf(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return xh.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ig(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Eh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){xt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(p=this.ui)?Qc:14===p?ic:13===p?Zc:12===p?Gu:11===p?La:void an();var p;let D;return this.wi.runTransaction(e,a,l,j=>(D=new Yc(j,this.Os?this.Os.next():ko.ct),"readwrite-primary"===t?this.Ti(D).next(J=>!!J||this.Ei(D)).next(J=>{if(!J)throw os(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new bt(st.FAILED_PRECONDITION,Ee);return s(D)}).next(J=>this.vi(D).next(()=>J)):this.Oi(D).next(()=>s(D)))).then(j=>(D.raiseOnCommittedEvent(),j))}Oi(e){return Rh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new bt(st.FAILED_PRECONDITION,fg)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rh(e).put("owner",t)}static D(){return Tn.D()}Ai(e){const t=Rh(e);return t.get("owner").next(s=>this.Ri(s)?(xt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ue.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(os(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ce.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return xt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return os("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){os("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rh(r){return Ls(r,"owner")}function Bf(r){return Ls(r,"clientMetadata")}function Vf(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class gg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=dr(),a=dr();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new gg(e,t.fromCache,s,a)}}class mg{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(l=>l||this.Gi(e,t,a,s)).next(l=>l||this.Qi(e,t))}Ki(e,t){if(nd(t))return Ue.resolve(null);let s=Lo(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Tl(t,null,"F"),s=Lo(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const p=dr(...l);return this.Ui.getDocuments(e,p).next(D=>this.indexManager.getMinOffset(e,s).next(j=>{const J=this.ji(t,D);return this.zi(t,J,p,j.readTime)?this.Ki(e,Tl(t,null,"F")):this.Wi(e,J,t,j)}))})))}Gi(e,t,s,a){return nd(t)||a.isEqual(Yt.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(l=>{const p=this.ji(t,l);return this.zi(t,p,s,a)?this.Qi(e,t):(za()<=te.in.DEBUG&&xt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),lu(t)),this.Wi(e,p,t,v(a,-1)))})}ji(e,t){let s=new Si(gc(e));return t.forEach((a,l)=>{fc(e,l)&&(s=s.add(l))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Qi(e,t){return za()<=te.in.DEBUG&&xt("QueryEngine","Using full collection scan to execute query:",lu(t)),this.Ui.getDocumentsMatchingQuery(e,t,U.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(p=>{l=l.insert(p.key,p)}),l))}}class _y{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new pi(Jn),this.Yi=new ja(l=>au(l),lc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fy(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function jf(r,e,t,s){return new _y(r,e,t,s)}function d_(r,e){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,ae.Z)(function*(r,e){const t=Ht(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const p=[],D=[];let j=dr();for(const J of a){p.push(J.batchId);for(const le of J.mutations)j=j.add(le.key)}for(const J of l){D.push(J.batchId);for(const le of J.mutations)j=j.add(le.key)}return t.localDocuments.getDocuments(s,j).next(J=>({er:J,removedBatchIds:p,addedBatchIds:D}))})})}),Mh.apply(this,arguments)}function h_(r,e){const t=Ht(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Zi.newChangeBuffer({trackRemovals:!0});return function(p,D,j,J){const le=j.batch,Ne=le.keys();let ot=Ue.resolve();return Ne.forEach(_t=>{ot=ot.next(()=>J.getEntry(D,_t)).next(Bt=>{const Xt=j.docVersions.get(_t);wn(null!==Xt),Bt.version.compareTo(Xt)<0&&(le.applyToRemoteDocument(Bt,j),Bt.isValidDocument()&&(Bt.setReadTime(j.commitVersion),J.addEntry(Bt)))})}),ot.next(()=>p.mutationQueue.removeMutationBatch(D,le))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let D=dr();for(let j=0;j<p.mutationResults.length;++j)p.mutationResults[j].transformResults.length>0&&(D=D.add(p.batch.mutations[j].key));return D}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function f_(r){const e=Ht(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function yd(r,e){const t=Ht(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const D=[];e.targetChanges.forEach((le,Ne)=>{const ot=a.get(Ne);if(!ot)return;D.push(t.Bs.removeMatchingKeys(l,le.removedDocuments,Ne).next(()=>t.Bs.addMatchingKeys(l,le.addedDocuments,Ne)));let _t=ot.withSequenceNumber(l.currentSequenceNumber);var Bt,Xt,dn;null!==e.targetMismatches.get(Ne)?_t=_t.withResumeToken(Ds.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):le.resumeToken.approximateByteSize()>0&&(_t=_t.withResumeToken(le.resumeToken,s)),a=a.insert(Ne,_t),Xt=_t,dn=le,(0===(Bt=ot).resumeToken.approximateByteSize()||Xt.snapshotVersion.toMicroseconds()-Bt.snapshotVersion.toMicroseconds()>=3e8||dn.addedDocuments.size+dn.modifiedDocuments.size+dn.removedDocuments.size>0)&&D.push(t.Bs.updateTargetData(l,_t))});let j=ls(),J=dr();if(e.documentUpdates.forEach(le=>{e.resolvedLimboDocuments.has(le)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(l,le))}),D.push(yg(l,p,e.documentUpdates).next(le=>{j=le.nr,J=le.sr})),!s.isEqual(Yt.min())){const le=t.Bs.getLastRemoteSnapshotVersion(l).next(Ne=>t.Bs.setTargetsMetadata(l,l.currentSequenceNumber,s));D.push(le)}return Ue.waitFor(D).next(()=>p.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,j,J)).next(()=>j)}).then(l=>(t.Ji=a,l))}function yg(r,e,t){let s=dr(),a=dr();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let p=ls();return t.forEach((D,j)=>{const J=l.get(D);j.isFoundDocument()!==J.isFoundDocument()&&(a=a.add(D)),j.isNoDocument()&&j.version.isEqual(Yt.min())?(e.removeEntry(D,j.readTime),p=p.insert(D,j)):!J.isValidDocument()||j.version.compareTo(J.version)>0||0===j.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry(j),p=p.insert(D,j)):xt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",J.version," Watch version:",j.version)}),{nr:p,sr:a}})}function wy(r,e){const t=Ht(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function rl(r,e){const t=Ht(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(l=>l?(a=l,Ue.resolve(a)):t.Bs.allocateTargetId(s).next(p=>(a=new hu(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function ca(r,e,t){return $f.apply(this,arguments)}function $f(){return $f=(0,ae.Z)(function*(r,e,t){const s=Ht(r),a=s.Ji.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!zi(p))throw p;xt("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),$f.apply(this,arguments)}function Hf(r,e,t){const s=Ht(r);let a=Yt.min(),l=dr();return s.persistence.runTransaction("Execute query","readonly",p=>function(D,j,J){const le=Ht(D),Ne=le.Yi.get(J);return void 0!==Ne?Ue.resolve(le.Ji.get(Ne)):le.Bs.getTargetData(j,J)}(s,p,Lo(e)).next(D=>{if(D)return a=D.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(p,D.targetId).next(j=>{l=j})}).next(()=>s.Hi.getDocumentsMatchingQuery(p,e,t?a:Yt.min(),t?l:dr())).next(D=>(Gf(s,pc(e),D),{documents:D,ir:l})))}function zf(r,e){const t=Ht(r),s=Ht(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.le(l,e).next(p=>p?p.target:null))}function Uu(r,e){const t=Ht(r),s=t.Xi.get(e)||Yt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,v(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Gf(t,e,a),a))}function Gf(r,e,t){let s=r.Xi.get(e)||Yt.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.Xi.set(e,s)}function Ph(){return Ph=(0,ae.Z)(function*(r,e,t,s){const a=Ht(r);let l=dr(),p=ls();for(const J of t){const le=e.rr(J.metadata.name);J.document&&(l=l.add(le));const Ne=e.ur(J);Ne.setReadTime(e.cr(J.metadata.readTime)),p=p.insert(le,Ne)}const D=a.Zi.newChangeBuffer({trackRemovals:!0}),j=yield rl(a,(J=s,Lo(Yu(Ir.fromString(`__bundle__/docs/${J}`)))));var J;return a.persistence.runTransaction("Apply bundle documents","readwrite",J=>yg(J,D,p).next(le=>(D.apply(J),le)).next(le=>a.Bs.removeMatchingKeysForTargetId(J,j.targetId).next(()=>a.Bs.addMatchingKeys(J,l,j.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(J,le.nr,le.sr)).next(()=>le.nr)))}),Ph.apply(this,arguments)}function ow(r,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,ae.Z)(function*(r,e,t=dr()){const s=yield rl(r,Lo(Af(e.bundledQuery))),a=Ht(r);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=ao(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.qs.saveNamedQuery(l,e);const D=s.withResumeToken(Ds.EMPTY_BYTE_STRING,p);return a.Ji=a.Ji.insert(D.targetId,D),a.Bs.updateTargetData(l,D).next(()=>a.Bs.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.Bs.addMatchingKeys(l,t,s.targetId)).next(()=>a.qs.saveNamedQuery(l,e))})}),Wf.apply(this,arguments)}function p_(r,e){return`firestore_clients_${r}_${e}`}function Nh(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function vd(r,e){return`firestore_targets_${r}_${e}`}class _d{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new bt(a.error.code,a.error.message))),p?new _d(e,t,a.state,l):(os("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sc{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new bt(s.error.code,s.error.message))),l?new Sc(e,s.state,a):(os("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=mc();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=Du(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new wd(e,l):(os("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Iy{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Iy(t.clientId,t.onlineState):(os("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vg{constructor(){this.activeTargetIds=mc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _g{constructor(e,t,s,a,l){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new pi(Jn),this.started=!1,this.yr=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.pr=p_(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new vg),this.Tr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const l=e.getItem(p_(e.persistenceKey,a));if(l){const p=wd.ar(a,l);p&&(e.gr=e.gr.insert(p.clientId,p))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(vd(this.persistenceKey,e));if(s){const a=Sc.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vd(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xt("SharedClientState","READ",e,t),t}setItem(e,t){xt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(xt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void os("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(l){let p=ko.ct;if(null!=l)try{const D=JSON.parse(l);wn("number"==typeof D),p=D}catch(D){os("SharedClientState","Failed to read sequence number from WebStorage",D)}return p}(s.newValue);a!==ko.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(l=>t.syncEngine.Qr(l)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new _d(this.currentUser,e,t,s),l=Nh(this.persistenceKey,this.currentUser,e);this.setItem(l,a.hr())}Cr(e){const t=Nh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=vd(this.persistenceKey,e),l=new Sc(e,t,s);this.setItem(a,l.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return wd.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return _d.ar(new $n(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return Sc.ar(a,t)}br(e){return Iy.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);xt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),l=this.Sr(s),p=[],D=[];return l.forEach(j=>{a.has(j)||p.push(j)}),a.forEach(j=>{l.has(j)||D.push(j)}),this.syncEngine.Wr(p,D).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=mc();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class by{constructor(){this.Hr=new vg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new vg,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class g_{Yr(e){}shutdown(){}}class wg{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Eg=null;function Ig(){return null===Eg?Eg=268435456+Math.round(2147483648*Math.random()):Eg++,"0x"+Eg.toString(16)}const aw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ty{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Yo="WebChannelConnection";class m_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,l){const p=Ig(),D=this.To(e,t);xt("RestConnection",`Sending RPC '${e}' ${p}:`,D,s);const j={};return this.Eo(j,a,l),this.Ao(e,D,j,s).then(J=>(xt("RestConnection",`Received RPC '${e}' ${p}: `,J),J),J=>{throw Ar("RestConnection",`RPC '${e}' ${p} failed with error: `,J,"url: ",D,"request:",s),J})}vo(e,t,s,a,l,p){return this.Io(e,t,s,a,l)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+pa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}To(e,t){return`${this.mo}/v1/${t}:${aw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const l=Ig();return new Promise((p,D)=>{const j=new Is;j.setWithCredentials(!0),j.listenOnce(Xi.COMPLETE,()=>{try{switch(j.getLastErrorCode()){case Ps.NO_ERROR:const le=j.getResponseJson();xt(Yo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(le)),p(le);break;case Ps.TIMEOUT:xt(Yo,`RPC '${e}' ${l} timed out`),D(new bt(st.DEADLINE_EXCEEDED,"Request time out"));break;case Ps.HTTP_ERROR:const Ne=j.getStatus();if(xt(Yo,`RPC '${e}' ${l} failed with status:`,Ne,"response text:",j.getResponseText()),Ne>0){let ot=j.getResponseJson();Array.isArray(ot)&&(ot=ot[0]);const _t=ot?.error;if(_t&&_t.status&&_t.message){const Bt=function(Xt){const dn=Xt.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(dn)>=0?dn:st.UNKNOWN}(_t.status);D(new bt(Bt,_t.message))}else D(new bt(st.UNKNOWN,"Server responded with status "+j.getStatus()))}else D(new bt(st.UNAVAILABLE,"Connection failed."));break;default:an()}}finally{xt(Yo,`RPC '${e}' ${l} completed.`)}});const J=JSON.stringify(a);xt(Yo,`RPC '${e}' ${l} sending request:`,a),j.send(t,"POST",J,s,15)})}Ro(e,t,s){const a=Ig(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=lr(),D=ai(),j={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},J=this.longPollingOptions.timeoutSeconds;void 0!==J&&(j.longPollingTimeout=Math.round(1e3*J)),this.useFetchStreams&&(j.xmlHttpFactory=new Ra({})),this.Eo(j.initMessageHeaders,t,s),j.encodeInitMessageHeaders=!0;const le=l.join("");xt(Yo,`Creating RPC '${e}' stream ${a}: ${le}`,j);const Ne=p.createWebChannel(le,j);let ot=!1,_t=!1;const Bt=new Ty({ro:dn=>{_t?xt(Yo,`Not sending because RPC '${e}' stream ${a} is closed:`,dn):(ot||(xt(Yo,`Opening RPC '${e}' stream ${a} transport.`),Ne.open(),ot=!0),xt(Yo,`RPC '${e}' stream ${a} sending:`,dn),Ne.send(dn))},oo:()=>Ne.close()}),Xt=(dn,vr,ui)=>{dn.listen(vr,_r=>{try{ui(_r)}catch(Us){setTimeout(()=>{throw Us},0)}})};return Xt(Ne,Ea.EventType.OPEN,()=>{_t||xt(Yo,`RPC '${e}' stream ${a} transport opened.`)}),Xt(Ne,Ea.EventType.CLOSE,()=>{_t||(_t=!0,xt(Yo,`RPC '${e}' stream ${a} transport closed`),Bt.wo())}),Xt(Ne,Ea.EventType.ERROR,dn=>{_t||(_t=!0,Ar(Yo,`RPC '${e}' stream ${a} transport errored:`,dn),Bt.wo(new bt(st.UNAVAILABLE,"The operation could not be completed")))}),Xt(Ne,Ea.EventType.MESSAGE,dn=>{var vr;if(!_t){const ui=dn.data[0];wn(!!ui);const _r=ui,Us=_r.error||(null===(vr=_r[0])||void 0===vr?void 0:vr.error);if(Us){xt(Yo,`RPC '${e}' stream ${a} received error:`,Us);const ds=Us.status;let es=function(Ql){const v0=et[Ql];if(void 0!==v0)return pn(v0)}(ds),da=Us.message;void 0===es&&(es=st.INTERNAL,da="Unknown error status: "+ds+" with message "+Us.message),_t=!0,Bt.wo(new bt(es,da)),Ne.close()}else xt(Yo,`RPC '${e}' stream ${a} received:`,ui),Bt._o(ui)}}),Xt(D,Zs.STAT_EVENT,dn=>{dn.stat===$r.PROXY?xt(Yo,`RPC '${e}' stream ${a} detected buffering proxy`):dn.stat===$r.NOPROXY&&xt(Yo,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Bt.fo()},0),Bt}}function qf(){return typeof window<"u"?window:null}function bg(){return typeof document<"u"?document:null}function Kf(r){return new e_(r,!0)}class Dy{constructor(e,t,s=1e3,a=1.5,l=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&xt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class y_{constructor(e,t,s,a,l,p,D,j){this.ii=e,this.$o=s,this.Oo=a,this.connection=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=D,this.listener=j,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Dy(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ae.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ae.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,ae.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===st.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===st.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new bt(st.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,ae.Z)(function*(){e.state=0,e.start()}))}tu(e){return xt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uw extends y_{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.serializer=l}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function X0(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(j=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:an(),a=e.targetChange.targetIds||[],l=function(j,J){return j.useProto3Json?(wn(void 0===J||"string"==typeof J),Ds.fromBase64String(J||"")):(wn(void 0===J||J instanceof Uint8Array),Ds.fromUint8Array(J||new Uint8Array))}(r,e.targetChange.resumeToken),p=e.targetChange.cause,D=p&&function(j){const J=void 0===j.code?st.UNKNOWN:pn(j.code);return new bt(J,j.message||"")}(p);t=new fh(s,a,l,D||null)}else if("documentChange"in e){const s=e.documentChange,a=du(r,s.document.name),l=ao(s.document.updateTime),p=s.document.createTime?ao(s.document.createTime):Yt.min(),D=new ki({mapValue:{fields:s.document.fields}}),j=kr.newFoundDocument(a,l,p,D);t=new xl(s.targetIds||[],s.removedTargetIds||[],j.key,j)}else if("documentDelete"in e){const s=e.documentDelete,a=du(r,s.document),l=s.readTime?ao(s.readTime):Yt.min(),p=kr.newNoDocument(a,l);t=new xl([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=du(r,s.document);t=new xl([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return an();{const s=e.filter,{count:a=0,unchangedNames:l}=s,p=new Be(a,l);t=new dd(s.targetId,p)}}var j;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return Yt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Yt.min():l.readTime?ao(l.readTime):Yt.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=Ou(this.serializer),t.addTarget=function(a,l){let p;const D=l.target;if(p=td(D)?{documents:Df(a,D)}:{query:yh(a,D)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){p.resumeToken=$m(a,l.resumeToken);const j=Yp(a,l.expectedCount);null!==j&&(p.expectedCount=j)}else if(l.snapshotVersion.compareTo(Yt.min())>0){p.readTime=wc(a,l.snapshotVersion.toTimestamp());const j=Yp(a,l.expectedCount);null!==j&&(p.expectedCount=j)}return p}(this.serializer,e);const s=function Qm(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return an()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=Ou(this.serializer),t.removeTarget=e,this.Wo(t)}}class lw extends y_{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Lu(r,e){return r&&r.length>0?(wn(void 0!==e),r.map(t=>function(s,a){let l=ao(s.updateTime?s.updateTime:a);return l.isEqual(Yt.min())&&(l=ao(a)),new Qo(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=ao(e.commitTime);return this.listener.cu(s,t)}return wn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ou(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>hd(this.serializer,s))};this.Wo(t)}}class cw extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new bt(st.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Io(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new bt(st.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.vo(e,t,s,l,p,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new bt(st.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class hw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(os(t),this.mu=!1):xt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Ll{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(D=>{s.enqueueAndForget((0,ae.Z)(function*(){var j;Fl(p)&&(xt("RemoteStore","Restarting streams for network reachability change."),yield(j=(0,ae.Z)(function*(J){const le=Ht(J);le.vu.add(4),yield xc(le),le.bu.set("Unknown"),le.vu.delete(4),yield Ac(le)}),function(J){return j.apply(this,arguments)})(p))}))}),this.bu=new hw(s,a)}}function Ac(r){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,ae.Z)(function*(r){if(Fl(r))for(const e of r.Ru)yield e(!0)}),Tg.apply(this,arguments)}function xc(r){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,ae.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),Oh.apply(this,arguments)}function kh(r,e){const t=Ht(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Cg(t)?Zf(t):Vl(t).Ko()&&Dg(t,e))}function Rc(r,e){const t=Ht(r),s=Vl(t);t.Au.delete(e),s.Ko()&&il(t,e),0===t.Au.size&&(s.Ko()?s.jo():Fl(t)&&t.bu.set("Unknown"))}function Dg(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(r).su(e)}function il(r,e){r.Vu.qt(e),Vl(r).iu(e)}function Zf(r){r.Vu=new _c({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),Vl(r).start(),r.bu.gu()}function Cg(r){return Fl(r)&&!Vl(r).Uo()&&r.Au.size>0}function Fl(r){return 0===Ht(r).vu.size}function Sg(r){r.Vu=void 0}function v_(r){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,ae.Z)(function*(r){r.Au.forEach((e,t)=>{Dg(r,e)})}),Ag.apply(this,arguments)}function Qf(r,e){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,ae.Z)(function*(r,e){Sg(r),Cg(r)?(r.bu.Iu(e),Zf(r)):r.bu.set("Unknown")}),Ul.apply(this,arguments)}function xg(r,e,t){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,ae.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof fh&&2===e.state&&e.cause)try{yield(s=(0,ae.Z)(function*(a,l){const p=l.cause;for(const D of l.targetIds)a.Au.has(D)&&(yield a.remoteSyncer.rejectListen(D,p),a.Au.delete(D),a.Vu.removeTarget(D))}),function(a,l){return s.apply(this,arguments)})(r,e)}catch(s){xt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Ed(r,s)}else if(e instanceof xl?r.Vu.Ht(e):e instanceof dd?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(Yt.min()))try{const s=yield f_(r.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.Vu.ce(l);return p.targetChanges.forEach((D,j)=>{if(D.resumeToken.approximateByteSize()>0){const J=a.Au.get(j);J&&a.Au.set(j,J.withResumeToken(D.resumeToken,l))}}),p.targetMismatches.forEach((D,j)=>{const J=a.Au.get(D);if(!J)return;a.Au.set(D,J.withResumeToken(Ds.EMPTY_BYTE_STRING,J.snapshotVersion)),il(a,D);const le=new hu(J.target,D,j,J.sequenceNumber);Dg(a,le)}),a.remoteSyncer.applyRemoteEvent(p)}(r,t))}catch(s){xt("RemoteStore","Failed to raise snapshot:",s),yield Ed(r,s)}var s}),Bl.apply(this,arguments)}function Ed(r,e,t){return Id.apply(this,arguments)}function Id(){return Id=(0,ae.Z)(function*(r,e,t){if(!zi(e))throw e;r.vu.add(1),yield xc(r),r.bu.set("Offline"),t||(t=()=>f_(r.localStore)),r.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){xt("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield Ac(r)}))}),Id.apply(this,arguments)}function Rg(r,e){return e().catch(t=>Ed(r,t,e))}function Mc(r){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,ae.Z)(function*(r){const e=Ht(r),t=sl(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Mg(e);)try{const a=yield wy(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Sy(e,a)}catch(a){yield Ed(e,a)}Yf(e)&&Ay(e)}),Lh.apply(this,arguments)}function Mg(r){return Fl(r)&&r.Eu.length<10}function Sy(r,e){r.Eu.push(e);const t=sl(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function Yf(r){return Fl(r)&&!sl(r).Uo()&&r.Eu.length>0}function Ay(r){sl(r).start()}function fw(r){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,ae.Z)(function*(r){sl(r).hu()}),Pg.apply(this,arguments)}function xy(r){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,ae.Z)(function*(r){const e=sl(r);for(const t of r.Eu)e.uu(t.mutations)}),Ng.apply(this,arguments)}function Ry(r,e,t){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,ae.Z)(function*(r,e,t){const s=r.Eu.shift(),a=w.from(s,e,t);yield Rg(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield Mc(r)}),Jf.apply(this,arguments)}function __(r,e){return va.apply(this,arguments)}function va(){return va=(0,ae.Z)(function*(r,e){var t;e&&sl(r).ou&&(yield(t=(0,ae.Z)(function*(s,a){if(Gt(l=a.code)&&l!==st.ABORTED){const p=s.Eu.shift();sl(s).Qo(),yield Rg(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield Mc(s)}var l}),function(s,a){return t.apply(this,arguments)})(r,e)),Yf(r)&&Ay(r)}),va.apply(this,arguments)}function Og(r,e){return kg.apply(this,arguments)}function kg(){return kg=(0,ae.Z)(function*(r,e){const t=Ht(r);t.asyncQueue.verifyOperationInProgress(),xt("RemoteStore","RemoteStore received new credentials");const s=Fl(t);t.vu.add(3),yield xc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Ac(t)}),kg.apply(this,arguments)}function My(r,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,ae.Z)(function*(r,e){const t=Ht(r);e?(t.vu.delete(2),yield Ac(t)):e||(t.vu.add(2),yield xc(t),t.bu.set("Unknown"))}),Lg.apply(this,arguments)}function Vl(r){return r.Su||(r.Su=function(e,t,s){const a=Ht(e);return a.fu(),new uw(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:v_.bind(null,r),ao:Qf.bind(null,r),nu:xg.bind(null,r)}),r.Ru.push(function(){var e=(0,ae.Z)(function*(t){t?(r.Su.Qo(),Cg(r)?Zf(r):r.bu.set("Unknown")):(yield r.Su.stop(),Sg(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function sl(r){return r.Du||(r.Du=function(e,t,s){const a=Ht(e);return a.fu(),new lw(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:fw.bind(null,r),ao:__.bind(null,r),au:xy.bind(null,r),cu:Ry.bind(null,r)}),r.Ru.push(function(){var e=(0,ae.Z)(function*(t){t?(r.Du.Qo(),yield Mc(r)):(yield r.Du.stop(),r.Eu.length>0&&(xt("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class Fg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,D=new Fg(e,t,p,a,l);return D.start(s),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bt(st.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bd(r,e){if(os("AsyncQueue",`${e}: ${r}`),zi(r))return new bt(st.UNAVAILABLE,`${e}: ${r}`);throw r}class Td{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ft.comparator(t.key,s.key):(t,s)=>Ft.comparator(t.key,s.key),this.keyedMap=Au(),this.sortedSet=new pi(this.comparator)}static emptySet(e){return new Td(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Td)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Td;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Ug{constructor(){this.Cu=new pi(Ft.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):an():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Dd{constructor(e,t,s,a,l,p,D,j,J){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=D,this.excludesMetadataChanges=j,this.hasCachedResults=J}static fromInitialDocuments(e,t,s,a,l){const p=[];return t.forEach(D=>{p.push({type:0,doc:D})}),new Dd(e,t,Td.emptySet(t),p,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Py{constructor(){this.Nu=void 0,this.listeners=[]}}class w_{constructor(){this.queries=new ja(e=>oh(e),uu),this.onlineState="Unknown",this.ku=new Set}}function Bg(r,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,ae.Z)(function*(r,e){const t=Ht(r),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new Py),a)try{l.Nu=yield t.onListen(s)}catch(p){const D=bd(p,`Initialization of query '${lu(e.query)}' failed`);return void e.onError(D)}t.queries.set(s,l),l.listeners.push(e),e.Mu(t.onlineState),l.Nu&&e.$u(l.Nu)&&$g(t)}),Xf.apply(this,arguments)}function ep(r,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,ae.Z)(function*(r,e){const t=Ht(r),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Vg.apply(this,arguments)}function Bu(r,e){const t=Ht(r);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const D of p.listeners)D.$u(a)&&(s=!0);p.Nu=a}}s&&$g(t)}function jg(r,e,t){const s=Ht(r),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function $g(r){r.ku.forEach(e=>{e.next()})}class Hg{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Dd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class pw{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class zg{constructor(e){this.serializer=e}rr(e){return du(this.serializer,e)}ur(e){return e.metadata.exists?qm(this.serializer,e.document,!1):kr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return ao(e)}}class E_{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ny(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=Ir.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new zg(this.serializer);for(const a of e)if(a.metadata.queries){const l=s.rr(a.metadata.name);for(const p of a.metadata.queries){const D=(t.get(p)||dr()).add(l);t.set(p,D)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function Ey(r,e,t,s){return Ph.apply(this,arguments)}(e.localStore,new zg(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield ow(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Ny(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Oy{constructor(e){this.key=e}}class tp{constructor(e){this.key=e}}class ky{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=dr(),this.mutatedKeys=dr(),this.tc=gc(e),this.ec=new Td(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Ug,a=t?t.ec:this.ec;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,D=!1;const j="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,J="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((le,Ne)=>{const ot=a.get(le),_t=fc(this.query,Ne)?Ne:null,Bt=!!ot&&this.mutatedKeys.has(ot.key),Xt=!!_t&&(_t.hasLocalMutations||this.mutatedKeys.has(_t.key)&&_t.hasCommittedMutations);let dn=!1;ot&&_t?ot.data.isEqual(_t.data)?Bt!==Xt&&(s.track({type:3,doc:_t}),dn=!0):this.rc(ot,_t)||(s.track({type:2,doc:_t}),dn=!0,(j&&this.tc(_t,j)>0||J&&this.tc(_t,J)<0)&&(D=!0)):!ot&&_t?(s.track({type:0,doc:_t}),dn=!0):ot&&!_t&&(s.track({type:1,doc:ot}),dn=!0,(j||J)&&(D=!0)),dn&&(_t?(p=p.add(_t),l=Xt?l.add(le):l.delete(le)):(p=p.delete(le),l=l.delete(le)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const le="F"===this.query.limitType?p.last():p.first();p=p.delete(le.key),l=l.delete(le.key),s.track({type:1,doc:le})}return{ec:p,ic:s,zi:D,mutatedKeys:l}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((J,le)=>function(Ne,ot){const _t=Bt=>{switch(Bt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an()}};return _t(Ne)-_t(ot)}(J.type,le.type)||this.tc(J.doc,le.doc)),this.oc(s);const p=t?this.uc():[],D=0===this.Zu.size&&this.current?1:0,j=D!==this.Xu;return this.Xu=D,0!==l.length||j?{snapshot:new Dd(this.query,e.ec,a,l,e.mutatedKeys,0===D,j,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:p}:{cc:p}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ug,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=dr(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new tp(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Oy(s))}),t}hc(e){this.Yu=e.ir,this.Zu=dr();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Dd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class I_{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class np{constructor(e){this.key=e,this.fc=!1}}class Gg{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.dc={},this.wc=new ja(D=>oh(D),uu),this._c=new Map,this.mc=new Set,this.gc=new pi(Ft.comparator),this.yc=new Map,this.Ic=new py,this.Tc={},this.Ec=new Map,this.Ac=Ol.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function rp(r,e){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,ae.Z)(function*(r,e){const t=ol(r);let s,a;const l=t.wc.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.lc();else{const p=yield rl(t.localStore,Lo(e)),D=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Fh(t,e,s,"current"===D,p.resumeToken),t.isPrimaryClient&&kh(t.remoteStore,p)}return a}),Ly.apply(this,arguments)}function Fh(r,e,t,s,a){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,ae.Z)(function*(r,e,t,s,a){r.Rc=(Ne,ot,_t)=>{return(Bt=(0,ae.Z)(function*(Xt,dn,vr,ui){let _r=dn.view.sc(vr);_r.zi&&(_r=yield Hf(Xt.localStore,dn.query,!1).then(({documents:es})=>dn.view.sc(es,_r)));const Us=ui&&ui.targetChanges.get(dn.targetId),ds=dn.view.applyChanges(_r,Xt.isPrimaryClient,Us);return Kg(Xt,dn.targetId,ds.cc),ds.snapshot}),function(Xt,dn,vr,ui){return Bt.apply(this,arguments)})(r,Ne,ot,_t);var Bt};const l=yield Hf(r.localStore,e,!0),p=new ky(e,l.ir),D=p.sc(l.documents),j=Al.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),J=p.applyChanges(D,r.isPrimaryClient,j);Kg(r,t,J.cc);const le=new I_(e,t,p);return r.wc.set(e,le),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),J.snapshot}),Fy.apply(this,arguments)}function Uy(r,e){return ip.apply(this,arguments)}function ip(){return ip=(0,ae.Z)(function*(r,e){const t=Ht(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(l=>!uu(l,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ca(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Rc(t.remoteStore,s.targetId),Cd(t,s.targetId)}).catch(it))):(Cd(t,s.targetId),yield ca(t.localStore,s.targetId,!0))}),ip.apply(this,arguments)}function sp(){return sp=(0,ae.Z)(function*(r,e,t){const s=xd(r);try{const a=yield function(l,p){const D=Ht(l),j=fi.now(),J=p.reduce((ot,_t)=>ot.add(_t.key),dr());let le,Ne;return D.persistence.runTransaction("Locally write mutations","readwrite",ot=>{let _t=ls(),Bt=dr();return D.Zi.getEntries(ot,J).next(Xt=>{_t=Xt,_t.forEach((dn,vr)=>{vr.isValidDocument()||(Bt=Bt.add(dn))})}).next(()=>D.localDocuments.getOverlayedDocuments(ot,_t)).next(Xt=>{le=Xt;const dn=[];for(const vr of p){const ui=ud(vr,le.get(vr.key).overlayedDocument);null!=ui&&dn.push(new Nu(vr.key,ui,oa(ui.value.mapValue),Ui.exists(!0)))}return D.mutationQueue.addMutationBatch(ot,j,dn,p)}).next(Xt=>{Ne=Xt;const dn=Xt.applyToLocalDocumentSet(le,Bt);return D.documentOverlayCache.saveOverlays(ot,Xt.batchId,dn)})}).then(()=>({batchId:Ne.batchId,changes:mf(le)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,D){let j=l.Tc[l.currentUser.toKey()];j||(j=new pi(Jn)),j=j.insert(p,D),l.Tc[l.currentUser.toKey()]=j}(s,a.batchId,t),yield Vu(s,a.changes),yield Mc(s.remoteStore)}catch(a){const l=bd(a,"Failed to persist write");t.reject(l)}}),sp.apply(this,arguments)}function op(r,e){return gu.apply(this,arguments)}function gu(){return gu=(0,ae.Z)(function*(r,e){const t=Ht(r);try{const s=yield yd(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.yc.get(l);p&&(wn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.fc=!0:a.modifiedDocuments.size>0?wn(p.fc):a.removedDocuments.size>0&&(wn(p.fc),p.fc=!1))}),yield Vu(t,s,e)}catch(s){yield it(s)}}),gu.apply(this,arguments)}function Uh(r,e,t){const s=Ht(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((l,p)=>{const D=p.view.Mu(e);D.snapshot&&a.push(D.snapshot)}),function(l,p){const D=Ht(l);D.onlineState=p;let j=!1;D.queries.forEach((J,le)=>{for(const Ne of le.listeners)Ne.Mu(p)&&(j=!0)}),j&&$g(D)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function ap(r,e,t){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,ae.Z)(function*(r,e,t){const s=Ht(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),l=a&&a.key;if(l){let p=new pi(Ft.comparator);p=p.insert(l,kr.newNoDocument(l,Yt.min()));const D=dr().add(l),j=new tl(Yt.min(),new Map,new pi(Jn),p,D);yield op(s,j),s.gc=s.gc.remove(l),s.yc.delete(e),Zg(s)}else yield ca(s.localStore,e,!1).then(()=>Cd(s,e,t)).catch(it)}),Pc.apply(this,arguments)}function b_(r,e){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,ae.Z)(function*(r,e){const t=Ht(r),s=e.batch.batchId;try{const a=yield h_(t.localStore,e);jy(t,s,null),qg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Vu(t,a)}catch(a){yield it(a)}}),Bh.apply(this,arguments)}function Vy(r,e,t){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,ae.Z)(function*(r,e,t){const s=Ht(r);try{const a=yield function(l,p){const D=Ht(l);return D.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let J;return D.mutationQueue.lookupMutationBatch(j,p).next(le=>(wn(null!==le),J=le.keys(),D.mutationQueue.removeMutationBatch(j,le))).next(()=>D.mutationQueue.performConsistencyCheck(j)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(j,J,p)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,J)).next(()=>D.localDocuments.getDocuments(j,J))})}(s.localStore,e);jy(s,e,t),qg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Vu(s,a)}catch(a){yield it(a)}}),Wg.apply(this,arguments)}function Nc(){return Nc=(0,ae.Z)(function*(r,e){const t=Ht(r);Fl(t.remoteStore)||xt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=Ht(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>p.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=bd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Nc.apply(this,arguments)}function qg(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function jy(r,e,t){const s=Ht(r);let a=s.Tc[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Cd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||D_(r,s)})}function D_(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(Rc(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),Zg(r))}function Kg(r,e,t){for(const s of t)s instanceof Oy?(r.Ic.addReference(s.key,e),C_(r,s)):s instanceof tp?(xt("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||D_(r,s.key)):an()}function C_(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||(xt("SyncEngine","New document in limbo: "+t),r.mc.add(s),Zg(r))}function Zg(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new Ft(Ir.fromString(e)),s=r.Ac.next();r.yc.set(s,new np(t)),r.gc=r.gc.insert(t,s),kh(r.remoteStore,new hu(Lo(Yu(t.path)),s,"TargetPurposeLimboResolution",ko.ct))}}function Vu(r,e,t){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,ae.Z)(function*(r,e,t){const s=Ht(r),a=[],l=[],p=[];var D;s.wc.isEmpty()||(s.wc.forEach((D,j)=>{p.push(s.Rc(j,e,t).then(J=>{if((J||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(j.targetId,J?.fromCache?"not-current":"current"),J){a.push(J);const le=gg.Li(j.targetId,J);l.push(le)}}))}),yield Promise.all(p),s.dc.nu(a),yield(D=(0,ae.Z)(function*(j,J){const le=Ht(j);try{yield le.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ne=>Ue.forEach(J,ot=>Ue.forEach(ot.Fi,_t=>le.persistence.referenceDelegate.addReference(Ne,ot.targetId,_t)).next(()=>Ue.forEach(ot.Bi,_t=>le.persistence.referenceDelegate.removeReference(Ne,ot.targetId,_t)))))}catch(Ne){if(!zi(Ne))throw Ne;xt("LocalStore","Failed to update sequence numbers: "+Ne)}for(const Ne of J){const ot=Ne.targetId;if(!Ne.fromCache){const _t=le.Ji.get(ot),Xt=_t.withLastLimboFreeSnapshotVersion(_t.snapshotVersion);le.Ji=le.Ji.insert(ot,Xt)}}}),function(j,J){return D.apply(this,arguments)})(s.localStore,l))}),Vh.apply(this,arguments)}function S_(r,e){return jh.apply(this,arguments)}function jh(){return jh=(0,ae.Z)(function*(r,e){const t=Ht(r);if(!t.currentUser.isEqual(e)){xt("SyncEngine","User change. New user:",e.toKey());const s=yield d_(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(p=>{p.forEach(D=>{D.reject(new bt(st.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Vu(t,s.er)}var a}),jh.apply(this,arguments)}function A_(r,e){const t=Ht(r),s=t.yc.get(e);if(s&&s.fc)return dr().add(s.key);{let a=dr();const l=t._c.get(e);if(!l)return a;for(const p of l){const D=t.wc.get(p);a=a.unionWith(D.view.nc)}return a}}function x_(r,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,ae.Z)(function*(r,e){const t=Ht(r),s=yield Hf(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&Kg(t,e.targetId,a.cc),a}),Qg.apply(this,arguments)}function R_(r,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,ae.Z)(function*(r,e){const t=Ht(r);return Uu(t.localStore,e).then(s=>Vu(t,s))}),Yg.apply(this,arguments)}function M_(r,e,t,s){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,ae.Z)(function*(r,e,t,s){const a=Ht(r),l=yield function(p,D){const j=Ht(p),J=Ht(j.mutationQueue);return j.persistence.runTransaction("Lookup mutation documents","readonly",le=>J.Sn(le,D).next(Ne=>Ne?j.localDocuments.getDocuments(le,Ne):Ue.resolve(null)))}(a.localStore,e);var D;null!==l?("pending"===t?yield Mc(a.remoteStore):"acknowledged"===t||"rejected"===t?(jy(a,e,s||null),qg(a,e),D=e,Ht(Ht(a.localStore).mutationQueue).Cn(D)):an(),yield Vu(a,l)):xt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Sd.apply(this,arguments)}function $y(){return $y=(0,ae.Z)(function*(r,e){const t=Ht(r);if(ol(t),xd(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Ad(t,s.toArray());t.vc=!0,yield My(t.remoteStore,!0);for(const l of a)kh(t.remoteStore,l)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(Cd(t,p),ca(t.localStore,p,!0))),Rc(t.remoteStore,p)}),yield a,yield Ad(t,s),function(l){const p=Ht(l);p.yc.forEach((D,j)=>{Rc(p.remoteStore,j)}),p.Ic.Ts(),p.yc=new Map,p.gc=new pi(Ft.comparator)}(t),t.vc=!1,yield My(t.remoteStore,!1)}}),$y.apply(this,arguments)}function Ad(r,e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,ae.Z)(function*(r,e,t){const s=Ht(r),a=[],l=[];for(const p of e){let D;const j=s._c.get(p);if(j&&0!==j.length){D=yield rl(s.localStore,Lo(j[0]));for(const J of j){const le=s.wc.get(J),Ne=yield x_(s,le);Ne.snapshot&&l.push(Ne.snapshot)}}else{const J=yield zf(s.localStore,p);D=yield rl(s.localStore,J),yield Fh(s,Hy(J),p,!1,D.resumeToken)}a.push(D)}return s.dc.nu(l),a}),Jg.apply(this,arguments)}function Hy(r){return ih(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Xg(r){const e=Ht(r);return Ht(Ht(e.localStore).persistence).$i()}function P_(r,e,t,s){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,ae.Z)(function*(r,e,t,s){const a=Ht(r);if(a.vc)return void xt("SyncEngine","Ignoring unexpected query state notification.");const l=a._c.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const p=yield Uu(a.localStore,pc(l[0])),D=tl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ds.EMPTY_BYTE_STRING);yield Vu(a,p,D);break}case"rejected":yield ca(a.localStore,e,!0),Cd(a,e,s);break;default:an()}}),Ja.apply(this,arguments)}function $h(r,e,t){return Bo.apply(this,arguments)}function Bo(){return Bo=(0,ae.Z)(function*(r,e,t){const s=ol(r);if(s.vc){for(const a of e){if(s._c.has(a)){xt("SyncEngine","Adding an already active target "+a);continue}const l=yield zf(s.localStore,a),p=yield rl(s.localStore,l);yield Fh(s,Hy(l),p.targetId,!1,p.resumeToken),kh(s.remoteStore,p)}for(const a of t)s._c.has(a)&&(yield ca(s.localStore,a,!1).then(()=>{Rc(s.remoteStore,a),Cd(s,a)}).catch(it))}}),Bo.apply(this,arguments)}function ol(r){const e=Ht(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=op.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ap.bind(null,e),e.dc.nu=Bu.bind(null,e.eventManager),e.dc.Pc=jg.bind(null,e.eventManager),e}function xd(r){const e=Ht(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vy.bind(null,e),e}class kc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.serializer=Kf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return jf(this.persistence,new mg,e.initialUser,this.serializer)}createPersistence(e){return new hg(Cc.zs,this.serializer)}createSharedClientState(e){return new by}terminate(){var e=this;return(0,ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jl extends kc{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,ae.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield xd(s.Vc.syncEngine),yield Mc(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return jf(this.persistence,new mg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new ug(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new so(t,this.persistence);return new bs(e.asyncQueue,s)}createPersistence(e){const t=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?la.withCacheSize(this.cacheSizeBytes):la.DEFAULT;return new pg(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,qf(),bg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new by}}class Lc extends jl{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,ae.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof _g&&(s.sharedClientState.syncEngine={jr:M_.bind(null,a),zr:P_.bind(null,a),Wr:$h.bind(null,a),$i:Xg.bind(null,a),Qr:R_.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var l=(0,ae.Z)(function*(p){yield function Oc(r,e){return $y.apply(this,arguments)}(s.Vc.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=qf();if(!_g.D(t))throw new bt(st.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _g(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class mu{initialize(e,t){var s=this;return(0,ae.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>Uh(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=S_.bind(null,s.syncEngine),yield My(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new w_}createDatastore(e){const t=Kf(e.databaseInfo.databaseId),s=new m_(e.databaseInfo);return new cw(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=D=>Uh(this.syncEngine,D,0),p=wg.D()?new wg:new g_,new Ll(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,D,j,J){const le=new Gg(s,a,l,p,D,j);return J&&(le.vc=!0),le}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ae.Z)(function*(t){const s=Ht(t);xt("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield xc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Fc(r,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class al{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Md{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Rr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const l=yield e.$c(a);return new pw(JSON.parse(l),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ae.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Pd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new bt(st.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,ae.Z)(function*(l,p){const D=Ht(l),j=Ou(D.serializer)+"/documents",J={documents:p.map(_t=>mh(D.serializer,_t))},le=yield D.vo("BatchGetDocuments",j,J,p.length),Ne=new Map;le.forEach(_t=>{const Bt=function J0(r,e){return"found"in e?function(t,s){wn(!!s.found);const a=du(t,s.found.name),l=ao(s.found.updateTime),p=s.found.createTime?ao(s.found.createTime):Yt.min(),D=new ki({mapValue:{fields:s.found.fields}});return kr.newFoundDocument(a,l,p,D)}(r,e):"missing"in e?function(t,s){wn(!!s.missing),wn(!!s.readTime);const a=du(t,s.missing),l=ao(s.readTime);return kr.newNoDocument(a,l)}(r,e):an()}(D.serializer,_t);Ne.set(Bt.key.toString(),Bt)});const ot=[];return p.forEach(_t=>{const Bt=Ne.get(_t.toString());wn(!!Bt),ot.push(Bt)}),ot}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new g(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=Ft.fromPath(a);e.mutations.push(new d(l,e.precondition(l)))}),yield(s=(0,ae.Z)(function*(a,l){const p=Ht(a),D=Ou(p.serializer)+"/documents",j={writes:l.map(J=>hd(p.serializer,J))};yield p.Io("Commit",D,j)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw an();t=Yt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new bt(st.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Yt.min())?Ui.exists(!1):Ui.updateTime(t):Ui.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yt.min()))throw new bt(st.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ui.updateTime(t)}return Ui.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Nd{constructor(e,t,s,a,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=l,this.Bc=s.maxAttempts,this.qo=new Dy(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ae.Z)(function*(){const t=new Pd(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Uc(l)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Tu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Gt(t)}return!1}}class zy{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=$n.UNAUTHENTICATED,this.clientId=hl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,ae.Z)(function*(D){xt("FirestoreClient","Received user=",D.uid),yield l.authCredentialListener(D),l.user=D});return function(D){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(xt("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(st.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=bd(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Hh(r,e){return up.apply(this,arguments)}function up(){return up=(0,ae.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),xt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,ae.Z)(function*(l){s.isEqual(l)||(yield d_(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),up.apply(this,arguments)}function lp(r,e){return cp.apply(this,arguments)}function cp(){return cp=(0,ae.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield dp(r);xt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>Og(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,l)=>Og(e.remoteStore,l)),r._onlineComponents=e}),cp.apply(this,arguments)}function em(r){return"FirebaseError"===r.name?r.code===st.FAILED_PRECONDITION||r.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function dp(r){return hp.apply(this,arguments)}function hp(){return hp=(0,ae.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Hh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!em(t))throw t;Ar("Error using user provided cache. Falling back to memory cache: "+t),yield Hh(r,new kc)}}else xt("FirestoreClient","Using default OfflineComponentProvider"),yield Hh(r,new kc);return r._offlineComponents}),hp.apply(this,arguments)}function zh(r){return tm.apply(this,arguments)}function tm(){return tm=(0,ae.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xt("FirestoreClient","Using user provided OnlineComponentProvider"),yield lp(r,r._uninitializedComponentsProvider._online)):(xt("FirestoreClient","Using default OnlineComponentProvider"),yield lp(r,new mu))),r._onlineComponents}),tm.apply(this,arguments)}function Gy(r){return dp(r).then(e=>e.persistence)}function Gh(r){return dp(r).then(e=>e.localStore)}function Wy(r){return zh(r).then(e=>e.remoteStore)}function fp(r){return zh(r).then(e=>e.syncEngine)}function $l(r){return nm.apply(this,arguments)}function nm(){return nm=(0,ae.Z)(function*(r){const e=yield zh(r),t=e.eventManager;return t.onListen=rp.bind(null,e.syncEngine),t.onUnlisten=Uy.bind(null,e.syncEngine),t}),nm.apply(this,arguments)}function qy(r,e,t={}){const s=new Rr;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(a,l,p,D,j){const J=new al({next:Ne=>{l.enqueueAndForget(()=>ep(a,le));const ot=Ne.docs.has(p);!ot&&Ne.fromCache?j.reject(new bt(st.UNAVAILABLE,"Failed to get document because the client is offline.")):ot&&Ne.fromCache&&D&&"server"===D.source?j.reject(new bt(st.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(Ne)},error:Ne=>j.reject(Ne)}),le=new Hg(Yu(p.path),J,{includeMetadataChanges:!0,Ku:!0});return Bg(a,le)}(yield $l(r),r.asyncQueue,e,t,s)})),s.promise}function Wh(r,e,t={}){const s=new Rr;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(a,l,p,D,j){const J=new al({next:Ne=>{l.enqueueAndForget(()=>ep(a,le)),Ne.fromCache&&"server"===D.source?j.reject(new bt(st.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(Ne)},error:Ne=>j.reject(Ne)}),le=new Hg(p,J,{includeMetadataChanges:!0,Ku:!0});return Bg(a,le)}(yield $l(r),r.asyncQueue,e,t,s)})),s.promise}function sm(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const vp=new Map;function _p(r,e,t){if(!t)throw new bt(st.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Yy(r,e,t,s){if(!0===e&&!0===s)throw new bt(st.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function om(r){if(!Ft.isDocumentKey(r))throw new bt(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function am(r){if(Ft.isDocumentKey(r))throw new bt(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function qh(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":an()}function ti(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new bt(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qh(r);throw new bt(st.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Jy(r,e){if(e<=0)throw new bt(st.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class um{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new bt(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bt(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=sm(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new bt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new bt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new bt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new um({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bt(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new um(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ra;switch(t.type){case"firstParty":return new Eu(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new bt(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vp.get(e);t&&(xt("ComponentProvider","Removing Datastore"),vp.delete(e),t.terminate())}(this),Promise.resolve()}}class Yi{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yi(this.firestore,e,this._key)}}class Vo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Vo(this.firestore,e,this._query)}}class yu extends Vo{constructor(e,t,s){super(e,t,Yu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yi(this.firestore,null,new Ft(e))}withConverter(e){return new yu(this.firestore,e,this._path)}}function lm(r,e,...t){if(r=(0,ce.m9)(r),_p("collection","path",e),r instanceof Od){const s=Ir.fromString(e,...t);return am(s),new yu(r,null,s)}{if(!(r instanceof Yi||r instanceof yu))throw new bt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ir.fromString(e,...t));return am(s),new yu(r.firestore,null,s)}}function Kh(r,e,...t){if(r=(0,ce.m9)(r),1===arguments.length&&(e=hl.A()),_p("doc","path",e),r instanceof Od){const s=Ir.fromString(e,...t);return om(s),new Yi(r,null,new Ft(s))}{if(!(r instanceof Yi||r instanceof yu))throw new bt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ir.fromString(e,...t));return om(s),new Yi(r.firestore,r instanceof yu?r.converter:null,new Ft(s))}}function cm(r,e){return r=(0,ce.m9)(r),e=(0,ce.m9)(e),(r instanceof Yi||r instanceof yu)&&(e instanceof Yi||e instanceof yu)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Ep(r,e){return r=(0,ce.m9)(r),e=(0,ce.m9)(e),r instanceof Vo&&e instanceof Vo&&r.firestore===e.firestore&&uu(r._query,e._query)&&r.converter===e.converter}class ev{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Dy(this,"async_queue_retry"),this.Xc=()=>{const t=bg();t&&xt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=bg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=bg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Rr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ae.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!zi(t))throw t;xt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,os("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=Fg.createAndSchedule(this,e,t,s,l=>this.na(l));return this.zc.push(a),a}Zc(){this.Wc&&an()}verifyOperationInProgress(){}sa(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function tv(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class N_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class cs extends Od{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new ev,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||nv(this),this._firestoreClient.terminate()}}function Qs(r){return r._firestoreClient||nv(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function nv(r){var e,t,s;const a=r._freezeSettings(),l=(D=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Ua(r._databaseId,D,r._persistenceKey,(J=a).host,J.ssl,J.experimentalForceLongPolling,J.experimentalAutoDetectLongPolling,sm(J.experimentalLongPollingOptions),J.useFetchStreams));var D,J;r._firestoreClient=new zy(r._authCredentials,r._appCheckCredentials,r._queue,l),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function iv(r,e,t){const s=new Rr;return r.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield Hh(r,t),yield lp(r,e),s.resolve()}catch(a){const l=a;if(!em(l))throw l;Ar("Error enabling indexeddb cache. Falling back to memory cache: "+l),s.reject(l)}})).then(()=>s.promise)}function dm(r){if(r._initialized||r._terminated)throw new bt(st.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class eu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eu(Ds.fromBase64String(e))}catch(t){throw new bt(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new eu(Ds.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $o{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new bt(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uc{constructor(e){this._methodName=e}}class $a{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bt(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bt(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jn(this._lat,e._lat)||Jn(this._long,e._long)}}const vu=/^__.*__$/;class _u{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Nu(e,this.data,this.fieldMask,t,this.fieldTransforms):new el(e,this.data,t,this.fieldTransforms)}}class fm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Nu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pm(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an()}}class bp{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===l&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Qh(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(pm(this.ca)&&vu.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class U_{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Kf(e)}ya(e,t,s,a=!1){return new bp({ca:e,methodName:t,ga:s,path:Qi.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bc(r){const e=r._freezeSettings(),t=Kf(r._databaseId);return new U_(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Tp(r,e,t,s,a,l={}){const p=r.ya(l.merge||l.mergeFields?2:0,e,t,a);Ud("Data must be an object, but it was:",p,s);const D=mm(s,p);let j,J;if(l.merge)j=new po(p.fieldMask),J=p.fieldTransforms;else if(l.mergeFields){const le=[];for(const Ne of l.mergeFields){const ot=jc(e,Ne,t);if(!p.contains(ot))throw new bt(st.INVALID_ARGUMENT,`Field '${ot}' is specified in your field mask but missing from your input data.`);ym(le,ot)||le.push(ot)}j=new po(le),J=p.fieldTransforms.filter(Ne=>j.covers(Ne.field))}else j=null,J=p.fieldTransforms;return new _u(new ki(D),j,J)}class Vc extends Uc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vc}}function Ld(r,e,t){return new bp({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gm extends Uc{_toFieldTransform(e){return new yc(e.path,new Ru)}isEqual(e){return e instanceof gm}}class uv extends Uc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Ld(this,e,!0),s=this.pa.map(l=>Hl(l,t)),a=new Da(s);return new yc(e.path,a)}isEqual(e){return this===e}}class B_ extends Uc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Ld(this,e,!0),s=this.pa.map(l=>Hl(l,t)),a=new Xu(s);return new yc(e.path,a)}isEqual(e){return this===e}}class lv extends Uc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Pu(e.serializer,aa(e.serializer,this.Ia));return new yc(e.path,t)}isEqual(e){return this===e}}function Dp(r,e,t,s){const a=r.ya(1,e,t);Ud("Data must be an object, but it was:",a,s);const l=[],p=ki.empty();ma(s,(j,J)=>{const le=Zh(e,j,t);J=(0,ce.m9)(J);const Ne=a.da(le);if(J instanceof Vc)l.push(le);else{const ot=Hl(J,Ne);null!=ot&&(l.push(le),p.set(le,ot))}});const D=new po(l);return new fm(p,D,a.fieldTransforms)}function Fd(r,e,t,s,a,l){const p=r.ya(1,e,t),D=[jc(e,s,t)],j=[a];if(l.length%2!=0)throw new bt(st.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ot=0;ot<l.length;ot+=2)D.push(jc(e,l[ot])),j.push(l[ot+1]);const J=[],le=ki.empty();for(let ot=D.length-1;ot>=0;--ot)if(!ym(J,D[ot])){const _t=D[ot];let Bt=j[ot];Bt=(0,ce.m9)(Bt);const Xt=p.da(_t);if(Bt instanceof Vc)J.push(_t);else{const dn=Hl(Bt,Xt);null!=dn&&(J.push(_t),le.set(_t,dn))}}const Ne=new po(J);return new fm(le,Ne,p.fieldTransforms)}function cv(r,e,t,s=!1){return Hl(t,r.ya(s?4:3,e))}function Hl(r,e){if(Cp(r=(0,ce.m9)(r)))return Ud("Unsupported field value:",e,r),mm(r,e);if(r instanceof Uc)return function(t,s){if(!pm(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let D=Hl(p,s.wa(l));null==D&&(D={nullValue:"NULL_VALUE"}),a.push(D),l++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,ce.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return aa(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=fi.fromDate(t);return{timestampValue:wc(s.serializer,a)}}if(t instanceof fi){const a=new fi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wc(s.serializer,a)}}if(t instanceof $a)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof eu)return{bytesValue:$m(s.serializer,t._byteString)};if(t instanceof Yi){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:bf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${qh(t)}`)}(r,e)}function mm(r,e){const t={};return Wu(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(r,(s,a)=>{const l=Hl(a,e.ha(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function Cp(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof fi||r instanceof $a||r instanceof eu||r instanceof Yi||r instanceof Uc)}function Ud(r,e,t){if(!Cp(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=qh(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function jc(r,e,t){if((e=(0,ce.m9)(e))instanceof $o)return e._internalPath;if("string"==typeof e)return Zh(r,e);throw Qh("Field path arguments must be of type string or ",r,!1,void 0,t)}const dv=new RegExp("[~\\*/\\[\\]]");function Zh(r,e,t){if(e.search(dv)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new $o(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Qh(r,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let j="";return(l||p)&&(j+=" (found",l&&(j+=` in field ${s}`),p&&(j+=` in document ${a}`),j+=")"),new bt(st.INVALID_ARGUMENT,D+r+j)}function ym(r,e){return r.some(t=>t.isEqual(e))}class Bd{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Yi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hv extends Bd{data(){return super.data()}}function Yh(r,e){return"string"==typeof e?Zh(r,e):e instanceof $o?e._internalPath:e._delegate._internalPath}function vm(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new bt(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _m{}class Jh extends _m{}function zl(r,e,...t){let s=[];e instanceof _m&&s.push(e),s=s.concat(t),function(a){const l=a.filter(D=>D instanceof Vd).length,p=a.filter(D=>D instanceof Xh).length;if(l>1||l>0&&p>0)throw new bt(st.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class Xh extends Jh{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Xh(e,t,s)}_apply(e){const t=this._parse(e);return Tm(e._query,t),new Vo(e.firestore,e.converter,sh(e._query,t))}_parse(e){const t=Bc(e.firestore);return function(a,l,p,D,j,J,le){let Ne;if(j.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new bt(st.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){bm(le,J);const ot=[];for(const _t of le)ot.push(Im(D,a,_t));Ne={arrayValue:{values:ot}}}else Ne=Im(D,a,le)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||bm(le,J),Ne=cv(p,"where",le,"in"===J||"not-in"===J);return Mr.create(j,J,Ne)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Vd extends _m{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vd(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Ci.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let l=s;const p=a.getFlattenedFilters();for(const D of p)Tm(l,D),l=sh(l,D)}(e._query,t),new Vo(e.firestore,e.converter,sh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class wm extends Jh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wm(e,t)}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new bt(st.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new bt(st.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new ac(a,l);return function(D,j){if(null===dc(D)){const J=hc(D);null!==J&&Dm(0,J,j.field)}}(s,p),p}(e._query,this._field,this._direction);return new Vo(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new Ba(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Sp extends Jh{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Sp(e,t,s)}_apply(e){return new Vo(e.firestore,e.converter,Tl(e._query,this._limit,this._limitType))}}class Ap extends Jh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Ap(e,t,s)}_apply(e){const t=Em(e,this.type,this._docOrFields,this._inclusive);return new Vo(e.firestore,e.converter,(a=t,new Ba((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class xp extends Jh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new xp(e,t,s)}_apply(e){const t=Em(e,this.type,this._docOrFields,this._inclusive);return new Vo(e.firestore,e.converter,(a=t,new Ba((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Em(r,e,t,s){if(t[0]=(0,ce.m9)(t[0]),t[0]instanceof Bd)return function(a,l,p,D,j){if(!D)throw new bt(st.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const J=[];for(const le of Va(a))if(le.field.isKeyField())J.push(_e(l,D.key));else{const Ne=D.data.field(le.field);if(qu(Ne))throw new bt(st.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+le.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ne){const ot=le.field.canonicalString();throw new bt(st.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ot}' (used as the orderBy) does not exist.`)}J.push(Ne)}return new oo(J,j)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=Bc(r.firestore);return function(l,p,D,j,J,le){const Ne=l.explicitOrderBy;if(J.length>Ne.length)throw new bt(st.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ot=[];for(let _t=0;_t<J.length;_t++){const Bt=J[_t];if(Ne[_t].field.isKeyField()){if("string"!=typeof Bt)throw new bt(st.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof Bt}`);if(!rd(l)&&-1!==Bt.indexOf("/"))throw new bt(st.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${Bt}' contains a slash.`);const Xt=l.path.child(Ir.fromString(Bt));if(!Ft.isDocumentKey(Xt))throw new bt(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${Xt}' is not because it contains an odd number of segments.`);const dn=new Ft(Xt);ot.push(_e(p,dn))}else{const Xt=cv(D,j,Bt);ot.push(Xt)}}return new oo(ot,le)}(r._query,r.firestore._databaseId,a,e,t,s)}}function Im(r,e,t){if("string"==typeof(t=(0,ce.m9)(t))){if(""===t)throw new bt(st.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rd(e)&&-1!==t.indexOf("/"))throw new bt(st.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ir.fromString(t));if(!Ft.isDocumentKey(s))throw new bt(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return _e(r,new Ft(s))}if(t instanceof Yi)return _e(r,t._key);throw new bt(st.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(t)}.`)}function bm(r,e){if(!Array.isArray(r)||0===r.length)throw new bt(st.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tm(r,e){if(e.isInequality()){const s=hc(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new bt(st.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const l=dc(r);null!==l&&Dm(0,a,l)}const t=function(s,a){for(const l of s)for(const p of l.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new bt(st.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Dm(r,e,t){if(!t.isEqual(e))throw new bt(st.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Rp{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw an()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ma(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new $a(Oi(e.latitude),Oi(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=oc(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){const t=ba(e);return new fi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ir.fromString(e);wn(Ec(s));const a=new ia(s.get(1),s.get(3)),l=new Ft(s.popFirst(5));return a.isEqual(t)||os(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function jd(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class gv extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yi(this.firestore,null,t)}}class ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gl extends Bd{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Yh("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Hd extends Gl{data(e={}){return super.data(e)}}class ll{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ul(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Hd(this._firestore,this._userDataWriter,s.key,s,new ul(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bt(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new Hd(s._firestore,s._userDataWriter,p.doc.key,p.doc,new ul(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const D=new Hd(s._firestore,s._userDataWriter,p.doc.key,p.doc,new ul(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let j=-1,J=-1;return 0!==p.type&&(j=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),J=l.indexOf(p.doc.key)),{type:Ew(p.type),doc:D,oldIndex:j,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ew(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an()}}function Hn(r,e){return r instanceof Gl&&e instanceof Gl?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof ll&&e instanceof ll&&r._firestore===e._firestore&&Ep(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class Wl extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yi(this.firestore,null,t)}}function Fs(r,e,t){r=ti(r,Yi);const s=ti(r.firestore,cs),a=jd(r.converter,e,t);return $c(s,[Tp(Bc(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,Ui.none())])}function Q_(r,e,t,...s){r=ti(r,Yi);const a=ti(r.firestore,cs),l=Bc(a);let p;return p="string"==typeof(e=(0,ce.m9)(e))||e instanceof $o?Fd(l,"updateDoc",r._key,e,t,s):Dp(l,"updateDoc",r._key,e),$c(a,[p.toMutation(r._key,Ui.exists(!0))])}function vv(r,...e){var t,s,a;r=(0,ce.m9)(r);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||tv(e[p])||(l=e[p],p++);const D={includeMetadataChanges:l.includeMetadataChanges};if(tv(e[p])){const Ne=e[p];e[p]=null===(t=Ne.next)||void 0===t?void 0:t.bind(Ne),e[p+1]=null===(s=Ne.error)||void 0===s?void 0:s.bind(Ne),e[p+2]=null===(a=Ne.complete)||void 0===a?void 0:a.bind(Ne)}let j,J,le;if(r instanceof Yi)J=ti(r.firestore,cs),le=Yu(r._key.path),j={next:Ne=>{e[p]&&e[p](Np(J,r,Ne))},error:e[p+1],complete:e[p+2]};else{const Ne=ti(r,Vo);J=ti(Ne.firestore,cs),le=Ne._query;const ot=new Wl(J);j={next:_t=>{e[p]&&e[p](new ll(J,ot,Ne,_t))},error:e[p+1],complete:e[p+2]},vm(r._query)}return function(Ne,ot,_t,Bt){const Xt=new al(Bt),dn=new Hg(ot,Xt,_t);return Ne.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return Bg(yield $l(Ne),dn)})),()=>{Xt.Dc(),Ne.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return ep(yield $l(Ne),dn)}))}}(Qs(J),le,D,j)}function $c(r,e){return function(t,s){const a=new Rr;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function By(r,e,t){return sp.apply(this,arguments)}(yield fp(t),s,a)})),a.promise}(Qs(r),e)}function Np(r,e,t){const s=t.docs.get(e._key),a=new Wl(r);return new Gl(r,a,e._key,s,new ul(t.hasPendingWrites,t.fromCache),e.converter)}const nf={maxAttempts:5};class Iv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bc(e)}set(e,t,s){this._verifyNotCommitted();const a=ql(e,this._firestore),l=jd(a.converter,t,s),p=Tp(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,Ui.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=ql(e,this._firestore);let p;return p="string"==typeof(t=(0,ce.m9)(t))||t instanceof $o?Fd(this._dataReader,"WriteBatch.update",l._key,t,s,a):Dp(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,Ui.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ql(e,this._firestore);return this._mutations=this._mutations.concat(new g(t._key,Ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(st.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ql(r,e){if((r=(0,ce.m9)(r)).firestore!==e)throw new bt(st.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class s0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bc(e)}get(e){const t=ql(e,this._firestore),s=new gv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return an();const l=a[0];if(l.isFoundDocument())return new Bd(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Bd(this._firestore,s,t._key,null,t.converter);throw an()})}set(e,t,s){const a=ql(e,this._firestore),l=jd(a.converter,t,s),p=Tp(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=ql(e,this._firestore);let p;return p="string"==typeof(t=(0,ce.m9)(t))||t instanceof $o?Fd(this._dataReader,"Transaction.update",l._key,t,s,a):Dp(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=ql(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ql(e,this._firestore),s=new Wl(this._firestore);return super.get(e).then(a=>new Gl(this._firestore,s,t._key,a._document,new ul(!1,!1),t.converter))}}function kp(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new bt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function rf(){if(typeof Uint8Array>"u")throw new bt("unimplemented","Uint8Arrays are not available in this environment.")}function Sv(){if(!function Qd(){return typeof atob<"u"}())throw new bt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){pa=Ve.SDK_VERSION,(0,Ve._registerComponent)(new fe.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const l=t.getProvider("app").getImmediate(),p=new cs(new nu(t.getProvider("auth-internal")),new dl(t.getProvider("app-check-internal")),function(D,j){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new bt(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ia(D.options.projectId,j)}(l,s),l);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,Ve.registerVersion)(Ma,"3.12.0",r),(0,Ve.registerVersion)(Ma,"3.12.0","esm2017")}();class sf{constructor(e){this._delegate=e}static fromBase64String(e){return Sv(),new sf(eu.fromBase64String(e))}static fromUint8Array(e){return rf(),new sf(eu.fromUint8Array(e))}toBase64(){return Sv(),this._delegate.toBase64()}toUint8Array(){return rf(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Lp(r){return function af(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class l0{enableIndexedDbPersistence(e,t){return function k_(r,e){dm(r=ti(r,cs));const t=Qs(r);if(t._uninitializedComponentsProvider)throw new bt(st.FAILED_PRECONDITION,"SDK cache is already specified.");Ar("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new mu;return iv(t,a,new jl(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function rv(r){dm(r=ti(r,cs));const e=Qs(r);if(e._uninitializedComponentsProvider)throw new bt(st.FAILED_PRECONDITION,"SDK cache is already specified.");Ar("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new mu;return iv(e,s,new Lc(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function sv(r){if(r._initialized&&!r._terminated)throw new bt(st.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return r._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(s){if(!Tn.D())return Promise.resolve();const a=s+"main";yield Tn.delete(a)}),function(s){return t.apply(this,arguments)})(Vf(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Av{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof ia||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ar("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function wp(r,e,t,s={}){var a;const l=(r=ti(r,Od))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Ar("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,D;if("string"==typeof s.mockUserToken)p=s.mockUserToken,D=$n.MOCK_USER;else{p=(0,ce.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const j=s.mockUserToken.sub||s.mockUserToken.user_id;if(!j)throw new bt(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new $n(j)}r._authCredentials=new Hu(new Oo(p,D))}}(this._delegate,e,t,s)}enableNetwork(){return function kd(r){return function gp(r){return r.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Gy(r),t=yield Wy(r);return e.setNetworkEnabled(!0),function(s){const a=Ht(s);return a.vu.delete(0),Ac(a)}(t)}))}(Qs(r=ti(r,cs)))}(this._delegate)}disableNetwork(){return function L_(r){return function mp(r){return r.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Gy(r),t=yield Wy(r);return e.setNetworkEnabled(!1),(s=(0,ae.Z)(function*(a){const l=Ht(a);l.vu.add(0),yield xc(l),l.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Qs(r=ti(r,cs)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Yy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ov(r){return function(e){const t=new Rr;return e.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function T_(r,e){return Nc.apply(this,arguments)}(yield fp(e),t)})),t.promise}(Qs(r=ti(r,cs)))}(this._delegate)}onSnapshotsInSync(e){return function _v(r,e){return function Ky(r,e){const t=new al(e);return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return s=yield $l(r),a=t,Ht(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return s=yield $l(r),a=t,void Ht(s).ku.delete(a);var s,a}))}}(Qs(r=ti(r,cs)),tv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new bt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Kl(this,lm(this._delegate,e))}catch(t){throw Do(t,"collection()","Firestore.collection()")}}doc(e){try{return new tu(this,Kh(this._delegate,e))}catch(t){throw Do(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _a(this,function Xy(r,e){if(r=ti(r,Od),_p("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new bt(st.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vo(r,null,(t=e,new Ba(Ir.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Do(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function bv(r,e,t){r=ti(r,cs);const s=Object.assign(Object.assign({},nf),t);return function(a){if(a.maxAttempts<1)throw new bt(st.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,l,p){const D=new Rr;return a.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const j=yield function pp(r){return zh(r).then(e=>e.datastore)}(a);new Nd(a.asyncQueue,j,p,l,D).run()})),D.promise}(Qs(r),a=>e(new s0(r,a)),s)}(this._delegate,t=>e(new xv(this,t)))}batch(){return Qs(this._delegate),new Am(new Iv(this._delegate,e=>$c(this._delegate,e)))}loadBundle(e){return function av(r,e){const t=Qs(r=ti(r,cs)),s=new N_;return function Zy(r,e,t,s){const a=function(l,p){let D;return D="string"==typeof l?Sa().encode(l):l,j=function(j,J){if(j instanceof Uint8Array)return Fc(j,J);if(j instanceof ArrayBuffer)return Fc(new Uint8Array(j),J);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Md(j,p);var j}(t,Kf(e));r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function Xa(r,e,t){const s=Ht(r);var a;(a=(0,ae.Z)(function*(l,p,D){try{const j=yield p.getMetadata();if(yield function(ot,_t){const Bt=Ht(ot),Xt=ao(_t.createTime);return Bt.persistence.runTransaction("hasNewerBundle","readonly",dn=>Bt.qs.getBundleMetadata(dn,_t.id)).then(dn=>!!dn&&dn.createTime.compareTo(Xt)>=0)}(l.localStore,j))return yield p.close(),D._completeWith({taskState:"Success",documentsLoaded:(ot=j).totalDocuments,bytesLoaded:ot.totalBytes,totalDocuments:ot.totalDocuments,totalBytes:ot.totalBytes}),Promise.resolve(new Set);D._updateProgress(Ny(j));const J=new E_(j,l.localStore,p.serializer);let le=yield p.bc();for(;le;){const ot=yield J.zu(le);ot&&D._updateProgress(ot),le=yield p.bc()}const Ne=yield J.complete();return yield Vu(l,Ne.Ju,void 0),yield function(ot,_t){const Bt=Ht(ot);return Bt.persistence.runTransaction("Save bundle","readwrite",Xt=>Bt.qs.saveBundleMetadata(Xt,_t))}(l.localStore,j),D._completeWith(Ne.progress),Promise.resolve(Ne.Hu)}catch(j){return Ar("SyncEngine",`Loading bundle failed with ${j}`),D._failWith(j),Promise.resolve(new Set)}var ot}),function(l,p,D){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield fp(r),a,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function F_(r,e){return function im(r,e){return r.asyncQueue.enqueue((0,ae.Z)(function*(){return function(t,s){const a=Ht(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.qs.getNamedQuery(l,s))}(yield Gh(r),e)}))}(Qs(r=ti(r,cs)),e).then(t=>t?new Vo(r,null,t.query):null)}(this._delegate,e).then(t=>t?new _a(this,t):null)}}class Fp extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new sf(new eu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tu.forKey(t,this.firestore,null)}}class xv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}get(e){const t=zc(e);return this._delegate.get(t).then(s=>new uf(this._firestore,new Gl(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=zc(e);return s?(kp("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=zc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=zc(e);return this._delegate.delete(t),this}}class Am{constructor(e){this._delegate=e}set(e,t,s){const a=zc(e);return s?(kp("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=zc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=zc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hc{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Hd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gd(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Hc.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new Hc(e,new Fp(e),t),a.set(t,l)),l}}Hc.INSTANCES=new WeakMap;class tu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}static forPath(e,t,s){if(e.length%2!=0)throw new bt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new tu(t,new Yi(t._delegate,s,new Ft(e)))}static forKey(e,t,s){return new tu(t,new Yi(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Kl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Kl(this.firestore,lm(this._delegate,e))}catch(t){throw Do(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ce.m9)(e))instanceof Yi&&cm(this._delegate,e)}set(e,t){t=kp("DocumentReference.set",t);try{return t?Fs(this._delegate,e,t):Fs(this._delegate,e)}catch(s){throw Do(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Q_(this._delegate,e):Q_(this._delegate,e,t,...s)}catch(a){throw Do(a,"updateDoc()","DocumentReference.update()")}}delete(){return function mv(r){return $c(ti(r.firestore,cs),[new g(r._key,Ui.none())])}(this._delegate)}onSnapshot(...e){const t=Rv(e),s=xm(e,a=>new uf(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return vv(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function K_(r){r=ti(r,Yi);const e=ti(r.firestore,cs),t=Qs(e),s=new Wl(e);return function rm(r,e){const t=new Rr;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(s=(0,ae.Z)(function*(a,l,p){try{const D=yield function(j,J){const le=Ht(j);return le.persistence.runTransaction("read document","readonly",Ne=>le.localDocuments.getDocument(Ne,J))}(a,l);D.isFoundDocument()?p.resolve(D):D.isNoDocument()?p.resolve(null):p.reject(new bt(st.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const j=bd(D,`Failed to get document '${l} from cache`);p.reject(j)}}),function(a,l,p){return s.apply(this,arguments)})(yield Gh(r),e,t);var s})),t.promise}(t,r._key).then(a=>new Gl(e,s,r._key,a,new ul(null!==a&&a.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===e?.source?function zd(r){r=ti(r,Yi);const e=ti(r.firestore,cs);return qy(Qs(e),r._key,{source:"server"}).then(t=>Np(e,r,t))}(this._delegate):function q_(r){r=ti(r,Yi);const e=ti(r.firestore,cs);return qy(Qs(e),r._key).then(t=>Np(e,r,t))}(this._delegate),t.then(s=>new uf(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new tu(this.firestore,this._delegate.withConverter(e?Hc.getInstance(this.firestore,e):null))}}function Do(r,e,t){return r.message=r.message.replace(e,t),r}function Rv(r){for(const e of r)if("object"==typeof e&&!Lp(e))return e;return{}}function xm(r,e){var t,s;let a;return a=Lp(r[0])?r[0]:Lp(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class uf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Hn(this._delegate,e._delegate)}}class Gd extends uf{data(e){const t=this._delegate.data(e);return function Na(r,e){r||an()}(void 0!==t),t}}class _a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}where(e,t,s){try{return new _a(this.firestore,zl(this._delegate,function V_(r,e,t){const s=e,a=Yh("where",r);return Xh._create(a,s,t)}(e,t,s)))}catch(a){throw Do(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _a(this.firestore,zl(this._delegate,function j_(r,e="asc"){const t=e,s=Yh("orderBy",r);return wm._create(s,t)}(e,t)))}catch(s){throw Do(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _a(this.firestore,zl(this._delegate,function $_(r){return Jy("limit",r),Sp._create("limit",r,"F")}(e)))}catch(t){throw Do(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _a(this.firestore,zl(this._delegate,function H_(r){return Jy("limitToLast",r),Sp._create("limitToLast",r,"L")}(e)))}catch(t){throw Do(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _a(this.firestore,zl(this._delegate,function z_(...r){return Ap._create("startAt",r,!0)}(...e)))}catch(t){throw Do(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _a(this.firestore,zl(this._delegate,function G_(...r){return Ap._create("startAfter",r,!1)}(...e)))}catch(t){throw Do(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _a(this.firestore,zl(this._delegate,function fv(...r){return xp._create("endBefore",r,!1)}(...e)))}catch(t){throw Do(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _a(this.firestore,zl(this._delegate,function pv(...r){return xp._create("endAt",r,!0)}(...e)))}catch(t){throw Do(t,"endAt()","Query.endAt()")}}isEqual(e){return Ep(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Mp(r){r=ti(r,Vo);const e=ti(r.firestore,cs),t=Qs(e),s=new Wl(e);return function yp(r,e){const t=new Rr;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(s=(0,ae.Z)(function*(a,l,p){try{const D=yield Hf(a,l,!0),j=new ky(l,D.ir),J=j.sc(D.documents),le=j.applyChanges(J,!1);p.resolve(le.snapshot)}catch(D){const j=bd(D,`Failed to execute query '${l} against cache`);p.reject(j)}}),function(a,l,p){return s.apply(this,arguments)})(yield Gh(r),e,t);var s})),t.promise}(t,r._query).then(a=>new ll(e,s,r,a))}(this._delegate):"server"===e?.source?function Pp(r){r=ti(r,Vo);const e=ti(r.firestore,cs),t=Qs(e),s=new Wl(e);return Wh(t,r._query,{source:"server"}).then(a=>new ll(e,s,r,a))}(this._delegate):function Z_(r){r=ti(r,Vo);const e=ti(r.firestore,cs),t=Qs(e),s=new Wl(e);return vm(r._query),Wh(t,r._query).then(a=>new ll(e,s,r,a))}(this._delegate),t.then(s=>new Rm(this.firestore,new ll(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Rv(e),s=xm(e,a=>new Rm(this.firestore,new ll(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return vv(this._delegate,t,s)}withConverter(e){return new _a(this.firestore,this._delegate.withConverter(e?Hc.getInstance(this.firestore,e):null))}}class Mv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Rm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _a(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Mv(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Gd(this._firestore,s))})}isEqual(e){return Hn(this._delegate,e._delegate)}}class Kl extends _a{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tu(this.firestore,e):null}doc(e){try{return new tu(this.firestore,void 0===e?Kh(this._delegate):Kh(this._delegate,e))}catch(t){throw Do(t,"doc()","CollectionReference.doc()")}}add(e){return function yv(r,e){const t=ti(r.firestore,cs),s=Kh(r),a=jd(r.converter,e);return $c(t,[Tp(Bc(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,Ui.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new tu(this.firestore,t))}isEqual(e){return cm(this._delegate,e._delegate)}withConverter(e){return new Kl(this.firestore,this._delegate.withConverter(e?Hc.getInstance(this.firestore,e):null))}}function zc(r){return ti(r,Yi)}class Up{constructor(...e){this._delegate=new $o(...e)}static documentId(){return new Up(Qi.keyField().canonicalString())}isEqual(e){return(e=(0,ce.m9)(e))instanceof $o&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Dv(){return new gm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Zl(e)}static delete(){const e=function Tv(){return new Vc("deleteField")}();return e._methodName="FieldValue.delete",new Zl(e)}static arrayUnion(...e){const t=function o0(...r){return new uv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Zl(t)}static arrayRemove(...e){const t=function Cv(...r){return new B_("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Zl(t)}static increment(e){const t=function a0(r){return new lv("increment",r)}(e);return t._methodName="FieldValue.increment",new Zl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const d0={Firestore:Av,GeoPoint:$a,Timestamp:fi,Blob:sf,Transaction:xv,WriteBatch:Am,DocumentReference:tu,DocumentSnapshot:uf,Query:_a,QueryDocumentSnapshot:Gd,QuerySnapshot:Rm,CollectionReference:Kl,FieldPath:Up,FieldValue:Zl,setLogLevel:function c0(r){!function Pa(r){ro.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function f0(r){(function h0(r,e){r.INTERNAL.registerComponent(new fe.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},d0)))})(r,(e,t)=>new Av(e,t,new l0)),r.registerVersion("@firebase/firestore-compat","0.3.9")}(he.Z);var ju=H(3385),p0=H(6217),Pv=H(9260);function Nv(r,e){return function g0(r,e=x.z){return new S.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(r,e)}function Mm(r,e){return Nv(r,e).pipe((0,L.U)(t=>({payload:t,type:"query"})))}function Bp(r,e){return Mm(r,e).pipe((0,Z.O)(void 0),B(),(0,L.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,D)=>{const j=a.find(le=>le.doc.ref.isEqual(p.ref)),J=t?.payload.docs.find(le=>le.ref.isEqual(p.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(p.metadata)||!j&&J&&JSON.stringify(J.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:p}})}),l}))}function Ov(r,e,t){return Bp(r,t).pipe((0,$.R)((s,a)=>function y0(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function kv(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Pm(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Pm(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Pm(r,e.oldIndex,1)}return r}(r,s))}),r}(s,a.map(l=>l.payload),e),[]),(0,de.x)(),(0,L.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Pm(r,e,t,...s){const a=r.slice();return a.splice(e,t,...s),a}function Nm(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class Lv{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Bp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,L.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Z.O)(void 0),B(),(0,oe.h)(([s,a])=>a.length>0||!s),(0,L.U)(([s,a])=>a),O.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,$.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nm(e);return Ov(this.query,t,this.afs.schedulers.outsideAngular).pipe(O.iC)}valueChanges(e={}){return Mm(this.query,this.afs.schedulers.outsideAngular).pipe((0,L.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),O.iC)}get(e){return(0,W.D)(this.query.get(e)).pipe(O.iC)}add(e){return this.ref.add(e)}doc(e){return new Fv(this.ref.doc(e),this.afs)}}class Fv{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=Vp(s,t);return new Lv(a,l,this.afs)}snapshotChanges(){return function m0(r,e){return Nv(r,e).pipe((0,Z.O)(void 0),B(),(0,L.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(O.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,L.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,W.D)(this.ref.get(e)).pipe(O.iC)}}class Uv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Bp(this.query,this.afs.schedulers.outsideAngular).pipe((0,L.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,oe.h)(t=>t.length>0),O.iC):Bp(this.query,this.afs.schedulers.outsideAngular).pipe(O.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,$.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nm(e);return Ov(this.query,t,this.afs.schedulers.outsideAngular).pipe(O.iC)}valueChanges(e={}){return Mm(this.query,this.afs.schedulers.outsideAngular).pipe((0,L.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),O.iC)}get(e){return(0,W.D)(this.query.get(e)).pipe(O.iC)}}const Bv=new m.OlP("angularfire2.enableFirestorePersistence"),Vv=new m.OlP("angularfire2.firestore.persistenceSettings"),jv=new m.OlP("angularfire2.firestore.settings"),Om=new m.OlP("angularfire2.firestore.use-emulator");function Vp(r,e=(t=>t)){return{query:e(r),ref:r}}let km=(()=>{class r{constructor(t,s,a,l,p,D,j,J,le,Ne,ot,_t,Bt,Xt,dn,vr,ui){this.schedulers=j;const _r=(0,pe.on)(t,D,s),Us=le;Ne&&(0,ju.nw)(_r,D,ot,Bt,Xt,dn,_t,vr),[this.firestore,this.persistenceEnabled$]=(0,pe.cc)(`${_r.name}.firestore`,"AngularFirestore",_r.name,()=>{const ds=D.runOutsideAngular(()=>_r.firestore());if(l&&ds.settings(l),Us&&ds.useEmulator(...Us),a&&!(0,Ce.PM)(p)){const es=()=>{try{return(0,W.D)(ds.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(da){return typeof console<"u"&&console.warn(da),(0,N.of)(!1)}};return[ds,D.runOutsideAngular(es)]}return[ds,(0,N.of)(!1)]},[l,Us,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=Vp(a,s),D=this.schedulers.ngZone.run(()=>l);return new Lv(D,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new Uv(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new Fv(a,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(m.LFG(pe.Dh),m.LFG(pe.xv,8),m.LFG(Bv,8),m.LFG(jv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(O.HU),m.LFG(Vv,8),m.LFG(Om,8),m.LFG(ju.zQ,8),m.LFG(ju.Qv,8),m.LFG(ju.L6,8),m.LFG(ju._Q,8),m.LFG(ju.rT,8),m.LFG(ju.lh,8),m.LFG(ju.f7,8),m.LFG(p0.nm,8))},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),Lm=(()=>{class r{constructor(){Pv.Z.registerVersion("angularfire",O.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:Bv,useValue:!0},{provide:Vv,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=m.oAB({type:r}),r.\u0275inj=m.cJS({providers:[km]}),r})()},8445:($t,Re,H)=>{"use strict";H.d(Re,{Q1:()=>Xr,TE:()=>_s});var m=H(9751),x=H(9646),S=H(8996),W=H(8372),N=H(4004),O=H(3900),Z=H(4976),K=H(4650),V=H(2011),B=H(3942),L=H(5861),$=H(6881),de=H(2090),oe=H(4859);const pe="firebasestorage.googleapis.com",Ce="storageBucket";class Ve extends de.ZR{constructor(z,me,xe=0){super(te(z),`Firebase Storage: ${me} (${te(z)})`),this.status_=xe,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ve.prototype)}get status(){return this.status_}set status(z){this.status_=z}_codeEquals(z){return te(z)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(z){this.customData.serverResponse=z,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var fe=(()=>{return(q=fe||(fe={})).UNKNOWN="unknown",q.OBJECT_NOT_FOUND="object-not-found",q.BUCKET_NOT_FOUND="bucket-not-found",q.PROJECT_NOT_FOUND="project-not-found",q.QUOTA_EXCEEDED="quota-exceeded",q.UNAUTHENTICATED="unauthenticated",q.UNAUTHORIZED="unauthorized",q.UNAUTHORIZED_APP="unauthorized-app",q.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",q.INVALID_CHECKSUM="invalid-checksum",q.CANCELED="canceled",q.INVALID_EVENT_NAME="invalid-event-name",q.INVALID_URL="invalid-url",q.INVALID_DEFAULT_BUCKET="invalid-default-bucket",q.NO_DEFAULT_BUCKET="no-default-bucket",q.CANNOT_SLICE_BLOB="cannot-slice-blob",q.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",q.NO_DOWNLOAD_URL="no-download-url",q.INVALID_ARGUMENT="invalid-argument",q.INVALID_ARGUMENT_COUNT="invalid-argument-count",q.APP_DELETED="app-deleted",q.INVALID_ROOT_OPERATION="invalid-root-operation",q.INVALID_FORMAT="invalid-format",q.INTERNAL_ERROR="internal-error",q.UNSUPPORTED_ENVIRONMENT="unsupported-environment",fe;var q})();function te(q){return"storage/"+q}function ce(){return new Ve(fe.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Me(){return new Ve(fe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function at(){return new Ve(fe.CANCELED,"User canceled the upload/download.")}function hn(){return new Ve(fe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kn(q){return new Ve(fe.INVALID_ARGUMENT,q)}function Fn(){return new Ve(fe.APP_DELETED,"The Firebase app was deleted.")}function en(q){return new Ve(fe.INVALID_ROOT_OPERATION,"The operation '"+q+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vt(q,z){return new Ve(fe.INVALID_FORMAT,"String does not match format '"+q+"': "+z)}function sr(q){throw new Ve(fe.INTERNAL_ERROR,"Internal error: "+q)}class Lt{constructor(z,me){this.bucket=z,this.path_=me}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const z=encodeURIComponent;return"/b/"+z(this.bucket)+"/o/"+z(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(z,me){let xe;try{xe=Lt.makeFromUrl(z,me)}catch{return new Lt(z,"")}if(""===xe.path)return xe;throw function wt(q){return new Ve(fe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+q+"'.")}(z)}static makeFromUrl(z,me){let xe=null;const qe="([A-Za-z0-9.\\-_]+)",Kt=new RegExp("^gs://"+qe+"(/(.*))?$","i");function bn(oi){oi.path_=decodeURIComponent(oi.path)}const yi=me.replace(/[.]/g,"\\."),di=[{regex:Kt,indices:{bucket:1,path:3},postModify:function dt(oi){"/"===oi.path.charAt(oi.path.length-1)&&(oi.path_=oi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${yi}/v[A-Za-z0-9_]+/b/${qe}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:bn},{regex:new RegExp(`^https?://${me===pe?"(?:storage.googleapis.com|storage.cloud.google.com)":me}/${qe}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:bn}];for(let oi=0;oi<di.length;oi++){const ws=di[oi],ss=ws.regex.exec(z);if(ss){let Rs=ss[ws.indices.path];Rs||(Rs=""),xe=new Lt(ss[ws.indices.bucket],Rs),ws.postModify(xe);break}}if(null==xe)throw function We(q){return new Ve(fe.INVALID_URL,"Invalid URL '"+q+"'.")}(z);return xe}}class hr{constructor(z){this.promise_=Promise.reject(z)}getPromise(){return this.promise_}cancel(z=!1){}}function Lr(q){return"string"==typeof q||q instanceof String}function Rn(q){return Qr()&&q instanceof Blob}function Qr(){return typeof Blob<"u"&&!(0,de.UG)()}function zr(q,z,me,xe){if(xe<z)throw kn(`Invalid value for '${q}'. Expected ${z} or greater.`);if(xe>me)throw kn(`Invalid value for '${q}'. Expected ${me} or less.`)}function Nt(q,z,me){let xe=z;return null==me&&(xe=`https://${z}`),`${me}://${xe}/v0${q}`}function cr(q){const z=encodeURIComponent;let me="?";for(const xe in q)q.hasOwnProperty(xe)&&(me=me+(z(xe)+"=")+z(q[xe])+"&");return me=me.slice(0,-1),me}var Gr=(()=>{return(q=Gr||(Gr={}))[q.NO_ERROR=0]="NO_ERROR",q[q.NETWORK_ERROR=1]="NETWORK_ERROR",q[q.ABORT=2]="ABORT",Gr;var q})();function Wr(q,z){const me=q>=500&&q<600,qe=-1!==[408,429].indexOf(q),dt=-1!==z.indexOf(q);return me||qe||dt}class Cs{constructor(z,me,xe,qe,dt,gt,Kt,Pt,bn,On,yi,Sr=!0){this.url_=z,this.method_=me,this.headers_=xe,this.body_=qe,this.successCodes_=dt,this.additionalRetryCodes_=gt,this.callback_=Kt,this.errorCallback_=Pt,this.timeout_=bn,this.progressCallback_=On,this.connectionFactory_=yi,this.retry=Sr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ei,Zr)=>{this.resolve_=ei,this.reject_=Zr,this.start_()})}start_(){const me=(xe,qe)=>{const dt=this.resolve_,gt=this.reject_,Kt=qe.connection;if(qe.wasSuccessCode)try{const Pt=this.callback_(Kt,Kt.getResponse());!function mi(q){return void 0!==q}(Pt)?dt():dt(Pt)}catch(Pt){gt(Pt)}else if(null!==Kt){const Pt=ce();Pt.serverResponse=Kt.getErrorText(),gt(this.errorCallback_?this.errorCallback_(Kt,Pt):Pt)}else gt(qe.canceled?this.appDelete_?Fn():at():Me())};this.canceled_?me(0,new Ai(!1,null,!0)):this.backoffId_=function Xn(q,z,me){let xe=1,qe=null,dt=null,gt=!1,Kt=0;function Pt(){return 2===Kt}let bn=!1;function On(...Vr){bn||(bn=!0,z.apply(null,Vr))}function yi(Vr){qe=setTimeout(()=>{qe=null,q(ei,Pt())},Vr)}function Sr(){dt&&clearTimeout(dt)}function ei(Vr,...no){if(bn)return void Sr();if(Vr)return Sr(),void On.call(null,Vr,...no);if(Pt()||gt)return Sr(),void On.call(null,Vr,...no);let di;xe<64&&(xe*=2),1===Kt?(Kt=2,di=0):di=1e3*(xe+Math.random()),yi(di)}let Zr=!1;function is(Vr){Zr||(Zr=!0,Sr(),!bn&&(null!==qe?(Vr||(Kt=2),clearTimeout(qe),yi(0)):Vr||(Kt=1)))}return yi(0),dt=setTimeout(()=>{gt=!0,is(!0)},me),is}((xe,qe)=>{if(qe)return void xe(!1,new Ai(!1,null,!0));const dt=this.connectionFactory_();this.pendingConnection_=dt;const gt=Kt=>{null!==this.progressCallback_&&this.progressCallback_(Kt.loaded,Kt.lengthComputable?Kt.total:-1)};null!==this.progressCallback_&&dt.addUploadProgressListener(gt),dt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&dt.removeUploadProgressListener(gt),this.pendingConnection_=null;const Kt=dt.getErrorCode()===Gr.NO_ERROR,Pt=dt.getStatus();if(!Kt||Wr(Pt,this.additionalRetryCodes_)&&this.retry){const On=dt.getErrorCode()===Gr.ABORT;return void xe(!1,new Ai(!1,null,On))}const bn=-1!==this.successCodes_.indexOf(Pt);xe(!0,new Ai(bn,dt))})},me,this.timeout_)}getPromise(){return this.promise_}cancel(z){this.canceled_=!0,this.appDelete_=z||!1,null!==this.backoffId_&&function fr(q){q(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ai{constructor(z,me,xe){this.wasSuccessCode=z,this.connection=me,this.canceled=!!xe}}function ni(...q){const z=function gr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==z){const me=new z;for(let xe=0;xe<q.length;xe++)me.append(q[xe]);return me.getBlob()}if(Qr())return new Blob(q);throw new Ve(fe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const qt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dr{constructor(z,me){this.data=z,this.contentType=me||null}}function Nn(q,z){switch(q){case qt.RAW:return new Dr(xi(z));case qt.BASE64:case qt.BASE64URL:return new Dr(Fr(q,z));case qt.DATA_URL:return new Dr(function Ur(q){const z=new qr(q);return z.base64?Fr(qt.BASE64,z.rest):function Gn(q){let z;try{z=decodeURIComponent(q)}catch{throw Vt(qt.DATA_URL,"Malformed data URL.")}return xi(z)}(z.rest)}(z),function Er(q){return new qr(q).contentType}(z))}throw ce()}function xi(q){const z=[];for(let me=0;me<q.length;me++){let xe=q.charCodeAt(me);xe<=127?z.push(xe):xe<=2047?z.push(192|xe>>6,128|63&xe):55296==(64512&xe)?me<q.length-1&&56320==(64512&q.charCodeAt(me+1))?(xe=65536|(1023&xe)<<10|1023&q.charCodeAt(++me),z.push(240|xe>>18,128|xe>>12&63,128|xe>>6&63,128|63&xe)):z.push(239,191,189):56320==(64512&xe)?z.push(239,191,189):z.push(224|xe>>12,128|xe>>6&63,128|63&xe)}return new Uint8Array(z)}function Fr(q,z){switch(q){case qt.BASE64:{const qe=-1!==z.indexOf("-"),dt=-1!==z.indexOf("_");if(qe||dt)throw Vt(q,"Invalid character '"+(qe?"-":"_")+"' found: is it base64url encoded?");break}case qt.BASE64URL:{const qe=-1!==z.indexOf("+"),dt=-1!==z.indexOf("/");if(qe||dt)throw Vt(q,"Invalid character '"+(qe?"+":"/")+"' found: is it base64 encoded?");z=z.replace(/-/g,"+").replace(/_/g,"/");break}}let me;try{me=function sn(q){if(typeof atob>"u")throw function Dt(q){return new Ve(fe.UNSUPPORTED_ENVIRONMENT,`${q} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(q)}(z)}catch(qe){throw qe.message.includes("polyfill")?qe:Vt(q,"Invalid character found")}const xe=new Uint8Array(me.length);for(let qe=0;qe<me.length;qe++)xe[qe]=me.charCodeAt(qe);return xe}class qr{constructor(z){this.base64=!1,this.contentType=null;const me=z.match(/^data:([^,]+)?,/);if(null===me)throw Vt(qt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const xe=me[1]||null;null!=xe&&(this.base64=function Br(q,z){return q.length>=z.length&&q.substring(q.length-z.length)===z}(xe,";base64"),this.contentType=this.base64?xe.substring(0,xe.length-7):xe),this.rest=z.substring(z.indexOf(",")+1)}}class Pr{constructor(z,me){let xe=0,qe="";Rn(z)?(this.data_=z,xe=z.size,qe=z.type):z instanceof ArrayBuffer?(me?this.data_=new Uint8Array(z):(this.data_=new Uint8Array(z.byteLength),this.data_.set(new Uint8Array(z))),xe=this.data_.length):z instanceof Uint8Array&&(me?this.data_=z:(this.data_=new Uint8Array(z.length),this.data_.set(z)),xe=z.length),this.size_=xe,this.type_=qe}size(){return this.size_}type(){return this.type_}slice(z,me){if(Rn(this.data_)){const qe=function wr(q,z,me){return q.webkitSlice?q.webkitSlice(z,me):q.mozSlice?q.mozSlice(z,me):q.slice?q.slice(z,me):null}(this.data_,z,me);return null===qe?null:new Pr(qe)}{const xe=new Uint8Array(this.data_.buffer,z,me-z);return new Pr(xe,!0)}}static getBlob(...z){if(Qr()){const me=z.map(xe=>xe instanceof Pr?xe.data_:xe);return new Pr(ni.apply(null,me))}{const me=z.map(gt=>Lr(gt)?Nn(qt.RAW,gt).data:gt.data_);let xe=0;me.forEach(gt=>{xe+=gt.byteLength});const qe=new Uint8Array(xe);let dt=0;return me.forEach(gt=>{for(let Kt=0;Kt<gt.length;Kt++)qe[dt++]=gt[Kt]}),new Pr(qe,!0)}}uploadData(){return this.data_}}function mr(q){let z;try{z=JSON.parse(q)}catch{return null}return function Bn(q){return"object"==typeof q&&!Array.isArray(q)}(z)?z:null}function Oe(q){const z=q.lastIndexOf("/",q.length-2);return-1===z?q:q.slice(z+1)}function Se(q,z){return z}class je{constructor(z,me,xe,qe){this.server=z,this.local=me||z,this.writable=!!xe,this.xform=qe||Se}}let lt=null;function Rt(){if(lt)return lt;const q=[];q.push(new je("bucket")),q.push(new je("generation")),q.push(new je("metageneration")),q.push(new je("name","fullPath",!0));const me=new je("name");me.xform=function z(dt,gt){return function Je(q){return!Lr(q)||q.length<2?q:Oe(q)}(gt)},q.push(me);const qe=new je("size");return qe.xform=function xe(dt,gt){return void 0!==gt?Number(gt):gt},q.push(qe),q.push(new je("timeCreated")),q.push(new je("updated")),q.push(new je("md5Hash",null,!0)),q.push(new je("cacheControl",null,!0)),q.push(new je("contentDisposition",null,!0)),q.push(new je("contentEncoding",null,!0)),q.push(new je("contentLanguage",null,!0)),q.push(new je("contentType",null,!0)),q.push(new je("metadata","customMetadata",!0)),lt=q,lt}function nr(q,z,me){const xe=mr(z);return null===xe?null:function xn(q,z,me){const xe={type:"file"},qe=me.length;for(let dt=0;dt<qe;dt++){const gt=me[dt];xe[gt.local]=gt.xform(xe,z[gt.server])}return function gn(q,z){Object.defineProperty(q,"ref",{get:function me(){const dt=new Lt(q.bucket,q.fullPath);return z._makeStorageReference(dt)}})}(xe,q),xe}(q,xe,me)}function Te(q,z){const me={},xe=z.length;for(let qe=0;qe<xe;qe++){const dt=z[qe];dt.writable&&(me[dt.server]=q[dt.local])}return JSON.stringify(me)}const ge="prefixes";class rn{constructor(z,me,xe,qe){this.url=z,this.method=me,this.handler=xe,this.timeout=qe,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xe(q){if(!q)throw ce()}function Ke(q,z){return function me(xe,qe){const dt=nr(q,qe,z);return Xe(null!==dt),dt}}function tn(q){return function z(me,xe){let qe;return qe=401===me.getStatus()?me.getErrorText().includes("Firebase App Check token is invalid")?function Pe(){return new Ve(fe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Le(){return new Ve(fe.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===me.getStatus()?function Ye(q){return new Ve(fe.QUOTA_EXCEEDED,"Quota for bucket '"+q+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(q.bucket):403===me.getStatus()?function Ie(q){return new Ve(fe.UNAUTHORIZED,"User does not have permission to access '"+q+"'.")}(q.path):xe,qe.status=me.getStatus(),qe.serverResponse=xe.serverResponse,qe}}function En(q){const z=tn(q);return function me(xe,qe){let dt=z(xe,qe);return 404===xe.getStatus()&&(dt=function Qe(q){return new Ve(fe.OBJECT_NOT_FOUND,"Object '"+q+"' does not exist.")}(q.path)),dt.serverResponse=qe.serverResponse,dt}}function jn(q,z,me){const qe=Nt(z.fullServerUrl(),q.host,q._protocol),gt=q.maxOperationRetryTime,Kt=new rn(qe,"GET",Ke(q,me),gt);return Kt.errorHandler=En(z),Kt}function xr(q,z,me,xe,qe){const dt={};dt.prefix=z.isRoot?"":z.path+"/",me&&me.length>0&&(dt.delimiter=me),xe&&(dt.pageToken=xe),qe&&(dt.maxResults=qe);const Kt=Nt(z.bucketOnlyServerUrl(),q.host,q._protocol),bn=q.maxOperationRetryTime,On=new rn(Kt,"GET",function It(q,z){return function me(xe,qe){const dt=function Mt(q,z,me){const xe=mr(me);return null===xe?null:function ht(q,z,me){const xe={prefixes:[],items:[],nextPageToken:me.nextPageToken};if(me[ge])for(const qe of me[ge]){const dt=qe.replace(/\/$/,""),gt=q._makeStorageReference(new Lt(z,dt));xe.prefixes.push(gt)}if(me.items)for(const qe of me.items){const dt=q._makeStorageReference(new Lt(z,qe.name));xe.items.push(dt)}return xe}(q,z,xe)}(q,z,qe);return Xe(null!==dt),dt}}(q,z.bucket),bn);return On.urlParams=dt,On.errorHandler=tn(z),On}function Js(q,z,me){const xe=Object.assign({},me);return xe.fullPath=q.path,xe.size=z.size(),xe.contentType||(xe.contentType=function Bs(q,z){return q&&q.contentType||z&&z.type()||"application/octet-stream"}(null,z)),xe}class ci{constructor(z,me,xe,qe){this.current=z,this.total=me,this.finalized=!!xe,this.metadata=qe||null}}function Ss(q,z){let me=null;try{me=q.getResponseHeader("X-Goog-Upload-Status")}catch{Xe(!1)}return Xe(!!me&&-1!==(z||["active"]).indexOf(me)),me}const ps={STATE_CHANGED:"state_changed"},Un={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xs(q){switch(q){case"running":case"pausing":case"canceling":return Un.RUNNING;case"paused":return Un.PAUSED;case"success":return Un.SUCCESS;case"canceled":return Un.CANCELED;default:return Un.ERROR}}class br{constructor(z,me,xe){if(function Bi(q){return"function"==typeof q}(z)||null!=me||null!=xe)this.next=z,this.error=me??void 0,this.complete=xe??void 0;else{const dt=z;this.next=dt.next,this.error=dt.error,this.complete=dt.complete}}}function Kr(q){return(...z)=>{Promise.resolve().then(()=>q(...z))}}class ns extends class Ri{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gr.NO_ERROR,this.sendPromise_=new Promise(z=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gr.ABORT,z()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gr.NETWORK_ERROR,z()}),this.xhr_.addEventListener("load",()=>{z()})})}send(z,me,xe,qe){if(this.sent_)throw sr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(me,z,!0),void 0!==qe)for(const dt in qe)qe.hasOwnProperty(dt)&&this.xhr_.setRequestHeader(dt,qe[dt].toString());return void 0!==xe?this.xhr_.send(xe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(z){return this.xhr_.getResponseHeader(z)}addUploadProgressListener(z){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",z)}removeUploadProgressListener(z){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",z)}}{initXhr(){this.xhr_.responseType="text"}}function Nr(){return new ns}class Jo{constructor(z,me,xe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=z,this._blob=me,this._metadata=xe,this._mappings=Rt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=qe=>{if(this._request=void 0,this._chunkMultiplier=1,qe._codeEquals(fe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const dt=this.isExponentialBackoffExpired();if(Wr(qe.status,[])){if(!dt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();qe=Me()}this._error=qe,this._transition("error")}},this._metadataErrorHandler=qe=>{this._request=void 0,qe._codeEquals(fe.CANCELED)?this.completeTransitions_():(this._error=qe,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((qe,dt)=>{this._resolve=qe,this._reject=dt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const z=this._transferred;return me=>this._updateProgress(z+me)}_shouldDoResumable(z){return z.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(z){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([me,xe])=>{switch(this._state){case"running":z(me,xe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((z,me)=>{const xe=function hs(q,z,me,xe,qe){const dt=z.bucketOnlyServerUrl(),gt=Js(z,xe,qe),Kt={name:gt.fullPath},Pt=Nt(dt,q.host,q._protocol),On={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${xe.size()}`,"X-Goog-Upload-Header-Content-Type":gt.contentType,"Content-Type":"application/json; charset=utf-8"},yi=Te(gt,me),Zr=new rn(Pt,"POST",function ei(is){let Vr;Ss(is);try{Vr=is.getResponseHeader("X-Goog-Upload-URL")}catch{Xe(!1)}return Xe(Lr(Vr)),Vr},q.maxUploadRetryTime);return Zr.urlParams=Kt,Zr.headers=On,Zr.body=yi,Zr.errorHandler=tn(z),Zr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),qe=this._ref.storage._makeRequest(xe,Nr,z,me);this._request=qe,qe.getPromise().then(dt=>{this._request=void 0,this._uploadUrl=dt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const z=this._uploadUrl;this._resolveToken((me,xe)=>{const qe=function uo(q,z,me,xe){const Pt=new rn(me,"POST",function dt(bn){const On=Ss(bn,["active","final"]);let yi=null;try{yi=bn.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xe(!1)}yi||Xe(!1);const Sr=Number(yi);return Xe(!isNaN(Sr)),new ci(Sr,xe.size(),"final"===On)},q.maxUploadRetryTime);return Pt.headers={"X-Goog-Upload-Command":"query"},Pt.errorHandler=tn(z),Pt}(this._ref.storage,this._ref._location,z,this._blob),dt=this._ref.storage._makeRequest(qe,Nr,me,xe);this._request=dt,dt.getPromise().then(gt=>{this._request=void 0,this._updateProgress(gt.current),this._needToFetchStatus=!1,gt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const z=262144*this._chunkMultiplier,me=new ci(this._transferred,this._blob.size()),xe=this._uploadUrl;this._resolveToken((qe,dt)=>{let gt;try{gt=function fs(q,z,me,xe,qe,dt,gt,Kt){const Pt=new ci(0,0);if(gt?(Pt.current=gt.current,Pt.total=gt.total):(Pt.current=0,Pt.total=xe.size()),xe.size()!==Pt.total)throw function Pn(){return new Ve(fe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const bn=Pt.total-Pt.current;let On=bn;qe>0&&(On=Math.min(On,qe));const yi=Pt.current;let ei="";ei=0===On?"finalize":bn===On?"upload, finalize":"upload";const Zr={"X-Goog-Upload-Command":ei,"X-Goog-Upload-Offset":`${Pt.current}`},is=xe.slice(yi,yi+On);if(null===is)throw hn();const di=new rn(me,"POST",function Vr(oi,ws){const ss=Ss(oi,["active","final"]),Po=Pt.current+On,Rs=xe.size();let R;return R="final"===ss?Ke(z,dt)(oi,ws):null,new ci(Po,Rs,"final"===ss,R)},z.maxUploadRetryTime);return di.headers=Zr,di.body=is.uploadData(),di.progressCallback=Kt||null,di.errorHandler=tn(q),di}(this._ref._location,this._ref.storage,xe,this._blob,z,this._mappings,me,this._makeProgressCallback())}catch(Pt){return this._error=Pt,void this._transition("error")}const Kt=this._ref.storage._makeRequest(gt,Nr,qe,dt,!1);this._request=Kt,Kt.getPromise().then(Pt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Pt.current),Pt.finalized?(this._metadata=Pt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((z,me)=>{const xe=jn(this._ref.storage,this._ref._location,this._mappings),qe=this._ref.storage._makeRequest(xe,Nr,z,me);this._request=qe,qe.getPromise().then(dt=>{this._request=void 0,this._metadata=dt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((z,me)=>{const xe=function or(q,z,me,xe,qe){const dt=z.bucketOnlyServerUrl(),gt={"X-Goog-Upload-Protocol":"multipart"},Pt=function Kt(){let di="";for(let oi=0;oi<2;oi++)di+=Math.random().toString().slice(2);return di}();gt["Content-Type"]="multipart/related; boundary="+Pt;const bn=Js(z,xe,qe),On=Te(bn,me),ei=Pr.getBlob("--"+Pt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+On+"\r\n--"+Pt+"\r\nContent-Type: "+bn.contentType+"\r\n\r\n",xe,"\r\n--"+Pt+"--");if(null===ei)throw hn();const Zr={name:bn.fullPath},is=Nt(dt,q.host,q._protocol),no=q.maxUploadRetryTime,Or=new rn(is,"POST",Ke(q,me),no);return Or.urlParams=Zr,Or.headers=gt,Or.body=ei.uploadData(),Or.errorHandler=tn(z),Or}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),qe=this._ref.storage._makeRequest(xe,Nr,z,me);this._request=qe,qe.getPromise().then(dt=>{this._request=void 0,this._metadata=dt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(z){const me=this._transferred;this._transferred=z,this._transferred!==me&&this._notifyObservers()}_transition(z){if(this._state!==z)switch(z){case"canceling":case"pausing":this._state=z,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const me="paused"===this._state;this._state=z,me&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=z,this._notifyObservers();break;case"canceled":this._error=at(),this._state=z,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const z=Xs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:z,metadata:this._metadata,task:this,ref:this._ref}}on(z,me,xe,qe){const dt=new br(me||void 0,xe||void 0,qe||void 0);return this._addObserver(dt),()=>{this._removeObserver(dt)}}then(z,me){return this._promise.then(z,me)}catch(z){return this.then(null,z)}_addObserver(z){this._observers.push(z),this._notifyObserver(z)}_removeObserver(z){const me=this._observers.indexOf(z);-1!==me&&this._observers.splice(me,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(me=>{this._notifyObserver(me)})}_finishPromise(){if(void 0!==this._resolve){let z=!0;switch(Xs(this._state)){case Un.SUCCESS:Kr(this._resolve.bind(null,this.snapshot))();break;case Un.CANCELED:case Un.ERROR:Kr(this._reject.bind(null,this._error))();break;default:z=!1}z&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(z){switch(Xs(this._state)){case Un.RUNNING:case Un.PAUSED:z.next&&Kr(z.next.bind(z,this.snapshot))();break;case Un.SUCCESS:z.complete&&Kr(z.complete.bind(z))();break;default:z.error&&Kr(z.error.bind(z,this._error))()}}resume(){const z="paused"===this._state||"pausing"===this._state;return z&&this._transition("running"),z}pause(){const z="running"===this._state;return z&&this._transition("pausing"),z}cancel(){const z="running"===this._state||"pausing"===this._state;return z&&this._transition("canceling"),z}}class rr{constructor(z,me){this._service=z,this._location=me instanceof Lt?me:Lt.makeFromUrl(me,z.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(z,me){return new rr(z,me)}get root(){const z=new Lt(this._location.bucket,"");return this._newRef(this._service,z)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Oe(this._location.path)}get storage(){return this._service}get parent(){const z=function ri(q){if(0===q.length)return null;const z=q.lastIndexOf("/");return-1===z?"":q.slice(0,z)}(this._location.path);if(null===z)return null;const me=new Lt(this._location.bucket,z);return new rr(this._service,me)}_throwIfRoot(z){if(""===this._location.path)throw en(z)}}function vt(q,z,me){return At.apply(this,arguments)}function At(){return(At=(0,L.Z)(function*(q,z,me){const qe=yield mn(q,{pageToken:me});z.prefixes.push(...qe.prefixes),z.items.push(...qe.items),null!=qe.nextPageToken&&(yield vt(q,z,qe.nextPageToken))})).apply(this,arguments)}function mn(q,z){null!=z&&"number"==typeof z.maxResults&&zr("options.maxResults",1,1e3,z.maxResults);const me=z||{},xe=xr(q.storage,q._location,"/",me.pageToken,me.maxResults);return q.storage.makeRequestWithTokens(xe,Nr)}function Tr(q){q._throwIfRoot("getDownloadURL");const z=function wi(q,z,me){const qe=Nt(z.fullServerUrl(),q.host,q._protocol),gt=q.maxOperationRetryTime,Kt=new rn(qe,"GET",function St(q,z){return function me(xe,qe){const dt=nr(q,qe,z);return Xe(null!==dt),function De(q,z,me,xe){const qe=mr(z);if(null===qe||!Lr(qe.downloadTokens))return null;const dt=qe.downloadTokens;if(0===dt.length)return null;const gt=encodeURIComponent;return dt.split(",").map(bn=>{const yi=q.fullPath;return Nt("/b/"+gt(q.bucket)+"/o/"+gt(yi),me,xe)+cr({alt:"media",token:bn})})[0]}(dt,qe,q.host,q._protocol)}}(q,me),gt);return Kt.errorHandler=En(z),Kt}(q.storage,q._location,Rt());return q.storage.makeRequestWithTokens(z,Nr).then(me=>{if(null===me)throw function Cn(){return new Ve(fe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return me})}function $s(q,z){const me=function ii(q,z){const me=z.split("/").filter(xe=>xe.length>0).join("/");return 0===q.length?me:q+"/"+me}(q._location.path,z),xe=new Lt(q._location.bucket,me);return new rr(q.storage,xe)}function gs(q,z){if(q instanceof Hs){const me=q;if(null==me._bucket)throw function Et(){return new Ve(fe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ce+"' property when initializing the app?")}();const xe=new rr(me,me._bucket);return null!=z?gs(xe,z):xe}return void 0!==z?$s(q,z):q}function xs(q,z){if(z&&function Vi(q){return/^[A-Za-z]+:\/\//.test(q)}(z)){if(q instanceof Hs)return function eo(q,z){return new rr(q,z)}(q,z);throw kn("To use ref(service, url), the first argument must be a Storage instance.")}return gs(q,z)}function Xo(q,z){const me=z?.[Ce];return null==me?null:Lt.makeFromBucketSpec(me,q)}class Hs{constructor(z,me,xe,qe,dt){this.app=z,this._authProvider=me,this._appCheckProvider=xe,this._url=qe,this._firebaseVersion=dt,this._bucket=null,this._host=pe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=qe?Lt.makeFromBucketSpec(qe,this._host):Xo(this._host,this.app.options)}get host(){return this._host}set host(z){this._host=z,this._bucket=null!=this._url?Lt.makeFromBucketSpec(this._url,z):Xo(z,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(z){zr("time",0,Number.POSITIVE_INFINITY,z),this._maxUploadRetryTime=z}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(z){zr("time",0,Number.POSITIVE_INFINITY,z),this._maxOperationRetryTime=z}_getAuthToken(){var z=this;return(0,L.Z)(function*(){if(z._overrideAuthToken)return z._overrideAuthToken;const me=z._authProvider.getImmediate({optional:!0});if(me){const xe=yield me.getToken();if(null!==xe)return xe.accessToken}return null})()}_getAppCheckToken(){var z=this;return(0,L.Z)(function*(){const me=z._appCheckProvider.getImmediate({optional:!0});return me?(yield me.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(z=>z.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(z){return new rr(this,z)}_makeRequest(z,me,xe,qe,dt=!0){if(this._deleted)return new hr(Fn());{const gt=function fn(q,z,me,xe,qe,dt,gt=!0){const Kt=cr(q.urlParams),Pt=q.url+Kt,bn=Object.assign({},q.headers);return function Vn(q,z){z&&(q["X-Firebase-GMPID"]=z)}(bn,z),function li(q,z){null!==z&&z.length>0&&(q.Authorization="Firebase "+z)}(bn,me),function pr(q,z){q["X-Firebase-Storage-Version"]="webjs/"+(z??"AppManager")}(bn,dt),function Wt(q,z){null!==z&&(q["X-Firebase-AppCheck"]=z)}(bn,xe),new Cs(Pt,q.method,bn,q.body,q.successCodes,q.additionalRetryCodes,q.handler,q.errorHandler,q.timeout,q.progressCallback,qe,gt)}(z,this._appId,xe,qe,me,this._firebaseVersion,dt);return this._requests.add(gt),gt.getPromise().then(()=>this._requests.delete(gt),()=>this._requests.delete(gt)),gt}}makeRequestWithTokens(z,me){var xe=this;return(0,L.Z)(function*(){const[qe,dt]=yield Promise.all([xe._getAuthToken(),xe._getAppCheckToken()]);return xe._makeRequest(z,me,qe,dt).getPromise()})()}}const yo="@firebase/storage";function Yr(q,z){return xs(q=(0,de.m9)(q),z)}function ha(q,{instanceIdentifier:z}){const me=q.getProvider("app").getImmediate(),xe=q.getProvider("auth-internal"),qe=q.getProvider("app-check-internal");return new Hs(me,xe,qe,z,$.SDK_VERSION)}!function co(){(0,$._registerComponent)(new oe.wA("storage",ha,"PUBLIC").setMultipleInstances(!0)),(0,$.registerVersion)(yo,"0.11.2",""),(0,$.registerVersion)(yo,"0.11.2","esm2017")}();class Kn{constructor(z,me,xe){this._delegate=z,this.task=me,this.ref=xe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class xa{constructor(z,me){this._delegate=z,this._ref=me,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Kn(this._delegate.snapshot,this,this._ref)}then(z,me){return this._delegate.then(xe=>{if(z)return z(new Kn(xe,this,this._ref))},me)}on(z,me,xe,qe){let dt;return me&&(dt="function"==typeof me?gt=>me(new Kn(gt,this,this._ref)):{next:me.next?gt=>me.next(new Kn(gt,this,this._ref)):void 0,complete:me.complete||void 0,error:me.error||void 0}),this._delegate.on(z,dt,xe||void 0,qe||void 0)}}class ys{constructor(z,me){this._delegate=z,this._service=me}get prefixes(){return this._delegate.prefixes.map(z=>new Gs(z,this._service))}get items(){return this._delegate.items.map(z=>new Gs(z,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Gs{constructor(z,me){this._delegate=z,this.storage=me}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(z){const me=function Ii(q,z){return $s(q,z)}(this._delegate,z);return new Gs(me,this.storage)}get root(){return new Gs(this._delegate.root,this.storage)}get parent(){const z=this._delegate.parent;return null==z?null:new Gs(z,this.storage)}put(z,me){return this._throwIfRoot("put"),new xa(function wa(q,z,me){return function Ze(q,z,me){return q._throwIfRoot("uploadBytesResumable"),new Jo(q,new Pr(z),me)}(q=(0,de.m9)(q),z,me)}(this._delegate,z,me),this)}putString(z,me=qt.RAW,xe){this._throwIfRoot("putString");const qe=Nn(me,z),dt=Object.assign({},xe);return null==dt.contentType&&null!=qe.contentType&&(dt.contentType=qe.contentType),new xa(new Jo(this._delegate,new Pr(qe.data,!0),dt),this)}listAll(){return function ms(q){return function nt(q){const z={prefixes:[],items:[]};return vt(q,z).then(()=>z)}(q=(0,de.m9)(q))}(this._delegate).then(z=>new ys(z,this.storage))}list(z){return function Aa(q,z){return mn(q=(0,de.m9)(q),z)}(this._delegate,z||void 0).then(me=>new ys(me,this.storage))}getMetadata(){return function Ei(q){return function Yn(q){q._throwIfRoot("getMetadata");const z=jn(q.storage,q._location,Rt());return q.storage.makeRequestWithTokens(z,Nr)}(q=(0,de.m9)(q))}(this._delegate)}updateMetadata(z){return function ji(q,z){return function ir(q,z){q._throwIfRoot("updateMetadata");const me=function si(q,z,me,xe){const dt=Nt(z.fullServerUrl(),q.host,q._protocol),Kt=Te(me,xe),bn=q.maxOperationRetryTime,On=new rn(dt,"PATCH",Ke(q,xe),bn);return On.headers={"Content-Type":"application/json; charset=utf-8"},On.body=Kt,On.errorHandler=En(z),On}(q.storage,q._location,z,Rt());return q.storage.makeRequestWithTokens(me,Nr)}(q=(0,de.m9)(q),z)}(this._delegate,z)}getDownloadURL(){return function Ji(q){return Tr(q=(0,de.m9)(q))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ea(q){return function Wi(q){q._throwIfRoot("deleteObject");const z=function ts(q,z){const xe=Nt(z.fullServerUrl(),q.host,q._protocol),Kt=new rn(xe,"DELETE",function gt(Pt,bn){},q.maxOperationRetryTime);return Kt.successCodes=[200,204],Kt.errorHandler=En(z),Kt}(q.storage,q._location);return q.storage.makeRequestWithTokens(z,Nr)}(q=(0,de.m9)(q))}(this._delegate)}_throwIfRoot(z){if(""===this._delegate._location.path)throw en(z)}}class Ti{constructor(z,me){this.app=z,this._delegate=me}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(z){if(Jr(z))throw kn("ref() expected a child path but got a URL, use refFromURL instead.");return new Gs(Yr(this._delegate,z),this)}refFromURL(z){if(!Jr(z))throw kn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Lt.makeFromUrl(z,this._delegate.host)}catch{throw kn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gs(Yr(this._delegate,z),this)}setMaxUploadRetryTime(z){this._delegate.maxUploadRetryTime=z}setMaxOperationRetryTime(z){this._delegate.maxOperationRetryTime=z}useEmulator(z,me,xe={}){!function bi(q,z,me,xe={}){!function rs(q,z,me,xe={}){q.host=`${z}:${me}`,q._protocol="http";const{mockUserToken:qe}=xe;qe&&(q._overrideAuthToken="string"==typeof qe?qe:(0,de.Sg)(qe,q.app.options.projectId))}(q,z,me,xe)}(this._delegate,z,me,xe)}}function Jr(q){return/^[A-Za-z]+:\/\//.test(q)}function Ao(q,{instanceIdentifier:z}){const me=q.getProvider("app-compat").getImmediate(),xe=q.getProvider("storage").getImmediate({identifier:z});return new Ti(me,xe)}!function _o(q){const z={TaskState:Un,TaskEvent:ps,StringFormat:qt,Storage:Ti,Reference:Gs};q.INTERNAL.registerComponent(new oe.wA("storage-compat",Ao,"PUBLIC").setServiceProps(z).setMultipleInstances(!0)),q.registerVersion("@firebase/storage-compat","0.3.2")}(B.Z);var xo=H(6217),fa=H(9260);function Di(q){const z=function Ro(q){return new m.y(z=>{const me=gt=>z.next(gt);me(q.snapshot);const dt=q.on("state_changed",me);return q.then(gt=>{me(gt),z.complete()},gt=>{me(q.snapshot),(gt=>{z.error(gt)})(gt)}),function(){dt()}}).pipe((0,W.b)(0))}(q);return{task:q,then:q.then.bind(q),catch:q.catch.bind(q),pause:q.pause.bind(q),cancel:q.cancel.bind(q),resume:q.resume.bind(q),snapshotChanges:()=>z,percentageChanges:()=>z.pipe((0,N.U)(me=>me.bytesTransferred/me.totalBytes*100))}}function vs(q){return{getDownloadURL:()=>(0,x.of)(void 0).pipe(Z.fc,(0,O.w)(()=>q.getDownloadURL()),Z.iC),getMetadata:()=>(0,x.of)(void 0).pipe(Z.fc,(0,O.w)(()=>q.getMetadata()),Z.iC),delete:()=>(0,S.D)(q.delete()),child:z=>vs(q.child(z)),updateMetadata:z=>(0,S.D)(q.updateMetadata(z)),put:(z,me)=>Di(q.put(z,me)),putString:(z,me,xe)=>Di(q.putString(z,me,xe)),list:z=>(0,S.D)(q.list(z)),listAll:()=>(0,S.D)(q.listAll())}}const Tt=new K.OlP("angularfire2.storageBucket"),Ln=new K.OlP("angularfire2.storage.maxUploadRetryTime"),ho=new K.OlP("angularfire2.storage.maxOperationRetryTime"),to=new K.OlP("angularfire2.storage.use-emulator");let Xr=(()=>{class q{constructor(me,xe,qe,dt,gt,Kt,Pt,bn,On,yi){const Sr=(0,V.on)(me,gt,xe);this.storage=(0,V.cc)(`${Sr.name}.storage.${qe}`,"AngularFireStorage",Sr.name,()=>{const ei=gt.runOutsideAngular(()=>Sr.storage(qe||void 0)),Zr=On;return Zr&&ei.useEmulator(...Zr),Pt&&ei.setMaxUploadRetryTime(Pt),bn&&ei.setMaxOperationRetryTime(bn),ei},[Pt,bn])}ref(me){return vs(this.storage.ref(me))}refFromURL(me){return vs(this.storage.refFromURL(me))}upload(me,xe,qe){return vs(this.storage.ref(me)).put(xe,qe)}}return q.\u0275fac=function(me){return new(me||q)(K.LFG(V.Dh),K.LFG(V.xv,8),K.LFG(Tt,8),K.LFG(K.Lbi),K.LFG(K.R0b),K.LFG(Z.HU),K.LFG(Ln,8),K.LFG(ho,8),K.LFG(to,8),K.LFG(xo.nm,8))},q.\u0275prov=K.Yz7({token:q,factory:q.\u0275fac,providedIn:"any"}),q})(),Mo=(()=>{class q{}return q.\u0275fac=function(me){return new(me||q)},q.\u0275mod=K.oAB({type:q}),q.\u0275inj=K.cJS({}),q})(),_s=(()=>{class q{constructor(){fa.Z.registerVersion("angularfire",Z.q4.full,"gcs-compat")}}return q.\u0275fac=function(me){return new(me||q)},q.\u0275mod=K.oAB({type:q}),q.\u0275inj=K.cJS({providers:[Xr],imports:[Mo]}),q})()},2011:($t,Re,H)=>{"use strict";H.d(Re,{Dh:()=>K,GT:()=>O,cc:()=>oe,hO:()=>de,on:()=>B,pX:()=>N,xv:()=>V});var m=H(4650),x=H(9260),S=H(4976);$t=H.hmd($t);const W=["ngOnDestroy"],N=(he,ae,Ve,fe={})=>new Proxy(he,{get:(te,ce)=>Ve.runOutsideAngular(()=>{var Qe;if(he[ce])return!(null===(Qe=fe?.spy)||void 0===Qe)&&Qe.get&&fe.spy.get(ce,he[ce]),he[ce];if(W.indexOf(ce)>-1)return()=>{};const Ye=ae.toPromise().then(Le=>{const Pe=Le&&Le[ce];return"function"==typeof Pe?Pe.bind(Le):Pe&&Pe.then?Pe.then(Ie=>Ve.run(()=>Ie)):Ve.run(()=>Pe)});return new Proxy(()=>{},{get:(Le,Pe)=>Ye[Pe],apply:(Le,Pe,Ie)=>Ye.then(Me=>{var at;const We=Me&&Me(...Ie);return!(null===(at=fe?.spy)||void 0===at)&&at.apply&&fe.spy.apply(ce,Ie,We),We})})})}),O=(he,ae)=>{ae.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(fe=>{Object.defineProperty(he.prototype,fe,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,fe))})})};class Z{constructor(ae){return ae}}const K=new m.OlP("angularfire2.app.options"),V=new m.OlP("angularfire2.app.name");function B(he,ae,Ve){const te="object"==typeof Ve&&Ve||{};te.name=te.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const Qe=x.Z.apps.filter(Ye=>Ye&&Ye.name===te.name)[0]||ae.runOutsideAngular(()=>x.Z.initializeApp(he,te));try{JSON.stringify(he)!==JSON.stringify(Qe.options)&&L("error",`${Qe.name} Firebase App already initialized with different options${$t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Z(Qe)}const L=(he,...ae)=>{(0,m.X6Q)()&&typeof console<"u"&&console[he](...ae)},$={provide:Z,useFactory:B,deps:[K,m.R0b,[new m.FiY,V]]};let de=(()=>{class he{constructor(Ve){x.Z.registerVersion("angularfire",S.q4.full,"core"),x.Z.registerVersion("angularfire",S.q4.full,"app-compat"),x.Z.registerVersion("angular",m.q4F.full,Ve.toString())}static initializeApp(Ve,fe){return{ngModule:he,providers:[{provide:K,useValue:Ve},{provide:V,useValue:fe}]}}}return he.\u0275fac=function(Ve){return new(Ve||he)(m.LFG(m.Lbi))},he.\u0275mod=m.oAB({type:he}),he.\u0275inj=m.cJS({providers:[$]}),he})();function oe(he,ae,Ve,fe,te){const[,ce,Qe]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===he)||[];if(ce)return function pe(he,ae){try{return he.toString()===ae.toString()}catch{return he===ae}}(te,Qe)||(ve("error",`${ae} was already initialized on the ${Ve} Firebase App with different settings.${Ce?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:te,was:Qe})),ce;{const Ye=fe();return globalThis.\u0275AngularfireInstanceCache.push([he,Ye,te]),Ye}}const Ce=!!$t.hot,ve=(he,...ae)=>{(0,m.X6Q)()&&typeof console<"u"&&console[he](...ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:($t,Re,H)=>{"use strict";H.d(Re,{q4:()=>pi,iC:()=>ya,fc:()=>Ku,HU:()=>Fa,vb:()=>Oi,JM:()=>ba});var m=H(4650),x=H(259),S=H(5861),W=H(6881),N=H(2090),O=H(4859),Z=H(1877);let V,B;const de=new WeakMap,oe=new WeakMap,pe=new WeakMap,Ce=new WeakMap,ve=new WeakMap;let Ve={get(T,M,X){if(T instanceof IDBTransaction){if("done"===M)return oe.get(T);if("objectStoreNames"===M)return T.objectStoreNames||pe.get(T);if("store"===M)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Qe(T[M])},set:(T,M,X)=>(T[M]=X,!0),has:(T,M)=>T instanceof IDBTransaction&&("done"===M||"store"===M)||M in T};function ce(T){return"function"==typeof T?function te(T){return T!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $(){return B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(T)?function(...M){return T.apply(Ye(this),M),Qe(de.get(this))}:function(...M){return Qe(T.apply(Ye(this),M))}:function(M,...X){const _e=T.call(Ye(this),M,...X);return pe.set(_e,M.sort?M.sort():[M]),Qe(_e)}}(T):(T instanceof IDBTransaction&&function ae(T){if(oe.has(T))return;const M=new Promise((X,_e)=>{const He=()=>{T.removeEventListener("complete",tt),T.removeEventListener("error",yt),T.removeEventListener("abort",yt)},tt=()=>{X(),He()},yt=()=>{_e(T.error||new DOMException("AbortError","AbortError")),He()};T.addEventListener("complete",tt),T.addEventListener("error",yt),T.addEventListener("abort",yt)});oe.set(T,M)}(T),((T,M)=>M.some(X=>T instanceof X))(T,function L(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(T,Ve):T)}function Qe(T){if(T instanceof IDBRequest)return function he(T){const M=new Promise((X,_e)=>{const He=()=>{T.removeEventListener("success",tt),T.removeEventListener("error",yt)},tt=()=>{X(Qe(T.result)),He()},yt=()=>{_e(T.error),He()};T.addEventListener("success",tt),T.addEventListener("error",yt)});return M.then(X=>{X instanceof IDBCursor&&de.set(X,T)}).catch(()=>{}),ve.set(M,T),M}(T);if(Ce.has(T))return Ce.get(T);const M=ce(T);return M!==T&&(Ce.set(T,M),ve.set(M,T)),M}const Ye=T=>ve.get(T),Ie=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],at=new Map;function We(T,M){if(!(T instanceof IDBDatabase)||M in T||"string"!=typeof M)return;if(at.get(M))return at.get(M);const X=M.replace(/FromIndex$/,""),_e=M!==X,He=Me.includes(X);if(!(X in(_e?IDBIndex:IDBObjectStore).prototype)||!He&&!Ie.includes(X))return;const tt=function(){var yt=(0,S.Z)(function*(Jt,...zt){const vn=this.transaction(Jt,He?"readwrite":"readonly");let Zn=vn.store;return _e&&(Zn=Zn.index(zt.shift())),(yield Promise.all([Zn[X](...zt),He&&vn.done]))[0]});return function(zt){return yt.apply(this,arguments)}}();return at.set(M,tt),tt}!function fe(T){Ve=T(Ve)}(T=>({...T,get:(M,X,_e)=>We(M,X)||T.get(M,X,_e),has:(M,X)=>!!We(M,X)||T.has(M,X)}));const wt="@firebase/installations",Pn="w:0.6.4",Cn="FIS_v2",sr=new N.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Lt(T){return T instanceof N.ZR&&T.code.includes("request-failed")}function hr({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Xn(T){return{token:T.token,requestStatus:2,expiresIn:Qr(T.expiresIn),creationTime:Date.now()}}function fr(T,M){return mi.apply(this,arguments)}function mi(){return(mi=(0,S.Z)(function*(T,M){const _e=(yield M.json()).error;return sr.create("request-failed",{requestName:T,serverCode:_e.code,serverMessage:_e.message,serverStatus:_e.status})})).apply(this,arguments)}function Bi({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Bn(T,{refreshToken:M}){const X=Bi(T);return X.append("Authorization",function zr(T){return`${Cn} ${T}`}(M)),X}function Lr(T){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,S.Z)(function*(T){const M=yield T();return M.status>=500&&M.status<600?T():M})).apply(this,arguments)}function Qr(T){return Number(T.replace("s","000"))}function Nt(T,M){return cr.apply(this,arguments)}function cr(){return(cr=(0,S.Z)(function*({appConfig:T,heartbeatServiceProvider:M},{fid:X}){const _e=hr(T),He=Bi(T),tt=M.getImmediate({optional:!0});if(tt){const vn=yield tt.getHeartbeatsHeader();vn&&He.append("x-firebase-client",vn)}const Jt={method:"POST",headers:He,body:JSON.stringify({fid:X,authVersion:Cn,appId:T.appId,sdkVersion:Pn})},zt=yield Lr(()=>fetch(_e,Jt));if(zt.ok){const vn=yield zt.json();return{fid:vn.fid||X,registrationStatus:2,refreshToken:vn.refreshToken,authToken:Xn(vn.authToken)}}throw yield fr("Create Installation",zt)})).apply(this,arguments)}function Gr(T){return new Promise(M=>{setTimeout(M,T)})}const Cs=/^[cdef][\w-]{21}$/;function li(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const X=function pr(T){return function Wr(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Cs.test(X)?X:""}catch{return""}}function Vn(T){return`${T.appName}!${T.appId}`}const Wt=new Map;function fn(T,M){const X=Vn(T);wr(X,M),function sn(T,M){const X=function Dr(){return!qt&&"BroadcastChannel"in self&&(qt=new BroadcastChannel("[Firebase] FID Change"),qt.onmessage=T=>{wr(T.data.key,T.data.fid)}),qt}();X&&X.postMessage({key:T,fid:M}),function Nn(){0===Wt.size&&qt&&(qt.close(),qt=null)}()}(X,M)}function wr(T,M){const X=Wt.get(T);if(X)for(const _e of X)_e(M)}let qt=null;const Fr="firebase-installations-store";let qr=null;function Ur(){return qr||(qr=function Le(T,M,{blocked:X,upgrade:_e,blocking:He,terminated:tt}={}){const yt=indexedDB.open(T,M),Jt=Qe(yt);return _e&&yt.addEventListener("upgradeneeded",zt=>{_e(Qe(yt.result),zt.oldVersion,zt.newVersion,Qe(yt.transaction))}),X&&yt.addEventListener("blocked",()=>X()),Jt.then(zt=>{tt&&zt.addEventListener("close",()=>tt()),He&&zt.addEventListener("versionchange",()=>He())}).catch(()=>{}),Jt}("firebase-installations-database",1,{upgrade:(T,M)=>{0===M&&T.createObjectStore(Fr)}})),qr}function Er(T,M){return Br.apply(this,arguments)}function Br(){return(Br=(0,S.Z)(function*(T,M){const X=Vn(T),He=(yield Ur()).transaction(Fr,"readwrite"),tt=He.objectStore(Fr),yt=yield tt.get(X);return yield tt.put(M,X),yield He.done,(!yt||yt.fid!==M.fid)&&fn(T,M.fid),M})).apply(this,arguments)}function Pr(T){return mr.apply(this,arguments)}function mr(){return(mr=(0,S.Z)(function*(T){const M=Vn(T),_e=(yield Ur()).transaction(Fr,"readwrite");yield _e.objectStore(Fr).delete(M),yield _e.done})).apply(this,arguments)}function ri(T,M){return ii.apply(this,arguments)}function ii(){return(ii=(0,S.Z)(function*(T,M){const X=Vn(T),He=(yield Ur()).transaction(Fr,"readwrite"),tt=He.objectStore(Fr),yt=yield tt.get(X),Jt=M(yt);return void 0===Jt?yield tt.delete(X):yield tt.put(Jt,X),yield He.done,Jt&&(!yt||yt.fid!==Jt.fid)&&fn(T,Jt.fid),Jt})).apply(this,arguments)}function Oe(T){return Se.apply(this,arguments)}function Se(){return(Se=(0,S.Z)(function*(T){let M;const X=yield ri(T.appConfig,_e=>{const He=je(_e),tt=lt(T,He);return M=tt.registrationPromise,tt.installationEntry});return""===X.fid?{installationEntry:yield M}:{installationEntry:X,registrationPromise:M}})).apply(this,arguments)}function je(T){return De(T||{fid:li(),registrationStatus:0})}function lt(T,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(sr.create("app-offline"))};const X={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},_e=function Je(T,M){return Rt.apply(this,arguments)}(T,X);return{installationEntry:X,registrationPromise:_e}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:gn(T)}:{installationEntry:M}}function Rt(){return(Rt=(0,S.Z)(function*(T,M){try{const X=yield Nt(T,M);return Er(T.appConfig,X)}catch(X){throw Lt(X)&&409===X.customData.serverCode?yield Pr(T.appConfig):yield Er(T.appConfig,{fid:M.fid,registrationStatus:0}),X}})).apply(this,arguments)}function gn(T){return xn.apply(this,arguments)}function xn(){return(xn=(0,S.Z)(function*(T){let M=yield nr(T.appConfig);for(;1===M.registrationStatus;)yield Gr(100),M=yield nr(T.appConfig);if(0===M.registrationStatus){const{installationEntry:X,registrationPromise:_e}=yield Oe(T);return _e||X}return M})).apply(this,arguments)}function nr(T){return ri(T,M=>{if(!M)throw sr.create("installation-not-found");return De(M)})}function De(T){return function Te(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function ge(T,M){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,S.Z)(function*({appConfig:T,heartbeatServiceProvider:M},X){const _e=ht(T,X),He=Bn(T,X),tt=M.getImmediate({optional:!0});if(tt){const vn=yield tt.getHeartbeatsHeader();vn&&He.append("x-firebase-client",vn)}const Jt={method:"POST",headers:He,body:JSON.stringify({installation:{sdkVersion:Pn,appId:T.appId}})},zt=yield Lr(()=>fetch(_e,Jt));if(zt.ok)return Xn(yield zt.json());throw yield fr("Generate Auth Token",zt)})).apply(this,arguments)}function ht(T,{fid:M}){return`${hr(T)}/${M}/authTokens:generate`}function Mt(T){return rn.apply(this,arguments)}function rn(){return(rn=(0,S.Z)(function*(T,M=!1){let X;const _e=yield ri(T.appConfig,tt=>{if(!En(tt))throw sr.create("not-registered");const yt=tt.authToken;if(!M&&jn(yt))return tt;if(1===yt.requestStatus)return X=Xe(T,M),tt;{if(!navigator.onLine)throw sr.create("app-offline");const Jt=Wn(tt);return X=St(T,Jt),Jt}});return X?yield X:_e.authToken})).apply(this,arguments)}function Xe(T,M){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,S.Z)(function*(T,M){let X=yield It(T.appConfig);for(;1===X.authToken.requestStatus;)yield Gr(100),X=yield It(T.appConfig);const _e=X.authToken;return 0===_e.requestStatus?Mt(T,M):_e})).apply(this,arguments)}function It(T){return ri(T,M=>{if(!En(M))throw sr.create("not-registered");return function wi(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function St(T,M){return tn.apply(this,arguments)}function tn(){return(tn=(0,S.Z)(function*(T,M){try{const X=yield ge(T,M),_e=Object.assign(Object.assign({},M),{authToken:X});return yield Er(T.appConfig,_e),X}catch(X){if(!Lt(X)||401!==X.customData.serverCode&&404!==X.customData.serverCode){const _e=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield Er(T.appConfig,_e)}else yield Pr(T.appConfig);throw X}})).apply(this,arguments)}function En(T){return void 0!==T&&2===T.registrationStatus}function jn(T){return 2===T.requestStatus&&!function xr(T){const M=Date.now();return M<T.creationTime||T.creationTime+T.expiresIn<M+36e5}(T)}function Wn(T){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:M})}function ts(){return(ts=(0,S.Z)(function*(T){const M=T,{installationEntry:X,registrationPromise:_e}=yield Oe(M);return _e?_e.catch(console.error):Mt(M).catch(console.error),X.fid})).apply(this,arguments)}function Js(){return(Js=(0,S.Z)(function*(T,M=!1){const X=T;return yield or(X),(yield Mt(X,M)).token})).apply(this,arguments)}function or(T){return ci.apply(this,arguments)}function ci(){return(ci=(0,S.Z)(function*(T){const{registrationPromise:M}=yield Oe(T);M&&(yield M)})).apply(this,arguments)}function br(T){return sr.create("missing-app-config-values",{valueName:T})}const Kr="installations",Ri=T=>{const M=T.getProvider("app").getImmediate(),X=function Xs(T){if(!T||!T.options)throw br("App Configuration");if(!T.name)throw br("App Name");const M=["projectId","apiKey","appId"];for(const X of M)if(!T.options[X])throw br(X);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(M);return{app:M,appConfig:X,heartbeatServiceProvider:(0,W._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},ns=T=>{const M=T.getProvider("app").getImmediate(),X=(0,W._getProvider)(M,Kr).getImmediate();return{getId:()=>function si(T){return ts.apply(this,arguments)}(X),getToken:He=>function Bs(T){return Js.apply(this,arguments)}(X,He)}};(function Nr(){(0,W._registerComponent)(new O.wA(Kr,Ri,"PUBLIC")),(0,W._registerComponent)(new O.wA("installations-internal",ns,"PRIVATE"))})(),(0,W.registerVersion)(wt,"0.6.4"),(0,W.registerVersion)(wt,"0.6.4","esm2017");const As="@firebase/remote-config",rr=new N.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class rs{constructor(M,X,_e,He){this.client=M,this.storage=X,this.storageCache=_e,this.logger=He}isCachedDataFresh(M,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const _e=Date.now()-X,He=_e<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${_e}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${He}.`),He}fetch(M){var X=this;return(0,S.Z)(function*(){const[_e,He]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if(He&&X.isCachedDataFresh(M.cacheMaxAgeMillis,_e))return He;M.eTag=He&&He.eTag;const tt=yield X.client.fetch(M),yt=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===tt.status&&yt.push(X.storage.setLastSuccessfulFetchResponse(tt)),yield Promise.all(yt),tt})()}}function Hs(T=navigator){return T.languages&&T.languages[0]||T.language}class yo{constructor(M,X,_e,He,tt,yt){this.firebaseInstallations=M,this.sdkVersion=X,this.namespace=_e,this.projectId=He,this.apiKey=tt,this.appId=yt}fetch(M){var X=this;return(0,S.Z)(function*(){const[_e,He]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),yt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,Jt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},zt={sdk_version:X.sdkVersion,app_instance_id:_e,app_instance_id_token:He,app_id:X.appId,language_code:Hs()},vn={method:"POST",headers:Jt,body:JSON.stringify(zt)},Zn=fetch(yt,vn),er=new Promise((kr,oo)=>{M.signal.addEventListener(()=>{const _l=new Error("The operation was aborted.");_l.name="AbortError",oo(_l)})});let sa;try{yield Promise.race([Zn,er]),sa=yield Zn}catch(kr){let oo="fetch-client-network";throw"AbortError"===kr?.name&&(oo="fetch-timeout"),rr.create(oo,{originalErrorMessage:kr?.message})}let Ns=sa.status;const Ta=sa.headers.get("ETag")||void 0;let ki,oa;if(200===sa.status){let kr;try{kr=yield sa.json()}catch(oo){throw rr.create("fetch-client-parse",{originalErrorMessage:oo?.message})}ki=kr.entries,oa=kr.state}if("INSTANCE_STATE_UNSPECIFIED"===oa?Ns=500:"NO_CHANGE"===oa?Ns=304:("NO_TEMPLATE"===oa||"EMPTY_CONFIG"===oa)&&(ki={}),304!==Ns&&200!==Ns)throw rr.create("fetch-status",{httpStatus:Ns});return{status:Ns,eTag:Ta,config:ki}})()}}class Co{constructor(M,X){this.client=M,this.storage=X}fetch(M){var X=this;return(0,S.Z)(function*(){const _e=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch(M,_e)})()}attemptFetch(M,{throttleEndTimeMillis:X,backoffCount:_e}){var He=this;return(0,S.Z)(function*(){yield function ks(T,M){return new Promise((X,_e)=>{const He=Math.max(M-Date.now(),0),tt=setTimeout(X,He);T.addEventListener(()=>{clearTimeout(tt),_e(rr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,X);try{const tt=yield He.client.fetch(M);return yield He.storage.deleteThrottleMetadata(),tt}catch(tt){if(!function zs(T){if(!(T instanceof N.ZR&&T.customData))return!1;const M=Number(T.customData.httpStatus);return 429===M||500===M||503===M||504===M}(tt))throw tt;const yt={throttleEndTimeMillis:Date.now()+(0,N.$s)(_e),backoffCount:_e+1};return yield He.storage.setThrottleMetadata(yt),He.attemptFetch(M,yt)}})()}}class wa{constructor(M,X,_e,He,tt){this.app=M,this._client=X,this._storageCache=_e,this._storage=He,this._logger=tt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ei(T,M){const X=T.target.error||void 0;return rr.create(M,{originalErrorMessage:X&&X?.message})}const ji="app_namespace_store";class ea{constructor(M,X,_e,He=function Ji(){return new Promise((T,M)=>{try{const X=indexedDB.open("firebase_remote_config",1);X.onerror=_e=>{M(Ei(_e,"storage-open"))},X.onsuccess=_e=>{T(_e.target.result)},X.onupgradeneeded=_e=>{0===_e.oldVersion&&_e.target.result.createObjectStore(ji,{keyPath:"compositeKey"})}}catch(X){M(rr.create("storage-open",{originalErrorMessage:X?.message}))}})}()){this.appId=M,this.appName=X,this.namespace=_e,this.openDbPromise=He}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var X=this;return(0,S.Z)(function*(){const _e=yield X.openDbPromise;return new Promise((He,tt)=>{const Jt=_e.transaction([ji],"readonly").objectStore(ji),zt=X.createCompositeKey(M);try{const vn=Jt.get(zt);vn.onerror=Zn=>{tt(Ei(Zn,"storage-get"))},vn.onsuccess=Zn=>{const er=Zn.target.result;He(er?er.value:void 0)}}catch(vn){tt(rr.create("storage-get",{originalErrorMessage:vn?.message}))}})})()}set(M,X){var _e=this;return(0,S.Z)(function*(){const He=yield _e.openDbPromise;return new Promise((tt,yt)=>{const zt=He.transaction([ji],"readwrite").objectStore(ji),vn=_e.createCompositeKey(M);try{const Zn=zt.put({compositeKey:vn,value:X});Zn.onerror=er=>{yt(Ei(er,"storage-set"))},Zn.onsuccess=()=>{tt()}}catch(Zn){yt(rr.create("storage-set",{originalErrorMessage:Zn?.message}))}})})()}delete(M){var X=this;return(0,S.Z)(function*(){const _e=yield X.openDbPromise;return new Promise((He,tt)=>{const Jt=_e.transaction([ji],"readwrite").objectStore(ji),zt=X.createCompositeKey(M);try{const vn=Jt.delete(zt);vn.onerror=Zn=>{tt(Ei(Zn,"storage-delete"))},vn.onsuccess=()=>{He()}}catch(vn){tt(rr.create("storage-delete",{originalErrorMessage:vn?.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class Yr{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,S.Z)(function*(){const X=M.storage.getLastFetchStatus(),_e=M.storage.getLastSuccessfulFetchTimestampMillis(),He=M.storage.getActiveConfig(),tt=yield X;tt&&(M.lastFetchStatus=tt);const yt=yield _e;yt&&(M.lastSuccessfulFetchTimestampMillis=yt);const Jt=yield He;Jt&&(M.activeConfig=Jt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function $i(){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,S.Z)(function*(){if(!(0,N.hl)())return!1;try{return yield(0,N.eu)()}catch{return!1}})).apply(this,arguments)}let co,Kn;!function Ii(){(0,W._registerComponent)(new O.wA("remote-config",function T(M,{instanceIdentifier:X}){const _e=M.getProvider("app").getImmediate(),He=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw rr.create("registration-window");if(!(0,N.hl)())throw rr.create("indexed-db-unavailable");const{projectId:tt,apiKey:yt,appId:Jt}=_e.options;if(!tt)throw rr.create("registration-project-id");if(!yt)throw rr.create("registration-api-key");if(!Jt)throw rr.create("registration-app-id");const zt=new ea(Jt,_e.name,X=X||"firebase"),vn=new Yr(zt),Zn=new Z.Yd(As);Zn.logLevel=Z.in.ERROR;const er=new yo(He,W.SDK_VERSION,X,tt,yt,Jt),sa=new Co(er,zt),Ns=new rs(sa,zt,vn,Zn),Ta=new wa(_e,Ns,vn,zt,Zn);return function Yn(T){const M=(0,N.m9)(T);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Ta),Ta},"PUBLIC").setMultipleInstances(!0)),(0,W.registerVersion)(As,"0.4.4"),(0,W.registerVersion)(As,"0.4.4","esm2017")}();const Gs=new WeakMap,Ti=new WeakMap,Jr=new WeakMap,Mi=new WeakMap,ln=new WeakMap;let _o={get(T,M,X){if(T instanceof IDBTransaction){if("done"===M)return Ti.get(T);if("objectStoreNames"===M)return T.objectStoreNames||Jr.get(T);if("store"===M)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Di(T[M])},set:(T,M,X)=>(T[M]=X,!0),has:(T,M)=>T instanceof IDBTransaction&&("done"===M||"store"===M)||M in T};function Ro(T){return"function"==typeof T?function fa(T){return T!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ys(){return Kn||(Kn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(T)?function(...M){return T.apply(vs(this),M),Di(Gs.get(this))}:function(...M){return Di(T.apply(vs(this),M))}:function(M,...X){const _e=T.call(vs(this),M,...X);return Jr.set(_e,M.sort?M.sort():[M]),Di(_e)}}(T):(T instanceof IDBTransaction&&function Ao(T){if(Ti.has(T))return;const M=new Promise((X,_e)=>{const He=()=>{T.removeEventListener("complete",tt),T.removeEventListener("error",yt),T.removeEventListener("abort",yt)},tt=()=>{X(),He()},yt=()=>{_e(T.error||new DOMException("AbortError","AbortError")),He()};T.addEventListener("complete",tt),T.addEventListener("error",yt),T.addEventListener("abort",yt)});Ti.set(T,M)}(T),((T,M)=>M.some(X=>T instanceof X))(T,function xa(){return co||(co=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(T,_o):T)}function Di(T){if(T instanceof IDBRequest)return function vo(T){const M=new Promise((X,_e)=>{const He=()=>{T.removeEventListener("success",tt),T.removeEventListener("error",yt)},tt=()=>{X(Di(T.result)),He()},yt=()=>{_e(T.error),He()};T.addEventListener("success",tt),T.addEventListener("error",yt)});return M.then(X=>{X instanceof IDBCursor&&Gs.set(X,T)}).catch(()=>{}),ln.set(M,T),M}(T);if(Mi.has(T))return Mi.get(T);const M=Ro(T);return M!==T&&(Mi.set(T,M),ln.set(M,T)),M}const vs=T=>ln.get(T);function Tt(T,M,{blocked:X,upgrade:_e,blocking:He,terminated:tt}={}){const yt=indexedDB.open(T,M),Jt=Di(yt);return _e&&yt.addEventListener("upgradeneeded",zt=>{_e(Di(yt.result),zt.oldVersion,zt.newVersion,Di(yt.transaction))}),X&&yt.addEventListener("blocked",()=>X()),Jt.then(zt=>{tt&&zt.addEventListener("close",()=>tt()),He&&zt.addEventListener("versionchange",()=>He())}).catch(()=>{}),Jt}function Ln(T,{blocked:M}={}){const X=indexedDB.deleteDatabase(T);return M&&X.addEventListener("blocked",()=>M()),Di(X).then(()=>{})}const ho=["get","getKey","getAll","getAllKeys","count"],to=["put","add","delete","clear"],Xr=new Map;function ta(T,M){if(!(T instanceof IDBDatabase)||M in T||"string"!=typeof M)return;if(Xr.get(M))return Xr.get(M);const X=M.replace(/FromIndex$/,""),_e=M!==X,He=to.includes(X);if(!(X in(_e?IDBIndex:IDBObjectStore).prototype)||!He&&!ho.includes(X))return;const tt=function(){var yt=(0,S.Z)(function*(Jt,...zt){const vn=this.transaction(Jt,He?"readwrite":"readonly");let Zn=vn.store;return _e&&(Zn=Zn.index(zt.shift())),(yield Promise.all([Zn[X](...zt),He&&vn.done]))[0]});return function(zt){return yt.apply(this,arguments)}}();return Xr.set(M,tt),tt}!function xo(T){_o=T(_o)}(T=>({...T,get:(M,X,_e)=>ta(M,X)||T.get(M,X,_e),has:(M,X)=>!!ta(M,X)||T.has(M,X)}));const Mo="/firebase-messaging-sw.js",_s="/firebase-cloud-messaging-push-scope",q="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",me="google.c.a.c_id",xe="google.c.a.c_l",qe="google.c.a.ts",dt="google.c.a.e";var Kt=(()=>{return(T=Kt||(Kt={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Kt;var T})();function Pt(T){const M=new Uint8Array(T);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bn(T){const X=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),_e=atob(X),He=new Uint8Array(_e.length);for(let tt=0;tt<_e.length;++tt)He[tt]=_e.charCodeAt(tt);return He}const On="fcm_token_details_db",Sr="fcm_token_object_Store";function ei(T){return Zr.apply(this,arguments)}function Zr(){return Zr=(0,S.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(tt=>tt.name).includes(On))return null;let M=null;return(yield Tt(On,5,{upgrade:(_e=(0,S.Z)(function*(He,tt,yt,Jt){var zt;if(tt<2||!He.objectStoreNames.contains(Sr))return;const vn=Jt.objectStore(Sr),Zn=yield vn.index("fcmSenderId").get(T);if(yield vn.clear(),Zn)if(2===tt){const er=Zn;if(!er.auth||!er.p256dh||!er.endpoint)return;M={token:er.fcmToken,createTime:null!==(zt=er.createTime)&&void 0!==zt?zt:Date.now(),subscriptionOptions:{auth:er.auth,p256dh:er.p256dh,endpoint:er.endpoint,swScope:er.swScope,vapidKey:"string"==typeof er.vapidKey?er.vapidKey:Pt(er.vapidKey)}}}else if(3===tt){const er=Zn;M={token:er.fcmToken,createTime:er.createTime,subscriptionOptions:{auth:Pt(er.auth),p256dh:Pt(er.p256dh),endpoint:er.endpoint,swScope:er.swScope,vapidKey:Pt(er.vapidKey)}}}else if(4===tt){const er=Zn;M={token:er.fcmToken,createTime:er.createTime,subscriptionOptions:{auth:Pt(er.auth),p256dh:Pt(er.p256dh),endpoint:er.endpoint,swScope:er.swScope,vapidKey:Pt(er.vapidKey)}}}}),function(tt,yt,Jt,zt){return _e.apply(this,arguments)})})).close(),yield Ln(On),yield Ln("fcm_vapid_details_db"),yield Ln("undefined"),is(M)?M:null;var _e}),Zr.apply(this,arguments)}function is(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:M}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const Or="firebase-messaging-store";let di=null;function oi(){return di||(di=Tt("firebase-messaging-database",1,{upgrade:(T,M)=>{0===M&&T.createObjectStore(Or)}})),di}function ws(T){return ss.apply(this,arguments)}function ss(){return(ss=(0,S.Z)(function*(T){const M=k(T),_e=yield(yield oi()).transaction(Or).objectStore(Or).get(M);if(_e)return _e;{const He=yield ei(T.appConfig.senderId);if(He)return yield Po(T,He),He}})).apply(this,arguments)}function Po(T,M){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,S.Z)(function*(T,M){const X=k(T),He=(yield oi()).transaction(Or,"readwrite");return yield He.objectStore(Or).put(M,X),yield He.done,M})).apply(this,arguments)}function R(T){return ee.apply(this,arguments)}function ee(){return(ee=(0,S.Z)(function*(T){const M=k(T),_e=(yield oi()).transaction(Or,"readwrite");yield _e.objectStore(Or).delete(M),yield _e.done})).apply(this,arguments)}function k({appConfig:T}){return T.appId}const be=new N.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ut(T,M){return ft.apply(this,arguments)}function ft(){return(ft=(0,S.Z)(function*(T,M){const X=yield E(T),_e=ne(M),He={method:"POST",headers:X,body:JSON.stringify(_e)};let tt;try{tt=yield(yield fetch(y(T.appConfig),He)).json()}catch(yt){throw be.create("token-subscribe-failed",{errorInfo:yt?.toString()})}if(tt.error)throw be.create("token-subscribe-failed",{errorInfo:tt.error.message});if(!tt.token)throw be.create("token-subscribe-no-token");return tt.token})).apply(this,arguments)}function Zt(T,M){return ar.apply(this,arguments)}function ar(){return(ar=(0,S.Z)(function*(T,M){const X=yield E(T),_e=ne(M.subscriptionOptions),He={method:"PATCH",headers:X,body:JSON.stringify(_e)};let tt;try{tt=yield(yield fetch(`${y(T.appConfig)}/${M.token}`,He)).json()}catch(yt){throw be.create("token-update-failed",{errorInfo:yt?.toString()})}if(tt.error)throw be.create("token-update-failed",{errorInfo:tt.error.message});if(!tt.token)throw be.create("token-update-no-token");return tt.token})).apply(this,arguments)}function ur(T,M){return Y.apply(this,arguments)}function Y(){return(Y=(0,S.Z)(function*(T,M){const _e={method:"DELETE",headers:yield E(T)};try{const tt=yield(yield fetch(`${y(T.appConfig)}/${M}`,_e)).json();if(tt.error)throw be.create("token-unsubscribe-failed",{errorInfo:tt.error.message})}catch(He){throw be.create("token-unsubscribe-failed",{errorInfo:He?.toString()})}})).apply(this,arguments)}function y({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function E(T){return F.apply(this,arguments)}function F(){return(F=(0,S.Z)(function*({appConfig:T,installations:M}){const X=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})})).apply(this,arguments)}function ne({p256dh:T,auth:M,endpoint:X,vapidKey:_e}){const He={web:{endpoint:X,auth:M,p256dh:T}};return _e!==q&&(He.web.applicationPubKey=_e),He}const ye=6048e5;function ke(T){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,S.Z)(function*(T){const M=yield Mn(T.swRegistration,T.vapidKey),X={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:M.endpoint,auth:Pt(M.getKey("auth")),p256dh:Pt(M.getKey("p256dh"))},_e=yield ws(T.firebaseDependencies);if(_e){if(jr(_e.subscriptionOptions,X))return Date.now()>=_e.createTime+ye?Ot(T,{token:_e.token,createTime:Date.now(),subscriptionOptions:X}):_e.token;try{yield ur(T.firebaseDependencies,_e.token)}catch(He){console.warn(He)}return qn(T.firebaseDependencies,X)}return qn(T.firebaseDependencies,X)})).apply(this,arguments)}function rt(T){return mt.apply(this,arguments)}function mt(){return(mt=(0,S.Z)(function*(T){const M=yield ws(T.firebaseDependencies);M&&(yield ur(T.firebaseDependencies,M.token),yield R(T.firebaseDependencies));const X=yield T.swRegistration.pushManager.getSubscription();return!X||X.unsubscribe()})).apply(this,arguments)}function Ot(T,M){return nn.apply(this,arguments)}function nn(){return(nn=(0,S.Z)(function*(T,M){try{const X=yield Zt(T.firebaseDependencies,M),_e=Object.assign(Object.assign({},M),{token:X,createTime:Date.now()});return yield Po(T.firebaseDependencies,_e),X}catch(X){throw yield rt(T),X}})).apply(this,arguments)}function qn(T,M){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,S.Z)(function*(T,M){const _e={token:yield ut(T,M),createTime:Date.now(),subscriptionOptions:M};return yield Po(T,_e),_e.token})).apply(this,arguments)}function Mn(T,M){return _n.apply(this,arguments)}function _n(){return(_n=(0,S.Z)(function*(T,M){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bn(M)})})).apply(this,arguments)}function jr(T,M){return M.vapidKey===T.vapidKey&&M.endpoint===T.endpoint&&M.auth===T.auth&&M.p256dh===T.p256dh}function An(T){const M={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Es(T,M){if(!M.notification)return;T.notification={};const X=M.notification.title;X&&(T.notification.title=X);const _e=M.notification.body;_e&&(T.notification.body=_e);const He=M.notification.image;He&&(T.notification.image=He);const tt=M.notification.icon;tt&&(T.notification.icon=tt)}(M,T),function qi(T,M){!M.data||(T.data=M.data)}(M,T),function hi(T,M){var X,_e,He,tt,yt;if(!(M.fcmOptions||null!==(X=M.notification)&&void 0!==X&&X.click_action))return;T.fcmOptions={};const Jt=null!==(He=null===(_e=M.fcmOptions)||void 0===_e?void 0:_e.link)&&void 0!==He?He:null===(tt=M.notification)||void 0===tt?void 0:tt.click_action;Jt&&(T.fcmOptions.link=Jt);const zt=null===(yt=M.fcmOptions)||void 0===yt?void 0:yt.analytics_label;zt&&(T.fcmOptions.analyticsLabel=zt)}(M,T),M}function na(T){return"object"==typeof T&&!!T&&me in T}function Ws(T,M){const X=[];for(let _e=0;_e<T.length;_e++)X.push(T.charAt(_e)),_e<M.length&&X.push(M.charAt(_e));return X.join("")}function Ms(T){return be.create("missing-app-config-values",{valueName:T})}Ws("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ws("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class No{constructor(M,X,_e){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const He=function Ki(T){if(!T||!T.options)throw Ms("App Configuration Object");if(!T.name)throw Ms("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:X}=T;for(const _e of M)if(!X[_e])throw Ms(_e);return{appName:T.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:He,installations:X,analyticsProvider:_e}}_delete(){return Promise.resolve()}}function Hi(T){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,S.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Mo,{scope:_s}),T.swRegistration.update().catch(()=>{})}catch(M){throw be.create("failed-service-worker-registration",{browserErrorMessage:M?.message})}})).apply(this,arguments)}function Ni(T,M){return qs.apply(this,arguments)}function qs(){return(qs=(0,S.Z)(function*(T,M){if(!M&&!T.swRegistration&&(yield Hi(T)),M||!T.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw be.create("invalid-sw-registration");T.swRegistration=M}})).apply(this,arguments)}function Ks(T,M){return wo.apply(this,arguments)}function wo(){return(wo=(0,S.Z)(function*(T,M){M?T.vapidKey=M:T.vapidKey||(T.vapidKey=q)})).apply(this,arguments)}function In(){return(In=(0,S.Z)(function*(T,M){if(!navigator)throw be.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw be.create("permission-blocked");return yield Ks(T,M?.vapidKey),yield Ni(T,M?.serviceWorkerRegistration),ke(T)})).apply(this,arguments)}function on(T,M,X){return lr.apply(this,arguments)}function lr(){return(lr=(0,S.Z)(function*(T,M,X){const _e=ai(M);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(_e,{message_id:X[me],message_name:X[xe],message_time:X[qe],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ai(T){switch(T){case Kt.NOTIFICATION_CLICKED:return"notification_open";case Kt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Xi(){return(Xi=(0,S.Z)(function*(T,M){const X=M.data;if(!X.isFirebaseMessaging)return;T.onMessageHandler&&X.messageType===Kt.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(An(X)):T.onMessageHandler.next(An(X)));const _e=X.data;na(_e)&&"1"===_e[dt]&&(yield on(T,X.messageType,_e))})).apply(this,arguments)}const Zs="@firebase/messaging",Ra=T=>{const M=new No(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>function Ps(T,M){return Xi.apply(this,arguments)}(M,X)),M},Ea=T=>{const M=T.getProvider("messaging").getImmediate();return{getToken:_e=>function cn(T,M){return In.apply(this,arguments)}(M,_e)}};function qo(){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,S.Z)(function*(){try{yield(0,N.eu)()}catch{return!1}return typeof window<"u"&&(0,N.hl)()&&(0,N.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Is(){(0,W._registerComponent)(new O.wA("messaging",Ra,"PUBLIC")),(0,W._registerComponent)(new O.wA("messaging-internal",Ea,"PRIVATE")),(0,W.registerVersion)(Zs,"0.12.4"),(0,W.registerVersion)(Zs,"0.12.4","esm2017")}();const Ar="analytics",wu="firebase_id",Na="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ht="https://www.googletagmanager.com/gtag/js",st=new Z.Yd("@firebase/analytics"),Rr=new N.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Oo(T){if(!T.startsWith(Ht)){const M=Rr.create("invalid-gtag-resource",{gtagURL:T});return st.warn(M.message),""}return T}function ra(T){return Promise.all(T.map(M=>M.catch(X=>X)))}function nu(T,M){const X=function Hu(T,M){let X;return window.trustedTypes&&(X=window.trustedTypes.createPolicy(T,M)),X}("firebase-js-sdk-policy",{createScriptURL:Oo}),_e=document.createElement("script"),He=`${Ht}?l=${T}&id=${M}`;_e.src=X?X?.createScriptURL(He):He,_e.async=!0,document.head.appendChild(_e)}function Eu(T,M,X,_e,He,tt){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,S.Z)(function*(T,M,X,_e,He,tt){const yt=_e[He];try{if(yt)yield M[yt];else{const zt=(yield ra(X)).find(vn=>vn.measurementId===He);zt&&(yield M[zt.appId])}}catch(Jt){st.error(Jt)}T("config",He,tt)})).apply(this,arguments)}function dl(T,M,X,_e,He){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,S.Z)(function*(T,M,X,_e,He){try{let tt=[];if(He&&He.send_to){let yt=He.send_to;Array.isArray(yt)||(yt=[yt]);const Jt=yield ra(X);for(const zt of yt){const vn=Jt.find(er=>er.measurementId===zt),Zn=vn&&M[vn.appId];if(!Zn){tt=[];break}tt.push(Zn)}}0===tt.length&&(tt=Object.values(M)),yield Promise.all(tt),T("event",_e,He||{})}catch(tt){st.error(tt)}})).apply(this,arguments)}function Jn(T){const M=window.document.getElementsByTagName("script");for(const X of Object.values(M))if(X.src&&X.src.includes(Ht)&&X.src.includes(T))return X;return null}const Yt=new class fi{constructor(M={},X=1e3){this.throttleMetadata=M,this.intervalMillis=X}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,X){this.throttleMetadata[M]=X}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Oa(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Ir(T){return fl.apply(this,arguments)}function fl(){return(fl=(0,S.Z)(function*(T){var M;const{appId:X,apiKey:_e}=T,He={method:"GET",headers:Oa(_e)},tt=Na.replace("{app-id}",X),yt=yield fetch(tt,He);if(200!==yt.status&&304!==yt.status){let Jt="";try{const zt=yield yt.json();null!==(M=zt.error)&&void 0!==M&&M.message&&(Jt=zt.error.message)}catch{}throw Rr.create("config-fetch-failed",{httpStatus:yt.status,responseMessage:Jt})}return yt.json()})).apply(this,arguments)}function Qi(T){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,S.Z)(function*(T,M=Yt,X){const{appId:_e,apiKey:He,measurementId:tt}=T.options;if(!_e)throw Rr.create("no-app-id");if(!He){if(tt)return{measurementId:tt,appId:_e};throw Rr.create("no-api-key")}const yt=M.getThrottleMetadata(_e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Jt=new bu;return setTimeout((0,S.Z)(function*(){Jt.abort()}),void 0!==X?X:6e4),Io({appId:_e,apiKey:He,measurementId:tt},yt,Jt,M)})).apply(this,arguments)}function Io(T,M,X){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,S.Z)(function*(T,{throttleEndTimeMillis:M,backoffCount:X},_e,He=Yt){var tt;const{appId:yt,measurementId:Jt}=T;try{yield Ko(_e,M)}catch(zt){if(Jt)return st.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Jt} provided in the "measurementId" field in the local Firebase config. [${zt?.message}]`),{appId:yt,measurementId:Jt};throw zt}try{const zt=yield Ir(T);return He.deleteThrottleMetadata(yt),zt}catch(zt){const vn=zt;if(!ka(vn)){if(He.deleteThrottleMetadata(yt),Jt)return st.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Jt} provided in the "measurementId" field in the local Firebase config. [${vn?.message}]`),{appId:yt,measurementId:Jt};throw zt}const Zn=503===Number(null===(tt=vn?.customData)||void 0===tt?void 0:tt.httpStatus)?(0,N.$s)(X,He.intervalMillis,30):(0,N.$s)(X,He.intervalMillis),er={throttleEndTimeMillis:Date.now()+Zn,backoffCount:X+1};return He.setThrottleMetadata(yt,er),st.debug(`Calling attemptFetch again in ${Zn} millis`),Io(T,er,_e,He)}})).apply(this,arguments)}function Ko(T,M){return new Promise((X,_e)=>{const He=Math.max(M-Date.now(),0),tt=setTimeout(X,He);T.addEventListener(()=>{clearTimeout(tt),_e(Rr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function ka(T){if(!(T instanceof N.ZR&&T.customData))return!1;const M=Number(T.customData.httpStatus);return 429===M||500===M||503===M||504===M}class bu{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let I,Hr;function v(){return(v=(0,S.Z)(function*(T,M,X,_e,He){if(He&&He.global)T("event",X,_e);else{const tt=yield M;T("event",X,Object.assign(Object.assign({},_e),{send_to:tt}))}})).apply(this,arguments)}function Fi(T){Hr=T}function zi(T){I=T}function io(){return as.apply(this,arguments)}function as(){return(as=(0,S.Z)(function*(){if(!(0,N.hl)())return st.warn(Rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,N.eu)()}catch(T){return st.warn(Rr.create("indexeddb-unavailable",{errorInfo:T?.toString()}).message),!1}return!0})).apply(this,arguments)}function fo(){return(fo=(0,S.Z)(function*(T,M,X,_e,He,tt,yt){var Jt;const zt=Qi(T);zt.then(Ns=>{X[Ns.measurementId]=Ns.appId,T.options.measurementId&&Ns.measurementId!==T.options.measurementId&&st.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Ns.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ns=>st.error(Ns)),M.push(zt);const vn=io().then(Ns=>{if(Ns)return _e.getId()}),[Zn,er]=yield Promise.all([zt,vn]);Jn(tt)||nu(tt,Zn.measurementId),Hr&&(He("consent","default",Hr),Fi(void 0)),He("js",new Date);const sa=null!==(Jt=yt?.config)&&void 0!==Jt?Jt:{};return sa.origin="firebase",sa.update=!0,null!=er&&(sa[wu]=er),He("config",Zn.measurementId,sa),I&&(He("set",I),zi(void 0)),Zn.measurementId})).apply(this,arguments)}class bs{constructor(M){this.app=M}_delete(){return delete so[this.app.options.appId],Promise.resolve()}}let so={},ko=[];const Tu={};let us,bo,Wa="dataLayer",pl=!1;function ru(T,M,X){!function Xl(){const T=[];if((0,N.ru)()&&T.push("This is a browser extension environment."),(0,N.zI)()||T.push("Cookies are not available."),T.length>0){const M=T.map((_e,He)=>`(${He+1}) ${_e}`).join(" "),X=Rr.create("invalid-analytics-context",{errorInfo:M});st.warn(X.message)}}();const _e=T.options.appId;if(!_e)throw Rr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Rr.create("no-api-key");st.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=so[_e])throw Rr.create("already-exists",{id:_e});if(!pl){!function vi(T){let M=[];Array.isArray(window[T])?M=window[T]:window[T]=M}(Wa);const{wrappedGtag:tt,gtagCore:yt}=function hl(T,M,X,_e,He){let tt=function(...yt){window[_e].push(arguments)};return window[He]&&"function"==typeof window[He]&&(tt=window[He]),window[He]=function zu(T,M,X,_e){function tt(){return(tt=(0,S.Z)(function*(yt,...Jt){try{if("event"===yt){const[zt,vn]=Jt;yield dl(T,M,X,zt,vn)}else if("config"===yt){const[zt,vn]=Jt;yield Eu(T,M,X,_e,zt,vn)}else if("consent"===yt){const[zt]=Jt;T("consent","update",zt)}else if("get"===yt){const[zt,vn,Zn]=Jt;T("get",zt,vn,Zn)}else if("set"===yt){const[zt]=Jt;T("set",zt)}else T(yt,...Jt)}catch(zt){st.error(zt)}})).apply(this,arguments)}return function He(yt){return tt.apply(this,arguments)}}(tt,T,M,X),{gtagCore:tt,wrappedGtag:window[He]}}(so,ko,Tu,Wa,"gtag");bo=tt,us=yt,pl=!0}return so[_e]=function ga(T,M,X,_e,He,tt,yt){return fo.apply(this,arguments)}(T,ko,Tu,M,us,Wa,X),new bs(T)}function tc(){return nc.apply(this,arguments)}function nc(){return(nc=(0,S.Z)(function*(){if((0,N.ru)()||!(0,N.zI)()||!(0,N.hl)())return!1;try{return yield(0,N.eu)()}catch{return!1}})).apply(this,arguments)}const yl="@firebase/analytics";!function Zd(){(0,W._registerComponent)(new O.wA(Ar,(M,{options:X})=>ru(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,W._registerComponent)(new O.wA("analytics-internal",function T(M){try{const X=M.getProvider(Ar).getImmediate();return{logEvent:(_e,He,tt)=>function ou(T,M,X,_e){T=(0,N.m9)(T),function b(T,M,X,_e,He){return v.apply(this,arguments)}(bo,so[T.app.options.appId],M,X,_e).catch(He=>st.error(He))}(X,_e,He,tt)}}catch(X){throw Rr.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,W.registerVersion)(yl,"0.10.0"),(0,W.registerVersion)(yl,"0.10.0","esm2017")}();var La=H(4408),Zc=H(7565);const Qc=new class ic extends Zc.v{}(class Gu extends La.o{constructor(M,X){super(M,X),this.scheduler=M,this.work=X}schedule(M,X=0){return X>0?super.schedule(M,X):(this.delay=X,this.state=M,this.scheduler.flush(this),this)}execute(M,X){return X>0||this.closed?super.execute(M,X):this._execute(M,X)}requestAsyncId(M,X,_e=0){return null!=_e&&_e>0||null==_e&&this.delay>0?super.requestAsyncId(M,X,_e):(M.flush(this),0)}});var Ls=H(4986),Jc=H(8505),ma=H(5363),Wu=H(9468);const pi=new m.GfV("7.4.1"),qa="__angularfire_symbol__analyticsIsSupportedValue",Ts="__angularfire_symbol__analyticsIsSupported",Si="__angularfire_symbol__remoteConfigIsSupportedValue",vl="__angularfire_symbol__remoteConfigIsSupported",Ia="__angularfire_symbol__messagingIsSupportedValue",po="__angularfire_symbol__messagingIsSupported";function ba(T,M,X){if(M){if(1===M.length)return M[0];const tt=M.filter(yt=>yt.app===X);if(1===tt.length)return tt[0]}return X.container.getProvider(T).getImmediate({optional:!0})}globalThis[Ts]||(globalThis[Ts]=tc().then(T=>globalThis[qa]=T).catch(()=>globalThis[qa]=!1)),globalThis[po]||(globalThis[po]=qo().then(T=>globalThis[Ia]=T).catch(()=>globalThis[Ia]=!1)),globalThis[vl]||(globalThis[vl]=$i().then(T=>globalThis[Si]=T).catch(()=>globalThis[Si]=!1));const Oi=(T,M)=>{const X=M?[M]:(0,x.C6)(),_e=[];return X.forEach(He=>{He.container.getProvider(T).instances.forEach(yt=>{_e.includes(yt)||_e.push(yt)})}),_e};function go(){}class qu{constructor(M,X=Qc){this.zone=M,this.delegate=X}now(){return this.delegate.now()}schedule(M,X,_e){const He=this.zone;return this.delegate.schedule(function(yt){He.runGuarded(()=>{M.apply(this,[yt])})},X,_e)}}class oc{constructor(M){this.zone=M,this.task=null}call(M,X){const _e=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",go,{},go,go)),X.pipe((0,Jc.b)({next:_e,complete:_e,error:_e})).subscribe(M).add(_e)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fa=(()=>{class T{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new qu(Zone.current)),this.insideAngular=X.run(()=>new qu(Zone.current,Ls.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(X){return new(X||T)(m.LFG(m.R0b))},T.\u0275prov=m.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Ua(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Ku(T){return T.pipe((0,ma.Q)(Ua().outsideAngular))}function ya(T){return Ua(),function Zu(T){return function(X){return(X=X.lift(new oc(T.ngZone))).pipe((0,Wu.R)(T.outsideAngular),(0,ma.Q)(T.insideAngular))}}(Ua())(T)}},2090:($t,Re,H)=>{"use strict";H.d(Re,{$s:()=>Pr,BH:()=>ce,G6:()=>Pn,L:()=>V,LL:()=>Vt,Pz:()=>te,Sg:()=>Qe,UG:()=>Pe,US:()=>O,ZB:()=>$,ZR:()=>en,aH:()=>fe,b$:()=>at,eu:()=>Dt,hl:()=>Cn,jU:()=>Ie,m9:()=>ii,ne:()=>Vn,pd:()=>li,r3:()=>Rn,ru:()=>Me,tV:()=>B,uI:()=>Le,vZ:()=>cr,w1:()=>wt,xO:()=>Cs,xb:()=>zr,z$:()=>Ye,zI:()=>kn,zd:()=>Ai});const W=function(Oe){const Se=[];let je=0;for(let lt=0;lt<Oe.length;lt++){let Je=Oe.charCodeAt(lt);Je<128?Se[je++]=Je:Je<2048?(Se[je++]=Je>>6|192,Se[je++]=63&Je|128):55296==(64512&Je)&&lt+1<Oe.length&&56320==(64512&Oe.charCodeAt(lt+1))?(Je=65536+((1023&Je)<<10)+(1023&Oe.charCodeAt(++lt)),Se[je++]=Je>>18|240,Se[je++]=Je>>12&63|128,Se[je++]=Je>>6&63|128,Se[je++]=63&Je|128):(Se[je++]=Je>>12|224,Se[je++]=Je>>6&63|128,Se[je++]=63&Je|128)}return Se},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Oe,Se){if(!Array.isArray(Oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const je=Se?this.byteToCharMapWebSafe_:this.byteToCharMap_,lt=[];for(let Je=0;Je<Oe.length;Je+=3){const Rt=Oe[Je],gn=Je+1<Oe.length,xn=gn?Oe[Je+1]:0,nr=Je+2<Oe.length,De=nr?Oe[Je+2]:0;let Ge=(15&xn)<<2|De>>6,ht=63&De;nr||(ht=64,gn||(Ge=64)),lt.push(je[Rt>>2],je[(3&Rt)<<4|xn>>4],je[Ge],je[ht])}return lt.join("")},encodeString(Oe,Se){return this.HAS_NATIVE_SUPPORT&&!Se?btoa(Oe):this.encodeByteArray(W(Oe),Se)},decodeString(Oe,Se){return this.HAS_NATIVE_SUPPORT&&!Se?atob(Oe):function(Oe){const Se=[];let je=0,lt=0;for(;je<Oe.length;){const Je=Oe[je++];if(Je<128)Se[lt++]=String.fromCharCode(Je);else if(Je>191&&Je<224){const Rt=Oe[je++];Se[lt++]=String.fromCharCode((31&Je)<<6|63&Rt)}else if(Je>239&&Je<365){const nr=((7&Je)<<18|(63&Oe[je++])<<12|(63&Oe[je++])<<6|63&Oe[je++])-65536;Se[lt++]=String.fromCharCode(55296+(nr>>10)),Se[lt++]=String.fromCharCode(56320+(1023&nr))}else{const Rt=Oe[je++],gn=Oe[je++];Se[lt++]=String.fromCharCode((15&Je)<<12|(63&Rt)<<6|63&gn)}}return Se.join("")}(this.decodeStringToByteArray(Oe,Se))},decodeStringToByteArray(Oe,Se){this.init_();const je=Se?this.charToByteMapWebSafe_:this.charToByteMap_,lt=[];for(let Je=0;Je<Oe.length;){const Rt=je[Oe.charAt(Je++)],xn=Je<Oe.length?je[Oe.charAt(Je)]:0;++Je;const De=Je<Oe.length?je[Oe.charAt(Je)]:64;++Je;const ge=Je<Oe.length?je[Oe.charAt(Je)]:64;if(++Je,null==Rt||null==xn||null==De||null==ge)throw new Z;lt.push(Rt<<2|xn>>4),64!==De&&(lt.push(xn<<4&240|De>>2),64!==ge&&lt.push(De<<6&192|ge))}return lt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Oe=0;Oe<this.ENCODED_VALS.length;Oe++)this.byteToCharMap_[Oe]=this.ENCODED_VALS.charAt(Oe),this.charToByteMap_[this.byteToCharMap_[Oe]]=Oe,this.byteToCharMapWebSafe_[Oe]=this.ENCODED_VALS_WEBSAFE.charAt(Oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Oe]]=Oe,Oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Oe)]=Oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Oe)]=Oe)}}};class Z extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V=function(Oe){return function(Oe){const Se=W(Oe);return O.encodeByteArray(Se,!0)}(Oe).replace(/\./g,"")},B=function(Oe){try{return O.decodeString(Oe,!0)}catch(Se){console.error("base64Decode failed: ",Se)}return null};function $(Oe,Se){if(!(Se instanceof Object))return Se;switch(Se.constructor){case Date:return new Date(Se.getTime());case Object:void 0===Oe&&(Oe={});break;case Array:Oe=[];break;default:return Se}for(const je in Se)!Se.hasOwnProperty(je)||!de(je)||(Oe[je]=$(Oe[je],Se[je]));return Oe}function de(Oe){return"__proto__"!==Oe}const he=()=>{try{return function oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Oe=process.env.__FIREBASE_DEFAULTS__;return Oe?JSON.parse(Oe):void 0})()||(()=>{if(typeof document>"u")return;let Oe;try{Oe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Se=Oe&&B(Oe[1]);return Se&&JSON.parse(Se)})()}catch(Oe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Oe}`)}},fe=()=>{var Oe;return null===(Oe=he())||void 0===Oe?void 0:Oe.config},te=Oe=>{var Se;return null===(Se=he())||void 0===Se?void 0:Se[`_${Oe}`]};class ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Se,je)=>{this.resolve=Se,this.reject=je})}wrapCallback(Se){return(je,lt)=>{je?this.reject(je):this.resolve(lt),"function"==typeof Se&&(this.promise.catch(()=>{}),1===Se.length?Se(je):Se(je,lt))}}}function Qe(Oe,Se){if(Oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const lt=Se||"demo-project",Je=Oe.iat||0,Rt=Oe.sub||Oe.user_id;if(!Rt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gn=Object.assign({iss:`https://securetoken.google.com/${lt}`,aud:lt,iat:Je,exp:Je+3600,auth_time:Je,sub:Rt,user_id:Rt,firebase:{sign_in_provider:"custom",identities:{}}},Oe);return[V(JSON.stringify({alg:"none",type:"JWT"})),V(JSON.stringify(gn)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function Pe(){var Oe;const Se=null===(Oe=he())||void 0===Oe?void 0:Oe.forceEnvironment;if("node"===Se)return!0;if("browser"===Se)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ie(){return"object"==typeof self&&self.self===self}function Me(){const Oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Oe&&void 0!==Oe.id}function at(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wt(){const Oe=Ye();return Oe.indexOf("MSIE ")>=0||Oe.indexOf("Trident/")>=0}function Pn(){return!Pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cn(){try{return"object"==typeof indexedDB}catch{return!1}}function Dt(){return new Promise((Oe,Se)=>{try{let je=!0;const lt="validate-browser-context-for-indexeddb-analytics-module",Je=self.indexedDB.open(lt);Je.onsuccess=()=>{Je.result.close(),je||self.indexedDB.deleteDatabase(lt),Oe(!0)},Je.onupgradeneeded=()=>{je=!1},Je.onerror=()=>{var Rt;Se((null===(Rt=Je.error)||void 0===Rt?void 0:Rt.message)||"")}}catch(je){Se(je)}})}function kn(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class en extends Error{constructor(Se,je,lt){super(je),this.code=Se,this.customData=lt,this.name="FirebaseError",Object.setPrototypeOf(this,en.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vt.prototype.create)}}class Vt{constructor(Se,je,lt){this.service=Se,this.serviceName=je,this.errors=lt}create(Se,...je){const lt=je[0]||{},Je=`${this.service}/${Se}`,Rt=this.errors[Se],gn=Rt?function sr(Oe,Se){return Oe.replace(Lt,(je,lt)=>{const Je=Se[lt];return null!=Je?String(Je):`<${lt}?>`})}(Rt,lt):"Error";return new en(Je,`${this.serviceName}: ${gn} (${Je}).`,lt)}}const Lt=/\{\$([^}]+)}/g;function Rn(Oe,Se){return Object.prototype.hasOwnProperty.call(Oe,Se)}function zr(Oe){for(const Se in Oe)if(Object.prototype.hasOwnProperty.call(Oe,Se))return!1;return!0}function cr(Oe,Se){if(Oe===Se)return!0;const je=Object.keys(Oe),lt=Object.keys(Se);for(const Je of je){if(!lt.includes(Je))return!1;const Rt=Oe[Je],gn=Se[Je];if(Gr(Rt)&&Gr(gn)){if(!cr(Rt,gn))return!1}else if(Rt!==gn)return!1}for(const Je of lt)if(!je.includes(Je))return!1;return!0}function Gr(Oe){return null!==Oe&&"object"==typeof Oe}function Cs(Oe){const Se=[];for(const[je,lt]of Object.entries(Oe))Array.isArray(lt)?lt.forEach(Je=>{Se.push(encodeURIComponent(je)+"="+encodeURIComponent(Je))}):Se.push(encodeURIComponent(je)+"="+encodeURIComponent(lt));return Se.length?"&"+Se.join("&"):""}function Ai(Oe){const Se={};return Oe.replace(/^\?/,"").split("&").forEach(lt=>{if(lt){const[Je,Rt]=lt.split("=");Se[decodeURIComponent(Je)]=decodeURIComponent(Rt)}}),Se}function li(Oe){const Se=Oe.indexOf("?");if(!Se)return"";const je=Oe.indexOf("#",Se);return Oe.substring(Se,je>0?je:void 0)}function Vn(Oe,Se){const je=new Wt(Oe,Se);return je.subscribe.bind(je)}class Wt{constructor(Se,je){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=je,this.task.then(()=>{Se(this)}).catch(lt=>{this.error(lt)})}next(Se){this.forEachObserver(je=>{je.next(Se)})}error(Se){this.forEachObserver(je=>{je.error(Se)}),this.close(Se)}complete(){this.forEachObserver(Se=>{Se.complete()}),this.close()}subscribe(Se,je,lt){let Je;if(void 0===Se&&void 0===je&&void 0===lt)throw new Error("Missing Observer.");Je=function gr(Oe,Se){if("object"!=typeof Oe||null===Oe)return!1;for(const je of Se)if(je in Oe&&"function"==typeof Oe[je])return!0;return!1}(Se,["next","error","complete"])?Se:{next:Se,error:je,complete:lt},void 0===Je.next&&(Je.next=ni),void 0===Je.error&&(Je.error=ni),void 0===Je.complete&&(Je.complete=ni);const Rt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Je.error(this.finalError):Je.complete()}catch{}}),this.observers.push(Je),Rt}unsubscribeOne(Se){void 0===this.observers||void 0===this.observers[Se]||(delete this.observers[Se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Se){if(!this.finalized)for(let je=0;je<this.observers.length;je++)this.sendOne(je,Se)}sendOne(Se,je){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Se])try{je(this.observers[Se])}catch(lt){typeof console<"u"&&console.error&&console.error(lt)}})}close(Se){this.finalized||(this.finalized=!0,void 0!==Se&&(this.finalError=Se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ni(){}function Pr(Oe,Se=1e3,je=2){const lt=Se*Math.pow(je,Oe),Je=Math.round(.5*lt*(Math.random()-.5)*2);return Math.min(144e5,lt+Je)}function ii(Oe){return Oe&&Oe._delegate?Oe._delegate:Oe}},4662:($t,Re,H)=>{"use strict";var m=H(1481),x=H(4650),S=H(7340);function N(Y){return new x.vHH(3e3,!1)}function sr(){return typeof window<"u"&&typeof window.document<"u"}function Lt(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function hr(Y){switch(Y.length){case 0:return new S.ZN;case 1:return Y[0];default:return new S.ZE(Y)}}function Xn(Y,y,E,F,ne=new Map,ye=new Map){const ke=[],Fe=[];let rt=-1,mt=null;if(F.forEach(Ot=>{const nn=Ot.get("offset"),qn=nn==rt,Sn=qn&&mt||new Map;Ot.forEach((Mn,_n)=>{let jr=_n,An=Mn;if("offset"!==_n)switch(jr=y.normalizePropertyName(jr,ke),An){case S.k1:An=ne.get(_n);break;case S.l3:An=ye.get(_n);break;default:An=y.normalizeStyleValue(_n,jr,An,ke)}Sn.set(jr,An)}),qn||Fe.push(Sn),mt=Sn,rt=nn}),ke.length)throw function Me(Y){return new x.vHH(3502,!1)}();return Fe}function fr(Y,y,E,F){switch(y){case"start":Y.onStart(()=>F(E&&mi(E,"start",Y)));break;case"done":Y.onDone(()=>F(E&&mi(E,"done",Y)));break;case"destroy":Y.onDestroy(()=>F(E&&mi(E,"destroy",Y)))}}function mi(Y,y,E){const ye=Bi(Y.element,Y.triggerName,Y.fromState,Y.toState,y||Y.phaseName,E.totalTime??Y.totalTime,!!E.disabled),ke=Y._data;return null!=ke&&(ye._data=ke),ye}function Bi(Y,y,E,F,ne="",ye=0,ke){return{element:Y,triggerName:y,fromState:E,toState:F,phaseName:ne,totalTime:ye,disabled:!!ke}}function Bn(Y,y,E){let F=Y.get(y);return F||Y.set(y,F=E),F}function Lr(Y){const y=Y.indexOf(":");return[Y.substring(1,y),Y.slice(y+1)]}let Rn=(Y,y)=>!1,Qr=(Y,y,E)=>[],zr=null;function Nt(Y){const y=Y.parentNode||Y.host;return y===zr?null:y}(Lt()||typeof Element<"u")&&(sr()?(zr=(()=>document.documentElement)(),Rn=(Y,y)=>{for(;y;){if(y===Y)return!0;y=Nt(y)}return!1}):Rn=(Y,y)=>Y.contains(y),Qr=(Y,y,E)=>{if(E)return Array.from(Y.querySelectorAll(y));const F=Y.querySelector(y);return F?[F]:[]});let Wr=null,Cs=!1;const Vn=Rn,Wt=Qr;let gr=(()=>{class Y{validateStyleProperty(E){return function Ai(Y){Wr||(Wr=function pr(){return typeof document<"u"?document.body:null}()||{},Cs=!!Wr.style&&"WebkitAppearance"in Wr.style);let y=!0;return Wr.style&&!function Gr(Y){return"ebkit"==Y.substring(1,6)}(Y)&&(y=Y in Wr.style,!y&&Cs&&(y="Webkit"+Y.charAt(0).toUpperCase()+Y.slice(1)in Wr.style)),y}(E)}matchesElement(E,F){return!1}containsElement(E,F){return Vn(E,F)}getParentElement(E){return Nt(E)}query(E,F,ne){return Wt(E,F,ne)}computeStyle(E,F,ne){return ne||""}animate(E,F,ne,ye,ke,Fe=[],rt){return new S.ZN(ne,ye)}}return Y.\u0275fac=function(E){return new(E||Y)},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})(),ni=(()=>{class Y{}return Y.NOOP=new gr,Y})();const Dr="ng-enter",Nn="ng-leave",xi="ng-trigger",Gn=".ng-trigger",Fr="ng-animating",qr=".ng-animating";function Ur(Y){if("number"==typeof Y)return Y;const y=Y.match(/^(-?[\.\d]+)(m?s)/);return!y||y.length<2?0:Er(parseFloat(y[1]),y[2])}function Er(Y,y){return"s"===y?1e3*Y:Y}function Br(Y,y,E){return Y.hasOwnProperty("duration")?Y:function Pr(Y,y,E){let ne,ye=0,ke="";if("string"==typeof Y){const Fe=Y.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Fe)return y.push(N()),{duration:0,delay:0,easing:""};ne=Er(parseFloat(Fe[1]),Fe[2]);const rt=Fe[3];null!=rt&&(ye=Er(parseFloat(rt),Fe[4]));const mt=Fe[5];mt&&(ke=mt)}else ne=Y;if(!E){let Fe=!1,rt=y.length;ne<0&&(y.push(function O(){return new x.vHH(3100,!1)}()),Fe=!0),ye<0&&(y.push(function Z(){return new x.vHH(3101,!1)}()),Fe=!0),Fe&&y.splice(rt,0,N())}return{duration:ne,delay:ye,easing:ke}}(Y,y,E)}function mr(Y,y={}){return Object.keys(Y).forEach(E=>{y[E]=Y[E]}),y}function ri(Y){const y=new Map;return Object.keys(Y).forEach(E=>{y.set(E,Y[E])}),y}function Se(Y,y=new Map,E){if(E)for(let[F,ne]of E)y.set(F,ne);for(let[F,ne]of Y)y.set(F,ne);return y}function je(Y,y,E){return E?y+":"+E+";":""}function lt(Y){let y="";for(let E=0;E<Y.style.length;E++){const F=Y.style.item(E);y+=je(0,F,Y.style.getPropertyValue(F))}for(const E in Y.style)Y.style.hasOwnProperty(E)&&!E.startsWith("_")&&(y+=je(0,Mt(E),Y.style[E]));Y.setAttribute("style",y)}function Je(Y,y,E){Y.style&&(y.forEach((F,ne)=>{const ye=ht(ne);E&&!E.has(ne)&&E.set(ne,Y.style[ye]),Y.style[ye]=F}),Lt()&&lt(Y))}function Rt(Y,y){Y.style&&(y.forEach((E,F)=>{const ne=ht(F);Y.style[ne]=""}),Lt()&&lt(Y))}function gn(Y){return Array.isArray(Y)?1==Y.length?Y[0]:(0,S.vP)(Y):Y}const nr=new RegExp("{{\\s*(.+?)\\s*}}","g");function De(Y){let y=[];if("string"==typeof Y){let E;for(;E=nr.exec(Y);)y.push(E[1]);nr.lastIndex=0}return y}function Te(Y,y,E){const F=Y.toString(),ne=F.replace(nr,(ye,ke)=>{let Fe=y[ke];return null==Fe&&(E.push(function V(Y){return new x.vHH(3003,!1)}()),Fe=""),Fe.toString()});return ne==F?Y:ne}function ge(Y){const y=[];let E=Y.next();for(;!E.done;)y.push(E.value),E=Y.next();return y}const Ge=/-+([a-z0-9])/g;function ht(Y){return Y.replace(Ge,(...y)=>y[1].toUpperCase())}function Mt(Y){return Y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ke(Y,y,E){switch(y.type){case 7:return Y.visitTrigger(y,E);case 0:return Y.visitState(y,E);case 1:return Y.visitTransition(y,E);case 2:return Y.visitSequence(y,E);case 3:return Y.visitGroup(y,E);case 4:return Y.visitAnimate(y,E);case 5:return Y.visitKeyframes(y,E);case 6:return Y.visitStyle(y,E);case 8:return Y.visitReference(y,E);case 9:return Y.visitAnimateChild(y,E);case 10:return Y.visitAnimateRef(y,E);case 11:return Y.visitQuery(y,E);case 12:return Y.visitStagger(y,E);default:throw function B(Y){return new x.vHH(3004,!1)}()}}function It(Y,y){return window.getComputedStyle(Y)[y]}function ts(Y,y){const E=[];return"string"==typeof Y?Y.split(/\s*,\s*/).forEach(F=>function Bs(Y,y,E){if(":"==Y[0]){const rt=function Js(Y,y){switch(Y){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(E,F)=>parseFloat(F)>parseFloat(E);case":decrement":return(E,F)=>parseFloat(F)<parseFloat(E);default:return y.push(function Ye(Y){return new x.vHH(3016,!1)}()),"* => *"}}(Y,E);if("function"==typeof rt)return void y.push(rt);Y=rt}const F=Y.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==F||F.length<4)return E.push(function Qe(Y){return new x.vHH(3015,!1)}()),y;const ne=F[1],ye=F[2],ke=F[3];y.push(Ss(ne,ke));"<"==ye[0]&&!("*"==ne&&"*"==ke)&&y.push(Ss(ke,ne))}(F,E,y)):E.push(Y),E}const or=new Set(["true","1"]),ci=new Set(["false","0"]);function Ss(Y,y){const E=or.has(Y)||ci.has(Y),F=or.has(y)||ci.has(y);return(ne,ye)=>{let ke="*"==Y||Y==ne,Fe="*"==y||y==ye;return!ke&&E&&"boolean"==typeof ne&&(ke=ne?or.has(Y):ci.has(Y)),!Fe&&F&&"boolean"==typeof ye&&(Fe=ye?or.has(y):ci.has(y)),ke&&Fe}}const uo=new RegExp("s*:selfs*,?","g");function yr(Y,y,E,F){return new ps(Y).build(y,E,F)}class ps{constructor(y){this._driver=y}build(y,E,F){const ne=new br(E);return this._resetContextStyleTimingState(ne),Ke(this,gn(y),ne)}_resetContextStyleTimingState(y){y.currentQuerySelector="",y.collectedStyles=new Map,y.collectedStyles.set("",new Map),y.currentTime=0}visitTrigger(y,E){let F=E.queryCount=0,ne=E.depCount=0;const ye=[],ke=[];return"@"==y.name.charAt(0)&&E.errors.push(function $(){return new x.vHH(3006,!1)}()),y.definitions.forEach(Fe=>{if(this._resetContextStyleTimingState(E),0==Fe.type){const rt=Fe,mt=rt.name;mt.toString().split(/\s*,\s*/).forEach(Ot=>{rt.name=Ot,ye.push(this.visitState(rt,E))}),rt.name=mt}else if(1==Fe.type){const rt=this.visitTransition(Fe,E);F+=rt.queryCount,ne+=rt.depCount,ke.push(rt)}else E.errors.push(function de(){return new x.vHH(3007,!1)}())}),{type:7,name:y.name,states:ye,transitions:ke,queryCount:F,depCount:ne,options:null}}visitState(y,E){const F=this.visitStyle(y.styles,E),ne=y.options&&y.options.params||null;if(F.containsDynamicStyles){const ye=new Set,ke=ne||{};F.styles.forEach(Fe=>{Fe instanceof Map&&Fe.forEach(rt=>{De(rt).forEach(mt=>{ke.hasOwnProperty(mt)||ye.add(mt)})})}),ye.size&&(ge(ye.values()),E.errors.push(function oe(Y,y){return new x.vHH(3008,!1)}()))}return{type:0,name:y.name,style:F,options:ne?{params:ne}:null}}visitTransition(y,E){E.queryCount=0,E.depCount=0;const F=Ke(this,gn(y.animation),E);return{type:1,matchers:ts(y.expr,E.errors),animation:F,queryCount:E.queryCount,depCount:E.depCount,options:Ri(y.options)}}visitSequence(y,E){return{type:2,steps:y.steps.map(F=>Ke(this,F,E)),options:Ri(y.options)}}visitGroup(y,E){const F=E.currentTime;let ne=0;const ye=y.steps.map(ke=>{E.currentTime=F;const Fe=Ke(this,ke,E);return ne=Math.max(ne,E.currentTime),Fe});return E.currentTime=ne,{type:3,steps:ye,options:Ri(y.options)}}visitAnimate(y,E){const F=function Vs(Y,y){if(Y.hasOwnProperty("duration"))return Y;if("number"==typeof Y)return ns(Br(Y,y).duration,0,"");const E=Y;if(E.split(/\s+/).some(ye=>"{"==ye.charAt(0)&&"{"==ye.charAt(1))){const ye=ns(0,0,"");return ye.dynamic=!0,ye.strValue=E,ye}const ne=Br(E,y);return ns(ne.duration,ne.delay,ne.easing)}(y.timings,E.errors);E.currentAnimateTimings=F;let ne,ye=y.styles?y.styles:(0,S.oB)({});if(5==ye.type)ne=this.visitKeyframes(ye,E);else{let ke=y.styles,Fe=!1;if(!ke){Fe=!0;const mt={};F.easing&&(mt.easing=F.easing),ke=(0,S.oB)(mt)}E.currentTime+=F.duration+F.delay;const rt=this.visitStyle(ke,E);rt.isEmptyStep=Fe,ne=rt}return E.currentAnimateTimings=null,{type:4,timings:F,style:ne,options:null}}visitStyle(y,E){const F=this._makeStyleAst(y,E);return this._validateStyleAst(F,E),F}_makeStyleAst(y,E){const F=[],ne=Array.isArray(y.styles)?y.styles:[y.styles];for(let Fe of ne)"string"==typeof Fe?Fe===S.l3?F.push(Fe):E.errors.push(new x.vHH(3002,!1)):F.push(ri(Fe));let ye=!1,ke=null;return F.forEach(Fe=>{if(Fe instanceof Map&&(Fe.has("easing")&&(ke=Fe.get("easing"),Fe.delete("easing")),!ye))for(let rt of Fe.values())if(rt.toString().indexOf("{{")>=0){ye=!0;break}}),{type:6,styles:F,easing:ke,offset:y.offset,containsDynamicStyles:ye,options:null}}_validateStyleAst(y,E){const F=E.currentAnimateTimings;let ne=E.currentTime,ye=E.currentTime;F&&ye>0&&(ye-=F.duration+F.delay),y.styles.forEach(ke=>{"string"!=typeof ke&&ke.forEach((Fe,rt)=>{const mt=E.collectedStyles.get(E.currentQuerySelector),Ot=mt.get(rt);let nn=!0;Ot&&(ye!=ne&&ye>=Ot.startTime&&ne<=Ot.endTime&&(E.errors.push(function ve(Y,y,E,F,ne){return new x.vHH(3010,!1)}()),nn=!1),ye=Ot.startTime),nn&&mt.set(rt,{startTime:ye,endTime:ne}),E.options&&function xn(Y,y,E){const F=y.params||{},ne=De(Y);ne.length&&ne.forEach(ye=>{F.hasOwnProperty(ye)||E.push(function K(Y){return new x.vHH(3001,!1)}())})}(Fe,E.options,E.errors)})})}visitKeyframes(y,E){const F={type:5,styles:[],options:null};if(!E.currentAnimateTimings)return E.errors.push(function he(){return new x.vHH(3011,!1)}()),F;let ye=0;const ke=[];let Fe=!1,rt=!1,mt=0;const Ot=y.steps.map(An=>{const Es=this._makeStyleAst(An,E);let qi=null!=Es.offset?Es.offset:function Kr(Y){if("string"==typeof Y)return null;let y=null;if(Array.isArray(Y))Y.forEach(E=>{if(E instanceof Map&&E.has("offset")){const F=E;y=parseFloat(F.get("offset")),F.delete("offset")}});else if(Y instanceof Map&&Y.has("offset")){const E=Y;y=parseFloat(E.get("offset")),E.delete("offset")}return y}(Es.styles),hi=0;return null!=qi&&(ye++,hi=Es.offset=qi),rt=rt||hi<0||hi>1,Fe=Fe||hi<mt,mt=hi,ke.push(hi),Es});rt&&E.errors.push(function ae(){return new x.vHH(3012,!1)}()),Fe&&E.errors.push(function Ve(){return new x.vHH(3200,!1)}());const nn=y.steps.length;let qn=0;ye>0&&ye<nn?E.errors.push(function fe(){return new x.vHH(3202,!1)}()):0==ye&&(qn=1/(nn-1));const Sn=nn-1,Mn=E.currentTime,_n=E.currentAnimateTimings,jr=_n.duration;return Ot.forEach((An,Es)=>{const qi=qn>0?Es==Sn?1:qn*Es:ke[Es],hi=qi*jr;E.currentTime=Mn+_n.delay+hi,_n.duration=hi,this._validateStyleAst(An,E),An.offset=qi,F.styles.push(An)}),F}visitReference(y,E){return{type:8,animation:Ke(this,gn(y.animation),E),options:Ri(y.options)}}visitAnimateChild(y,E){return E.depCount++,{type:9,options:Ri(y.options)}}visitAnimateRef(y,E){return{type:10,animation:this.visitReference(y.animation,E),options:Ri(y.options)}}visitQuery(y,E){const F=E.currentQuerySelector,ne=y.options||{};E.queryCount++,E.currentQuery=y;const[ye,ke]=function Un(Y){const y=!!Y.split(/\s*,\s*/).find(E=>":self"==E);return y&&(Y=Y.replace(uo,"")),Y=Y.replace(/@\*/g,Gn).replace(/@\w+/g,E=>Gn+"-"+E.slice(1)).replace(/:animating/g,qr),[Y,y]}(y.selector);E.currentQuerySelector=F.length?F+" "+ye:ye,Bn(E.collectedStyles,E.currentQuerySelector,new Map);const Fe=Ke(this,gn(y.animation),E);return E.currentQuery=null,E.currentQuerySelector=F,{type:11,selector:ye,limit:ne.limit||0,optional:!!ne.optional,includeSelf:ke,animation:Fe,originalSelector:y.selector,options:Ri(y.options)}}visitStagger(y,E){E.currentQuery||E.errors.push(function te(){return new x.vHH(3013,!1)}());const F="full"===y.timings?{duration:0,delay:0,easing:"full"}:Br(y.timings,E.errors,!0);return{type:12,animation:Ke(this,gn(y.animation),E),timings:F,options:null}}}class br{constructor(y){this.errors=y,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ri(Y){return Y?(Y=mr(Y)).params&&(Y.params=function Xs(Y){return Y?mr(Y):null}(Y.params)):Y={},Y}function ns(Y,y,E){return{duration:Y,delay:y,easing:E}}function Nr(Y,y,E,F,ne,ye,ke=null,Fe=!1){return{type:1,element:Y,keyframes:y,preStyleProps:E,postStyleProps:F,duration:ne,delay:ye,totalTime:ne+ye,easing:ke,subTimeline:Fe}}class As{constructor(){this._map=new Map}get(y){return this._map.get(y)||[]}append(y,E){let F=this._map.get(y);F||this._map.set(y,F=[]),F.push(...E)}has(y){return this._map.has(y)}clear(){this._map.clear()}}const Li=new RegExp(":enter","g"),rr=new RegExp(":leave","g");function lo(Y,y,E,F,ne,ye=new Map,ke=new Map,Fe,rt,mt=[]){return(new zo).buildKeyframes(Y,y,E,F,ne,ye,ke,Fe,rt,mt)}class zo{buildKeyframes(y,E,F,ne,ye,ke,Fe,rt,mt,Ot=[]){mt=mt||new As;const nn=new Ze(y,E,mt,ne,ye,Ot,[]);nn.options=rt;const qn=rt.delay?Ur(rt.delay):0;nn.currentTimeline.delayNextStep(qn),nn.currentTimeline.setStyles([ke],null,nn.errors,rt),Ke(this,F,nn);const Sn=nn.timelines.filter(Mn=>Mn.containsAnimation());if(Sn.length&&Fe.size){let Mn;for(let _n=Sn.length-1;_n>=0;_n--){const jr=Sn[_n];if(jr.element===E){Mn=jr;break}}Mn&&!Mn.allowOnlyTimelineStyles()&&Mn.setStyles([Fe],null,nn.errors,rt)}return Sn.length?Sn.map(Mn=>Mn.buildKeyframes()):[Nr(E,[],[],[],0,qn,"",!1)]}visitTrigger(y,E){}visitState(y,E){}visitTransition(y,E){}visitAnimateChild(y,E){const F=E.subInstructions.get(E.element);if(F){const ne=E.createSubContext(y.options),ye=E.currentTimeline.currentTime,ke=this._visitSubInstructions(F,ne,ne.options);ye!=ke&&E.transformIntoNewTimeline(ke)}E.previousNode=y}visitAnimateRef(y,E){const F=E.createSubContext(y.options);F.transformIntoNewTimeline(),this._applyAnimationRefDelays([y.options,y.animation.options],E,F),this.visitReference(y.animation,F),E.transformIntoNewTimeline(F.currentTimeline.currentTime),E.previousNode=y}_applyAnimationRefDelays(y,E,F){for(const ye of y){const ke=ye?.delay;if(ke){var ne;const Fe="number"==typeof ke?ke:Ur(Te(ke,null!==(ne=ye?.params)&&void 0!==ne?ne:{},E.errors));F.delayNextStep(Fe)}}}_visitSubInstructions(y,E,F){let ye=E.currentTimeline.currentTime;const ke=null!=F.duration?Ur(F.duration):null,Fe=null!=F.delay?Ur(F.delay):null;return 0!==ke&&y.forEach(rt=>{const mt=E.appendInstructionToTimeline(rt,ke,Fe);ye=Math.max(ye,mt.duration+mt.delay)}),ye}visitReference(y,E){E.updateOptions(y.options,!0),Ke(this,y.animation,E),E.previousNode=y}visitSequence(y,E){const F=E.subContextCount;let ne=E;const ye=y.options;if(ye&&(ye.params||ye.delay)&&(ne=E.createSubContext(ye),ne.transformIntoNewTimeline(),null!=ye.delay)){6==ne.previousNode.type&&(ne.currentTimeline.snapshotCurrentStyles(),ne.previousNode=js);const ke=Ur(ye.delay);ne.delayNextStep(ke)}y.steps.length&&(y.steps.forEach(ke=>Ke(this,ke,ne)),ne.currentTimeline.applyStylesToKeyframe(),ne.subContextCount>F&&ne.transformIntoNewTimeline()),E.previousNode=y}visitGroup(y,E){const F=[];let ne=E.currentTimeline.currentTime;const ye=y.options&&y.options.delay?Ur(y.options.delay):0;y.steps.forEach(ke=>{const Fe=E.createSubContext(y.options);ye&&Fe.delayNextStep(ye),Ke(this,ke,Fe),ne=Math.max(ne,Fe.currentTimeline.currentTime),F.push(Fe.currentTimeline)}),F.forEach(ke=>E.currentTimeline.mergeTimelineCollectedStyles(ke)),E.transformIntoNewTimeline(ne),E.previousNode=y}_visitTiming(y,E){if(y.dynamic){const F=y.strValue;return Br(E.params?Te(F,E.params,E.errors):F,E.errors)}return{duration:y.duration,delay:y.delay,easing:y.easing}}visitAnimate(y,E){const F=E.currentAnimateTimings=this._visitTiming(y.timings,E),ne=E.currentTimeline;F.delay&&(E.incrementTime(F.delay),ne.snapshotCurrentStyles());const ye=y.style;5==ye.type?this.visitKeyframes(ye,E):(E.incrementTime(F.duration),this.visitStyle(ye,E),ne.applyStylesToKeyframe()),E.currentAnimateTimings=null,E.previousNode=y}visitStyle(y,E){const F=E.currentTimeline,ne=E.currentAnimateTimings;!ne&&F.hasCurrentStyleProperties()&&F.forwardFrame();const ye=ne&&ne.easing||y.easing;y.isEmptyStep?F.applyEmptyStep(ye):F.setStyles(y.styles,ye,E.errors,E.options),E.previousNode=y}visitKeyframes(y,E){const F=E.currentAnimateTimings,ne=E.currentTimeline.duration,ye=F.duration,Fe=E.createSubContext().currentTimeline;Fe.easing=F.easing,y.styles.forEach(rt=>{Fe.forwardTime((rt.offset||0)*ye),Fe.setStyles(rt.styles,rt.easing,E.errors,E.options),Fe.applyStylesToKeyframe()}),E.currentTimeline.mergeTimelineCollectedStyles(Fe),E.transformIntoNewTimeline(ne+ye),E.previousNode=y}visitQuery(y,E){const F=E.currentTimeline.currentTime,ne=y.options||{},ye=ne.delay?Ur(ne.delay):0;ye&&(6===E.previousNode.type||0==F&&E.currentTimeline.hasCurrentStyleProperties())&&(E.currentTimeline.snapshotCurrentStyles(),E.previousNode=js);let ke=F;const Fe=E.invokeQuery(y.selector,y.originalSelector,y.limit,y.includeSelf,!!ne.optional,E.errors);E.currentQueryTotal=Fe.length;let rt=null;Fe.forEach((mt,Ot)=>{E.currentQueryIndex=Ot;const nn=E.createSubContext(y.options,mt);ye&&nn.delayNextStep(ye),mt===E.element&&(rt=nn.currentTimeline),Ke(this,y.animation,nn),nn.currentTimeline.applyStylesToKeyframe(),ke=Math.max(ke,nn.currentTimeline.currentTime)}),E.currentQueryIndex=0,E.currentQueryTotal=0,E.transformIntoNewTimeline(ke),rt&&(E.currentTimeline.mergeTimelineCollectedStyles(rt),E.currentTimeline.snapshotCurrentStyles()),E.previousNode=y}visitStagger(y,E){const F=E.parentContext,ne=E.currentTimeline,ye=y.timings,ke=Math.abs(ye.duration),Fe=ke*(E.currentQueryTotal-1);let rt=ke*E.currentQueryIndex;switch(ye.duration<0?"reverse":ye.easing){case"reverse":rt=Fe-rt;break;case"full":rt=F.currentStaggerTime}const Ot=E.currentTimeline;rt&&Ot.delayNextStep(rt);const nn=Ot.currentTime;Ke(this,y.animation,E),E.previousNode=y,F.currentStaggerTime=ne.currentTime-nn+(ne.startTime-F.currentTimeline.startTime)}}const js={};class Ze{constructor(y,E,F,ne,ye,ke,Fe,rt){this._driver=y,this.element=E,this.subInstructions=F,this._enterClassName=ne,this._leaveClassName=ye,this.errors=ke,this.timelines=Fe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=js,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=rt||new $e(this._driver,E,0),Fe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(y,E){if(!y)return;const F=y;let ne=this.options;null!=F.duration&&(ne.duration=Ur(F.duration)),null!=F.delay&&(ne.delay=Ur(F.delay));const ye=F.params;if(ye){let ke=ne.params;ke||(ke=this.options.params={}),Object.keys(ye).forEach(Fe=>{(!E||!ke.hasOwnProperty(Fe))&&(ke[Fe]=Te(ye[Fe],ke,this.errors))})}}_copyOptions(){const y={};if(this.options){const E=this.options.params;if(E){const F=y.params={};Object.keys(E).forEach(ne=>{F[ne]=E[ne]})}}return y}createSubContext(y=null,E,F){const ne=E||this.element,ye=new Ze(this._driver,ne,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ne,F||0));return ye.previousNode=this.previousNode,ye.currentAnimateTimings=this.currentAnimateTimings,ye.options=this._copyOptions(),ye.updateOptions(y),ye.currentQueryIndex=this.currentQueryIndex,ye.currentQueryTotal=this.currentQueryTotal,ye.parentContext=this,this.subContextCount++,ye}transformIntoNewTimeline(y){return this.previousNode=js,this.currentTimeline=this.currentTimeline.fork(this.element,y),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(y,E,F){const ne={duration:E??y.duration,delay:this.currentTimeline.currentTime+(F??0)+y.delay,easing:""},ye=new nt(this._driver,y.element,y.keyframes,y.preStyleProps,y.postStyleProps,ne,y.stretchStartingKeyframe);return this.timelines.push(ye),ne}incrementTime(y){this.currentTimeline.forwardTime(this.currentTimeline.duration+y)}delayNextStep(y){y>0&&this.currentTimeline.delayNextStep(y)}invokeQuery(y,E,F,ne,ye,ke){let Fe=[];if(ne&&Fe.push(this.element),y.length>0){y=(y=y.replace(Li,"."+this._enterClassName)).replace(rr,"."+this._leaveClassName);let mt=this._driver.query(this.element,y,1!=F);0!==F&&(mt=F<0?mt.slice(mt.length+F,mt.length):mt.slice(0,F)),Fe.push(...mt)}return!ye&&0==Fe.length&&ke.push(function ce(Y){return new x.vHH(3014,!1)}()),Fe}}class $e{constructor(y,E,F,ne){this._driver=y,this.element=E,this.startTime=F,this._elementTimelineStylesLookup=ne,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(E),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(E,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(y){const E=1===this._keyframes.size&&this._pendingStyles.size;this.duration||E?(this.forwardTime(this.currentTime+y),E&&this.snapshotCurrentStyles()):this.startTime+=y}fork(y,E){return this.applyStylesToKeyframe(),new $e(this._driver,y,E||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(y){this.applyStylesToKeyframe(),this.duration=y,this._loadKeyframe()}_updateStyle(y,E){this._localTimelineStyles.set(y,E),this._globalTimelineStyles.set(y,E),this._styleSummary.set(y,{time:this.currentTime,value:E})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(y){y&&this._previousKeyframe.set("easing",y);for(let[E,F]of this._globalTimelineStyles)this._backFill.set(E,F||S.l3),this._currentKeyframe.set(E,S.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(y,E,F,ne){E&&this._previousKeyframe.set("easing",E);const ye=ne&&ne.params||{},ke=function At(Y,y){const E=new Map;let F;return Y.forEach(ne=>{if("*"===ne){F=F||y.keys();for(let ye of F)E.set(ye,S.l3)}else Se(ne,E)}),E}(y,this._globalTimelineStyles);for(let[rt,mt]of ke){const Ot=Te(mt,ye,F);var Fe;this._pendingStyles.set(rt,Ot),this._localTimelineStyles.has(rt)||this._backFill.set(rt,null!==(Fe=this._globalTimelineStyles.get(rt))&&void 0!==Fe?Fe:S.l3),this._updateStyle(rt,Ot)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((y,E)=>{this._currentKeyframe.set(E,y)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((y,E)=>{this._currentKeyframe.has(E)||this._currentKeyframe.set(E,y)}))}snapshotCurrentStyles(){for(let[y,E]of this._localTimelineStyles)this._pendingStyles.set(y,E),this._updateStyle(y,E)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const y=[];for(let E in this._currentKeyframe)y.push(E);return y}mergeTimelineCollectedStyles(y){y._styleSummary.forEach((E,F)=>{const ne=this._styleSummary.get(F);(!ne||E.time>ne.time)&&this._updateStyle(F,E.value)})}buildKeyframes(){this.applyStylesToKeyframe();const y=new Set,E=new Set,F=1===this._keyframes.size&&0===this.duration;let ne=[];this._keyframes.forEach((Fe,rt)=>{const mt=Se(Fe,new Map,this._backFill);mt.forEach((Ot,nn)=>{Ot===S.k1?y.add(nn):Ot===S.l3&&E.add(nn)}),F||mt.set("offset",rt/this.duration),ne.push(mt)});const ye=y.size?ge(y.values()):[],ke=E.size?ge(E.values()):[];if(F){const Fe=ne[0],rt=new Map(Fe);Fe.set("offset",0),rt.set("offset",1),ne=[Fe,rt]}return Nr(this.element,ne,ye,ke,this.duration,this.startTime,this.easing,!1)}}class nt extends $e{constructor(y,E,F,ne,ye,ke,Fe=!1){super(y,E,ke.delay),this.keyframes=F,this.preStyleProps=ne,this.postStyleProps=ye,this._stretchStartingKeyframe=Fe,this.timings={duration:ke.duration,delay:ke.delay,easing:ke.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let y=this.keyframes,{delay:E,duration:F,easing:ne}=this.timings;if(this._stretchStartingKeyframe&&E){const ye=[],ke=F+E,Fe=E/ke,rt=Se(y[0]);rt.set("offset",0),ye.push(rt);const mt=Se(y[0]);mt.set("offset",vt(Fe)),ye.push(mt);const Ot=y.length-1;for(let nn=1;nn<=Ot;nn++){let qn=Se(y[nn]);const Sn=qn.get("offset");qn.set("offset",vt((E+Sn*F)/ke)),ye.push(qn)}F=ke,E=0,ne="",y=ye}return Nr(this.element,y,this.preStyleProps,this.postStyleProps,F,E,ne,!0)}}function vt(Y,y=3){const E=Math.pow(10,y-1);return Math.round(Y*E)/E}class Yn{}const Tr=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Wi extends Yn{normalizePropertyName(y,E){return ht(y)}normalizeStyleValue(y,E,F,ne){let ye="";const ke=F.toString().trim();if(Tr.has(E)&&0!==F&&"0"!==F)if("number"==typeof F)ye="px";else{const Fe=F.match(/^[+-]?[\d\.]+([a-z]*)$/);Fe&&0==Fe[1].length&&ne.push(function L(Y,y){return new x.vHH(3005,!1)}())}return ke+ye}}function $s(Y,y,E,F,ne,ye,ke,Fe,rt,mt,Ot,nn,qn){return{type:0,element:Y,triggerName:y,isRemovalTransition:ne,fromState:E,fromStyles:ye,toState:F,toStyles:ke,timelines:Fe,queriedElements:rt,preStyleProps:mt,postStyleProps:Ot,totalTime:nn,errors:qn}}const Vi={};class eo{constructor(y,E,F){this._triggerName=y,this.ast=E,this._stateStyles=F}match(y,E,F,ne){return function xs(Y,y,E,F,ne){return Y.some(ye=>ye(y,E,F,ne))}(this.ast.matchers,y,E,F,ne)}buildStyles(y,E,F){let ne=this._stateStyles.get("*");return void 0!==y&&(ne=this._stateStyles.get(y?.toString())||ne),ne?ne.buildStyles(E,F):new Map}build(y,E,F,ne,ye,ke,Fe,rt,mt,Ot){var nn;const qn=[],Sn=this.ast.options&&this.ast.options.params||Vi,_n=this.buildStyles(F,Fe&&Fe.params||Vi,qn),jr=rt&&rt.params||Vi,An=this.buildStyles(ne,jr,qn),Es=new Set,qi=new Map,hi=new Map,na="void"===ne,Ws={params:Xo(jr,Sn),delay:null===(nn=this.ast.options)||void 0===nn?void 0:nn.delay},Ki=Ot?[]:lo(y,E,this.ast.animation,ye,ke,_n,An,Ws,mt,qn);let Ms=0;if(Ki.forEach(Hi=>{Ms=Math.max(Hi.duration+Hi.delay,Ms)}),qn.length)return $s(E,this._triggerName,F,ne,na,_n,An,[],[],qi,hi,Ms,qn);Ki.forEach(Hi=>{const Pi=Hi.element,Ni=Bn(qi,Pi,new Set);Hi.preStyleProps.forEach(Ks=>Ni.add(Ks));const qs=Bn(hi,Pi,new Set);Hi.postStyleProps.forEach(Ks=>qs.add(Ks)),Pi!==E&&Es.add(Pi)});const No=ge(Es.values());return $s(E,this._triggerName,F,ne,na,_n,An,Ki,No,qi,hi,Ms)}}function Xo(Y,y){const E=mr(y);for(const F in Y)Y.hasOwnProperty(F)&&null!=Y[F]&&(E[F]=Y[F]);return E}class rs{constructor(y,E,F){this.styles=y,this.defaultParams=E,this.normalizer=F}buildStyles(y,E){const F=new Map,ne=mr(this.defaultParams);return Object.keys(y).forEach(ye=>{const ke=y[ye];null!==ke&&(ne[ye]=ke)}),this.styles.styles.forEach(ye=>{"string"!=typeof ye&&ye.forEach((ke,Fe)=>{ke&&(ke=Te(ke,ne,E));const rt=this.normalizer.normalizePropertyName(Fe,E);ke=this.normalizer.normalizeStyleValue(Fe,rt,ke,E),F.set(rt,ke)})}),F}}class yo{constructor(y,E,F){this.name=y,this.ast=E,this._normalizer=F,this.transitionFactories=[],this.states=new Map,E.states.forEach(ne=>{this.states.set(ne.name,new rs(ne.style,ne.options&&ne.options.params||{},F))}),zs(this.states,"true","1"),zs(this.states,"false","0"),E.transitions.forEach(ne=>{this.transitionFactories.push(new eo(y,ne,this.states))}),this.fallbackTransition=function ks(Y,y,E){return new eo(Y,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ke,Fe)=>!0],options:null,queryCount:0,depCount:0},y)}(y,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(y,E,F,ne){return this.transitionFactories.find(ke=>ke.match(y,E,F,ne))||null}matchStyles(y,E,F){return this.fallbackTransition.buildStyles(y,E,F)}}function zs(Y,y,E){Y.has(y)?Y.has(E)||Y.set(E,Y.get(y)):Y.has(E)&&Y.set(y,Y.get(E))}const Co=new As;class So{constructor(y,E,F){this.bodyNode=y,this._driver=E,this._normalizer=F,this._animations=new Map,this._playersById=new Map,this.players=[]}register(y,E){const F=[],ye=yr(this._driver,E,F,[]);if(F.length)throw function at(Y){return new x.vHH(3503,!1)}();this._animations.set(y,ye)}_buildPlayer(y,E,F){const ne=y.element,ye=Xn(0,this._normalizer,0,y.keyframes,E,F);return this._driver.animate(ne,ye,y.duration,y.delay,y.easing,[],!0)}create(y,E,F={}){const ne=[],ye=this._animations.get(y);let ke;const Fe=new Map;if(ye?(ke=lo(this._driver,E,ye,Dr,Nn,new Map,new Map,F,Co,ne),ke.forEach(Ot=>{const nn=Bn(Fe,Ot.element,new Map);Ot.postStyleProps.forEach(qn=>nn.set(qn,null))})):(ne.push(function We(){return new x.vHH(3300,!1)}()),ke=[]),ne.length)throw function wt(Y){return new x.vHH(3504,!1)}();Fe.forEach((Ot,nn)=>{Ot.forEach((qn,Sn)=>{Ot.set(Sn,this._driver.computeStyle(nn,Sn,S.l3))})});const mt=hr(ke.map(Ot=>{const nn=Fe.get(Ot.element);return this._buildPlayer(Ot,new Map,nn)}));return this._playersById.set(y,mt),mt.onDestroy(()=>this.destroy(y)),this.players.push(mt),mt}destroy(y){const E=this._getPlayer(y);E.destroy(),this._playersById.delete(y);const F=this.players.indexOf(E);F>=0&&this.players.splice(F,1)}_getPlayer(y){const E=this._playersById.get(y);if(!E)throw function Et(Y){return new x.vHH(3301,!1)}();return E}listen(y,E,F,ne){const ye=Bi(E,"","","");return fr(this._getPlayer(y),F,ye,ne),()=>{}}command(y,E,F,ne){if("register"==F)return void this.register(y,ne[0]);if("create"==F)return void this.create(y,E,ne[0]||{});const ye=this._getPlayer(y);switch(F){case"play":ye.play();break;case"pause":ye.pause();break;case"reset":ye.reset();break;case"restart":ye.restart();break;case"finish":ye.finish();break;case"init":ye.init();break;case"setPosition":ye.setPosition(parseFloat(ne[0]));break;case"destroy":this.destroy(y)}}}const Go="ng-animate-queued",Ei="ng-animate-disabled",Ji=[],ea={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ii="__ng_removed";class Cr{constructor(y,E=""){this.namespaceId=E;const F=y&&y.hasOwnProperty("value");if(this.value=function xa(Y){return Y??null}(F?y.value:y),F){const ye=mr(y);delete ye.value,this.options=ye}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(y){const E=y.params;if(E){const F=this.options.params;Object.keys(E).forEach(ne=>{null==F[ne]&&(F[ne]=E[ne])})}}}const bi="void",$i=new Cr(bi);class Wo{constructor(y,E,F){this.id=y,this.hostElement=E,this._engine=F,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+y,ln(E,this._hostClassName)}listen(y,E,F,ne){if(!this._triggers.has(E))throw function hn(Y,y){return new x.vHH(3302,!1)}();if(null==F||0==F.length)throw function Pn(Y){return new x.vHH(3303,!1)}();if(!function Gs(Y){return"start"==Y||"done"==Y}(F))throw function Cn(Y,y){return new x.vHH(3400,!1)}();const ye=Bn(this._elementListeners,y,[]),ke={name:E,phase:F,callback:ne};ye.push(ke);const Fe=Bn(this._engine.statesByElement,y,new Map);return Fe.has(E)||(ln(y,xi),ln(y,xi+"-"+E),Fe.set(E,$i)),()=>{this._engine.afterFlush(()=>{const rt=ye.indexOf(ke);rt>=0&&ye.splice(rt,1),this._triggers.has(E)||Fe.delete(E)})}}register(y,E){return!this._triggers.has(y)&&(this._triggers.set(y,E),!0)}_getTrigger(y){const E=this._triggers.get(y);if(!E)throw function Dt(Y){return new x.vHH(3401,!1)}();return E}trigger(y,E,F,ne=!0){const ye=this._getTrigger(E),ke=new co(this.id,E,y);let Fe=this._engine.statesByElement.get(y);Fe||(ln(y,xi),ln(y,xi+"-"+E),this._engine.statesByElement.set(y,Fe=new Map));let rt=Fe.get(E);const mt=new Cr(F,this.id);if(!(F&&F.hasOwnProperty("value"))&&rt&&mt.absorbOptions(rt.options),Fe.set(E,mt),rt||(rt=$i),mt.value!==bi&&rt.value===mt.value){if(!function fa(Y,y){const E=Object.keys(Y),F=Object.keys(y);if(E.length!=F.length)return!1;for(let ne=0;ne<E.length;ne++){const ye=E[ne];if(!y.hasOwnProperty(ye)||Y[ye]!==y[ye])return!1}return!0}(rt.params,mt.params)){const _n=[],jr=ye.matchStyles(rt.value,rt.params,_n),An=ye.matchStyles(mt.value,mt.params,_n);_n.length?this._engine.reportError(_n):this._engine.afterFlush(()=>{Rt(y,jr),Je(y,An)})}return}const qn=Bn(this._engine.playersByElement,y,[]);qn.forEach(_n=>{_n.namespaceId==this.id&&_n.triggerName==E&&_n.queued&&_n.destroy()});let Sn=ye.matchTransition(rt.value,mt.value,y,mt.params),Mn=!1;if(!Sn){if(!ne)return;Sn=ye.fallbackTransition,Mn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:y,triggerName:E,transition:Sn,fromState:rt,toState:mt,player:ke,isFallbackTransition:Mn}),Mn||(ln(y,Go),ke.onStart(()=>{vo(y,Go)})),ke.onDone(()=>{let _n=this.players.indexOf(ke);_n>=0&&this.players.splice(_n,1);const jr=this._engine.playersByElement.get(y);if(jr){let An=jr.indexOf(ke);An>=0&&jr.splice(An,1)}}),this.players.push(ke),qn.push(ke),ke}deregister(y){this._triggers.delete(y),this._engine.statesByElement.forEach(E=>E.delete(y)),this._elementListeners.forEach((E,F)=>{this._elementListeners.set(F,E.filter(ne=>ne.name!=y))})}clearElementCache(y){this._engine.statesByElement.delete(y),this._elementListeners.delete(y);const E=this._engine.playersByElement.get(y);E&&(E.forEach(F=>F.destroy()),this._engine.playersByElement.delete(y))}_signalRemovalForInnerTriggers(y,E){const F=this._engine.driver.query(y,Gn,!0);F.forEach(ne=>{if(ne[Ii])return;const ye=this._engine.fetchNamespacesByElement(ne);ye.size?ye.forEach(ke=>ke.triggerLeaveAnimation(ne,E,!1,!0)):this.clearElementCache(ne)}),this._engine.afterFlushAnimationsDone(()=>F.forEach(ne=>this.clearElementCache(ne)))}triggerLeaveAnimation(y,E,F,ne){const ye=this._engine.statesByElement.get(y),ke=new Map;if(ye){const Fe=[];if(ye.forEach((rt,mt)=>{if(ke.set(mt,rt.value),this._triggers.has(mt)){const Ot=this.trigger(y,mt,bi,ne);Ot&&Fe.push(Ot)}}),Fe.length)return this._engine.markElementAsRemoved(this.id,y,!0,E,ke),F&&hr(Fe).onDone(()=>this._engine.processLeaveNode(y)),!0}return!1}prepareLeaveAnimationListeners(y){const E=this._elementListeners.get(y),F=this._engine.statesByElement.get(y);if(E&&F){const ne=new Set;E.forEach(ye=>{const ke=ye.name;if(ne.has(ke))return;ne.add(ke);const rt=this._triggers.get(ke).fallbackTransition,mt=F.get(ke)||$i,Ot=new Cr(bi),nn=new co(this.id,ke,y);this._engine.totalQueuedPlayers++,this._queue.push({element:y,triggerName:ke,transition:rt,fromState:mt,toState:Ot,player:nn,isFallbackTransition:!0})})}}removeNode(y,E){const F=this._engine;if(y.childElementCount&&this._signalRemovalForInnerTriggers(y,E),this.triggerLeaveAnimation(y,E,!0))return;let ne=!1;if(F.totalAnimations){const ye=F.players.length?F.playersByQueriedElement.get(y):[];if(ye&&ye.length)ne=!0;else{let ke=y;for(;ke=ke.parentNode;)if(F.statesByElement.get(ke)){ne=!0;break}}}if(this.prepareLeaveAnimationListeners(y),ne)F.markElementAsRemoved(this.id,y,!1,E);else{const ye=y[Ii];(!ye||ye===ea)&&(F.afterFlush(()=>this.clearElementCache(y)),F.destroyInnerAnimations(y),F._onRemovalComplete(y,E))}}insertNode(y,E){ln(y,this._hostClassName)}drainQueuedTransitions(y){const E=[];return this._queue.forEach(F=>{const ne=F.player;if(ne.destroyed)return;const ye=F.element,ke=this._elementListeners.get(ye);ke&&ke.forEach(Fe=>{if(Fe.name==F.triggerName){const rt=Bi(ye,F.triggerName,F.fromState.value,F.toState.value);rt._data=y,fr(F.player,Fe.phase,rt,Fe.callback)}}),ne.markedForDestroy?this._engine.afterFlush(()=>{ne.destroy()}):E.push(F)}),this._queue=[],E.sort((F,ne)=>{const ye=F.transition.ast.depCount,ke=ne.transition.ast.depCount;return 0==ye||0==ke?ye-ke:this._engine.driver.containsElement(F.element,ne.element)?1:-1})}destroy(y){this.players.forEach(E=>E.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,y)}elementContainsData(y){let E=!1;return this._elementListeners.has(y)&&(E=!0),E=!!this._queue.find(F=>F.element===y)||E,E}}class ha{constructor(y,E,F){this.bodyNode=y,this.driver=E,this._normalizer=F,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ne,ye)=>{}}_onRemovalComplete(y,E){this.onRemovalComplete(y,E)}get queuedPlayers(){const y=[];return this._namespaceList.forEach(E=>{E.players.forEach(F=>{F.queued&&y.push(F)})}),y}createNamespace(y,E){const F=new Wo(y,E,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,E)?this._balanceNamespaceList(F,E):(this.newHostElements.set(E,F),this.collectEnterElement(E)),this._namespaceLookup[y]=F}_balanceNamespaceList(y,E){const F=this._namespaceList,ne=this.namespacesByHostElement;if(F.length-1>=0){let ke=!1,Fe=this.driver.getParentElement(E);for(;Fe;){const rt=ne.get(Fe);if(rt){const mt=F.indexOf(rt);F.splice(mt+1,0,y),ke=!0;break}Fe=this.driver.getParentElement(Fe)}ke||F.unshift(y)}else F.push(y);return ne.set(E,y),y}register(y,E){let F=this._namespaceLookup[y];return F||(F=this.createNamespace(y,E)),F}registerTrigger(y,E,F){let ne=this._namespaceLookup[y];ne&&ne.register(E,F)&&this.totalAnimations++}destroy(y,E){if(!y)return;const F=this._fetchNamespace(y);this.afterFlush(()=>{this.namespacesByHostElement.delete(F.hostElement),delete this._namespaceLookup[y];const ne=this._namespaceList.indexOf(F);ne>=0&&this._namespaceList.splice(ne,1)}),this.afterFlushAnimationsDone(()=>F.destroy(E))}_fetchNamespace(y){return this._namespaceLookup[y]}fetchNamespacesByElement(y){const E=new Set,F=this.statesByElement.get(y);if(F)for(let ne of F.values())if(ne.namespaceId){const ye=this._fetchNamespace(ne.namespaceId);ye&&E.add(ye)}return E}trigger(y,E,F,ne){if(ys(E)){const ye=this._fetchNamespace(y);if(ye)return ye.trigger(E,F,ne),!0}return!1}insertNode(y,E,F,ne){if(!ys(E))return;const ye=E[Ii];if(ye&&ye.setForRemoval){ye.setForRemoval=!1,ye.setForMove=!0;const ke=this.collectedLeaveElements.indexOf(E);ke>=0&&this.collectedLeaveElements.splice(ke,1)}if(y){const ke=this._fetchNamespace(y);ke&&ke.insertNode(E,F)}ne&&this.collectEnterElement(E)}collectEnterElement(y){this.collectedEnterElements.push(y)}markElementAsDisabled(y,E){E?this.disabledNodes.has(y)||(this.disabledNodes.add(y),ln(y,Ei)):this.disabledNodes.has(y)&&(this.disabledNodes.delete(y),vo(y,Ei))}removeNode(y,E,F,ne){if(ys(E)){const ye=y?this._fetchNamespace(y):null;if(ye?ye.removeNode(E,ne):this.markElementAsRemoved(y,E,!1,ne),F){const ke=this.namespacesByHostElement.get(E);ke&&ke.id!==y&&ke.removeNode(E,ne)}}else this._onRemovalComplete(E,ne)}markElementAsRemoved(y,E,F,ne,ye){this.collectedLeaveElements.push(E),E[Ii]={namespaceId:y,setForRemoval:ne,hasAnimation:F,removedBeforeQueried:!1,previousTriggersValues:ye}}listen(y,E,F,ne,ye){return ys(E)?this._fetchNamespace(y).listen(E,F,ne,ye):()=>{}}_buildInstruction(y,E,F,ne,ye){return y.transition.build(this.driver,y.element,y.fromState.value,y.toState.value,F,ne,y.fromState.options,y.toState.options,E,ye)}destroyInnerAnimations(y){let E=this.driver.query(y,Gn,!0);E.forEach(F=>this.destroyActiveAnimationsForElement(F)),0!=this.playersByQueriedElement.size&&(E=this.driver.query(y,qr,!0),E.forEach(F=>this.finishActiveQueriedAnimationOnElement(F)))}destroyActiveAnimationsForElement(y){const E=this.playersByElement.get(y);E&&E.forEach(F=>{F.queued?F.markedForDestroy=!0:F.destroy()})}finishActiveQueriedAnimationOnElement(y){const E=this.playersByQueriedElement.get(y);E&&E.forEach(F=>F.finish())}whenRenderingDone(){return new Promise(y=>{if(this.players.length)return hr(this.players).onDone(()=>y());y()})}processLeaveNode(y){var E;const F=y[Ii];if(F&&F.setForRemoval){if(y[Ii]=ea,F.namespaceId){this.destroyInnerAnimations(y);const ne=this._fetchNamespace(F.namespaceId);ne&&ne.clearElementCache(y)}this._onRemovalComplete(y,F.setForRemoval)}null!==(E=y.classList)&&void 0!==E&&E.contains(Ei)&&this.markElementAsDisabled(y,!1),this.driver.query(y,".ng-animate-disabled",!0).forEach(ne=>{this.markElementAsDisabled(ne,!1)})}flush(y=-1){let E=[];if(this.newHostElements.size&&(this.newHostElements.forEach((F,ne)=>this._balanceNamespaceList(F,ne)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let F=0;F<this.collectedEnterElements.length;F++)ln(this.collectedEnterElements[F],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const F=[];try{E=this._flushAnimations(F,y)}finally{for(let ne=0;ne<F.length;ne++)F[ne]()}}else for(let F=0;F<this.collectedLeaveElements.length;F++)this.processLeaveNode(this.collectedLeaveElements[F]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(F=>F()),this._flushFns=[],this._whenQuietFns.length){const F=this._whenQuietFns;this._whenQuietFns=[],E.length?hr(E).onDone(()=>{F.forEach(ne=>ne())}):F.forEach(ne=>ne())}}reportError(y){throw function kn(Y){return new x.vHH(3402,!1)}()}_flushAnimations(y,E){const F=new As,ne=[],ye=new Map,ke=[],Fe=new Map,rt=new Map,mt=new Map,Ot=new Set;this.disabledNodes.forEach(cn=>{Ot.add(cn);const In=this.driver.query(cn,".ng-animate-queued",!0);for(let on=0;on<In.length;on++)Ot.add(In[on])});const nn=this.bodyNode,qn=Array.from(this.statesByElement.keys()),Sn=Mi(qn,this.collectedEnterElements),Mn=new Map;let _n=0;Sn.forEach((cn,In)=>{const on=Dr+_n++;Mn.set(In,on),cn.forEach(lr=>ln(lr,on))});const jr=[],An=new Set,Es=new Set;for(let cn=0;cn<this.collectedLeaveElements.length;cn++){const In=this.collectedLeaveElements[cn],on=In[Ii];on&&on.setForRemoval&&(jr.push(In),An.add(In),on.hasAnimation?this.driver.query(In,".ng-star-inserted",!0).forEach(lr=>An.add(lr)):Es.add(In))}const qi=new Map,hi=Mi(qn,Array.from(An));hi.forEach((cn,In)=>{const on=Nn+_n++;qi.set(In,on),cn.forEach(lr=>ln(lr,on))}),y.push(()=>{Sn.forEach((cn,In)=>{const on=Mn.get(In);cn.forEach(lr=>vo(lr,on))}),hi.forEach((cn,In)=>{const on=qi.get(In);cn.forEach(lr=>vo(lr,on))}),jr.forEach(cn=>{this.processLeaveNode(cn)})});const na=[],Ws=[];for(let cn=this._namespaceList.length-1;cn>=0;cn--)this._namespaceList[cn].drainQueuedTransitions(E).forEach(on=>{const lr=on.player,ai=on.element;if(na.push(lr),this.collectedEnterElements.length){const Is=ai[Ii];if(Is&&Is.setForMove){if(Is.previousTriggersValues&&Is.previousTriggersValues.has(on.triggerName)){const qo=Is.previousTriggersValues.get(on.triggerName),Zi=this.statesByElement.get(on.element);if(Zi&&Zi.has(on.triggerName)){const Ma=Zi.get(on.triggerName);Ma.value=qo,Zi.set(on.triggerName,Ma)}}return void lr.destroy()}}const Ps=!nn||!this.driver.containsElement(nn,ai),Xi=qi.get(ai),Zs=Mn.get(ai),$r=this._buildInstruction(on,F,Zs,Xi,Ps);if($r.errors&&$r.errors.length)return void Ws.push($r);if(Ps)return lr.onStart(()=>Rt(ai,$r.fromStyles)),lr.onDestroy(()=>Je(ai,$r.toStyles)),void ne.push(lr);if(on.isFallbackTransition)return lr.onStart(()=>Rt(ai,$r.fromStyles)),lr.onDestroy(()=>Je(ai,$r.toStyles)),void ne.push(lr);const Ra=[];$r.timelines.forEach(Is=>{Is.stretchStartingKeyframe=!0,this.disabledNodes.has(Is.element)||Ra.push(Is)}),$r.timelines=Ra,F.append(ai,$r.timelines),ke.push({instruction:$r,player:lr,element:ai}),$r.queriedElements.forEach(Is=>Bn(Fe,Is,[]).push(lr)),$r.preStyleProps.forEach((Is,qo)=>{if(Is.size){let Zi=rt.get(qo);Zi||rt.set(qo,Zi=new Set),Is.forEach((Ma,$n)=>Zi.add($n))}}),$r.postStyleProps.forEach((Is,qo)=>{let Zi=mt.get(qo);Zi||mt.set(qo,Zi=new Set),Is.forEach((Ma,$n)=>Zi.add($n))})});if(Ws.length){const cn=[];Ws.forEach(In=>{cn.push(function en(Y,y){return new x.vHH(3505,!1)}())}),na.forEach(In=>In.destroy()),this.reportError(cn)}const Ki=new Map,Ms=new Map;ke.forEach(cn=>{const In=cn.element;F.has(In)&&(Ms.set(In,In),this._beforeAnimationBuild(cn.player.namespaceId,cn.instruction,Ki))}),ne.forEach(cn=>{const In=cn.element;this._getPreviousPlayers(In,!1,cn.namespaceId,cn.triggerName,null).forEach(lr=>{Bn(Ki,In,[]).push(lr),lr.destroy()})});const No=jr.filter(cn=>Ro(cn,rt,mt)),Hi=new Map;Jr(Hi,this.driver,Es,mt,S.l3).forEach(cn=>{Ro(cn,rt,mt)&&No.push(cn)});const Ni=new Map;Sn.forEach((cn,In)=>{Jr(Ni,this.driver,new Set(cn),rt,S.k1)}),No.forEach(cn=>{var In,on;const lr=Hi.get(cn),ai=Ni.get(cn);Hi.set(cn,new Map([...Array.from(null!==(In=lr?.entries())&&void 0!==In?In:[]),...Array.from(null!==(on=ai?.entries())&&void 0!==on?on:[])]))});const qs=[],Ks=[],wo={};ke.forEach(cn=>{const{element:In,player:on,instruction:lr}=cn;if(F.has(In)){if(Ot.has(In))return on.onDestroy(()=>Je(In,lr.toStyles)),on.disabled=!0,on.overrideTotalTime(lr.totalTime),void ne.push(on);let ai=wo;if(Ms.size>1){let Xi=In;const Zs=[];for(;Xi=Xi.parentNode;){const $r=Ms.get(Xi);if($r){ai=$r;break}Zs.push(Xi)}Zs.forEach($r=>Ms.set($r,ai))}const Ps=this._buildAnimation(on.namespaceId,lr,Ki,ye,Ni,Hi);if(on.setRealPlayer(Ps),ai===wo)qs.push(on);else{const Xi=this.playersByElement.get(ai);Xi&&Xi.length&&(on.parentPlayer=hr(Xi)),ne.push(on)}}else Rt(In,lr.fromStyles),on.onDestroy(()=>Je(In,lr.toStyles)),Ks.push(on),Ot.has(In)&&ne.push(on)}),Ks.forEach(cn=>{const In=ye.get(cn.element);if(In&&In.length){const on=hr(In);cn.setRealPlayer(on)}}),ne.forEach(cn=>{cn.parentPlayer?cn.syncPlayerEvents(cn.parentPlayer):cn.destroy()});for(let cn=0;cn<jr.length;cn++){const In=jr[cn],on=In[Ii];if(vo(In,Nn),on&&on.hasAnimation)continue;let lr=[];if(Fe.size){let Ps=Fe.get(In);Ps&&Ps.length&&lr.push(...Ps);let Xi=this.driver.query(In,qr,!0);for(let Zs=0;Zs<Xi.length;Zs++){let $r=Fe.get(Xi[Zs]);$r&&$r.length&&lr.push(...$r)}}const ai=lr.filter(Ps=>!Ps.destroyed);ai.length?Ao(this,In,ai):this.processLeaveNode(In)}return jr.length=0,qs.forEach(cn=>{this.players.push(cn),cn.onDone(()=>{cn.destroy();const In=this.players.indexOf(cn);this.players.splice(In,1)}),cn.play()}),qs}elementContainsData(y,E){let F=!1;const ne=E[Ii];return ne&&ne.setForRemoval&&(F=!0),this.playersByElement.has(E)&&(F=!0),this.playersByQueriedElement.has(E)&&(F=!0),this.statesByElement.has(E)&&(F=!0),this._fetchNamespace(y).elementContainsData(E)||F}afterFlush(y){this._flushFns.push(y)}afterFlushAnimationsDone(y){this._whenQuietFns.push(y)}_getPreviousPlayers(y,E,F,ne,ye){let ke=[];if(E){const Fe=this.playersByQueriedElement.get(y);Fe&&(ke=Fe)}else{const Fe=this.playersByElement.get(y);if(Fe){const rt=!ye||ye==bi;Fe.forEach(mt=>{mt.queued||!rt&&mt.triggerName!=ne||ke.push(mt)})}}return(F||ne)&&(ke=ke.filter(Fe=>!(F&&F!=Fe.namespaceId||ne&&ne!=Fe.triggerName))),ke}_beforeAnimationBuild(y,E,F){const ye=E.element,ke=E.isRemovalTransition?void 0:y,Fe=E.isRemovalTransition?void 0:E.triggerName;for(const rt of E.timelines){const mt=rt.element,Ot=mt!==ye,nn=Bn(F,mt,[]);this._getPreviousPlayers(mt,Ot,ke,Fe,E.toState).forEach(Sn=>{const Mn=Sn.getRealPlayer();Mn.beforeDestroy&&Mn.beforeDestroy(),Sn.destroy(),nn.push(Sn)})}Rt(ye,E.fromStyles)}_buildAnimation(y,E,F,ne,ye,ke){const Fe=E.triggerName,rt=E.element,mt=[],Ot=new Set,nn=new Set,qn=E.timelines.map(Mn=>{const _n=Mn.element;Ot.add(_n);const jr=_n[Ii];if(jr&&jr.removedBeforeQueried)return new S.ZN(Mn.duration,Mn.delay);const An=_n!==rt,Es=function _o(Y){const y=[];return xo(Y,y),y}((F.get(_n)||Ji).map(Ki=>Ki.getRealPlayer())).filter(Ki=>!!Ki.element&&Ki.element===_n),qi=ye.get(_n),hi=ke.get(_n),na=Xn(0,this._normalizer,0,Mn.keyframes,qi,hi),Ws=this._buildPlayer(Mn,na,Es);if(Mn.subTimeline&&ne&&nn.add(_n),An){const Ki=new co(y,Fe,_n);Ki.setRealPlayer(Ws),mt.push(Ki)}return Ws});mt.forEach(Mn=>{Bn(this.playersByQueriedElement,Mn.element,[]).push(Mn),Mn.onDone(()=>function Kn(Y,y,E){let F=Y.get(y);if(F){if(F.length){const ne=F.indexOf(E);F.splice(ne,1)}0==F.length&&Y.delete(y)}return F}(this.playersByQueriedElement,Mn.element,Mn))}),Ot.forEach(Mn=>ln(Mn,Fr));const Sn=hr(qn);return Sn.onDestroy(()=>{Ot.forEach(Mn=>vo(Mn,Fr)),Je(rt,E.toStyles)}),nn.forEach(Mn=>{Bn(ne,Mn,[]).push(Sn)}),Sn}_buildPlayer(y,E,F){return E.length>0?this.driver.animate(y.element,E,y.duration,y.delay,y.easing,F):new S.ZN(y.duration,y.delay)}}class co{constructor(y,E,F){this.namespaceId=y,this.triggerName=E,this.element=F,this._player=new S.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(y){this._containsRealPlayer||(this._player=y,this._queuedCallbacks.forEach((E,F)=>{E.forEach(ne=>fr(y,F,void 0,ne))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(y.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(y){this.totalTime=y}syncPlayerEvents(y){const E=this._player;E.triggerCallback&&y.onStart(()=>E.triggerCallback("start")),y.onDone(()=>this.finish()),y.onDestroy(()=>this.destroy())}_queueEvent(y,E){Bn(this._queuedCallbacks,y,[]).push(E)}onDone(y){this.queued&&this._queueEvent("done",y),this._player.onDone(y)}onStart(y){this.queued&&this._queueEvent("start",y),this._player.onStart(y)}onDestroy(y){this.queued&&this._queueEvent("destroy",y),this._player.onDestroy(y)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(y){this.queued||this._player.setPosition(y)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(y){const E=this._player;E.triggerCallback&&E.triggerCallback(y)}}function ys(Y){return Y&&1===Y.nodeType}function Ti(Y,y){const E=Y.style.display;return Y.style.display=y??"none",E}function Jr(Y,y,E,F,ne){const ye=[];E.forEach(rt=>ye.push(Ti(rt)));const ke=[];F.forEach((rt,mt)=>{const Ot=new Map;rt.forEach(nn=>{const qn=y.computeStyle(mt,nn,ne);Ot.set(nn,qn),(!qn||0==qn.length)&&(mt[Ii]=Yr,ke.push(mt))}),Y.set(mt,Ot)});let Fe=0;return E.forEach(rt=>Ti(rt,ye[Fe++])),ke}function Mi(Y,y){const E=new Map;if(Y.forEach(Fe=>E.set(Fe,[])),0==y.length)return E;const ne=new Set(y),ye=new Map;function ke(Fe){if(!Fe)return 1;let rt=ye.get(Fe);if(rt)return rt;const mt=Fe.parentNode;return rt=E.has(mt)?mt:ne.has(mt)?1:ke(mt),ye.set(Fe,rt),rt}return y.forEach(Fe=>{const rt=ke(Fe);1!==rt&&E.get(rt).push(Fe)}),E}function ln(Y,y){var E;null===(E=Y.classList)||void 0===E||E.add(y)}function vo(Y,y){var E;null===(E=Y.classList)||void 0===E||E.remove(y)}function Ao(Y,y,E){hr(E).onDone(()=>Y.processLeaveNode(y))}function xo(Y,y){for(let E=0;E<Y.length;E++){const F=Y[E];F instanceof S.ZE?xo(F.players,y):y.push(F)}}function Ro(Y,y,E){const F=E.get(Y);if(!F)return!1;let ne=y.get(Y);return ne?F.forEach(ye=>ne.add(ye)):y.set(Y,F),E.delete(Y),!0}class Di{constructor(y,E,F){this.bodyNode=y,this._driver=E,this._normalizer=F,this._triggerCache={},this.onRemovalComplete=(ne,ye)=>{},this._transitionEngine=new ha(y,E,F),this._timelineEngine=new So(y,E,F),this._transitionEngine.onRemovalComplete=(ne,ye)=>this.onRemovalComplete(ne,ye)}registerTrigger(y,E,F,ne,ye){const ke=y+"-"+ne;let Fe=this._triggerCache[ke];if(!Fe){const rt=[],Ot=yr(this._driver,ye,rt,[]);if(rt.length)throw function Ie(Y,y){return new x.vHH(3404,!1)}();Fe=function Hs(Y,y,E){return new yo(Y,y,E)}(ne,Ot,this._normalizer),this._triggerCache[ke]=Fe}this._transitionEngine.registerTrigger(E,ne,Fe)}register(y,E){this._transitionEngine.register(y,E)}destroy(y,E){this._transitionEngine.destroy(y,E)}onInsert(y,E,F,ne){this._transitionEngine.insertNode(y,E,F,ne)}onRemove(y,E,F,ne){this._transitionEngine.removeNode(y,E,ne||!1,F)}disableAnimations(y,E){this._transitionEngine.markElementAsDisabled(y,E)}process(y,E,F,ne){if("@"==F.charAt(0)){const[ye,ke]=Lr(F);this._timelineEngine.command(ye,E,ke,ne)}else this._transitionEngine.trigger(y,E,F,ne)}listen(y,E,F,ne,ye){if("@"==F.charAt(0)){const[ke,Fe]=Lr(F);return this._timelineEngine.listen(ke,E,Fe,ye)}return this._transitionEngine.listen(y,E,F,ne,ye)}flush(y=-1){this._transitionEngine.flush(y)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Tt=(()=>{class Y{constructor(E,F,ne){this._element=E,this._startStyles=F,this._endStyles=ne,this._state=0;let ye=Y.initialStylesByElement.get(E);ye||Y.initialStylesByElement.set(E,ye=new Map),this._initialStyles=ye}start(){this._state<1&&(this._startStyles&&Je(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Je(this._element,this._initialStyles),this._endStyles&&(Je(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Y.initialStylesByElement.delete(this._element),this._startStyles&&(Rt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rt(this._element,this._endStyles),this._endStyles=null),Je(this._element,this._initialStyles),this._state=3)}}return Y.initialStylesByElement=new WeakMap,Y})();function Ln(Y){let y=null;return Y.forEach((E,F)=>{(function ho(Y){return"display"===Y||"position"===Y})(F)&&(y=y||new Map,y.set(F,E))}),y}class to{constructor(y,E,F,ne){this.element=y,this.keyframes=E,this.options=F,this._specialStyles=ne,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=F.duration,this._delay=F.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(y=>y()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const y=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,y,this.options),this._finalKeyframe=y.length?y[y.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(y){const E=[];return y.forEach(F=>{E.push(Object.fromEntries(F))}),E}_triggerWebAnimation(y,E,F){return y.animate(this._convertKeyframesToObject(E),F)}onStart(y){this._originalOnStartFns.push(y),this._onStartFns.push(y)}onDone(y){this._originalOnDoneFns.push(y),this._onDoneFns.push(y)}onDestroy(y){this._onDestroyFns.push(y)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(y=>y()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(y=>y()),this._onDestroyFns=[])}setPosition(y){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=y*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const y=new Map;this.hasStarted()&&this._finalKeyframe.forEach((F,ne)=>{"offset"!==ne&&y.set(ne,this._finished?F:It(this.element,ne))}),this.currentSnapshot=y}triggerCallback(y){const E="start"===y?this._onStartFns:this._onDoneFns;E.forEach(F=>F()),E.length=0}}class Xr{validateStyleProperty(y){return!0}validateAnimatableStyleProperty(y){return!0}matchesElement(y,E){return!1}containsElement(y,E){return Vn(y,E)}getParentElement(y){return Nt(y)}query(y,E,F){return Wt(y,E,F)}computeStyle(y,E,F){return window.getComputedStyle(y)[E]}animate(y,E,F,ne,ye,ke=[]){const rt={duration:F,delay:ne,fill:0==ne?"both":"forwards"};ye&&(rt.easing=ye);const mt=new Map,Ot=ke.filter(Sn=>Sn instanceof to);(function rn(Y,y){return 0===Y||0===y})(F,ne)&&Ot.forEach(Sn=>{Sn.currentSnapshot.forEach((Mn,_n)=>mt.set(_n,Mn))});let nn=function ii(Y){return Y.length?Y[0]instanceof Map?Y:Y.map(y=>ri(y)):[]}(E).map(Sn=>Se(Sn));nn=function Xe(Y,y,E){if(E.size&&y.length){let F=y[0],ne=[];if(E.forEach((ye,ke)=>{F.has(ke)||ne.push(ke),F.set(ke,ye)}),ne.length)for(let ye=1;ye<y.length;ye++){let ke=y[ye];ne.forEach(Fe=>ke.set(Fe,It(Y,Fe)))}}return y}(y,nn,mt);const qn=function vs(Y,y){let E=null,F=null;return Array.isArray(y)&&y.length?(E=Ln(y[0]),y.length>1&&(F=Ln(y[y.length-1]))):y instanceof Map&&(E=Ln(y)),E||F?new Tt(Y,E,F):null}(y,nn);return new to(y,nn,rt,qn)}}var ta=H(6895);let Mo=(()=>{class Y extends S._j{constructor(E,F){super(),this._nextAnimationId=0,this._renderer=E.createRenderer(F.body,{id:"0",encapsulation:x.ifc.None,styles:[],data:{animation:[]}})}build(E){const F=this._nextAnimationId.toString();this._nextAnimationId++;const ne=Array.isArray(E)?(0,S.vP)(E):E;return z(this._renderer,null,F,"register",[ne]),new _s(F,this._renderer)}}return Y.\u0275fac=function(E){return new(E||Y)(x.LFG(x.FYo),x.LFG(ta.K0))},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})();class _s extends S.LC{constructor(y,E){super(),this._id=y,this._renderer=E}create(y,E){return new q(this._id,y,E||{},this._renderer)}}class q{constructor(y,E,F,ne){this.id=y,this.element=E,this._renderer=ne,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",F)}_listen(y,E){return this._renderer.listen(this.element,`@@${this.id}:${y}`,E)}_command(y,...E){return z(this._renderer,this.element,this.id,y,E)}onDone(y){this._listen("done",y)}onStart(y){this._listen("start",y)}onDestroy(y){this._listen("destroy",y)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(y){this._command("setPosition",y)}getPosition(){var y,E;return null!==(y=null===(E=this._renderer.engine.players[+this.id])||void 0===E?void 0:E.getPosition())&&void 0!==y?y:0}}function z(Y,y,E,F,ne){return Y.setProperty(y,`@@${E}:${F}`,ne)}const xe="@.disabled";let qe=(()=>{class Y{constructor(E,F,ne){this.delegate=E,this.engine=F,this._zone=ne,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),F.onRemovalComplete=(ye,ke)=>{const Fe=ke?.parentNode(ye);Fe&&ke.removeChild(Fe,ye)}}createRenderer(E,F){const ye=this.delegate.createRenderer(E,F);if(!(E&&F&&F.data&&F.data.animation)){let Ot=this._rendererCache.get(ye);return Ot||(Ot=new dt("",ye,this.engine),this._rendererCache.set(ye,Ot)),Ot}const ke=F.id,Fe=F.id+"-"+this._currentId;this._currentId++,this.engine.register(Fe,E);const rt=Ot=>{Array.isArray(Ot)?Ot.forEach(rt):this.engine.registerTrigger(ke,Fe,E,Ot.name,Ot)};return F.data.animation.forEach(rt),new gt(this,Fe,ye,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(E,F,ne){E>=0&&E<this._microtaskId?this._zone.run(()=>F(ne)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ye=>{const[ke,Fe]=ye;ke(Fe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([F,ne]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Y.\u0275fac=function(E){return new(E||Y)(x.LFG(x.FYo),x.LFG(Di),x.LFG(x.R0b))},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})();class dt{constructor(y,E,F){this.namespaceId=y,this.delegate=E,this.engine=F,this.destroyNode=this.delegate.destroyNode?ne=>E.destroyNode(ne):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(y,E){return this.delegate.createElement(y,E)}createComment(y){return this.delegate.createComment(y)}createText(y){return this.delegate.createText(y)}appendChild(y,E){this.delegate.appendChild(y,E),this.engine.onInsert(this.namespaceId,E,y,!1)}insertBefore(y,E,F,ne=!0){this.delegate.insertBefore(y,E,F),this.engine.onInsert(this.namespaceId,E,y,ne)}removeChild(y,E,F){this.engine.onRemove(this.namespaceId,E,this.delegate,F)}selectRootElement(y,E){return this.delegate.selectRootElement(y,E)}parentNode(y){return this.delegate.parentNode(y)}nextSibling(y){return this.delegate.nextSibling(y)}setAttribute(y,E,F,ne){this.delegate.setAttribute(y,E,F,ne)}removeAttribute(y,E,F){this.delegate.removeAttribute(y,E,F)}addClass(y,E){this.delegate.addClass(y,E)}removeClass(y,E){this.delegate.removeClass(y,E)}setStyle(y,E,F,ne){this.delegate.setStyle(y,E,F,ne)}removeStyle(y,E,F){this.delegate.removeStyle(y,E,F)}setProperty(y,E,F){"@"==E.charAt(0)&&E==xe?this.disableAnimations(y,!!F):this.delegate.setProperty(y,E,F)}setValue(y,E){this.delegate.setValue(y,E)}listen(y,E,F){return this.delegate.listen(y,E,F)}disableAnimations(y,E){this.engine.disableAnimations(y,E)}}class gt extends dt{constructor(y,E,F,ne){super(E,F,ne),this.factory=y,this.namespaceId=E}setProperty(y,E,F){"@"==E.charAt(0)?"."==E.charAt(1)&&E==xe?this.disableAnimations(y,F=void 0===F||!!F):this.engine.process(this.namespaceId,y,E.slice(1),F):this.delegate.setProperty(y,E,F)}listen(y,E,F){if("@"==E.charAt(0)){const ne=function Kt(Y){switch(Y){case"body":return document.body;case"document":return document;case"window":return window;default:return Y}}(y);let ye=E.slice(1),ke="";return"@"!=ye.charAt(0)&&([ye,ke]=function Pt(Y){const y=Y.indexOf(".");return[Y.substring(0,y),Y.slice(y+1)]}(ye)),this.engine.listen(this.namespaceId,ne,ye,ke,Fe=>{this.factory.scheduleListenerCallback(Fe._data||-1,F,Fe)})}return this.delegate.listen(y,E,F)}}const Sr=[{provide:S._j,useClass:Mo},{provide:Yn,useFactory:function On(){return new Wi}},{provide:Di,useClass:(()=>{class Y extends Di{constructor(E,F,ne,ye){super(E.body,F,ne)}ngOnDestroy(){this.flush()}}return Y.\u0275fac=function(E){return new(E||Y)(x.LFG(ta.K0),x.LFG(ni),x.LFG(Yn),x.LFG(x.z2F))},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},{provide:x.FYo,useFactory:function yi(Y,y,E){return new qe(Y,y,E)},deps:[m.se,Di,x.R0b]}],ei=[{provide:ni,useFactory:()=>new Xr},{provide:x.QbO,useValue:"BrowserAnimations"},...Sr],Zr=[{provide:ni,useClass:gr},{provide:x.QbO,useValue:"NoopAnimations"},...Sr];let is=(()=>{class Y{static withConfig(E){return{ngModule:Y,providers:E.disableAnimations?Zr:ei}}}return Y.\u0275fac=function(E){return new(E||Y)},Y.\u0275mod=x.oAB({type:Y}),Y.\u0275inj=x.cJS({providers:ei,imports:[m.b2]}),Y})();var di=H(4820);const oi=[{path:"portal",loadChildren:()=>Promise.all([H.e(294),H.e(455)]).then(H.bind(H,5455)).then(Y=>Y.PortalModule)},{path:"",loadChildren:()=>Promise.all([H.e(294),H.e(315)]).then(H.bind(H,315)).then(Y=>Y.BusinessModule)}];let ws=(()=>{class Y{}return Y.\u0275fac=function(E){return new(E||Y)},Y.\u0275mod=x.oAB({type:Y}),Y.\u0275inj=x.cJS({imports:[di.Bz.forRoot(oi),di.Bz]}),Y})(),ss=(()=>{class Y{constructor(){}}return Y.\u0275fac=function(E){return new(E||Y)},Y.\u0275cmp=x.Xpm({type:Y,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"site"]],template:function(E,F){1&E&&(x.TgZ(0,"div",0),x._UZ(1,"router-outlet"),x.qZA())},dependencies:[di.lC],styles:[".site[_ngcontent-%COMP%]{overflow-x:hidden}"]}),Y})();var Po=H(2011),Rs=H(1762),R=H(3385),ee=H(8445);const k_firebaseConfig={apiKey:"AIzaSyCKXG8CCr_9nqB7Qlup5VU5HgD4niJhN9I",authDomain:"solarcardatabase.firebaseapp.com",databaseURL:"https://solarcardatabase.firebaseio.com",projectId:"solarcardatabase",storageBucket:"solarcardatabase.appspot.com",messagingSenderId:"188569717520",appId:"1:188569717520:web:7891916923765620a47395",measurementId:"G-FR63XJDZHP"};var se=H(7395),be=H.n(se);const ut={accessToken:"d37728bf9a104420a3712a57d61c6c7d",captureUncaught:!0,captureUnhandledRejections:!0};let ft=(()=>{class Y{constructor(E){this.rollbar=E}handleError(E){this.rollbar.error(E.originalError||E)}}return Y.\u0275fac=function(E){return new(E||Y)(x.LFG(ar))},Y.\u0275prov=x.Yz7({token:Y,factory:Y.\u0275fac}),Y})();function Zt(){return new(be())(ut)}const ar=new x.OlP("rollbar");let ur=(()=>{class Y{}return Y.\u0275fac=function(E){return new(E||Y)},Y.\u0275mod=x.oAB({type:Y,bootstrap:[ss]}),Y.\u0275inj=x.cJS({providers:[{provide:Rs.L6,useValue:void 0},{provide:R.L6,useValue:void 0},{provide:x.qLn,useClass:ft},{provide:ar,useFactory:Zt}],imports:[m.b2,is,ws,Po.hO.initializeApp(k_firebaseConfig),Rs.yb,R.ww,ee.TE]}),Y})();(0,x.G48)(),m.q6().bootstrapModule(ur).catch(Y=>console.error(Y))},7395:function($t){$t.exports=function(Re){var H={};function m(x){if(H[x])return H[x].exports;var S=H[x]={i:x,l:!1,exports:{}};return Re[x].call(S.exports,S,S.exports,m),S.l=!0,S.exports}return m.m=Re,m.c=H,m.d=function(x,S,W){m.o(x,S)||Object.defineProperty(x,S,{enumerable:!0,get:W})},m.r=function(x){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},m.t=function(x,S){if(1&S&&(x=m(x)),8&S||4&S&&"object"==typeof x&&x&&x.__esModule)return x;var W=Object.create(null);if(m.r(W),Object.defineProperty(W,"default",{enumerable:!0,value:x}),2&S&&"string"!=typeof x)for(var N in x)m.d(W,N,function(O){return x[O]}.bind(null,N));return W},m.n=function(x){var S=x&&x.__esModule?function(){return x.default}:function(){return x};return m.d(S,"a",S),S},m.o=function(x,S){return Object.prototype.hasOwnProperty.call(x,S)},m.p="",m(m.s=6)}([function(Re,H,m){"use strict";var x=m(12),S={};function W(he,ae){return ae===N(he)}function N(he){var ae=typeof he;return"object"!==ae?ae:he?he instanceof Error?"error":{}.toString.call(he).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function O(he){return W(he,"function")}function Z(he){var ae=Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),Ve=RegExp("^"+ae+"$");return K(he)&&Ve.test(he)}function K(he){var ae=typeof he;return null!=he&&("object"==ae||"function"==ae)}function V(){var he=ve();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ae){var Ve=(he+16*Math.random())%16|0;return he=Math.floor(he/16),("x"===ae?Ve:7&Ve|8).toString(16)})}var B={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function L(he,ae){var Ve,fe;try{Ve=S.stringify(he)}catch(te){if(ae&&O(ae))try{Ve=ae(he)}catch(ce){fe=ce}else fe=te}return{error:fe,value:Ve}}function $(he,ae){return function(Ve,fe){try{ae(Ve,fe)}catch(te){he.error(te)}}}function de(he){return function ae(Ve,fe){var te,ce,Qe,Ye={};try{for(ce in Ve)(te=Ve[ce])&&(W(te,"object")||W(te,"array"))?fe.includes(te)?Ye[ce]="Removed circular reference: "+N(te):((Qe=fe.slice()).push(te),Ye[ce]=ae(te,Qe)):Ye[ce]=te}catch(Le){Ye="Failed cloning custom data: "+Le.message}return Ye}(he,[he])}var oe=["log","network","dom","navigation","error","manual"],pe=["critical","error","warning","info","debug"];function Ce(he,ae){for(var Ve=0;Ve<he.length;++Ve)if(he[Ve]===ae)return!0;return!1}function ve(){return Date.now?+Date.now():+new Date}Re.exports={addParamsAndAccessTokenToPath:function(he,ae,Ve){(Ve=Ve||{}).access_token=he;var fe,te=[];for(fe in Ve)Object.prototype.hasOwnProperty.call(Ve,fe)&&te.push([fe,Ve[fe]].join("="));var ce="?"+te.sort().join("&");(ae=ae||{}).path=ae.path||"";var Qe,Ye=ae.path.indexOf("?"),Le=ae.path.indexOf("#");ae.path=-1!==Ye&&(-1===Le||Le>Ye)?(Qe=ae.path).substring(0,Ye)+ce+"&"+Qe.substring(Ye+1):-1!==Le?(Qe=ae.path).substring(0,Le)+ce+Qe.substring(Le):ae.path+ce},createItem:function(he,ae,Ve,fe,te){for(var ce,Qe,Ye,Le,Pe,Ie,Me=[],at=[],We=0,wt=he.length;We<wt;++We){var Et=N(Ie=he[We]);switch(at.push(Et),Et){case"undefined":break;case"string":ce?Me.push(Ie):ce=Ie;break;case"function":Le=$(ae,Ie);break;case"date":Me.push(Ie);break;case"error":case"domexception":case"exception":Qe?Me.push(Ie):Qe=Ie;break;case"object":case"array":if(Ie instanceof Error||typeof DOMException<"u"&&Ie instanceof DOMException){Qe?Me.push(Ie):Qe=Ie;break}if(fe&&"object"===Et&&!Pe){for(var hn=0,Pn=fe.length;hn<Pn;++hn)if(void 0!==Ie[fe[hn]]){Pe=Ie;break}if(Pe)break}Ye?Me.push(Ie):Ye=Ie;break;default:if(Ie instanceof Error||typeof DOMException<"u"&&Ie instanceof DOMException){Qe?Me.push(Ie):Qe=Ie;break}Me.push(Ie)}}Ye&&(Ye=de(Ye)),Me.length>0&&(Ye||(Ye=de({})),Ye.extraArgs=de(Me));var Dt,kn,Cn={message:ce,err:Qe,custom:Ye,timestamp:ve(),callback:Le,notifier:Ve,diagnostic:{},uuid:V()};return Dt=Cn,(kn=Ye)&&void 0!==kn.level&&(Dt.level=kn.level,delete kn.level),kn&&void 0!==kn.skipFrames&&(Dt.skipFrames=kn.skipFrames,delete kn.skipFrames),fe&&Pe&&(Cn.request=Pe),te&&(Cn.lambdaContext=te),Cn._originalArgs=he,Cn.diagnostic.original_arg_types=at,Cn},addErrorContext:function(he,ae){var Ve=he.data.custom||{},fe=!1;try{for(var te=0;te<ae.length;++te)ae[te].hasOwnProperty("rollbarContext")&&(Ve=x(Ve,de(ae[te].rollbarContext)),fe=!0);fe&&(he.data.custom=Ve)}catch(ce){he.diagnostic.error_context="Failed: "+ce.message}},createTelemetryEvent:function(he){for(var ae,Ve,fe,te,ce=0,Qe=he.length;ce<Qe;++ce)switch(N(te=he[ce])){case"string":!ae&&Ce(oe,te)?ae=te:!fe&&Ce(pe,te)&&(fe=te);break;case"object":Ve=te}return{type:ae||"manual",metadata:Ve||{},level:fe}},filterIp:function(he,ae){if(he&&he.user_ip&&!0!==ae){var Ve=he.user_ip;if(ae)try{var fe;if(-1!==Ve.indexOf("."))(fe=Ve.split(".")).pop(),fe.push("0"),Ve=fe.join(".");else if(-1!==Ve.indexOf(":")){if((fe=Ve.split(":")).length>2){var te=fe.slice(0,3),ce=te[2].indexOf("/");-1!==ce&&(te[2]=te[2].substring(0,ce)),Ve=te.concat("0000:0000:0000:0000:0000").join(":")}}else Ve=null}catch{Ve=null}else Ve=null;he.user_ip=Ve}},formatArgsAsString:function(he){var ae,Ve,fe,te=[];for(ae=0,Ve=he.length;ae<Ve;++ae){switch(N(fe=he[ae])){case"object":(fe=(fe=L(fe)).error||fe.value).length>500&&(fe=fe.substr(0,497)+"...");break;case"null":fe="null";break;case"undefined":fe="undefined";break;case"symbol":fe=fe.toString()}te.push(fe)}return te.join(" ")},formatUrl:function(he,ae){if(!(ae=ae||he.protocol)&&he.port&&(80===he.port?ae="http:":443===he.port&&(ae="https:")),!he.hostname)return null;var Ve=(ae=ae||"https:")+"//"+he.hostname;return he.port&&(Ve=Ve+":"+he.port),he.path&&(Ve+=he.path),Ve},get:function(he,ae){if(he){var Ve=ae.split("."),fe=he;try{for(var te=0,ce=Ve.length;te<ce;++te)fe=fe[Ve[te]]}catch{fe=void 0}return fe}},handleOptions:function(he,ae,Ve,fe){var ce,Qe,te=x(he,ae,Ve);return Qe=fe,(ce=te).hostWhiteList&&!ce.hostSafeList&&(ce.hostSafeList=ce.hostWhiteList,ce.hostWhiteList=void 0,Qe&&Qe.log("hostWhiteList is deprecated. Use hostSafeList.")),ce.hostBlackList&&!ce.hostBlockList&&(ce.hostBlockList=ce.hostBlackList,ce.hostBlackList=void 0,Qe&&Qe.log("hostBlackList is deprecated. Use hostBlockList.")),te=ce,!ae||ae.overwriteScrubFields||ae.scrubFields&&(te.scrubFields=(he.scrubFields||[]).concat(ae.scrubFields)),te},isError:function(he){return W(he,"error")||W(he,"exception")},isFiniteNumber:function(he){return Number.isFinite(he)},isFunction:O,isIterable:function(he){var ae=N(he);return"object"===ae||"array"===ae},isNativeFunction:Z,isObject:K,isString:function(he){return"string"==typeof he||he instanceof String},isType:W,isPromise:function(he){return K(he)&&W(he.then,"function")},jsonParse:function(he){var ae,Ve;try{ae=S.parse(he)}catch(fe){Ve=fe}return{error:Ve,value:ae}},LEVELS:{debug:0,info:1,warning:2,error:3,critical:4},makeUnhandledStackInfo:function(he,ae,Ve,fe,te,ce,Qe,Ye){var Le={url:ae||"",line:Ve,column:fe};Le.func=Ye.guessFunctionName(Le.url,Le.line),Le.context=Ye.gatherContext(Le.url,Le.line);var Pe=typeof document<"u"&&document&&document.location&&document.location.href,Ie=typeof window<"u"&&window&&window.navigator&&window.navigator.userAgent;return{mode:ce,message:te?String(te):he||Qe,url:Pe,stack:[Le],useragent:Ie}},merge:x,now:ve,redact:function(){return"********"},RollbarJSON:S,sanitizeUrl:function(he){var ae=function(Ve){if(W(Ve,"string")){for(var fe=B,te=fe.parser[fe.strictMode?"strict":"loose"].exec(Ve),ce={},Qe=0,Ye=fe.key.length;Qe<Ye;++Qe)ce[fe.key[Qe]]=te[Qe]||"";return ce[fe.q.name]={},ce[fe.key[12]].replace(fe.q.parser,function(Le,Pe,Ie){Pe&&(ce[fe.q.name][Pe]=Ie)}),ce}}(he);return ae?(""===ae.anchor&&(ae.source=ae.source.replace("#","")),he=ae.source.replace("?"+ae.query,"")):"(unknown)"},set:function(he,ae,Ve){if(he){var fe=ae.split("."),te=fe.length;if(!(te<1))if(1!==te)try{for(var ce=he[fe[0]]||{},Qe=ce,Ye=1;Ye<te-1;++Ye)ce[fe[Ye]]=ce[fe[Ye]]||{},ce=ce[fe[Ye]];ce[fe[te-1]]=Ve,he[fe[0]]=Qe}catch{return}else he[fe[0]]=Ve}},setupJSON:function(he){O(S.stringify)&&O(S.parse)||(W(JSON,"undefined")||(he?(Z(JSON.stringify)&&(S.stringify=JSON.stringify),Z(JSON.parse)&&(S.parse=JSON.parse)):(O(JSON.stringify)&&(S.stringify=JSON.stringify),O(JSON.parse)&&(S.parse=JSON.parse))),O(S.stringify)&&O(S.parse)||he&&he(S))},stringify:L,maxByteSize:function(he){for(var ae=0,Ve=he.length,fe=0;fe<Ve;fe++){var te=he.charCodeAt(fe);te<128?ae+=1:te<2048?ae+=2:te<65536&&(ae+=3)}return ae},typeName:N,uuid4:V}},function(Re,H,m){"use strict";m(17);var x=m(18),S=m(0);Re.exports={error:function(){var W=Array.prototype.slice.call(arguments,0);W.unshift("Rollbar:"),x.ieVersion()<=8?console.error(S.formatArgsAsString(W)):console.error.apply(console,W)},info:function(){var W=Array.prototype.slice.call(arguments,0);W.unshift("Rollbar:"),x.ieVersion()<=8?console.info(S.formatArgsAsString(W)):console.info.apply(console,W)},log:function(){var W=Array.prototype.slice.call(arguments,0);W.unshift("Rollbar:"),x.ieVersion()<=8?console.log(S.formatArgsAsString(W)):console.log.apply(console,W)}}},function(Re,H,m){"use strict";Re.exports={parse:function(x){var S,W,N={protocol:null,auth:null,host:null,path:null,hash:null,href:x,hostname:null,port:null,pathname:null,search:null,query:null};if(-1!==(S=x.indexOf("//"))?(N.protocol=x.substring(0,S),W=S+2):W=0,-1!==(S=x.indexOf("@",W))&&(N.auth=x.substring(W,S),W=S+1),-1===(S=x.indexOf("/",W))){if(-1===(S=x.indexOf("?",W)))return-1===(S=x.indexOf("#",W))?N.host=x.substring(W):(N.host=x.substring(W,S),N.hash=x.substring(S)),N.hostname=N.host.split(":")[0],N.port=N.host.split(":")[1],N.port&&(N.port=parseInt(N.port,10)),N;N.host=x.substring(W,S),N.hostname=N.host.split(":")[0],N.port=N.host.split(":")[1],N.port&&(N.port=parseInt(N.port,10)),W=S}else N.host=x.substring(W,S),N.hostname=N.host.split(":")[0],N.port=N.host.split(":")[1],N.port&&(N.port=parseInt(N.port,10)),W=S;if(-1===(S=x.indexOf("#",W))?N.path=x.substring(W):(N.path=x.substring(W,S),N.hash=x.substring(S)),N.path){var O=N.path.split("?");N.pathname=O[0],N.query=O[1],N.search=N.query?"?"+N.query:null}return N}}},function(Re,H,m){"use strict";var x=m(24),S=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");function N(K){var V={};return V._stackFrame=K,V.url=K.fileName,V.line=K.lineNumber,V.func=K.functionName,V.column=K.columnNumber,V.args=K.args,V.context=null,V}function O(K,V){return{stack:function(){var B=[];V=V||0;try{B=x.parse(K)}catch{B=[]}for(var L=[],$=V;$<B.length;$++)L.push(new N(B[$]));return L}(),message:K.message,name:Z(K),rawStack:K.stack,rawException:K}}function Z(K){var V=K.name&&K.name.length&&K.name,B=K.constructor.name&&K.constructor.name.length&&K.constructor.name;return V&&B?"Error"===V?B:V:V||B}Re.exports={guessFunctionName:function(){return"?"},guessErrorClass:function(K){if(!K||!K.match)return["Unknown error. There was no error message to display.",""];var V=K.match(S),B="(unknown)";return V&&(K=(K=K.replace((V[V.length-2]||"")+(B=V[V.length-1])+":","")).replace(/(^[\s]+|[\s]+$)/g,"")),[B,K]},gatherContext:function W(){return null},parse:function(K,V){var B=K;if(B.nested||B.cause){for(var L=[];B;)L.push(new O(B,V)),B=B.nested||B.cause,V=0;return L[0].traceChain=L,L[0]}return new O(B,V)},Stack:O,Frame:N}},function(Re,H,m){"use strict";var x=m(0),S=m(5);function W(N,O){var Z=O.split("."),K=Z.length-1;try{for(var V=0;V<=K;++V)V<K?N=N[Z[V]]:N[Z[V]]=x.redact()}catch{}}Re.exports=function(N,O,Z){if(O=O||[],Z)for(var K=0;K<Z.length;++K)W(N,Z[K]);var V=function($){for(var oe=[],pe=0;pe<$.length;++pe)oe.push(new RegExp("^\\[?(%5[bB])?"+$[pe]+"\\[?(%5[bB])?\\]?(%5[dD])?$","i"));return oe}(O),B=function($){for(var oe=[],pe=0;pe<$.length;++pe)oe.push(new RegExp("(\\[?(%5[bB])?"+$[pe]+"\\[?(%5[bB])?\\]?(%5[dD])?=)([^&\\n]+)","igm"));return oe}(O);function L($,de){return de+x.redact()}return S(N,function $(de,oe,pe){var Ce=function(ve,he){var ae;for(ae=0;ae<V.length;++ae)if(V[ae].test(ve)){he=x.redact();break}return he}(de,oe);return Ce===oe?x.isType(oe,"object")||x.isType(oe,"array")?S(oe,$,pe):function(ve){var he;if(x.isType(ve,"string"))for(he=0;he<B.length;++he)ve=ve.replace(B[he],L);return ve}(Ce):Ce})}},function(Re,H,m){"use strict";var x=m(0);Re.exports=function(S,W,N){var O,Z,K,V,B=x.isType(S,"object"),L=x.isType(S,"array"),$=[];if(N=N||{obj:[],mapped:[]},B){if(V=N.obj.indexOf(S),B&&-1!==V)return N.mapped[V]||N.obj[V];N.obj.push(S),V=N.obj.length-1}if(B)for(O in S)Object.prototype.hasOwnProperty.call(S,O)&&$.push(O);else if(L)for(K=0;K<S.length;++K)$.push(K);var de=B?{}:[],oe=!0;for(K=0;K<$.length;++K)Z=S[O=$[K]],de[O]=W(O,Z,N),oe=oe&&de[O]===S[O];return B&&!oe&&(N.mapped[V]=de),oe?S:de}},function(Re,H,m){Re.exports=m(7)},function(Re,H,m){"use strict";var x=m(8),S=typeof window<"u"&&window._rollbarConfig,W=S&&S.globalAlias||"Rollbar",N=typeof window<"u"&&window[W]&&"function"==typeof window[W].shimId&&void 0!==window[W].shimId();if(typeof window>"u"||window._rollbarStartTime||(window._rollbarStartTime=(new Date).getTime()),!N&&S){var O=new x(S);window[W]=O}else typeof window<"u"?(window.rollbar=x,window._rollbarDidLoad=!0):typeof self<"u"&&(self.rollbar=x,self._rollbarDidLoad=!0);Re.exports=x},function(Re,H,m){"use strict";var x=m(9),S=m(31),W=m(32),N=m(35),O=m(37),Z=m(4),K=m(38);x.setComponents({telemeter:S,instrumenter:W,polyfillJSON:N,wrapGlobals:O,scrub:Z,truncation:K}),Re.exports=x},function(Re,H,m){"use strict";var x=m(10),S=m(0),W=m(15),N=m(1),O=m(19),Z=m(20),K=m(2),V=m(23),B=m(26),L=m(27),$=m(28),de=m(3);function oe(te,ce){this.options=S.handleOptions(fe,te,null,N),this.options._configuredOptions=te;var Qe=this.components.telemeter,Ye=this.components.instrumenter,Le=this.components.polyfillJSON;this.wrapGlobals=this.components.wrapGlobals,this.scrub=this.components.scrub;var Pe=this.components.truncation,Ie=new Z(Pe),Me=new W(this.options,Ie,K,Pe);Qe&&(this.telemeter=new Qe(this.options)),this.client=ce||new x(this.options,Me,N,this.telemeter,"browser");var hn,at=he(),We=typeof document<"u"&&document;this.isChrome=at.chrome&&at.chrome.runtime,this.anonymousErrorsPending=0,hn=at,this.client.notifier.addTransform(V.handleDomException).addTransform(V.handleItemWithError).addTransform(V.ensureItemHasSomethingToSay).addTransform(V.addBaseInfo).addTransform(V.addRequestInfo(hn)).addTransform(V.addClientInfo(hn)).addTransform(V.addPluginInfo(hn)).addTransform(V.addBody).addTransform(B.addMessageWithError).addTransform(B.addTelemetryData).addTransform(B.addConfigToPayload).addTransform(V.addScrubber(this.scrub)).addTransform(B.addPayloadOptions).addTransform(B.userTransform(N)).addTransform(B.addConfiguredOptions).addTransform(B.addDiagnosticKeys).addTransform(B.itemToPayload),this.client.queue.addPredicate($.checkLevel).addPredicate(L.checkIgnore).addPredicate($.userCheckIgnore(N)).addPredicate($.urlIsNotBlockListed(N)).addPredicate($.urlIsSafeListed(N)).addPredicate($.messageIsIgnored(N)),this.setupUnhandledCapture(),Ye&&(this.instrumenter=new Ye(this.options,this.client.telemeter,this,at,We),this.instrumenter.instrument()),S.setupJSON(Le),this.rollbar=this}var pe=null;function Ce(te){var ce="Rollbar is not initialized";N.error(ce),te&&te(new Error(ce))}function ve(te){for(var ce=0,Qe=te.length;ce<Qe;++ce)if(S.isFunction(te[ce]))return te[ce]}function he(){return typeof window<"u"&&window||typeof self<"u"&&self}oe.init=function(te,ce){return pe?pe.global(te).configure(te):pe=new oe(te,ce)},oe.prototype.components={},oe.setComponents=function(te){oe.prototype.components=te},oe.prototype.global=function(te){return this.client.global(te),this},oe.global=function(te){if(pe)return pe.global(te);Ce()},oe.prototype.configure=function(te,ce){var Qe=this.options,Ye={};return ce&&(Ye={payload:ce}),this.options=S.handleOptions(Qe,te,Ye,N),this.options._configuredOptions=S.handleOptions(Qe._configuredOptions,te,Ye),this.client.configure(this.options,ce),this.instrumenter&&this.instrumenter.configure(this.options),this.setupUnhandledCapture(),this},oe.configure=function(te,ce){if(pe)return pe.configure(te,ce);Ce()},oe.prototype.lastError=function(){return this.client.lastError},oe.lastError=function(){if(pe)return pe.lastError();Ce()},oe.prototype.log=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.log(te),{uuid:ce}},oe.log=function(){if(pe)return pe.log.apply(pe,arguments);Ce(ve(arguments))},oe.prototype.debug=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.debug(te),{uuid:ce}},oe.debug=function(){if(pe)return pe.debug.apply(pe,arguments);Ce(ve(arguments))},oe.prototype.info=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.info(te),{uuid:ce}},oe.info=function(){if(pe)return pe.info.apply(pe,arguments);Ce(ve(arguments))},oe.prototype.warn=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.warn(te),{uuid:ce}},oe.warn=function(){if(pe)return pe.warn.apply(pe,arguments);Ce(ve(arguments))},oe.prototype.warning=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.warning(te),{uuid:ce}},oe.warning=function(){if(pe)return pe.warning.apply(pe,arguments);Ce(ve(arguments))},oe.prototype.error=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.error(te),{uuid:ce}},oe.error=function(){if(pe)return pe.error.apply(pe,arguments);Ce(ve(arguments))},oe.prototype.critical=function(){var te=this._createItem(arguments),ce=te.uuid;return this.client.critical(te),{uuid:ce}},oe.critical=function(){if(pe)return pe.critical.apply(pe,arguments);Ce(ve(arguments))},oe.prototype.buildJsonPayload=function(te){return this.client.buildJsonPayload(te)},oe.buildJsonPayload=function(){if(pe)return pe.buildJsonPayload.apply(pe,arguments);Ce()},oe.prototype.sendJsonPayload=function(te){return this.client.sendJsonPayload(te)},oe.sendJsonPayload=function(){if(pe)return pe.sendJsonPayload.apply(pe,arguments);Ce()},oe.prototype.setupUnhandledCapture=function(){var te=he();this.unhandledExceptionsInitialized||(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(O.captureUncaughtExceptions(te,this),this.wrapGlobals&&this.options.wrapGlobalEventHandlers&&this.wrapGlobals(te,this),this.unhandledExceptionsInitialized=!0),this.unhandledRejectionsInitialized||(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&(O.captureUnhandledRejections(te,this),this.unhandledRejectionsInitialized=!0)},oe.prototype.handleUncaughtException=function(te,ce,Qe,Ye,Le,Pe){if(this.options.captureUncaught||this.options.handleUncaughtExceptions){if(this.options.inspectAnonymousErrors&&this.isChrome&&null===Le&&""===ce)return"anonymous";var Ie,Me=S.makeUnhandledStackInfo(te,ce,Qe,Ye,Le,"onerror","uncaught exception",de);S.isError(Le)?(Ie=this._createItem([te,Le,Pe]))._unhandledStackInfo=Me:S.isError(ce)?(Ie=this._createItem([te,ce,Pe]))._unhandledStackInfo=Me:(Ie=this._createItem([te,Pe])).stackInfo=Me,Ie.level=this.options.uncaughtErrorLevel,Ie._isUncaught=!0,this.client.log(Ie)}},oe.prototype.handleAnonymousErrors=function(){if(this.options.inspectAnonymousErrors&&this.isChrome){var te=this;try{Error.prepareStackTrace=function(ce,Qe){if(te.options.inspectAnonymousErrors&&te.anonymousErrorsPending){if(te.anonymousErrorsPending-=1,!ce)return;ce._isAnonymous=!0,te.handleUncaughtException(ce.message,null,null,null,ce)}return ce.stack}}catch(ce){this.options.inspectAnonymousErrors=!1,this.error("anonymous error handler failed",ce)}}},oe.prototype.handleUnhandledRejection=function(te,ce){if(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections){var Qe="unhandled rejection was null or undefined!";if(te)if(te.message)Qe=te.message;else{var Ye=S.stringify(te);Ye.value&&(Qe=Ye.value)}var Le,Pe=te&&te._rollbarContext||ce&&ce._rollbarContext;S.isError(te)?Le=this._createItem([Qe,te,Pe]):(Le=this._createItem([Qe,te,Pe])).stackInfo=S.makeUnhandledStackInfo(Qe,"",0,0,null,"unhandledrejection","",de),Le.level=this.options.uncaughtErrorLevel,Le._isUncaught=!0,Le._originalArgs=Le._originalArgs||[],Le._originalArgs.push(ce),this.client.log(Le)}},oe.prototype.wrap=function(te,ce,Qe){try{var Ye;if(Ye=S.isFunction(ce)?ce:function(){return ce||{}},!S.isFunction(te)||te._isWrap)return te;if(!te._rollbar_wrapped&&(te._rollbar_wrapped=function(){Qe&&S.isFunction(Qe)&&Qe.apply(this,arguments);try{return te.apply(this,arguments)}catch(Ie){var Pe=Ie;throw Pe&&window._rollbarWrappedError!==Pe&&(S.isType(Pe,"string")&&(Pe=new String(Pe)),Pe._rollbarContext=Ye()||{},Pe._rollbarContext._wrappedSource=te.toString(),window._rollbarWrappedError=Pe),Pe}},te._rollbar_wrapped._isWrap=!0,te.hasOwnProperty))for(var Le in te)te.hasOwnProperty(Le)&&"_rollbar_wrapped"!==Le&&(te._rollbar_wrapped[Le]=te[Le]);return te._rollbar_wrapped}catch{return te}},oe.wrap=function(te,ce){if(pe)return pe.wrap(te,ce);Ce()},oe.prototype.captureEvent=function(){var te=S.createTelemetryEvent(arguments);return this.client.captureEvent(te.type,te.metadata,te.level)},oe.captureEvent=function(){if(pe)return pe.captureEvent.apply(pe,arguments);Ce()},oe.prototype.captureDomContentLoaded=function(te,ce){return ce||(ce=new Date),this.client.captureDomContentLoaded(ce)},oe.prototype.captureLoad=function(te,ce){return ce||(ce=new Date),this.client.captureLoad(ce)},oe.prototype.loadFull=function(){N.info("Unexpected Rollbar.loadFull() called on a Notifier instance. This can happen when Rollbar is loaded multiple times.")},oe.prototype._createItem=function(te){return S.createItem(te,N,this)};var ae=m(29),Ve=m(30),fe={version:ae.version,scrubFields:Ve.scrubFields,logLevel:ae.logLevel,reportLevel:ae.reportLevel,uncaughtErrorLevel:ae.uncaughtErrorLevel,endpoint:ae.endpoint,verbose:!1,enabled:!0,transmit:!0,sendConfig:!1,includeItemsInTelemetry:!0,captureIp:!0,inspectAnonymousErrors:!0,ignoreDuplicateErrors:!0,wrapGlobalEventHandlers:!1};Re.exports=oe},function(Re,H,m){"use strict";var x=m(11),S=m(13),W=m(14),N=m(0);function O(V,B,L,$,de){this.options=N.merge(V),this.logger=L,O.rateLimiter.configureGlobal(this.options),O.rateLimiter.setPlatformOptions(de,this.options),this.api=B,this.queue=new S(O.rateLimiter,B,L,this.options);var oe=this.options.tracer||null;K(oe)?(this.tracer=oe,this.options.tracer="opentracing-tracer-enabled",this.options._configuredOptions.tracer="opentracing-tracer-enabled"):this.tracer=null,this.notifier=new W(this.queue,this.options),this.telemeter=$,Z(V),this.lastError=null,this.lastErrorHash="none"}function Z(V){V.stackTraceLimit&&(Error.stackTraceLimit=V.stackTraceLimit)}function K(V){if(!V||!V.scope||"function"!=typeof V.scope)return!1;var B=V.scope();return!(!B||!B.active||"function"!=typeof B.active)}O.rateLimiter=new x({maxItems:0,itemsPerMinute:60}),O.prototype.global=function(V){return O.rateLimiter.configureGlobal(V),this},O.prototype.configure=function(V,B){var $={};B&&($={payload:B}),this.options=N.merge(this.options,V,$);var de=this.options.tracer||null;return K(de)?(this.tracer=de,this.options.tracer="opentracing-tracer-enabled",this.options._configuredOptions.tracer="opentracing-tracer-enabled"):this.tracer=null,this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),Z(V),this.global(this.options),K(V.tracer)&&(this.tracer=V.tracer),this},O.prototype.log=function(V){var B=this._defaultLogLevel();return this._log(B,V)},O.prototype.debug=function(V){this._log("debug",V)},O.prototype.info=function(V){this._log("info",V)},O.prototype.warn=function(V){this._log("warning",V)},O.prototype.warning=function(V){this._log("warning",V)},O.prototype.error=function(V){this._log("error",V)},O.prototype.critical=function(V){this._log("critical",V)},O.prototype.wait=function(V){this.queue.wait(V)},O.prototype.captureEvent=function(V,B,L){return this.telemeter&&this.telemeter.captureEvent(V,B,L)},O.prototype.captureDomContentLoaded=function(V){return this.telemeter&&this.telemeter.captureDomContentLoaded(V)},O.prototype.captureLoad=function(V){return this.telemeter&&this.telemeter.captureLoad(V)},O.prototype.buildJsonPayload=function(V){return this.api.buildJsonPayload(V)},O.prototype.sendJsonPayload=function(V){this.api.postJsonPayload(V)},O.prototype._log=function(V,B){var L;if(B.callback&&(L=B.callback,delete B.callback),this.options.ignoreDuplicateErrors&&this._sameAsLastError(B)){if(L){var $=new Error("ignored identical item");$.item=B,L($)}}else try{this._addTracingInfo(B),B.level=B.level||V,this.telemeter&&this.telemeter._captureRollbarItem(B),B.telemetryEvents=this.telemeter&&this.telemeter.copyEvents()||[],this.notifier.log(B,L)}catch(de){L&&L(de),this.logger.error(de)}},O.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},O.prototype._sameAsLastError=function(V){if(!V._isUncaught)return!1;var L,B=((L=V).message||"")+"::"+((L.err||{}).stack||String(L.err));return this.lastErrorHash===B||(this.lastError=V.err,this.lastErrorHash=B,!1)},O.prototype._addTracingInfo=function(V){if(this.tracer){var B=this.tracer.scope().active();if(function(de){if(!de||!de.context||"function"!=typeof de.context)return!1;var oe=de.context();return!(!oe||!oe.toSpanId||!oe.toTraceId||"function"!=typeof oe.toSpanId||"function"!=typeof oe.toTraceId)}(B)){B.setTag("rollbar.error_uuid",V.uuid),B.setTag("rollbar.has_error",!0),B.setTag("error",!0),B.setTag("rollbar.item_url","https://rollbar.com/item/uuid/?uuid="+V.uuid),B.setTag("rollbar.occurrence_url","https://rollbar.com/occurrence/uuid/?uuid="+V.uuid);var L=B.context().toSpanId(),$=B.context().toTraceId();V.custom?(V.custom.opentracing_span_id=L,V.custom.opentracing_trace_id=$):V.custom={opentracing_span_id:L,opentracing_trace_id:$}}}},Re.exports=O},function(Re,H,m){"use strict";var x=m(0);function S(O){this.startTime=x.now(),this.counter=0,this.perMinCounter=0,this.platform=null,this.platformOptions={},this.configureGlobal(O)}function W(O,Z,K){return!O.ignoreRateLimit&&Z>=1&&K>Z}function N(O,Z,K,V,B,L,$){var oe,pe,fe,de=null;return K&&(K=new Error(K)),K||V||(fe={body:{message:{body:$?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.",extra:{maxItems:B,itemsPerMinute:L}}},language:"javascript",environment:(pe=Z).environment||pe.payload&&pe.payload.environment,notifier:{version:pe.notifier&&pe.notifier.version||pe.version}},"browser"===(oe=O)?(fe.platform="browser",fe.framework="browser-js",fe.notifier.name="rollbar-browser-js"):"server"===oe?(fe.framework=pe.framework||"node-js",fe.notifier.name=pe.notifier.name):"react-native"===oe&&(fe.framework=pe.framework||"react-native",fe.notifier.name=pe.notifier.name),de=fe),{error:K,shouldSend:V,payload:de}}S.globalSettings={startTime:x.now(),maxItems:void 0,itemsPerMinute:void 0},S.prototype.configureGlobal=function(O){void 0!==O.startTime&&(S.globalSettings.startTime=O.startTime),void 0!==O.maxItems&&(S.globalSettings.maxItems=O.maxItems),void 0!==O.itemsPerMinute&&(S.globalSettings.itemsPerMinute=O.itemsPerMinute)},S.prototype.shouldSend=function(O,Z){var K=(Z=Z||x.now())-this.startTime;(K<0||K>=6e4)&&(this.startTime=Z,this.perMinCounter=0);var V=S.globalSettings.maxItems,B=S.globalSettings.itemsPerMinute;if(W(O,V,this.counter))return N(this.platform,this.platformOptions,V+" max items reached",!1);if(W(O,B,this.perMinCounter))return N(this.platform,this.platformOptions,B+" items per minute reached",!1);this.counter++,this.perMinCounter++;var L=!W(O,V,this.counter),$=L;return L=L&&!W(O,B,this.perMinCounter),N(this.platform,this.platformOptions,null,L,V,B,$)},S.prototype.setPlatformOptions=function(O,Z){this.platform=O,this.platformOptions=Z},Re.exports=S},function(Re,H,m){"use strict";var x=Object.prototype.hasOwnProperty,S=Object.prototype.toString,W=function(N){if(!N||"[object Object]"!==S.call(N))return!1;var O,Z=x.call(N,"constructor"),K=N.constructor&&N.constructor.prototype&&x.call(N.constructor.prototype,"isPrototypeOf");if(N.constructor&&!Z&&!K)return!1;for(O in N);return void 0===O||x.call(N,O)};Re.exports=function N(){var O,Z,K,V,B,L={},$=null,de=arguments.length;for(O=0;O<de;O++)if(null!=($=arguments[O]))for(B in $)Z=L[B],L!==(K=$[B])&&(K&&W(K)?(V=Z&&W(Z)?Z:{},L[B]=N(V,K)):void 0!==K&&(L[B]=K));return L}},function(Re,H,m){"use strict";var x=m(0);function S(N,O,Z,K){this.rateLimiter=N,this.api=O,this.logger=Z,this.options=K,this.predicates=[],this.pendingItems=[],this.pendingRequests=[],this.retryQueue=[],this.retryHandle=null,this.waitCallback=null,this.waitIntervalID=null}S.prototype.configure=function(N){return this.api&&this.api.configure(N),this.options=x.merge(this.options,N),this},S.prototype.addPredicate=function(N){return x.isFunction(N)&&this.predicates.push(N),this},S.prototype.addPendingItem=function(N){this.pendingItems.push(N)},S.prototype.removePendingItem=function(N){var O=this.pendingItems.indexOf(N);-1!==O&&this.pendingItems.splice(O,1)},S.prototype.addItem=function(N,O,Z,K){O&&x.isFunction(O)||(O=function(){});var V=this._applyPredicates(N);if(V.stop)return this.removePendingItem(K),void O(V.err);if(this._maybeLog(N,Z),this.removePendingItem(K),this.options.transmit){this.pendingRequests.push(N);try{this._makeApiRequest(N,function(B,L){this._dequeuePendingRequest(N),O(B,L)}.bind(this))}catch(B){this._dequeuePendingRequest(N),O(B)}}else O(new Error("Transmit disabled"))},S.prototype.wait=function(N){x.isFunction(N)&&(this.waitCallback=N,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval(function(){this._maybeCallWait()}.bind(this),500)))},S.prototype._applyPredicates=function(N){for(var O=null,Z=0,K=this.predicates.length;Z<K;Z++)if(!(O=this.predicates[Z](N,this.options))||void 0!==O.err)return{stop:!0,err:O.err};return{stop:!1,err:null}},S.prototype._makeApiRequest=function(N,O){var Z=this.rateLimiter.shouldSend(N);Z.shouldSend?this.api.postItem(N,function(K,V){K?this._maybeRetry(K,N,O):O(K,V)}.bind(this)):Z.error?O(Z.error):this.api.postItem(Z.payload,O)};var W=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"];S.prototype._maybeRetry=function(N,O,Z){var K=!1;if(this.options.retryInterval){for(var V=0,B=W.length;V<B;V++)if(N.code===W[V]){K=!0;break}K&&x.isFiniteNumber(this.options.maxRetries)&&(O.retries=O.retries?O.retries+1:1,O.retries>this.options.maxRetries&&(K=!1))}K?this._retryApiRequest(O,Z):Z(N)},S.prototype._retryApiRequest=function(N,O){this.retryQueue.push({item:N,callback:O}),this.retryHandle||(this.retryHandle=setInterval(function(){for(;this.retryQueue.length;){var Z=this.retryQueue.shift();this._makeApiRequest(Z.item,Z.callback)}}.bind(this),this.options.retryInterval))},S.prototype._dequeuePendingRequest=function(N){var O=this.pendingRequests.indexOf(N);-1!==O&&(this.pendingRequests.splice(O,1),this._maybeCallWait())},S.prototype._maybeLog=function(N,O){if(this.logger&&this.options.verbose){var Z=O;if(Z=(Z=Z||x.get(N,"body.trace.exception.message"))||x.get(N,"body.trace_chain.0.exception.message"))return void this.logger.error(Z);(Z=x.get(N,"body.message.body"))&&this.logger.log(Z)}},S.prototype._maybeCallWait=function(){return!(!x.isFunction(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),0))},Re.exports=S},function(Re,H,m){"use strict";var x=m(0);function S(W,N){this.queue=W,this.options=N,this.transforms=[],this.diagnostic={}}S.prototype.configure=function(W){return this.queue&&this.queue.configure(W),this.options=x.merge(this.options,W),this},S.prototype.addTransform=function(W){return x.isFunction(W)&&this.transforms.push(W),this},S.prototype.log=function(W,N){if(N&&x.isFunction(N)||(N=function(){}),!this.options.enabled)return N(new Error("Rollbar is not enabled"));this.queue.addPendingItem(W);var O=W.err;this._applyTransforms(W,function(Z,K){if(Z)return this.queue.removePendingItem(W),N(Z,null);this.queue.addItem(K,N,O,W)}.bind(this))},S.prototype._applyTransforms=function(W,N){var O=-1,Z=this.transforms.length,K=this.transforms,V=this.options,B=function(L,$){L?N(L,null):++O!==Z?K[O]($,V,B):N(null,$)};B(null,W)},Re.exports=S},function(Re,H,m){"use strict";var x=m(0),S=m(16),W={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443};function N(Z,K,V,B,L){this.options=Z,this.transport=K,this.url=V,this.truncation=B,this.jsonBackup=L,this.accessToken=Z.accessToken,this.transportOptions=O(Z,V)}function O(Z,K){return S.getTransportFromOptions(Z,W,K)}N.prototype.postItem=function(Z,K){var V=S.transportOptions(this.transportOptions,"POST"),B=S.buildPayload(this.accessToken,Z,this.jsonBackup),L=this;setTimeout(function(){L.transport.post(L.accessToken,V,B,K)},0)},N.prototype.buildJsonPayload=function(Z,K){var V,B=S.buildPayload(this.accessToken,Z,this.jsonBackup);return(V=this.truncation?this.truncation.truncate(B):x.stringify(B)).error?(K&&K(V.error),null):V.value},N.prototype.postJsonPayload=function(Z,K){var V=S.transportOptions(this.transportOptions,"POST");this.transport.postJsonPayload(this.accessToken,V,Z,K)},N.prototype.configure=function(Z){return this.options=x.merge(this.oldOptions,Z),this.transportOptions=O(this.options,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this},Re.exports=N},function(Re,H,m){"use strict";var x=m(0);Re.exports={buildPayload:function(S,W,N){if(!x.isType(W.context,"string")){var O=x.stringify(W.context,N);W.context=O.error?"Error: could not serialize 'context'":O.value||"",W.context.length>255&&(W.context=W.context.substr(0,255))}return{access_token:S,data:W}},getTransportFromOptions:function(S,W,N){var Ce,ve,O=W.hostname,Z=W.protocol,K=W.port,V=W.path,B=W.search,L=S.timeout,$=(Ce=typeof window<"u"&&window||typeof self<"u"&&self,ve=S.defaultTransport||"xhr",void 0===Ce.fetch&&(ve="xhr"),void 0===Ce.XMLHttpRequest&&(ve="fetch"),ve),de=S.proxy;if(S.endpoint){var oe=N.parse(S.endpoint);O=oe.hostname,Z=oe.protocol,K=oe.port,V=oe.pathname,B=oe.search}return{timeout:L,hostname:O,protocol:Z,port:K,path:V,search:B,proxy:de,transport:$}},transportOptions:function(S,W){var N=S.protocol||"https:",O=S.port||("http:"===N?80:"https:"===N?443:void 0),Z=S.hostname,K=S.path;return S.search&&(K+=S.search),S.proxy&&(K=N+"//"+Z+K,Z=S.proxy.host||S.proxy.hostname,O=S.proxy.port,N=S.proxy.protocol||N),{timeout:S.timeout,protocol:N,hostname:Z,path:K,port:O,method:W,transport:S.transport}},appendPathToPath:function(S,W){var N=/\/$/.test(S),O=/^\//.test(W);return N&&O?W=W.substring(1):N||O||(W="/"+W),S+W}}},function(Re,H){!function(m){"use strict";m.console||(m.console={});for(var x,S,W=m.console,N=function(){},O=["memory"],Z="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");x=O.pop();)W[x]||(W[x]={});for(;S=Z.pop();)W[S]||(W[S]=N)}(typeof window>"u"?this:window)},function(Re,H,m){"use strict";Re.exports={ieVersion:function(){if(typeof document<"u"){for(var S=3,W=document.createElement("div"),N=W.getElementsByTagName("i");W.innerHTML="\x3c!--[if gt IE "+ ++S+"]><i></i><![endif]--\x3e",N[0];);return S>4?S:void 0}}}},function(Re,H,m){"use strict";function x(S,W,N,O){S._rollbarWrappedError&&(O[4]||(O[4]=S._rollbarWrappedError),O[5]||(O[5]=S._rollbarWrappedError._rollbarContext),S._rollbarWrappedError=null);var Z=W.handleUncaughtException.apply(W,O);N&&N.apply(S,O),"anonymous"===Z&&(W.anonymousErrorsPending+=1)}Re.exports={captureUncaughtExceptions:function(S,W,N){if(S){var O;if("function"==typeof W._rollbarOldOnError)O=W._rollbarOldOnError;else if(S.onerror){for(O=S.onerror;O._rollbarOldOnError;)O=O._rollbarOldOnError;W._rollbarOldOnError=O}W.handleAnonymousErrors();var Z=function(){var K=Array.prototype.slice.call(arguments,0);x(S,W,O,K)};N&&(Z._rollbarOldOnError=O),S.onerror=Z}},captureUnhandledRejections:function(S,W,N){if(S){"function"==typeof S._rollbarURH&&S._rollbarURH.belongsToShim&&S.removeEventListener("unhandledrejection",S._rollbarURH);var O=function(Z){var K,V,B;try{K=Z.reason}catch{K=void 0}try{V=Z.promise}catch{V="[unhandledrejection] error getting `promise` from event"}try{B=Z.detail,!K&&B&&(K=B.reason,V=B.promise)}catch{}K||(K="[unhandledrejection] error getting `reason` from event"),W&&W.handleUnhandledRejection&&W.handleUnhandledRejection(K,V)};O.belongsToShim=N,S._rollbarURH=O,S.addEventListener("unhandledrejection",O)}}}},function(Re,H,m){"use strict";var x=m(0),S=m(21),W=m(22);function N(O){this.truncation=O}N.prototype.get=function(O,Z,K,V,B){V&&x.isFunction(V)||(V=function(){}),x.addParamsAndAccessTokenToPath(O,Z,K);var L=x.formatUrl(Z);this._makeZoneRequest(O,L,"GET",null,V,B,Z.timeout,Z.transport)},N.prototype.post=function(O,Z,K,V,B){if(V&&x.isFunction(V)||(V=function(){}),!K)return V(new Error("Cannot send empty request"));var L;if((L=this.truncation?this.truncation.truncate(K):x.stringify(K)).error)return V(L.error);var $=L.value,de=x.formatUrl(Z);this._makeZoneRequest(O,de,"POST",$,V,B,Z.timeout,Z.transport)},N.prototype.postJsonPayload=function(O,Z,K,V,B){V&&x.isFunction(V)||(V=function(){});var L=x.formatUrl(Z);this._makeZoneRequest(O,L,"POST",K,V,B,Z.timeout,Z.transport)},N.prototype._makeZoneRequest=function(){var O=typeof window<"u"&&window||void 0!==B&&B,Z=O&&O.Zone&&O.Zone.current,K=Array.prototype.slice.call(arguments);if(Z&&"angular"===Z._name){var B=this;Z._parent.run(function(){B._makeRequest.apply(void 0,K)})}else this._makeRequest.apply(void 0,K)},N.prototype._makeRequest=function(O,Z,K,V,B,L,$,de){if(typeof RollbarProxy<"u")return oe=V,pe=B,void(new RollbarProxy).sendJsonPayload(oe,function(Ce){},function(Ce){pe(new Error(Ce))});var oe,pe;"fetch"===de?S(O,Z,K,V,B,$):W(O,Z,K,V,B,L,$)},Re.exports=N},function(Re,H,m){"use strict";var x=m(1),S=m(0);Re.exports=function(W,N,O,Z,K,V){var B,L;S.isFiniteNumber(V)&&(B=new AbortController,L=setTimeout(function(){B.abort()},V)),fetch(N,{method:O,headers:{"Content-Type":"application/json","X-Rollbar-Access-Token":W,signal:B&&B.signal},body:Z}).then(function($){return L&&clearTimeout(L),$.json()}).then(function($){K(null,$)}).catch(function($){x.error($.message),K($)})}},function(Re,H,m){"use strict";var x=m(0),S=m(1);function W(N,O){var Z=new Error(N);return Z.code=O||"ENOTFOUND",Z}Re.exports=function(N,O,Z,K,V,B,L){var $;if(!($=B?B():function(){var pe,Ce,ve=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],he=ve.length;for(Ce=0;Ce<he;Ce++)try{pe=ve[Ce]();break}catch{}return pe}()))return V(new Error("No way to send a request"));try{try{var de=function(){try{if(de&&4===$.readyState){de=void 0;var pe=x.jsonParse($.responseText);if((he=$)&&he.status&&200===he.status)return void V(pe.error,pe.value);(ae=$)&&x.isType(ae.status,"number")&&ae.status>=400&&ae.status<600?(403===$.status&&S.error(pe.value&&pe.value.message),V(new Error(String($.status)))):V(W("XHR response had no status code (likely connection failure)"))}}catch(ae){var ve;ve=ae&&ae.stack?ae:new Error(ae),V(ve)}var ae,he};$.open(Z,O,!0),$.setRequestHeader&&($.setRequestHeader("Content-Type","application/json"),$.setRequestHeader("X-Rollbar-Access-Token",N)),x.isFiniteNumber(L)&&($.timeout=L),$.onreadystatechange=de,$.send(K)}catch{if(typeof XDomainRequest<"u"){if(!window||!window.location)return V(new Error("No window available during request, unknown environment"));"http:"===window.location.href.substring(0,5)&&"https"===O.substring(0,5)&&(O="http"+O.substring(5));var oe=new XDomainRequest;oe.onprogress=function(){},oe.ontimeout=function(){V(W("Request timed out","ETIMEDOUT"))},oe.onerror=function(){V(new Error("Error during request"))},oe.onload=function(){var Ce=x.jsonParse(oe.responseText);V(Ce.error,Ce.value)},oe.open(Z,O,!0),oe.send(K)}else V(new Error("Cannot find a method to transport a request"))}}catch(pe){V(pe)}}},function(Re,H,m){"use strict";var x=m(0),S=m(3),W=m(1);function N(V,B,L){var $=V.message,de=V.custom;$||($="Item sent with null or missing arguments.");var oe={body:$};de&&(oe.extra=x.merge(de)),x.set(V,"data.body",{message:oe}),L(null,V)}function O(V){var B=V.stackInfo.stack;return B&&0===B.length&&V._unhandledStackInfo&&V._unhandledStackInfo.stack&&(B=V._unhandledStackInfo.stack),B}function Z(V,B,L){var $=V&&V.data.description,de=V&&V.custom,oe=O(V),pe=S.guessErrorClass(B.message),Ce={exception:{class:K(B,pe[0],L),message:pe[1]}};if($&&(Ce.exception.description=$),oe){var ve,he,ae,Ve,fe,te,ce,Qe;for(0===oe.length&&(Ce.exception.stack=B.rawStack,Ce.exception.raw=String(B.rawException)),Ce.frames=[],ce=0;ce<oe.length;++ce)he={filename:(ve=oe[ce]).url?x.sanitizeUrl(ve.url):"(unknown)",lineno:ve.line||null,method:ve.func&&"?"!==ve.func?ve.func:"[anonymous]",colno:ve.column},L.sendFrameUrl&&(he.url=ve.url),he.method&&he.method.endsWith&&he.method.endsWith("_rollbar_wrapped")||(ae=Ve=fe=null,(te=ve.context?ve.context.length:0)&&(Qe=Math.floor(te/2),Ve=ve.context.slice(0,Qe),ae=ve.context[Qe],fe=ve.context.slice(Qe)),ae&&(he.code=ae),(Ve||fe)&&(he.context={},Ve&&Ve.length&&(he.context.pre=Ve),fe&&fe.length&&(he.context.post=fe)),ve.args&&(he.args=ve.args),Ce.frames.push(he));Ce.frames.reverse(),de&&(Ce.extra=x.merge(de))}return Ce}function K(V,B,L){return V.name?V.name:L.guessErrorClass?B:"(unknown)"}Re.exports={handleDomException:function(V,B,L){if(V.err&&"DOMException"===S.Stack(V.err).name){var $=new Error;$.name=V.err.name,$.message=V.err.message,$.stack=V.err.stack,$.nested=V.err,V.err=$}L(null,V)},handleItemWithError:function(V,B,L){if(V.data=V.data||{},V.err)try{V.stackInfo=V.err._savedStackTrace||S.parse(V.err,V.skipFrames),B.addErrorContext&&function($){var de=[],oe=$.err;for(de.push(oe);oe.nested||oe.cause;)de.push(oe=oe.nested||oe.cause);x.addErrorContext($,de)}(V)}catch($){W.error("Error while parsing the error object.",$);try{V.message=V.err.message||V.err.description||V.message||String(V.err)}catch(de){V.message=String(V.err)||String(de)}delete V.err}L(null,V)},ensureItemHasSomethingToSay:function(V,B,L){V.message||V.stackInfo||V.custom||L(new Error("No message, stack info, or custom data"),null),L(null,V)},addBaseInfo:function(V,B,L){V.data=x.merge(V.data,{environment:B.payload&&B.payload.environment||B.environment,level:V.level,endpoint:B.endpoint,platform:"browser",framework:"browser-js",language:"javascript",server:{},uuid:V.uuid,notifier:{name:"rollbar-browser-js",version:B.version},custom:V.custom}),L(null,V)},addRequestInfo:function(V){return function(B,L,$){var de={};V&&V.location&&(de.url=V.location.href,de.query_string=V.location.search);var oe="$remote_ip";L.captureIp?!0!==L.captureIp&&(oe+="_anonymize"):oe=null,oe&&(de.user_ip=oe),Object.keys(de).length>0&&x.set(B,"data.request",de),$(null,B)}},addClientInfo:function(V){return function(B,L,$){if(!V)return $(null,B);var de=V.navigator||{},oe=V.screen||{};x.set(B,"data.client",{runtime_ms:B.timestamp-V._rollbarStartTime,timestamp:Math.round(B.timestamp/1e3),javascript:{browser:de.userAgent,language:de.language,cookie_enabled:de.cookieEnabled,screen:{width:oe.width,height:oe.height}}}),$(null,B)}},addPluginInfo:function(V){return function(B,L,$){if(!V||!V.navigator)return $(null,B);for(var de,oe=[],pe=V.navigator.plugins||[],Ce=0,ve=pe.length;Ce<ve;++Ce)oe.push({name:(de=pe[Ce]).name,description:de.description});x.set(B,"data.client.javascript.plugins",oe),$(null,B)}},addBody:function(V,B,L){V.stackInfo?V.stackInfo.traceChain?function($,de,oe){for(var pe=$.stackInfo.traceChain,Ce=[],ve=pe.length,he=0;he<ve;he++){var ae=Z($,pe[he],de);Ce.push(ae)}x.set($,"data.body",{trace_chain:Ce}),oe(null,$)}(V,B,L):function($,de,oe){if(O($)){var pe=Z($,$.stackInfo,de);x.set($,"data.body",{trace:pe}),oe(null,$)}else{var Ce=$.stackInfo,ve=S.guessErrorClass(Ce.message),he=K(Ce,ve[0],de);$.message=he+": "+ve[1],N($,0,oe)}}(V,B,L):N(V,0,L)},addScrubber:function(V){return function(B,L,$){V&&(B.data=V(B.data,L.scrubFields||[],L.scrubPaths||[])),$(null,B)}}}},function(Re,H,m){var x,S,W;!function(N,O){"use strict";S=[m(25)],void 0===(W="function"==typeof(x=function(Z){var K=/(^|@)\S+:\d+/,V=/^\s*at .*(\S+:\d+|\(native\))/m,B=/^(eval@)?(\[native code])?$/;return{parse:function(L){if(void 0!==L.stacktrace||void 0!==L["opera#sourceloc"])return this.parseOpera(L);if(L.stack&&L.stack.match(V))return this.parseV8OrIE(L);if(L.stack)return this.parseFFOrSafari(L);throw new Error("Cannot parse given Error object")},extractLocation:function(L){if(-1===L.indexOf(":"))return[L];var $=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(L.replace(/[()]/g,""));return[$[1],$[2]||void 0,$[3]||void 0]},parseV8OrIE:function(L){return L.stack.split("\n").filter(function($){return!!$.match(V)},this).map(function($){$.indexOf("(eval ")>-1&&($=$.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var de=$.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),oe=de.match(/ (\(.+\)$)/);de=oe?de.replace(oe[0],""):de;var pe=this.extractLocation(oe?oe[1]:de),Ce=oe&&de||void 0,ve=["eval","<anonymous>"].indexOf(pe[0])>-1?void 0:pe[0];return new Z({functionName:Ce,fileName:ve,lineNumber:pe[1],columnNumber:pe[2],source:$})},this)},parseFFOrSafari:function(L){return L.stack.split("\n").filter(function($){return!$.match(B)},this).map(function($){if($.indexOf(" > eval")>-1&&($=$.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===$.indexOf("@")&&-1===$.indexOf(":"))return new Z({functionName:$});var de=/((.*".+"[^@]*)?[^@]*)(?:@)/,oe=$.match(de),pe=oe&&oe[1]?oe[1]:void 0,Ce=this.extractLocation($.replace(de,""));return new Z({functionName:pe,fileName:Ce[0],lineNumber:Ce[1],columnNumber:Ce[2],source:$})},this)},parseOpera:function(L){return!L.stacktrace||L.message.indexOf("\n")>-1&&L.message.split("\n").length>L.stacktrace.split("\n").length?this.parseOpera9(L):L.stack?this.parseOpera11(L):this.parseOpera10(L)},parseOpera9:function(L){for(var $=/Line (\d+).*script (?:in )?(\S+)/i,de=L.message.split("\n"),oe=[],pe=2,Ce=de.length;pe<Ce;pe+=2){var ve=$.exec(de[pe]);ve&&oe.push(new Z({fileName:ve[2],lineNumber:ve[1],source:de[pe]}))}return oe},parseOpera10:function(L){for(var $=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,de=L.stacktrace.split("\n"),oe=[],pe=0,Ce=de.length;pe<Ce;pe+=2){var ve=$.exec(de[pe]);ve&&oe.push(new Z({functionName:ve[3]||void 0,fileName:ve[2],lineNumber:ve[1],source:de[pe]}))}return oe},parseOpera11:function(L){return L.stack.split("\n").filter(function($){return!!$.match(K)&&!$.match(/^Error created at/)},this).map(function($){var de,oe=$.split("@"),pe=this.extractLocation(oe.pop()),Ce=oe.shift()||"",ve=Ce.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;Ce.match(/\(([^)]*)\)/)&&(de=Ce.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var he=void 0===de||"[arguments not available]"===de?void 0:de.split(",");return new Z({functionName:ve,args:he,fileName:pe[0],lineNumber:pe[1],columnNumber:pe[2],source:$})},this)}}})?x.apply(H,S):x)||(Re.exports=W)}()},function(Re,H,m){var x,S,W;!function(N,O){"use strict";S=[],void 0===(W="function"==typeof(x=function(){function Z(ve){return ve.charAt(0).toUpperCase()+ve.substring(1)}function K(ve){return function(){return this[ve]}}var V=["isConstructor","isEval","isNative","isToplevel"],B=["columnNumber","lineNumber"],L=["fileName","functionName","source"],$=V.concat(B,L,["args"],["evalOrigin"]);function de(ve){if(ve)for(var he=0;he<$.length;he++)void 0!==ve[$[he]]&&this["set"+Z($[he])](ve[$[he]])}de.prototype={getArgs:function(){return this.args},setArgs:function(ve){if("[object Array]"!==Object.prototype.toString.call(ve))throw new TypeError("Args must be an Array");this.args=ve},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(ve){if(ve instanceof de)this.evalOrigin=ve;else{if(!(ve instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new de(ve)}},toString:function(){var ve=this.getFileName()||"",he=this.getLineNumber()||"",ae=this.getColumnNumber()||"",Ve=this.getFunctionName()||"";return this.getIsEval()?ve?"[eval] ("+ve+":"+he+":"+ae+")":"[eval]:"+he+":"+ae:Ve?Ve+" ("+ve+":"+he+":"+ae+")":ve+":"+he+":"+ae}},de.fromString=function(ve){var he=ve.indexOf("("),ae=ve.lastIndexOf(")"),Ve=ve.substring(0,he),fe=ve.substring(he+1,ae).split(","),te=ve.substring(ae+1);if(0===te.indexOf("@"))var ce=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(te,""),Qe=ce[1],Ye=ce[2],Le=ce[3];return new de({functionName:Ve,args:fe||void 0,fileName:Qe,lineNumber:Ye||void 0,columnNumber:Le||void 0})};for(var oe=0;oe<V.length;oe++)de.prototype["get"+Z(V[oe])]=K(V[oe]),de.prototype["set"+Z(V[oe])]=function(ve){return function(he){this[ve]=Boolean(he)}}(V[oe]);for(var pe=0;pe<B.length;pe++)de.prototype["get"+Z(B[pe])]=K(B[pe]),de.prototype["set"+Z(B[pe])]=function(ve){return function(he){if(ae=he,isNaN(parseFloat(ae))||!isFinite(ae))throw new TypeError(ve+" must be a Number");var ae;this[ve]=Number(he)}}(B[pe]);for(var Ce=0;Ce<L.length;Ce++)de.prototype["get"+Z(L[Ce])]=K(L[Ce]),de.prototype["set"+Z(L[Ce])]=function(ve){return function(he){this[ve]=String(he)}}(L[Ce]);return de})?x.apply(H,S):x)||(Re.exports=W)}()},function(Re,H,m){"use strict";var x=m(0);function S(W,N){x.isFunction(W[N])&&(W[N]=W[N].toString())}Re.exports={itemToPayload:function(W,N,O){var Z=W.data;W._isUncaught&&(Z._isUncaught=!0),W._originalArgs&&(Z._originalArgs=W._originalArgs),O(null,Z)},addPayloadOptions:function(W,N,O){var Z=N.payload||{};Z.body&&delete Z.body,W.data=x.merge(W.data,Z),O(null,W)},addTelemetryData:function(W,N,O){W.telemetryEvents&&x.set(W,"data.body.telemetry",W.telemetryEvents),O(null,W)},addMessageWithError:function(W,N,O){if(W.message){var Z="data.body.trace_chain.0",K=x.get(W,Z);if(K||(K=x.get(W,Z="data.body.trace")),K){if(!K.exception||!K.exception.description)return x.set(W,Z+".exception.description",W.message),void O(null,W);var V=x.get(W,Z+".extra")||{},B=x.merge(V,{message:W.message});x.set(W,Z+".extra",B)}O(null,W)}else O(null,W)},userTransform:function(W){return function(N,O,Z){var K=x.merge(N),V=null;try{x.isFunction(O.transform)&&(V=O.transform(K.data,N))}catch(B){return O.transform=null,W.error("Error while calling custom transform() function. Removing custom transform().",B),void Z(null,N)}x.isPromise(V)?V.then(function(B){B&&(K.data=B),Z(null,K)},function(B){Z(B,N)}):Z(null,K)}},addConfigToPayload:function(W,N,O){if(!N.sendConfig)return O(null,W);var Z=x.get(W,"data.custom")||{};Z._rollbarConfig=N,W.data.custom=Z,O(null,W)},addConfiguredOptions:function(W,N,O){var Z=N._configuredOptions;S(Z,"transform"),S(Z,"checkIgnore"),S(Z,"onSendCallback"),delete Z.accessToken,W.data.notifier.configured_options=Z,O(null,W)},addDiagnosticKeys:function(W,N,O){var Z=x.merge(W.notifier.client.notifier.diagnostic,W.diagnostic);if(x.get(W,"err._isAnonymous")&&(Z.is_anonymous=!0),W._isUncaught&&(Z.is_uncaught=W._isUncaught),W.err)try{Z.raw_error={message:W.err.message,name:W.err.name,constructor_name:W.err.constructor&&W.err.constructor.name,filename:W.err.fileName,line:W.err.lineNumber,column:W.err.columnNumber,stack:W.err.stack}}catch(K){Z.raw_error={failed:String(K)}}W.data.notifier.diagnostic=x.merge(W.data.notifier.diagnostic,Z),O(null,W)}}},function(Re,H,m){"use strict";var x=m(0);Re.exports={checkIgnore:function(S,W){return!x.get(W,"plugins.jquery.ignoreAjaxErrors")||!x.get(S,"body.message.extra.isAjax")}}},function(Re,H,m){"use strict";var x=m(0);function S(N,O,Z){if(!N)return!Z;var K,B=N.frames;if(!B||0===B.length)return!Z;for(var L=O.length,$=B.length,de=0;de<$;de++){if(!x.isType(K=B[de].filename,"string"))return!Z;for(var oe=0;oe<L;oe++)if(new RegExp(O[oe]).test(K))return!0}return!1}function W(N,O,Z,K){var V,B,L=!1;"blocklist"===Z&&(L=!0);try{if(V=L?O.hostBlockList:O.hostSafeList,B=x.get(N,"body.trace_chain")||[x.get(N,"body.trace")],!V||0===V.length||0===B.length||!B[0])return!L;for(var $=B.length,de=0;de<$;de++)if(S(B[de],V,L))return!0}catch(pe){L?O.hostBlockList=null:O.hostSafeList=null;var oe=L?"hostBlockList":"hostSafeList";return K.error("Error while reading your configuration's "+oe+" option. Removing custom "+oe+".",pe),!L}return!1}Re.exports={checkLevel:function(N,O){return!((x.LEVELS[N.level]||0)<(x.LEVELS[O.reportLevel]||0))},userCheckIgnore:function(N){return function(O,Z){var K=!!O._isUncaught;delete O._isUncaught;var V=O._originalArgs;delete O._originalArgs;try{x.isFunction(Z.onSendCallback)&&Z.onSendCallback(K,V,O)}catch(B){Z.onSendCallback=null,N.error("Error while calling onSendCallback, removing",B)}try{if(x.isFunction(Z.checkIgnore)&&Z.checkIgnore(K,V,O))return!1}catch(B){Z.checkIgnore=null,N.error("Error while calling custom checkIgnore(), removing",B)}return!0}},urlIsNotBlockListed:function(N){return function(O,Z){return!W(O,Z,"blocklist",N)}},urlIsSafeListed:function(N){return function(O,Z){return W(O,Z,"safelist",N)}},messageIsIgnored:function(N){return function(O,Z){var K,V,B,L,$,de;try{if(!(B=Z.ignoredMessages)||0===B.length||0===(de=function(oe){var pe=oe.body,Ce=[];if(pe.trace_chain)for(var ve=pe.trace_chain,he=0;he<ve.length;he++)Ce.push(x.get(ve[he],"exception.message"));return pe.trace&&Ce.push(x.get(pe,"trace.exception.message")),pe.message&&Ce.push(x.get(pe,"message.body")),Ce}(O)).length)return!0;for(L=B.length,K=0;K<L;K++)for($=new RegExp(B[K],"gi"),V=0;V<de.length;V++)if($.test(de[V]))return!1}catch{Z.ignoredMessages=null,N.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!0}}}},function(Re,H,m){"use strict";Re.exports={version:"2.26.2",endpoint:"api.rollbar.com/api/1/item/",logLevel:"debug",reportLevel:"debug",uncaughtErrorLevel:"error",maxItems:0,itemsPerMin:60}},function(Re,H,m){"use strict";Re.exports={scrubFields:["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","X-Rollbar-Access-Token","secret_key","secretKey","secretToken","cc-number","card number","cardnumber","cardnum","ccnum","ccnumber","cc num","creditcardnumber","credit card number","newcreditcardnumber","new credit card","creditcardno","credit card no","card#","card #","cc-csc","cvc","cvc2","cvv2","ccv2","security code","card verification","name on credit card","name on card","nameoncard","cardholder","card holder","name des karteninhabers","ccname","card type","cardtype","cc type","cctype","payment type","expiration date","expirationdate","expdate","cc-exp","ccmonth","ccyear"]}},function(Re,H,m){"use strict";var x=m(0);function S(N){this.queue=[],this.options=x.merge(N),this.maxQueueSize=Math.max(0,Math.min(this.options.maxTelemetryEvents||100,100))}function W(N,O){return O||{error:"error",manual:"info"}[N]||"info"}S.prototype.configure=function(N){this.options=x.merge(this.options,N);var K=Math.max(0,Math.min(this.options.maxTelemetryEvents||100,100)),V=0;this.queue.length>K&&(V=this.queue.length-K),this.maxQueueSize=K,this.queue.splice(0,V)},S.prototype.copyEvents=function(){var N=Array.prototype.slice.call(this.queue,0);if(x.isFunction(this.options.filterTelemetry))try{for(var O=N.length;O--;)this.options.filterTelemetry(N[O])&&N.splice(O,1)}catch{this.options.filterTelemetry=null}return N},S.prototype.capture=function(N,O,Z,K,V){var B={level:W(N,Z),type:N,timestamp_ms:V||x.now(),body:O,source:"client"};K&&(B.uuid=K);try{if(x.isFunction(this.options.filterTelemetry)&&this.options.filterTelemetry(B))return!1}catch{this.options.filterTelemetry=null}return this.push(B),B},S.prototype.captureEvent=function(N,O,Z,K){return this.capture(N,O,Z,K)},S.prototype.captureError=function(N,O,Z,K){var V={message:N.message||String(N)};return N.stack&&(V.stack=N.stack),this.capture("error",V,O,Z,K)},S.prototype.captureLog=function(N,O,Z,K){return this.capture("log",{message:N},O,Z,K)},S.prototype.captureNetwork=function(N,O,Z,K){O=O||"xhr",N.subtype=N.subtype||O,K&&(N.request=K);var V=this.levelFromStatus(N.status_code);return this.capture("network",N,V,Z)},S.prototype.levelFromStatus=function(N){return N>=200&&N<400?"info":0===N||N>=400?"error":"info"},S.prototype.captureDom=function(N,O,Z,K,V){var B={subtype:N,element:O};return void 0!==Z&&(B.value=Z),void 0!==K&&(B.checked=K),this.capture("dom",B,"info",V)},S.prototype.captureNavigation=function(N,O,Z){return this.capture("navigation",{from:N,to:O},"info",Z)},S.prototype.captureDomContentLoaded=function(N){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,N&&N.getTime())},S.prototype.captureLoad=function(N){return this.capture("navigation",{subtype:"load"},"info",void 0,N&&N.getTime())},S.prototype.captureConnectivityChange=function(N,O){return this.captureNetwork({change:N},"connectivity",O)},S.prototype._captureRollbarItem=function(N){if(this.options.includeItemsInTelemetry)return N.err?this.captureError(N.err,N.level,N.uuid,N.timestamp):N.message?this.captureLog(N.message,N.level,N.uuid,N.timestamp):N.custom?this.capture("log",N.custom,N.level,N.uuid,N.timestamp):void 0},S.prototype.push=function(N){this.queue.push(N),this.queue.length>this.maxQueueSize&&this.queue.shift()},Re.exports=S},function(Re,H,m){"use strict";var x=m(0),S=m(33),W=m(4),N=m(2),O=m(34),Z={network:!0,networkResponseHeaders:!1,networkResponseBody:!1,networkRequestHeaders:!1,networkRequestBody:!1,networkErrorOnHttp5xx:!1,networkErrorOnHttp4xx:!1,networkErrorOnHttp0:!1,log:!0,dom:!0,navigation:!0,connectivity:!0,contentSecurityPolicy:!0,errorOnContentSecurityPolicy:!1};function K(L,$,de,oe,pe){var Ce=L[$];L[$]=de(Ce),oe&&oe[pe].push([L,$,Ce])}function V(L,$){for(var de;L[$].length;)(de=L[$].shift())[0][de[1]]=de[2]}function B(L,$,de,oe,pe){this.options=L;var Ce=L.autoInstrument;!1===L.enabled||!1===Ce?this.autoInstrument={}:(x.isType(Ce,"object")||(Ce=Z),this.autoInstrument=x.merge(Z,Ce)),this.scrubTelemetryInputs=!!L.scrubTelemetryInputs,this.telemetryScrubber=L.telemetryScrubber,this.defaultValueScrubber=function(ve){for(var he=[],ae=0;ae<ve.length;++ae)he.push(new RegExp(ve[ae],"i"));return function(Ve){var fe=function(ce){if(!ce||!ce.attributes)return null;for(var Qe=ce.attributes,Ye=0;Ye<Qe.length;++Ye)if("name"===Qe[Ye].key)return Qe[Ye].value;return null}(Ve);if(!fe)return!1;for(var te=0;te<he.length;++te)if(he[te].test(fe))return!0;return!1}}(L.scrubFields),this.telemeter=$,this.rollbar=de,this.diagnostic=de.client.notifier.diagnostic,this._window=oe||{},this._document=pe||{},this.replacements={network:[],log:[],navigation:[],connectivity:[]},this.eventRemovers={dom:[],connectivity:[],contentsecuritypolicy:[]},this._location=this._window.location,this._lastHref=this._location&&this._location.href}B.prototype.configure=function(L){this.options=x.merge(this.options,L);var $=L.autoInstrument,de=x.merge(this.autoInstrument);!1===L.enabled||!1===$?this.autoInstrument={}:(x.isType($,"object")||($=Z),this.autoInstrument=x.merge(Z,$)),this.instrument(de),void 0!==L.scrubTelemetryInputs&&(this.scrubTelemetryInputs=!!L.scrubTelemetryInputs),void 0!==L.telemetryScrubber&&(this.telemetryScrubber=L.telemetryScrubber)},B.prototype.instrument=function(L){!this.autoInstrument.network||L&&L.network?!this.autoInstrument.network&&L&&L.network&&this.deinstrumentNetwork():this.instrumentNetwork(),!this.autoInstrument.log||L&&L.log?!this.autoInstrument.log&&L&&L.log&&this.deinstrumentConsole():this.instrumentConsole(),!this.autoInstrument.dom||L&&L.dom?!this.autoInstrument.dom&&L&&L.dom&&this.deinstrumentDom():this.instrumentDom(),!this.autoInstrument.navigation||L&&L.navigation?!this.autoInstrument.navigation&&L&&L.navigation&&this.deinstrumentNavigation():this.instrumentNavigation(),!this.autoInstrument.connectivity||L&&L.connectivity?!this.autoInstrument.connectivity&&L&&L.connectivity&&this.deinstrumentConnectivity():this.instrumentConnectivity(),!this.autoInstrument.contentSecurityPolicy||L&&L.contentSecurityPolicy?!this.autoInstrument.contentSecurityPolicy&&L&&L.contentSecurityPolicy&&this.deinstrumentContentSecurityPolicy():this.instrumentContentSecurityPolicy()},B.prototype.deinstrumentNetwork=function(){V(this.replacements,"network")},B.prototype.instrumentNetwork=function(){var L=this;function $(oe,pe){oe in pe&&x.isFunction(pe[oe])&&K(pe,oe,function(Ce){return L.rollbar.wrap(Ce)})}if("XMLHttpRequest"in this._window){var de=this._window.XMLHttpRequest.prototype;K(de,"open",function(oe){return function(pe,Ce){return x.isType(Ce,"string")&&(this.__rollbar_xhr?(this.__rollbar_xhr.method=pe,this.__rollbar_xhr.url=Ce,this.__rollbar_xhr.status_code=null,this.__rollbar_xhr.start_time_ms=x.now(),this.__rollbar_xhr.end_time_ms=null):this.__rollbar_xhr={method:pe,url:Ce,status_code:null,start_time_ms:x.now(),end_time_ms:null}),oe.apply(this,arguments)}},this.replacements,"network"),K(de,"setRequestHeader",function(oe){return function(pe,Ce){return this.__rollbar_xhr||(this.__rollbar_xhr={}),x.isType(pe,"string")&&x.isType(Ce,"string")&&(L.autoInstrument.networkRequestHeaders&&(this.__rollbar_xhr.request_headers||(this.__rollbar_xhr.request_headers={}),this.__rollbar_xhr.request_headers[pe]=Ce),"content-type"===pe.toLowerCase()&&(this.__rollbar_xhr.request_content_type=Ce)),oe.apply(this,arguments)}},this.replacements,"network"),K(de,"send",function(oe){return function(pe){var Ce=this;function ve(){if(Ce.__rollbar_xhr&&(null===Ce.__rollbar_xhr.status_code&&(Ce.__rollbar_xhr.status_code=0,L.autoInstrument.networkRequestBody&&(Ce.__rollbar_xhr.request=pe),Ce.__rollbar_event=L.captureNetwork(Ce.__rollbar_xhr,"xhr",void 0)),Ce.readyState<2&&(Ce.__rollbar_xhr.start_time_ms=x.now()),Ce.readyState>3)){Ce.__rollbar_xhr.end_time_ms=x.now();var he=null;if(Ce.__rollbar_xhr.response_content_type=Ce.getResponseHeader("Content-Type"),L.autoInstrument.networkResponseHeaders){var ae=L.autoInstrument.networkResponseHeaders;he={};try{var Ve,fe;if(!0===ae){var te=Ce.getAllResponseHeaders();if(te){var ce,Qe,Ye=te.trim().split(/[\r\n]+/);for(fe=0;fe<Ye.length;fe++)Ve=(ce=Ye[fe].split(": ")).shift(),Qe=ce.join(": "),he[Ve]=Qe}}else for(fe=0;fe<ae.length;fe++)he[Ve=ae[fe]]=Ce.getResponseHeader(Ve)}catch{}}var Le=null;if(L.autoInstrument.networkResponseBody)try{Le=Ce.responseText}catch{}var Pe=null;(Le||he)&&(Pe={},Le&&(Pe.body=L.isJsonContentType(Ce.__rollbar_xhr.response_content_type)?L.scrubJson(Le):Le),he&&(Pe.headers=he)),Pe&&(Ce.__rollbar_xhr.response=Pe);try{var Ie=Ce.status;Ce.__rollbar_xhr.status_code=Ie=1223===Ie?204:Ie,Ce.__rollbar_event.level=L.telemeter.levelFromStatus(Ie),L.errorOnHttpStatus(Ce.__rollbar_xhr)}catch{}}}return $("onload",Ce),$("onerror",Ce),$("onprogress",Ce),"onreadystatechange"in Ce&&x.isFunction(Ce.onreadystatechange)?K(Ce,"onreadystatechange",function(he){return L.rollbar.wrap(he,void 0,ve)}):Ce.onreadystatechange=ve,Ce.__rollbar_xhr&&L.trackHttpErrors()&&(Ce.__rollbar_xhr.stack=(new Error).stack),oe.apply(this,arguments)}},this.replacements,"network")}"fetch"in this._window&&K(this._window,"fetch",function(oe){return function(pe,Ce){for(var ve=new Array(arguments.length),he=0,ae=ve.length;he<ae;he++)ve[he]=arguments[he];var Ve,fe=ve[0],te="GET";x.isType(fe,"string")?Ve=fe:fe&&(Ve=fe.url,fe.method&&(te=fe.method)),ve[1]&&ve[1].method&&(te=ve[1].method);var ce={method:te,url:Ve,status_code:null,start_time_ms:x.now(),end_time_ms:null};if(ve[1]&&ve[1].headers){var Qe=S(ve[1].headers);ce.request_content_type=Qe.get("Content-Type"),L.autoInstrument.networkRequestHeaders&&(ce.request_headers=L.fetchHeaders(Qe,L.autoInstrument.networkRequestHeaders))}return L.autoInstrument.networkRequestBody&&(ve[1]&&ve[1].body?ce.request=ve[1].body:ve[0]&&!x.isType(ve[0],"string")&&ve[0].body&&(ce.request=ve[0].body)),L.captureNetwork(ce,"fetch",void 0),L.trackHttpErrors()&&(ce.stack=(new Error).stack),oe.apply(this,ve).then(function(Ye){ce.end_time_ms=x.now(),ce.status_code=Ye.status,ce.response_content_type=Ye.headers.get("Content-Type");var Le=null;L.autoInstrument.networkResponseHeaders&&(Le=L.fetchHeaders(Ye.headers,L.autoInstrument.networkResponseHeaders));var Pe=null;return L.autoInstrument.networkResponseBody&&"function"==typeof Ye.text&&(Pe=Ye.clone().text()),(Le||Pe)&&(ce.response={},Pe&&("function"==typeof Pe.then?Pe.then(function(Ie){ce.response.body=Ie&&L.isJsonContentType(ce.response_content_type)?L.scrubJson(Ie):Ie}):ce.response.body=Pe),Le&&(ce.response.headers=Le)),L.errorOnHttpStatus(ce),Ye})}},this.replacements,"network")},B.prototype.captureNetwork=function(L,$,de){return L.request&&this.isJsonContentType(L.request_content_type)&&(L.request=this.scrubJson(L.request)),this.telemeter.captureNetwork(L,$,de)},B.prototype.isJsonContentType=function(L){return!!(L&&x.isType(L,"string")&&L.toLowerCase().includes("json"))},B.prototype.scrubJson=function(L){return JSON.stringify(W(JSON.parse(L),this.options.scrubFields))},B.prototype.fetchHeaders=function(L,$){var de={};try{var oe;if(!0===$){if("function"==typeof L.entries)for(var pe=L.entries(),Ce=pe.next();!Ce.done;)de[Ce.value[0]]=Ce.value[1],Ce=pe.next()}else for(oe=0;oe<$.length;oe++){var ve=$[oe];de[ve]=L.get(ve)}}catch{}return de},B.prototype.trackHttpErrors=function(){return this.autoInstrument.networkErrorOnHttp5xx||this.autoInstrument.networkErrorOnHttp4xx||this.autoInstrument.networkErrorOnHttp0},B.prototype.errorOnHttpStatus=function(L){var $=L.status_code;if($>=500&&this.autoInstrument.networkErrorOnHttp5xx||$>=400&&this.autoInstrument.networkErrorOnHttp4xx||0===$&&this.autoInstrument.networkErrorOnHttp0){var de=new Error("HTTP request failed with Status "+$);de.stack=L.stack,this.rollbar.error(de,{skipFrames:1})}},B.prototype.deinstrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var L;this.replacements.log.length;)L=this.replacements.log.shift(),this._window.console[L[0]]=L[1]},B.prototype.instrumentConsole=function(){if("console"in this._window&&this._window.console.log){var L=this,$=this._window.console,de=["debug","info","warn","error","log"];try{for(var oe=0,pe=de.length;oe<pe;oe++)Ce(de[oe])}catch(ve){this.diagnostic.instrumentConsole={error:ve.message}}}function Ce(ve){var he=$[ve],ae=$,Ve="warn"===ve?"warning":ve;$[ve]=function(){var fe=Array.prototype.slice.call(arguments),te=x.formatArgsAsString(fe);L.telemeter.captureLog(te,Ve),he&&Function.prototype.apply.call(he,ae,fe)},L.replacements.log.push([ve,he])}},B.prototype.deinstrumentDom=function(){("addEventListener"in this._window||"attachEvent"in this._window)&&this.removeListeners("dom")},B.prototype.instrumentDom=function(){if("addEventListener"in this._window||"attachEvent"in this._window){var L=this.handleClick.bind(this),$=this.handleBlur.bind(this);this.addListener("dom",this._window,"click","onclick",L,!0),this.addListener("dom",this._window,"blur","onfocusout",$,!0)}},B.prototype.handleClick=function(L){try{var $=O.getElementFromEvent(L,this._document),de=$&&$.tagName,oe=O.isDescribedElement($,"a")||O.isDescribedElement($,"button");de&&(oe||O.isDescribedElement($,"input",["button","submit"]))?this.captureDomEvent("click",$):O.isDescribedElement($,"input",["checkbox","radio"])&&this.captureDomEvent("input",$,$.value,$.checked)}catch{}},B.prototype.handleBlur=function(L){try{var $=O.getElementFromEvent(L,this._document);$&&$.tagName&&(O.isDescribedElement($,"textarea")?this.captureDomEvent("input",$,$.value):O.isDescribedElement($,"select")&&$.options&&$.options.length?this.handleSelectInputChanged($):O.isDescribedElement($,"input")&&!O.isDescribedElement($,"input",["button","submit","hidden","checkbox","radio"])&&this.captureDomEvent("input",$,$.value))}catch{}},B.prototype.handleSelectInputChanged=function(L){if(L.multiple)for(var $=0;$<L.options.length;$++)L.options[$].selected&&this.captureDomEvent("input",L,L.options[$].value);else L.selectedIndex>=0&&L.options[L.selectedIndex]&&this.captureDomEvent("input",L,L.options[L.selectedIndex].value)},B.prototype.captureDomEvent=function(L,$,de,oe){if(void 0!==de)if(this.scrubTelemetryInputs||"password"===O.getElementType($))de="[scrubbed]";else{var pe=O.describeElement($);this.telemetryScrubber?this.telemetryScrubber(pe)&&(de="[scrubbed]"):this.defaultValueScrubber(pe)&&(de="[scrubbed]")}var Ce=O.elementArrayToString(O.treeToArray($));this.telemeter.captureDom(L,Ce,de,oe)},B.prototype.deinstrumentNavigation=function(){var L=this._window.chrome;!(L&&L.app&&L.app.runtime)&&this._window.history&&this._window.history.pushState&&V(this.replacements,"navigation")},B.prototype.instrumentNavigation=function(){var L=this._window.chrome;if(!(L&&L.app&&L.app.runtime)&&this._window.history&&this._window.history.pushState){var $=this;K(this._window,"onpopstate",function(de){return function(){$.handleUrlChange($._lastHref,$._location.href),de&&de.apply(this,arguments)}},this.replacements,"navigation"),K(this._window.history,"pushState",function(de){return function(){var oe=arguments.length>2?arguments[2]:void 0;return oe&&$.handleUrlChange($._lastHref,oe+""),de.apply(this,arguments)}},this.replacements,"navigation")}},B.prototype.handleUrlChange=function(L,$){var de=N.parse(this._location.href),oe=N.parse($),pe=N.parse(L);this._lastHref=$,de.protocol===oe.protocol&&de.host===oe.host&&($=oe.path+(oe.hash||"")),de.protocol===pe.protocol&&de.host===pe.host&&(L=pe.path+(pe.hash||"")),this.telemeter.captureNavigation(L,$)},B.prototype.deinstrumentConnectivity=function(){("addEventListener"in this._window||"body"in this._document)&&(this._window.addEventListener?this.removeListeners("connectivity"):V(this.replacements,"connectivity"))},B.prototype.instrumentConnectivity=function(){if("addEventListener"in this._window||"body"in this._document)if(this._window.addEventListener)this.addListener("connectivity",this._window,"online",void 0,function(){this.telemeter.captureConnectivityChange("online")}.bind(this),!0),this.addListener("connectivity",this._window,"offline",void 0,function(){this.telemeter.captureConnectivityChange("offline")}.bind(this),!0);else{var L=this;K(this._document.body,"ononline",function($){return function(){L.telemeter.captureConnectivityChange("online"),$&&$.apply(this,arguments)}},this.replacements,"connectivity"),K(this._document.body,"onoffline",function($){return function(){L.telemeter.captureConnectivityChange("offline"),$&&$.apply(this,arguments)}},this.replacements,"connectivity")}},B.prototype.handleCspEvent=function(L){var $="Security Policy Violation: blockedURI: "+L.blockedURI+", violatedDirective: "+L.violatedDirective+", effectiveDirective: "+L.effectiveDirective+", ";L.sourceFile&&($+="location: "+L.sourceFile+", line: "+L.lineNumber+", col: "+L.columnNumber+", "),this.telemeter.captureLog($+="originalPolicy: "+L.originalPolicy,"error"),this.handleCspError($)},B.prototype.handleCspError=function(L){this.autoInstrument.errorOnContentSecurityPolicy&&this.rollbar.error(L)},B.prototype.deinstrumentContentSecurityPolicy=function(){"addEventListener"in this._document&&this.removeListeners("contentsecuritypolicy")},B.prototype.instrumentContentSecurityPolicy=function(){if("addEventListener"in this._document){var L=this.handleCspEvent.bind(this);this.addListener("contentsecuritypolicy",this._document,"securitypolicyviolation",null,L,!1)}},B.prototype.addListener=function(L,$,de,oe,pe,Ce){$.addEventListener?($.addEventListener(de,pe,Ce),this.eventRemovers[L].push(function(){$.removeEventListener(de,pe,Ce)})):oe&&($.attachEvent(oe,pe),this.eventRemovers[L].push(function(){$.detachEvent(oe,pe)}))},B.prototype.removeListeners=function(L){for(;this.eventRemovers[L].length;)this.eventRemovers[L].shift()()},Re.exports=B},function(Re,H,m){"use strict";function x(W){return"string"!=typeof W&&(W=String(W)),W.toLowerCase()}function S(W){this.map={},W instanceof S?W.forEach(function(N,O){this.append(O,N)},this):Array.isArray(W)?W.forEach(function(N){this.append(N[0],N[1])},this):W&&Object.getOwnPropertyNames(W).forEach(function(N){this.append(N,W[N])},this)}S.prototype.append=function(W,N){var Z;W=x(W),"string"!=typeof(Z=N)&&(Z=String(Z)),N=Z;var O=this.map[W];this.map[W]=O?O+", "+N:N},S.prototype.get=function(W){return W=x(W),this.has(W)?this.map[W]:null},S.prototype.has=function(W){return this.map.hasOwnProperty(x(W))},S.prototype.forEach=function(W,N){for(var O in this.map)this.map.hasOwnProperty(O)&&W.call(N,this.map[O],O,this)},S.prototype.entries=function(){var N,W=[];return this.forEach(function(N,O){W.push([O,N])}),N=W,{next:function(){var O=N.shift();return{done:void 0===O,value:O}}}},Re.exports=function(W){return typeof Headers>"u"?new S(W):new Headers(W)}},function(Re,H,m){"use strict";function x(N){return(N.getAttribute("type")||"").toLowerCase()}function S(N){if(!N||!N.tagName)return"";var O=[N.tagName];N.id&&O.push("#"+N.id),N.classes&&O.push("."+N.classes.join("."));for(var Z=0;Z<N.attributes.length;Z++)O.push("["+N.attributes[Z].key+'="'+N.attributes[Z].value+'"]');return O.join("")}function W(N){if(!N||!N.tagName)return null;var O,Z,K,V,B={};B.tagName=N.tagName.toLowerCase(),N.id&&(B.id=N.id),(O=N.className)&&"string"==typeof O&&(B.classes=O.split(/\s+/));var L=["type","name","title","alt"];for(B.attributes=[],V=0;V<L.length;V++)(K=N.getAttribute(Z=L[V]))&&B.attributes.push({key:Z,value:K});return B}Re.exports={describeElement:W,descriptionToString:S,elementArrayToString:function(N){for(var O,V=[],B=0,L=N.length-1;L>=0;L--){if(O=S(N[L]),L<N.length-1&&B+3*V.length+O.length>=83){V.unshift("...");break}V.unshift(O),B+=O.length}return V.join(" > ")},treeToArray:function(N){for(var O,Z=[],K=0;N&&K<5&&"html"!==(O=W(N)).tagName;K++)Z.unshift(O),N=N.parentNode;return Z},getElementFromEvent:function(N,O){return N.target?N.target:O&&O.elementFromPoint?O.elementFromPoint(N.clientX,N.clientY):void 0},isDescribedElement:function(N,O,Z){if(N.tagName.toLowerCase()!==O.toLowerCase())return!1;if(!Z)return!0;N=x(N);for(var K=0;K<Z.length;K++)if(Z[K]===N)return!0;return!1},getElementType:x}},function(Re,H,m){"use strict";var x=m(36);Re.exports=x},function(Re,H){Re.exports=function(m){var x,S,W,N,O,Z,K,V,B,L,$,de,oe,pe=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function Ce(ae){return ae<10?"0"+ae:ae}function ve(){return this.valueOf()}function he(ae){return pe.lastIndex=0,pe.test(ae)?'"'+ae.replace(pe,function(Ve){var fe=W[Ve];return"string"==typeof fe?fe:"\\u"+("0000"+Ve.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+ae+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+Ce(this.getUTCMonth()+1)+"-"+Ce(this.getUTCDate())+"T"+Ce(this.getUTCHours())+":"+Ce(this.getUTCMinutes())+":"+Ce(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=ve,Number.prototype.toJSON=ve,String.prototype.toJSON=ve),"function"!=typeof m.stringify&&(W={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m.stringify=function(ae,Ve,fe){var te;if(x="",S="","number"==typeof fe)for(te=0;te<fe;te+=1)S+=" ";else"string"==typeof fe&&(S=fe);if(N=Ve,Ve&&"function"!=typeof Ve&&("object"!=typeof Ve||"number"!=typeof Ve.length))throw new Error("JSON.stringify");return function ce(Qe,Ye){var Le,Pe,Ie,Me,at,We=x,wt=Ye[Qe];switch(wt&&"object"==typeof wt&&"function"==typeof wt.toJSON&&(wt=wt.toJSON(Qe)),"function"==typeof N&&(wt=N.call(Ye,Qe,wt)),typeof wt){case"string":return he(wt);case"number":return isFinite(wt)?String(wt):"null";case"boolean":case"null":return String(wt);case"object":if(!wt)return"null";if(x+=S,at=[],"[object Array]"===Object.prototype.toString.apply(wt)){for(Me=wt.length,Le=0;Le<Me;Le+=1)at[Le]=ce(Le,wt)||"null";return Ie=0===at.length?"[]":x?"[\n"+x+at.join(",\n"+x)+"\n"+We+"]":"["+at.join(",")+"]",x=We,Ie}if(N&&"object"==typeof N)for(Me=N.length,Le=0;Le<Me;Le+=1)"string"==typeof N[Le]&&(Ie=ce(Pe=N[Le],wt))&&at.push(he(Pe)+(x?": ":":")+Ie);else for(Pe in wt)Object.prototype.hasOwnProperty.call(wt,Pe)&&(Ie=ce(Pe,wt))&&at.push(he(Pe)+(x?": ":":")+Ie);return Ie=0===at.length?"{}":x?"{\n"+x+at.join(",\n"+x)+"\n"+We+"}":"{"+at.join(",")+"}",x=We,Ie}}("",{"":ae})}),"function"!=typeof m.parse&&(m.parse=(L={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},$={go:function(){O="ok"},firstokey:function(){V=B,O="colon"},okey:function(){V=B,O="colon"},ovalue:function(){O="ocomma"},firstavalue:function(){O="acomma"},avalue:function(){O="acomma"}},de={go:function(){O="ok"},ovalue:function(){O="ocomma"},firstavalue:function(){O="acomma"},avalue:function(){O="acomma"}},oe={"{":{go:function(){Z.push({state:"ok"}),K={},O="firstokey"},ovalue:function(){Z.push({container:K,state:"ocomma",key:V}),K={},O="firstokey"},firstavalue:function(){Z.push({container:K,state:"acomma"}),K={},O="firstokey"},avalue:function(){Z.push({container:K,state:"acomma"}),K={},O="firstokey"}},"}":{firstokey:function(){var ae=Z.pop();B=K,K=ae.container,V=ae.key,O=ae.state},ocomma:function(){var ae=Z.pop();K[V]=B,B=K,K=ae.container,V=ae.key,O=ae.state}},"[":{go:function(){Z.push({state:"ok"}),K=[],O="firstavalue"},ovalue:function(){Z.push({container:K,state:"ocomma",key:V}),K=[],O="firstavalue"},firstavalue:function(){Z.push({container:K,state:"acomma"}),K=[],O="firstavalue"},avalue:function(){Z.push({container:K,state:"acomma"}),K=[],O="firstavalue"}},"]":{firstavalue:function(){var ae=Z.pop();B=K,K=ae.container,V=ae.key,O=ae.state},acomma:function(){var ae=Z.pop();K.push(B),B=K,K=ae.container,V=ae.key,O=ae.state}},":":{colon:function(){if(Object.hasOwnProperty.call(K,V))throw new SyntaxError("Duplicate key '"+V+'"');O="ovalue"}},",":{ocomma:function(){K[V]=B,O="okey"},acomma:function(){K.push(B),O="avalue"}},true:{go:function(){B=!0,O="ok"},ovalue:function(){B=!0,O="ocomma"},firstavalue:function(){B=!0,O="acomma"},avalue:function(){B=!0,O="acomma"}},false:{go:function(){B=!1,O="ok"},ovalue:function(){B=!1,O="ocomma"},firstavalue:function(){B=!1,O="acomma"},avalue:function(){B=!1,O="acomma"}},null:{go:function(){B=null,O="ok"},ovalue:function(){B=null,O="ocomma"},firstavalue:function(){B=null,O="acomma"},avalue:function(){B=null,O="acomma"}}},function(ae,Ve){var fe,ce=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;O="go",Z=[];try{for(;fe=ce.exec(ae);)fe[1]?oe[fe[1]][O]():fe[2]?(B=+fe[2],de[O]()):(B=fe[3].replace(/\\(?:u(.{4})|([^u]))/g,function(Qe,Ye,Le){return Ye?String.fromCharCode(parseInt(Ye,16)):L[Le]}),$[O]()),ae=ae.slice(fe[0].length)}catch(Qe){O=Qe}if("ok"!==O||/[^\u0020\t\n\r]/.test(ae))throw O instanceof SyntaxError?O:new SyntaxError("JSON");return"function"==typeof Ve?function Qe(Ye,Le){var Pe,Ie,Me=Ye[Le];if(Me&&"object"==typeof Me)for(Pe in B)Object.prototype.hasOwnProperty.call(Me,Pe)&&(void 0!==(Ie=Qe(Me,Pe))?Me[Pe]=Ie:delete Me[Pe]);return Ve.call(Ye,Le,Me)}({"":B},""):B}))}},function(Re,H,m){"use strict";function x(S,W,N){if(W.hasOwnProperty&&W.hasOwnProperty("addEventListener")){for(var O=W.addEventListener;O._rollbarOldAdd&&O.belongsToShim;)O=O._rollbarOldAdd;var Z=function(B,L,$){O.call(this,B,S.wrap(L),$)};Z._rollbarOldAdd=O,Z.belongsToShim=N,W.addEventListener=Z;for(var K=W.removeEventListener;K._rollbarOldRemove&&K.belongsToShim;)K=K._rollbarOldRemove;var V=function(B,L,$){K.call(this,B,L&&L._rollbar_wrapped||L,$)};V._rollbarOldRemove=K,V.belongsToShim=N,W.removeEventListener=V}}Re.exports=function(S,W,N){if(S){var O,Z,K="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(O=0;O<K.length;++O)S[Z=K[O]]&&S[Z].prototype&&x(W,S[Z].prototype,N)}}},function(Re,H,m){"use strict";var x=m(0),S=m(5);function W($,de){return[$,x.stringify($,de)]}function N($,de){var oe=$.length;return oe>2*de?$.slice(0,de).concat($.slice(oe-de)):$}function O($,de,oe){oe=void 0===oe?30:oe;var pe,Ce=$.data.body;if(Ce.trace_chain)for(var ve=Ce.trace_chain,he=0;he<ve.length;he++)pe=N(pe=ve[he].frames,oe),ve[he].frames=pe;else Ce.trace&&(pe=N(pe=Ce.trace.frames,oe),Ce.trace.frames=pe);return[$,x.stringify($,de)]}function Z($,de){return de&&de.length>$?de.slice(0,$-3).concat("..."):de}function K($,de,oe){return[de=S(de,function pe(Ce,ve,he){switch(x.typeName(ve)){case"string":return Z($,ve);case"object":case"array":return S(ve,pe,he);default:return ve}}),x.stringify(de,oe)]}function V($){return $.exception&&(delete $.exception.description,$.exception.message=Z(255,$.exception.message)),$.frames=N($.frames,1),$}function B($,de){var oe=$.data.body;if(oe.trace_chain)for(var pe=oe.trace_chain,Ce=0;Ce<pe.length;Ce++)pe[Ce]=V(pe[Ce]);else oe.trace&&(oe.trace=V(oe.trace));return[$,x.stringify($,de)]}function L($,de){return x.maxByteSize($)>de}Re.exports={truncate:function($,de,oe){oe=void 0===oe?524288:oe;for(var pe,Ce,ve,he=[W,O,K.bind(null,1024),K.bind(null,512),K.bind(null,256),B];pe=he.shift();)if($=(Ce=pe($,de))[0],(ve=Ce[1]).error||!L(ve.value,oe))return ve;return ve},raw:W,truncateFrames:O,truncateStrings:K,maybeTruncateValue:Z}}])},1135:($t,Re,H)=>{"use strict";H.d(Re,{X:()=>x});var m=H(7579);class x extends m.x{constructor(W){super(),this._value=W}get value(){return this.getValue()}_subscribe(W){const N=super._subscribe(W);return!N.closed&&W.next(this._value),N}getValue(){const{hasError:W,thrownError:N,_value:O}=this;if(W)throw N;return this._throwIfClosed(),O}next(W){super.next(this._value=W)}}},9751:($t,Re,H)=>{"use strict";H.d(Re,{y:()=>K});var m=H(930),x=H(727),S=H(8822),W=H(9635),N=H(2416),O=H(576),Z=H(2806);let K=(()=>{class ${constructor(oe){oe&&(this._subscribe=oe)}lift(oe){const pe=new $;return pe.source=this,pe.operator=oe,pe}subscribe(oe,pe,Ce){const ve=function L($){return $&&$ instanceof m.Lv||function B($){return $&&(0,O.m)($.next)&&(0,O.m)($.error)&&(0,O.m)($.complete)}($)&&(0,x.Nn)($)}(oe)?oe:new m.Hp(oe,pe,Ce);return(0,Z.x)(()=>{const{operator:he,source:ae}=this;ve.add(he?he.call(ve,ae):ae?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(oe){try{return this._subscribe(oe)}catch(pe){oe.error(pe)}}forEach(oe,pe){return new(pe=V(pe))((Ce,ve)=>{const he=new m.Hp({next:ae=>{try{oe(ae)}catch(Ve){ve(Ve),he.unsubscribe()}},error:ve,complete:Ce});this.subscribe(he)})}_subscribe(oe){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(oe)}[S.L](){return this}pipe(...oe){return(0,W.U)(oe)(this)}toPromise(oe){return new(oe=V(oe))((pe,Ce)=>{let ve;this.subscribe(he=>ve=he,he=>Ce(he),()=>pe(ve))})}}return $.create=de=>new $(de),$})();function V($){var de;return null!==(de=$??N.v.Promise)&&void 0!==de?de:Promise}},7579:($t,Re,H)=>{"use strict";H.d(Re,{x:()=>Z});var m=H(9751),x=H(727);const W=(0,H(3888).d)(V=>function(){V(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var N=H(8737),O=H(2806);let Z=(()=>{class V extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(L){const $=new K(this,this);return $.operator=L,$}_throwIfClosed(){if(this.closed)throw new W}next(L){(0,O.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const $ of this.currentObservers)$.next(L)}})}error(L){(0,O.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=L;const{observers:$}=this;for(;$.length;)$.shift().error(L)}})}complete(){(0,O.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:L}=this;for(;L.length;)L.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var L;return(null===(L=this.observers)||void 0===L?void 0:L.length)>0}_trySubscribe(L){return this._throwIfClosed(),super._trySubscribe(L)}_subscribe(L){return this._throwIfClosed(),this._checkFinalizedStatuses(L),this._innerSubscribe(L)}_innerSubscribe(L){const{hasError:$,isStopped:de,observers:oe}=this;return $||de?x.Lc:(this.currentObservers=null,oe.push(L),new x.w0(()=>{this.currentObservers=null,(0,N.P)(oe,L)}))}_checkFinalizedStatuses(L){const{hasError:$,thrownError:de,isStopped:oe}=this;$?L.error(de):oe&&L.complete()}asObservable(){const L=new m.y;return L.source=this,L}}return V.create=(B,L)=>new K(B,L),V})();class K extends Z{constructor(B,L){super(),this.destination=B,this.source=L}next(B){var L,$;null===($=null===(L=this.destination)||void 0===L?void 0:L.next)||void 0===$||$.call(L,B)}error(B){var L,$;null===($=null===(L=this.destination)||void 0===L?void 0:L.error)||void 0===$||$.call(L,B)}complete(){var B,L;null===(L=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===L||L.call(B)}_subscribe(B){var L,$;return null!==($=null===(L=this.source)||void 0===L?void 0:L.subscribe(B))&&void 0!==$?$:x.Lc}}},930:($t,Re,H)=>{"use strict";H.d(Re,{Hp:()=>Ce,Lv:()=>$});var m=H(576),x=H(727),S=H(2416),W=H(7849),N=H(5032);const O=V("C",void 0,void 0);function V(fe,te,ce){return{kind:fe,value:te,error:ce}}var B=H(3410),L=H(2806);class $ extends x.w0{constructor(te){super(),this.isStopped=!1,te?(this.destination=te,(0,x.Nn)(te)&&te.add(this)):this.destination=Ve}static create(te,ce,Qe){return new Ce(te,ce,Qe)}next(te){this.isStopped?ae(function K(fe){return V("N",fe,void 0)}(te),this):this._next(te)}error(te){this.isStopped?ae(function Z(fe){return V("E",void 0,fe)}(te),this):(this.isStopped=!0,this._error(te))}complete(){this.isStopped?ae(O,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(te){this.destination.next(te)}_error(te){try{this.destination.error(te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const de=Function.prototype.bind;function oe(fe,te){return de.call(fe,te)}class pe{constructor(te){this.partialObserver=te}next(te){const{partialObserver:ce}=this;if(ce.next)try{ce.next(te)}catch(Qe){ve(Qe)}}error(te){const{partialObserver:ce}=this;if(ce.error)try{ce.error(te)}catch(Qe){ve(Qe)}else ve(te)}complete(){const{partialObserver:te}=this;if(te.complete)try{te.complete()}catch(ce){ve(ce)}}}class Ce extends ${constructor(te,ce,Qe){let Ye;if(super(),(0,m.m)(te)||!te)Ye={next:te??void 0,error:ce??void 0,complete:Qe??void 0};else{let Le;this&&S.v.useDeprecatedNextContext?(Le=Object.create(te),Le.unsubscribe=()=>this.unsubscribe(),Ye={next:te.next&&oe(te.next,Le),error:te.error&&oe(te.error,Le),complete:te.complete&&oe(te.complete,Le)}):Ye=te}this.destination=new pe(Ye)}}function ve(fe){S.v.useDeprecatedSynchronousErrorHandling?(0,L.O)(fe):(0,W.h)(fe)}function ae(fe,te){const{onStoppedNotification:ce}=S.v;ce&&B.z.setTimeout(()=>ce(fe,te))}const Ve={closed:!0,next:N.Z,error:function he(fe){throw fe},complete:N.Z}},727:($t,Re,H)=>{"use strict";H.d(Re,{Lc:()=>O,w0:()=>N,Nn:()=>Z});var m=H(576);const S=(0,H(3888).d)(V=>function(L){V(this),this.message=L?`${L.length} errors occurred during unsubscription:\n${L.map(($,de)=>`${de+1}) ${$.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=L});var W=H(8737);class N{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:L}=this;if(L)if(this._parentage=null,Array.isArray(L))for(const oe of L)oe.remove(this);else L.remove(this);const{initialTeardown:$}=this;if((0,m.m)($))try{$()}catch(oe){B=oe instanceof S?oe.errors:[oe]}const{_finalizers:de}=this;if(de){this._finalizers=null;for(const oe of de)try{K(oe)}catch(pe){B=B??[],pe instanceof S?B=[...B,...pe.errors]:B.push(pe)}}if(B)throw new S(B)}}add(B){var L;if(B&&B!==this)if(this.closed)K(B);else{if(B instanceof N){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(L=this._finalizers)&&void 0!==L?L:[]).push(B)}}_hasParent(B){const{_parentage:L}=this;return L===B||Array.isArray(L)&&L.includes(B)}_addParent(B){const{_parentage:L}=this;this._parentage=Array.isArray(L)?(L.push(B),L):L?[L,B]:B}_removeParent(B){const{_parentage:L}=this;L===B?this._parentage=null:Array.isArray(L)&&(0,W.P)(L,B)}remove(B){const{_finalizers:L}=this;L&&(0,W.P)(L,B),B instanceof N&&B._removeParent(this)}}N.EMPTY=(()=>{const V=new N;return V.closed=!0,V})();const O=N.EMPTY;function Z(V){return V instanceof N||V&&"closed"in V&&(0,m.m)(V.remove)&&(0,m.m)(V.add)&&(0,m.m)(V.unsubscribe)}function K(V){(0,m.m)(V)?V():V.unsubscribe()}},2416:($t,Re,H)=>{"use strict";H.d(Re,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:($t,Re,H)=>{"use strict";H.d(Re,{a:()=>B});var m=H(9751),x=H(4742),S=H(8996),W=H(4671),N=H(3268),O=H(3269),Z=H(1810),K=H(5403),V=H(9672);function B(...de){const oe=(0,O.yG)(de),pe=(0,O.jO)(de),{args:Ce,keys:ve}=(0,x.D)(de);if(0===Ce.length)return(0,S.D)([],oe);const he=new m.y(function L(de,oe,pe=W.y){return Ce=>{$(oe,()=>{const{length:ve}=de,he=new Array(ve);let ae=ve,Ve=ve;for(let fe=0;fe<ve;fe++)$(oe,()=>{const te=(0,S.D)(de[fe],oe);let ce=!1;te.subscribe((0,K.x)(Ce,Qe=>{he[fe]=Qe,ce||(ce=!0,Ve--),Ve||Ce.next(pe(he.slice()))},()=>{--ae||Ce.complete()}))},Ce)},Ce)}}(Ce,oe,ve?ae=>(0,Z.n)(ve,ae):W.y));return pe?he.pipe((0,N.Z)(pe)):he}function $(de,oe,pe){de?(0,V.f)(pe,de,oe):oe()}},7272:($t,Re,H)=>{"use strict";H.d(Re,{z:()=>N});var m=H(8189),S=H(3269),W=H(8996);function N(...O){return function x(){return(0,m.J)(1)}()((0,W.D)(O,(0,S.yG)(O)))}},9770:($t,Re,H)=>{"use strict";H.d(Re,{P:()=>S});var m=H(9751),x=H(8421);function S(W){return new m.y(N=>{(0,x.Xf)(W()).subscribe(N)})}},515:($t,Re,H)=>{"use strict";H.d(Re,{E:()=>x});const x=new(H(9751).y)(N=>N.complete())},8996:($t,Re,H)=>{"use strict";H.d(Re,{D:()=>te});var m=H(8421),x=H(5363),S=H(9468),O=H(9751),K=H(2202),V=H(576),B=H(9672);function $(ce,Qe){if(!ce)throw new Error("Iterable cannot be null");return new O.y(Ye=>{(0,B.f)(Ye,Qe,()=>{const Le=ce[Symbol.asyncIterator]();(0,B.f)(Ye,Qe,()=>{Le.next().then(Pe=>{Pe.done?Ye.complete():Ye.next(Pe.value)})},0,!0)})})}var de=H(3670),oe=H(8239),pe=H(1144),Ce=H(6495),ve=H(2206),he=H(4532),ae=H(3260);function te(ce,Qe){return Qe?function fe(ce,Qe){if(null!=ce){if((0,de.c)(ce))return function W(ce,Qe){return(0,m.Xf)(ce).pipe((0,S.R)(Qe),(0,x.Q)(Qe))}(ce,Qe);if((0,pe.z)(ce))return function Z(ce,Qe){return new O.y(Ye=>{let Le=0;return Qe.schedule(function(){Le===ce.length?Ye.complete():(Ye.next(ce[Le++]),Ye.closed||this.schedule())})})}(ce,Qe);if((0,oe.t)(ce))return function N(ce,Qe){return(0,m.Xf)(ce).pipe((0,S.R)(Qe),(0,x.Q)(Qe))}(ce,Qe);if((0,ve.D)(ce))return $(ce,Qe);if((0,Ce.T)(ce))return function L(ce,Qe){return new O.y(Ye=>{let Le;return(0,B.f)(Ye,Qe,()=>{Le=ce[K.h](),(0,B.f)(Ye,Qe,()=>{let Pe,Ie;try{({value:Pe,done:Ie}=Le.next())}catch(Me){return void Ye.error(Me)}Ie?Ye.complete():Ye.next(Pe)},0,!0)}),()=>(0,V.m)(Le?.return)&&Le.return()})}(ce,Qe);if((0,ae.L)(ce))return function Ve(ce,Qe){return $((0,ae.Q)(ce),Qe)}(ce,Qe)}throw(0,he.z)(ce)}(ce,Qe):(0,m.Xf)(ce)}},8421:($t,Re,H)=>{"use strict";H.d(Re,{Xf:()=>de});var m=H(655),x=H(1144),S=H(8239),W=H(9751),N=H(3670),O=H(2206),Z=H(4532),K=H(6495),V=H(3260),B=H(576),L=H(7849),$=H(8822);function de(fe){if(fe instanceof W.y)return fe;if(null!=fe){if((0,N.c)(fe))return function oe(fe){return new W.y(te=>{const ce=fe[$.L]();if((0,B.m)(ce.subscribe))return ce.subscribe(te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(fe);if((0,x.z)(fe))return function pe(fe){return new W.y(te=>{for(let ce=0;ce<fe.length&&!te.closed;ce++)te.next(fe[ce]);te.complete()})}(fe);if((0,S.t)(fe))return function Ce(fe){return new W.y(te=>{fe.then(ce=>{te.closed||(te.next(ce),te.complete())},ce=>te.error(ce)).then(null,L.h)})}(fe);if((0,O.D)(fe))return he(fe);if((0,K.T)(fe))return function ve(fe){return new W.y(te=>{for(const ce of fe)if(te.next(ce),te.closed)return;te.complete()})}(fe);if((0,V.L)(fe))return function ae(fe){return he((0,V.Q)(fe))}(fe)}throw(0,Z.z)(fe)}function he(fe){return new W.y(te=>{(function Ve(fe,te){var ce,Qe,Ye,Le;return(0,m.mG)(this,void 0,void 0,function*(){try{for(ce=(0,m.KL)(fe);!(Qe=yield ce.next()).done;)if(te.next(Qe.value),te.closed)return}catch(Pe){Ye={error:Pe}}finally{try{Qe&&!Qe.done&&(Le=ce.return)&&(yield Le.call(ce))}finally{if(Ye)throw Ye.error}}te.complete()})})(fe,te).catch(ce=>te.error(ce))})}},6451:($t,Re,H)=>{"use strict";H.d(Re,{T:()=>O});var m=H(8189),x=H(8421),S=H(515),W=H(3269),N=H(8996);function O(...Z){const K=(0,W.yG)(Z),V=(0,W._6)(Z,1/0),B=Z;return B.length?1===B.length?(0,x.Xf)(B[0]):(0,m.J)(V)((0,N.D)(B,K)):S.E}},9646:($t,Re,H)=>{"use strict";H.d(Re,{of:()=>S});var m=H(3269),x=H(8996);function S(...W){const N=(0,m.yG)(W);return(0,x.D)(W,N)}},5403:($t,Re,H)=>{"use strict";H.d(Re,{x:()=>x});var m=H(930);function x(W,N,O,Z,K){return new S(W,N,O,Z,K)}class S extends m.Lv{constructor(N,O,Z,K,V,B){super(N),this.onFinalize=V,this.shouldUnsubscribe=B,this._next=O?function(L){try{O(L)}catch($){N.error($)}}:super._next,this._error=K?function(L){try{K(L)}catch($){N.error($)}finally{this.unsubscribe()}}:super._error,this._complete=Z?function(){try{Z()}catch(L){N.error(L)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var N;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:O}=this;super.unsubscribe(),!O&&(null===(N=this.onFinalize)||void 0===N||N.call(this))}}}},4351:($t,Re,H)=>{"use strict";H.d(Re,{b:()=>S});var m=H(5577),x=H(576);function S(W,N){return(0,x.m)(N)?(0,m.z)(W,N,1):(0,m.z)(W,1)}},8372:($t,Re,H)=>{"use strict";H.d(Re,{b:()=>W});var m=H(4986),x=H(4482),S=H(5403);function W(N,O=m.z){return(0,x.e)((Z,K)=>{let V=null,B=null,L=null;const $=()=>{if(V){V.unsubscribe(),V=null;const oe=B;B=null,K.next(oe)}};function de(){const oe=L+N,pe=O.now();if(pe<oe)return V=this.schedule(void 0,oe-pe),void K.add(V);$()}Z.subscribe((0,S.x)(K,oe=>{B=oe,L=O.now(),V||(V=O.schedule(de,N),K.add(V))},()=>{$(),K.complete()},void 0,()=>{B=V=null}))})}},6590:($t,Re,H)=>{"use strict";H.d(Re,{d:()=>S});var m=H(4482),x=H(5403);function S(W){return(0,m.e)((N,O)=>{let Z=!1;N.subscribe((0,x.x)(O,K=>{Z=!0,O.next(K)},()=>{Z||O.next(W),O.complete()}))})}},1884:($t,Re,H)=>{"use strict";H.d(Re,{x:()=>W});var m=H(4671),x=H(4482),S=H(5403);function W(O,Z=m.y){return O=O??N,(0,x.e)((K,V)=>{let B,L=!0;K.subscribe((0,S.x)(V,$=>{const de=Z($);(L||!O(B,de))&&(L=!1,B=de,V.next($))}))})}function N(O,Z){return O===Z}},9300:($t,Re,H)=>{"use strict";H.d(Re,{h:()=>S});var m=H(4482),x=H(5403);function S(W,N){return(0,m.e)((O,Z)=>{let K=0;O.subscribe((0,x.x)(Z,V=>W.call(N,V,K++)&&Z.next(V)))})}},590:($t,Re,H)=>{"use strict";H.d(Re,{P:()=>Z});var m=H(6805),x=H(9300),S=H(5698),W=H(6590),N=H(8068),O=H(4671);function Z(K,V){const B=arguments.length>=2;return L=>L.pipe(K?(0,x.h)(($,de)=>K($,de,L)):O.y,(0,S.q)(1),B?(0,W.d)(V):(0,N.T)(()=>new m.K))}},4004:($t,Re,H)=>{"use strict";H.d(Re,{U:()=>S});var m=H(4482),x=H(5403);function S(W,N){return(0,m.e)((O,Z)=>{let K=0;O.subscribe((0,x.x)(Z,V=>{Z.next(W.call(N,V,K++))}))})}},9718:($t,Re,H)=>{"use strict";H.d(Re,{h:()=>x});var m=H(4004);function x(S){return(0,m.U)(()=>S)}},8189:($t,Re,H)=>{"use strict";H.d(Re,{J:()=>S});var m=H(5577),x=H(4671);function S(W=1/0){return(0,m.z)(x.y,W)}},5577:($t,Re,H)=>{"use strict";H.d(Re,{z:()=>K});var m=H(4004),x=H(8421),S=H(4482),W=H(9672),N=H(5403),Z=H(576);function K(V,B,L=1/0){return(0,Z.m)(B)?K(($,de)=>(0,m.U)((oe,pe)=>B($,oe,de,pe))((0,x.Xf)(V($,de))),L):("number"==typeof B&&(L=B),(0,S.e)(($,de)=>function O(V,B,L,$,de,oe,pe,Ce){const ve=[];let he=0,ae=0,Ve=!1;const fe=()=>{Ve&&!ve.length&&!he&&B.complete()},te=Qe=>he<$?ce(Qe):ve.push(Qe),ce=Qe=>{oe&&B.next(Qe),he++;let Ye=!1;(0,x.Xf)(L(Qe,ae++)).subscribe((0,N.x)(B,Le=>{de?.(Le),oe?te(Le):B.next(Le)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(he--;ve.length&&he<$;){const Le=ve.shift();pe?(0,W.f)(B,pe,()=>ce(Le)):ce(Le)}fe()}catch(Le){B.error(Le)}}))};return V.subscribe((0,N.x)(B,te,()=>{Ve=!0,fe()})),()=>{Ce?.()}}($,de,V,L)))}},5363:($t,Re,H)=>{"use strict";H.d(Re,{Q:()=>W});var m=H(9672),x=H(4482),S=H(5403);function W(N,O=0){return(0,x.e)((Z,K)=>{Z.subscribe((0,S.x)(K,V=>(0,m.f)(K,N,()=>K.next(V),O),()=>(0,m.f)(K,N,()=>K.complete(),O),V=>(0,m.f)(K,N,()=>K.error(V),O)))})}},5026:($t,Re,H)=>{"use strict";H.d(Re,{R:()=>W});var m=H(4482),x=H(5403);function S(N,O,Z,K,V){return(B,L)=>{let $=Z,de=O,oe=0;B.subscribe((0,x.x)(L,pe=>{const Ce=oe++;de=$?N(de,pe,Ce):($=!0,pe),K&&L.next(de)},V&&(()=>{$&&L.next(de),L.complete()})))}}function W(N,O){return(0,m.e)(S(N,O,arguments.length>=2,!0))}},3099:($t,Re,H)=>{"use strict";H.d(Re,{B:()=>N});var m=H(8421),x=H(7579),S=H(930),W=H(4482);function N(Z={}){const{connector:K=(()=>new x.x),resetOnError:V=!0,resetOnComplete:B=!0,resetOnRefCountZero:L=!0}=Z;return $=>{let de,oe,pe,Ce=0,ve=!1,he=!1;const ae=()=>{oe?.unsubscribe(),oe=void 0},Ve=()=>{ae(),de=pe=void 0,ve=he=!1},fe=()=>{const te=de;Ve(),te?.unsubscribe()};return(0,W.e)((te,ce)=>{Ce++,!he&&!ve&&ae();const Qe=pe=pe??K();ce.add(()=>{Ce--,0===Ce&&!he&&!ve&&(oe=O(fe,L))}),Qe.subscribe(ce),!de&&Ce>0&&(de=new S.Hp({next:Ye=>Qe.next(Ye),error:Ye=>{he=!0,ae(),oe=O(Ve,V,Ye),Qe.error(Ye)},complete:()=>{ve=!0,ae(),oe=O(Ve,B),Qe.complete()}}),(0,m.Xf)(te).subscribe(de))})($)}}function O(Z,K,...V){if(!0===K)return void Z();if(!1===K)return;const B=new S.Hp({next:()=>{B.unsubscribe(),Z()}});return K(...V).subscribe(B)}},3151:($t,Re,H)=>{"use strict";H.d(Re,{d:()=>N});var m=H(7579),x=H(6063);class S extends m.x{constructor(Z=1/0,K=1/0,V=x.l){super(),this._bufferSize=Z,this._windowTime=K,this._timestampProvider=V,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=K===1/0,this._bufferSize=Math.max(1,Z),this._windowTime=Math.max(1,K)}next(Z){const{isStopped:K,_buffer:V,_infiniteTimeWindow:B,_timestampProvider:L,_windowTime:$}=this;K||(V.push(Z),!B&&V.push(L.now()+$)),this._trimBuffer(),super.next(Z)}_subscribe(Z){this._throwIfClosed(),this._trimBuffer();const K=this._innerSubscribe(Z),{_infiniteTimeWindow:V,_buffer:B}=this,L=B.slice();for(let $=0;$<L.length&&!Z.closed;$+=V?1:2)Z.next(L[$]);return this._checkFinalizedStatuses(Z),K}_trimBuffer(){const{_bufferSize:Z,_timestampProvider:K,_buffer:V,_infiniteTimeWindow:B}=this,L=(B?1:2)*Z;if(Z<1/0&&L<V.length&&V.splice(0,V.length-L),!B){const $=K.now();let de=0;for(let oe=1;oe<V.length&&V[oe]<=$;oe+=2)de=oe;de&&V.splice(0,de+1)}}}var W=H(3099);function N(O,Z,K){let V,B=!1;return O&&"object"==typeof O?({bufferSize:V=1/0,windowTime:Z=1/0,refCount:B=!1,scheduler:K}=O):V=O??1/0,(0,W.B)({connector:()=>new S(V,Z,K),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:B})}},8675:($t,Re,H)=>{"use strict";H.d(Re,{O:()=>W});var m=H(7272),x=H(3269),S=H(4482);function W(...N){const O=(0,x.yG)(N);return(0,S.e)((Z,K)=>{(O?(0,m.z)(N,Z,O):(0,m.z)(N,Z)).subscribe(K)})}},9468:($t,Re,H)=>{"use strict";H.d(Re,{R:()=>x});var m=H(4482);function x(S,W=0){return(0,m.e)((N,O)=>{O.add(S.schedule(()=>N.subscribe(O),W))})}},3900:($t,Re,H)=>{"use strict";H.d(Re,{w:()=>W});var m=H(8421),x=H(4482),S=H(5403);function W(N,O){return(0,x.e)((Z,K)=>{let V=null,B=0,L=!1;const $=()=>L&&!V&&K.complete();Z.subscribe((0,S.x)(K,de=>{V?.unsubscribe();let oe=0;const pe=B++;(0,m.Xf)(N(de,pe)).subscribe(V=(0,S.x)(K,Ce=>K.next(O?O(de,Ce,pe,oe++):Ce),()=>{V=null,$()}))},()=>{L=!0,$()}))})}},5698:($t,Re,H)=>{"use strict";H.d(Re,{q:()=>W});var m=H(515),x=H(4482),S=H(5403);function W(N){return N<=0?()=>m.E:(0,x.e)((O,Z)=>{let K=0;O.subscribe((0,S.x)(Z,V=>{++K<=N&&(Z.next(V),N<=K&&Z.complete())}))})}},2529:($t,Re,H)=>{"use strict";H.d(Re,{o:()=>S});var m=H(4482),x=H(5403);function S(W,N=!1){return(0,m.e)((O,Z)=>{let K=0;O.subscribe((0,x.x)(Z,V=>{const B=W(V,K++);(B||N)&&Z.next(V),!B&&Z.complete()}))})}},8505:($t,Re,H)=>{"use strict";H.d(Re,{b:()=>N});var m=H(576),x=H(4482),S=H(5403),W=H(4671);function N(O,Z,K){const V=(0,m.m)(O)||Z||K?{next:O,error:Z,complete:K}:O;return V?(0,x.e)((B,L)=>{var $;null===($=V.subscribe)||void 0===$||$.call(V);let de=!0;B.subscribe((0,S.x)(L,oe=>{var pe;null===(pe=V.next)||void 0===pe||pe.call(V,oe),L.next(oe)},()=>{var oe;de=!1,null===(oe=V.complete)||void 0===oe||oe.call(V),L.complete()},oe=>{var pe;de=!1,null===(pe=V.error)||void 0===pe||pe.call(V,oe),L.error(oe)},()=>{var oe,pe;de&&(null===(oe=V.unsubscribe)||void 0===oe||oe.call(V)),null===(pe=V.finalize)||void 0===pe||pe.call(V)}))}):W.y}},8068:($t,Re,H)=>{"use strict";H.d(Re,{T:()=>W});var m=H(6805),x=H(4482),S=H(5403);function W(O=N){return(0,x.e)((Z,K)=>{let V=!1;Z.subscribe((0,S.x)(K,B=>{V=!0,K.next(B)},()=>V?K.complete():K.error(O())))})}function N(){return new m.K}},4408:($t,Re,H)=>{"use strict";H.d(Re,{o:()=>N});var m=H(727);class x extends m.w0{constructor(Z,K){super()}schedule(Z,K=0){return this}}const S={setInterval(O,Z,...K){const{delegate:V}=S;return V?.setInterval?V.setInterval(O,Z,...K):setInterval(O,Z,...K)},clearInterval(O){const{delegate:Z}=S;return(Z?.clearInterval||clearInterval)(O)},delegate:void 0};var W=H(8737);class N extends x{constructor(Z,K){super(Z,K),this.scheduler=Z,this.work=K,this.pending=!1}schedule(Z,K=0){var V;if(this.closed)return this;this.state=Z;const B=this.id,L=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(L,B,K)),this.pending=!0,this.delay=K,this.id=null!==(V=this.id)&&void 0!==V?V:this.requestAsyncId(L,this.id,K),this}requestAsyncId(Z,K,V=0){return S.setInterval(Z.flush.bind(Z,this),V)}recycleAsyncId(Z,K,V=0){if(null!=V&&this.delay===V&&!1===this.pending)return K;null!=K&&S.clearInterval(K)}execute(Z,K){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const V=this._execute(Z,K);if(V)return V;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Z,K){let B,V=!1;try{this.work(Z)}catch(L){V=!0,B=L||new Error("Scheduled action threw falsy error")}if(V)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:Z,scheduler:K}=this,{actions:V}=K;this.work=this.state=this.scheduler=null,this.pending=!1,(0,W.P)(V,this),null!=Z&&(this.id=this.recycleAsyncId(K,Z,null)),this.delay=null,super.unsubscribe()}}}},7565:($t,Re,H)=>{"use strict";H.d(Re,{v:()=>S});var m=H(6063);class x{constructor(N,O=x.now){this.schedulerActionCtor=N,this.now=O}schedule(N,O=0,Z){return new this.schedulerActionCtor(this,N).schedule(Z,O)}}x.now=m.l.now;class S extends x{constructor(N,O=x.now){super(N,O),this.actions=[],this._active=!1}flush(N){const{actions:O}=this;if(this._active)return void O.push(N);let Z;this._active=!0;do{if(Z=N.execute(N.state,N.delay))break}while(N=O.shift());if(this._active=!1,Z){for(;N=O.shift();)N.unsubscribe();throw Z}}}},4986:($t,Re,H)=>{"use strict";H.d(Re,{P:()=>W,z:()=>S});var m=H(4408);const S=new(H(7565).v)(m.o),W=S},6063:($t,Re,H)=>{"use strict";H.d(Re,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:($t,Re,H)=>{"use strict";H.d(Re,{z:()=>m});const m={setTimeout(x,S,...W){const{delegate:N}=m;return N?.setTimeout?N.setTimeout(x,S,...W):setTimeout(x,S,...W)},clearTimeout(x){const{delegate:S}=m;return(S?.clearTimeout||clearTimeout)(x)},delegate:void 0}},2202:($t,Re,H)=>{"use strict";H.d(Re,{h:()=>x});const x=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:($t,Re,H)=>{"use strict";H.d(Re,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:($t,Re,H)=>{"use strict";H.d(Re,{K:()=>x});const x=(0,H(3888).d)(S=>function(){S(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:($t,Re,H)=>{"use strict";H.d(Re,{_6:()=>O,jO:()=>W,yG:()=>N});var m=H(576),x=H(3532);function S(Z){return Z[Z.length-1]}function W(Z){return(0,m.m)(S(Z))?Z.pop():void 0}function N(Z){return(0,x.K)(S(Z))?Z.pop():void 0}function O(Z,K){return"number"==typeof S(Z)?Z.pop():K}},4742:($t,Re,H)=>{"use strict";H.d(Re,{D:()=>N});const{isArray:m}=Array,{getPrototypeOf:x,prototype:S,keys:W}=Object;function N(Z){if(1===Z.length){const K=Z[0];if(m(K))return{args:K,keys:null};if(function O(Z){return Z&&"object"==typeof Z&&x(Z)===S}(K)){const V=W(K);return{args:V.map(B=>K[B]),keys:V}}}return{args:Z,keys:null}}},8737:($t,Re,H)=>{"use strict";function m(x,S){if(x){const W=x.indexOf(S);0<=W&&x.splice(W,1)}}H.d(Re,{P:()=>m})},3888:($t,Re,H)=>{"use strict";function m(x){const W=x(N=>{Error.call(N),N.stack=(new Error).stack});return W.prototype=Object.create(Error.prototype),W.prototype.constructor=W,W}H.d(Re,{d:()=>m})},1810:($t,Re,H)=>{"use strict";function m(x,S){return x.reduce((W,N,O)=>(W[N]=S[O],W),{})}H.d(Re,{n:()=>m})},2806:($t,Re,H)=>{"use strict";H.d(Re,{O:()=>W,x:()=>S});var m=H(2416);let x=null;function S(N){if(m.v.useDeprecatedSynchronousErrorHandling){const O=!x;if(O&&(x={errorThrown:!1,error:null}),N(),O){const{errorThrown:Z,error:K}=x;if(x=null,Z)throw K}}else N()}function W(N){m.v.useDeprecatedSynchronousErrorHandling&&x&&(x.errorThrown=!0,x.error=N)}},9672:($t,Re,H)=>{"use strict";function m(x,S,W,N=0,O=!1){const Z=S.schedule(function(){W(),O?x.add(this.schedule(null,N)):this.unsubscribe()},N);if(x.add(Z),!O)return Z}H.d(Re,{f:()=>m})},4671:($t,Re,H)=>{"use strict";function m(x){return x}H.d(Re,{y:()=>m})},1144:($t,Re,H)=>{"use strict";H.d(Re,{z:()=>m});const m=x=>x&&"number"==typeof x.length&&"function"!=typeof x},2206:($t,Re,H)=>{"use strict";H.d(Re,{D:()=>x});var m=H(576);function x(S){return Symbol.asyncIterator&&(0,m.m)(S?.[Symbol.asyncIterator])}},576:($t,Re,H)=>{"use strict";function m(x){return"function"==typeof x}H.d(Re,{m:()=>m})},3670:($t,Re,H)=>{"use strict";H.d(Re,{c:()=>S});var m=H(8822),x=H(576);function S(W){return(0,x.m)(W[m.L])}},6495:($t,Re,H)=>{"use strict";H.d(Re,{T:()=>S});var m=H(2202),x=H(576);function S(W){return(0,x.m)(W?.[m.h])}},8239:($t,Re,H)=>{"use strict";H.d(Re,{t:()=>x});var m=H(576);function x(S){return(0,m.m)(S?.then)}},3260:($t,Re,H)=>{"use strict";H.d(Re,{L:()=>W,Q:()=>S});var m=H(655),x=H(576);function S(N){return(0,m.FC)(this,arguments,function*(){const Z=N.getReader();try{for(;;){const{value:K,done:V}=yield(0,m.qq)(Z.read());if(V)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(K)}}finally{Z.releaseLock()}})}function W(N){return(0,x.m)(N?.getReader)}},3532:($t,Re,H)=>{"use strict";H.d(Re,{K:()=>x});var m=H(576);function x(S){return S&&(0,m.m)(S.schedule)}},4482:($t,Re,H)=>{"use strict";H.d(Re,{A:()=>x,e:()=>S});var m=H(576);function x(W){return(0,m.m)(W?.lift)}function S(W){return N=>{if(x(N))return N.lift(function(O){try{return W(O,this)}catch(Z){this.error(Z)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:($t,Re,H)=>{"use strict";H.d(Re,{Z:()=>W});var m=H(4004);const{isArray:x}=Array;function W(N){return(0,m.U)(O=>function S(N,O){return x(O)?N(...O):N(O)}(N,O))}},5032:($t,Re,H)=>{"use strict";function m(){}H.d(Re,{Z:()=>m})},9635:($t,Re,H)=>{"use strict";H.d(Re,{U:()=>S,z:()=>x});var m=H(4671);function x(...W){return S(W)}function S(W){return 0===W.length?m.y:1===W.length?W[0]:function(O){return W.reduce((Z,K)=>K(Z),O)}}},7849:($t,Re,H)=>{"use strict";H.d(Re,{h:()=>S});var m=H(2416),x=H(3410);function S(W){x.z.setTimeout(()=>{const{onUnhandledError:N}=m.v;if(!N)throw W;N(W)})}},4532:($t,Re,H)=>{"use strict";function m(x){return new TypeError(`You provided ${null!==x&&"object"==typeof x?"an invalid object":`'${x}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(Re,{z:()=>m})},655:($t,Re,H)=>{"use strict";function W(Ie,Me){var at={};for(var We in Ie)Object.prototype.hasOwnProperty.call(Ie,We)&&Me.indexOf(We)<0&&(at[We]=Ie[We]);if(null!=Ie&&"function"==typeof Object.getOwnPropertySymbols){var wt=0;for(We=Object.getOwnPropertySymbols(Ie);wt<We.length;wt++)Me.indexOf(We[wt])<0&&Object.prototype.propertyIsEnumerable.call(Ie,We[wt])&&(at[We[wt]]=Ie[We[wt]])}return at}function K(Ie,Me,at,We){return new(at||(at=Promise))(function(Et,hn){function Pn(kn){try{Dt(We.next(kn))}catch(Fn){hn(Fn)}}function Cn(kn){try{Dt(We.throw(kn))}catch(Fn){hn(Fn)}}function Dt(kn){kn.done?Et(kn.value):function wt(Et){return Et instanceof at?Et:new at(function(hn){hn(Et)})}(kn.value).then(Pn,Cn)}Dt((We=We.apply(Ie,Me||[])).next())})}function ve(Ie){return this instanceof ve?(this.v=Ie,this):new ve(Ie)}function he(Ie,Me,at){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var wt,We=at.apply(Ie,Me||[]),Et=[];return wt={},hn("next"),hn("throw"),hn("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function hn(en){We[en]&&(wt[en]=function(Vt){return new Promise(function(sr,Lt){Et.push([en,Vt,sr,Lt])>1||Pn(en,Vt)})})}function Pn(en,Vt){try{!function Cn(en){en.value instanceof ve?Promise.resolve(en.value.v).then(Dt,kn):Fn(Et[0][2],en)}(We[en](Vt))}catch(sr){Fn(Et[0][3],sr)}}function Dt(en){Pn("next",en)}function kn(en){Pn("throw",en)}function Fn(en,Vt){en(Vt),Et.shift(),Et.length&&Pn(Et[0][0],Et[0][1])}}function Ve(Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at,Me=Ie[Symbol.asyncIterator];return Me?Me.call(Ie):(Ie=function $(Ie){var Me="function"==typeof Symbol&&Symbol.iterator,at=Me&&Ie[Me],We=0;if(at)return at.call(Ie);if(Ie&&"number"==typeof Ie.length)return{next:function(){return Ie&&We>=Ie.length&&(Ie=void 0),{value:Ie&&Ie[We++],done:!Ie}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ie),at={},We("next"),We("throw"),We("return"),at[Symbol.asyncIterator]=function(){return this},at);function We(Et){at[Et]=Ie[Et]&&function(hn){return new Promise(function(Pn,Cn){!function wt(Et,hn,Pn,Cn){Promise.resolve(Cn).then(function(Dt){Et({value:Dt,done:Pn})},hn)}(Pn,Cn,(hn=Ie[Et](hn)).done,hn.value)})}}}H.d(Re,{FC:()=>he,KL:()=>Ve,_T:()=>W,mG:()=>K,qq:()=>ve})},7340:($t,Re,H)=>{"use strict";H.d(Re,{F4:()=>B,IO:()=>pe,LC:()=>x,SB:()=>V,X$:()=>W,ZE:()=>ae,ZN:()=>he,_j:()=>m,eR:()=>L,jt:()=>N,k1:()=>Ve,l3:()=>S,oB:()=>K,pV:()=>de,vP:()=>Z});class m{}class x{}const S="*";function W(fe,te){return{type:7,name:fe,definitions:te,options:{}}}function N(fe,te=null){return{type:4,styles:te,timings:fe}}function Z(fe,te=null){return{type:2,steps:fe,options:te}}function K(fe){return{type:6,styles:fe,offset:null}}function V(fe,te,ce){return{type:0,name:fe,styles:te,options:ce}}function B(fe){return{type:5,steps:fe}}function L(fe,te,ce=null){return{type:1,expr:fe,animation:te,options:ce}}function de(fe=null){return{type:9,options:fe}}function pe(fe,te,ce=null){return{type:11,selector:fe,animation:te,options:ce}}function ve(fe){Promise.resolve().then(fe)}class he{constructor(te=0,ce=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=te+ce}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(te=>te()),this._onDoneFns=[])}onStart(te){this._originalOnStartFns.push(te),this._onStartFns.push(te)}onDone(te){this._originalOnDoneFns.push(te),this._onDoneFns.push(te)}onDestroy(te){this._onDestroyFns.push(te)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ve(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(te=>te()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(te=>te()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(te){this._position=this.totalTime?te*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(te){const ce="start"==te?this._onStartFns:this._onDoneFns;ce.forEach(Qe=>Qe()),ce.length=0}}class ae{constructor(te){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=te;let ce=0,Qe=0,Ye=0;const Le=this.players.length;0==Le?ve(()=>this._onFinish()):this.players.forEach(Pe=>{Pe.onDone(()=>{++ce==Le&&this._onFinish()}),Pe.onDestroy(()=>{++Qe==Le&&this._onDestroy()}),Pe.onStart(()=>{++Ye==Le&&this._onStart()})}),this.totalTime=this.players.reduce((Pe,Ie)=>Math.max(Pe,Ie.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(te=>te()),this._onDoneFns=[])}init(){this.players.forEach(te=>te.init())}onStart(te){this._onStartFns.push(te)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(te=>te()),this._onStartFns=[])}onDone(te){this._onDoneFns.push(te)}onDestroy(te){this._onDestroyFns.push(te)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(te=>te.play())}pause(){this.players.forEach(te=>te.pause())}restart(){this.players.forEach(te=>te.restart())}finish(){this._onFinish(),this.players.forEach(te=>te.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(te=>te.destroy()),this._onDestroyFns.forEach(te=>te()),this._onDestroyFns=[])}reset(){this.players.forEach(te=>te.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(te){const ce=te*this.totalTime;this.players.forEach(Qe=>{const Ye=Qe.totalTime?Math.min(1,ce/Qe.totalTime):1;Qe.setPosition(Ye)})}getPosition(){const te=this.players.reduce((ce,Qe)=>null===ce||Qe.totalTime>ce.totalTime?Qe:ce,null);return null!=te?te.getPosition():0}beforeDestroy(){this.players.forEach(te=>{te.beforeDestroy&&te.beforeDestroy()})}triggerCallback(te){const ce="start"==te?this._onStartFns:this._onDoneFns;ce.forEach(Qe=>Qe()),ce.length=0}}const Ve="!"},6895:($t,Re,H)=>{"use strict";H.d(Re,{Do:()=>Ve,ED:()=>ns,EM:()=>Ii,HT:()=>N,JF:()=>ha,K0:()=>Z,Mx:()=>Js,NF:()=>Aa,O5:()=>Un,Ov:()=>$e,PM:()=>ms,RF:()=>Vs,S$:()=>ve,V_:()=>B,Ye:()=>fe,b0:()=>ae,bD:()=>Go,ez:()=>So,mk:()=>or,n9:()=>Ri,q:()=>S,sg:()=>yr,w_:()=>O});var m=H(4650);let x=null;function S(){return x}function N(R){x||(x=R)}class O{}const Z=new m.OlP("DocumentToken");let K=(()=>{class R{historyGo(k){throw new Error("Not implemented")}}return R.\u0275fac=function(k){return new(k||R)},R.\u0275prov=m.Yz7({token:R,factory:function(){return function V(){return(0,m.LFG)(L)}()},providedIn:"platform"}),R})();const B=new m.OlP("Location Initialized");let L=(()=>{class R extends K{constructor(k){super(),this._doc=k,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return S().getBaseHref(this._doc)}onPopState(k){const se=S().getGlobalEventTarget(this._doc,"window");return se.addEventListener("popstate",k,!1),()=>se.removeEventListener("popstate",k)}onHashChange(k){const se=S().getGlobalEventTarget(this._doc,"window");return se.addEventListener("hashchange",k,!1),()=>se.removeEventListener("hashchange",k)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(k){this.location.pathname=k}pushState(k,se,be){$()?this._history.pushState(k,se,be):this.location.hash=be}replaceState(k,se,be){$()?this._history.replaceState(k,se,be):this.location.hash=be}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}}return R.\u0275fac=function(k){return new(k||R)(m.LFG(Z))},R.\u0275prov=m.Yz7({token:R,factory:function(){return function de(){return new L((0,m.LFG)(Z))}()},providedIn:"platform"}),R})();function $(){return!!window.history.pushState}function oe(R,ee){if(0==R.length)return ee;if(0==ee.length)return R;let k=0;return R.endsWith("/")&&k++,ee.startsWith("/")&&k++,2==k?R+ee.substring(1):1==k?R+ee:R+"/"+ee}function pe(R){const ee=R.match(/#|\?|$/),k=ee&&ee.index||R.length;return R.slice(0,k-("/"===R[k-1]?1:0))+R.slice(k)}function Ce(R){return R&&"?"!==R[0]?"?"+R:R}let ve=(()=>{class R{historyGo(k){throw new Error("Not implemented")}}return R.\u0275fac=function(k){return new(k||R)},R.\u0275prov=m.Yz7({token:R,factory:function(){return(0,m.f3M)(ae)},providedIn:"root"}),R})();const he=new m.OlP("appBaseHref");let ae=(()=>{class R extends ve{constructor(k,se){var be,ut,ft;super(),this._platformLocation=k,this._removeListenerFns=[],this._baseHref=null!==(be=null!==(ut=se??this._platformLocation.getBaseHrefFromDOM())&&void 0!==ut?ut:null===(ft=(0,m.f3M)(Z).location)||void 0===ft?void 0:ft.origin)&&void 0!==be?be:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return oe(this._baseHref,k)}path(k=!1){const se=this._platformLocation.pathname+Ce(this._platformLocation.search),be=this._platformLocation.hash;return be&&k?`${se}${be}`:se}pushState(k,se,be,ut){const ft=this.prepareExternalUrl(be+Ce(ut));this._platformLocation.pushState(k,se,ft)}replaceState(k,se,be,ut){const ft=this.prepareExternalUrl(be+Ce(ut));this._platformLocation.replaceState(k,se,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){var se,be;null===(se=(be=this._platformLocation).historyGo)||void 0===se||se.call(be,k)}}return R.\u0275fac=function(k){return new(k||R)(m.LFG(K),m.LFG(he,8))},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Ve=(()=>{class R extends ve{constructor(k,se){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=se&&(this._baseHref=se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let se=this._platformLocation.hash;return null==se&&(se="#"),se.length>0?se.substring(1):se}prepareExternalUrl(k){const se=oe(this._baseHref,k);return se.length>0?"#"+se:se}pushState(k,se,be,ut){let ft=this.prepareExternalUrl(be+Ce(ut));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.pushState(k,se,ft)}replaceState(k,se,be,ut){let ft=this.prepareExternalUrl(be+Ce(ut));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.replaceState(k,se,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){var se,be;null===(se=(be=this._platformLocation).historyGo)||void 0===se||se.call(be,k)}}return R.\u0275fac=function(k){return new(k||R)(m.LFG(K),m.LFG(he,8))},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac}),R})(),fe=(()=>{class R{constructor(k){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=k;const se=this._locationStrategy.getBaseHref();this._baseHref=pe(Qe(se)),this._locationStrategy.onPopState(be=>{this._subject.emit({url:this.path(!0),pop:!0,state:be.state,type:be.type})})}ngOnDestroy(){var k;null===(k=this._urlChangeSubscription)||void 0===k||k.unsubscribe(),this._urlChangeListeners=[]}path(k=!1){return this.normalize(this._locationStrategy.path(k))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(k,se=""){return this.path()==this.normalize(k+Ce(se))}normalize(k){return R.stripTrailingSlash(function ce(R,ee){return R&&ee.startsWith(R)?ee.substring(R.length):ee}(this._baseHref,Qe(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._locationStrategy.prepareExternalUrl(k)}go(k,se="",be=null){this._locationStrategy.pushState(be,"",k,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Ce(se)),be)}replaceState(k,se="",be=null){this._locationStrategy.replaceState(be,"",k,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Ce(se)),be)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(k=0){var se,be;null===(se=(be=this._locationStrategy).historyGo)||void 0===se||se.call(be,k)}onUrlChange(k){return this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(se=>{this._notifyUrlChangeListeners(se.url,se.state)})),()=>{const se=this._urlChangeListeners.indexOf(k);var be;this._urlChangeListeners.splice(se,1),0===this._urlChangeListeners.length&&(null===(be=this._urlChangeSubscription)||void 0===be||be.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(k="",se){this._urlChangeListeners.forEach(be=>be(k,se))}subscribe(k,se,be){return this._subject.subscribe({next:k,error:se,complete:be})}}return R.normalizeQueryParams=Ce,R.joinWithSlash=oe,R.stripTrailingSlash=pe,R.\u0275fac=function(k){return new(k||R)(m.LFG(ve))},R.\u0275prov=m.Yz7({token:R,factory:function(){return function te(){return new fe((0,m.LFG)(ve))}()},providedIn:"root"}),R})();function Qe(R){return R.replace(/\/index.html$/,"")}function Js(R,ee){ee=encodeURIComponent(ee);for(const k of R.split(";")){const se=k.indexOf("="),[be,ut]=-1==se?[k,""]:[k.slice(0,se),k.slice(se+1)];if(be.trim()===ee)return decodeURIComponent(ut)}return null}let or=(()=>{class R{constructor(k,se,be,ut){this._iterableDiffers=k,this._keyValueDiffers=se,this._ngEl=be,this._renderer=ut,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(k){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof k?k.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(k){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof k?k.split(/\s+/):k,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const k=this._iterableDiffer.diff(this._rawClass);k&&this._applyIterableChanges(k)}else if(this._keyValueDiffer){const k=this._keyValueDiffer.diff(this._rawClass);k&&this._applyKeyValueChanges(k)}}_applyKeyValueChanges(k){k.forEachAddedItem(se=>this._toggleClass(se.key,se.currentValue)),k.forEachChangedItem(se=>this._toggleClass(se.key,se.currentValue)),k.forEachRemovedItem(se=>{se.previousValue&&this._toggleClass(se.key,!1)})}_applyIterableChanges(k){k.forEachAddedItem(se=>{if("string"!=typeof se.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(se.item)}`);this._toggleClass(se.item,!0)}),k.forEachRemovedItem(se=>this._toggleClass(se.item,!1))}_applyClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(se=>this._toggleClass(se,!0)):Object.keys(k).forEach(se=>this._toggleClass(se,!!k[se])))}_removeClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(se=>this._toggleClass(se,!1)):Object.keys(k).forEach(se=>this._toggleClass(se,!1)))}_toggleClass(k,se){(k=k.trim())&&k.split(/\s+/g).forEach(be=>{se?this._renderer.addClass(this._ngEl.nativeElement,be):this._renderer.removeClass(this._ngEl.nativeElement,be)})}}return R.\u0275fac=function(k){return new(k||R)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},R.\u0275dir=m.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),R})();class uo{constructor(ee,k,se,be){this.$implicit=ee,this.ngForOf=k,this.index=se,this.count=be}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yr=(()=>{class R{constructor(k,se,be){this._viewContainer=k,this._template=se,this._differs=be,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const se=this._viewContainer;k.forEachOperation((be,ut,ft)=>{if(null==be.previousIndex)se.createEmbeddedView(this._template,new uo(be.item,this._ngForOf,-1,-1),null===ft?void 0:ft);else if(null==ft)se.remove(null===ut?void 0:ut);else if(null!==ut){const Zt=se.get(ut);se.move(Zt,ft),fs(Zt,be)}});for(let be=0,ut=se.length;be<ut;be++){const Zt=se.get(be).context;Zt.index=be,Zt.count=ut,Zt.ngForOf=this._ngForOf}k.forEachIdentityChange(be=>{fs(se.get(be.currentIndex),be)})}static ngTemplateContextGuard(k,se){return!0}}return R.\u0275fac=function(k){return new(k||R)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},R.\u0275dir=m.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),R})();function fs(R,ee){R.context.$implicit=ee.item}let Un=(()=>{class R{constructor(k,se){this._viewContainer=k,this._context=new Xs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=se}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){br("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){br("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,se){return!0}}return R.\u0275fac=function(k){return new(k||R)(m.Y36(m.s_b),m.Y36(m.Rgc))},R.\u0275dir=m.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),R})();class Xs{constructor(){this.$implicit=null,this.ngIf=null}}function br(R,ee){if(ee&&!ee.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,m.AaK)(ee)}'.`)}class Kr{constructor(ee,k){this._viewContainerRef=ee,this._templateRef=k,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ee){ee&&!this._created?this.create():!ee&&this._created&&this.destroy()}}let Vs=(()=>{class R{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(k){this._ngSwitch=k,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(k){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(k)}_matchCase(k){const se=k==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||se,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),se}_updateDefaultCases(k){if(this._defaultViews&&k!==this._defaultUsed){this._defaultUsed=k;for(let se=0;se<this._defaultViews.length;se++)this._defaultViews[se].enforceState(k)}}}return R.\u0275fac=function(k){return new(k||R)},R.\u0275dir=m.lG2({type:R,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),R})(),Ri=(()=>{class R{constructor(k,se,be){this.ngSwitch=be,be._addCase(),this._view=new Kr(k,se)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return R.\u0275fac=function(k){return new(k||R)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(Vs,9))},R.\u0275dir=m.lG2({type:R,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),R})(),ns=(()=>{class R{constructor(k,se,be){be._addDefault(new Kr(k,se))}}return R.\u0275fac=function(k){return new(k||R)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(Vs,9))},R.\u0275dir=m.lG2({type:R,selectors:[["","ngSwitchDefault",""]],standalone:!0}),R})();class lo{createSubscription(ee,k){return ee.subscribe({next:k,error:se=>{throw se}})}dispose(ee){ee.unsubscribe()}}class zo{createSubscription(ee,k){return ee.then(k,se=>{throw se})}dispose(ee){}}const js=new zo,Ze=new lo;let $e=(()=>{class R{constructor(k){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=k}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(k){return this._obj?k!==this._obj?(this._dispose(),this.transform(k)):this._latestValue:(k&&this._subscribe(k),this._latestValue)}_subscribe(k){this._obj=k,this._strategy=this._selectStrategy(k),this._subscription=this._strategy.createSubscription(k,se=>this._updateLatestValue(k,se))}_selectStrategy(k){if((0,m.QGY)(k))return js;if((0,m.F4k)(k))return Ze;throw function rr(R,ee){return new m.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(k,se){k===this._obj&&(this._latestValue=se,this._ref.markForCheck())}}return R.\u0275fac=function(k){return new(k||R)(m.Y36(m.sBO,16))},R.\u0275pipe=m.Yjl({name:"async",type:R,pure:!1,standalone:!0}),R})(),So=(()=>{class R{}return R.\u0275fac=function(k){return new(k||R)},R.\u0275mod=m.oAB({type:R}),R.\u0275inj=m.cJS({}),R})();const Go="browser";function Aa(R){return R===Go}function ms(R){return"server"===R}let Ii=(()=>{class R{}return R.\u0275prov=(0,m.Yz7)({token:R,providedIn:"root",factory:()=>new Cr((0,m.LFG)(Z),window)}),R})();class Cr{constructor(ee,k){this.document=ee,this.window=k,this.offset=()=>[0,0]}setOffset(ee){this.offset=Array.isArray(ee)?()=>ee:ee}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ee){this.supportsScrolling()&&this.window.scrollTo(ee[0],ee[1])}scrollToAnchor(ee){if(!this.supportsScrolling())return;const k=function $i(R,ee){const k=R.getElementById(ee)||R.getElementsByName(ee)[0];if(k)return k;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const se=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let be=se.currentNode;for(;be;){const ut=be.shadowRoot;if(ut){const ft=ut.getElementById(ee)||ut.querySelector(`[name="${ee}"]`);if(ft)return ft}be=se.nextNode()}}return null}(this.document,ee);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(ee){if(this.supportScrollRestoration()){const k=this.window.history;k&&k.scrollRestoration&&(k.scrollRestoration=ee)}}scrollToElement(ee){const k=ee.getBoundingClientRect(),se=k.left+this.window.pageXOffset,be=k.top+this.window.pageYOffset,ut=this.offset();this.window.scrollTo(se-ut[0],be-ut[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ee=bi(this.window.history)||bi(Object.getPrototypeOf(this.window.history));return!(!ee||!ee.writable&&!ee.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function bi(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class ha{}},4650:($t,Re,H)=>{"use strict";H.d(Re,{$8M:()=>Na,$Z:()=>yg,AFp:()=>mE,ALo:()=>Lw,AaK:()=>K,AsE:()=>jc,BQk:()=>Wh,CHM:()=>ho,CRH:()=>Ww,CZH:()=>qv,CqO:()=>sm,D6c:()=>kb,DdM:()=>Aw,EJc:()=>QI,EiD:()=>ff,EpF:()=>Zy,F$t:()=>um,F4k:()=>Qy,FYo:()=>Pu,FiY:()=>su,G48:()=>yb,Gf:()=>zw,GfV:()=>dh,Gpc:()=>L,Gre:()=>vm,Hsn:()=>Od,Ikx:()=>jd,JOm:()=>Lu,JVY:()=>He,Jf7:()=>du,KtG:()=>to,L6k:()=>tt,LAX:()=>Jt,LFG:()=>_i,LSH:()=>nh,Lbi:()=>WI,Lck:()=>D,MAs:()=>fp,MGl:()=>Yi,MMx:()=>ot,NdJ:()=>vp,O4$:()=>Zt,OlP:()=>vi,Oqu:()=>Cp,PXZ:()=>db,Q6J:()=>pp,QGY:()=>im,QP$:()=>gn,QbO:()=>qI,Qsj:()=>_f,R0b:()=>$u,RDi:()=>Qd,Rgc:()=>Bm,SBq:()=>Ju,Sil:()=>JI,Suo:()=>Gw,TTD:()=>rs,TgZ:()=>gp,Udp:()=>hm,VKq:()=>xw,W1O:()=>Qw,X6Q:()=>mb,XFs:()=>Nt,Xpm:()=>Er,Xts:()=>Ba,Y36:()=>yd,YKP:()=>p,YNc:()=>Gh,Yjl:()=>je,Yz7:()=>Vt,Z0I:()=>Xn,ZZ4:()=>j0,_Bn:()=>a,_UZ:()=>rm,_Vd:()=>xu,_c5:()=>Nb,_uU:()=>mm,aQg:()=>$0,c2e:()=>KI,cJS:()=>Lt,cg1:()=>ul,dDg:()=>ab,dqk:()=>gr,eBb:()=>yt,eFA:()=>xE,ekj:()=>eu,eoX:()=>CE,evT:()=>Tf,f3M:()=>ru,g9A:()=>vE,h0i:()=>l,hGG:()=>Ob,hij:()=>Ud,iGM:()=>Hw,ifc:()=>fn,ip1:()=>gE,jDz:()=>Bt,kL8:()=>Hd,kcU:()=>ur,lG2:()=>Se,lcZ:()=>Fw,lqb:()=>ls,lri:()=>TE,mCW:()=>Ta,n5z:()=>Ar,n_E:()=>$v,oAB:()=>ri,oJD:()=>gf,oxw:()=>ti,pB0:()=>zt,q3G:()=>Os,q4F:()=>Qo,qLn:()=>pt,qOj:()=>Vh,qZA:()=>mp,qzn:()=>X,rFY:()=>Rw,rWj:()=>DE,s9C:()=>wp,sBO:()=>vb,sIi:()=>Ad,s_b:()=>zv,soG:()=>Kv,tb:()=>_E,tp0:()=>Cu,uIk:()=>kc,vHH:()=>pe,vpe:()=>Yl,wAp:()=>Hn,xp6:()=>ag,ynx:()=>yp,z2F:()=>Zv,z3N:()=>M,zSh:()=>pc,zs3:()=>pu});var m=H(7579),x=H(727),S=H(9751),W=H(6451),N=H(3099);function O(n){for(let i in n)if(n[i]===O)return i;throw Error("Could not find renamed property on target object.")}function Z(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function K(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(K).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function V(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const B=O({__forward_ref__:O});function L(n){return n.__forward_ref__=L,n.toString=function(){return K(this())},n}function $(n){return de(n)?n():n}function de(n){return"function"==typeof n&&n.hasOwnProperty(B)&&n.__forward_ref__===L}class pe extends Error{constructor(i,o){super(function Ce(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}(i,o)),this.code=i}}function ve(n){return"string"==typeof n?n:null==n?"":String(n)}function te(n,i){throw new pe(-201,!1)}function Cn(n,i){null==n&&function Dt(n,i,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,n,null,"!=")}function Vt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Lt(n){return{providers:n.providers||[],imports:n.imports||[]}}function hr(n){return fr(n,Lr)||fr(n,Qr)}function Xn(n){return null!==hr(n)}function fr(n,i){return n.hasOwnProperty(i)?n[i]:null}function Bn(n){return n&&(n.hasOwnProperty(Rn)||n.hasOwnProperty(zr))?n[Rn]:null}const Lr=O({\u0275prov:O}),Rn=O({\u0275inj:O}),Qr=O({ngInjectableDef:O}),zr=O({ngInjectorDef:O});var Nt=(()=>((Nt=Nt||{})[Nt.Default=0]="Default",Nt[Nt.Host=1]="Host",Nt[Nt.Self=2]="Self",Nt[Nt.SkipSelf=4]="SkipSelf",Nt[Nt.Optional=8]="Optional",Nt))();let cr;function Wr(n){const i=cr;return cr=n,i}function Cs(n,i,o){const u=hr(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Nt.Optional?null:void 0!==i?i:void te(K(n))}function li(n){return{toString:n}.toString()}var pr=(()=>((pr=pr||{})[pr.OnPush=0]="OnPush",pr[pr.Default=1]="Default",pr))(),fn=(()=>{return(n=fn||(fn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",fn;var n})();const gr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),sn={},qt=[],Dr=O({\u0275cmp:O}),Nn=O({\u0275dir:O}),xi=O({\u0275pipe:O}),Gn=O({\u0275mod:O}),Fr=O({\u0275fac:O}),qr=O({__NG_ELEMENT_ID__:O});let Ur=0;function Er(n){return li(()=>{const o=!0===n.standalone,u={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===pr.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||qt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||fn.Emulated,id:"c"+Ur++,styles:n.styles||qt,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.dependencies,_=n.features;return c.inputs=Oe(n.inputs,u),c.outputs=Oe(n.outputs),_&&_.forEach(C=>C(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(Pr).filter(mr):null,c.pipeDefs=f?()=>("function"==typeof f?f():f).map(Rt).filter(mr):null,c})}function Pr(n){return lt(n)||Je(n)}function mr(n){return null!==n}function ri(n){return li(()=>({type:n.type,bootstrap:n.bootstrap||qt,declarations:n.declarations||qt,imports:n.imports||qt,exports:n.exports||qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Oe(n,i){if(null==n)return sn;const o={};for(const u in n)if(n.hasOwnProperty(u)){let c=n[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),o[c]=u,i&&(i[c]=f)}return o}const Se=Er;function je(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function lt(n){return n[Dr]||null}function Je(n){return n[Nn]||null}function Rt(n){return n[xi]||null}function gn(n){const i=lt(n)||Je(n)||Rt(n);return null!==i&&i.standalone}function xn(n,i){const o=n[Gn]||null;if(!o&&!0===i)throw new Error(`Type ${K(n)} does not have '\u0275mod' property.`);return o}function br(n){return Array.isArray(n)&&"object"==typeof n[1]}function Kr(n){return Array.isArray(n)&&!0===n[1]}function Vs(n){return 0!=(8&n.flags)}function Ri(n){return 2==(2&n.flags)}function ns(n){return 1==(1&n.flags)}function Nr(n){return null!==n.template}function As(n){return 0!=(256&n[2])}function xs(n,i){return n.hasOwnProperty(Fr)?n[Fr]:null}class Xo{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function rs(){return Hs}function Hs(n){return n.type.prototype.ngOnChanges&&(n.setInput=ks),yo}function yo(){const n=Co(this),i=n?.current;if(i){const o=n.previous;if(o===sn)n.previous=i;else for(let u in i)o[u]=i[u];n.current=null,this.ngOnChanges(i)}}function ks(n,i,o,u){const c=Co(n)||function So(n,i){return n[zs]=i}(n,{previous:sn,current:null}),f=c.current||(c.current={}),_=c.previous,C=this.declaredInputs[o],P=_[C];f[C]=new Xo(P&&P.currentValue,i,_===sn),n[u]=i}rs.ngInherit=!0;const zs="__ngSimpleChanges__";function Co(n){return n[zs]||null}function Yr(n){for(;Array.isArray(n);)n=n[0];return n}function bi(n,i){return Yr(i[n])}function $i(n,i){return Yr(i[n.index])}function ha(n,i){return n.data[i]}function co(n,i){return n[i]}function Kn(n,i){const o=i[n];return br(o)?o:o[0]}function ys(n){return 64==(64&n[2])}function Ti(n,i){return null==i?null:n[i]}function Jr(n){n[18]=0}function Mi(n,i){n[5]+=i;let o=n,u=n[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const ln={lFrame:Po(null),bindingsEnabled:!0};function Ro(){return ln.bindingsEnabled}function Tt(){return ln.lFrame.lView}function Ln(){return ln.lFrame.tView}function ho(n){return ln.lFrame.contextLView=n,n[8]}function to(n){return ln.lFrame.contextLView=null,n}function Xr(){let n=ta();for(;null!==n&&64===n.type;)n=n.parent;return n}function ta(){return ln.lFrame.currentTNode}function _s(n,i){const o=ln.lFrame;o.currentTNode=n,o.isParent=i}function q(){return ln.lFrame.isParent}function z(){ln.lFrame.isParent=!1}function gt(){const n=ln.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function bn(){return ln.lFrame.bindingIndex++}function On(n){const i=ln.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function ei(n,i){const o=ln.lFrame;o.bindingIndex=o.bindingRootIndex=n,is(i)}function is(n){ln.lFrame.currentDirectiveIndex=n}function no(){return ln.lFrame.currentQueryIndex}function Or(n){ln.lFrame.currentQueryIndex=n}function di(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function oi(n,i,o){if(o&Nt.SkipSelf){let c=i,f=n;for(;!(c=c.parent,null!==c||o&Nt.Host||(c=di(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;i=c,n=f}const u=ln.lFrame=ss();return u.currentTNode=i,u.lView=n,!0}function ws(n){const i=ss(),o=n[1];ln.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function ss(){const n=ln.lFrame,i=null===n?null:n.child;return null===i?Po(n):i}function Po(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Rs(){const n=ln.lFrame;return ln.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const R=Rs;function ee(){const n=Rs();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function be(){return ln.lFrame.selectedIndex}function ut(n){ln.lFrame.selectedIndex=n}function ft(){const n=ln.lFrame;return ha(n.tView,n.selectedIndex)}function Zt(){ln.lFrame.currentNamespace="svg"}function ur(){!function Y(){ln.lFrame.currentNamespace=null}()}function F(n,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const f=n.data[o].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:P,ngAfterViewChecked:Q,ngOnDestroy:ue}=f;_&&(n.contentHooks||(n.contentHooks=[])).push(-o,_),C&&((n.contentHooks||(n.contentHooks=[])).push(o,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,C)),P&&(n.viewHooks||(n.viewHooks=[])).push(-o,P),Q&&((n.viewHooks||(n.viewHooks=[])).push(o,Q),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,Q)),null!=ue&&(n.destroyHooks||(n.destroyHooks=[])).push(o,ue)}}function ne(n,i,o){Fe(n,i,3,o)}function ye(n,i,o,u){(3&n[2])===o&&Fe(n,i,o,u)}function ke(n,i){let o=n[2];(3&o)===i&&(o&=2047,o+=1,n[2]=o)}function Fe(n,i,o,u){const f=u??-1,_=i.length-1;let C=0;for(let P=void 0!==u?65535&n[18]:0;P<_;P++)if("number"==typeof i[P+1]){if(C=i[P],null!=u&&C>=u)break}else i[P]<0&&(n[18]+=65536),(C<f||-1==f)&&(rt(n,o,i,P),n[18]=(4294901760&n[18])+P+2),P++}function rt(n,i,o,u){const c=o[u]<0,f=o[u+1],C=n[c?-o[u]:o[u]];if(c){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class Ot{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function qi(n,i,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const f=o[u++],_=o[u++],C=o[u++];n.setAttribute(i,_,C,f)}else{const f=c,_=o[++u];na(f)?n.setProperty(i,f,_):n.setAttribute(i,f,_),u++}}return u}function hi(n){return 3===n||4===n||6===n}function na(n){return 64===n.charCodeAt(0)}function Ws(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||Ki(n,o,c,null,-1===o||2===o?i[++u]:null)}}return n}function Ki(n,i,o,u,c){let f=0,_=n.length;if(-1===i)_=-1;else for(;f<n.length;){const C=n[f++];if("number"==typeof C){if(C===i){_=-1;break}if(C>i){_=f-1;break}}}for(;f<n.length;){const C=n[f];if("number"==typeof C)break;if(C===o){if(null===u)return void(null!==c&&(n[f+1]=c));if(u===n[f+1])return void(n[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==_&&(n.splice(_,0,i),f=_+1),n.splice(f++,0,o),null!==u&&n.splice(f++,0,u),null!==c&&n.splice(f++,0,c)}function Ms(n){return-1!==n}function No(n){return 32767&n}function Pi(n,i){let o=function Hi(n){return n>>16}(n),u=i;for(;o>0;)u=u[15],o--;return u}let Ni=!0;function qs(n){const i=Ni;return Ni=n,i}let In=0;const on={};function ai(n,i){const o=Xi(n,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(n.injectorIndex=i.length,Ps(u.data,n),Ps(i,null),Ps(u.blueprint,null));const c=Zs(n,i),f=n.injectorIndex;if(Ms(c)){const _=No(c),C=Pi(c,i),P=C[1].data;for(let Q=0;Q<8;Q++)i[f+Q]=C[_+Q]|P[_+Q]}return i[f+8]=c,f}function Ps(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Xi(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Zs(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){if(u=wn(c),null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function $r(n,i,o){!function lr(n,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(qr)&&(u=o[qr]),null==u&&(u=o[qr]=In++);const c=255&u;i.data[n+(c>>5)]|=1<<c}(n,i,o)}function Ea(n,i,o){if(o&Nt.Optional||void 0!==n)return n;te()}function Is(n,i,o,u){if(o&Nt.Optional&&void 0===u&&(u=null),0==(o&(Nt.Self|Nt.Host))){const c=n[9],f=Wr(void 0);try{return c?c.get(i,u,o&Nt.Optional):Cs(i,u,o&Nt.Optional)}finally{Wr(f)}}return Ea(u,0,o)}function qo(n,i,o,u=Nt.Default,c){if(null!==n){if(1024&i[2]){const _=function an(n,i,o,u,c){let f=n,_=i;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const C=Zi(f,_,o,u|Nt.Self,on);if(C!==on)return C;let P=f.parent;if(!P){const Q=_[21];if(Q){const ue=Q.get(o,on,u);if(ue!==on)return ue}P=wn(_),_=_[15]}f=P}return c}(n,i,o,u,on);if(_!==on)return _}const f=Zi(n,i,o,u,on);if(f!==on)return f}return Is(i,o,u,c)}function Zi(n,i,o,u,c){const f=function ro(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(qr)?n[qr]:void 0;return"number"==typeof i?i>=0?255&i:os:i}(o);if("function"==typeof f){if(!oi(i,n,u))return u&Nt.Host?Ea(c,0,u):Is(i,o,u,c);try{const _=f(u);if(null!=_||u&Nt.Optional)return _;te()}finally{R()}}else if("number"==typeof f){let _=null,C=Xi(n,i),P=-1,Q=u&Nt.Host?i[16][6]:null;for((-1===C||u&Nt.SkipSelf)&&(P=-1===C?Zs(n,i):i[C+8],-1!==P&&Pa(u,!1)?(_=i[1],C=No(P),i=Pi(P,i)):C=-1);-1!==C;){const ue=i[1];if(za(f,C,ue.data)){const we=Ma(C,i,o,_,u,Q);if(we!==on)return we}P=i[C+8],-1!==P&&Pa(u,i[1].data[C+8]===Q)&&za(f,C,i)?(_=ue,C=No(P),i=Pi(P,i)):C=-1}}return c}function Ma(n,i,o,u,c,f){const _=i[1],C=_.data[n+8],ue=$n(C,_,o,null==u?Ri(C)&&Ni:u!=_&&0!=(3&C.type),c&Nt.Host&&f===C);return null!==ue?pa(i,_,ue,C):on}function $n(n,i,o,u,c){const f=n.providerIndexes,_=i.data,C=1048575&f,P=n.directiveStart,ue=f>>20,ze=c?C+ue:n.directiveEnd;for(let ct=u?C:C+ue;ct<ze;ct++){const Ct=_[ct];if(ct<P&&o===Ct||ct>=P&&Ct.type===o)return ct}if(c){const ct=_[P];if(ct&&Nr(ct)&&ct.type===o)return P}return null}function pa(n,i,o,u){let c=n[o];const f=i.data;if(function nn(n){return n instanceof Ot}(c)){const _=c;_.resolving&&function ae(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new pe(-200,`Circular dependency in DI detected for ${n}${o}`)}(function he(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ve(n)}(f[o]));const C=qs(_.canSeeViewProviders);_.resolving=!0;const P=_.injectImpl?Wr(_.injectImpl):null;oi(n,u,Nt.Default);try{c=n[o]=_.factory(void 0,f,n,u),i.firstCreatePass&&o>=u.directiveStart&&function E(n,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=i.type.prototype;if(u){const _=Hs(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,_)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,c),f&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,f))}(o,f[o],i)}finally{null!==P&&Wr(P),qs(C),_.resolving=!1,R()}}return c}function za(n,i,o){return!!(o[i+(n>>5)]&1<<n)}function Pa(n,i){return!(n&Nt.Self||n&Nt.Host&&i)}class xt{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return qo(this._tNode,this._lView,i,u,o)}}function os(){return new xt(Xr(),Tt())}function Ar(n){return li(()=>{const i=n.prototype.constructor,o=i[Fr]||wu(i),u=Object.prototype;let c=Object.getPrototypeOf(n.prototype).constructor;for(;c&&c!==u;){const f=c[Fr]||wu(c);if(f&&f!==o)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function wu(n){return de(n)?()=>{const i=wu($(n));return i&&i()}:xs(n)}function wn(n){const i=n[1],o=i.type;return 2===o?i.declTNode:1===o?n[6]:null}function Na(n){return function Ra(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const f=o[c];if(hi(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(f===i)return o[c+1];c+=2}}}return null}(Xr(),n)}const st="__parameters__";function ra(n,i,o){return li(()=>{const u=function Oo(n){return function(...o){if(n){const u=n(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...f){if(this instanceof c)return u.apply(this,f),this;const _=new c(...f);return C.annotation=_,C;function C(P,Q,ue){const we=P.hasOwnProperty(st)?P[st]:Object.defineProperty(P,st,{value:[]})[st];for(;we.length<=ue;)we.push(null);return(we[ue]=we[ue]||[]).push(_),P}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}class vi{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Vt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ft(n,i){void 0===i&&(i=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(i===n&&(i=n.slice(0,o)),Ft(u,i)):i!==n&&i.push(u)}return i}function Io(n,i){n.forEach(o=>Array.isArray(o)?Io(o,i):i(o))}function Ga(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function Ko(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function ka(n,i){const o=[];for(let u=0;u<n;u++)o.push(i);return o}function re(n,i,o){let u=Ae(n,i);return u>=0?n[1|u]=o:(u=~u,function b(n,i,o,u){let c=n.length;if(c==i)n.push(o,u);else if(1===c)n.push(u,n[0]),n[0]=o;else{for(c--,n.push(n[c-1],n[c]);c>i;)n[c]=n[c-2],c--;n[i]=o,n[i+1]=u}}(n,u,i,o)),u}function Ee(n,i){const o=Ae(n,i);if(o>=0)return n[1|o]}function Ae(n,i){return function Ut(n,i,o){let u=0,c=n.length>>o;for(;c!==u;){const f=u+(c-u>>1),_=n[f<<o];if(i===_)return f<<o;_>i?c=f:u=f+1}return~(c<<o)}(n,i,1)}const fo={},bs="__NG_DI_FLAG__",so="ngTempTokenPath",Tu=/\n/gm,Du="__source";let us;function bo(n){const i=us;return us=n,i}function pl(n,i=Nt.Default){if(void 0===us)throw new pe(-203,!1);return null===us?Cs(n,void 0,i):us.get(n,i&Nt.Optional?null:void 0,i)}function _i(n,i=Nt.Default){return(function Gr(){return cr}()||pl)($(n),i)}function ru(n,i=Nt.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),_i(n,i)}function ec(n){const i=[];for(let o=0;o<n.length;o++){const u=$(n[o]);if(Array.isArray(u)){if(0===u.length)throw new pe(900,!1);let c,f=Nt.Default;for(let _=0;_<u.length;_++){const C=u[_],P=tc(C);"number"==typeof P?-1===P?c=C.token:f|=P:c=C}i.push(_i(c,f))}else i.push(_i(u))}return i}function iu(n,i){return n[bs]=i,n.prototype[bs]=i,n}function tc(n){return n[bs]}const su=iu(ra("Optional"),8),Cu=iu(ra("SkipSelf"),4);let Su,sc,Fa;function Qd(n){Su=n}function Oi(n){var i;return(null===(i=function ba(){if(void 0===sc&&(sc=null,gr.trustedTypes))try{sc=gr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sc}())||void 0===i?void 0:i.createHTML(n))||n}function ia(n){var i;return(null===(i=function Ua(){if(void 0===Fa&&(Fa=null,gr.trustedTypes))try{Fa=gr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Fa}())||void 0===i?void 0:i.createHTML(n))||n}class Zo{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ya extends Zo{getTypeName(){return"HTML"}}class Zu extends Zo{getTypeName(){return"Style"}}class Ka extends Zo{getTypeName(){return"Script"}}class Yd extends Zo{getTypeName(){return"URL"}}class T extends Zo{getTypeName(){return"ResourceURL"}}function M(n){return n instanceof Zo?n.changingThisBreaksApplicationSecurity:n}function X(n,i){const o=function _e(n){return n instanceof Zo&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function He(n){return new ya(n)}function tt(n){return new Zu(n)}function yt(n){return new Ka(n)}function Jt(n){return new Yd(n)}function zt(n){return new T(n)}class Zn{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Oi(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class er{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Oi(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Oi(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const _=o.item(c).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&i.removeAttribute(_)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Ns=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Ta(n){return(n=String(n)).match(Ns)?n:"unsafe:"+n}function ki(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function oa(...n){const i={};for(const o of n)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const kr=ki("area,br,col,hr,img,wbr"),oo=ki("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_l=ki("rp,rt"),wl=oa(kr,oa(oo,ki("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),oa(_l,ki("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),oa(_l,oo)),Mr=ki("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),uc=oa(Mr,ki("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ki("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xd=ki("script,style,template");class df{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!wl.hasOwnProperty(o))return this.sanitizedSomething=!0,!Xd.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const f=u.item(c),_=f.name,C=_.toLowerCase();if(!uc.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let P=f.value;Mr[C]&&(P=Ta(P)),this.buf.push(" ",_,'="',th(P),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();wl.hasOwnProperty(o)&&!kr.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(th(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const eh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hf=/([^\#-~ |!])/g;function th(n){return n.replace(/&/g,"&amp;").replace(eh,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(hf,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Il;function ff(n,i){let o=null;try{Il=Il||function vn(n){const i=new er(n);return function sa(){try{return!!(new window.DOMParser).parseFromString(Oi(""),"text/html")}catch{return!1}}()?new Zn(i):i}(n);let u=i?String(i):"";o=Il.getInertBodyElement(u);let c=5,f=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=f,f=o.innerHTML,o=Il.getInertBodyElement(u)}while(u!==f);return Oi((new df).sanitizeChildren(pf(o)||o))}finally{if(o){const u=pf(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function pf(n){return"content"in n&&function Qu(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Os=(()=>((Os=Os||{})[Os.NONE=0]="NONE",Os[Os.HTML=1]="HTML",Os[Os.STYLE=2]="STYLE",Os[Os.SCRIPT=3]="SCRIPT",Os[Os.URL=4]="URL",Os[Os.RESOURCE_URL=5]="RESOURCE_URL",Os))();function gf(n){const i=bl();return i?ia(i.sanitize(Os.HTML,n)||""):X(n,"HTML")?ia(M(n)):ff(function Ds(){return void 0!==Su?Su:typeof document<"u"?document:void 0}(),ve(n))}function nh(n){const i=bl();return i?i.sanitize(Os.URL,n)||"":X(n,"URL")?M(n):Ta(ve(n))}function bl(){const n=Tt();return n&&n[12]}const Ba=new vi("ENVIRONMENT_INITIALIZER"),ih=new vi("INJECTOR",-1),Yu=new vi("INJECTOR_DEF_TYPES");class nd{get(i,o=fo){if(o===fo){const u=new Error(`NullInjectorError: No provider for ${K(i)}!`);throw u.name="NullInjectorError",u}return o}}function dc(...n){return{\u0275providers:hc(0,n)}}function hc(n,...i){const o=[],u=new Set;let c;return Io(i,f=>{const _=f;Va(_,o,[],u)&&(c||(c=[]),c.push(_))}),void 0!==c&&rd(c,o),o}function rd(n,i){for(let o=0;o<n.length;o++){const{providers:c}=n[o];Io(c,f=>{i.push(f)})}}function Va(n,i,o,u){if(!(n=$(n)))return!1;let c=null,f=Bn(n);const _=!f&&lt(n);if(f||_){if(_&&!_.standalone)return!1;c=n}else{const P=n.ngModule;if(f=Bn(P),!f)return!1;c=P}const C=u.has(c);if(_){if(C)return!1;if(u.add(c),_.dependencies){const P="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const Q of P)Va(Q,i,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!C){let Q;u.add(c);try{Io(f.imports,ue=>{Va(ue,i,o,u)&&(Q||(Q=[]),Q.push(ue))})}finally{}void 0!==Q&&rd(Q,i)}if(!C){const Q=xs(c)||(()=>new c);i.push({provide:c,useFactory:Q,deps:qt},{provide:Yu,useValue:c,multi:!0},{provide:Ba,useValue:()=>_i(c),multi:!0})}const P=f.providers;null==P||C||Io(P,ue=>{i.push(ue)})}}return c!==n&&void 0!==n.providers}const sh=O({provide:String,useValue:O});function Tl(n){return null!==n&&"object"==typeof n&&sh in n}function lu(n){return"function"==typeof n}const pc=new vi("Set Injector scope."),gc={},Gp={};let ja;function id(){return void 0===ja&&(ja=new nd),ja}class ls{}class ah extends ls{constructor(i,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mc(i,_=>this.processProvider(_)),this.records.set(ih,Qa(void 0,this)),c.has("environment")&&this.records.set(ls,Qa(void 0,this));const f=this.records.get(pc);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Yu.multi,qt,Nt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=bo(this),u=Wr(void 0);try{return i()}finally{bo(o),Wr(u)}}get(i,o=fo,u=Nt.Default){this.assertNotDestroyed();const c=bo(this),f=Wr(void 0);try{if(!(u&Nt.SkipSelf)){let C=this.records.get(i);if(void 0===C){const P=function dr(n){return"function"==typeof n||"object"==typeof n&&n instanceof vi}(i)&&hr(i);C=P&&this.injectableDefInScope(P)?Qa(Au(i),gc):null,this.records.set(i,C)}if(null!=C)return this.hydrate(i,C)}return(u&Nt.Self?id():this.parent).get(i,o=u&Nt.Optional&&o===fo?null:o)}catch(_){if("NullInjectorError"===_.name){if((_[so]=_[so]||[]).unshift(K(i)),c)throw _;return function nc(n,i,o,u){const c=n[so];throw i[Du]&&c.unshift(i[Du]),n.message=function gl(n,i,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let c=K(i);if(Array.isArray(i))c=i.map(K).join(" -> ");else if("object"==typeof i){let f=[];for(let _ in i)if(i.hasOwnProperty(_)){let C=i[_];f.push(_+":"+("string"==typeof C?JSON.stringify(C):K(C)))}c=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${n.replace(Tu,"\n  ")}`}("\n"+n.message,c,o,u),n.ngTokenPath=c,n[so]=null,n}(_,i,"R3InjectorError",this.source)}throw _}finally{Wr(f),bo(c)}}resolveInjectorInitializers(){const i=bo(this),o=Wr(void 0);try{const u=this.get(Ba.multi,qt,Nt.Self);for(const c of u)c()}finally{bo(i),Wr(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(K(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(i){let o=lu(i=$(i))?i:$(i&&i.provide);const u=function Za(n){return Tl(n)?Qa(void 0,n.useValue):Qa(uh(n),gc)}(i);if(lu(i)||!0!==i.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=Qa(void 0,gc,!0),c.factory=()=>ec(c.multi),this.records.set(o,c)),o=i,c.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===gc&&(o.value=Gp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function lh(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=$(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Au(n){const i=hr(n),o=null!==i?i.factory:xs(n);if(null!==o)return o;if(n instanceof vi)throw new pe(204,!1);if(n instanceof Function)return function mf(n){const i=n.length;if(i>0)throw ka(i,"?"),new pe(204,!1);const o=function mi(n){const i=n&&(n[Lr]||n[Qr]);if(i){const o=function Bi(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new pe(204,!1)}function uh(n,i,o){let u;if(lu(n)){const c=$(n);return xs(c)||Au(c)}if(Tl(n))u=()=>$(n.useValue);else if(function oh(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...ec(n.deps||[]));else if(function uu(n){return!(!n||!n.useExisting)}(n))u=()=>_i($(n.useExisting));else{const c=$(n&&(n.useClass||n.provide));if(!function yf(n){return!!n.deps}(n))return xs(c)||Au(c);u=()=>new c(...ec(n.deps))}return u}function Qa(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function vf(n){return!!n.\u0275providers}function mc(n,i){for(const o of n)Array.isArray(o)?mc(o,i):vf(o)?mc(o.\u0275providers,i):i(o)}class ch{}class qp{resolveComponentFactory(i){throw function aa(n){const i=Error(`No component factory found for ${K(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let xu=(()=>{class n{}return n.NULL=new qp,n})();function Ru(){return Da(Xr(),Tt())}function Da(n,i){return new Ju($i(n,i))}let Ju=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Ru,n})();function Xu(n){return n instanceof Ju?n.nativeElement:n}class Pu{}let _f=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function wf(){const n=Tt(),o=Kn(Xr().index,n);return(br(o)?o:n)[11]}(),n})(),yc=(()=>{class n{}return n.\u0275prov=Vt({token:n,providedIn:"root",factory:()=>null}),n})();class dh{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Qo=new dh("14.2.5"),Ui={};function et(n){return n.ngOriginalError}class pt{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&et(i);for(;o&&et(o);)o=et(o);return o||null}}const Cl=new Map;let Sl=0;const If="__ngContext__";function ua(n,i){br(i)?(n[If]=i[20],function Al(n){Cl.set(n[20],n)}(i)):n[If]=i}function du(n){return n.ownerDocument.defaultView}function Tf(n){return n.ownerDocument}function ku(n){return n instanceof Function?n():n}var Lu=(()=>((Lu=Lu||{})[Lu.Important=1]="Important",Lu[Lu.DashCase=2]="DashCase",Lu))();function yh(n,i){return undefined(n,i)}function vh(n){const i=n[3];return Kr(i)?i[3]:i}function Fu(n){return Jp(n[13])}function Rl(n){return Jp(n[4])}function Jp(n){for(;null!==n&&!Kr(n);)n=n[4];return n}function Ec(n,i,o,u,c){if(null!=u){let f,_=!1;Kr(u)?f=u:br(u)&&(_=!0,u=u[0]);const C=Yr(u);0===n&&null!==o?null==c?Ml(i,o,C):fu(i,o,C,c||null,!0):1===n&&null!==o?fu(i,o,C,c||null,!0):2===n?function ng(n,i,o){const u=Rf(n,i);u&&function ty(n,i,o,u){n.removeChild(i,o,u)}(n,u,i,o)}(i,C,_):3===n&&i.destroyNode(C),null!=f&&function o_(n,i,o,u,c){const f=o[7];f!==Yr(o)&&Ec(i,n,u,f,c);for(let C=10;C<o.length;C++){const P=o[C];Dc(P[1],P,n,i,u,f)}}(i,n,f,o,c)}}function Cf(n,i,o){return n.createElement(i,o)}function Af(n,i){const o=n[9],u=o.indexOf(i),c=i[3];512&i[2]&&(i[2]&=-513,Mi(c,-1)),o.splice(u,1)}function wh(n,i){if(n.length<=10)return;const o=10+i,u=n[o];if(u){const c=u[17];null!==c&&c!==n&&Af(c,u),i>0&&(n[o-1][4]=u[4]);const f=Ko(n,10+i);!function Sf(n,i){Dc(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const _=f[19];null!==_&&_.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function eg(n,i){if(!(128&i[2])){const o=i[11];o.destroyNode&&Dc(n,i,o,3,null,null),function Tc(n){let i=n[13];if(!i)return xf(n[1],n);for(;i;){let o=null;if(br(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==n;)br(i)&&xf(i[1],i),i=i[3];null===i&&(i=n),br(i)&&xf(i[1],i),o=i&&i[4]}i=o}}(i)}}function xf(n,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function Xm(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Ot)){const f=o[u+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const C=c[f[_]],P=f[_+1];try{P.call(C)}finally{}}else try{f.call(c)}finally{}}}}(n,i),function i_(n,i){const o=n.cleanup,u=i[7];let c=-1;if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const _=o[f+1],C="function"==typeof _?_(i):Yr(i[_]),P=u[c=o[f+2]],Q=o[f+3];"boolean"==typeof Q?C.removeEventListener(o[f],P,Q):Q>=0?u[c=Q]():u[c=-Q].unsubscribe(),f+=2}else{const _=u[c=o[f+1]];o[f].call(_)}if(null!==u){for(let f=c+1;f<u.length;f++)(0,u[f])();i[7]=null}}(n,i),1===i[1].type&&i[11].destroy();const o=i[17];if(null!==o&&Kr(i[3])){o!==i[3]&&Af(o,i);const u=i[19];null!==u&&u.detachView(n)}!function dd(n){Cl.delete(n[20])}(i)}}function tg(n,i,o){return function Eh(n,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=n.data[u.directiveStart].encapsulation;if(c===fn.None||c===fn.Emulated)return null}return $i(u,o)}(n,i.parent,o)}function fu(n,i,o,u,c){n.insertBefore(i,o,u,c)}function Ml(n,i,o){n.appendChild(i,o)}function ey(n,i,o,u,c){null!==u?fu(n,i,o,u,c):Ml(n,i,o)}function Rf(n,i){return n.parentNode(i)}function fd(n,i,o){return nl(n,i,o)}let nl=function Pl(n,i,o){return 40&n.type?$i(n,o):null};function Ih(n,i,o,u){const c=tg(n,u,i),f=i[11],C=fd(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let P=0;P<o.length;P++)ey(f,c,o[P],C,!1);else ey(f,c,o,C,!1)}function Pf(n,i){if(null!==i){const o=i.type;if(3&o)return $i(i,n);if(4&o)return bh(-1,n[i.index]);if(8&o){const u=i.child;if(null!==u)return Pf(n,u);{const c=n[i.index];return Kr(c)?bh(-1,c):Yr(c)}}if(32&o)return yh(i,n)()||Yr(n[i.index]);{const u=Nf(n,i);return null!==u?Array.isArray(u)?u[0]:Pf(vh(n[16]),u):Pf(n,i.next)}}return null}function Nf(n,i){return null!==i?n[16][6].projection[i.projection]:null}function bh(n,i){const o=10+n+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return Pf(u,c)}return i[7]}function Th(n,i,o,u,c,f,_){for(;null!=o;){const C=u[o.index],P=o.type;if(_&&0===i&&(C&&ua(Yr(C),u),o.flags|=4),64!=(64&o.flags))if(8&P)Th(n,i,o.child,u,c,f,!1),Ec(i,n,c,C,f);else if(32&P){const Q=yh(o,u);let ue;for(;ue=Q();)Ec(i,n,c,ue,f);Ec(i,n,c,C,f)}else 16&P?Dh(n,i,u,o,c,f):Ec(i,n,c,C,f);o=_?o.projectionNext:o.next}}function Dc(n,i,o,u,c,f){Th(o,u,n.firstChild,i,c,f,!1)}function Dh(n,i,o,u,c,f){const _=o[16],P=_[6].projection[u.projection];if(Array.isArray(P))for(let Q=0;Q<P.length;Q++)Ec(i,n,c,P[Q],f);else Th(n,i,P,_[3],c,f,!0)}function Ch(n,i,o){n.setAttribute(i,"style",o)}function ig(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function sg(n,i,o){let u=n.length;for(;;){const c=n.indexOf(i,o);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){const f=i.length;if(c+f===u||n.charCodeAt(c+f)<=32)return c}o=c+1}}const Sh="ng-template";function Ah(n,i,o){let u=0;for(;u<n.length;){let c=n[u++];if(o&&"class"===c){if(c=n[u],-1!==sg(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<n.length&&"string"==typeof(c=n[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function og(n){return 4===n.type&&n.value!==Sh}function iy(n,i,o){return i===(4!==n.type||o?n.value:Sh)}function la(n,i,o){let u=4;const c=n.attrs||[],f=function Nl(n){for(let i=0;i<n.length;i++)if(hi(n[i]))return i;return n.length}(c);let _=!1;for(let C=0;C<i.length;C++){const P=i[C];if("number"!=typeof P){if(!_)if(4&u){if(u=2|1&u,""!==P&&!iy(n,P,o)||""===P&&1===i.length){if(Ya(u))return!1;_=!0}}else{const Q=8&u?P:i[++C];if(8&u&&null!==n.attrs){if(!Ah(n.attrs,Q,o)){if(Ya(u))return!1;_=!0}continue}const we=kf(8&u?"class":P,c,og(n),o);if(-1===we){if(Ya(u))return!1;_=!0;continue}if(""!==Q){let ze;ze=we>f?"":c[we+1].toLowerCase();const ct=8&u?ze:null;if(ct&&-1!==sg(ct,Q,0)||2&u&&Q!==ze){if(Ya(u))return!1;_=!0}}}}else{if(!_&&!Ya(u)&&!Ya(P))return!1;if(_&&Ya(P))continue;_=!1,u=P|1&u}}return Ya(u)||_}function Ya(n){return 0==(1&n)}function kf(n,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let f=!1;for(;c<i.length;){const _=i[c];if(_===n)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let C=i[++c];for(;"string"==typeof C;)C=i[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function pd(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,n)}function xh(n,i,o=!1){for(let u=0;u<i.length;u++)if(la(n,i[u],o))return!0;return!1}function oy(n,i){e:for(let o=0;o<i.length;o++){const u=i[o];if(n.length===u.length){for(let c=0;c<n.length;c++)if(n[c]!==u[c])continue e;return!0}}return!1}function Ol(n,i){return n?":not("+i.trim()+")":i}function a_(n){let i=n[0],o=1,u=2,c="",f=!1;for(;o<n.length;){let _=n[o];if("string"==typeof _)if(2&u){const C=n[++o];c+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!Ya(_)&&(i+=Ol(f,c),c=""),u=_,f=f||!Ya(u);o++}return""!==c&&(i+=Ol(f,c)),i}const Qn={};function ag(n){uy(Ln(),Tt(),be()+n,!1)}function uy(n,i,o,u){if(!u)if(3==(3&i[2])){const f=n.preOrderCheckHooks;null!==f&&ne(i,f,o)}else{const f=n.preOrderHooks;null!==f&&ye(i,f,0,o)}ut(o)}function cg(n,i=null,o=null,u){const c=kl(n,i,o,u);return c.resolveInjectorInitializers(),c}function kl(n,i=null,o=null,u,c=new Set){const f=[o||qt,dc(n)];return u=u||("object"==typeof n?void 0:K(n)),new ah(f,i||id(),u||null,c)}let pu=(()=>{class n{static create(o,u){if(Array.isArray(o))return cg({name:""},u,o,"");{var c;const f=null!==(c=o.name)&&void 0!==c?c:"";return cg({name:f},o.parent,o.providers,f)}}}return n.THROW_IF_NOT_FOUND=fo,n.NULL=new nd,n.\u0275prov=Vt({token:n,providedIn:"any",factory:()=>_i(ih)}),n.__NG_ELEMENT_ID__=-1,n})();function yd(n,i=Nt.Default){const o=Tt();return null===o?_i(n,i):qo(Xr(),o,$(n),i)}function yg(){throw new Error("invalid")}function rl(n,i){return n<<17|i<<2}function ca(n){return n>>17&32767}function zf(n){return 2|n}function Uu(n){return(131068&n)>>2}function Gf(n,i){return-131069&n|i<<2}function Ph(n){return 1|n}function Sg(n,i){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],f=o[u+1];if(-1!==f){const _=n.data[f];Or(c),_.contentQueries(2,i[f],f)}}}function Qf(n,i,o,u,c,f,_,C,P,Q,ue){const we=i.blueprint.slice();return we[0]=c,we[2]=76|u,(null!==ue||n&&1024&n[2])&&(we[2]|=1024),Jr(we),we[3]=we[15]=n,we[8]=o,we[10]=_||n&&n[10],we[11]=C||n&&n[11],we[12]=P||n&&n[12]||null,we[9]=Q||n&&n[9]||null,we[6]=f,we[20]=function tl(){return Sl++}(),we[21]=ue,we[16]=2==i.type?n[16]:we,we}function Ul(n,i,o,u,c){let f=n.data[i];if(null===f)f=function xg(n,i,o,u,c){const f=ta(),_=q(),P=n.data[i]=function Ng(n,i,o,u,c,f){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,o,i,u,c);return null===n.firstChild&&(n.firstChild=P),null!==f&&(_?null==f.child&&null!==P.parent&&(f.child=P):null===f.next&&(f.next=P)),P}(n,i,o,u,c),function yi(){return ln.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=o,f.value=u,f.attrs=c;const _=function Mo(){const n=ln.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return _s(f,!0),f}function Bl(n,i,o,u){if(0===o)return-1;const c=i.length;for(let f=0;f<o;f++)i.push(u),n.blueprint.push(u),n.data.push(null);return c}function Ed(n,i,o){ws(i);try{const u=n.viewQuery;null!==u&&Fh(1,u,o);const c=n.template;null!==c&&Rg(n,i,c,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Sg(n,i),n.staticViewQueries&&Fh(2,n.viewQuery,o);const f=n.components;null!==f&&function Ag(n,i){for(let o=0;o<i.length;o++)ky(n,i[o])}(i,f)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{i[2]&=-5,ee()}}function Id(n,i,o,u){const c=i[2];if(128!=(128&c)){ws(i);try{Jr(i),function Pt(n){return ln.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Rg(n,i,o,2,u);const _=3==(3&c);if(_){const Q=n.preOrderCheckHooks;null!==Q&&ne(i,Q,null)}else{const Q=n.preOrderHooks;null!==Q&&ye(i,Q,0,null),ke(i,0)}if(function Ny(n){for(let i=Fu(n);null!==i;i=Rl(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],f=c[3];0==(512&c[2])&&Mi(f,1),c[2]|=512}}}(i),function E_(n){for(let i=Fu(n);null!==i;i=Rl(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];ys(u)&&Id(c,u,c.template,u[8])}}(i),null!==n.contentQueries&&Sg(n,i),_){const Q=n.contentCheckHooks;null!==Q&&ne(i,Q)}else{const Q=n.contentHooks;null!==Q&&ye(i,Q,1),ke(i,1)}!function Fl(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)ut(~c);else{const f=c,_=o[++u],C=o[++u];ei(_,f),C(2,i[f])}}}finally{ut(-1)}}(n,i);const C=n.components;null!==C&&function v_(n,i){for(let o=0;o<i.length;o++)Oy(n,i[o])}(i,C);const P=n.viewQuery;if(null!==P&&Fh(2,P,u),_){const Q=n.viewCheckHooks;null!==Q&&ne(i,Q)}else{const Q=n.viewHooks;null!==Q&&ye(i,Q,2),ke(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,Mi(i[3],-1))}finally{ee()}}}function Rg(n,i,o,u,c){const f=be(),_=2&u;try{ut(-1),_&&i.length>22&&uy(n,i,22,!1),o(u,c)}finally{ut(f)}}function Mc(n,i,o){if(Vs(i)){const c=i.directiveEnd;for(let f=i.directiveStart;f<c;f++){const _=n.data[f];_.contentQueries&&_.contentQueries(1,o[f],f)}}}function Lh(n,i,o){!Ro()||(function bd(n,i,o,u){const c=o.directiveStart,f=o.directiveEnd;n.firstCreatePass||ai(o,i),ua(u,i);const _=o.initialInputs;for(let C=c;C<f;C++){const P=n.data[C],Q=Nr(P);Q&&Vg(i,o,P);const ue=pa(i,n,C,o);ua(ue,i),null!==_&&$g(0,C-c,ue,P,0,_),Q&&(Kn(o.index,i)[8]=ue)}}(n,i,o,$i(o,i)),128==(128&o.flags)&&function Td(n,i,o){const u=o.directiveStart,c=o.directiveEnd,f=o.index,_=function Zr(){return ln.lFrame.currentDirectiveIndex}();try{ut(f);for(let C=u;C<c;C++){const P=n.data[C],Q=i[C];is(C),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&Ug(P,Q)}}finally{ut(-1),is(_)}}(n,i,o))}function Mg(n,i,o=$i){const u=i.localNames;if(null!==u){let c=i.index+1;for(let f=0;f<u.length;f+=2){const _=u[f+1],C=-1===_?o(i,n):n[_];n[c++]=C}}}function Sy(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Yf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Yf(n,i,o,u,c,f,_,C,P,Q){const ue=22+u,we=ue+c,ze=function Ay(n,i){const o=[];for(let u=0;u<i;u++)o.push(u<n?null:Qn);return o}(ue,we),ct="function"==typeof Q?Q():Q;return ze[1]={type:n,blueprint:ze,template:o,queries:null,viewQuery:C,declTNode:i,data:ze.slice().fill(null,ue),bindingStartIndex:ue,expandoStartIndex:we,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:P,consts:ct,incompleteFirstPass:!1}}function xy(n,i,o,u){const c=Uy(i);null===o?c.push(u):(c.push(o),n.firstCreatePass&&ip(n).push(u,c.length-1))}function Ry(n,i,o){for(let u in n)if(n.hasOwnProperty(u)){const c=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function Jf(n,i){const u=i.directiveEnd,c=n.data,f=i.attrs,_=[];let C=null,P=null;for(let Q=i.directiveStart;Q<u;Q++){const ue=c[Q],we=ue.inputs,ze=null===f||og(i)?null:Hg(we,f);_.push(ze),C=Ry(we,Q,C),P=Ry(ue.outputs,Q,P)}null!==C&&(C.hasOwnProperty("class")&&(i.flags|=16),C.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=_,i.inputs=C,i.outputs=P}function va(n,i,o,u,c,f,_,C){const P=$i(i,o);let ue,Q=i.inputs;!C&&null!=Q&&(ue=Q[u])?(op(n,o,ue,u,c),Ri(i)&&Og(o,i.index)):3&i.type&&(u=function __(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),c=null!=_?_(c,i.value||"",u):c,f.setProperty(P,u,c))}function Og(n,i){const o=Kn(i,n);16&o[2]||(o[2]|=32)}function Vl(n,i,o,u){let c=!1;if(Ro()){const f=function Dd(n,i,o){const u=n.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];xh(o,_.selectors,!1)&&(c||(c=[]),$r(ai(o,i),n,_.type),Nr(_)?(Py(n,o),c.unshift(_)):c.push(_))}return c}(n,i,o),_=null===u?null:{"":-1};if(null!==f){c=!0,Xf(o,n.data.length,f.length);for(let ue=0;ue<f.length;ue++){const we=f[ue];we.providersResolver&&we.providersResolver(we)}let C=!1,P=!1,Q=Bl(n,i,f.length,null);for(let ue=0;ue<f.length;ue++){const we=f[ue];o.mergedAttrs=Ws(o.mergedAttrs,we.hostAttrs),ep(n,o,i,Q,we),Bg(Q,we,_),null!==we.contentQueries&&(o.flags|=8),(null!==we.hostBindings||null!==we.hostAttrs||0!==we.hostVars)&&(o.flags|=128);const ze=we.type.prototype;!C&&(ze.ngOnChanges||ze.ngOnInit||ze.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),C=!0),!P&&(ze.ngOnChanges||ze.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),P=!0),Q++}Jf(n,o)}_&&function w_(n,i,o){if(i){const u=n.localNames=[];for(let c=0;c<i.length;c+=2){const f=o[i[c+1]];if(null==f)throw new pe(-301,!1);u.push(i[c],f)}}}(o,u,_)}return o.mergedAttrs=Ws(o.mergedAttrs,o.attrs),c}function sl(n,i,o,u,c,f){const _=f.hostBindings;if(_){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const P=~i.index;(function Fg(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(C)!=P&&C.push(P),C.push(u,c,_)}}function Ug(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Py(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Bg(n,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=n;Nr(i)&&(o[""]=n)}}function Xf(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}function ep(n,i,o,u,c){n.data[u]=c;const f=c.factory||(c.factory=xs(c.type)),_=new Ot(f,Nr(c),yd);n.blueprint[u]=_,o[u]=_,sl(n,i,0,u,Bl(n,o,c.hostVars,Qn),c)}function Vg(n,i,o){const u=$i(i,n),c=Sy(o),f=n[10],_=np(n,Qf(n,c,null,o.onPush?32:16,u,i,f,f.createRenderer(u,o),null,null,null));n[i.index]=_}function Bu(n,i,o,u,c,f){const _=$i(n,i);!function jg(n,i,o,u,c,f,_){if(null==f)n.removeAttribute(i,c,o);else{const C=null==_?ve(f):_(f,u||"",c);n.setAttribute(i,c,C,o)}}(i[11],_,f,n.value,o,u,c)}function $g(n,i,o,u,c,f){const _=f[i];if(null!==_){const C=u.setInput;for(let P=0;P<_.length;){const Q=_[P++],ue=_[P++],we=_[P++];null!==C?u.setInput(o,we,Q,ue):o[ue]=we}}}function Hg(n,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;n.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,n[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function zg(n,i,o,u){return new Array(n,!0,!1,i,null,0,u,o,null,null)}function Oy(n,i){const o=Kn(i,n);if(ys(o)){const u=o[1];48&o[2]?Id(u,o,u.template,o[8]):o[5]>0&&tp(o)}}function tp(n){for(let u=Fu(n);null!==u;u=Rl(u))for(let c=10;c<u.length;c++){const f=u[c];if(ys(f))if(512&f[2]){const _=f[1];Id(_,f,_.template,f[8])}else f[5]>0&&tp(f)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=Kn(o[u],n);ys(c)&&c[5]>0&&tp(c)}}function ky(n,i){const o=Kn(i,n),u=o[1];(function I_(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(u,o),Ed(u,o,o[8])}function np(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Gg(n){for(;n;){n[2]|=32;const i=vh(n);if(As(n)&&!i)return n;n=i}return null}function rp(n,i,o,u=!0){const c=i[10];c.begin&&c.begin();try{Id(n,i,n.template,o)}catch(_){throw u&&sp(i,_),_}finally{c.end&&c.end()}}function Fh(n,i,o){Or(0),i(n,o)}function Uy(n){return n[7]||(n[7]=[])}function ip(n){return n.cleanup||(n.cleanup=[])}function sp(n,i){const o=n[9],u=o?o.get(pt,null):null;u&&u.handleError(i)}function op(n,i,o,u,c){for(let f=0;f<o.length;){const _=o[f++],C=o[f++],P=i[_],Q=n.data[_];null!==Q.setInput?Q.setInput(P,c,u,C):P[C]=c}}function gu(n,i,o){const u=bi(i,n);!function Xp(n,i,o){n.setValue(i,o)}(n[11],u,o)}function Uh(n,i,o){let u=o?n.styles:null,c=o?n.classes:null,f=0;if(null!==i)for(let _=0;_<i.length;_++){const C=i[_];"number"==typeof C?f=C:1==f?c=V(c,C):2==f&&(u=V(u,C+": "+i[++_]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=c:n.classesWithoutHost=c}function ap(n,i,o,u,c=!1){for(;null!==o;){const f=i[o.index];if(null!==f&&u.push(Yr(f)),Kr(f))for(let C=10;C<f.length;C++){const P=f[C],Q=P[1].firstChild;null!==Q&&ap(P[1],P,Q,u)}const _=o.type;if(8&_)ap(n,i,o.child,u);else if(32&_){const C=yh(o,i);let P;for(;P=C();)u.push(P)}else if(16&_){const C=Nf(i,o);if(Array.isArray(C))u.push(...C);else{const P=vh(i[16]);ap(P[1],P,C,u,!0)}}o=c?o.projectionNext:o.next}return u}class Pc{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return ap(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Kr(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(wh(i,u),Ko(o,u))}this._attachedToViewContainer=!1}eg(this._lView[1],this._lView)}onDestroy(i){xy(this._lView[1],this._lView,null,i)}markForCheck(){Gg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){rp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bc(n,i){Dc(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=i}}class b_ extends Pc{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;rp(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class Bh extends xu{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=lt(i);return new Nc(o,this.ngModule)}}function Vy(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class T_{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){const c=this.injector.get(i,Ui,u);return c!==Ui||o===Ui?c:this.parentInjector.get(i,o,u)}}class Nc extends ch{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function gd(n){return n.map(a_).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Vy(this.componentDef.inputs)}get outputs(){return Vy(this.componentDef.outputs)}create(i,o,u,c){var f;let _=(c=c||this.ngModule)instanceof ls?c:null===(f=c)||void 0===f?void 0:f.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const C=_?new T_(i,_):i,P=C.get(Pu,null);if(null===P)throw new pe(407,!1);const Q=C.get(yc,null),ue=P.createRenderer(null,this.componentDef),we=this.componentDef.selectors[0][0]||"div",ze=u?function Pg(n,i,o){return n.selectRootElement(i,o===fn.ShadowDom)}(ue,u,this.componentDef.encapsulation):Cf(P.createRenderer(null,this.componentDef),we,function Wg(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(we)),ct=this.componentDef.onPush?288:272,Ct=Yf(0,null,null,1,0,null,null,null,null,null),jt=Qf(null,Ct,null,ct,null,null,P,ue,Q,C,null);let un,Dn;ws(jt);try{const tr=function Kg(n,i,o,u,c,f){const _=o[1];o[22]=n;const P=Ul(_,22,2,"#host",null),Q=P.mergedAttrs=i.hostAttrs;null!==Q&&(Uh(P,Q,!0),null!==n&&(qi(c,n,Q),null!==P.classes&&ig(c,n,P.classes),null!==P.styles&&Ch(c,n,P.styles)));const ue=u.createRenderer(n,i),we=Qf(o,Sy(i),null,i.onPush?32:16,o[22],P,u,ue,f||null,null,null);return _.firstCreatePass&&($r(ai(P,o),_,i.type),Py(_,P),Xf(P,o.length,1)),np(o,we),o[22]=we}(ze,this.componentDef,jt,P,ue);if(ze)if(u)qi(ue,ze,["ng-version",Qo.full]);else{const{attrs:kt,classes:zn}=function ay(n){const i=[],o=[];let u=1,c=2;for(;u<n.length;){let f=n[u];if("string"==typeof f)2===c?""!==f&&i.push(f,n[++u]):8===c&&o.push(f);else{if(!Ya(c))break;c=f}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);kt&&qi(ue,ze,kt),zn&&zn.length>0&&ig(ue,ze,zn.join(" "))}if(Dn=ha(Ct,22),void 0!==o){const kt=Dn.projection=[];for(let zn=0;zn<this.ngContentSelectors.length;zn++){const gi=o[zn];kt.push(null!=gi?Array.from(gi):null)}}un=function C_(n,i,o,u){const c=o[1],f=function Lg(n,i,o){const u=Xr();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),ep(n,u,i,Bl(n,i,1,null),o),Jf(n,u));const c=pa(i,n,u.directiveStart,u);ua(c,i);const f=$i(u,i);return f&&ua(f,i),c}(c,o,i);if(n[8]=o[8]=f,null!==u)for(const C of u)C(f,i);if(i.contentQueries){const C=Xr();i.contentQueries(1,f,C.directiveStart)}const _=Xr();return!c.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(ut(_.index),sl(o[1],_,0,_.directiveStart,_.directiveEnd,i),Ug(i,f)),f}(tr,this.componentDef,jt,[Zg]),Ed(Ct,jt,null)}finally{ee()}return new Cd(this.componentType,un,Da(Dn,jt),jt,Dn)}}class Cd extends class sd{}{constructor(i,o,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=o,this.hostView=this.changeDetectorRef=new b_(c),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[i])){const f=this._rootLView;op(f[1],f,c,i,o),Og(f,this._tNode.index)}}get injector(){return new xt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Zg(){const n=Xr();F(Tt()[1],n)}function Vh(n){let i=function Vu(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;i;){let c;if(Nr(n))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new pe(903,!1);c=i.\u0275dir}if(c){if(o){u.push(c);const _=n;_.inputs=jh(n.inputs),_.declaredInputs=jh(n.declaredInputs),_.outputs=jh(n.outputs);const C=c.hostBindings;C&&Qg(n,C);const P=c.viewQuery,Q=c.contentQueries;if(P&&A_(n,P),Q&&x_(n,Q),Z(n.inputs,c.inputs),Z(n.declaredInputs,c.declaredInputs),Z(n.outputs,c.outputs),Nr(c)&&c.data.animation){const ue=n.data;ue.animation=(ue.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const C=f[_];C&&C.ngInherit&&C(n),C===Vh&&(o=!1)}}i=Object.getPrototypeOf(i)}!function S_(n){let i=0,o=null;for(let u=n.length-1;u>=0;u--){const c=n[u];c.hostVars=i+=c.hostVars,c.hostAttrs=Ws(c.hostAttrs,o=Ws(o,c.hostAttrs))}}(u)}function jh(n){return n===sn?{}:n===qt?[]:n}function A_(n,i){const o=n.viewQuery;n.viewQuery=o?(u,c)=>{i(u,c),o(u,c)}:i}function x_(n,i){const o=n.contentQueries;n.contentQueries=o?(u,c,f)=>{i(u,c,f),o(u,c,f)}:i}function Qg(n,i){const o=n.hostBindings;n.hostBindings=o?(u,c)=>{i(u,c),o(u,c)}:i}let Sd=null;function Oc(){if(!Sd){const n=gr.Symbol;if(n&&n.iterator)Sd=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Sd=u)}}}return Sd}function Ad(n){return!!Xg(n)&&(Array.isArray(n)||!(n instanceof Map)&&Oc()in n)}function Xg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ja(n,i,o){return n[i]=o}function Bo(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function kc(n,i,o,u){const c=Tt();return Bo(c,bn(),i)&&(Ln(),Bu(ft(),c,n,i,o,u)),kc}function jl(n,i,o,u){return Bo(n,bn(),o)?i+ve(o)+u:Qn}function Lc(n,i,o,u,c,f){const C=function ol(n,i,o,u){const c=Bo(n,i,o);return Bo(n,i+1,u)||c}(n,function Kt(){return ln.lFrame.bindingIndex}(),o,c);return On(2),C?i+ve(o)+u+ve(c)+f:Qn}function Gh(n,i,o,u,c,f,_,C){const P=Tt(),Q=Ln(),ue=n+22,we=Q.firstCreatePass?function Gy(n,i,o,u,c,f,_,C,P){const Q=i.consts,ue=Ul(i,n,4,_||null,Ti(Q,C));Vl(i,o,ue,Ti(Q,P)),F(i,ue);const we=ue.tViews=Yf(2,ue,u,c,f,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Q);return null!==i.queries&&(i.queries.template(i,ue),we.queries=i.queries.embeddedTView(ue)),ue}(ue,Q,P,i,o,u,c,f,_):Q.data[ue];_s(we,!1);const ze=P[11].createComment("");Ih(Q,P,ze,we),ua(ze,P),np(P,P[ue]=zg(ze,P,ze,we)),ns(we)&&Lh(Q,P,we),null!=_&&Mg(P,we,C)}function fp(n){return co(function xe(){return ln.lFrame.contextLView}(),22+n)}function pp(n,i,o){const u=Tt();return Bo(u,bn(),i)&&va(Ln(),ft(),u,n,i,u[11],o,!1),pp}function $l(n,i,o,u,c){const _=c?"class":"style";op(n,o,i.inputs[_],_,u)}function gp(n,i,o,u){const c=Tt(),f=Ln(),_=22+n,C=c[11],P=c[_]=Cf(C,i,function y(){return ln.lFrame.currentNamespace}()),Q=f.firstCreatePass?function nm(n,i,o,u,c,f,_){const C=i.consts,Q=Ul(i,n,2,c,Ti(C,f));return Vl(i,o,Q,Ti(C,_)),null!==Q.attrs&&Uh(Q,Q.attrs,!1),null!==Q.mergedAttrs&&Uh(Q,Q.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,Q),Q}(_,f,c,0,i,o,u):f.data[_];_s(Q,!0);const ue=Q.mergedAttrs;null!==ue&&qi(C,P,ue);const we=Q.classes;null!==we&&ig(C,P,we);const ze=Q.styles;return null!==ze&&Ch(C,P,ze),64!=(64&Q.flags)&&Ih(f,c,P,Q),0===function _o(){return ln.lFrame.elementDepthCount}()&&ua(P,c),function xo(){ln.lFrame.elementDepthCount++}(),ns(Q)&&(Lh(f,c,Q),Mc(f,Q,c)),null!==u&&Mg(c,Q),gp}function mp(){let n=Xr();q()?z():(n=n.parent,_s(n,!1));const i=n;!function fa(){ln.lFrame.elementDepthCount--}();const o=Ln();return o.firstCreatePass&&(F(o,n),Vs(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function _n(n){return 0!=(16&n.flags)}(i)&&$l(o,i,Tt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function jr(n){return 0!=(32&n.flags)}(i)&&$l(o,i,Tt(),i.stylesWithoutHost,!1),mp}function rm(n,i,o,u){return gp(n,i,o,u),mp(),rm}function yp(n,i,o){const u=Tt(),c=Ln(),f=n+22,_=c.firstCreatePass?function qy(n,i,o,u,c){const f=i.consts,_=Ti(f,u),C=Ul(i,n,8,"ng-container",_);return null!==_&&Uh(C,_,!0),Vl(i,o,C,Ti(f,c)),null!==i.queries&&i.queries.elementStart(i,C),C}(f,c,u,i,o):c.data[f];_s(_,!0);const C=u[f]=u[11].createComment("");return Ih(c,u,C,_),ua(C,u),ns(_)&&(Lh(c,u,_),Mc(c,_,u)),null!=o&&Mg(u,_),yp}function Wh(){let n=Xr();const i=Ln();return q()?z():(n=n.parent,_s(n,!1)),i.firstCreatePass&&(F(i,n),Vs(n)&&i.queries.elementEnd(n)),Wh}function Zy(){return Tt()}function im(n){return!!n&&"function"==typeof n.then}function Qy(n){return!!n&&"function"==typeof n.subscribe}const sm=Qy;function vp(n,i,o,u){const c=Tt(),f=Ln(),_=Xr();return function om(n,i,o,u,c,f,_,C){const P=ns(u),ue=n.firstCreatePass&&ip(n),we=i[8],ze=Uy(i);let ct=!0;if(3&u.type||C){const un=$i(u,i),Dn=C?C(un):un,tr=ze.length,kt=C?gi=>C(Yr(gi[u.index])):u.index;let zn=null;if(!C&&P&&(zn=function Yy(n,i,o,u){const c=n.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===o&&c[f+1]===u){const C=i[7],P=c[f+2];return C.length>P?C[P]:null}"string"==typeof _&&(f+=2)}return null}(n,i,c,u.index)),null!==zn)(zn.__ngLastListenerFn__||zn).__ngNextListenerFn__=f,zn.__ngLastListenerFn__=f,ct=!1;else{f=qh(u,i,we,f,!1);const gi=o.listen(Dn,c,f);ze.push(f,gi),ue&&ue.push(c,kt,tr,tr+1)}}else f=qh(u,i,we,f,!1);const Ct=u.outputs;let jt;if(ct&&null!==Ct&&(jt=Ct[c])){const un=jt.length;if(un)for(let Dn=0;Dn<un;Dn+=2){const Ys=i[jt[Dn]][jt[Dn+1]].subscribe(f),cf=ze.length;ze.push(f,Ys),ue&&ue.push(c,u.index,cf,-(cf+1))}}}(f,c,c[11],_,n,i,0,u),vp}function am(n,i,o,u){try{return!1!==o(u)}catch(c){return sp(n,c),!1}}function qh(n,i,o,u,c){return function f(_){if(_===Function)return u;Gg(2&n.flags?Kn(n.index,i):i);let P=am(i,0,u,_),Q=f.__ngNextListenerFn__;for(;Q;)P=am(i,0,Q,_)&&P,Q=Q.__ngNextListenerFn__;return c&&!1===P&&(_.preventDefault(),_.returnValue=!1),P}}function ti(n=1){return function k(n){return(ln.lFrame.contextLView=function se(n,i){for(;n>0;)i=i[15],n--;return i}(n,ln.lFrame.contextLView))[8]}(n)}function Jy(n,i){let o=null;const u=function sy(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(0==(1&o))return i[o+1]}return null}(n);for(let c=0;c<i.length;c++){const f=i[c];if("*"!==f){if(null===u?xh(n,f,!0):oy(u,f))return c}else o=c}return o}function um(n){const i=Tt()[16][6];if(!i.projection){const u=i.projection=ka(n?n.length:1,null),c=u.slice();let f=i.child;for(;null!==f;){const _=n?Jy(f,n):0;null!==_&&(c[_]?c[_].projectionNext=f:u[_]=f,c[_]=f),f=f.next}}}function Od(n,i=0,o){const u=Tt(),c=Ln(),f=Ul(c,22+n,16,null,o||null);null===f.projection&&(f.projection=i),z(),64!=(64&f.flags)&&function ry(n,i,o){Dh(i[11],0,i,o,tg(n,o,i),fd(o.parent||i[6],o,i))}(c,u,f)}function wp(n,i,o){return Yi(n,"",i,"",o),wp}function Yi(n,i,o,u,c){const f=Tt(),_=jl(f,i,o,u);return _!==Qn&&va(Ln(),ft(),f,n,_,f[11],c,!1),Yi}function cs(n,i,o,u,c){const f=n[o+1],_=null===i;let C=u?ca(f):Uu(f),P=!1;for(;0!==C&&(!1===P||_);){const ue=n[C+1];gw(n[C],i)&&(P=!0,n[C+1]=u?Ph(ue):zf(ue)),C=u?ca(ue):Uu(ue)}P&&(n[o+1]=u?zf(f):Ph(f))}function gw(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ae(n,i)>=0}const jo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Qs(n){return n.substring(jo.key,jo.keyEnd)}function rv(n,i){const o=jo.textEnd;return o===i?-1:(i=jo.keyEnd=function L_(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,jo.key=i,o),kd(n,i,o))}function kd(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function hm(n,i,o){return vu(n,i,o,!1),hm}function eu(n,i){return vu(n,i,null,!0),eu}function $a(n,i){for(let o=function k_(n){return function ov(n){jo.key=0,jo.keyEnd=0,jo.value=0,jo.valueEnd=0,jo.textEnd=n.length}(n),rv(n,kd(n,0,jo.textEnd))}(i);o>=0;o=rv(i,o))re(n,Qs(i),!0)}function vu(n,i,o,u){const c=Tt(),f=Ln(),_=On(2);f.firstUpdatePass&&pm(f,n,_,u),i!==Qn&&Bo(c,_,i)&&lv(f,f.data[be()],c,c[11],n,c[_+1]=function cv(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=K(M(n)))),n}(i,o),u,_)}function fm(n,i){return i>=n.expandoStartIndex}function pm(n,i,o,u){const c=n.data;if(null===c[o+1]){const f=c[be()],_=fm(n,o);Hl(f,u)&&null===i&&!_&&(i=!1),i=function bp(n,i,o,u){const c=function Vr(n){const i=ln.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let f=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(o=Ld(o=Vc(null,n,i,o,u),i.attrs,u),f=null);else{const _=i.directiveStylingLast;if(-1===_||n[_]!==c)if(o=Vc(c,n,i,o,u),null===f){let P=function U_(n,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==Uu(u))return n[ca(u)]}(n,i,u);void 0!==P&&Array.isArray(P)&&(P=Vc(null,n,i,P[1],u),P=Ld(P,i.attrs,u),function Bc(n,i,o,u){n[ca(o?i.classBindings:i.styleBindings)]=u}(n,i,u,P))}else f=function Tp(n,i,o){let u;const c=i.directiveEnd;for(let f=1+i.directiveStylingLast;f<c;f++)u=Ld(u,n[f].hostAttrs,o);return Ld(u,i.attrs,o)}(n,i,u)}return void 0!==f&&(u?i.residualClasses=f:i.residualStyles=f),o}(c,f,i,u),function N_(n,i,o,u,c,f){let _=f?i.classBindings:i.styleBindings,C=ca(_),P=Uu(_);n[u]=o;let ue,Q=!1;if(Array.isArray(o)){const we=o;ue=we[1],(null===ue||Ae(we,ue)>0)&&(Q=!0)}else ue=o;if(c)if(0!==P){const ze=ca(n[C+1]);n[u+1]=rl(ze,C),0!==ze&&(n[ze+1]=Gf(n[ze+1],u)),n[C+1]=function Hf(n,i){return 131071&n|i<<17}(n[C+1],u)}else n[u+1]=rl(C,0),0!==C&&(n[C+1]=Gf(n[C+1],u)),C=u;else n[u+1]=rl(P,0),0===C?C=u:n[P+1]=Gf(n[P+1],u),P=u;Q&&(n[u+1]=zf(n[u+1])),cs(n,ue,u,!0),cs(n,ue,u,!1),function O_(n,i,o,u,c){const f=c?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof i&&Ae(f,i)>=0&&(o[u+1]=Ph(o[u+1]))}(i,ue,n,u,f),_=rl(C,P),f?i.classBindings=_:i.styleBindings=_}(c,f,i,o,_,u)}}function Vc(n,i,o,u,c){let f=null;const _=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<_&&(f=i[C],u=Ld(u,f.hostAttrs,c),f!==n);)C++;return null!==n&&(o.directiveStylingLast=C),u}function Ld(n,i,o){const u=o?1:2;let c=-1;if(null!==i)for(let f=0;f<i.length;f++){const _=i[f];"number"==typeof _?c=_:c===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),re(n,_,!!o||i[++f]))}return void 0===n?null:n}function lv(n,i,o,u,c,f,_,C){if(!(3&i.type))return;const P=n.data,Q=P[C+1];Fd(function Ey(n){return 1==(1&n)}(Q)?Dp(P,i,o,c,Uu(Q),_):void 0)||(Fd(f)||function $f(n){return 2==(2&n)}(Q)&&(f=Dp(P,null,o,c,C,_)),function rg(n,i,o,u,c){if(i)c?n.addClass(o,u):n.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:Lu.DashCase;null==c?n.removeStyle(o,u,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=Lu.Important),n.setStyle(o,u,c,f))}}(u,_,bi(be(),o),c,f))}function Dp(n,i,o,u,c,f){const _=null===i;let C;for(;c>0;){const P=n[c],Q=Array.isArray(P),ue=Q?P[1]:P,we=null===ue;let ze=o[c+1];ze===Qn&&(ze=we?qt:void 0);let ct=we?Ee(ze,u):ue===u?ze:void 0;if(Q&&!Fd(ct)&&(ct=Ee(P,u)),Fd(ct)&&(C=ct,_))return C;const Ct=n[c+1];c=_?ca(Ct):Uu(Ct)}if(null!==i){let P=f?i.residualClasses:i.residualStyles;null!=P&&(C=Ee(P,u))}return C}function Fd(n){return void 0!==n}function Hl(n,i){return 0!=(n.flags&(i?16:32))}function mm(n,i=""){const o=Tt(),u=Ln(),c=n+22,f=u.firstCreatePass?Ul(u,c,1,i,null):u.data[c],_=o[c]=function hu(n,i){return n.createText(i)}(o[11],i);Ih(u,o,_,f),_s(f,!1)}function Cp(n){return Ud("",n,""),Cp}function Ud(n,i,o){const u=Tt(),c=jl(u,n,i,o);return c!==Qn&&gu(u,be(),c),Ud}function jc(n,i,o,u,c){const f=Tt(),_=Lc(f,n,i,o,u,c);return _!==Qn&&gu(f,be(),_),jc}function vm(n,i,o){!function _u(n,i,o,u){const c=Ln(),f=On(2);c.firstUpdatePass&&pm(c,null,f,u);const _=Tt();if(o!==Qn&&Bo(_,f,o)){const C=c.data[be()];if(Hl(C,u)&&!fm(c,f)){let P=u?C.classesWithoutHost:C.stylesWithoutHost;null!==P&&(o=V(P,o||"")),$l(c,C,_,o,u)}else!function B_(n,i,o,u,c,f,_,C){c===Qn&&(c=qt);let P=0,Q=0,ue=0<c.length?c[0]:null,we=0<f.length?f[0]:null;for(;null!==ue||null!==we;){const ze=P<c.length?c[P+1]:void 0,ct=Q<f.length?f[Q+1]:void 0;let jt,Ct=null;ue===we?(P+=2,Q+=2,ze!==ct&&(Ct=we,jt=ct)):null===we||null!==ue&&ue<we?(P+=2,Ct=ue):(Q+=2,Ct=we,jt=ct),null!==Ct&&lv(n,i,o,u,Ct,jt,_,C),ue=P<c.length?c[P]:null,we=Q<f.length?f[Q]:null}}(c,C,_,_[11],_[f+1],_[f+1]=function gm(n,i,o){if(null==o||""===o)return qt;const u=[],c=M(o);if(Array.isArray(c))for(let f=0;f<c.length;f++)n(u,c[f],!0);else if("object"==typeof c)for(const f in c)c.hasOwnProperty(f)&&n(u,f,c[f]);else"string"==typeof c&&i(u,c);return u}(n,i,o),u,f)}}(re,$a,jl(Tt(),n,i,o),!0)}function jd(n,i,o){const u=Tt();return Bo(u,bn(),i)&&va(Ln(),ft(),u,n,i,u[11],o,!0),jd}const $d=void 0;var W_=["en",[["a","p"],["AM","PM"],$d],[["AM","PM"],$d,$d],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$d,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$d,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$d,"{1} 'at' {0}",$d],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ww(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ef={};function ul(n){const i=function q_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=ll(i);if(o)return o;const u=i.split("-")[0];if(o=ll(u),o)return o;if("en"===u)return W_;throw new pe(701,!1)}function Hd(n){return ul(n)[Hn.PluralCase]}function ll(n){return n in ef||(ef[n]=gr.ng&&gr.ng.common&&gr.ng.common.locales&&gr.ng.common.locales[n]),ef[n]}var Hn=(()=>((Hn=Hn||{})[Hn.LocaleId=0]="LocaleId",Hn[Hn.DayPeriodsFormat=1]="DayPeriodsFormat",Hn[Hn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Hn[Hn.DaysFormat=3]="DaysFormat",Hn[Hn.DaysStandalone=4]="DaysStandalone",Hn[Hn.MonthsFormat=5]="MonthsFormat",Hn[Hn.MonthsStandalone=6]="MonthsStandalone",Hn[Hn.Eras=7]="Eras",Hn[Hn.FirstDayOfWeek=8]="FirstDayOfWeek",Hn[Hn.WeekendRange=9]="WeekendRange",Hn[Hn.DateFormat=10]="DateFormat",Hn[Hn.TimeFormat=11]="TimeFormat",Hn[Hn.DateTimeFormat=12]="DateTimeFormat",Hn[Hn.NumberSymbols=13]="NumberSymbols",Hn[Hn.NumberFormats=14]="NumberFormats",Hn[Hn.CurrencyCode=15]="CurrencyCode",Hn[Hn.CurrencySymbol=16]="CurrencySymbol",Hn[Hn.CurrencyName=17]="CurrencyName",Hn[Hn.Currencies=18]="Currencies",Hn[Hn.Directionality=19]="Directionality",Hn[Hn.PluralCase=20]="PluralCase",Hn[Hn.ExtraData=21]="ExtraData",Hn))();const zd="en-US";let mv=zd;function Om(n,i,o,u,c){if(n=$(n),Array.isArray(n))for(let f=0;f<n.length;f++)Om(n[f],i,o,u,c);else{const f=Ln(),_=Tt();let C=lu(n)?n:$(n.provide),P=uh(n);const Q=Xr(),ue=1048575&Q.providerIndexes,we=Q.directiveStart,ze=Q.providerIndexes>>20;if(lu(n)||!n.multi){const ct=new Ot(P,c,yd),Ct=Lm(C,i,c?ue:ue+ze,we);-1===Ct?($r(ai(Q,_),f,C),Vp(f,n,i.length),i.push(C),Q.directiveStart++,Q.directiveEnd++,c&&(Q.providerIndexes+=1048576),o.push(ct),_.push(ct)):(o[Ct]=ct,_[Ct]=ct)}else{const ct=Lm(C,i,ue+ze,we),Ct=Lm(C,i,ue,ue+ze),jt=ct>=0&&o[ct],un=Ct>=0&&o[Ct];if(c&&!un||!c&&!jt){$r(ai(Q,_),f,C);const Dn=function s(n,i,o,u,c){const f=new Ot(n,o,yd);return f.multi=[],f.index=i,f.componentProviders=0,km(f,c,u&&!o),f}(c?e:r,o.length,c,u,P);!c&&un&&(o[Ct].providerFactory=Dn),Vp(f,n,i.length,0),i.push(C),Q.directiveStart++,Q.directiveEnd++,c&&(Q.providerIndexes+=1048576),o.push(Dn),_.push(Dn)}else Vp(f,n,ct>-1?ct:Ct,km(o[c?Ct:ct],P,!c&&u));!c&&u&&un&&o[Ct].componentProviders++}}}function Vp(n,i,o,u){const c=lu(i),f=function fc(n){return!!n.useClass}(i);if(c||f){const P=(f?$(i.useClass):i).prototype.ngOnDestroy;if(P){const Q=n.destroyHooks||(n.destroyHooks=[]);if(!c&&i.multi){const ue=Q.indexOf(o);-1===ue?Q.push(o,[u,P]):Q[ue+1].push(u,P)}else Q.push(o,P)}}}function km(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Lm(n,i,o,u){for(let c=o;c<u;c++)if(i[c]===n)return c;return-1}function r(n,i,o,u){return t(this.multi,[])}function e(n,i,o,u){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,C=pa(o,o[1],this.providerFactory.index,u);f=C.slice(0,_),t(c,f);for(let P=_;P<C.length;P++)f.push(C[P])}else f=[],t(c,f);return f}function t(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function a(n,i=[]){return o=>{o.providersResolver=(u,c)=>function jv(n,i,o){const u=Ln();if(u.firstCreatePass){const c=Nr(n);Om(o,u.data,u.blueprint,c,!0),Om(i,u.data,u.blueprint,c,!1)}}(u,c?c(n):n,i)}}class l{}class p{}function D(n,i){return new J(n,i??null)}class J extends l{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Bh(this);const u=xn(i);this._bootstrapComponents=ku(u.bootstrap),this._r3Injector=kl(i,o,[{provide:l,useValue:this},{provide:xu,useValue:this.componentFactoryResolver}],K(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class le extends p{constructor(i){super(),this.moduleType=i}create(i){return new J(this.moduleType,i)}}class Ne extends l{constructor(i,o,u){super(),this.componentFactoryResolver=new Bh(this),this.instance=null;const c=new ah([...i,{provide:l,useValue:this},{provide:xu,useValue:this.componentFactoryResolver}],o||id(),u,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function ot(n,i,o=null){return new Ne(n,i,o).injector}let _t=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=hc(0,o.type),c=u.length>0?ot([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Vt({token:n,providedIn:"environment",factory:()=>new n(_i(ls))}),n})();function Bt(n){n.getStandaloneInjector=i=>i.get(_t).getOrCreateStandaloneInjector(n)}function Aw(n,i,o){const u=gt()+n,c=Tt();return c[u]===Qn?Ja(c,u,o?i.call(o):i()):function $h(n,i){return n[i]}(c,u)}function xw(n,i,o,u){return Mw(Tt(),gt(),n,i,o,u)}function Rw(n,i,o,u){return function kw(n,i,o,u,c,f){let _=i+o,C=!1;for(let P=0;P<c.length;P++)Bo(n,_++,c[P])&&(C=!0);return C?Ja(n,_,u.apply(f,c)):Fm(n,_)}(Tt(),gt(),n,i,o,u)}function Fm(n,i){const o=n[i];return o===Qn?void 0:o}function Mw(n,i,o,u,c,f){const _=i+o;return Bo(n,_,c)?Ja(n,_+1,f?u.call(f,c):u(c)):Fm(n,_+1)}function Lw(n,i){const o=Ln();let u;const c=n+22;o.firstCreatePass?(u=function aI(n,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(n===u.name)return u}}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const f=u.factory||(u.factory=xs(u.type)),_=Wr(yd);try{const C=qs(!1),P=f();return qs(C),function Wy(n,i,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=u}(o,Tt(),c,P),P}finally{Wr(_)}}function Fw(n,i,o){const u=n+22,c=Tt(),f=co(c,u);return function Um(n,i){return n[1].data[i].pure}(c,u)?Mw(c,gt(),i,f.transform,o,f):f.transform(o)}function _0(n){return i=>{setTimeout(n,void 0,i)}}const Yl=class hI extends m.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let c=i,f=o||(()=>null),_=u;if(i&&"object"==typeof i){var C,P,Q;const we=i;c=null===(C=we.next)||void 0===C?void 0:C.bind(we),f=null===(P=we.error)||void 0===P?void 0:P.bind(we),_=null===(Q=we.complete)||void 0===Q?void 0:Q.bind(we)}this.__isAsync&&(f=_0(f),c&&(c=_0(c)),_&&(_=_0(_)));const ue=super.subscribe({next:c,error:f,complete:_});return i instanceof x.w0&&i.add(ue),ue}};function fI(){return this._results[Oc()]()}class $v{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Oc(),u=$v.prototype;u[o]||(u[o]=fI)}get changes(){return this._changes||(this._changes=new Yl)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=Ft(i);(this._changesDetected=!function Qi(n,i,o){if(n.length!==i.length)return!1;for(let u=0;u<n.length;u++){let c=n[u],f=i[u];if(o&&(c=o(c),f=o(f)),f!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Bm=(()=>{class n{}return n.__NG_ELEMENT_ID__=mI,n})();const pI=Bm,gI=class extends pI{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i,o){const u=this._declarationTContainer.tViews,c=Qf(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(c[19]=_.createEmbeddedView(u)),Ed(u,c,i),new Pc(c)}};function mI(){return Hv(Xr(),Tt())}function Hv(n,i){return 4&n.type?new gI(i,n,Da(n,i)):null}let zv=(()=>{class n{}return n.__NG_ELEMENT_ID__=yI,n})();function yI(){return Vw(Xr(),Tt())}const vI=zv,Uw=class extends vI{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Da(this._hostTNode,this._hostLView)}get injector(){return new xt(this._hostTNode,this._hostLView)}get parentInjector(){const i=Zs(this._hostTNode,this._hostLView);if(Ms(i)){const o=Pi(i,this._hostLView),u=No(i);return new xt(o[1].data[u+8],o)}return new xt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=Bw(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){let c,f;"number"==typeof u?c=u:null!=u&&(c=u.index,f=u.injector);const _=i.createEmbeddedView(o||{},f);return this.insert(_,c),_}createComponent(i,o,u,c,f){const _=i&&!function Ir(n){return"function"==typeof n}(i);let C;if(_)C=o;else{const we=o||{};C=we.index,u=we.injector,c=we.projectableNodes,f=we.environmentInjector||we.ngModuleRef}const P=_?i:new Nc(lt(i)),Q=u||this.parentInjector;if(!f&&null==P.ngModule){const ze=(_?Q:this.parentInjector).get(ls,null);ze&&(f=ze)}const ue=P.create(Q,c,void 0,f);return this.insert(ue.hostView,C),ue}insert(i,o){const u=i._lView,c=u[1];if(function Gs(n){return Kr(n[3])}(u)){const ue=this.indexOf(i);if(-1!==ue)this.detach(ue);else{const we=u[3],ze=new Uw(we,we[6],we[3]);ze.detach(ze.indexOf(i))}}const f=this._adjustIndex(o),_=this._lContainer;!function _h(n,i,o,u){const c=10+u,f=o.length;u>0&&(o[c-1][4]=i),u<f-10?(i[4]=o[c],Ga(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const _=i[17];null!==_&&o!==_&&function Jm(n,i){const o=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===o?n[9]=[i]:o.push(i)}(_,i);const C=i[19];null!==C&&C.insertView(n),i[2]|=64}(c,u,_,f);const C=bh(f,_),P=u[11],Q=Rf(P,_[7]);return null!==Q&&function Ic(n,i,o,u,c,f){u[0]=c,u[6]=i,Dc(n,u,o,1,c,f)}(c,_[6],P,u,Q,C),i.attachToViewContainerRef(),Ga(w0(_),f,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=Bw(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=wh(this._lContainer,o);u&&(Ko(w0(this._lContainer),o),eg(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=wh(this._lContainer,o);return u&&null!=Ko(w0(this._lContainer),o)?new Pc(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function Bw(n){return n[8]}function w0(n){return n[8]||(n[8]=[])}function Vw(n,i){let o;const u=i[n.index];if(Kr(u))o=u;else{let c;if(8&n.type)c=Yr(u);else{const f=i[11];c=f.createComment("");const _=$i(n,i);fu(f,Rf(f,_),c,function s_(n,i){return n.nextSibling(i)}(f,_),!1)}i[n.index]=o=zg(u,i,c,n),np(i,o)}return new Uw(o,n,i)}class E0{constructor(i){this.queryList=i,this.matches=null}clone(){return new E0(this.queryList)}setDirty(){this.queryList.setDirty()}}class I0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let f=0;f<u;f++){const _=o.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new I0(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==Zw(i,o).matches&&this.queries[o].setDirty()}}class jw{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class b0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(i,c);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new b0(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class T0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new T0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(i,o,EI(o,f)),this.matchTNodeWithReadOption(i,o,$n(o,i,f,!1,!1))}else u===Bm?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,$n(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Ju||c===zv||c===Bm&&4&o.type)this.addMatch(o.index,-2);else{const f=$n(o,i,c,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function EI(n,i){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function bI(n,i,o,u){return-1===o?function II(n,i){return 11&n.type?Da(n,i):4&n.type?Hv(n,i):null}(i,n):-2===o?function TI(n,i,o){return o===Ju?Da(i,n):o===Bm?Hv(i,n):o===zv?Vw(i,n):void 0}(n,i,u):pa(n,n[1],o,i)}function $w(n,i,o,u){const c=i[19].queries[u];if(null===c.matches){const f=n.data,_=o.matches,C=[];for(let P=0;P<_.length;P+=2){const Q=_[P];C.push(Q<0?null:bI(i,f[Q],_[P+1],o.metadata.read))}c.matches=C}return c.matches}function D0(n,i,o,u){const c=n.queries.getByIndex(o),f=c.matches;if(null!==f){const _=$w(n,i,c,o);for(let C=0;C<f.length;C+=2){const P=f[C];if(P>0)u.push(_[C/2]);else{const Q=f[C+1],ue=i[-P];for(let we=10;we<ue.length;we++){const ze=ue[we];ze[17]===ze[3]&&D0(ze[1],ze,Q,u)}if(null!==ue[9]){const we=ue[9];for(let ze=0;ze<we.length;ze++){const ct=we[ze];D0(ct[1],ct,Q,u)}}}}}return u}function Hw(n){const i=Tt(),o=Ln(),u=no();Or(u+1);const c=Zw(o,u);if(n.dirty&&function xa(n){return 4==(4&n[2])}(i)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{const f=c.crossesNgTemplate?D0(o,i,u,[]):$w(o,i,c,u);n.reset(f,Xu),n.notifyOnChanges()}return!0}return!1}function zw(n,i,o){const u=Ln();u.firstCreatePass&&(Kw(u,new jw(n,i,o),-1),2==(2&i)&&(u.staticViewQueries=!0)),qw(u,Tt(),i)}function Gw(n,i,o,u){const c=Ln();if(c.firstCreatePass){const f=Xr();Kw(c,new jw(i,o,u),f.index),function CI(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(c,n),2==(2&o)&&(c.staticContentQueries=!0)}qw(c,Tt(),o)}function Ww(){return function DI(n,i){return n[19].queries[i].queryList}(Tt(),no())}function qw(n,i,o){const u=new $v(4==(4&o));xy(n,i,u,u.destroy),null===i[19]&&(i[19]=new I0),i[19].queries.push(new E0(u))}function Kw(n,i,o){null===n.queries&&(n.queries=new b0),n.queries.track(new T0(i,o))}function Zw(n,i){return n.queries.getByIndex(i)}function Qw(n,i){return Hv(n,i)}function Wv(...n){}const gE=new vi("Application Initializer");let qv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Wv,this.reject=Wv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(im(f))o.push(f);else if(sm(f)){const _=new Promise((C,P)=>{f.subscribe({complete:C,error:P})});o.push(_)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(_i(gE,8))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mE=new vi("AppId",{providedIn:"root",factory:function yE(){return`${R0()}${R0()}${R0()}`}});function R0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vE=new vi("Platform Initializer"),WI=new vi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_E=new vi("appBootstrapListener"),qI=new vi("AnimationModuleType");let KI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Kv=new vi("LocaleId",{providedIn:"root",factory:()=>ru(Kv,Nt.Optional|Nt.SkipSelf)||function ZI(){return typeof $localize<"u"&&$localize.locale||zd}()}),QI=new vi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class YI{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let JI=(()=>{class n{compileModuleSync(o){return new le(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),f=ku(xn(o).declarations).reduce((_,C)=>{const P=lt(C);return P&&_.push(new Nc(P)),_},[]);return new YI(u,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tb=(()=>Promise.resolve(0))();function M0(n){typeof Zone>"u"?tb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class $u{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yl(!1),this.onMicrotaskEmpty=new Yl(!1),this.onStable=new Yl(!1),this.onError=new Yl(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function nb(){let n=gr.requestAnimationFrame,i=gr.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function sb(n){const i=()=>{!function ib(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(gr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,N0(n),n.isCheckStableRunning=!0,P0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),N0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,f,_,C)=>{try{return IE(n),o.invokeTask(c,f,_,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&i(),bE(n)}},onInvoke:(o,u,c,f,_,C,P)=>{try{return IE(n),o.invoke(c,f,_,C,P)}finally{n.shouldCoalesceRunChangeDetection&&i(),bE(n)}},onHasTask:(o,u,c,f)=>{o.hasTask(c,f),u===c&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,N0(n),P0(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,c,f)=>(o.handleError(c,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$u.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if($u.isInAngularZone())throw new pe(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,i,rb,Wv,Wv);try{return f.runTask(_,o,u)}finally{f.cancelTask(_)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const rb={};function P0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function N0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function IE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bE(n){n._nesting--,P0(n)}class ob{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yl,this.onMicrotaskEmpty=new Yl,this.onStable=new Yl,this.onError=new Yl}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}const TE=new vi(""),DE=new vi("");let O0,ab=(()=>{class n{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,O0||(function ub(n){O0=n}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$u.assertNotInAngularZone(),M0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())M0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}}return n.\u0275fac=function(o){return new(o||n)(_i($u),_i(CE),_i(DE))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac}),n})(),CE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){var c,f;return null!==(c=null===(f=O0)||void 0===f?void 0:f.findTestabilityInTree(this,o,u))&&void 0!==c?c:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Wd=null;const SE=new vi("AllowMultipleToken"),k0=new vi("PlatformDestroyListeners");class db{constructor(i,o){this.name=i,this.token=o}}function xE(n,i,o=[]){const u=`Platform: ${i}`,c=new vi(u);return(f=[])=>{let _=L0();if(!_||_.injector.get(SE,!1)){const C=[...o,...f,{provide:c,useValue:!0}];n?n(C):function hb(n){if(Wd&&!Wd.get(SE,!1))throw new pe(400,!1);Wd=n;const i=n.get(ME);(function AE(n){const i=n.get(vE,null);i&&i.forEach(o=>o())})(n)}(function RE(n=[],i){return pu.create({name:i,providers:[{provide:pc,useValue:"platform"},{provide:k0,useValue:new Set([()=>Wd=null])},...n]})}(C,u))}return function pb(n){const i=L0();if(!i)throw new pe(401,!1);return i}()}}function L0(){var n,i;return null!==(n=null===(i=Wd)||void 0===i?void 0:i.get(ME))&&void 0!==n?n:null}let ME=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function NE(n,i){let o;return o="noop"===n?new ob:("zone.js"===n?void 0:n)||new $u(i),o}(u?.ngZone,function PE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),f=[{provide:$u,useValue:c}];return c.run(()=>{const _=pu.create({providers:f,parent:this.injector,name:o.moduleType.name}),C=o.create(_),P=C.injector.get(pt,null);if(!P)throw new pe(402,!1);return c.runOutsideAngular(()=>{const Q=c.onError.subscribe({next:ue=>{P.handleError(ue)}});C.onDestroy(()=>{Qv(this._modules,C),Q.unsubscribe()})}),function OE(n,i,o){try{const u=o();return im(u)?u.catch(c=>{throw i.runOutsideAngular(()=>n.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>n.handleError(u)),u}}(P,c,()=>{const Q=C.injector.get(qv);return Q.runInitializers(),Q.donePromise.then(()=>(function yv(n){Cn(n,"Expected localeId to be defined"),"string"==typeof n&&(mv=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Kv,zd)||zd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,u=[]){const c=kE({},u);return function lb(n,i,o){const u=new le(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(o){const u=o.injector.get(Zv);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new pe(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(k0,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(_i(pu))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function kE(n,i){return Array.isArray(i)?i.reduce(kE,n):{...n,...i}}let Zv=(()=>{class n{constructor(o,u,c){this._zone=o,this._injector=u,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new S.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),_=new S.y(C=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{$u.assertNotInAngularZone(),M0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const Q=this._zone.onUnstable.subscribe(()=>{$u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{P.unsubscribe(),Q.unsubscribe()}});this.isStable=(0,W.T)(f,_.pipe((0,N.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const c=o instanceof ch;if(!this._injector.get(qv).done)throw!c&&gn(o),new pe(405,false);let _;_=c?o:this._injector.get(xu).resolveComponentFactory(o),this.componentTypes.push(_.componentType);const C=function cb(n){return n.isBoundToModule}(_)?void 0:this._injector.get(l),Q=_.create(pu.NULL,[],u||_.selector,C),ue=Q.location.nativeElement,we=Q.injector.get(TE,null);return we?.registerApplication(ue),Q.onDestroy(()=>{this.detachView(Q.hostView),Qv(this.components,Q),we?.unregisterApplication(ue)}),this._loadComponent(Q),Q}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Qv(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(_E,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Qv(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new pe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(_i($u),_i(ls),_i(pt))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qv(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let FE=!0,UE=!1;function mb(){return UE=!0,FE}function yb(){if(UE)throw new Error("Cannot enable prod mode after platform setup.");FE=!1}let vb=(()=>{class n{}return n.__NG_ELEMENT_ID__=_b,n})();function _b(n){return function wb(n,i,o){if(Ri(n)&&!o){const u=Kn(n.index,i);return new Pc(u,u)}return 47&n.type?new Pc(i[16],i):null}(Xr(),Tt(),16==(16&n))}class $E{constructor(){}supports(i){return Ad(i)}create(i){return new Cb(i)}}const Db=(n,i)=>i;class Cb{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Db}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,f=null;for(;o||u;){const _=!u||o&&o.currentIndex<zE(u,c,f)?o:u,C=zE(_,c,f),P=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(o=o._next,null==_.previousIndex)c++;else{f||(f=[]);const Q=C-c,ue=P-c;if(Q!=ue){for(let ze=0;ze<Q;ze++){const ct=ze<f.length?f[ze]:f[ze]=0,Ct=ct+ze;ue<=Ct&&Ct<Q&&(f[ze]=ct+1)}f[_.previousIndex]=ue-Q}}C!==P&&i(_,C,P)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Ad(i))throw new pe(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,f,_,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let C=0;C<this.length;C++)f=i[C],_=this._trackByFn(C,f),null!==o&&Object.is(o.trackById,_)?(u&&(o=this._verifyReinsertion(o,f,_,C)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,_,C),u=!0),o=o._next}else c=0,function Hy(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Oc()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,C=>{_=this._trackByFn(c,C),null!==o&&Object.is(o.trackById,_)?(u&&(o=this._verifyReinsertion(o,C,_,c)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,_,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let f;return null===i?f=this._itTail:(f=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,f,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,f,c)):i=this._addAfter(new Sb(o,u),f,c),i}_verifyReinsertion(i,o,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?i=this._reinsertAfter(f,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,f=i._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new HE),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new HE),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Sb{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ab{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class HE{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new Ab,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zE(n,i,o){const u=n.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class GE{constructor(){}supports(i){return i instanceof Map||Xg(i)}create(){return new xb}}class xb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Xg(i)))throw new pe(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const u=new Rb(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class Rb{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WE(){return new j0([new $E])}let j0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||WE()),deps:[[n,new Cu,new su]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new pe(901,!1)}}return n.\u0275prov=Vt({token:n,providedIn:"root",factory:WE}),n})();function qE(){return new $0([new GE])}let $0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||qE()),deps:[[n,new Cu,new su]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new pe(901,!1)}}return n.\u0275prov=Vt({token:n,providedIn:"root",factory:qE}),n})();const Nb=xE(null,"core",[]);let Ob=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(_i(Zv))},n.\u0275mod=ri({type:n}),n.\u0275inj=Lt({}),n})();function kb(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},1481:($t,Re,H)=>{"use strict";H.d(Re,{Dx:()=>pr,H7:()=>Rt,b2:()=>Gr,q6:()=>Qr,se:()=>We});var m=H(6895),x=H(4650);class S extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class W extends S{static makeCurrent(){(0,m.HT)(new W)}onAndCancel(Te,ge,Ge){return Te.addEventListener(ge,Ge,!1),()=>{Te.removeEventListener(ge,Ge,!1)}}dispatchEvent(Te,ge){Te.dispatchEvent(ge)}remove(Te){Te.parentNode&&Te.parentNode.removeChild(Te)}createElement(Te,ge){return(ge=ge||this.getDefaultDocument()).createElement(Te)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Te){return Te.nodeType===Node.ELEMENT_NODE}isShadowRoot(Te){return Te instanceof DocumentFragment}getGlobalEventTarget(Te,ge){return"window"===ge?window:"document"===ge?Te:"body"===ge?Te.body:null}getBaseHref(Te){const ge=function O(){return N=N||document.querySelector("base"),N?N.getAttribute("href"):null}();return null==ge?null:function K(De){Z=Z||document.createElement("a"),Z.setAttribute("href",De);const Te=Z.pathname;return"/"===Te.charAt(0)?Te:`/${Te}`}(ge)}resetBaseElement(){N=null}getUserAgent(){return window.navigator.userAgent}getCookie(Te){return(0,m.Mx)(document.cookie,Te)}}let Z,N=null;const V=new x.OlP("TRANSITION_ID"),L=[{provide:x.ip1,useFactory:function B(De,Te,ge){return()=>{ge.get(x.CZH).donePromise.then(()=>{const Ge=(0,m.q)(),ht=Te.querySelectorAll(`style[ng-transition="${De}"]`);for(let Mt=0;Mt<ht.length;Mt++)Ge.remove(ht[Mt])})}},deps:[V,m.K0,x.zs3],multi:!0}];let de=(()=>{class De{build(){return new XMLHttpRequest}}return De.\u0275fac=function(ge){return new(ge||De)},De.\u0275prov=x.Yz7({token:De,factory:De.\u0275fac}),De})();const oe=new x.OlP("EventManagerPlugins");let pe=(()=>{class De{constructor(ge,Ge){this._zone=Ge,this._eventNameToPlugin=new Map,ge.forEach(ht=>ht.manager=this),this._plugins=ge.slice().reverse()}addEventListener(ge,Ge,ht){return this._findPluginFor(Ge).addEventListener(ge,Ge,ht)}addGlobalEventListener(ge,Ge,ht){return this._findPluginFor(Ge).addGlobalEventListener(ge,Ge,ht)}getZone(){return this._zone}_findPluginFor(ge){const Ge=this._eventNameToPlugin.get(ge);if(Ge)return Ge;const ht=this._plugins;for(let Mt=0;Mt<ht.length;Mt++){const rn=ht[Mt];if(rn.supports(ge))return this._eventNameToPlugin.set(ge,rn),rn}throw new Error(`No event manager plugin found for event ${ge}`)}}return De.\u0275fac=function(ge){return new(ge||De)(x.LFG(oe),x.LFG(x.R0b))},De.\u0275prov=x.Yz7({token:De,factory:De.\u0275fac}),De})();class Ce{constructor(Te){this._doc=Te}addGlobalEventListener(Te,ge,Ge){const ht=(0,m.q)().getGlobalEventTarget(this._doc,Te);if(!ht)throw new Error(`Unsupported event target ${ht} for event ${ge}`);return this.addEventListener(ht,ge,Ge)}}let ve=(()=>{class De{constructor(){this._stylesSet=new Set}addStyles(ge){const Ge=new Set;ge.forEach(ht=>{this._stylesSet.has(ht)||(this._stylesSet.add(ht),Ge.add(ht))}),this.onStylesAdded(Ge)}onStylesAdded(ge){}getAllStyles(){return Array.from(this._stylesSet)}}return De.\u0275fac=function(ge){return new(ge||De)},De.\u0275prov=x.Yz7({token:De,factory:De.\u0275fac}),De})(),he=(()=>{class De extends ve{constructor(ge){super(),this._doc=ge,this._hostNodes=new Map,this._hostNodes.set(ge.head,[])}_addStylesToHost(ge,Ge,ht){ge.forEach(Mt=>{const rn=this._doc.createElement("style");rn.textContent=Mt,ht.push(Ge.appendChild(rn))})}addHost(ge){const Ge=[];this._addStylesToHost(this._stylesSet,ge,Ge),this._hostNodes.set(ge,Ge)}removeHost(ge){const Ge=this._hostNodes.get(ge);Ge&&Ge.forEach(ae),this._hostNodes.delete(ge)}onStylesAdded(ge){this._hostNodes.forEach((Ge,ht)=>{this._addStylesToHost(ge,ht,Ge)})}ngOnDestroy(){this._hostNodes.forEach(ge=>ge.forEach(ae))}}return De.\u0275fac=function(ge){return new(ge||De)(x.LFG(m.K0))},De.\u0275prov=x.Yz7({token:De,factory:De.\u0275fac}),De})();function ae(De){(0,m.q)().remove(De)}const Ve={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fe=/%COMP%/g;function Ie(De,Te,ge){for(let Ge=0;Ge<Te.length;Ge++){let ht=Te[Ge];Array.isArray(ht)?Ie(De,ht,ge):(ht=ht.replace(fe,De),ge.push(ht))}return ge}function Me(De){return Te=>{if("__ngUnwrap__"===Te)return De;!1===De(Te)&&(Te.preventDefault(),Te.returnValue=!1)}}let We=(()=>{class De{constructor(ge,Ge,ht){this.eventManager=ge,this.sharedStylesHost=Ge,this.appId=ht,this.rendererByCompId=new Map,this.defaultRenderer=new wt(ge)}createRenderer(ge,Ge){if(!ge||!Ge)return this.defaultRenderer;switch(Ge.encapsulation){case x.ifc.Emulated:{let ht=this.rendererByCompId.get(Ge.id);return ht||(ht=new Cn(this.eventManager,this.sharedStylesHost,Ge,this.appId),this.rendererByCompId.set(Ge.id,ht)),ht.applyToHost(ge),ht}case 1:case x.ifc.ShadowDom:return new Dt(this.eventManager,this.sharedStylesHost,ge,Ge);default:if(!this.rendererByCompId.has(Ge.id)){const ht=Ie(Ge.id,Ge.styles,[]);this.sharedStylesHost.addStyles(ht),this.rendererByCompId.set(Ge.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return De.\u0275fac=function(ge){return new(ge||De)(x.LFG(pe),x.LFG(he),x.LFG(x.AFp))},De.\u0275prov=x.Yz7({token:De,factory:De.\u0275fac}),De})();class wt{constructor(Te){this.eventManager=Te,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Te,ge){return ge?document.createElementNS(Ve[ge]||ge,Te):document.createElement(Te)}createComment(Te){return document.createComment(Te)}createText(Te){return document.createTextNode(Te)}appendChild(Te,ge){(Pn(Te)?Te.content:Te).appendChild(ge)}insertBefore(Te,ge,Ge){Te&&(Pn(Te)?Te.content:Te).insertBefore(ge,Ge)}removeChild(Te,ge){Te&&Te.removeChild(ge)}selectRootElement(Te,ge){let Ge="string"==typeof Te?document.querySelector(Te):Te;if(!Ge)throw new Error(`The selector "${Te}" did not match any elements`);return ge||(Ge.textContent=""),Ge}parentNode(Te){return Te.parentNode}nextSibling(Te){return Te.nextSibling}setAttribute(Te,ge,Ge,ht){if(ht){ge=ht+":"+ge;const Mt=Ve[ht];Mt?Te.setAttributeNS(Mt,ge,Ge):Te.setAttribute(ge,Ge)}else Te.setAttribute(ge,Ge)}removeAttribute(Te,ge,Ge){if(Ge){const ht=Ve[Ge];ht?Te.removeAttributeNS(ht,ge):Te.removeAttribute(`${Ge}:${ge}`)}else Te.removeAttribute(ge)}addClass(Te,ge){Te.classList.add(ge)}removeClass(Te,ge){Te.classList.remove(ge)}setStyle(Te,ge,Ge,ht){ht&(x.JOm.DashCase|x.JOm.Important)?Te.style.setProperty(ge,Ge,ht&x.JOm.Important?"important":""):Te.style[ge]=Ge}removeStyle(Te,ge,Ge){Ge&x.JOm.DashCase?Te.style.removeProperty(ge):Te.style[ge]=""}setProperty(Te,ge,Ge){Te[ge]=Ge}setValue(Te,ge){Te.nodeValue=ge}listen(Te,ge,Ge){return"string"==typeof Te?this.eventManager.addGlobalEventListener(Te,ge,Me(Ge)):this.eventManager.addEventListener(Te,ge,Me(Ge))}}function Pn(De){return"TEMPLATE"===De.tagName&&void 0!==De.content}class Cn extends wt{constructor(Te,ge,Ge,ht){super(Te),this.component=Ge;const Mt=Ie(ht+"-"+Ge.id,Ge.styles,[]);ge.addStyles(Mt),this.contentAttr=function Le(De){return"_ngcontent-%COMP%".replace(fe,De)}(ht+"-"+Ge.id),this.hostAttr=function Pe(De){return"_nghost-%COMP%".replace(fe,De)}(ht+"-"+Ge.id)}applyToHost(Te){super.setAttribute(Te,this.hostAttr,"")}createElement(Te,ge){const Ge=super.createElement(Te,ge);return super.setAttribute(Ge,this.contentAttr,""),Ge}}class Dt extends wt{constructor(Te,ge,Ge,ht){super(Te),this.sharedStylesHost=ge,this.hostEl=Ge,this.shadowRoot=Ge.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Mt=Ie(ht.id,ht.styles,[]);for(let rn=0;rn<Mt.length;rn++){const Xe=document.createElement("style");Xe.textContent=Mt[rn],this.shadowRoot.appendChild(Xe)}}nodeOrShadowRoot(Te){return Te===this.hostEl?this.shadowRoot:Te}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Te,ge){return super.appendChild(this.nodeOrShadowRoot(Te),ge)}insertBefore(Te,ge,Ge){return super.insertBefore(this.nodeOrShadowRoot(Te),ge,Ge)}removeChild(Te,ge){return super.removeChild(this.nodeOrShadowRoot(Te),ge)}parentNode(Te){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Te)))}}let kn=(()=>{class De extends Ce{constructor(ge){super(ge)}supports(ge){return!0}addEventListener(ge,Ge,ht){return ge.addEventListener(Ge,ht,!1),()=>this.removeEventListener(ge,Ge,ht)}removeEventListener(ge,Ge,ht){return ge.removeEventListener(Ge,ht)}}return De.\u0275fac=function(ge){return new(ge||De)(x.LFG(m.K0))},De.\u0275prov=x.Yz7({token:De,factory:De.\u0275fac}),De})();const Fn=["alt","control","meta","shift"],en={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vt={alt:De=>De.altKey,control:De=>De.ctrlKey,meta:De=>De.metaKey,shift:De=>De.shiftKey};let sr=(()=>{class De extends Ce{constructor(ge){super(ge)}supports(ge){return null!=De.parseEventName(ge)}addEventListener(ge,Ge,ht){const Mt=De.parseEventName(Ge),rn=De.eventCallback(Mt.fullKey,ht,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(ge,Mt.domEventName,rn))}static parseEventName(ge){const Ge=ge.toLowerCase().split("."),ht=Ge.shift();if(0===Ge.length||"keydown"!==ht&&"keyup"!==ht)return null;const Mt=De._normalizeKey(Ge.pop());let rn="",Xe=Ge.indexOf("code");if(Xe>-1&&(Ge.splice(Xe,1),rn="code."),Fn.forEach(It=>{const St=Ge.indexOf(It);St>-1&&(Ge.splice(St,1),rn+=It+".")}),rn+=Mt,0!=Ge.length||0===Mt.length)return null;const Ke={};return Ke.domEventName=ht,Ke.fullKey=rn,Ke}static matchEventFullKeyCode(ge,Ge){let ht=en[ge.key]||ge.key,Mt="";return Ge.indexOf("code.")>-1&&(ht=ge.code,Mt="code."),!(null==ht||!ht)&&(ht=ht.toLowerCase()," "===ht?ht="space":"."===ht&&(ht="dot"),Fn.forEach(rn=>{rn!==ht&&(0,Vt[rn])(ge)&&(Mt+=rn+".")}),Mt+=ht,Mt===Ge)}static eventCallback(ge,Ge,ht){return Mt=>{De.matchEventFullKeyCode(Mt,ge)&&ht.runGuarded(()=>Ge(Mt))}}static _normalizeKey(ge){return"esc"===ge?"escape":ge}}return De.\u0275fac=function(ge){return new(ge||De)(x.LFG(m.K0))},De.\u0275prov=x.Yz7({token:De,factory:De.\u0275fac}),De})();const Qr=(0,x.eFA)(x._c5,"browser",[{provide:x.Lbi,useValue:m.bD},{provide:x.g9A,useValue:function Bi(){W.makeCurrent()},multi:!0},{provide:m.K0,useFactory:function Lr(){return(0,x.RDi)(document),document},deps:[]}]),zr=new x.OlP(""),Nt=[{provide:x.rWj,useClass:class ${addToWindow(Te){x.dqk.getAngularTestability=(Ge,ht=!0)=>{const Mt=Te.findTestabilityInTree(Ge,ht);if(null==Mt)throw new Error("Could not find testability for element.");return Mt},x.dqk.getAllAngularTestabilities=()=>Te.getAllTestabilities(),x.dqk.getAllAngularRootElements=()=>Te.getAllRootElements(),x.dqk.frameworkStabilizers||(x.dqk.frameworkStabilizers=[]),x.dqk.frameworkStabilizers.push(Ge=>{const ht=x.dqk.getAllAngularTestabilities();let Mt=ht.length,rn=!1;const Xe=function(Ke){rn=rn||Ke,Mt--,0==Mt&&Ge(rn)};ht.forEach(function(Ke){Ke.whenStable(Xe)})})}findTestabilityInTree(Te,ge,Ge){return null==ge?null:Te.getTestability(ge)??(Ge?(0,m.q)().isShadowRoot(ge)?this.findTestabilityInTree(Te,ge.host,!0):this.findTestabilityInTree(Te,ge.parentElement,!0):null)}},deps:[]},{provide:x.lri,useClass:x.dDg,deps:[x.R0b,x.eoX,x.rWj]},{provide:x.dDg,useClass:x.dDg,deps:[x.R0b,x.eoX,x.rWj]}],cr=[{provide:x.zSh,useValue:"root"},{provide:x.qLn,useFactory:function Bn(){return new x.qLn},deps:[]},{provide:oe,useClass:kn,multi:!0,deps:[m.K0,x.R0b,x.Lbi]},{provide:oe,useClass:sr,multi:!0,deps:[m.K0]},{provide:We,useClass:We,deps:[pe,he,x.AFp]},{provide:x.FYo,useExisting:We},{provide:ve,useExisting:he},{provide:he,useClass:he,deps:[m.K0]},{provide:pe,useClass:pe,deps:[oe,x.R0b]},{provide:m.JF,useClass:de,deps:[]},[]];let Gr=(()=>{class De{constructor(ge){}static withServerTransition(ge){return{ngModule:De,providers:[{provide:x.AFp,useValue:ge.appId},{provide:V,useExisting:x.AFp},L]}}}return De.\u0275fac=function(ge){return new(ge||De)(x.LFG(zr,12))},De.\u0275mod=x.oAB({type:De}),De.\u0275inj=x.cJS({providers:[...cr,...Nt],imports:[m.ez,x.hGG]}),De})(),pr=(()=>{class De{constructor(ge){this._doc=ge}getTitle(){return this._doc.title}setTitle(ge){this._doc.title=ge||""}}return De.\u0275fac=function(ge){return new(ge||De)(x.LFG(m.K0))},De.\u0275prov=x.Yz7({token:De,factory:function(ge){let Ge=null;return Ge=ge?new ge:function li(){return new pr((0,x.LFG)(m.K0))}(),Ge},providedIn:"root"}),De})();typeof window<"u"&&window;let Rt=(()=>{class De{}return De.\u0275fac=function(ge){return new(ge||De)},De.\u0275prov=x.Yz7({token:De,factory:function(ge){let Ge=null;return Ge=ge?new(ge||De):x.LFG(xn),Ge},providedIn:"root"}),De})(),xn=(()=>{class De extends Rt{constructor(ge){super(),this._doc=ge}sanitize(ge,Ge){if(null==Ge)return null;switch(ge){case x.q3G.NONE:return Ge;case x.q3G.HTML:return(0,x.qzn)(Ge,"HTML")?(0,x.z3N)(Ge):(0,x.EiD)(this._doc,String(Ge)).toString();case x.q3G.STYLE:return(0,x.qzn)(Ge,"Style")?(0,x.z3N)(Ge):Ge;case x.q3G.SCRIPT:if((0,x.qzn)(Ge,"Script"))return(0,x.z3N)(Ge);throw new Error("unsafe value used in a script context");case x.q3G.URL:return(0,x.qzn)(Ge,"URL")?(0,x.z3N)(Ge):(0,x.mCW)(String(Ge));case x.q3G.RESOURCE_URL:if((0,x.qzn)(Ge,"ResourceURL"))return(0,x.z3N)(Ge);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ge} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ge){return(0,x.JVY)(ge)}bypassSecurityTrustStyle(ge){return(0,x.L6k)(ge)}bypassSecurityTrustScript(ge){return(0,x.eBb)(ge)}bypassSecurityTrustUrl(ge){return(0,x.LAX)(ge)}bypassSecurityTrustResourceUrl(ge){return(0,x.pB0)(ge)}}return De.\u0275fac=function(ge){return new(ge||De)(x.LFG(m.K0))},De.\u0275prov=x.Yz7({token:De,factory:function(ge){let Ge=null;return Ge=ge?new ge:function gn(De){return new xn(De.get(m.K0))}(x.LFG(x.zs3)),Ge},providedIn:"root"}),De})()},4820:($t,Re,H)=>{"use strict";H.d(Re,{gz:()=>Wi,m2:()=>br,F0:()=>$n,rH:()=>za,yS:()=>Pa,Bz:()=>Ir,lC:()=>ea});var m=H(4650),x=H(8996),S=H(9646),W=H(1135),N=H(6805),O=H(9841),Z=H(7272),K=H(9770),V=H(9635),B=H(9751),L=H(576);function $(I,b){const v=(0,L.m)(I)?I:()=>I,A=U=>U.error(v());return new B.y(b?U=>b.schedule(A,0,U):A)}var de=H(515),oe=H(727),pe=H(4482),Ce=H(5403);function ve(){return(0,pe.e)((I,b)=>{let v=null;I._refCount++;const A=(0,Ce.x)(b,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(v=null);const U=I._connection,re=v;v=null,U&&(!re||U===re)&&U.unsubscribe(),b.unsubscribe()});I.subscribe(A),A.closed||(v=I.connect())})}class he extends B.y{constructor(b,v){super(),this.source=b,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,pe.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,b?.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new oe.w0;const v=this.getSubject();b.add(this.source.subscribe((0,Ce.x)(v,void 0,()=>{this._teardown(),v.complete()},A=>{this._teardown(),v.error(A)},()=>this._teardown()))),b.closed&&(this._connection=null,b=oe.w0.EMPTY)}return b}refCount(){return ve()(this)}}var ae=H(7579),Ve=H(6895),fe=H(4004),te=H(3900),ce=H(5698),Qe=H(8675),Ye=H(9300),Le=H(5577),Pe=H(590),Ie=H(4351),Me=H(8505),at=H(8421);function We(I){return(0,pe.e)((b,v)=>{let re,A=null,U=!1;A=b.subscribe((0,Ce.x)(v,void 0,void 0,Ee=>{re=(0,at.Xf)(I(Ee,We(I)(b))),A?(A.unsubscribe(),A=null,re.subscribe(v)):U=!0})),U&&(A.unsubscribe(),A=null,re.subscribe(v))})}var wt=H(5026);function Et(I){return I<=0?()=>de.E:(0,pe.e)((b,v)=>{let A=[];b.subscribe((0,Ce.x)(v,U=>{A.push(U),I<A.length&&A.shift()},()=>{for(const U of A)v.next(U);v.complete()},void 0,()=>{A=null}))})}var hn=H(8068),Pn=H(6590),Cn=H(4671);function Dt(I,b){const v=arguments.length>=2;return A=>A.pipe(I?(0,Ye.h)((U,re)=>I(U,re,A)):Cn.y,Et(1),v?(0,Pn.d)(b):(0,hn.T)(()=>new N.K))}var kn=H(2529),Fn=H(9718);function en(I){return(0,pe.e)((b,v)=>{try{b.subscribe(v)}finally{v.add(I)}})}var Vt=H(8189),sr=H(1481);const Lt="primary",hr=Symbol("RouteTitle");class Xn{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const v=this.params[b];return Array.isArray(v)?v[0]:v}return null}getAll(b){if(this.has(b)){const v=this.params[b];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function fr(I){return new Xn(I)}function mi(I,b,v){const A=v.path.split("/");if(A.length>I.length||"full"===v.pathMatch&&(b.hasChildren()||A.length<I.length))return null;const U={};for(let re=0;re<A.length;re++){const Ee=A[re],Ae=I[re];if(Ee.startsWith(":"))U[Ee.substring(1)]=Ae;else if(Ee!==Ae.path)return null}return{consumed:I.slice(0,A.length),posParams:U}}function Bn(I,b){const v=I?Object.keys(I):void 0,A=b?Object.keys(b):void 0;if(!v||!A||v.length!=A.length)return!1;let U;for(let re=0;re<v.length;re++)if(U=v[re],!Lr(I[U],b[U]))return!1;return!0}function Lr(I,b){if(Array.isArray(I)&&Array.isArray(b)){if(I.length!==b.length)return!1;const v=[...I].sort(),A=[...b].sort();return v.every((U,re)=>A[re]===U)}return I===b}function Rn(I){return Array.prototype.concat.apply([],I)}function Qr(I){return I.length>0?I[I.length-1]:null}function Nt(I,b){for(const v in I)I.hasOwnProperty(v)&&b(I[v],v)}function cr(I){return(0,m.CqO)(I)?I:(0,m.QGY)(I)?(0,x.D)(Promise.resolve(I)):(0,S.of)(I)}const Cs={exact:function Vn(I,b,v){if(!Nn(I.segments,b.segments)||!ni(I.segments,b.segments,v)||I.numberOfChildren!==b.numberOfChildren)return!1;for(const A in b.children)if(!I.children[A]||!Vn(I.children[A],b.children[A],v))return!1;return!0},subset:fn},Ai={exact:function pr(I,b){return Bn(I,b)},subset:function Wt(I,b){return Object.keys(b).length<=Object.keys(I).length&&Object.keys(b).every(v=>Lr(I[v],b[v]))},ignored:()=>!0};function li(I,b,v){return Cs[v.paths](I.root,b.root,v.matrixParams)&&Ai[v.queryParams](I.queryParams,b.queryParams)&&!("exact"===v.fragment&&I.fragment!==b.fragment)}function fn(I,b,v){return gr(I,b,b.segments,v)}function gr(I,b,v,A){if(I.segments.length>v.length){const U=I.segments.slice(0,v.length);return!(!Nn(U,v)||b.hasChildren()||!ni(U,v,A))}if(I.segments.length===v.length){if(!Nn(I.segments,v)||!ni(I.segments,v,A))return!1;for(const U in b.children)if(!I.children[U]||!fn(I.children[U],b.children[U],A))return!1;return!0}{const U=v.slice(0,I.segments.length),re=v.slice(I.segments.length);return!!(Nn(I.segments,U)&&ni(I.segments,U,A)&&I.children[Lt])&&gr(I.children[Lt],b,re,A)}}function ni(I,b,v){return b.every((A,U)=>Ai[v](I[U].parameters,A.parameters))}class wr{constructor(b,v,A){this.root=b,this.queryParams=v,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fr(this.queryParams)),this._queryParamMap}toString(){return qr.serialize(this)}}class sn{constructor(b,v){this.segments=b,this.children=v,this.parent=null,Nt(v,(A,U)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ur(this)}}class qt{constructor(b,v){this.path=b,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=fr(this.parameters)),this._parameterMap}toString(){return Se(this)}}function Nn(I,b){return I.length===b.length&&I.every((v,A)=>v.path===b[A].path)}let Gn=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=m.Yz7({token:I,factory:function(){return new Fr},providedIn:"root"}),I})();class Fr{parse(b){const v=new Te(b);return new wr(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(b){const v=`/${Er(b.root,!0)}`,A=function lt(I){const b=Object.keys(I).map(v=>{const A=I[v];return Array.isArray(A)?A.map(U=>`${Pr(v)}=${Pr(U)}`).join("&"):`${Pr(v)}=${Pr(A)}`}).filter(v=>!!v);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${v}${A}${"string"==typeof b.fragment?`#${function mr(I){return encodeURI(I)}(b.fragment)}`:""}`}}const qr=new Fr;function Ur(I){return I.segments.map(b=>Se(b)).join("/")}function Er(I,b){if(!I.hasChildren())return Ur(I);if(b){const v=I.children[Lt]?Er(I.children[Lt],!1):"",A=[];return Nt(I.children,(U,re)=>{re!==Lt&&A.push(`${re}:${Er(U,!1)}`)}),A.length>0?`${v}(${A.join("//")})`:v}{const v=function xi(I,b){let v=[];return Nt(I.children,(A,U)=>{U===Lt&&(v=v.concat(b(A,U)))}),Nt(I.children,(A,U)=>{U!==Lt&&(v=v.concat(b(A,U)))}),v}(I,(A,U)=>U===Lt?[Er(I.children[Lt],!1)]:[`${U}:${Er(A,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Lt]?`${Ur(I)}/${v[0]}`:`${Ur(I)}/(${v.join("//")})`}}function Br(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pr(I){return Br(I).replace(/%3B/gi,";")}function ri(I){return Br(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ii(I){return decodeURIComponent(I)}function Oe(I){return ii(I.replace(/\+/g,"%20"))}function Se(I){return`${ri(I.path)}${function je(I){return Object.keys(I).map(b=>`;${ri(b)}=${ri(I[b])}`).join("")}(I.parameters)}`}const Je=/^[^\/()?;=#]+/;function Rt(I){const b=I.match(Je);return b?b[0]:""}const gn=/^[^=?&#]+/,nr=/^[^&#]+/;class Te{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(b.length>0||Object.keys(v).length>0)&&(A[Lt]=new sn(b,v)),A}parseSegment(){const b=Rt(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(b),new qt(ii(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const v=Rt(this.remaining);if(!v)return;this.capture(v);let A="";if(this.consumeOptional("=")){const U=Rt(this.remaining);U&&(A=U,this.capture(A))}b[ii(v)]=ii(A)}parseQueryParam(b){const v=function xn(I){const b=I.match(gn);return b?b[0]:""}(this.remaining);if(!v)return;this.capture(v);let A="";if(this.consumeOptional("=")){const Ee=function De(I){const b=I.match(nr);return b?b[0]:""}(this.remaining);Ee&&(A=Ee,this.capture(A))}const U=Oe(v),re=Oe(A);if(b.hasOwnProperty(U)){let Ee=b[U];Array.isArray(Ee)||(Ee=[Ee],b[U]=Ee),Ee.push(re)}else b[U]=re}parseParens(b){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=Rt(this.remaining),U=this.remaining[A.length];if("/"!==U&&")"!==U&&";"!==U)throw new m.vHH(4010,!1);let re;A.indexOf(":")>-1?(re=A.slice(0,A.indexOf(":")),this.capture(re),this.capture(":")):b&&(re=Lt);const Ee=this.parseChildren();v[re]=1===Object.keys(Ee).length?Ee[Lt]:new sn([],Ee),this.consumeOptional("//")}return v}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new m.vHH(4011,!1)}}function ge(I){return I.segments.length>0?new sn([],{[Lt]:I}):I}function Ge(I){const b={};for(const A of Object.keys(I.children)){const re=Ge(I.children[A]);(re.segments.length>0||re.hasChildren())&&(b[A]=re)}return function ht(I){if(1===I.numberOfChildren&&I.children[Lt]){const b=I.children[Lt];return new sn(I.segments.concat(b.segments),b.children)}return I}(new sn(I.segments,b))}function Mt(I){return I instanceof wr}function St(I,b,v,A,U){var re;if(0===v.length)return jn(b.root,b.root,b.root,A,U);const Ee=function wi(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Wn(!0,0,I);let b=0,v=!1;const A=I.reduce((U,re,Ee)=>{if("object"==typeof re&&null!=re){if(re.outlets){const Ae={};return Nt(re.outlets,(it,Ut)=>{Ae[Ut]="string"==typeof it?it.split("/"):it}),[...U,{outlets:Ae}]}if(re.segmentPath)return[...U,re.segmentPath]}return"string"!=typeof re?[...U,re]:0===Ee?(re.split("/").forEach((Ae,it)=>{0==it&&"."===Ae||(0==it&&""===Ae?v=!0:".."===Ae?b++:""!=Ae&&U.push(Ae))}),U):[...U,re]},[]);return new Wn(v,b,A)}(v);if(Ee.toRoot())return jn(b.root,b.root,new sn([],{}),A,U);const it=function Ae(Ue){var Qt;const Tn=function Bs(I,b,v,A){if(I.isAbsolute)return new si(b.root,!0,0);if(-1===A)return new si(v,v===b.root,0);return function Js(I,b,v){let A=I,U=b,re=v;for(;re>U;){if(re-=U,A=A.parent,!A)throw new m.vHH(4005,!1);U=A.segments.length}return new si(A,!1,U-re)}(v,A+(tn(I.commands[0])?0:1),I.numberOfDoubleDots)}(Ee,b,null===(Qt=I.snapshot)||void 0===Qt?void 0:Qt._urlSegment,Ue),Hr=Tn.processChildren?Ss(Tn.segmentGroup,Tn.index,Ee.commands):ci(Tn.segmentGroup,Tn.index,Ee.commands);return jn(b.root,Tn.segmentGroup,Hr,A,U)}(null===(re=I.snapshot)||void 0===re?void 0:re._lastPathIndex);return it}function tn(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function En(I){return"object"==typeof I&&null!=I&&I.outlets}function jn(I,b,v,A,U){let Ee,re={};A&&Nt(A,(it,Ut)=>{re[Ut]=Array.isArray(it)?it.map(Ue=>`${Ue}`):`${it}`}),Ee=I===b?v:xr(I,b,v);const Ae=ge(Ge(Ee));return new wr(Ae,re,U)}function xr(I,b,v){const A={};return Nt(I.children,(U,re)=>{A[re]=U===b?v:xr(U,b,v)}),new sn(I.segments,A)}class Wn{constructor(b,v,A){if(this.isAbsolute=b,this.numberOfDoubleDots=v,this.commands=A,b&&A.length>0&&tn(A[0]))throw new m.vHH(4003,!1);const U=A.find(En);if(U&&U!==Qr(A))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class si{constructor(b,v,A){this.segmentGroup=b,this.processChildren=v,this.index=A}}function ci(I,b,v){if(I||(I=new sn([],{})),0===I.segments.length&&I.hasChildren())return Ss(I,b,v);const A=function hs(I,b,v){let A=0,U=b;const re={match:!1,pathIndex:0,commandIndex:0};for(;U<I.segments.length;){if(A>=v.length)return re;const Ee=I.segments[U],Ae=v[A];if(En(Ae))break;const it=`${Ae}`,Ut=A<v.length-1?v[A+1]:null;if(U>0&&void 0===it)break;if(it&&Ut&&"object"==typeof Ut&&void 0===Ut.outlets){if(!ps(it,Ut,Ee))return re;A+=2}else{if(!ps(it,{},Ee))return re;A++}U++}return{match:!0,pathIndex:U,commandIndex:A}}(I,b,v),U=v.slice(A.commandIndex);if(A.match&&A.pathIndex<I.segments.length){const re=new sn(I.segments.slice(0,A.pathIndex),{});return re.children[Lt]=new sn(I.segments.slice(A.pathIndex),I.children),Ss(re,0,U)}return A.match&&0===U.length?new sn(I.segments,{}):A.match&&!I.hasChildren()?uo(I,b,v):A.match?Ss(I,0,U):uo(I,b,v)}function Ss(I,b,v){if(0===v.length)return new sn(I.segments,{});{const A=function or(I){return En(I[0])?I[0].outlets:{[Lt]:I}}(v),U={};return Nt(A,(re,Ee)=>{"string"==typeof re&&(re=[re]),null!==re&&(U[Ee]=ci(I.children[Ee],b,re))}),Nt(I.children,(re,Ee)=>{void 0===A[Ee]&&(U[Ee]=re)}),new sn(I.segments,U)}}function uo(I,b,v){const A=I.segments.slice(0,b);let U=0;for(;U<v.length;){const re=v[U];if(En(re)){const it=yr(re.outlets);return new sn(A,it)}if(0===U&&tn(v[0])){A.push(new qt(I.segments[b].path,fs(v[0]))),U++;continue}const Ee=En(re)?re.outlets[Lt]:`${re}`,Ae=U<v.length-1?v[U+1]:null;Ee&&Ae&&tn(Ae)?(A.push(new qt(Ee,fs(Ae))),U+=2):(A.push(new qt(Ee,{})),U++)}return new sn(A,{})}function yr(I){const b={};return Nt(I,(v,A)=>{"string"==typeof v&&(v=[v]),null!==v&&(b[A]=uo(new sn([],{}),0,v))}),b}function fs(I){const b={};return Nt(I,(v,A)=>b[A]=`${v}`),b}function ps(I,b,v){return I==v.path&&Bn(b,v.parameters)}class Un{constructor(b,v){this.id=b,this.url=v}}class Xs extends Un{constructor(b,v,A="imperative",U=null){super(b,v),this.type=0,this.navigationTrigger=A,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class br extends Un{constructor(b,v,A){super(b,v),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kr extends Un{constructor(b,v,A,U){super(b,v),this.reason=A,this.code=U,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vs extends Un{constructor(b,v,A,U){super(b,v),this.error=A,this.target=U,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ri extends Un{constructor(b,v,A,U){super(b,v),this.urlAfterRedirects=A,this.state=U,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ns extends Un{constructor(b,v,A,U){super(b,v),this.urlAfterRedirects=A,this.state=U,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nr extends Un{constructor(b,v,A,U,re){super(b,v),this.urlAfterRedirects=A,this.state=U,this.shouldActivate=re,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class As extends Un{constructor(b,v,A,U){super(b,v),this.urlAfterRedirects=A,this.state=U,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mo extends Un{constructor(b,v,A,U){super(b,v),this.urlAfterRedirects=A,this.state=U,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ho{constructor(b){this.route=b,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Li{constructor(b){this.route=b,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jo{constructor(b){this.snapshot=b,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rr{constructor(b){this.snapshot=b,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lo{constructor(b){this.snapshot=b,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zo{constructor(b){this.snapshot=b,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class js{constructor(b,v,A){this.routerEvent=b,this.position=v,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $e{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const v=this.pathFromRoot(b);return v.length>1?v[v.length-2]:null}children(b){const v=nt(b,this._root);return v?v.children.map(A=>A.value):[]}firstChild(b){const v=nt(b,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(b){const v=vt(b,this._root);return v.length<2?[]:v[v.length-2].children.map(U=>U.value).filter(U=>U!==b)}pathFromRoot(b){return vt(b,this._root).map(v=>v.value)}}function nt(I,b){if(I===b.value)return b;for(const v of b.children){const A=nt(I,v);if(A)return A}return null}function vt(I,b){if(I===b.value)return[b];for(const v of b.children){const A=vt(I,v);if(A.length)return A.unshift(b),A}return[]}class At{constructor(b,v){this.value=b,this.children=v}toString(){return`TreeNode(${this.value})`}}function mn(I){const b={};return I&&I.children.forEach(v=>b[v.value.outlet]=v),b}class Yn extends $e{constructor(b,v){super(b),this.snapshot=v,xs(this,b)}toString(){return this.snapshot.toString()}}function ir(I,b){const v=function Tr(I,b){const Ee=new eo([],{},{},"",{},Lt,b,null,I.root,-1,{});return new gs("",new At(Ee,[]))}(I,b),A=new W.X([new qt("",{})]),U=new W.X({}),re=new W.X({}),Ee=new W.X({}),Ae=new W.X(""),it=new Wi(A,U,Ee,Ae,re,Lt,b,v.root);return it.snapshot=v.root,new Yn(new At(it,[]),v)}class Wi{constructor(b,v,A,U,re,Ee,Ae,it){var Ut,Ue;this.url=b,this.params=v,this.queryParams=A,this.fragment=U,this.data=re,this.outlet=Ee,this.component=Ae,this.title=null!==(Ut=null===(Ue=this.data)||void 0===Ue?void 0:Ue.pipe((0,fe.U)(Qt=>Qt[hr])))&&void 0!==Ut?Ut:(0,S.of)(void 0),this._futureSnapshot=it}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,fe.U)(b=>fr(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,fe.U)(b=>fr(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $s(I,b="emptyOnly"){const v=I.pathFromRoot;let A=0;if("always"!==b)for(A=v.length-1;A>=1;){const U=v[A],re=v[A-1];if(U.routeConfig&&""===U.routeConfig.path)A--;else{if(re.component)break;A--}}return function Vi(I){return I.reduce((b,v)=>{var A;return{params:{...b.params,...v.params},data:{...b.data,...v.data},resolve:{...v.data,...b.resolve,...null===(A=v.routeConfig)||void 0===A?void 0:A.data,...v._resolvedData}}},{params:{},data:{},resolve:{}})}(v.slice(A))}class eo{constructor(b,v,A,U,re,Ee,Ae,it,Ut,Ue,Qt,Tn){var Hr;this.url=b,this.params=v,this.queryParams=A,this.fragment=U,this.data=re,this.outlet=Ee,this.component=Ae,this.title=null===(Hr=this.data)||void 0===Hr?void 0:Hr[hr],this.routeConfig=it,this._urlSegment=Ut,this._lastPathIndex=Ue,this._correctedLastPathIndex=Tn??Ue,this._resolve=Qt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends $e{constructor(b,v){super(v),this.url=b,xs(this,v)}toString(){return Xo(this._root)}}function xs(I,b){b.value._routerState=I,b.children.forEach(v=>xs(I,v))}function Xo(I){const b=I.children.length>0?` { ${I.children.map(Xo).join(", ")} } `:"";return`${I.value}${b}`}function rs(I){if(I.snapshot){const b=I.snapshot,v=I._futureSnapshot;I.snapshot=v,Bn(b.queryParams,v.queryParams)||I.queryParams.next(v.queryParams),b.fragment!==v.fragment&&I.fragment.next(v.fragment),Bn(b.params,v.params)||I.params.next(v.params),function Bi(I,b){if(I.length!==b.length)return!1;for(let v=0;v<I.length;++v)if(!Bn(I[v],b[v]))return!1;return!0}(b.url,v.url)||I.url.next(v.url),Bn(b.data,v.data)||I.data.next(v.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Hs(I,b){const v=Bn(I.params,b.params)&&function Dr(I,b){return Nn(I,b)&&I.every((v,A)=>Bn(v.parameters,b[A].parameters))}(I.url,b.url);return v&&!(!I.parent!=!b.parent)&&(!I.parent||Hs(I.parent,b.parent))}function ks(I,b,v){if(v&&I.shouldReuseRoute(b.value,v.value.snapshot)){const A=v.value;A._futureSnapshot=b.value;const U=function zs(I,b,v){return b.children.map(A=>{for(const U of v.children)if(I.shouldReuseRoute(A.value,U.value.snapshot))return ks(I,A,U);return ks(I,A)})}(I,b,v);return new At(A,U)}{if(I.shouldAttach(b.value)){const re=I.retrieve(b.value);if(null!==re){const Ee=re.route;return Ee.value._futureSnapshot=b.value,Ee.children=b.children.map(Ae=>ks(I,Ae)),Ee}}const A=function Co(I){return new Wi(new W.X(I.url),new W.X(I.params),new W.X(I.queryParams),new W.X(I.fragment),new W.X(I.data),I.outlet,I.component,I)}(b.value),U=b.children.map(re=>ks(I,re));return new At(A,U)}}const So="ngNavigationCancelingError";function Go(I,b){const{redirectTo:v,navigationBehaviorOptions:A}=Mt(b)?{redirectTo:b,navigationBehaviorOptions:void 0}:b,U=wa(!1,0,b);return U.url=v,U.navigationBehaviorOptions=A,U}function wa(I,b,v){const A=new Error("NavigationCancelingError: "+(I||""));return A[So]=!0,A.cancellationCode=b,v&&(A.url=v),A}function Ei(I){return ji(I)&&Mt(I.url)}function ji(I){return I&&I[So]}class Aa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ms,this.attachRef=null}}let ms=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(v,A){const U=this.getOrCreateContext(v);U.outlet=A,this.contexts.set(v,U)}onChildOutletDestroyed(v){const A=this.getContext(v);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let A=this.getContext(v);return A||(A=new Aa,this.contexts.set(v,A)),A}getContext(v){return this.contexts.get(v)||null}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Ji=!1;let ea=(()=>{class I{constructor(v,A,U,re,Ee){this.parentContexts=v,this.location=A,this.changeDetector=re,this.environmentInjector=Ee,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=U||Lt,v.onChildOutletCreated(this.name,this)}ngOnDestroy(){var v;(null===(v=this.parentContexts.getContext(this.name))||void 0===v?void 0:v.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const v=this.parentContexts.getContext(this.name);v&&v.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,Ji);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,Ji);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,Ji);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,A){this.activated=v,this._activatedRoute=A,this.location.insert(v.hostView),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,A){if(this.isActivated)throw new m.vHH(4013,Ji);this._activatedRoute=v;const U=this.location,Ee=v._futureSnapshot.component,Ae=this.parentContexts.getOrCreateContext(this.name).children,it=new Yr(v,Ae,U.injector);if(A&&function Ii(I){return!!I.resolveComponentFactory}(A)){const Ut=A.resolveComponentFactory(Ee);this.activated=U.createComponent(Ut,U.length,it)}else this.activated=U.createComponent(Ee,{index:U.length,injector:it,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(v){return new(v||I)(m.Y36(ms),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},I.\u0275dir=m.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),I})();class Yr{constructor(b,v,A){this.route=b,this.childContexts=v,this.parent=A}get(b,v){return b===Wi?this.route:b===ms?this.childContexts:this.parent.get(b,v)}}let Cr=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275cmp=m.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(v,A){1&v&&m._UZ(0,"router-outlet")},dependencies:[ea],encapsulation:2}),I})();function bi(I,b){var v;return I.providers&&!I._injector&&(I._injector=(0,m.MMx)(I.providers,b,`Route: ${I.path}`)),null!==(v=I._injector)&&void 0!==v?v:b}function Ti(I){const b=I.children&&I.children.map(Ti),v=b?{...I,children:b}:{...I};return!v.component&&!v.loadComponent&&(b||v.loadChildren)&&v.outlet&&v.outlet!==Lt&&(v.component=Cr),v}function Jr(I){return I.outlet||Lt}function Mi(I,b){const v=I.filter(A=>Jr(A)===b);return v.push(...I.filter(A=>Jr(A)!==b)),v}function ln(I){var b;if(!I)return null;if(null!==(b=I.routeConfig)&&void 0!==b&&b._injector)return I.routeConfig._injector;for(let v=I.parent;v;v=v.parent){const A=v.routeConfig;if(null!=A&&A._loadedInjector)return A._loadedInjector;if(null!=A&&A._injector)return A._injector}return null}class Ao{constructor(b,v,A,U){this.routeReuseStrategy=b,this.futureState=v,this.currState=A,this.forwardEvent=U}activate(b){const v=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,A,b),rs(this.futureState.root),this.activateChildRoutes(v,A,b)}deactivateChildRoutes(b,v,A){const U=mn(v);b.children.forEach(re=>{const Ee=re.value.outlet;this.deactivateRoutes(re,U[Ee],A),delete U[Ee]}),Nt(U,(re,Ee)=>{this.deactivateRouteAndItsChildren(re,A)})}deactivateRoutes(b,v,A){const U=b.value,re=v?v.value:null;if(U===re)if(U.component){const Ee=A.getContext(U.outlet);Ee&&this.deactivateChildRoutes(b,v,Ee.children)}else this.deactivateChildRoutes(b,v,A);else re&&this.deactivateRouteAndItsChildren(v,A)}deactivateRouteAndItsChildren(b,v){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,v):this.deactivateRouteAndOutlet(b,v)}detachAndStoreRouteSubtree(b,v){const A=v.getContext(b.value.outlet),U=A&&b.value.component?A.children:v,re=mn(b);for(const Ee of Object.keys(re))this.deactivateRouteAndItsChildren(re[Ee],U);if(A&&A.outlet){const Ee=A.outlet.detach(),Ae=A.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:Ee,route:b,contexts:Ae})}}deactivateRouteAndOutlet(b,v){const A=v.getContext(b.value.outlet),U=A&&b.value.component?A.children:v,re=mn(b);for(const Ee of Object.keys(re))this.deactivateRouteAndItsChildren(re[Ee],U);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(b,v,A){const U=mn(v);b.children.forEach(re=>{this.activateRoutes(re,U[re.value.outlet],A),this.forwardEvent(new zo(re.value.snapshot))}),b.children.length&&this.forwardEvent(new rr(b.value.snapshot))}activateRoutes(b,v,A){const U=b.value,re=v?v.value:null;if(rs(U),U===re)if(U.component){const Ae=A.getOrCreateContext(U.outlet);this.activateChildRoutes(b,v,Ae.children)}else this.activateChildRoutes(b,v,A);else if(U.component){const Ae=A.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const it=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),Ae.children.onOutletReAttached(it.contexts),Ae.attachRef=it.componentRef,Ae.route=it.route.value,Ae.outlet&&Ae.outlet.attach(it.componentRef,it.route.value),rs(it.route.value),this.activateChildRoutes(b,null,Ae.children)}else{var Ee;const it=ln(U.snapshot),Ut=null!==(Ee=it?.get(m._Vd))&&void 0!==Ee?Ee:null;Ae.attachRef=null,Ae.route=U,Ae.resolver=Ut,Ae.injector=it,Ae.outlet&&Ae.outlet.activateWith(U,Ae.injector),this.activateChildRoutes(b,null,Ae.children)}}else this.activateChildRoutes(b,null,A)}}class _o{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class xo{constructor(b,v){this.component=b,this.route=v}}function fa(I,b,v){const A=I._root;return vs(A,b?b._root:null,v,[A.value])}function Di(I,b){const v=Symbol(),A=b.get(I,v);return A===v?"function"!=typeof I||(0,m.Z0I)(I)?b.get(I):I:A}function vs(I,b,v,A,U={canDeactivateChecks:[],canActivateChecks:[]}){const re=mn(b);return I.children.forEach(Ee=>{(function Tt(I,b,v,A,U={canDeactivateChecks:[],canActivateChecks:[]}){const re=I.value,Ee=b?b.value:null,Ae=v?v.getContext(I.value.outlet):null;if(Ee&&re.routeConfig===Ee.routeConfig){const it=function Ln(I,b,v){if("function"==typeof v)return v(I,b);switch(v){case"pathParamsChange":return!Nn(I.url,b.url);case"pathParamsOrQueryParamsChange":return!Nn(I.url,b.url)||!Bn(I.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hs(I,b)||!Bn(I.queryParams,b.queryParams);default:return!Hs(I,b)}}(Ee,re,re.routeConfig.runGuardsAndResolvers);it?U.canActivateChecks.push(new _o(A)):(re.data=Ee.data,re._resolvedData=Ee._resolvedData),vs(I,b,re.component?Ae?Ae.children:null:v,A,U),it&&Ae&&Ae.outlet&&Ae.outlet.isActivated&&U.canDeactivateChecks.push(new xo(Ae.outlet.component,Ee))}else Ee&&ho(b,Ae,U),U.canActivateChecks.push(new _o(A)),vs(I,null,re.component?Ae?Ae.children:null:v,A,U)})(Ee,re[Ee.value.outlet],v,A.concat([Ee.value]),U),delete re[Ee.value.outlet]}),Nt(re,(Ee,Ae)=>ho(Ee,v.getContext(Ae),U)),U}function ho(I,b,v){const A=mn(I),U=I.value;Nt(A,(re,Ee)=>{ho(re,U.component?b?b.children.getContext(Ee):null:b,v)}),v.canDeactivateChecks.push(new xo(U.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,U))}function to(I){return"function"==typeof I}function qe(I){return I instanceof N.K||"EmptyError"===I?.name}const dt=Symbol("INITIAL_VALUE");function gt(){return(0,te.w)(I=>(0,O.a)(I.map(b=>b.pipe((0,ce.q)(1),(0,Qe.O)(dt)))).pipe((0,fe.U)(b=>{for(const v of b)if(!0!==v){if(v===dt)return dt;if(!1===v||v instanceof wr)return v}return!0}),(0,Ye.h)(b=>b!==dt),(0,ce.q)(1)))}function Vr(I){return(0,V.z)((0,Me.b)(b=>{if(Mt(b))throw Go(0,b)}),(0,fe.U)(b=>!0===b))}const Or={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function di(I,b,v,A,U){const re=oi(I,b,v);return re.matched?function no(I,b,v,A){const U=b.canMatch;if(!U||0===U.length)return(0,S.of)(!0);const re=U.map(Ee=>{const Ae=Di(Ee,I);return cr(function z(I){return I&&to(I.canMatch)}(Ae)?Ae.canMatch(b,v):I.runInContext(()=>Ae(b,v)))});return(0,S.of)(re).pipe(gt(),Vr())}(A=bi(b,A),b,v).pipe((0,fe.U)(Ee=>!0===Ee?re:{...Or})):(0,S.of)(re)}function oi(I,b,v){var A;if(""===b.path)return"full"===b.pathMatch&&(I.hasChildren()||v.length>0)?{...Or}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const re=(b.matcher||mi)(v,I,b);if(!re)return{...Or};const Ee={};Nt(re.posParams,(it,Ut)=>{Ee[Ut]=it.path});const Ae=re.consumed.length>0?{...Ee,...re.consumed[re.consumed.length-1].parameters}:Ee;return{matched:!0,consumedSegments:re.consumed,remainingSegments:v.slice(re.consumed.length),parameters:Ae,positionalParamSegments:null!==(A=re.posParams)&&void 0!==A?A:{}}}function ws(I,b,v,A,U="corrected"){if(v.length>0&&function Rs(I,b,v){return v.some(A=>ee(I,b,A)&&Jr(A)!==Lt)}(I,v,A)){const Ee=new sn(b,function Po(I,b,v,A){const U={};U[Lt]=A,A._sourceSegment=I,A._segmentIndexShift=b.length;for(const re of v)if(""===re.path&&Jr(re)!==Lt){const Ee=new sn([],{});Ee._sourceSegment=I,Ee._segmentIndexShift=b.length,U[Jr(re)]=Ee}return U}(I,b,A,new sn(v,I.children)));return Ee._sourceSegment=I,Ee._segmentIndexShift=b.length,{segmentGroup:Ee,slicedSegments:[]}}if(0===v.length&&function R(I,b,v){return v.some(A=>ee(I,b,A))}(I,v,A)){const Ee=new sn(I.segments,function ss(I,b,v,A,U,re){const Ee={};for(const Ae of A)if(ee(I,v,Ae)&&!U[Jr(Ae)]){const it=new sn([],{});it._sourceSegment=I,it._segmentIndexShift="legacy"===re?I.segments.length:b.length,Ee[Jr(Ae)]=it}return{...U,...Ee}}(I,b,v,A,I.children,U));return Ee._sourceSegment=I,Ee._segmentIndexShift=b.length,{segmentGroup:Ee,slicedSegments:v}}const re=new sn(I.segments,I.children);return re._sourceSegment=I,re._segmentIndexShift=b.length,{segmentGroup:re,slicedSegments:v}}function ee(I,b,v){return(!(I.hasChildren()||b.length>0)||"full"!==v.pathMatch)&&""===v.path}function k(I,b,v,A){return!!(Jr(I)===A||A!==Lt&&ee(b,v,I))&&("**"===I.path||oi(b,I,v).matched)}function se(I,b,v){return 0===b.length&&!I.children[v]}const be=!1;class ut{constructor(b){this.segmentGroup=b||null}}class ft{constructor(b){this.urlTree=b}}function Zt(I){return $(new ut(I))}function ar(I){return $(new ft(I))}class E{constructor(b,v,A,U,re){this.injector=b,this.configLoader=v,this.urlSerializer=A,this.urlTree=U,this.config=re,this.allowRedirects=!0}apply(){const b=ws(this.urlTree.root,[],[],this.config).segmentGroup,v=new sn(b.segments,b.children);return this.expandSegmentGroup(this.injector,this.config,v,Lt).pipe((0,fe.U)(re=>this.createUrlTree(Ge(re),this.urlTree.queryParams,this.urlTree.fragment))).pipe(We(re=>{if(re instanceof ft)return this.allowRedirects=!1,this.match(re.urlTree);throw re instanceof ut?this.noMatchError(re):re}))}match(b){return this.expandSegmentGroup(this.injector,this.config,b.root,Lt).pipe((0,fe.U)(U=>this.createUrlTree(Ge(U),b.queryParams,b.fragment))).pipe(We(U=>{throw U instanceof ut?this.noMatchError(U):U}))}noMatchError(b){return new m.vHH(4002,be)}createUrlTree(b,v,A){const U=ge(b);return new wr(U,v,A)}expandSegmentGroup(b,v,A,U){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(b,v,A).pipe((0,fe.U)(re=>new sn([],re))):this.expandSegment(b,A,v,A.segments,U,!0)}expandChildren(b,v,A){const U=[];for(const re of Object.keys(A.children))"primary"===re?U.unshift(re):U.push(re);return(0,x.D)(U).pipe((0,Ie.b)(re=>{const Ee=A.children[re],Ae=Mi(v,re);return this.expandSegmentGroup(b,Ae,Ee,re).pipe((0,fe.U)(it=>({segment:it,outlet:re})))}),(0,wt.R)((re,Ee)=>(re[Ee.outlet]=Ee.segment,re),{}),Dt())}expandSegment(b,v,A,U,re,Ee){return(0,x.D)(A).pipe((0,Ie.b)(Ae=>this.expandSegmentAgainstRoute(b,v,A,Ae,U,re,Ee).pipe(We(Ut=>{if(Ut instanceof ut)return(0,S.of)(null);throw Ut}))),(0,Pe.P)(Ae=>!!Ae),We((Ae,it)=>{if(qe(Ae))return se(v,U,re)?(0,S.of)(new sn([],{})):Zt(v);throw Ae}))}expandSegmentAgainstRoute(b,v,A,U,re,Ee,Ae){return k(U,v,re,Ee)?void 0===U.redirectTo?this.matchSegmentAgainstRoute(b,v,U,re,Ee):Ae&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,v,A,U,re,Ee):Zt(v):Zt(v)}expandSegmentAgainstRouteUsingRedirect(b,v,A,U,re,Ee){return"**"===U.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,A,U,Ee):this.expandRegularSegmentAgainstRouteUsingRedirect(b,v,A,U,re,Ee)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,v,A,U){const re=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?ar(re):this.lineralizeSegments(A,re).pipe((0,Le.z)(Ee=>{const Ae=new sn(Ee,{});return this.expandSegment(b,Ae,v,Ee,U,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,v,A,U,re,Ee){const{matched:Ae,consumedSegments:it,remainingSegments:Ut,positionalParamSegments:Ue}=oi(v,U,re);if(!Ae)return Zt(v);const Qt=this.applyRedirectCommands(it,U.redirectTo,Ue);return U.redirectTo.startsWith("/")?ar(Qt):this.lineralizeSegments(U,Qt).pipe((0,Le.z)(Tn=>this.expandSegment(b,v,A,Tn.concat(Ut),Ee,!1)))}matchSegmentAgainstRoute(b,v,A,U,re){return"**"===A.path?(b=bi(A,b),A.loadChildren?(A._loadedRoutes?(0,S.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(b,A)).pipe((0,fe.U)(Ae=>(A._loadedRoutes=Ae.routes,A._loadedInjector=Ae.injector,new sn(U,{})))):(0,S.of)(new sn(U,{}))):di(v,A,U,b).pipe((0,te.w)(({matched:Ee,consumedSegments:Ae,remainingSegments:it})=>{var Ut;return Ee?(b=null!==(Ut=A._injector)&&void 0!==Ut?Ut:b,this.getChildConfig(b,A,U).pipe((0,Le.z)(Qt=>{var Tn;const Hr=null!==(Tn=Qt.injector)&&void 0!==Tn?Tn:b,Fi=Qt.routes,{segmentGroup:zi,slicedSegments:io}=ws(v,Ae,it,Fi),as=new sn(zi.segments,zi.children);if(0===io.length&&as.hasChildren())return this.expandChildren(Hr,Fi,as).pipe((0,fe.U)(so=>new sn(Ae,so)));if(0===Fi.length&&0===io.length)return(0,S.of)(new sn(Ae,{}));const ga=Jr(A)===re;return this.expandSegment(Hr,as,Fi,io,ga?Lt:re,!0).pipe((0,fe.U)(bs=>new sn(Ae.concat(bs.segments),bs.children)))}))):Zt(v)}))}getChildConfig(b,v,A){return v.children?(0,S.of)({routes:v.children,injector:b}):v.loadChildren?void 0!==v._loadedRoutes?(0,S.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function is(I,b,v,A){const U=b.canLoad;if(void 0===U||0===U.length)return(0,S.of)(!0);const re=U.map(Ee=>{const Ae=Di(Ee,I);return cr(function ta(I){return I&&to(I.canLoad)}(Ae)?Ae.canLoad(b,v):I.runInContext(()=>Ae(b,v)))});return(0,S.of)(re).pipe(gt(),Vr())}(b,v,A).pipe((0,Le.z)(U=>U?this.configLoader.loadChildren(b,v).pipe((0,Me.b)(re=>{v._loadedRoutes=re.routes,v._loadedInjector=re.injector})):function Y(I){return $(wa(be,3))}())):(0,S.of)({routes:[],injector:b})}lineralizeSegments(b,v){let A=[],U=v.root;for(;;){if(A=A.concat(U.segments),0===U.numberOfChildren)return(0,S.of)(A);if(U.numberOfChildren>1||!U.children[Lt])return $(new m.vHH(4e3,be));U=U.children[Lt]}}applyRedirectCommands(b,v,A){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),b,A)}applyRedirectCreateUrlTree(b,v,A,U){const re=this.createSegmentGroup(b,v.root,A,U);return new wr(re,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(b,v){const A={};return Nt(b,(U,re)=>{if("string"==typeof U&&U.startsWith(":")){const Ae=U.substring(1);A[re]=v[Ae]}else A[re]=U}),A}createSegmentGroup(b,v,A,U){const re=this.createSegments(b,v.segments,A,U);let Ee={};return Nt(v.children,(Ae,it)=>{Ee[it]=this.createSegmentGroup(b,Ae,A,U)}),new sn(re,Ee)}createSegments(b,v,A,U){return v.map(re=>re.path.startsWith(":")?this.findPosParam(b,re,U):this.findOrReturn(re,A))}findPosParam(b,v,A){const U=A[v.path.substring(1)];if(!U)throw new m.vHH(4001,be);return U}findOrReturn(b,v){let A=0;for(const U of v){if(U.path===b.path)return v.splice(A),U;A++}return b}}class ye{}class rt{constructor(b,v,A,U,re,Ee,Ae,it){this.injector=b,this.rootComponentType=v,this.config=A,this.urlTree=U,this.url=re,this.paramsInheritanceStrategy=Ee,this.relativeLinkResolution=Ae,this.urlSerializer=it}recognize(){const b=ws(this.urlTree.root,[],[],this.config.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,b,Lt).pipe((0,fe.U)(v=>{if(null===v)return null;const A=new eo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),U=new At(A,v),re=new gs(this.url,U);return this.inheritParamsAndData(re._root),re}))}inheritParamsAndData(b){const v=b.value,A=$s(v,this.paramsInheritanceStrategy);v.params=Object.freeze(A.params),v.data=Object.freeze(A.data),b.children.forEach(U=>this.inheritParamsAndData(U))}processSegmentGroup(b,v,A,U){return 0===A.segments.length&&A.hasChildren()?this.processChildren(b,v,A):this.processSegment(b,v,A,A.segments,U)}processChildren(b,v,A){return(0,x.D)(Object.keys(A.children)).pipe((0,Ie.b)(U=>{const re=A.children[U],Ee=Mi(v,U);return this.processSegmentGroup(b,Ee,re,U)}),(0,wt.R)((U,re)=>U&&re?(U.push(...re),U):null),(0,kn.o)(U=>null!==U),(0,Pn.d)(null),Dt(),(0,fe.U)(U=>{if(null===U)return null;const re=qn(U);return function mt(I){I.sort((b,v)=>b.value.outlet===Lt?-1:v.value.outlet===Lt?1:b.value.outlet.localeCompare(v.value.outlet))}(re),re}))}processSegment(b,v,A,U,re){return(0,x.D)(v).pipe((0,Ie.b)(Ee=>{var Ae;return this.processSegmentAgainstRoute(null!==(Ae=Ee._injector)&&void 0!==Ae?Ae:b,Ee,A,U,re)}),(0,Pe.P)(Ee=>!!Ee),We(Ee=>{if(qe(Ee))return se(A,U,re)?(0,S.of)([]):(0,S.of)(null);throw Ee}))}processSegmentAgainstRoute(b,v,A,U,re){if(v.redirectTo||!k(v,A,U,re))return(0,S.of)(null);let Ee;if("**"===v.path){var Ae,it;const Ut=U.length>0?Qr(U).parameters:{},Ue=_n(A)+U.length,Qt=new eo(U,Ut,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,An(v),Jr(v),null!==(Ae=null!==(it=v.component)&&void 0!==it?it:v._loadedComponent)&&void 0!==Ae?Ae:null,v,Mn(A),Ue,Es(v),Ue);Ee=(0,S.of)({snapshot:Qt,consumedSegments:[],remainingSegments:[]})}else Ee=di(A,v,U,b).pipe((0,fe.U)(({matched:Ut,consumedSegments:Ue,remainingSegments:Qt,parameters:Tn})=>{var Hr,Fi;if(!Ut)return null;const zi=_n(A)+Ue.length;return{snapshot:new eo(Ue,Tn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,An(v),Jr(v),null!==(Hr=null!==(Fi=v.component)&&void 0!==Fi?Fi:v._loadedComponent)&&void 0!==Hr?Hr:null,v,Mn(A),zi,Es(v),zi),consumedSegments:Ue,remainingSegments:Qt}}));return Ee.pipe((0,te.w)(Ut=>{var Ue,Qt;if(null===Ut)return(0,S.of)(null);const{snapshot:Tn,consumedSegments:Hr,remainingSegments:Fi}=Ut;b=null!==(Ue=v._injector)&&void 0!==Ue?Ue:b;const zi=null!==(Qt=v._loadedInjector)&&void 0!==Qt?Qt:b,io=function Ot(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(v),{segmentGroup:as,slicedSegments:ga}=ws(A,Hr,Fi,io.filter(bs=>void 0===bs.redirectTo),this.relativeLinkResolution);if(0===ga.length&&as.hasChildren())return this.processChildren(zi,io,as).pipe((0,fe.U)(bs=>null===bs?null:[new At(Tn,bs)]));if(0===io.length&&0===ga.length)return(0,S.of)([new At(Tn,[])]);const fo=Jr(v)===re;return this.processSegment(zi,io,as,ga,fo?Lt:re).pipe((0,fe.U)(bs=>null===bs?null:[new At(Tn,bs)]))}))}}function nn(I){const b=I.value.routeConfig;return b&&""===b.path&&void 0===b.redirectTo}function qn(I){const b=[],v=new Set;for(const A of I){if(!nn(A)){b.push(A);continue}const U=b.find(re=>A.value.routeConfig===re.value.routeConfig);void 0!==U?(U.children.push(...A.children),v.add(U)):b.push(A)}for(const A of v){const U=qn(A.children);b.push(new At(A.value,U))}return b.filter(A=>!v.has(A))}function Mn(I){let b=I;for(;b._sourceSegment;)b=b._sourceSegment;return b}function _n(I){var b;let v=I,A=null!==(b=v._segmentIndexShift)&&void 0!==b?b:0;for(;v._sourceSegment;){var U;v=v._sourceSegment,A+=null!==(U=v._segmentIndexShift)&&void 0!==U?U:0}return A-1}function An(I){return I.data||{}}function Es(I){return I.resolve||{}}function No(I){return"string"==typeof I.title||null===I.title}function Hi(I){return(0,te.w)(b=>{const v=I(b);return v?(0,x.D)(v).pipe((0,fe.U)(()=>b)):(0,S.of)(b)})}let Pi=(()=>{class I{buildTitle(v){let A,U=v.root;for(;void 0!==U;){var re;A=null!==(re=this.getResolvedTitleForRoute(U))&&void 0!==re?re:A,U=U.children.find(Ee=>Ee.outlet===Lt)}return A}getResolvedTitleForRoute(v){return v.data[hr]}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=m.Yz7({token:I,factory:function(){return(0,m.f3M)(Ni)},providedIn:"root"}),I})(),Ni=(()=>{class I extends Pi{constructor(v){super(),this.title=v}updateTitle(v){const A=this.buildTitle(v);void 0!==A&&this.title.setTitle(A)}}return I.\u0275fac=function(v){return new(v||I)(m.LFG(sr.Dx))},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class Ks{}class cn extends class wo{shouldDetach(b){return!1}store(b,v){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,v){return b.routeConfig===v.routeConfig}}{}const on=new m.OlP("",{providedIn:"root",factory:()=>({})}),ai=new m.OlP("ROUTES");let Ps=(()=>{class I{constructor(v,A){this.injector=v,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,S.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const A=cr(v.loadComponent()).pipe((0,Me.b)(re=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=re}),en(()=>{this.componentLoaders.delete(v)})),U=new he(A,()=>new ae.x).pipe(ve());return this.componentLoaders.set(v,U),U}loadChildren(v,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,S.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const re=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,fe.U)(Ae=>{this.onLoadEndListener&&this.onLoadEndListener(A);let it,Ut,Ue=!1;Array.isArray(Ae)?Ut=Ae:(it=Ae.create(v).injector,Ut=Rn(it.get(ai,[],m.XFs.Self|m.XFs.Optional)));return{routes:Ut.map(Ti),injector:it}}),en(()=>{this.childrenLoaders.delete(A)})),Ee=new he(re,()=>new ae.x).pipe(ve());return this.childrenLoaders.set(A,Ee),Ee}loadModuleFactoryOrRoutes(v){return cr(v()).pipe((0,Le.z)(A=>A instanceof m.YKP||Array.isArray(A)?(0,S.of)(A):(0,x.D)(this.compiler.compileModuleAsync(A))))}}return I.\u0275fac=function(v){return new(v||I)(m.LFG(m.zs3),m.LFG(m.Sil))},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class Xi{}class Zs{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,v){return b}}function Ra(I){throw I}function Ea(I,b,v){return b.parse("/")}const Is={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ma(){var I,b;const v=(0,m.f3M)(Gn),A=(0,m.f3M)(ms),U=(0,m.f3M)(Ve.Ye),re=(0,m.f3M)(m.zs3),Ee=(0,m.f3M)(m.Sil),Ae=null!==(I=(0,m.f3M)(ai,{optional:!0}))&&void 0!==I?I:[],it=null!==(b=(0,m.f3M)(on,{optional:!0}))&&void 0!==b?b:{},Ut=(0,m.f3M)(Ni),Ue=(0,m.f3M)(Pi,{optional:!0}),Qt=(0,m.f3M)(Xi,{optional:!0}),Tn=(0,m.f3M)(Ks,{optional:!0}),Hr=new $n(null,v,A,U,re,Ee,Rn(Ae));return Qt&&(Hr.urlHandlingStrategy=Qt),Tn&&(Hr.routeReuseStrategy=Tn),Hr.titleStrategy=Ue??Ut,function Zi(I,b){I.errorHandler&&(b.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(b.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(b.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(b.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(b.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(b.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(b.canceledNavigationResolution=I.canceledNavigationResolution)}(it,Hr),Hr}let $n=(()=>{class I{constructor(v,A,U,re,Ee,Ae,it){this.rootComponentType=v,this.urlSerializer=A,this.rootContexts=U,this.location=re,this.config=it,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ae.x,this.errorHandler=Ra,this.malformedUriErrorHandler=Ea,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,S.of)(void 0),this.urlHandlingStrategy=new Zs,this.routeReuseStrategy=new cn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ee.get(Ps),this.configLoader.onLoadEndListener=Tn=>this.triggerEvent(new Li(Tn)),this.configLoader.onLoadStartListener=Tn=>this.triggerEvent(new Ho(Tn)),this.ngModule=Ee.get(m.h0i),this.console=Ee.get(m.c2e);const Qt=Ee.get(m.R0b);this.isNgZoneEnabled=Qt instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(it),this.currentUrlTree=function Wr(){return new wr(new sn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ir(this.currentUrlTree,this.rootComponentType),this.transitions=new W.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var v;return null===(v=this.location.getState())||void 0===v?void 0:v.\u0275routerPageId}setupNavigations(v){const A=this.events;return v.pipe((0,Ye.h)(U=>0!==U.id),(0,fe.U)(U=>({...U,extractedUrl:this.urlHandlingStrategy.extract(U.rawUrl)})),(0,te.w)(U=>{let re=!1,Ee=!1;return(0,S.of)(U).pipe((0,Me.b)(Ae=>{this.currentNavigation={id:Ae.id,initialUrl:Ae.rawUrl,extractedUrl:Ae.extractedUrl,trigger:Ae.source,extras:Ae.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,te.w)(Ae=>{const it=this.browserUrlTree.toString(),Ut=!this.navigated||Ae.extractedUrl.toString()!==it||it!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ut)&&this.urlHandlingStrategy.shouldProcessUrl(Ae.rawUrl))return ro(Ae.source)&&(this.browserUrlTree=Ae.extractedUrl),(0,S.of)(Ae).pipe((0,te.w)(Qt=>{const Tn=this.transitions.getValue();return A.next(new Xs(Qt.id,this.serializeUrl(Qt.extractedUrl),Qt.source,Qt.restoredState)),Tn!==this.transitions.getValue()?de.E:Promise.resolve(Qt)}),function F(I,b,v,A){return(0,te.w)(U=>function y(I,b,v,A,U){return new E(I,b,v,A,U).apply()}(I,b,v,U.extractedUrl,A).pipe((0,fe.U)(re=>({...U,urlAfterRedirects:re}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Me.b)(Qt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Qt.urlAfterRedirects},U.urlAfterRedirects=Qt.urlAfterRedirects}),function qi(I,b,v,A,U,re){return(0,Le.z)(Ee=>function Fe(I,b,v,A,U,re,Ee="emptyOnly",Ae="legacy"){return new rt(I,b,v,A,U,Ee,Ae,re).recognize().pipe((0,te.w)(it=>null===it?function ke(I){return new B.y(b=>b.error(I))}(new ye):(0,S.of)(it)))}(I,b,v,Ee.urlAfterRedirects,A.serialize(Ee.urlAfterRedirects),A,U,re).pipe((0,fe.U)(Ae=>({...Ee,targetSnapshot:Ae}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Me.b)(Qt=>{if(U.targetSnapshot=Qt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Qt.extras.skipLocationChange){const Hr=this.urlHandlingStrategy.merge(Qt.urlAfterRedirects,Qt.rawUrl);this.setBrowserUrl(Hr,Qt)}this.browserUrlTree=Qt.urlAfterRedirects}const Tn=new Ri(Qt.id,this.serializeUrl(Qt.extractedUrl),this.serializeUrl(Qt.urlAfterRedirects),Qt.targetSnapshot);A.next(Tn)}));if(Ut&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Tn,extractedUrl:Hr,source:Fi,restoredState:zi,extras:io}=Ae,as=new Xs(Tn,this.serializeUrl(Hr),Fi,zi);A.next(as);const ga=ir(Hr,this.rootComponentType).snapshot;return U={...Ae,targetSnapshot:ga,urlAfterRedirects:Hr,extras:{...io,skipLocationChange:!1,replaceUrl:!1}},(0,S.of)(U)}return this.rawUrlTree=Ae.rawUrl,Ae.resolve(null),de.E}),(0,Me.b)(Ae=>{const it=new ns(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot);this.triggerEvent(it)}),(0,fe.U)(Ae=>U={...Ae,guards:fa(Ae.targetSnapshot,Ae.currentSnapshot,this.rootContexts)}),function Kt(I,b){return(0,Le.z)(v=>{const{targetSnapshot:A,currentSnapshot:U,guards:{canActivateChecks:re,canDeactivateChecks:Ee}}=v;return 0===Ee.length&&0===re.length?(0,S.of)({...v,guardsResult:!0}):function Pt(I,b,v,A){return(0,x.D)(I).pipe((0,Le.z)(U=>function Zr(I,b,v,A,U){const re=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!re||0===re.length)return(0,S.of)(!0);const Ee=re.map(Ae=>{var it;const Ut=null!==(it=ln(b))&&void 0!==it?it:U,Ue=Di(Ae,Ut);return cr(function q(I){return I&&to(I.canDeactivate)}(Ue)?Ue.canDeactivate(I,b,v,A):Ut.runInContext(()=>Ue(I,b,v,A))).pipe((0,Pe.P)())});return(0,S.of)(Ee).pipe(gt())}(U.component,U.route,v,b,A)),(0,Pe.P)(U=>!0!==U,!0))}(Ee,A,U,I).pipe((0,Le.z)(Ae=>Ae&&function Xr(I){return"boolean"==typeof I}(Ae)?function bn(I,b,v,A){return(0,x.D)(b).pipe((0,Ie.b)(U=>(0,Z.z)(function yi(I,b){return null!==I&&b&&b(new Jo(I)),(0,S.of)(!0)}(U.route.parent,A),function On(I,b){return null!==I&&b&&b(new lo(I)),(0,S.of)(!0)}(U.route,A),function ei(I,b,v){const A=b[b.length-1],re=b.slice(0,b.length-1).reverse().map(Ee=>function Ro(I){const b=I.routeConfig?I.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:I,guards:b}:null}(Ee)).filter(Ee=>null!==Ee).map(Ee=>(0,K.P)(()=>{const Ae=Ee.guards.map(it=>{var Ut;const Ue=null!==(Ut=ln(Ee.node))&&void 0!==Ut?Ut:v,Qt=Di(it,Ue);return cr(function _s(I){return I&&to(I.canActivateChild)}(Qt)?Qt.canActivateChild(A,I):Ue.runInContext(()=>Qt(A,I))).pipe((0,Pe.P)())});return(0,S.of)(Ae).pipe(gt())}));return(0,S.of)(re).pipe(gt())}(I,U.path,v),function Sr(I,b,v){const A=b.routeConfig?b.routeConfig.canActivate:null;if(!A||0===A.length)return(0,S.of)(!0);const U=A.map(re=>(0,K.P)(()=>{var Ee;const Ae=null!==(Ee=ln(b))&&void 0!==Ee?Ee:v,it=Di(re,Ae);return cr(function Mo(I){return I&&to(I.canActivate)}(it)?it.canActivate(b,I):Ae.runInContext(()=>it(b,I))).pipe((0,Pe.P)())}));return(0,S.of)(U).pipe(gt())}(I,U.route,v))),(0,Pe.P)(U=>!0!==U,!0))}(A,re,I,b):(0,S.of)(Ae)),(0,fe.U)(Ae=>({...v,guardsResult:Ae})))})}(this.ngModule.injector,Ae=>this.triggerEvent(Ae)),(0,Me.b)(Ae=>{if(U.guardsResult=Ae.guardsResult,Mt(Ae.guardsResult))throw Go(0,Ae.guardsResult);const it=new Nr(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot,!!Ae.guardsResult);this.triggerEvent(it)}),(0,Ye.h)(Ae=>!!Ae.guardsResult||(this.restoreHistory(Ae),this.cancelNavigationTransition(Ae,"",3),!1)),Hi(Ae=>{if(Ae.guards.canActivateChecks.length)return(0,S.of)(Ae).pipe((0,Me.b)(it=>{const Ut=new As(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot);this.triggerEvent(Ut)}),(0,te.w)(it=>{let Ut=!1;return(0,S.of)(it).pipe(function hi(I,b){return(0,Le.z)(v=>{const{targetSnapshot:A,guards:{canActivateChecks:U}}=v;if(!U.length)return(0,S.of)(v);let re=0;return(0,x.D)(U).pipe((0,Ie.b)(Ee=>function na(I,b,v,A){const U=I.routeConfig,re=I._resolve;return void 0!==U?.title&&!No(U)&&(re[hr]=U.title),function Ws(I,b,v,A){const U=function Ki(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===U.length)return(0,S.of)({});const re={};return(0,x.D)(U).pipe((0,Le.z)(Ee=>function Ms(I,b,v,A){var U;const re=null!==(U=ln(b))&&void 0!==U?U:A,Ee=Di(I,re);return cr(Ee.resolve?Ee.resolve(b,v):re.runInContext(()=>Ee(b,v)))}(I[Ee],b,v,A).pipe((0,Pe.P)(),(0,Me.b)(Ae=>{re[Ee]=Ae}))),Et(1),(0,Fn.h)(re),We(Ee=>qe(Ee)?de.E:$(Ee)))}(re,I,b,A).pipe((0,fe.U)(Ee=>(I._resolvedData=Ee,I.data=$s(I,v).resolve,U&&No(U)&&(I.data[hr]=U.title),null)))}(Ee.route,A,I,b)),(0,Me.b)(()=>re++),Et(1),(0,Le.z)(Ee=>re===U.length?(0,S.of)(v):de.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Me.b)({next:()=>Ut=!0,complete:()=>{Ut||(this.restoreHistory(it),this.cancelNavigationTransition(it,"",2))}}))}),(0,Me.b)(it=>{const Ut=new mo(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot);this.triggerEvent(Ut)}))}),Hi(Ae=>{const it=Ut=>{var Ue;const Qt=[];null!==(Ue=Ut.routeConfig)&&void 0!==Ue&&Ue.loadComponent&&!Ut.routeConfig._loadedComponent&&Qt.push(this.configLoader.loadComponent(Ut.routeConfig).pipe((0,Me.b)(Tn=>{Ut.component=Tn}),(0,fe.U)(()=>{})));for(const Tn of Ut.children)Qt.push(...it(Tn));return Qt};return(0,O.a)(it(Ae.targetSnapshot.root)).pipe((0,Pn.d)(),(0,ce.q)(1))}),Hi(()=>this.afterPreactivation()),(0,fe.U)(Ae=>{const it=function yo(I,b,v){const A=ks(I,b._root,v?v._root:void 0);return new Yn(A,b)}(this.routeReuseStrategy,Ae.targetSnapshot,Ae.currentRouterState);return U={...Ae,targetRouterState:it}}),(0,Me.b)(Ae=>{this.currentUrlTree=Ae.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ae.urlAfterRedirects,Ae.rawUrl),this.routerState=Ae.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ae.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ae),this.browserUrlTree=Ae.urlAfterRedirects)}),((I,b,v)=>(0,fe.U)(A=>(new Ao(b,A.targetRouterState,A.currentRouterState,v).activate(I),A)))(this.rootContexts,this.routeReuseStrategy,Ae=>this.triggerEvent(Ae)),(0,Me.b)({next(){re=!0},complete(){re=!0}}),en(()=>{var Ae;re||Ee||this.cancelNavigationTransition(U,"",1),(null===(Ae=this.currentNavigation)||void 0===Ae?void 0:Ae.id)===U.id&&(this.currentNavigation=null)}),We(Ae=>{if(Ee=!0,ji(Ae)){Ei(Ae)||(this.navigated=!0,this.restoreHistory(U,!0));const Ut=new Kr(U.id,this.serializeUrl(U.extractedUrl),Ae.message,Ae.cancellationCode);if(A.next(Ut),Ei(Ae)){const Ue=this.urlHandlingStrategy.merge(Ae.url,this.rawUrlTree),Qt={skipLocationChange:U.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ro(U.source)};this.scheduleNavigation(Ue,"imperative",null,Qt,{resolve:U.resolve,reject:U.reject,promise:U.promise})}else U.resolve(!1)}else{var it;this.restoreHistory(U,!0);const Ut=new Vs(U.id,this.serializeUrl(U.extractedUrl),Ae,null!==(it=U.targetSnapshot)&&void 0!==it?it:void 0);A.next(Ut);try{U.resolve(this.errorHandler(Ae))}catch(Ue){U.reject(Ue)}}return de.E}))}))}resetRootComponentType(v){this.rootComponentType=v,this.routerState.root.component=this.rootComponentType}setTransition(v){this.transitions.next({...this.transitions.value,...v})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const A="popstate"===v.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{var U;const re={replaceUrl:!0},Ee=null!==(U=v.state)&&void 0!==U&&U.navigationId?v.state:null;if(Ee){const it={...Ee};delete it.navigationId,delete it.\u0275routerPageId,0!==Object.keys(it).length&&(re.state=it)}const Ae=this.parseUrl(v.url);this.scheduleNavigation(Ae,A,Ee,re)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(v){this.events.next(v)}resetConfig(v){this.config=v.map(Ti),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,A={}){const{relativeTo:U,queryParams:re,fragment:Ee,queryParamsHandling:Ae,preserveFragment:it}=A,Ut=U||this.routerState.root,Ue=it?this.currentUrlTree.fragment:Ee;let Qt=null;switch(Ae){case"merge":Qt={...this.currentUrlTree.queryParams,...re};break;case"preserve":Qt=this.currentUrlTree.queryParams;break;default:Qt=re||null}return null!==Qt&&(Qt=this.removeEmptyProps(Qt)),St(Ut,this.currentUrlTree,v,Qt,Ue??null)}navigateByUrl(v,A={skipLocationChange:!1}){const U=Mt(v)?v:this.parseUrl(v),re=this.urlHandlingStrategy.merge(U,this.rawUrlTree);return this.scheduleNavigation(re,"imperative",null,A)}navigate(v,A={skipLocationChange:!1}){return function pa(I){for(let b=0;b<I.length;b++){if(null==I[b])throw new m.vHH(4008,false)}}(v),this.navigateByUrl(this.createUrlTree(v,A),A)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let A;try{A=this.urlSerializer.parse(v)}catch(U){A=this.malformedUriErrorHandler(U,this.urlSerializer,v)}return A}isActive(v,A){let U;if(U=!0===A?{...Is}:!1===A?{...qo}:A,Mt(v))return li(this.currentUrlTree,v,U);const re=this.parseUrl(v);return li(this.currentUrlTree,re,U)}removeEmptyProps(v){return Object.keys(v).reduce((A,U)=>{const re=v[U];return null!=re&&(A[U]=re),A},{})}processNavigations(){this.navigations.subscribe(v=>{var A;this.navigated=!0,this.lastSuccessfulId=v.id,this.currentPageId=v.targetPageId,this.events.next(new br(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(A=this.titleStrategy)||void 0===A||A.updateTitle(this.routerState.snapshot),v.resolve(!0)},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}scheduleNavigation(v,A,U,re,Ee){if(this.disposed)return Promise.resolve(!1);let Ae,it,Ut;Ee?(Ae=Ee.resolve,it=Ee.reject,Ut=Ee.promise):Ut=new Promise((Fi,zi)=>{Ae=Fi,it=zi});const Ue=++this.navigationId;let Qt;if("computed"===this.canceledNavigationResolution)if(0===this.currentPageId&&(U=this.location.getState()),U&&U.\u0275routerPageId)Qt=U.\u0275routerPageId;else if(re.replaceUrl||re.skipLocationChange){var Tn;Qt=null!==(Tn=this.browserPageId)&&void 0!==Tn?Tn:0}else{var Hr;Qt=(null!==(Hr=this.browserPageId)&&void 0!==Hr?Hr:0)+1}else Qt=0;return this.setTransition({id:Ue,targetPageId:Qt,source:A,restoredState:U,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:v,extras:re,resolve:Ae,reject:it,promise:Ut,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ut.catch(Fi=>Promise.reject(Fi))}setBrowserUrl(v,A){const U=this.urlSerializer.serialize(v),re={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(U)||A.extras.replaceUrl?this.location.replaceState(U,"",re):this.location.go(U,"",re)}restoreHistory(v,A=!1){if("computed"===this.canceledNavigationResolution){var U,re;const Ee=this.currentPageId-v.targetPageId;"popstate"!==v.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(U=this.currentNavigation)||void 0===U?void 0:U.finalUrl)||0===Ee?this.currentUrlTree===(null===(re=this.currentNavigation)||void 0===re?void 0:re.finalUrl)&&0===Ee&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ee)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(v,A,U){const re=new Kr(v.id,this.serializeUrl(v.extractedUrl),A,U);this.triggerEvent(re),v.resolve(!1)}generateNgRouterState(v,A){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:A}:{navigationId:v}}}return I.\u0275fac=function(v){m.$Z()},I.\u0275prov=m.Yz7({token:I,factory:function(){return Ma()},providedIn:"root"}),I})();function ro(I){return"imperative"!==I}let za=(()=>{class I{constructor(v,A,U,re,Ee){this.router=v,this.route=A,this.tabIndexAttribute=U,this.renderer=re,this.el=Ee,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ae.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(v){this._preserveFragment=(0,m.D6c)(v)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(v){this._skipLocationChange=(0,m.D6c)(v)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(v){this._replaceUrl=(0,m.D6c)(v)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(v){if(null!=this.tabIndexAttribute)return;const A=this.renderer,U=this.el.nativeElement;null!==v?A.setAttribute(U,"tabindex",v):A.removeAttribute(U,"tabindex")}ngOnChanges(v){this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(v){return new(v||I)(m.Y36($n),m.Y36(Wi),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},I.\u0275dir=m.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(v,A){1&v&&m.NdJ("click",function(){return A.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),I})(),Pa=(()=>{class I{constructor(v,A,U){this.router=v,this.route=A,this.locationStrategy=U,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ae.x,this.subscription=v.events.subscribe(re=>{re instanceof br&&this.updateTargetUrlAndHref()})}set preserveFragment(v){this._preserveFragment=(0,m.D6c)(v)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(v){this._skipLocationChange=(0,m.D6c)(v)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(v){this._replaceUrl=(0,m.D6c)(v)}get replaceUrl(){return this._replaceUrl}set routerLink(v){this.commands=null!=v?Array.isArray(v)?v:[v]:null}ngOnChanges(v){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(v,A,U,re,Ee){return!!(0!==v||A||U||re||Ee||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(v){return new(v||I)(m.Y36($n),m.Y36(Wi),m.Y36(Ve.S$))},I.\u0275dir=m.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(v,A){1&v&&m.NdJ("click",function(re){return A.onClick(re.button,re.ctrlKey,re.shiftKey,re.altKey,re.metaKey)}),2&v&&m.uIk("target",A.target)("href",A.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),I})();class Ar{}let wn=(()=>{class I{constructor(v,A,U,re,Ee){this.router=v,this.injector=U,this.preloadingStrategy=re,this.loader=Ee}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ye.h)(v=>v instanceof br),(0,Ie.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,A){const U=[];for(const it of A){var re,Ee;it.providers&&!it._injector&&(it._injector=(0,m.MMx)(it.providers,v,`Route: ${it.path}`));const Ut=null!==(re=it._injector)&&void 0!==re?re:v,Ue=null!==(Ee=it._loadedInjector)&&void 0!==Ee?Ee:Ut;if(it.loadChildren&&!it._loadedRoutes&&void 0===it.canLoad||it.loadComponent&&!it._loadedComponent)U.push(this.preloadConfig(Ut,it));else if(it.children||it._loadedRoutes){var Ae;U.push(this.processRoutes(Ue,null!==(Ae=it.children)&&void 0!==Ae?Ae:it._loadedRoutes))}}return(0,x.D)(U).pipe((0,Vt.J)())}preloadConfig(v,A){return this.preloadingStrategy.preload(A,()=>{let U;U=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(v,A):(0,S.of)(null);const re=U.pipe((0,Le.z)(Ee=>{var Ae;return null===Ee?(0,S.of)(void 0):(A._loadedRoutes=Ee.routes,A._loadedInjector=Ee.injector,this.processRoutes(null!==(Ae=Ee.injector)&&void 0!==Ae?Ae:v,Ee.routes))}));if(A.loadComponent&&!A._loadedComponent){const Ee=this.loader.loadComponent(A);return(0,x.D)([re,Ee]).pipe((0,Vt.J)())}return re})}}return I.\u0275fac=function(v){return new(v||I)(m.LFG($n),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(Ar),m.LFG(Ps))},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Na=new m.OlP("");let Ht=(()=>{class I{constructor(v,A,U={}){this.router=v,this.viewportScroller=A,this.options=U,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},U.scrollPositionRestoration=U.scrollPositionRestoration||"disabled",U.anchorScrolling=U.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(v=>{v instanceof Xs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof br&&(this.lastId=v.id,this.scheduleScrollEvent(v,this.router.parseUrl(v.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(v=>{v instanceof js&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,A){this.router.triggerEvent(new js(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(v){m.$Z()},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac}),I})();function Oo(I,b){return{\u0275kind:I,\u0275providers:b}}function ra(I){return[{provide:ai,multi:!0,useValue:I}]}function nu(){const I=(0,m.f3M)(m.zs3);return b=>{var v,A;const U=I.get(m.z2F);if(b!==U.components[0])return;const re=I.get($n),Ee=I.get(vi);1===I.get(Eu)&&re.initialNavigation(),null===(v=I.get(zu,null,m.XFs.Optional))||void 0===v||v.setUpPreloading(),null===(A=I.get(Na,null,m.XFs.Optional))||void 0===A||A.init(),re.resetRootComponentType(U.componentTypes[0]),Ee.next(),Ee.complete()}}const vi=new m.OlP("",{factory:()=>new ae.x}),Eu=new m.OlP("",{providedIn:"root",factory:()=>1});const zu=new m.OlP("");function hl(I){return Oo(0,[{provide:zu,useExisting:wn},{provide:Ar,useExisting:I}])}const fi=new m.OlP("ROUTER_FORROOT_GUARD"),Yt=[Ve.Ye,{provide:Gn,useClass:Fr},{provide:$n,useFactory:Ma},ms,{provide:Wi,useFactory:function Rr(I){return I.routerState.root},deps:[$n]},Ps];function Oa(){return new m.PXZ("Router",$n)}let Ir=(()=>{class I{constructor(v){}static forRoot(v,A){return{ngModule:I,providers:[Yt,[],ra(v),{provide:fi,useFactory:Io,deps:[[$n,new m.FiY,new m.tp0]]},{provide:on,useValue:A||{}},null!=A&&A.useHash?{provide:Ve.S$,useClass:Ve.Do}:{provide:Ve.S$,useClass:Ve.b0},{provide:Na,useFactory:()=>{const I=(0,m.f3M)($n),b=(0,m.f3M)(Ve.EM),v=(0,m.f3M)(on);return v.scrollOffset&&b.setOffset(v.scrollOffset),new Ht(I,b,v)}},null!=A&&A.preloadingStrategy?hl(A.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:Oa},null!=A&&A.initialNavigation?Ga(A):[],[{provide:Ko,useFactory:nu},{provide:m.tb,multi:!0,useExisting:Ko}]]}}static forChild(v){return{ngModule:I,providers:[ra(v)]}}}return I.\u0275fac=function(v){return new(v||I)(m.LFG(fi,8))},I.\u0275mod=m.oAB({type:I}),I.\u0275inj=m.cJS({imports:[Cr]}),I})();function Io(I){return"guarded"}function Ga(I){return["disabled"===I.initialNavigation?Oo(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const b=(0,m.f3M)($n);return()=>{b.setUpLocationChangeListener()}}},{provide:Eu,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?Oo(2,[{provide:Eu,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:b=>{const v=b.get(Ve.V_,Promise.resolve());let A=!1;return()=>v.then(()=>new Promise(re=>{const Ee=b.get($n),Ae=b.get(vi);(function U(re){b.get($n).events.pipe((0,Ye.h)(Ae=>Ae instanceof br||Ae instanceof Kr||Ae instanceof Vs),(0,fe.U)(Ae=>Ae instanceof br||Ae instanceof Kr&&(0===Ae.code||1===Ae.code)&&null),(0,Ye.h)(Ae=>null!==Ae),(0,ce.q)(1)).subscribe(()=>{re()})})(()=>{re(!0),A=!0}),Ee.afterPreactivation=()=>(re(!0),A||Ae.closed?(0,S.of)(void 0):Ae),Ee.initialNavigation()}))}}]).\u0275providers:[]]}const Ko=new m.OlP("")},3942:($t,Re,H)=>{"use strict";H.d(Re,{Z:()=>pe});var m=H(2090),x=H(4859),S=H(6881),W=H(1877);class N{constructor(ve,he){this._delegate=ve,this.firebase=he,(0,S._addComponent)(ve,new x.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,S.deleteApp)(this._delegate)))}_getService(ve,he=S._DEFAULT_ENTRY_NAME){var ae;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(ve);return!Ve.isInitialized()&&"EXPLICIT"===(null===(ae=Ve.getComponent())||void 0===ae?void 0:ae.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:he})}_removeServiceInstance(ve,he=S._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(he)}_addComponent(ve){(0,S._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,S._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Z=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function V(){const Ce=function K(Ce){const ve={},he={__esModule:!0,initializeApp:function fe(Ye,Le={}){const Pe=S.initializeApp(Ye,Le);if((0,m.r3)(ve,Pe.name))return ve[Pe.name];const Ie=new Ce(Pe,he);return ve[Pe.name]=Ie,Ie},app:Ve,registerVersion:S.registerVersion,setLogLevel:S.setLogLevel,onLog:S.onLog,apps:null,SDK_VERSION:S.SDK_VERSION,INTERNAL:{registerComponent:function ce(Ye){const Le=Ye.name,Pe=Le.replace("-compat","");if(S._registerComponent(Ye)&&"PUBLIC"===Ye.type){const Ie=(Me=Ve())=>{if("function"!=typeof Me[Pe])throw Z.create("invalid-app-argument",{appName:Le});return Me[Pe]()};void 0!==Ye.serviceProps&&(0,m.ZB)(Ie,Ye.serviceProps),he[Pe]=Ie,Ce.prototype[Pe]=function(...Me){return this._getService.bind(this,Le).apply(this,Ye.multipleInstances?Me:[])}}return"PUBLIC"===Ye.type?he[Pe]:null},removeApp:function ae(Ye){delete ve[Ye]},useAsService:function Qe(Ye,Le){return"serverAuth"===Le?null:Le},modularAPIs:S}};function Ve(Ye){if(!(0,m.r3)(ve,Ye=Ye||S._DEFAULT_ENTRY_NAME))throw Z.create("no-app",{appName:Ye});return ve[Ye]}return he.default=he,Object.defineProperty(he,"apps",{get:function te(){return Object.keys(ve).map(Ye=>ve[Ye])}}),Ve.App=Ce,he}(N);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:V,extendNamespace:function ve(he){(0,m.ZB)(Ce,he)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Ce}(),L=new W.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){L.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&L.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const pe=B;!function oe(Ce){(0,S.registerVersion)("@firebase/app-compat","0.2.10",Ce)}()},6881:($t,Re,H)=>{"use strict";H.r(Re),H.d(Re,{FirebaseError:()=>W.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>Ai,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>fn,_apps:()=>pr,_clearComponents:()=>sn,_components:()=>Vn,_getProvider:()=>ni,_registerComponent:()=>gr,_removeServiceInstance:()=>wr,deleteApp:()=>Ur,getApp:()=>Fr,getApps:()=>qr,initializeApp:()=>Gn,onLog:()=>Pr,registerVersion:()=>Br,setLogLevel:()=>mr});var m=H(5861),x=H(4859),S=H(1877),W=H(2090);let O,Z;const B=new WeakMap,L=new WeakMap,$=new WeakMap,de=new WeakMap,oe=new WeakMap;let ve={get(Xe,Ke,It){if(Xe instanceof IDBTransaction){if("done"===Ke)return L.get(Xe);if("objectStoreNames"===Ke)return Xe.objectStoreNames||$.get(Xe);if("store"===Ke)return It.objectStoreNames[1]?void 0:It.objectStore(It.objectStoreNames[0])}return fe(Xe[Ke])},set:(Xe,Ke,It)=>(Xe[Ke]=It,!0),has:(Xe,Ke)=>Xe instanceof IDBTransaction&&("done"===Ke||"store"===Ke)||Ke in Xe};function Ve(Xe){return"function"==typeof Xe?function ae(Xe){return Xe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function V(){return Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Xe)?function(...Ke){return Xe.apply(te(this),Ke),fe(B.get(this))}:function(...Ke){return fe(Xe.apply(te(this),Ke))}:function(Ke,...It){const St=Xe.call(te(this),Ke,...It);return $.set(St,Ke.sort?Ke.sort():[Ke]),fe(St)}}(Xe):(Xe instanceof IDBTransaction&&function Ce(Xe){if(L.has(Xe))return;const Ke=new Promise((It,St)=>{const tn=()=>{Xe.removeEventListener("complete",En),Xe.removeEventListener("error",jn),Xe.removeEventListener("abort",jn)},En=()=>{It(),tn()},jn=()=>{St(Xe.error||new DOMException("AbortError","AbortError")),tn()};Xe.addEventListener("complete",En),Xe.addEventListener("error",jn),Xe.addEventListener("abort",jn)});L.set(Xe,Ke)}(Xe),((Xe,Ke)=>Ke.some(It=>Xe instanceof It))(Xe,function K(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Xe,ve):Xe)}function fe(Xe){if(Xe instanceof IDBRequest)return function pe(Xe){const Ke=new Promise((It,St)=>{const tn=()=>{Xe.removeEventListener("success",En),Xe.removeEventListener("error",jn)},En=()=>{It(fe(Xe.result)),tn()},jn=()=>{St(Xe.error),tn()};Xe.addEventListener("success",En),Xe.addEventListener("error",jn)});return Ke.then(It=>{It instanceof IDBCursor&&B.set(It,Xe)}).catch(()=>{}),oe.set(Ke,Xe),Ke}(Xe);if(de.has(Xe))return de.get(Xe);const Ke=Ve(Xe);return Ke!==Xe&&(de.set(Xe,Ke),oe.set(Ke,Xe)),Ke}const te=Xe=>oe.get(Xe),Ye=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],Pe=new Map;function Ie(Xe,Ke){if(!(Xe instanceof IDBDatabase)||Ke in Xe||"string"!=typeof Ke)return;if(Pe.get(Ke))return Pe.get(Ke);const It=Ke.replace(/FromIndex$/,""),St=Ke!==It,tn=Le.includes(It);if(!(It in(St?IDBIndex:IDBObjectStore).prototype)||!tn&&!Ye.includes(It))return;const En=function(){var jn=(0,m.Z)(function*(xr,...Wn){const wi=this.transaction(xr,tn?"readwrite":"readonly");let si=wi.store;return St&&(si=si.index(Wn.shift())),(yield Promise.all([si[It](...Wn),tn&&wi.done]))[0]});return function(Wn){return jn.apply(this,arguments)}}();return Pe.set(Ke,En),En}!function he(Xe){ve=Xe(ve)}(Xe=>({...Xe,get:(Ke,It,St)=>Ie(Ke,It)||Xe.get(Ke,It,St),has:(Ke,It)=>!!Ie(Ke,It)||Xe.has(Ke,It)}));class Me{constructor(Ke){this.container=Ke}getPlatformInfoString(){return this.container.getProviders().map(It=>{if(function at(Xe){return"VERSION"===Xe.getComponent()?.type}(It)){const St=It.getImmediate();return`${St.library}/${St.version}`}return null}).filter(It=>It).join(" ")}}const We="@firebase/app",Et=new S.Yd("@firebase/app"),Ai="[DEFAULT]",li={[We]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pr=new Map,Vn=new Map;function Wt(Xe,Ke){try{Xe.container.addComponent(Ke)}catch(It){Et.debug(`Component ${Ke.name} failed to register with FirebaseApp ${Xe.name}`,It)}}function fn(Xe,Ke){Xe.container.addOrOverwriteComponent(Ke)}function gr(Xe){const Ke=Xe.name;if(Vn.has(Ke))return Et.debug(`There were multiple attempts to register component ${Ke}.`),!1;Vn.set(Ke,Xe);for(const It of pr.values())Wt(It,Xe);return!0}function ni(Xe,Ke){const It=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return It&&It.triggerHeartbeat(),Xe.container.getProvider(Ke)}function wr(Xe,Ke,It=Ai){ni(Xe,Ke).clearInstance(It)}function sn(){Vn.clear()}const Dr=new W.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nn{constructor(Ke,It,St){this._isDeleted=!1,this._options=Object.assign({},Ke),this._config=Object.assign({},It),this._name=It.name,this._automaticDataCollectionEnabled=It.automaticDataCollectionEnabled,this._container=St,this.container.addComponent(new x.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ke}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ke){this._isDeleted=Ke}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}const xi="9.22.0";function Gn(Xe,Ke={}){let It=Xe;"object"!=typeof Ke&&(Ke={name:Ke});const St=Object.assign({name:Ai,automaticDataCollectionEnabled:!1},Ke),tn=St.name;if("string"!=typeof tn||!tn)throw Dr.create("bad-app-name",{appName:String(tn)});if(It||(It=(0,W.aH)()),!It)throw Dr.create("no-options");const En=pr.get(tn);if(En){if((0,W.vZ)(It,En.options)&&(0,W.vZ)(St,En.config))return En;throw Dr.create("duplicate-app",{appName:tn})}const jn=new x.H0(tn);for(const Wn of Vn.values())jn.addComponent(Wn);const xr=new Nn(It,St,jn);return pr.set(tn,xr),xr}function Fr(Xe=Ai){const Ke=pr.get(Xe);if(!Ke&&Xe===Ai&&(0,W.aH)())return Gn();if(!Ke)throw Dr.create("no-app",{appName:Xe});return Ke}function qr(){return Array.from(pr.values())}function Ur(Xe){return Er.apply(this,arguments)}function Er(){return(Er=(0,m.Z)(function*(Xe){const Ke=Xe.name;pr.has(Ke)&&(pr.delete(Ke),yield Promise.all(Xe.container.getProviders().map(It=>It.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function Br(Xe,Ke,It){var St;let tn=null!==(St=li[Xe])&&void 0!==St?St:Xe;It&&(tn+=`-${It}`);const En=tn.match(/\s|\//),jn=Ke.match(/\s|\//);if(En||jn){const xr=[`Unable to register library "${tn}" with version "${Ke}":`];return En&&xr.push(`library name "${tn}" contains illegal characters (whitespace or "/")`),En&&jn&&xr.push("and"),jn&&xr.push(`version name "${Ke}" contains illegal characters (whitespace or "/")`),void Et.warn(xr.join(" "))}gr(new x.wA(`${tn}-version`,()=>({library:tn,version:Ke}),"VERSION"))}function Pr(Xe,Ke){if(null!==Xe&&"function"!=typeof Xe)throw Dr.create("invalid-log-argument");(0,S.Am)(Xe,Ke)}function mr(Xe){(0,S.Ub)(Xe)}const Oe="firebase-heartbeat-store";let Se=null;function je(){return Se||(Se=function ce(Xe,Ke,{blocked:It,upgrade:St,blocking:tn,terminated:En}={}){const jn=indexedDB.open(Xe,Ke),xr=fe(jn);return St&&jn.addEventListener("upgradeneeded",Wn=>{St(fe(jn.result),Wn.oldVersion,Wn.newVersion,fe(jn.transaction),Wn)}),It&&jn.addEventListener("blocked",Wn=>It(Wn.oldVersion,Wn.newVersion,Wn)),xr.then(Wn=>{En&&Wn.addEventListener("close",()=>En()),tn&&Wn.addEventListener("versionchange",wi=>tn(wi.oldVersion,wi.newVersion,wi))}).catch(()=>{}),xr}("firebase-heartbeat-database",1,{upgrade:(Xe,Ke)=>{0===Ke&&Xe.createObjectStore(Oe)}}).catch(Xe=>{throw Dr.create("idb-open",{originalErrorMessage:Xe.message})})),Se}function Je(){return(Je=(0,m.Z)(function*(Xe){try{return yield(yield je()).transaction(Oe).objectStore(Oe).get(xn(Xe))}catch(Ke){if(Ke instanceof W.ZR)Et.warn(Ke.message);else{const It=Dr.create("idb-get",{originalErrorMessage:Ke?.message});Et.warn(It.message)}}})).apply(this,arguments)}function Rt(Xe,Ke){return gn.apply(this,arguments)}function gn(){return(gn=(0,m.Z)(function*(Xe,Ke){try{const St=(yield je()).transaction(Oe,"readwrite");yield St.objectStore(Oe).put(Ke,xn(Xe)),yield St.done}catch(It){if(It instanceof W.ZR)Et.warn(It.message);else{const St=Dr.create("idb-set",{originalErrorMessage:It?.message});Et.warn(St.message)}}})).apply(this,arguments)}function xn(Xe){return`${Xe.name}!${Xe.options.appId}`}class Te{constructor(Ke){this.container=Ke,this._heartbeatsCache=null;const It=this.container.getProvider("app").getImmediate();this._storage=new ht(It),this._heartbeatsCachePromise=this._storage.read().then(St=>(this._heartbeatsCache=St,St))}triggerHeartbeat(){var Ke=this;return(0,m.Z)(function*(){const St=Ke.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),tn=ge();if(null===Ke._heartbeatsCache&&(Ke._heartbeatsCache=yield Ke._heartbeatsCachePromise),Ke._heartbeatsCache.lastSentHeartbeatDate!==tn&&!Ke._heartbeatsCache.heartbeats.some(En=>En.date===tn))return Ke._heartbeatsCache.heartbeats.push({date:tn,agent:St}),Ke._heartbeatsCache.heartbeats=Ke._heartbeatsCache.heartbeats.filter(En=>{const jn=new Date(En.date).valueOf();return Date.now()-jn<=2592e6}),Ke._storage.overwrite(Ke._heartbeatsCache)})()}getHeartbeatsHeader(){var Ke=this;return(0,m.Z)(function*(){if(null===Ke._heartbeatsCache&&(yield Ke._heartbeatsCachePromise),null===Ke._heartbeatsCache||0===Ke._heartbeatsCache.heartbeats.length)return"";const It=ge(),{heartbeatsToSend:St,unsentEntries:tn}=function Ge(Xe,Ke=1024){const It=[];let St=Xe.slice();for(const tn of Xe){const En=It.find(jn=>jn.agent===tn.agent);if(En){if(En.dates.push(tn.date),Mt(It)>Ke){En.dates.pop();break}}else if(It.push({agent:tn.agent,dates:[tn.date]}),Mt(It)>Ke){It.pop();break}St=St.slice(1)}return{heartbeatsToSend:It,unsentEntries:St}}(Ke._heartbeatsCache.heartbeats),En=(0,W.L)(JSON.stringify({version:2,heartbeats:St}));return Ke._heartbeatsCache.lastSentHeartbeatDate=It,tn.length>0?(Ke._heartbeatsCache.heartbeats=tn,yield Ke._storage.overwrite(Ke._heartbeatsCache)):(Ke._heartbeatsCache.heartbeats=[],Ke._storage.overwrite(Ke._heartbeatsCache)),En})()}}function ge(){return(new Date).toISOString().substring(0,10)}class ht{constructor(Ke){this.app=Ke,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,W.hl)()&&(0,W.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ke=this;return(0,m.Z)(function*(){return(yield Ke._canUseIndexedDBPromise)&&(yield function lt(Xe){return Je.apply(this,arguments)}(Ke.app))||{heartbeats:[]}})()}overwrite(Ke){var It=this;return(0,m.Z)(function*(){var St;if(yield It._canUseIndexedDBPromise){const En=yield It.read();return Rt(It.app,{lastSentHeartbeatDate:null!==(St=Ke.lastSentHeartbeatDate)&&void 0!==St?St:En.lastSentHeartbeatDate,heartbeats:Ke.heartbeats})}})()}add(Ke){var It=this;return(0,m.Z)(function*(){var St;if(yield It._canUseIndexedDBPromise){const En=yield It.read();return Rt(It.app,{lastSentHeartbeatDate:null!==(St=Ke.lastSentHeartbeatDate)&&void 0!==St?St:En.lastSentHeartbeatDate,heartbeats:[...En.heartbeats,...Ke.heartbeats]})}})()}}function Mt(Xe){return(0,W.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function rn(Xe){gr(new x.wA("platform-logger",Ke=>new Me(Ke),"PRIVATE")),gr(new x.wA("heartbeat",Ke=>new Te(Ke),"PRIVATE")),Br(We,"0.9.10",Xe),Br(We,"0.9.10","esm2017"),Br("fire-js","")}("")},4859:($t,Re,H)=>{"use strict";H.d(Re,{H0:()=>K,wA:()=>S});var m=H(5861),x=H(2090);class S{constructor(B,L,$){this.name=B,this.instanceFactory=L,this.type=$,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const W="[DEFAULT]";class N{constructor(B,L){this.name=B,this.container=L,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const L=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(L)){const $=new x.BH;if(this.instancesDeferred.set(L,$),this.isInitialized(L)||this.shouldAutoInitialize())try{const de=this.getOrInitializeService({instanceIdentifier:L});de&&$.resolve(de)}catch{}}return this.instancesDeferred.get(L).promise}getImmediate(B){var L;const $=this.normalizeInstanceIdentifier(B?.identifier),de=null!==(L=B?.optional)&&void 0!==L&&L;if(!this.isInitialized($)&&!this.shouldAutoInitialize()){if(de)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:$})}catch(oe){if(de)return null;throw oe}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function Z(V){return"EAGER"===V.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:W})}catch{}for(const[L,$]of this.instancesDeferred.entries()){const de=this.normalizeInstanceIdentifier(L);try{const oe=this.getOrInitializeService({instanceIdentifier:de});$.resolve(oe)}catch{}}}}clearInstance(B=W){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,m.Z)(function*(){const L=Array.from(B.instances.values());yield Promise.all([...L.filter($=>"INTERNAL"in $).map($=>$.INTERNAL.delete()),...L.filter($=>"_delete"in $).map($=>$._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=W){return this.instances.has(B)}getOptions(B=W){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:L={}}=B,$=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized($))throw Error(`${this.name}(${$}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const de=this.getOrInitializeService({instanceIdentifier:$,options:L});for(const[oe,pe]of this.instancesDeferred.entries())$===this.normalizeInstanceIdentifier(oe)&&pe.resolve(de);return de}onInit(B,L){var $;const de=this.normalizeInstanceIdentifier(L),oe=null!==($=this.onInitCallbacks.get(de))&&void 0!==$?$:new Set;oe.add(B),this.onInitCallbacks.set(de,oe);const pe=this.instances.get(de);return pe&&B(pe,de),()=>{oe.delete(B)}}invokeOnInitCallbacks(B,L){const $=this.onInitCallbacks.get(L);if($)for(const de of $)try{de(B,L)}catch{}}getOrInitializeService({instanceIdentifier:B,options:L={}}){let $=this.instances.get(B);if(!$&&this.component&&($=this.component.instanceFactory(this.container,{instanceIdentifier:(V=B,V===W?void 0:V),options:L}),this.instances.set(B,$),this.instancesOptions.set(B,L),this.invokeOnInitCallbacks($,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,$)}catch{}var V;return $||null}normalizeInstanceIdentifier(B=W){return this.component?this.component.multipleInstances?B:W:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class K{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const L=this.getProvider(B.name);if(L.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);L.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const L=new N(B,this);return this.providers.set(B,L),L}getProviders(){return Array.from(this.providers.values())}}},1877:($t,Re,H)=>{"use strict";H.d(Re,{Am:()=>V,Ub:()=>K,Yd:()=>Z,in:()=>x});const m=[];var x=(()=>{return(B=x||(x={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",x;var B})();const S={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},W=x.INFO,N={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},O=(B,L,...$)=>{if(L<B.logLevel)return;const de=(new Date).toISOString(),oe=N[L];if(!oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${L})`);console[oe](`[${de}]  ${B.name}:`,...$)};class Z{constructor(L){this.name=L,this._logLevel=W,this._logHandler=O,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(L){if(!(L in x))throw new TypeError(`Invalid value "${L}" assigned to \`logLevel\``);this._logLevel=L}setLogLevel(L){this._logLevel="string"==typeof L?S[L]:L}get logHandler(){return this._logHandler}set logHandler(L){if("function"!=typeof L)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=L}get userLogHandler(){return this._userLogHandler}set userLogHandler(L){this._userLogHandler=L}debug(...L){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...L),this._logHandler(this,x.DEBUG,...L)}log(...L){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...L),this._logHandler(this,x.VERBOSE,...L)}info(...L){this._userLogHandler&&this._userLogHandler(this,x.INFO,...L),this._logHandler(this,x.INFO,...L)}warn(...L){this._userLogHandler&&this._userLogHandler(this,x.WARN,...L),this._logHandler(this,x.WARN,...L)}error(...L){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...L),this._logHandler(this,x.ERROR,...L)}}function K(B){m.forEach(L=>{L.setLogLevel(B)})}function V(B,L){for(const $ of m){let de=null;L&&L.level&&(de=S[L.level]),$.userLogHandler=null===B?null:(oe,pe,...Ce)=>{const ve=Ce.map(he=>{if(null==he)return null;if("string"==typeof he)return he;if("number"==typeof he||"boolean"==typeof he)return he.toString();if(he instanceof Error)return he.message;try{return JSON.stringify(he)}catch{return null}}).filter(he=>he).join(" ");pe>=(de??oe.logLevel)&&B({level:x[pe].toLowerCase(),message:ve,args:Ce,type:oe.name})}}}},259:($t,Re,H)=>{"use strict";H.d(Re,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=H(6881);(0,m.registerVersion)("firebase","9.22.0","app")},9260:($t,Re,H)=>{"use strict";H.d(Re,{Z:()=>m.Z});var m=H(3942);m.Z.registerVersion("firebase","9.22.0","app-compat")},2644:($t,Re,H)=>{"use strict";H.r(Re);var m=H(5861),x=H(3942),S=H(2090),W=H(6881),N=H(655),O=H(1877),Z=H(4859);const pe=function de(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ce=function oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new S.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ae=new O.Yd("@firebase/auth");function fe(g,...d){ae.logLevel<=O.in.ERROR&&ae.error(`Auth (${W.SDK_VERSION}): ${g}`,...d)}function te(g,...d){throw Le(g,...d)}function ce(g,...d){return Le(g,...d)}function Qe(g,d,h){const w=Object.assign(Object.assign({},Ce()),{[d]:h});return new S.LL("auth","Firebase",w).create(d,{appName:g.name})}function Ye(g,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&te(g,"argument-error"),Qe(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(g,...d){if("string"!=typeof g){const h=d[0],w=[...d.slice(1)];return w[0]&&(w[0].appName=g.name),g._errorFactory.create(h,...w)}return ve.create(g,...d)}function Pe(g,d,...h){if(!g)throw Le(d,...h)}function Ie(g){const d="INTERNAL ASSERTION FAILED: "+g;throw fe(d),new Error(d)}function Me(g,d){g||Ie(d)}function at(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function We(){return"http:"===wt()||"https:"===wt()}function wt(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Pn{constructor(d,h){this.shortDelay=d,this.longDelay=h,Me(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,S.uI)()||(0,S.b$)()}get(){return function Et(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(We()||(0,S.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cn(g,d){Me(g.emulator,"Emulator should always be set here");const{url:h}=g.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class Dt{static initialize(d,h,w){this.fetchImpl=d,h&&(this.headersImpl=h),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fn=new Pn(3e4,6e4);function en(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Vt(g,d,h,w){return sr.apply(this,arguments)}function sr(){return(sr=(0,m.Z)(function*(g,d,h,w,G={}){return Lt(g,G,(0,m.Z)(function*(){let ie={},Be={};w&&("GET"===d?Be=w:ie={body:JSON.stringify(w)});const et=(0,S.xO)(Object.assign({key:g.config.apiKey},Be)).slice(1),pt=yield g._getAdditionalHeaders();return pt["Content-Type"]="application/json",g.languageCode&&(pt["X-Firebase-Locale"]=g.languageCode),Dt.fetch()(mi(g,g.config.apiHost,h,et),Object.assign({method:d,headers:pt,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function Lt(g,d,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,m.Z)(function*(g,d,h){g._canInitEmulator=!1;const w=Object.assign(Object.assign({},kn),d);try{const G=new Bi(g),ie=yield Promise.race([h(),G.promise]);G.clearNetworkTimeout();const Be=yield ie.json();if("needConfirmation"in Be)throw Bn(g,"account-exists-with-different-credential",Be);if(ie.ok&&!("errorMessage"in Be))return Be;{const et=ie.ok?Be.errorMessage:Be.error.message,[pt,Gt]=et.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pt)throw Bn(g,"credential-already-in-use",Be);if("EMAIL_EXISTS"===pt)throw Bn(g,"email-already-in-use",Be);if("USER_DISABLED"===pt)throw Bn(g,"user-disabled",Be);const pn=w[pt]||pt.toLowerCase().replace(/[_\s]+/g,"-");if(Gt)throw Qe(g,pn,Gt);te(g,pn)}}catch(G){if(G instanceof S.ZR)throw G;te(g,"network-request-failed",{message:String(G)})}})).apply(this,arguments)}function Xn(g,d,h,w){return fr.apply(this,arguments)}function fr(){return(fr=(0,m.Z)(function*(g,d,h,w,G={}){const ie=yield Vt(g,d,h,w,G);return"mfaPendingCredential"in ie&&te(g,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function mi(g,d,h,w){const G=`${d}${h}?${w}`;return g.config.emulator?Cn(g.config,G):`${g.config.apiScheme}://${G}`}class Bi{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,w)=>{this.timer=setTimeout(()=>w(ce(this.auth,"network-request-failed")),Fn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bn(g,d,h){const w={appName:g.name};h.email&&(w.email=h.email),h.phoneNumber&&(w.phoneNumber=h.phoneNumber);const G=ce(g,d,w);return G.customData._tokenResponse=h,G}function Rn(){return(Rn=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Qr(g,d){return zr.apply(this,arguments)}function zr(){return(zr=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Nt(g,d){return cr.apply(this,arguments)}function cr(){return(cr=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Gr(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Ai(){return(Ai=(0,m.Z)(function*(g,d=!1){const h=(0,S.m9)(g),w=yield h.getIdToken(d),G=pr(w);Pe(G&&G.exp&&G.auth_time&&G.iat,h.auth,"internal-error");const ie="object"==typeof G.firebase?G.firebase:void 0,Be=ie?.sign_in_provider;return{claims:G,token:w,authTime:Gr(li(G.auth_time)),issuedAtTime:Gr(li(G.iat)),expirationTime:Gr(li(G.exp)),signInProvider:Be||null,signInSecondFactor:ie?.sign_in_second_factor||null}})).apply(this,arguments)}function li(g){return 1e3*Number(g)}function pr(g){const[d,h,w]=g.split(".");if(void 0===d||void 0===h||void 0===w)return fe("JWT malformed, contained fewer than 3 sections"),null;try{const G=(0,S.tV)(h);return G?JSON.parse(G):(fe("Failed to decode base64 JWT payload"),null)}catch(G){return fe("Caught error parsing JWT payload as JSON",G?.toString()),null}}function Wt(g,d){return fn.apply(this,arguments)}function fn(){return(fn=(0,m.Z)(function*(g,d,h=!1){if(h)return d;try{return yield d}catch(w){throw w instanceof S.ZR&&gr(w)&&g.auth.currentUser===g&&(yield g.auth.signOut()),w}})).apply(this,arguments)}function gr({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class ni{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const G=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const w=this.getInterval(d);this.timerId=setTimeout((0,m.Z)(function*(){yield h.iteration()}),w)}iteration(){var d=this;return(0,m.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class wr{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gr(this.lastLoginAt),this.creationTime=Gr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sn(g){return qt.apply(this,arguments)}function qt(){return(qt=(0,m.Z)(function*(g){var d;const h=g.auth,w=yield g.getIdToken(),G=yield Wt(g,Nt(h,{idToken:w}));Pe(G?.users.length,h,"internal-error");const ie=G.users[0];g._notifyReloadListener(ie);const Be=null!==(d=ie.providerUserInfo)&&void 0!==d&&d.length?Gn(ie.providerUserInfo):[],et=xi(g.providerData,Be),pn=!!g.isAnonymous&&!(g.email&&ie.passwordHash||et?.length),yn={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:et,metadata:new wr(ie.createdAt,ie.lastLoginAt),isAnonymous:pn};Object.assign(g,yn)})).apply(this,arguments)}function Nn(){return(Nn=(0,m.Z)(function*(g){const d=(0,S.m9)(g);yield sn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function xi(g,d){return[...g.filter(w=>!d.some(G=>G.providerId===w.providerId)),...d]}function Gn(g){return g.map(d=>{var{providerId:h}=d,w=(0,N._T)(d,["providerId"]);return{providerId:h,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function qr(){return(qr=(0,m.Z)(function*(g,d){const h=yield Lt(g,{},(0,m.Z)(function*(){const w=(0,S.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:G,apiKey:ie}=g.config,Be=mi(g,G,"/v1/token",`key=${ie}`),et=yield g._getAdditionalHeaders();return et["Content-Type"]="application/x-www-form-urlencoded",Dt.fetch()(Be,{method:"POST",headers:et,body:w})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class Ur{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Pe(d.idToken,"internal-error"),Pe(typeof d.idToken<"u","internal-error"),Pe(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Vn(g){const d=pr(g);return Pe(d,"internal-error"),Pe(typeof d.exp<"u","internal-error"),Pe(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}getToken(d,h=!1){var w=this;return(0,m.Z)(function*(){return Pe(!w.accessToken||w.refreshToken,d,"user-token-expired"),h||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(d,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var w=this;return(0,m.Z)(function*(){const{accessToken:G,refreshToken:ie,expiresIn:Be}=yield function Fr(g,d){return qr.apply(this,arguments)}(d,h);w.updateTokensAndExpiration(G,ie,Number(Be))})()}updateTokensAndExpiration(d,h,w){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(d,h){const{refreshToken:w,accessToken:G,expirationTime:ie}=h,Be=new Ur;return w&&(Pe("string"==typeof w,"internal-error",{appName:d}),Be.refreshToken=w),G&&(Pe("string"==typeof G,"internal-error",{appName:d}),Be.accessToken=G),ie&&(Pe("number"==typeof ie,"internal-error",{appName:d}),Be.expirationTime=ie),Be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Ur,this.toJSON())}_performRefresh(){return Ie("not implemented")}}function Er(g,d){Pe("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class Br{constructor(d){var{uid:h,auth:w,stsTokenManager:G}=d,ie=(0,N._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ni(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=w,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new wr(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,m.Z)(function*(){const w=yield Wt(h,h.stsTokenManager.getToken(h.auth,d));return Pe(w,h.auth,"internal-error"),h.accessToken!==w&&(h.accessToken=w,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),w})()}getIdTokenResult(d){return function Cs(g){return Ai.apply(this,arguments)}(this,d)}reload(){return function Dr(g){return Nn.apply(this,arguments)}(this)}_assign(d){this!==d&&(Pe(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new Br(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var w=this;return(0,m.Z)(function*(){let G=!1;d.idToken&&d.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(d),G=!0),h&&(yield sn(w)),yield w.auth._persistUserIfCurrent(w),G&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var d=this;return(0,m.Z)(function*(){const h=yield d.getIdToken();return yield Wt(d,function Lr(g,d){return Rn.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var w,G,ie,Be,et,pt,Gt,pn;const yn=null!==(w=h.displayName)&&void 0!==w?w:void 0,Gi=null!==(G=h.email)&&void 0!==G?G:void 0,Sa=null!==(ie=h.phoneNumber)&&void 0!==ie?ie:void 0,ld=null!==(Be=h.photoURL)&&void 0!==Be?Be:void 0,hh=null!==(et=h.tenantId)&&void 0!==et?et:void 0,cd=null!==(pt=h._redirectEventId)&&void 0!==pt?pt:void 0,Cl=null!==(Gt=h.createdAt)&&void 0!==Gt?Gt:void 0,Sl=null!==(pn=h.lastLoginAt)&&void 0!==pn?pn:void 0,{uid:tl,emailVerified:Al,isAnonymous:xl,providerData:dd,stsTokenManager:fh}=h;Pe(tl&&fh,d,"internal-error");const Fo=Ur.fromJSON(this.name,fh);Pe("string"==typeof tl,d,"internal-error"),Er(yn,d.name),Er(Gi,d.name),Pe("boolean"==typeof Al,d,"internal-error"),Pe("boolean"==typeof xl,d,"internal-error"),Er(Sa,d.name),Er(ld,d.name),Er(hh,d.name),Er(cd,d.name),Er(Cl,d.name),Er(Sl,d.name);const _c=new Br({uid:tl,auth:d,email:Gi,emailVerified:Al,displayName:yn,isAnonymous:xl,photoURL:ld,phoneNumber:Sa,tenantId:hh,stsTokenManager:Fo,createdAt:Cl,lastLoginAt:Sl});return dd&&Array.isArray(dd)&&(_c.providerData=dd.map(ph=>Object.assign({},ph))),cd&&(_c._redirectEventId=cd),_c}static _fromIdTokenResponse(d,h,w=!1){return(0,m.Z)(function*(){const G=new Ur;G.updateFromServerResponse(h);const ie=new Br({uid:h.localId,auth:d,stsTokenManager:G,isAnonymous:w});return yield sn(ie),ie})()}}const Pr=new Map;function mr(g){Me(g instanceof Function,"Expected a class definition");let d=Pr.get(g);return d?(Me(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,Pr.set(g,d),d)}const ii=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(h,w){var G=this;return(0,m.Z)(function*(){G.storage[h]=w})()}_get(h){var w=this;return(0,m.Z)(function*(){const G=w.storage[h];return void 0===G?null:G})()}_remove(h){var w=this;return(0,m.Z)(function*(){delete w.storage[h]})()}_addListener(h,w){}_removeListener(h,w){}}return g.type="NONE",g})();function Oe(g,d,h){return`firebase:${g}:${d}:${h}`}class Se{constructor(d,h,w){this.persistence=d,this.auth=h,this.userKey=w;const{config:G,name:ie}=this.auth;this.fullUserKey=Oe(this.userKey,G.apiKey,ie),this.fullPersistenceKey=Oe("persistence",G.apiKey,ie),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,m.Z)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?Br._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,m.Z)(function*(){if(h.persistence===d)return;const w=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,w?h.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,w="authUser"){return(0,m.Z)(function*(){if(!h.length)return new Se(mr(ii),d,w);const G=(yield Promise.all(h.map(function(){var Gt=(0,m.Z)(function*(pn){if(yield pn._isAvailable())return pn});return function(pn){return Gt.apply(this,arguments)}}()))).filter(Gt=>Gt);let ie=G[0]||mr(ii);const Be=Oe(w,d.config.apiKey,d.name);let et=null;for(const Gt of h)try{const pn=yield Gt._get(Be);if(pn){const yn=Br._fromJSON(d,pn);Gt!==ie&&(et=yn),ie=Gt;break}}catch{}const pt=G.filter(Gt=>Gt._shouldAllowMigration);return ie._shouldAllowMigration&&pt.length?(ie=pt[0],et&&(yield ie._set(Be,et.toJSON())),yield Promise.all(h.map(function(){var Gt=(0,m.Z)(function*(pn){if(pn!==ie)try{yield pn._remove(Be)}catch{}});return function(pn){return Gt.apply(this,arguments)}}())),new Se(ie,d,w)):new Se(ie,d,w)})()}}function je(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(gn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(lt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(nr(d))return"Blackberry";if(De(d))return"Webos";if(Je(d))return"Safari";if((d.includes("chrome/")||Rt(d))&&!d.includes("edge/"))return"Chrome";if(xn(d))return"Android";{const w=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function lt(g=(0,S.z$)()){return/firefox\//i.test(g)}function Je(g=(0,S.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Rt(g=(0,S.z$)()){return/crios\//i.test(g)}function gn(g=(0,S.z$)()){return/iemobile/i.test(g)}function xn(g=(0,S.z$)()){return/android/i.test(g)}function nr(g=(0,S.z$)()){return/blackberry/i.test(g)}function De(g=(0,S.z$)()){return/webos/i.test(g)}function Te(g=(0,S.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function Mt(g=(0,S.z$)()){return Te(g)||xn(g)||De(g)||nr(g)||/windows phone/i.test(g)||gn(g)}function Xe(g,d=[]){let h;switch(g){case"Browser":h=je((0,S.z$)());break;case"Worker":h=`${je((0,S.z$)())}-${g}`;break;default:h=g}const w=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${W.SDK_VERSION}/${w}`}function It(){return(It=(0,m.Z)(function*(g){return(yield Vt(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function St(g,d){return tn.apply(this,arguments)}function tn(){return(tn=(0,m.Z)(function*(g,d){return Vt(g,"GET","/v2/recaptchaConfig",en(g,d))})).apply(this,arguments)}function En(g){return void 0!==g&&void 0!==g.getResponse}function jn(g){return void 0!==g&&void 0!==g.enterprise}class xr{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(h=>"EMAIL_PASSWORD_PROVIDER"===h.provider&&"OFF"!==h.enforcementState)}}function wi(g){return new Promise((d,h)=>{const w=document.createElement("script");w.setAttribute("src",g),w.onload=d,w.onerror=G=>{const ie=ce("internal-error");ie.customData=G,h(ie)},w.type="text/javascript",w.charset="UTF-8",function Wn(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(w)})}function si(g){return`__${g}${Math.floor(1e6*Math.random())}`}class or{constructor(d){this.type="recaptcha-enterprise",this.auth=yr(d)}verify(d="verify",h=!1){var w=this;return(0,m.Z)(function*(){function ie(){return ie=(0,m.Z)(function*(et){if(!h){if(null==et.tenantId&&null!=et._agentRecaptchaConfig)return et._agentRecaptchaConfig.siteKey;if(null!=et.tenantId&&void 0!==et._tenantRecaptchaConfigs[et.tenantId])return et._tenantRecaptchaConfigs[et.tenantId].siteKey}return new Promise(function(){var pt=(0,m.Z)(function*(Gt,pn){St(et,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(yn=>{if(void 0!==yn.recaptchaKey){const Gi=new xr(yn);return null==et.tenantId?et._agentRecaptchaConfig=Gi:et._tenantRecaptchaConfigs[et.tenantId]=Gi,Gt(Gi.siteKey)}pn(new Error("recaptcha Enterprise site key undefined"))}).catch(yn=>{pn(yn)})});return function(Gt,pn){return pt.apply(this,arguments)}}())}),ie.apply(this,arguments)}function Be(et,pt,Gt){const pn=window.grecaptcha;jn(pn)?pn.enterprise.ready(()=>{pn.enterprise.execute(et,{action:d}).then(yn=>{pt(yn)}).catch(()=>{pt("NO_RECAPTCHA")})}):Gt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((et,pt)=>{(function G(et){return ie.apply(this,arguments)})(w.auth).then(Gt=>{if(!h&&jn(window.grecaptcha))Be(Gt,et,pt);else{if(typeof window>"u")return void pt(new Error("RecaptchaVerifier is only supported in browser"));wi("https://www.google.com/recaptcha/enterprise.js?render="+Gt).then(()=>{Be(Gt,et,pt)}).catch(pn=>{pt(pn)})}}).catch(Gt=>{pt(Gt)})})})()}}function ci(g,d,h){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,m.Z)(function*(g,d,h,w=!1){const G=new or(g);let ie;try{ie=yield G.verify(h)}catch{ie=yield G.verify(h,!0)}const Be=Object.assign({},d);return Object.assign(Be,w?{captchaResp:ie}:{captchaResponse:ie}),Object.assign(Be,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Be,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Be})).apply(this,arguments)}class hs{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const w=ie=>new Promise((Be,et)=>{try{Be(d(ie))}catch(pt){et(pt)}});w.onAbort=h,this.queue.push(w);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,m.Z)(function*(){if(h.auth.currentUser===d)return;const w=[];try{for(const G of h.queue)yield G(d),G.onAbort&&w.push(G.onAbort)}catch(G){w.reverse();for(const ie of w)try{ie()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:G?.message})}})()}}class uo{constructor(d,h,w,G){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=w,this.config=G,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fs(this),this.idTokenSubscription=new fs(this),this.beforeStateQueue=new hs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=G.sdkClientVersion}_initializeWithPersistence(d,h){var w=this;return h&&(this._popupRedirectResolver=mr(h)),this._initializationPromise=this.queue((0,m.Z)(function*(){var G,ie;if(!w._deleted&&(w.persistenceManager=yield Se.create(w,d),!w._deleted)){if(null!==(G=w._popupRedirectResolver)&&void 0!==G&&G._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(h),w.lastNotifiedUid=(null===(ie=w.currentUser)||void 0===ie?void 0:ie.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,m.Z)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUser(d){var h=this;return(0,m.Z)(function*(){var w;const G=yield h.assertedPersistence.getCurrentUser();let ie=G,Be=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const et=null===(w=h.redirectUser)||void 0===w?void 0:w._redirectEventId,pt=ie?._redirectEventId,Gt=yield h.tryRedirectSignIn(d);(!et||et===pt)&&Gt?.user&&(ie=Gt.user,Be=!0)}if(!ie)return h.directlySetCurrentUser(null);if(!ie._redirectEventId){if(Be)try{yield h.beforeStateQueue.runMiddleware(ie)}catch(et){ie=G,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(et))}return ie?h.reloadAndSetCurrentUserOrClear(ie):h.directlySetCurrentUser(null)}return Pe(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===ie._redirectEventId?h.directlySetCurrentUser(ie):h.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(d){var h=this;return(0,m.Z)(function*(){let w=null;try{w=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,m.Z)(function*(){try{yield sn(d)}catch(w){if("auth/network-request-failed"!==w?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function hn(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,m.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,m.Z)(function*(){const w=d?(0,S.m9)(d):null;return w&&Pe(w.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(w&&w._clone(h))})()}_updateCurrentUser(d,h=!1){var w=this;return(0,m.Z)(function*(){if(!w._deleted)return d&&Pe(w.tenantId===d.tenantId,w,"tenant-id-mismatch"),h||(yield w.beforeStateQueue.runMiddleware(d)),w.queue((0,m.Z)(function*(){yield w.directlySetCurrentUser(d),w.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,m.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var h=this;return this.queue((0,m.Z)(function*(){yield h.assertedPersistence.setPersistence(mr(d))}))}initializeRecaptchaConfig(){var d=this;return(0,m.Z)(function*(){const h=yield St(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new xr(h);null==d.tenantId?d._agentRecaptchaConfig=w:d._tenantRecaptchaConfigs[d.tenantId]=w,w.emailPasswordEnabled&&new or(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new S.LL("auth","Firebase",d())}onAuthStateChanged(d,h,w){return this.registerStateListener(this.authStateSubscription,d,h,w)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,w){return this.registerStateListener(this.idTokenSubscription,d,h,w)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var w=this;return(0,m.Z)(function*(){const G=yield w.getOrInitRedirectPersistenceManager(h);return null===d?G.removeCurrentUser():G.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,m.Z)(function*(){if(!h.redirectPersistenceManager){const w=d&&mr(d)||h._popupRedirectResolver;Pe(w,h,"argument-error"),h.redirectPersistenceManager=yield Se.create(h,[mr(w._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,m.Z)(function*(){var w,G;return h._isInitialized&&(yield h.queue((0,m.Z)(function*(){}))),(null===(w=h._currentUser)||void 0===w?void 0:w._redirectEventId)===d?h._currentUser:(null===(G=h.redirectUser)||void 0===G?void 0:G._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,m.Z)(function*(){if(d===h.currentUser)return h.queue((0,m.Z)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,w,G){if(this._deleted)return()=>{};const ie="function"==typeof h?h:h.next.bind(h),Be=this._isInitialized?Promise.resolve():this._initializationPromise;return Pe(Be,this,"internal-error"),Be.then(()=>ie(this.currentUser)),"function"==typeof h?d.addObserver(h,w,G):d.addObserver(h)}directlySetCurrentUser(d){var h=this;return(0,m.Z)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,m.Z)(function*(){var h;const w={"X-Client-Version":d.clientVersion};d.app.options.appId&&(w["X-Firebase-gmpid"]=d.app.options.appId);const G=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();G&&(w["X-Firebase-Client"]=G);const ie=yield d._getAppCheckToken();return ie&&(w["X-Firebase-AppCheck"]=ie),w})()}_getAppCheckToken(){var d=this;return(0,m.Z)(function*(){var h;const w=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return w?.error&&function Ve(g,...d){ae.logLevel<=O.in.WARN&&ae.warn(`Auth (${W.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function yr(g){return(0,S.m9)(g)}class fs{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,S.ne)(h=>this.observer=h)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function br(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Vs(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class ns{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return Ie("not implemented")}_getIdTokenResponse(d){return Ie("not implemented")}_linkToIdToken(d,h){return Ie("not implemented")}_getReauthenticationResolver(d){return Ie("not implemented")}}function Nr(g,d){return As.apply(this,arguments)}function As(){return(As=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:resetPassword",en(g,d))})).apply(this,arguments)}function mo(g,d){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Li(g,d){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:update",en(g,d))})).apply(this,arguments)}function rr(g,d){return lo.apply(this,arguments)}function lo(){return(lo=(0,m.Z)(function*(g,d){return Xn(g,"POST","/v1/accounts:signInWithPassword",en(g,d))})).apply(this,arguments)}function zo(g,d){return js.apply(this,arguments)}function js(){return(js=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:sendOobCode",en(g,d))})).apply(this,arguments)}function Ze(g,d){return $e.apply(this,arguments)}function $e(){return($e=(0,m.Z)(function*(g,d){return zo(g,d)})).apply(this,arguments)}function nt(g,d){return vt.apply(this,arguments)}function vt(){return(vt=(0,m.Z)(function*(g,d){return zo(g,d)})).apply(this,arguments)}function At(g,d){return mn.apply(this,arguments)}function mn(){return(mn=(0,m.Z)(function*(g,d){return zo(g,d)})).apply(this,arguments)}function Yn(g,d){return ir.apply(this,arguments)}function ir(){return(ir=(0,m.Z)(function*(g,d){return zo(g,d)})).apply(this,arguments)}function Wi(){return(Wi=(0,m.Z)(function*(g,d){return Xn(g,"POST","/v1/accounts:signInWithEmailLink",en(g,d))})).apply(this,arguments)}function Vi(){return(Vi=(0,m.Z)(function*(g,d){return Xn(g,"POST","/v1/accounts:signInWithEmailLink",en(g,d))})).apply(this,arguments)}class eo extends ns{constructor(d,h,w,G=null){super("password",w),this._email=d,this._password=h,this._tenantId=G}static _fromEmailAndPassword(d,h){return new eo(d,h,"password")}static _fromEmailAndCode(d,h,w=null){return new eo(d,h,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,m.Z)(function*(){var w;switch(h.signInMethod){case"password":const G={returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=d._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const ie=yield ci(d,G,"signInWithPassword");return rr(d,ie)}return rr(d,G).catch(function(){var ie=(0,m.Z)(function*(Be){if("auth/missing-recaptcha-token"===Be.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const et=yield ci(d,G,"signInWithPassword");return rr(d,et)}return Promise.reject(Be)});return function(Be){return ie.apply(this,arguments)}}());case"emailLink":return function Tr(g,d){return Wi.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:te(d,"internal-error")}})()}_linkToIdToken(d,h){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return mo(d,{idToken:h,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function $s(g,d){return Vi.apply(this,arguments)}(d,{idToken:h,email:w._email,oobCode:w._password});default:te(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function gs(g,d){return xs.apply(this,arguments)}function xs(){return(xs=(0,m.Z)(function*(g,d){return Xn(g,"POST","/v1/accounts:signInWithIdp",en(g,d))})).apply(this,arguments)}class rs extends ns{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new rs(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):te("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:G}=h,ie=(0,N._T)(h,["providerId","signInMethod"]);if(!w||!G)return null;const Be=new rs(w,G);return Be.idToken=ie.idToken||void 0,Be.accessToken=ie.accessToken||void 0,Be.secret=ie.secret,Be.nonce=ie.nonce,Be.pendingToken=ie.pendingToken||null,Be}_getIdTokenResponse(d){return gs(d,this.buildRequest())}_linkToIdToken(d,h){const w=this.buildRequest();return w.idToken=h,gs(d,w)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,gs(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,S.xO)(h)}return d}}function Hs(g,d){return yo.apply(this,arguments)}function yo(){return(yo=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:sendVerificationCode",en(g,d))})).apply(this,arguments)}function zs(){return(zs=(0,m.Z)(function*(g,d){return Xn(g,"POST","/v1/accounts:signInWithPhoneNumber",en(g,d))})).apply(this,arguments)}function So(){return(So=(0,m.Z)(function*(g,d){const h=yield Xn(g,"POST","/v1/accounts:signInWithPhoneNumber",en(g,d));if(h.temporaryProof)throw Bn(g,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Go={USER_NOT_FOUND:"user-not-found"};function Ei(){return(Ei=(0,m.Z)(function*(g,d){return Xn(g,"POST","/v1/accounts:signInWithPhoneNumber",en(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Go)})).apply(this,arguments)}class ji extends ns{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new ji({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new ji({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function ks(g,d){return zs.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function Co(g,d){return So.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function wa(g,d){return Ei.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:w,verificationCode:G}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:w,code:G}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:w,phoneNumber:G,temporaryProof:ie}=d;return w||h||G||ie?new ji({verificationId:h,verificationCode:w,phoneNumber:G,temporaryProof:ie}):null}}class Ji{constructor(d){var h,w,G,ie,Be,et;const pt=(0,S.zd)((0,S.pd)(d)),Gt=null!==(h=pt.apiKey)&&void 0!==h?h:null,pn=null!==(w=pt.oobCode)&&void 0!==w?w:null,yn=function Aa(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=pt.mode)&&void 0!==G?G:null);Pe(Gt&&pn&&yn,"argument-error"),this.apiKey=Gt,this.operation=yn,this.code=pn,this.continueUrl=null!==(ie=pt.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(Be=pt.languageCode)&&void 0!==Be?Be:null,this.tenantId=null!==(et=pt.tenantId)&&void 0!==et?et:null}static parseLink(d){const h=function ms(g){const d=(0,S.zd)((0,S.pd)(g)).link,h=d?(0,S.zd)((0,S.pd)(d)).deep_link_id:null,w=(0,S.zd)((0,S.pd)(g)).deep_link_id;return(w?(0,S.zd)((0,S.pd)(w)).link:null)||w||h||d||g}(d);try{return new Ji(h)}catch{return null}}}let Yr=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(h,w){return eo._fromEmailAndPassword(h,w)}static credentialWithLink(h,w){const G=Ji.parseLink(w);return Pe(G,"argument-error"),eo._fromEmailAndCode(h,G.code,G.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Ii{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Cr extends Ii{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class bi extends Cr{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return Pe("providerId"in h&&"signInMethod"in h,"argument-error"),rs._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Pe(d.idToken||d.accessToken,"argument-error"),rs._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return bi.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return bi.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:w,oauthTokenSecret:G,pendingToken:ie,nonce:Be,providerId:et}=d;if(!w&&!G&&!h&&!ie||!et)return null;try{return new bi(et)._credential({idToken:h,accessToken:w,nonce:Be,pendingToken:ie})}catch{return null}}}let $i=(()=>{class g extends Cr{constructor(){super("facebook.com")}static credential(h){return rs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Wo=(()=>{class g extends Cr{constructor(){super("google.com"),this.addScope("profile")}static credential(h,w){return rs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:w})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:w,oauthAccessToken:G}=h;if(!w&&!G)return null;try{return g.credential(w,G)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),ha=(()=>{class g extends Cr{constructor(){super("github.com")}static credential(h){return rs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Kn extends ns{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return gs(d,this.buildRequest())}_linkToIdToken(d,h){const w=this.buildRequest();return w.idToken=h,gs(d,w)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,gs(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:G,pendingToken:ie}=h;return w&&G&&ie&&w===G?new Kn(w,ie):null}static _create(d,h){return new Kn(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ys extends Ii{constructor(d){Pe(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return ys.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return ys.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=Kn.fromJSON(d);return Pe(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:w}=d;if(!h||!w)return null;try{return Kn._create(w,h)}catch{return null}}}let Gs=(()=>{class g extends Cr{constructor(){super("twitter.com")}static credential(h,w){return rs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:w})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:w,oauthTokenSecret:G}=h;if(!w||!G)return null;try{return g.credential(w,G)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Ti(g,d){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,m.Z)(function*(g,d){return Xn(g,"POST","/v1/accounts:signUp",en(g,d))})).apply(this,arguments)}class Mi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,w,G=!1){return(0,m.Z)(function*(){const ie=yield Br._fromIdTokenResponse(d,w,G),Be=ln(w);return new Mi({user:ie,providerId:Be,_tokenResponse:w,operationType:h})})()}static _forOperation(d,h,w){return(0,m.Z)(function*(){yield d._updateTokensIfNecessary(w,!0);const G=ln(w);return new Mi({user:d,providerId:G,_tokenResponse:w,operationType:h})})()}}function ln(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Ao(){return(Ao=(0,m.Z)(function*(g){var d;const h=yr(g);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new Mi({user:h.currentUser,providerId:null,operationType:"signIn"});const w=yield Ti(h,{returnSecureToken:!0}),G=yield Mi._fromIdTokenResponse(h,"signIn",w,!0);return yield h._updateCurrentUser(G.user),G})).apply(this,arguments)}class _o extends S.ZR{constructor(d,h,w,G){var ie;super(h.code,h.message),this.operationType=w,this.user=G,Object.setPrototypeOf(this,_o.prototype),this.customData={appName:d.name,tenantId:null!==(ie=d.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:h.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(d,h,w,G){return new _o(d,h,w,G)}}function xo(g,d,h,w){return("reauthenticate"===d?h._getReauthenticationResolver(g):h._getIdTokenResponse(g)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?_o._fromErrorAndOperation(g,ie,d,w):ie})}function fa(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function Di(){return(Di=(0,m.Z)(function*(g,d){const h=(0,S.m9)(g);yield Ln(!0,h,d);const{providerUserInfo:w}=yield Qr(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),G=fa(w||[]);return h.providerData=h.providerData.filter(ie=>G.has(ie.providerId)),G.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h})).apply(this,arguments)}function vs(g,d){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,m.Z)(function*(g,d,h=!1){const w=yield Wt(g,d._linkToIdToken(g.auth,yield g.getIdToken()),h);return Mi._forOperation(g,"link",w)})).apply(this,arguments)}function Ln(g,d,h){return ho.apply(this,arguments)}function ho(){return(ho=(0,m.Z)(function*(g,d,h){yield sn(d);const G=!1===g?"provider-already-linked":"no-such-provider";Pe(fa(d.providerData).has(h)===g,d.auth,G)})).apply(this,arguments)}function to(g,d){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,m.Z)(function*(g,d,h=!1){const{auth:w}=g,G="reauthenticate";try{const ie=yield Wt(g,xo(w,G,d,g),h);Pe(ie.idToken,w,"internal-error");const Be=pr(ie.idToken);Pe(Be,w,"internal-error");const{sub:et}=Be;return Pe(g.uid===et,w,"user-mismatch"),Mi._forOperation(g,G,ie)}catch(ie){throw"auth/user-not-found"===ie?.code&&te(w,"user-mismatch"),ie}})).apply(this,arguments)}function ta(g,d){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,m.Z)(function*(g,d,h=!1){const w="signIn",G=yield xo(g,w,d),ie=yield Mi._fromIdTokenResponse(g,w,G);return h||(yield g._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function _s(g,d){return q.apply(this,arguments)}function q(){return(q=(0,m.Z)(function*(g,d){return ta(yr(g),d)})).apply(this,arguments)}function z(g,d){return me.apply(this,arguments)}function me(){return(me=(0,m.Z)(function*(g,d){const h=(0,S.m9)(g);return yield Ln(!1,h,d.providerId),vs(h,d)})).apply(this,arguments)}function xe(g,d){return qe.apply(this,arguments)}function qe(){return(qe=(0,m.Z)(function*(g,d){return to((0,S.m9)(g),d)})).apply(this,arguments)}function dt(g,d){return gt.apply(this,arguments)}function gt(){return(gt=(0,m.Z)(function*(g,d){return Xn(g,"POST","/v1/accounts:signInWithCustomToken",en(g,d))})).apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(g,d){const h=yr(g),w=yield dt(h,{token:d,returnSecureToken:!0}),G=yield Mi._fromIdTokenResponse(h,"signIn",w);return yield h._updateCurrentUser(G.user),G})).apply(this,arguments)}class bn{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?On._fromServerResponse(d,h):"totpInfo"in h?yi._fromServerResponse(d,h):te(d,"internal-error")}}class On extends bn{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new On(h)}}class yi extends bn{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new yi(h)}}function Sr(g,d,h){var w;Pe((null===(w=h.url)||void 0===w?void 0:w.length)>0,g,"invalid-continue-uri"),Pe(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(Pe(h.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(Pe(h.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function Zr(){return Zr=(0,m.Z)(function*(g,d,h){var w;const G=yr(g),ie={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=G._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Be=yield ci(G,ie,"getOobCode",!0);h&&Sr(G,Be,h),yield nt(G,Be)}else h&&Sr(G,ie,h),yield nt(G,ie).catch(function(){var Be=(0,m.Z)(function*(et){if("auth/missing-recaptcha-token"!==et.code)return Promise.reject(et);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const pt=yield ci(G,ie,"getOobCode",!0);h&&Sr(G,pt,h),yield nt(G,pt)}});return function(et){return Be.apply(this,arguments)}}())}),Zr.apply(this,arguments)}function Vr(){return(Vr=(0,m.Z)(function*(g,d,h){yield Nr((0,S.m9)(g),{oobCode:d,newPassword:h})})).apply(this,arguments)}function Or(){return(Or=(0,m.Z)(function*(g,d){yield Li((0,S.m9)(g),{oobCode:d})})).apply(this,arguments)}function di(g,d){return oi.apply(this,arguments)}function oi(){return(oi=(0,m.Z)(function*(g,d){const h=(0,S.m9)(g),w=yield Nr(h,{oobCode:d}),G=w.requestType;switch(Pe(G,h,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Pe(w.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Pe(w.mfaInfo,h,"internal-error");default:Pe(w.email,h,"internal-error")}let ie=null;return w.mfaInfo&&(ie=bn._fromServerResponse(yr(h),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:ie},operation:G}})).apply(this,arguments)}function ss(){return(ss=(0,m.Z)(function*(g,d){const{data:h}=yield di((0,S.m9)(g),d);return h.email})).apply(this,arguments)}function Rs(){return Rs=(0,m.Z)(function*(g,d,h){var w;const G=yr(g),ie={returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"};let Be;if(null!==(w=G._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Gt=yield ci(G,ie,"signUpPassword");Be=Ti(G,Gt)}else Be=Ti(G,ie).catch(function(){var Gt=(0,m.Z)(function*(pn){if("auth/missing-recaptcha-token"===pn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const yn=yield ci(G,ie,"signUpPassword");return Ti(G,yn)}return Promise.reject(pn)});return function(pn){return Gt.apply(this,arguments)}}());const et=yield Be.catch(Gt=>Promise.reject(Gt)),pt=yield Mi._fromIdTokenResponse(G,"signIn",et);return yield G._updateCurrentUser(pt.user),pt}),Rs.apply(this,arguments)}function k(){return k=(0,m.Z)(function*(g,d,h){var w;const G=yr(g),ie={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function Be(et,pt){Pe(pt.handleCodeInApp,G,"argument-error"),pt&&Sr(G,et,pt)}if(null!==(w=G._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const et=yield ci(G,ie,"getOobCode",!0);Be(et,h),yield At(G,et)}else Be(ie,h),yield At(G,ie).catch(function(){var et=(0,m.Z)(function*(pt){if("auth/missing-recaptcha-token"!==pt.code)return Promise.reject(pt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Gt=yield ci(G,ie,"getOobCode",!0);Be(Gt,h),yield At(G,Gt)}});return function(pt){return et.apply(this,arguments)}}())}),k.apply(this,arguments)}function ut(){return(ut=(0,m.Z)(function*(g,d,h){const w=(0,S.m9)(g),G=Yr.credentialWithLink(d,h||at());return Pe(G._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),_s(w,G)})).apply(this,arguments)}function ft(g,d){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:createAuthUri",en(g,d))})).apply(this,arguments)}function ur(){return(ur=(0,m.Z)(function*(g,d){const w={identifier:d,continueUri:We()?at():"http://localhost"},{signinMethods:G}=yield ft((0,S.m9)(g),w);return G||[]})).apply(this,arguments)}function y(){return(y=(0,m.Z)(function*(g,d){const h=(0,S.m9)(g),G={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Sr(h.auth,G,d);const{email:ie}=yield Ze(h.auth,G);ie!==g.email&&(yield g.reload())})).apply(this,arguments)}function F(){return(F=(0,m.Z)(function*(g,d,h){const w=(0,S.m9)(g),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};h&&Sr(w.auth,ie,h);const{email:Be}=yield Yn(w.auth,ie);Be!==g.email&&(yield g.reload())})).apply(this,arguments)}function ne(g,d){return ye.apply(this,arguments)}function ye(){return(ye=(0,m.Z)(function*(g,d){return Vt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Fe(){return(Fe=(0,m.Z)(function*(g,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const w=(0,S.m9)(g),ie={idToken:yield w.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},Be=yield Wt(w,ne(w.auth,ie));w.displayName=Be.displayName||null,w.photoURL=Be.photoUrl||null;const et=w.providerData.find(({providerId:pt})=>"password"===pt);et&&(et.displayName=w.displayName,et.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Be)})).apply(this,arguments)}function Ot(g,d,h){return nn.apply(this,arguments)}function nn(){return(nn=(0,m.Z)(function*(g,d,h){const{auth:w}=g,ie={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(ie.email=d),h&&(ie.password=h);const Be=yield Wt(g,mo(w,ie));yield g._updateTokensIfNecessary(Be,!0)})).apply(this,arguments)}class Sn{constructor(d,h,w={}){this.isNewUser=d,this.providerId=h,this.profile=w}}class Mn extends Sn{constructor(d,h,w,G){super(d,h,w),this.username=G}}class _n extends Sn{constructor(d,h){super(d,"facebook.com",h)}}class jr extends Mn{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class An extends Sn{constructor(d,h){super(d,"google.com",h)}}class Es extends Mn{constructor(d,h,w){super(d,"twitter.com",h,w)}}function qi(g){const{user:d,_tokenResponse:h}=g;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function qn(g){var d,h;if(!g)return null;const{providerId:w}=g,G=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},ie=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!w&&g?.idToken){const Be=null===(h=null===(d=pr(g.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(Be)return new Sn(ie,"anonymous"!==Be&&"custom"!==Be?Be:null)}if(!w)return null;switch(w){case"facebook.com":return new _n(ie,G);case"github.com":return new jr(ie,G);case"google.com":return new An(ie,G);case"twitter.com":return new Es(ie,G,g.screenName||null);case"custom":case"anonymous":return new Sn(ie,null);default:return new Sn(ie,w,G)}}(h)}class Ks{constructor(d,h,w){this.type=d,this.credential=h,this.auth=w}static _fromIdtoken(d,h){return new Ks("enroll",d,h)}static _fromMfaPendingCredential(d){return new Ks("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,w;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Ks._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(w=d.multiFactorSession)&&void 0!==w&&w.idToken)return Ks._fromIdtoken(d.multiFactorSession.idToken)}return null}}class wo{constructor(d,h,w){this.session=d,this.hints=h,this.signInResolver=w}static _fromError(d,h){const w=yr(d),G=h.customData._serverResponse,ie=(G.mfaInfo||[]).map(et=>bn._fromServerResponse(w,et));Pe(G.mfaPendingCredential,w,"internal-error");const Be=Ks._fromMfaPendingCredential(G.mfaPendingCredential);return new wo(Be,ie,function(){var et=(0,m.Z)(function*(pt){const Gt=yield pt._process(w,Be);delete G.mfaInfo,delete G.mfaPendingCredential;const pn=Object.assign(Object.assign({},G),{idToken:Gt.idToken,refreshToken:Gt.refreshToken});switch(h.operationType){case"signIn":const yn=yield Mi._fromIdTokenResponse(w,h.operationType,pn);return yield w._updateCurrentUser(yn.user),yn;case"reauthenticate":return Pe(h.user,w,"internal-error"),Mi._forOperation(h.user,h.operationType,pn);default:te(w,"internal-error")}});return function(pt){return et.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,m.Z)(function*(){return h.signInResolver(d)})()}}function In(g,d){return Vt(g,"POST","/v2/accounts/mfaEnrollment:start",en(g,d))}class Xi{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(w=>bn._fromServerResponse(d.auth,w)))})}static _fromUser(d){return new Xi(d)}getSession(){var d=this;return(0,m.Z)(function*(){return Ks._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,h){var w=this;return(0,m.Z)(function*(){const G=d,ie=yield w.getSession(),Be=yield Wt(w.user,G._process(w.user.auth,ie,h));return yield w.user._updateTokensIfNecessary(Be),w.user.reload()})()}unenroll(d){var h=this;return(0,m.Z)(function*(){const w="string"==typeof d?d:d.uid,G=yield h.user.getIdToken();try{const ie=yield Wt(h.user,function Ps(g,d){return Vt(g,"POST","/v2/accounts/mfaEnrollment:withdraw",en(g,d))}(h.user.auth,{idToken:G,mfaEnrollmentId:w}));h.enrolledFactors=h.enrolledFactors.filter(({uid:Be})=>Be!==w),yield h.user._updateTokensIfNecessary(ie),yield h.user.reload()}catch(ie){throw ie}})()}}const Zs=new WeakMap,Ra="__sak";class Ea{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Ra,"1"),this.storage.removeItem(Ra),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const $n=(()=>{class g extends Ea{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,w)=>this.onStorageEvent(h,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Is(){const g=(0,S.z$)();return Je(g)||Te(g)}()&&function rn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Mt(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const w of Object.keys(this.listeners)){const G=this.storage.getItem(w),ie=this.localCache[w];G!==ie&&h(w,ie,G)}}onStorageEvent(h,w=!1){if(!h.key)return void this.forAllChangedKeys((et,pt,Gt)=>{this.notifyListeners(et,Gt)});const G=h.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const et=this.storage.getItem(G);if(h.newValue!==et)null!==h.newValue?this.storage.setItem(G,h.newValue):this.storage.removeItem(G);else if(this.localCache[G]===h.newValue&&!w)return}const ie=()=>{const et=this.storage.getItem(G);!w&&this.localCache[G]===et||this.notifyListeners(G,et)},Be=this.storage.getItem(G);!function ht(){return(0,S.w1)()&&10===document.documentMode}()||Be===h.newValue||h.newValue===h.oldValue?ie():setTimeout(ie,10)}notifyListeners(h,w){this.localCache[h]=w;const G=this.listeners[h];if(G)for(const ie of Array.from(G))ie(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,w,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:w,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(w)}_removeListener(h,w){this.listeners[h]&&(this.listeners[h].delete(w),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,w){var G=()=>super._set,ie=this;return(0,m.Z)(function*(){yield G().call(ie,h,w),ie.localCache[h]=JSON.stringify(w)})()}_get(h){var w=()=>super._get,G=this;return(0,m.Z)(function*(){const ie=yield w().call(G,h);return G.localCache[h]=JSON.stringify(ie),ie})()}_remove(h){var w=()=>super._remove,G=this;return(0,m.Z)(function*(){yield w().call(G,h),delete G.localCache[h]})()}}return g.type="LOCAL",g})(),ro=(()=>{class g extends Ea{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,w){}_removeListener(h,w){}}return g.type="SESSION",g})();let Pa=(()=>{class g{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const w=this.receivers.find(ie=>ie.isListeningto(h));if(w)return w;const G=new g(h);return this.receivers.push(G),G}isListeningto(h){return this.eventTarget===h}handleEvent(h){var w=this;return(0,m.Z)(function*(){const G=h,{eventId:ie,eventType:Be,data:et}=G.data,pt=w.handlersMap[Be];if(!pt?.size)return;G.ports[0].postMessage({status:"ack",eventId:ie,eventType:Be});const Gt=Array.from(pt).map(function(){var yn=(0,m.Z)(function*(Gi){return Gi(G.origin,et)});return function(Gi){return yn.apply(this,arguments)}}()),pn=yield function za(g){return Promise.all(g.map(function(){var d=(0,m.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(w){return{fulfilled:!1,reason:w}}});return function(h){return d.apply(this,arguments)}}()))}(Gt);G.ports[0].postMessage({status:"done",eventId:ie,eventType:Be,response:pn})})()}_subscribe(h,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(w)}_unsubscribe(h,w){this.handlersMap[h]&&w&&this.handlersMap[h].delete(w),(!w||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function xt(g="",d=10){let h="";for(let w=0;w<d;w++)h+=Math.floor(10*Math.random());return g+h}class os{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,w=50){var G=this;return(0,m.Z)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let Be,et;return new Promise((pt,Gt)=>{const pn=xt("",20);ie.port1.start();const yn=setTimeout(()=>{Gt(new Error("unsupported_event"))},w);et={messageChannel:ie,onMessage(Gi){const Sa=Gi;if(Sa.data.eventId===pn)switch(Sa.data.status){case"ack":clearTimeout(yn),Be=setTimeout(()=>{Gt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Be),pt(Sa.data.response);break;default:clearTimeout(yn),clearTimeout(Be),Gt(new Error("invalid_response"))}}},G.handlers.add(et),ie.port1.addEventListener("message",et.onMessage),G.target.postMessage({eventType:d,eventId:pn,data:h},[ie.port2])}).finally(()=>{et&&G.removeMessageHandler(et)})})()}}function Ar(){return window}function an(){return typeof Ar().WorkerGlobalScope<"u"&&"function"==typeof Ar().importScripts}function Na(){return(Na=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const bt="firebaseLocalStorageDb",Oo="firebaseLocalStorage",ra="fbase_key";class Hu{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function nu(g,d){return g.transaction([Oo],d?"readwrite":"readonly").objectStore(Oo)}function Eu(){const g=indexedDB.open(bt,1);return new Promise((d,h)=>{g.addEventListener("error",()=>{h(g.error)}),g.addEventListener("upgradeneeded",()=>{const w=g.result;try{w.createObjectStore(Oo,{keyPath:ra})}catch(G){h(G)}}),g.addEventListener("success",(0,m.Z)(function*(){const w=g.result;w.objectStoreNames.contains(Oo)?d(w):(w.close(),yield function vi(){const g=indexedDB.deleteDatabase(bt);return new Hu(g).toPromise()}(),d(yield Eu()))}))})}function Iu(g,d,h){return dl.apply(this,arguments)}function dl(){return(dl=(0,m.Z)(function*(g,d,h){const w=nu(g,!0).put({[ra]:d,value:h});return new Hu(w).toPromise()})).apply(this,arguments)}function zu(){return(zu=(0,m.Z)(function*(g,d){const h=nu(g,!1).get(d),w=yield new Hu(h).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function hl(g,d){const h=nu(g,!0).delete(d);return new Hu(h).toPromise()}const fi=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,m.Z)(function*(){return h.db||(h.db=yield Eu()),h.db})()}_withRetries(h){var w=this;return(0,m.Z)(function*(){let G=0;for(;;)try{const ie=yield w._openDb();return yield h(ie)}catch(ie){if(G++>3)throw ie;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,m.Z)(function*(){return an()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,m.Z)(function*(){h.receiver=Pa._getInstance(function st(){return an()?self:null}()),h.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(G,ie){return{keyProcessed:(yield h._poll()).includes(ie.key)}});return function(G,ie){return w.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(G,ie){return["keyChanged"]});return function(G,ie){return w.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,m.Z)(function*(){var w,G;if(h.activeServiceWorker=yield function wn(){return Na.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new os(h.activeServiceWorker);const ie=yield h.sender._send("ping",{},800);!ie||(null===(w=ie[0])||void 0===w?void 0:w.fulfilled)&&(null===(G=ie[0])||void 0===G?void 0:G.value.includes("keyChanged"))&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Ht(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:h},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const h=yield Eu();return yield Iu(h,Ra,"1"),yield hl(h,Ra),!0}catch{}return!1})()}_withPendingWrite(h){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield h()}finally{w.pendingWrites--}})()}_set(h,w){var G=this;return(0,m.Z)(function*(){return G._withPendingWrite((0,m.Z)(function*(){return yield G._withRetries(ie=>Iu(ie,h,w)),G.localCache[h]=w,G.notifyServiceWorker(h)}))})()}_get(h){var w=this;return(0,m.Z)(function*(){const G=yield w._withRetries(ie=>function Jl(g,d){return zu.apply(this,arguments)}(ie,h));return w.localCache[h]=G,G})()}_remove(h){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(G=>hl(G,h)),delete w.localCache[h],w.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,m.Z)(function*(){const w=yield h._withRetries(Be=>{const et=nu(Be,!1).getAll();return new Hu(et).toPromise()});if(!w)return[];if(0!==h.pendingWrites)return[];const G=[],ie=new Set;for(const{fbase_key:Be,value:et}of w)ie.add(Be),JSON.stringify(h.localCache[Be])!==JSON.stringify(et)&&(h.notifyListeners(Be,et),G.push(Be));for(const Be of Object.keys(h.localCache))h.localCache[Be]&&!ie.has(Be)&&(h.notifyListeners(Be,null),G.push(Be));return G})()}notifyListeners(h,w){this.localCache[h]=w;const G=this.listeners[h];if(G)for(const ie of Array.from(G))ie(w)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(w)}_removeListener(h,w){this.listeners[h]&&(this.listeners[h].delete(w),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function Yt(g,d){return Vt(g,"POST","/v2/accounts/mfaSignIn:start",en(g,d))}const Ft=1e12;class Io{constructor(d){this.auth=d,this.counter=Ft,this._widgets=new Map}render(d,h){const w=this.counter;return this._widgets.set(w,new Ga(d,this.auth.name,h||{})),this.counter++,w}reset(d){var h;const w=d||Ft;null===(h=this._widgets.get(w))||void 0===h||h.delete(),this._widgets.delete(w)}getResponse(d){var h;return(null===(h=this._widgets.get(d||Ft))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,m.Z)(function*(){var w;return null===(w=h._widgets.get(d||Ft))||void 0===w||w.execute(),""})()}}class Ga{constructor(d,h,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof d?document.getElementById(d):d;Pe(G,"argument-error",{appName:h}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ko(g){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<g;w++)d.push(h.charAt(Math.floor(Math.random()*h.length)));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ka=si("rcb"),bu=new Pn(3e4,6e4);class b{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Ar().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return Pe(function v(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&En(Ar().grecaptcha)?Promise.resolve(Ar().grecaptcha):new Promise((w,G)=>{const ie=Ar().setTimeout(()=>{G(ce(d,"network-request-failed"))},bu.get());Ar()[ka]=()=>{Ar().clearTimeout(ie),delete Ar()[ka];const et=Ar().grecaptcha;if(!et||!En(et))return void G(ce(d,"internal-error"));const pt=et.render;et.render=(Gt,pn)=>{const yn=pt(Gt,pn);return this.counter++,yn},this.hostLanguage=h,w(et)},wi(`https://www.google.com/recaptcha/api.js??${(0,S.xO)({onload:ka,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(ie),G(ce(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=Ar().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class A{load(d){return(0,m.Z)(function*(){return new Io(d)})()}clearedOneInstance(){}}const U="recaptcha",re={theme:"light",type:"image"};class Ee{constructor(d,h=Object.assign({},re),w){this.parameters=h,this.type=U,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yr(w),this.isInvisible="invisible"===this.parameters.size,Pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof d?document.getElementById(d):d;Pe(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new A:new b,this.validateStartingState()}verify(){var d=this;return(0,m.Z)(function*(){d.assertNotDestroyed();const h=yield d.render(),w=d.getAssertedRecaptcha();return w.getResponse(h)||new Promise(ie=>{const Be=et=>{!et||(d.tokenChangeListeners.delete(Be),ie(et))};d.tokenChangeListeners.add(Be),d.isInvisible&&w.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Pe(!this.parameters.sitekey,this.auth,"argument-error"),Pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(w=>w(h)),"function"==typeof d)d(h);else if("string"==typeof d){const w=Ar()[d];"function"==typeof w&&w(h)}}}assertNotDestroyed(){Pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,m.Z)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const w=document.createElement("div");h.appendChild(w),h=w}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,m.Z)(function*(){Pe(We()&&!an(),d.auth,"internal-error"),yield function Ae(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function Ke(g){return It.apply(this,arguments)}(d.auth);Pe(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return Pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class it{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=ji._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function Ue(){return(Ue=(0,m.Z)(function*(g,d,h){const w=yr(g),G=yield zi(w,d,(0,S.m9)(h));return new it(G,ie=>_s(w,ie))})).apply(this,arguments)}function Tn(){return(Tn=(0,m.Z)(function*(g,d,h){const w=(0,S.m9)(g);yield Ln(!1,w,"phone");const G=yield zi(w.auth,d,(0,S.m9)(h));return new it(G,ie=>z(w,ie))})).apply(this,arguments)}function Fi(){return(Fi=(0,m.Z)(function*(g,d,h){const w=(0,S.m9)(g),G=yield zi(w.auth,d,(0,S.m9)(h));return new it(G,ie=>xe(w,ie))})).apply(this,arguments)}function zi(g,d,h){return io.apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(g,d,h){var w;const G=yield h.verify();try{let ie;if(Pe("string"==typeof G,g,"argument-error"),Pe(h.type===U,g,"argument-error"),ie="string"==typeof d?{phoneNumber:d}:d,"session"in ie){const Be=ie.session;if("phoneNumber"in ie)return Pe("enroll"===Be.type,g,"internal-error"),(yield In(g,{idToken:Be.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{Pe("signin"===Be.type,g,"internal-error");const et=(null===(w=ie.multiFactorHint)||void 0===w?void 0:w.uid)||ie.multiFactorUid;return Pe(et,g,"missing-multi-factor-info"),(yield Yt(g,{mfaPendingCredential:Be.credential,mfaEnrollmentId:et,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Be}=yield Hs(g,{phoneNumber:ie.phoneNumber,recaptchaToken:G});return Be}}finally{h._reset()}})).apply(this,arguments)}function ga(){return(ga=(0,m.Z)(function*(g,d){yield vs((0,S.m9)(g),d)})).apply(this,arguments)}let fo=(()=>{class g{constructor(h){this.providerId=g.PROVIDER_ID,this.auth=yr(h)}verifyPhoneNumber(h,w){return zi(this.auth,h,(0,S.m9)(w))}static credential(h,w){return ji._fromVerification(h,w)}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:w,temporaryProof:G}=h;return w&&G?ji._fromTokenResponse(w,G):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function bs(g,d){return d?mr(d):(Pe(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class so extends ns{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return gs(d,this._buildIdpRequest())}_linkToIdToken(d,h){return gs(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return gs(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function ko(g){return ta(g.auth,new so(g),g.bypassAuthState)}function Tu(g){const{auth:d,user:h}=g;return Pe(h,d,"internal-error"),to(h,new so(g),g.bypassAuthState)}function Wa(g){return Du.apply(this,arguments)}function Du(){return(Du=(0,m.Z)(function*(g){const{auth:d,user:h}=g;return Pe(h,d,"internal-error"),vs(h,new so(g),g.bypassAuthState)})).apply(this,arguments)}class us{constructor(d,h,w,G,ie=!1){this.auth=d,this.resolver=w,this.user=G,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,m.Z)(function*(w,G){d.pendingPromise={resolve:w,reject:G};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(ie){d.reject(ie)}});return function(w,G){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:G,postBody:ie,tenantId:Be,error:et,type:pt}=d;if(et)return void h.reject(et);const Gt={auth:h.auth,requestUri:w,sessionId:G,tenantId:Be||void 0,postBody:ie||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(pt)(Gt))}catch(pn){h.reject(pn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return ko;case"linkViaPopup":case"linkViaRedirect":return Wa;case"reauthViaPopup":case"reauthViaRedirect":return Tu;default:te(this.auth,"internal-error")}}resolve(d){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bo=new Pn(2e3,1e4);function _i(){return(_i=(0,m.Z)(function*(g,d,h){const w=yr(g);Ye(g,d,Ii);const G=bs(w,h);return new tc(w,"signInViaPopup",d,G).executeNotNull()})).apply(this,arguments)}function ru(){return(ru=(0,m.Z)(function*(g,d,h){const w=(0,S.m9)(g);Ye(w.auth,d,Ii);const G=bs(w.auth,h);return new tc(w.auth,"reauthViaPopup",d,G,w).executeNotNull()})).apply(this,arguments)}function iu(){return(iu=(0,m.Z)(function*(g,d,h){const w=(0,S.m9)(g);Ye(w.auth,d,Ii);const G=bs(w.auth,h);return new tc(w.auth,"linkViaPopup",d,G,w).executeNotNull()})).apply(this,arguments)}let tc=(()=>{class g extends us{constructor(h,w,G,ie,Be){super(h,w,ie,Be),this.provider=G,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var h=this;return(0,m.Z)(function*(){const w=yield h.execute();return Pe(w,h.auth,"internal-error"),w})()}onExecution(){var h=this;return(0,m.Z)(function*(){Me(1===h.filter.length,"Popup operations only handle one event");const w=xt();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],w),h.authWindow.associatedEvent=w,h.resolver._originValidation(h.auth).catch(G=>{h.reject(G)}),h.resolver._isIframeWebStorageSupported(h.auth,G=>{G||h.reject(ce(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const h=()=>{var w,G;this.pollId=null!==(G=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==G&&G.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,bo.get())};h()}}return g.currentPopupAction=null,g})();const gl=new Map;class Wc extends us{constructor(d,h,w=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,w),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,m.Z)(function*(){let w=gl.get(h.auth._key());if(!w){try{const ie=(yield function su(g,d){return rc.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;w=()=>Promise.resolve(ie)}catch(G){w=()=>Promise.reject(G)}gl.set(h.auth._key(),w)}return h.bypassAuthState||gl.set(h.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===d.type)return h().call(w,d);if("unknown"!==d.type){if(d.eventId){const G=yield w.auth._redirectUserForId(d.eventId);if(G)return w.user=G,h().call(w,d);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function rc(){return(rc=(0,m.Z)(function*(g,d){const h=yl(d),w=ml(g);if(!(yield w._isAvailable()))return!1;const G="true"===(yield w._get(h));return yield w._remove(h),G})).apply(this,arguments)}function Cu(g,d){return qc.apply(this,arguments)}function qc(){return(qc=(0,m.Z)(function*(g,d){return ml(g)._set(yl(d),"true")})).apply(this,arguments)}function ou(g,d){gl.set(g._key(),d)}function ml(g){return mr(g._redirectPersistence)}function yl(g){return Oe("pendingRedirect",g.config.apiKey,g.name)}function La(){return(La=(0,m.Z)(function*(g,d,h){const w=yr(g);Ye(g,d,Ii),yield w._initializationPromise;const G=bs(w,h);return yield Cu(G,w),G._openRedirect(w,d,"signInViaRedirect")})).apply(this,arguments)}function ic(){return(ic=(0,m.Z)(function*(g,d,h){const w=(0,S.m9)(g);Ye(w.auth,d,Ii),yield w.auth._initializationPromise;const G=bs(w.auth,h);yield Cu(G,w.auth);const ie=yield qa(w);return G._openRedirect(w.auth,d,"reauthViaRedirect",ie)})).apply(this,arguments)}function Ls(){return(Ls=(0,m.Z)(function*(g,d,h){const w=(0,S.m9)(g);Ye(w.auth,d,Ii),yield w.auth._initializationPromise;const G=bs(w.auth,h);yield Ln(!1,w,d.providerId),yield Cu(G,w.auth);const ie=yield qa(w);return G._openRedirect(w.auth,d,"linkViaRedirect",ie)})).apply(this,arguments)}function ma(){return(ma=(0,m.Z)(function*(g,d){return yield yr(g)._initializationPromise,Wu(g,d,!1)})).apply(this,arguments)}function Wu(g,d){return pi.apply(this,arguments)}function pi(){return(pi=(0,m.Z)(function*(g,d,h=!1){const w=yr(g),G=bs(w,d),Be=yield new Wc(w,G,h).execute();return Be&&!h&&(delete Be.user._redirectEventId,yield w._persistUserIfCurrent(Be.user),yield w._setRedirectUser(null,d)),Be})).apply(this,arguments)}function qa(g){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,m.Z)(function*(g){const d=xt(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class vl{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(d,w)&&(h=!0,this.sendToConsumer(d,w),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Su(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return po(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var w;if(d.error&&!po(d)){const G=(null===(w=d.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";h.onError(ce(this.auth,G))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const w=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&w}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ia(d))}saveEventToCache(d){this.cachedEventUids.add(Ia(d)),this.lastProcessedEventTime=Date.now()}}function Ia(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function po({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Qd(g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,m.Z)(function*(g,d={}){return Vt(g,"GET","/v1/projects",d)})).apply(this,arguments)}const sc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ba=/^https?/;function go(){return(go=(0,m.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Qd(g);for(const h of d)try{if(qu(h))return}catch{}te(g,"unauthorized-domain")})).apply(this,arguments)}function qu(g){const d=at(),{protocol:h,hostname:w}=new URL(d);if(g.startsWith("chrome-extension://")){const Be=new URL(g);return""===Be.hostname&&""===w?"chrome-extension:"===h&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&Be.hostname===w}if(!ba.test(h))return!1;if(sc.test(g))return w===g;const G=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(w)}const oc=new Pn(3e4,6e4);function Fa(){const g=Ar().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let h=0;h<g.CP.length;h++)g.CP[h]=null}let ia=null;function To(g){return ia=ia||function Ua(g){return new Promise((d,h)=>{var w,G,ie;function Be(){Fa(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Fa(),h(ce(g,"network-request-failed"))},timeout:oc.get()})}if(null!==(G=null===(w=Ar().gapi)||void 0===w?void 0:w.iframes)&&void 0!==G&&G.Iframe)d(gapi.iframes.getContext());else{if(null===(ie=Ar().gapi)||void 0===ie||!ie.load){const et=si("iframefcb");return Ar()[et]=()=>{gapi.load?Be():h(ce(g,"network-request-failed"))},wi(`https://apis.google.com/js/api.js?onload=${et}`).catch(pt=>h(pt))}Be()}}).catch(d=>{throw ia=null,d})}(g),ia}const Ku=new Pn(5e3,15e3),Zu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ka=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yd(g){const d=g.config;Pe(d.authDomain,g,"auth-domain-config-required");const h=d.emulator?Cn(d,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,w={apiKey:d.apiKey,appName:g.name,v:W.SDK_VERSION},G=Ka.get(g.config.apiHost);G&&(w.eid=G);const ie=g._getFrameworks();return ie.length&&(w.fw=ie.join(",")),`${h}?${(0,S.xO)(w).slice(1)}`}function M(){return M=(0,m.Z)(function*(g){const d=yield To(g),h=Ar().gapi;return Pe(h,g,"internal-error"),d.open({where:document.body,url:Yd(g),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zu,dontclear:!0},w=>new Promise(function(){var G=(0,m.Z)(function*(ie,Be){yield w.restyle({setHideOnLeave:!1});const et=ce(g,"network-request-failed"),pt=Ar().setTimeout(()=>{Be(et)},Ku.get());function Gt(){Ar().clearTimeout(pt),ie(w)}w.ping(Gt).then(Gt,()=>{Be(et)})});return function(ie,Be){return G.apply(this,arguments)}}()))}),M.apply(this,arguments)}const X={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jt{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const sa=encodeURIComponent("fac");function Ns(g,d,h,w,G,ie){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,m.Z)(function*(g,d,h,w,G,ie){Pe(g.config.authDomain,g,"auth-domain-config-required"),Pe(g.config.apiKey,g,"invalid-api-key");const Be={apiKey:g.config.apiKey,appName:g.name,authType:h,redirectUrl:w,v:W.SDK_VERSION,eventId:G};if(d instanceof Ii){d.setDefaultLanguage(g.languageCode),Be.providerId=d.providerId||"",(0,S.xb)(d.getCustomParameters())||(Be.customParameters=JSON.stringify(d.getCustomParameters()));for(const[pn,yn]of Object.entries(ie||{}))Be[pn]=yn}if(d instanceof Cr){const pn=d.getScopes().filter(yn=>""!==yn);pn.length>0&&(Be.scopes=pn.join(","))}g.tenantId&&(Be.tid=g.tenantId);const et=Be;for(const pn of Object.keys(et))void 0===et[pn]&&delete et[pn];const pt=yield g._getAppCheckToken(),Gt=pt?`#${sa}=${encodeURIComponent(pt)}`:"";return`${ki(g)}?${(0,S.xO)(et).slice(1)}${Gt}`})).apply(this,arguments)}function ki({config:g}){return g.emulator?Cn(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}const oa="webStorageSupport";class Jd extends class _l{constructor(d){this.factorId=d}_process(d,h,w){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,w);case"signin":return this._finalizeSignIn(d,h.credential);default:return Ie("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Jd(d)}_finalizeEnroll(d,h,w){return function on(g,d){return Vt(g,"POST","/v2/accounts/mfaEnrollment:finalize",en(g,d))}(d,{idToken:h,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function Oa(g,d){return Vt(g,"POST","/v2/accounts/mfaSignIn:finalize",en(g,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ac=(()=>{class g{constructor(){}static assertion(h){return Jd._fromCredential(h)}}return g.FACTOR_ID="phone",g})();var El="@firebase/auth";class Xd{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,m.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(w=>{d(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);!h||(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qu(){return window}function Xc(){return(Xc=(0,m.Z)(function*(g,d,h){var w;const{BuildInfo:G}=Qu();Me(d.sessionId,"AuthEvent did not contain a session ID");const ie=yield td(d.sessionId),Be={};return Te()?Be.ibi=G.packageName:xn()?Be.apn=G.packageName:te(g,"operation-not-supported-in-this-environment"),G.displayName&&(Be.appDisplayName=G.displayName),Be.sessionId=ie,Ns(g,h,d.type,void 0,null!==(w=d.eventId)&&void 0!==w?w:void 0,Be)})).apply(this,arguments)}function ed(){return(ed=(0,m.Z)(function*(g){const{BuildInfo:d}=Qu(),h={};Te()?h.iosBundleId=d.packageName:xn()?h.androidPackageName=d.packageName:te(g,"operation-not-supported-in-this-environment"),yield Qd(g,h)})).apply(this,arguments)}function au(){return(au=(0,m.Z)(function*(g,d,h){const{cordova:w}=Qu();let G=()=>{};try{yield new Promise((ie,Be)=>{let et=null;function pt(){var yn;ie();const Gi=null===(yn=w.plugins.browsertab)||void 0===yn?void 0:yn.close;"function"==typeof Gi&&Gi(),"function"==typeof h?.close&&h.close()}function Gt(){et||(et=window.setTimeout(()=>{Be(ce(g,"redirect-cancelled-by-user"))},2e3))}function pn(){"visible"===document?.visibilityState&&Gt()}d.addPassiveListener(pt),document.addEventListener("resume",Gt,!1),xn()&&document.addEventListener("visibilitychange",pn,!1),G=()=>{d.removePassiveListener(pt),document.removeEventListener("resume",Gt,!1),document.removeEventListener("visibilitychange",pn,!1),et&&window.clearTimeout(et)}})}finally{G()}})).apply(this,arguments)}function td(g){return cc.apply(this,arguments)}function cc(){return(cc=(0,m.Z)(function*(g){const d=zp(g),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function zp(g){if(Me(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),h=new Uint8Array(d);for(let w=0;w<g.length;w++)h[w]=g.charCodeAt(w);return h}(0,S.Pz)("authIdTokenMaxAge"),function eh(g){(0,W._registerComponent)(new Z.wA("auth",(d,{options:h})=>{const w=d.getProvider("app").getImmediate(),G=d.getProvider("heartbeat"),ie=d.getProvider("app-check-internal"),{apiKey:Be,authDomain:et}=w.options;Pe(Be&&!Be.includes(":"),"invalid-api-key",{appName:w.name});const pt={apiKey:Be,authDomain:et,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(g)},Gt=new uo(w,G,ie,pt);return function Un(g,d){const h=d?.persistence||[],w=(Array.isArray(h)?h:[h]).map(mr);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(w,d?.popupRedirectResolver)}(Gt,h),Gt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,w)=>{d.getProvider("auth-internal").initialize()})),(0,W._registerComponent)(new Z.wA("auth-internal",d=>{const h=yr(d.getProvider("auth").getImmediate());return new Xd(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,W.registerVersion)(El,"0.23.2",function df(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,W.registerVersion)(El,"0.23.2","esm2017")}("Browser");class Ba extends vl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,m.Z)(function*(){yield d.initPromise})()}}function nd(g){return dc.apply(this,arguments)}function dc(){return(dc=(0,m.Z)(function*(g){const d=yield Va()._get(Lo(g));return d&&(yield Va()._remove(Lo(g))),d})).apply(this,arguments)}function rd(){const g=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let h=0;h<20;h++){const w=Math.floor(Math.random()*d.length);g.push(d.charAt(w))}return g.join("")}function Va(){return mr($n)}function Lo(g){return Oe("authEvent",g.config.apiKey,g.name)}function uu(g){if(!g?.includes("?"))return{};const[d,...h]=g.split("?");return(0,S.zd)(h.join("?"))}function pc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ce("no-auth-event")}}function ls(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function Au(g=(0,S.z$)()){return!("file:"!==ls()&&"ionic:"!==ls()&&"capacitor:"!==ls()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function yf(){try{const g=self.localStorage,d=xt();if(g)return g.setItem(d,"1"),g.removeItem(d),!function Qa(g=(0,S.z$)()){return function Za(){return(0,S.w1)()&&11===document?.documentMode}()||function uh(g=(0,S.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,S.hl)()}catch{return lh()&&(0,S.hl)()}return!1}function lh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function dr(){return(function ah(){return"http:"===ls()||"https:"===ls()}()||(0,S.ru)()||Au())&&!function mf(){return(0,S.b$)()||(0,S.UG)()}()&&yf()&&!lh()}function vf(){return Au()&&typeof document<"u"}function sd(){return(sd=(0,m.Z)(function*(){return!!vf()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const aa={LOCAL:"local",NONE:"none",SESSION:"session"},cu=Pe,Wp="persistence";function xu(g){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,m.Z)(function*(g){yield g._initializationPromise;const d=Ju(),h=Oe(Wp,g.config.apiKey,g.name);d&&d.setItem(h,g._getPersistence())})).apply(this,arguments)}function Ju(){var g;try{return(null===(g=function ch(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const Xu=Pe;class Mu{constructor(){this.browserResolver=mr(class kr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=Wu,this._overrideRedirectResult=ou}_openPopup(d,h,w,G){var ie=this;return(0,m.Z)(function*(){var Be;Me(null===(Be=ie.eventManagers[d._key()])||void 0===Be?void 0:Be.manager,"_initialize() not called before _openPopup()");const et=yield Ns(d,h,w,at(),G);return function zt(g,d,h,w=500,G=600){const ie=Math.max((window.screen.availHeight-G)/2,0).toString(),Be=Math.max((window.screen.availWidth-w)/2,0).toString();let et="";const pt=Object.assign(Object.assign({},X),{width:w.toString(),height:G.toString(),top:ie,left:Be}),Gt=(0,S.z$)().toLowerCase();h&&(et=Rt(Gt)?"_blank":h),lt(Gt)&&(d=d||"http://localhost",pt.scrollbars="yes");const pn=Object.entries(pt).reduce((Gi,[Sa,ld])=>`${Gi}${Sa}=${ld},`,"");if(function Ge(g=(0,S.z$)()){var d;return Te(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Gt)&&"_self"!==et)return function vn(g,d){const h=document.createElement("a");h.href=g,h.target=d;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(w)}(d||"",et),new Jt(null);const yn=window.open(d||"",et,pn);Pe(yn,g,"popup-blocked");try{yn.focus()}catch{}return new Jt(yn)}(d,et,xt())})()}_openRedirect(d,h,w,G){var ie=this;return(0,m.Z)(function*(){return yield ie._originValidation(d),function wu(g){Ar().location.href=g}(yield Ns(d,h,w,at(),G)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:G,promise:ie}=this.eventManagers[h];return G?Promise.resolve(G):(Me(ie,"If manager is not set, promise should be"),ie)}const w=this.initAndGetManager(d);return this.eventManagers[h]={promise:w},w.catch(()=>{delete this.eventManagers[h]}),w}initAndGetManager(d){var h=this;return(0,m.Z)(function*(){const w=yield function T(g){return M.apply(this,arguments)}(d),G=new vl(d);return w.register("authEvent",ie=>(Pe(ie?.authEvent,d,"invalid-auth-event"),{status:G.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:G},h.iframes[d._key()]=w,G})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(oa,{type:oa},G=>{var ie;const Be=null===(ie=G?.[0])||void 0===ie?void 0:ie[oa];void 0!==Be&&h(!!Be),te(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Oi(g){return go.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return Mt()||Je()||Te()}}),this.cordovaResolver=mr(class lu{constructor(){this._redirectPersistence=ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wu,this._overrideRedirectResult=ou}_initialize(d){var h=this;return(0,m.Z)(function*(){const w=d._key();let G=h.eventManagers.get(w);return G||(G=new Ba(d),h.eventManagers.set(w,G),h.attachCallbackListeners(d,G)),G})()}_openPopup(d){te(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,w,G){var ie=this;return(0,m.Z)(function*(){!function lc(g){var d,h,w,G,ie,Be,et,pt,Gt,pn;const yn=Qu();Pe("function"==typeof(null===(d=yn?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pe(typeof(null===(h=yn?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pe("function"==typeof(null===(ie=null===(G=null===(w=yn?.cordova)||void 0===w?void 0:w.plugins)||void 0===G?void 0:G.browsertab)||void 0===ie?void 0:ie.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(pt=null===(et=null===(Be=yn?.cordova)||void 0===Be?void 0:Be.plugins)||void 0===et?void 0:et.browsertab)||void 0===pt?void 0:pt.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(pn=null===(Gt=yn?.cordova)||void 0===Gt?void 0:Gt.InAppBrowser)||void 0===pn?void 0:pn.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Be=yield ie._initialize(d);yield Be.initialized(),Be.resetRedirect(),function Kd(){gl.clear()}(),yield ie._originValidation(d);const et=function ih(g,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:rd(),postBody:null,tenantId:g.tenantId,error:ce(g,"no-auth-event")}}(d,w,G);yield function Yu(g,d){return Va()._set(Lo(g),d)}(d,et);const pt=yield function gf(g,d,h){return Xc.apply(this,arguments)}(d,et,h),Gt=yield function Hp(g){const{cordova:d}=Qu();return new Promise(h=>{d.plugins.browsertab.isAvailable(w=>{let G=null;w?d.plugins.browsertab.openUrl(g):G=d.InAppBrowser.open(g,function ge(g=(0,S.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),h(G)})})}(pt);return function rh(g,d,h){return au.apply(this,arguments)}(d,Be,Gt)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function nh(g){return ed.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:w,handleOpenURL:G,BuildInfo:ie}=Qu(),Be=setTimeout((0,m.Z)(function*(){yield nd(d),h.onEvent(pc())}),500),et=function(){var pn=(0,m.Z)(function*(yn){clearTimeout(Be);const Gi=yield nd(d);let Sa=null;Gi&&yn?.url&&(Sa=function hc(g,d){var h,w;const G=function Tl(g){const d=uu(g),h=d.link?decodeURIComponent(d.link):void 0,w=uu(h).link,G=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return uu(G).link||G||w||h||g}(d);if(G.includes("/__/auth/callback")){const ie=uu(G),Be=ie.firebaseError?function sh(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(ie.firebaseError)):null,et=null===(w=null===(h=Be?.code)||void 0===h?void 0:h.split("auth/"))||void 0===w?void 0:w[1],pt=et?ce(et):null;return pt?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:pt,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:G,postBody:null}}return null}(Gi,yn.url)),h.onEvent(Sa||pc())});return function(Gi){return pn.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,et);const pt=G,Gt=`${ie.packageName.toLowerCase()}://`;Qu().handleOpenURL=function(){var pn=(0,m.Z)(function*(yn){if(yn.toLowerCase().startsWith(Gt)&&et({url:yn}),"function"==typeof pt)try{pt(yn)}catch(Gi){console.error(Gi)}});return function(yn){return pn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ro,this._completeRedirectFn=Wu,this._overrideRedirectResult=ou}_initialize(d){var h=this;return(0,m.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,w,G){var ie=this;return(0,m.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openPopup(d,h,w,G)})()}_openRedirect(d,h,w,G){var ie=this;return(0,m.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openRedirect(d,h,w,G)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return vf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,m.Z)(function*(){if(d.underlyingResolver)return;const h=yield function mc(){return sd.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function Pu(g){return g.unwrap()}function wf(g){return dh(g)}function dh(g){const{_tokenResponse:d}=g instanceof S.ZR?g.customData:g;if(!d)return null;if(!(g instanceof S.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return fo.credentialFromResult(g);const h=d.providerId;if(!h||"password"===h)return null;let w;switch(h){case"google.com":w=Wo;break;case"facebook.com":w=$i;break;case"github.com":w=ha;break;case"twitter.com":w=Gs;break;default:const{oauthIdToken:G,oauthAccessToken:ie,oauthTokenSecret:Be,pendingToken:et,nonce:pt}=d;return ie||Be||G||et?et?h.startsWith("saml.")?Kn._create(h,et):rs._fromParams({providerId:h,signInMethod:h,pendingToken:et,idToken:G,accessToken:ie}):new bi(h).credential({idToken:G,accessToken:ie,rawNonce:pt}):null}return g instanceof S.ZR?w.credentialFromError(g):w.credentialFromResult(g)}function Qo(g,d){return d.catch(h=>{throw h instanceof S.ZR&&function yc(g,d){var h;const w=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new od(g,function cn(g,d){var h;const w=(0,S.m9)(g),G=d;return Pe(d.customData.operationType,w,"argument-error"),Pe(null===(h=G.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,w,"argument-error"),wo._fromError(w,G)}(g,d));else if(w){const G=dh(d),ie=d;G&&(ie.credential=G,ie.tenantId=w.tenantId||void 0,ie.email=w.email||void 0,ie.phoneNumber=w.phoneNumber||void 0)}}(g,h),h}).then(h=>{const G=h.user;return{operationType:h.operationType,credential:wf(h),additionalUserInfo:qi(h),user:Ca.getOrCreate(G)}})}function Ui(g,d){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,m.Z)(function*(g,d){const h=yield d;return{verificationId:h.verificationId,confirm:w=>Qo(g,h.confirm(w))}})).apply(this,arguments)}class od{constructor(d,h){this.resolver=h,this.auth=function _f(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Qo(Pu(this.auth),this.resolver.resolveSignIn(d))}}class Ca{constructor(d){this._delegate=d,this.multiFactor=function $r(g){const d=(0,S.m9)(g);return Zs.has(d)||Zs.set(d,Xi._fromUser(d)),Zs.get(d)}(d)}static getOrCreate(d){return Ca.USER_MAP.has(d)||Ca.USER_MAP.set(d,new Ca(d)),Ca.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,m.Z)(function*(){return Qo(h.auth,z(h._delegate,d))})()}linkWithPhoneNumber(d,h){var w=this;return(0,m.Z)(function*(){return Ui(w.auth,function Qt(g,d,h){return Tn.apply(this,arguments)}(w._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,m.Z)(function*(){return Qo(h.auth,function ec(g,d,h){return iu.apply(this,arguments)}(h._delegate,d,Mu))})()}linkWithRedirect(d){var h=this;return(0,m.Z)(function*(){return yield xu(yr(h.auth)),function Qc(g,d,h){return function Yc(g,d,h){return Ls.apply(this,arguments)}(g,d,h)}(h._delegate,d,Mu)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,m.Z)(function*(){return Qo(h.auth,xe(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return Ui(this.auth,function Hr(g,d,h){return Fi.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return Qo(this.auth,function Xl(g,d,h){return ru.apply(this,arguments)}(this._delegate,d,Mu))}reauthenticateWithRedirect(d){var h=this;return(0,m.Z)(function*(){return yield xu(yr(h.auth)),function Gu(g,d,h){return function Zc(g,d,h){return ic.apply(this,arguments)}(g,d,h)}(h._delegate,d,Mu)})()}sendEmailVerification(d){return function Y(g,d){return y.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,m.Z)(function*(){return yield function Ro(g,d){return Di.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function rt(g,d){return Ot((0,S.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function mt(g,d){return Ot((0,S.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function as(g,d){return ga.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ke(g,d){return Fe.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function E(g,d,h){return F.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ca.USER_MAP=new WeakMap;const ad=Pe;let vc=(()=>{class g{constructor(h,w){if(this.app=h,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=h.options;ad(G,"invalid-api-key",{appName:h.name}),ad(G,"invalid-api-key",{appName:h.name});const ie=typeof window<"u"?Mu:void 0;this._delegate=w.initialize({options:{persistence:Kp(G,h.name),popupRedirectResolver:ie}}),this._delegate._updateErrorMap(pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ca.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,w){!function Xs(g,d,h){const w=yr(g);Pe(w._canInitEmulator,w,"emulator-config-failed"),Pe(/^https?:\/\//.test(d),w,"invalid-emulator-scheme");const G=!!h?.disableWarnings,ie=br(d),{host:Be,port:et}=function Kr(g){const d=br(g),h=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!h)return{host:"",port:null};const w=h[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(w);if(G){const ie=G[1];return{host:ie,port:Vs(w.substr(ie.length+1))}}{const[ie,Be]=w.split(":");return{host:ie,port:Vs(Be)}}}(d);w.config.emulator={url:`${ie}//${Be}${null===et?"":`:${et}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Be,port:et,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function Ri(){function g(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,h,w)}applyActionCode(h){return function no(g,d){return Or.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return di(this._delegate,h)}confirmPasswordReset(h,w){return function is(g,d,h){return Vr.apply(this,arguments)}(this._delegate,h,w)}createUserWithEmailAndPassword(h,w){var G=this;return(0,m.Z)(function*(){return Qo(G._delegate,function Po(g,d,h){return Rs.apply(this,arguments)}(G._delegate,h,w))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function ar(g,d){return ur.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function se(g,d){return"EMAIL_SIGNIN"===Ji.parseLink(d)?.operation}(0,h)}getRedirectResult(){var h=this;return(0,m.Z)(function*(){ad(dr(),h._delegate,"operation-not-supported-in-this-environment");const w=yield function Jc(g,d){return ma.apply(this,arguments)}(h._delegate,Mu);return w?Qo(h._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function gc(g,d){yr(g)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,w,G){const{next:ie,error:Be,complete:et}=ud(h,w,G);return this._delegate.onAuthStateChanged(ie,Be,et)}onIdTokenChanged(h,w,G){const{next:ie,error:Be,complete:et}=ud(h,w,G);return this._delegate.onIdTokenChanged(ie,Be,et)}sendSignInLinkToEmail(h,w){return function ee(g,d,h){return k.apply(this,arguments)}(this._delegate,h,w)}sendPasswordResetEmail(h,w){return function ei(g,d,h){return Zr.apply(this,arguments)}(this._delegate,h,w||void 0)}setPersistence(h){var w=this;return(0,m.Z)(function*(){let G;switch(function qp(g,d){cu(Object.values(aa).includes(d),g,"invalid-persistence-type"),(0,S.b$)()?cu(d!==aa.SESSION,g,"unsupported-persistence-type"):(0,S.UG)()?cu(d===aa.NONE,g,"unsupported-persistence-type"):lh()?cu(d===aa.NONE||d===aa.LOCAL&&(0,S.hl)(),g,"unsupported-persistence-type"):cu(d===aa.NONE||yf(),g,"unsupported-persistence-type")}(w._delegate,h),h){case aa.SESSION:G=ro;break;case aa.LOCAL:G=(yield mr(fi)._isAvailable())?fi:$n;break;case aa.NONE:G=ii;break;default:return te("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return Qo(this._delegate,function vo(g){return Ao.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return Qo(this._delegate,_s(this._delegate,h))}signInWithCustomToken(h){return Qo(this._delegate,function Kt(g,d){return Pt.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,w){return Qo(this._delegate,function R(g,d,h){return _s((0,S.m9)(g),Yr.credential(d,h))}(this._delegate,h,w))}signInWithEmailLink(h,w){return Qo(this._delegate,function be(g,d,h){return ut.apply(this,arguments)}(this._delegate,h,w))}signInWithPhoneNumber(h,w){return Ui(this._delegate,function Ut(g,d,h){return Ue.apply(this,arguments)}(this._delegate,h,w))}signInWithPopup(h){var w=this;return(0,m.Z)(function*(){return ad(dr(),w._delegate,"operation-not-supported-in-this-environment"),Qo(w._delegate,function pl(g,d,h){return _i.apply(this,arguments)}(w._delegate,h,Mu))})()}signInWithRedirect(h){var w=this;return(0,m.Z)(function*(){return ad(dr(),w._delegate,"operation-not-supported-in-this-environment"),yield xu(w._delegate),function Kc(g,d,h){return function Zd(g,d,h){return La.apply(this,arguments)}(g,d,h)}(w._delegate,h,Mu)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function ws(g,d){return ss.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=aa,g})();function ud(g,d,h){let w=g;"function"!=typeof g&&({next:w,error:d,complete:h}=g);const G=w;return{next:Be=>G(Be&&Ca.getOrCreate(Be)),error:d,complete:h}}function Kp(g,d){const h=function Da(g,d){const h=Ju();if(!h)return[];const w=Oe(Wp,g,d);switch(h.getItem(w)){case aa.NONE:return[ii];case aa.LOCAL:return[fi,ro];case aa.SESSION:return[ro];default:return[]}}(g,d);if(typeof self<"u"&&!h.includes(fi)&&h.push(fi),typeof window<"u")for(const w of[$n,ro])h.includes(w)||h.push(w);return h.includes(ii)||h.push(ii),h}class el{constructor(){this.providerId="phone",this._delegate=new fo(Pu(x.Z.auth()))}static credential(d,h){return fo.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}el.PHONE_SIGN_IN_METHOD=fo.PHONE_SIGN_IN_METHOD,el.PROVIDER_ID=fo.PROVIDER_ID;const Nu=Pe;class Zp{constructor(d,h,w=x.Z.app()){var G;Nu(null===(G=w.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Ee(d,h,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ef(g){g.INTERNAL.registerComponent(new Z.wA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),w=d.getProvider("auth");return new vc(h,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Yr,FacebookAuthProvider:$i,GithubAuthProvider:ha,GoogleAuthProvider:Wo,OAuthProvider:bi,SAMLAuthProvider:ys,PhoneAuthProvider:el,PhoneMultiFactorGenerator:ac,RecaptchaVerifier:Zp,TwitterAuthProvider:Gs,Auth:vc,AuthCredential:ns,Error:S.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.4.2")}(x.Z)},5861:($t,Re,H)=>{"use strict";function m(S,W,N,O,Z,K,V){try{var B=S[K](V),L=B.value}catch($){return void N($)}B.done?W(L):Promise.resolve(L).then(O,Z)}function x(S){return function(){var W=this,N=arguments;return new Promise(function(O,Z){var K=S.apply(W,N);function V(L){m(K,O,Z,V,B,"next",L)}function B(L){m(K,O,Z,V,B,"throw",L)}V(void 0)})}}H.d(Re,{Z:()=>x})}},$t=>{$t($t.s=4662)}]);