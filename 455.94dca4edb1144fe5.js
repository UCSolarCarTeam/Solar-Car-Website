(self.webpackChunkSolar_Car_Website=self.webpackChunkSolar_Car_Website||[]).push([[455],{5455:(W,G,u)=>{"use strict";u.r(G),u.d(G,{PortalModule:()=>$i});var Z=u(6895),Q=u(7099),j=u(529),d=u(433),v=u(4820),x=u(5861),e=u(4650),N=(()=>{return(o=N||(N={})).ADMIN="Admin",o.BUSINESS="Business",o.ENGINEERING="Engineering",o.NONE="None",N;var o})(),I=u(3385),O=u(1762);let S=(()=>{class o{constructor(t){this.firestore=t}addUser(t){return this.firestore.collection("users-collection").doc(t.id).set(t)}getUser(t){return this.firestore.collection("users-collection").doc(t).get()}getUsers(){return this.firestore.collection("users-collection").snapshotChanges()}updateUser(t){return this.firestore.collection("users-collection").doc(t.id).update({email:t.email,verified:t.verified,displayName:t.displayName,userPrivileges:t.userPrivileges,userActions:t.userActions})}deleteUser(t){this.firestore.collection("users-collection").doc(t).delete()}verifyUser(t){return this.firestore.collection("users-collection").doc(t).update({verified:!0,userPrivileges:[N.NONE]})}addUserPrivilege(t,i){this.firestore.collection("users-collection").doc(t).get().subscribe(n=>{const r=n.data();r.userPrivileges.push(i),this.updateUser(r)})}removeUserPrivilege(t,i){this.firestore.collection("users-collection").doc(t).get().subscribe(n=>{const r=n.data();r.userPrivileges=r.userPrivileges.filter(a=>a!==i),this.updateUser(r)})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(O.ST))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),H=(()=>{class o{constructor(t,i,n){this.auth=t,this.router=i,this.userService=n}Login(t,i){return this.auth.signInWithEmailAndPassword(t,i).then(n=>{n.user.emailVerified||(window.alert("Please verify your email address before logging in."),this.auth.signOut()),this.userService.getUser(n.user.uid).subscribe(r=>{const a=r.data();a.verified||(window.alert("Please ask your manager to verify you before logging in."),this.auth.signOut()),window.sessionStorage.setItem("User",JSON.stringify(a)),this.router.navigateByUrl("portal/user")})}).catch(n=>{throw n})}SignUp(t,i,n){return this.auth.createUserWithEmailAndPassword(i,n).then(r=>{const a={id:r.user.uid,displayName:t,email:i,verified:!1,userPrivileges:[N.NONE],userActions:[]};this.auth.currentUser.then(c=>{c.sendEmailVerification()}),this.userService.addUser(a),alert("Succesfully signed up. Please confirm your email and ask your manager to approve your account."),this.router.navigateByUrl("portal/login")}).catch(r=>{throw r})}LogOut(){this.auth.signOut().then(()=>{this.router.navigateByUrl("portal/login"),window.sessionStorage.removeItem("User")})}ChangeEmail(t){return this.auth.currentUser.then(i=>{i.updateEmail(t).then(()=>{const n=JSON.parse(window.sessionStorage.getItem("User"));n.email=t,this.userService.updateUser(n)}).catch(n=>{throw n})})}ResetPassword(t){return this.auth.sendPasswordResetEmail(t).catch(i=>{throw i})}ChangePassword(t){return this.auth.currentUser.then(i=>i.updatePassword(t)).catch(i=>{throw i})}isAdmin(){const t=JSON.parse(window.sessionStorage.getItem("User"));return t&&t.userPrivileges.includes(N.ADMIN)}hasBusinessPrivileges(){const t=JSON.parse(window.sessionStorage.getItem("User"));return t&&(t.userPrivileges.includes(N.ADMIN)||t.userPrivileges.includes(N.BUSINESS))}hasEngineeringPrivileges(){const t=JSON.parse(window.sessionStorage.getItem("User"));return t&&(t.userPrivileges.includes(N.ADMIN)||t.userPrivileges.includes(N.ENGINEERING))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(I.zQ),e.LFG(v.F0),e.LFG(S))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function B(o,s){if(1&o&&(e.TgZ(0,"div")(1,"li",12)(2,"a",13),e._uU(3),e.qZA()()()),2&o){const t=s.$implicit;e.xp6(2),e.s9C("routerLink",t.link),e.xp6(1),e.Oqu(t.label)}}function L(o,s){if(1&o&&(e.ynx(0),e.YNc(1,B,4,2,"div",11),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.businessRouteLinks)}}function z(o,s){if(1&o&&(e.TgZ(0,"div")(1,"li",12)(2,"a",13),e._uU(3),e.qZA()()()),2&o){const t=s.$implicit;e.xp6(2),e.s9C("routerLink",t.link),e.xp6(1),e.Oqu(t.label)}}function h(o,s){if(1&o&&(e.ynx(0),e.YNc(1,z,4,2,"div",11),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.engineeringRouteLinks)}}function p(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6)(2,"div",7),e.YNc(3,L,2,1,"ng-container",5),e.YNc(4,h,2,1,"ng-container",5),e.TgZ(5,"div")(6,"button",8),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.getAuth().LogOut())}),e._uU(7,"Log Out"),e.qZA()(),e.TgZ(8,"a",9),e._UZ(9,"img",10),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.getAuth().hasBusinessPrivileges()),e.xp6(1),e.Q6J("ngIf",t.getAuth().hasEngineeringPrivileges())}}let _=(()=>{class o{constructor(t){this.auth=t,this.businessRouteLinks=[{label:"Team",link:"manage-team"},{label:"Sponsors",link:"manage-sponsors"},{label:"News",link:"manage-news"}],this.engineeringRouteLinks=[{label:"Inventory",link:"manage-inventory"}]}LoggedIn(){const t=JSON.parse(window.sessionStorage.getItem("User"));return null!==t&&t.verified}getAuth(){return this.auth}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(H))},o.\u0275cmp=e.Xpm({type:o,selectors:[["portal-header"]],decls:8,vars:1,consts:[[1,"sticky-top"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-danger"],["href","./portal",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNavAltMarkup","aria-controls","navbarNavAltMarkup","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[4,"ngIf"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse"],[1,"navbar-nav","ml-auto"],[1,"nav-link","user-btn",3,"click"],["routerLink","user",1,"nav-link"],["src","../../../assets/portal/user-icon.png",1,"user-icon"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"a",2)(3,"h3"),e._uU(4," SolarCar Portal "),e.qZA()(),e.TgZ(5,"button",3),e._UZ(6,"span",4),e.qZA(),e.YNc(7,p,10,2,"ng-container",5),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngIf",i.LoggedIn()))},dependencies:[Z.sg,Z.O5,v.yS],styles:["img[_ngcontent-%COMP%]{height:auto;max-width:348px;max-height:58px}.navbar[_ngcontent-%COMP%]{font-size:120%;padding:20px 30px}.sticky-top[_ngcontent-%COMP%]{position:sticky}.user-btn[_ngcontent-%COMP%]{background:none;border:none}.user-icon[_ngcontent-%COMP%]{max-width:40px}"]}),o})(),f=(()=>{class o{constructor(t){this.authService=t}ngOnDestroy(){var t=this;return(0,x.Z)(function*(){yield t.authService.LogOut()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(H))},o.\u0275cmp=e.Xpm({type:o,selectors:[["portal-root"]],decls:2,vars:0,template:function(t,i){1&t&&e._UZ(0,"portal-header")(1,"router-outlet")},dependencies:[v.lC,_]}),o})();var A=u(4847),T=u.n(A),q=u(7523),U=u(3851);let J=(()=>{class o{constructor(t,i){this.firestore=t,this.userActionService=i}addInventoryItem(t){const i=JSON.parse(window.sessionStorage.getItem("User"));return new Promise((n,r)=>{this.firestore.collection("inventory-collection").add(t).then(a=>{this.userActionService.addUserAction({uid:i.id,uName:i.displayName,eid:a.id,eName:"Item: "+t.name,action:q.a.ADDED,dateTime:(new Date).toLocaleString()}),n(a)},a=>r(a))})}getInventoryItems(){return this.firestore.collection("inventory-collection").snapshotChanges()}updateInventoryItem(t){const i=JSON.parse(window.sessionStorage.getItem("User")),n=this.firestore.collection("inventory-collection").doc(t.id);return this.userActionService.addUserAction({uid:i.id,uName:i.displayName,eid:t.id,eName:"Item: "+t.name,action:q.a.UPDATED,dateTime:(new Date).toLocaleString()}),n.update({name:t.name,type:t.type,internalPartNumber:t.internalPartNumber,manufacturerPartNumber:t.manufacturerPartNumber,location:t.location,amount:t.amount,isBorrowable:t.isBorrowable,imageUrl:t.imageUrl,image:t.image}).catch(r=>{throw r})}borrowItem(t){const i=JSON.parse(window.sessionStorage.getItem("User")),n=this.firestore.collection("inventory-collection").doc(t.id);return this.userActionService.addUserAction({uid:i.id,uName:i.displayName,eid:t.id,eName:"Item: "+t.name,action:q.a.BORROWED,dateTime:(new Date).toLocaleString()}),n.update({isBorrowed:!0,borrowedByUser:i.id}).catch(r=>{throw r})}returnItem(t){const i=JSON.parse(window.sessionStorage.getItem("User")),n=this.firestore.collection("inventory-collection").doc(t.id);return this.userActionService.addUserAction({uid:i.id,uName:i.displayName,eid:t.id,eName:"Item: "+t.name,action:q.a.RETURNED,dateTime:(new Date).toLocaleString()}),n.update({isBorrowed:!1,borrowedByUser:""}).catch(r=>{throw r})}useItem(t){const i=JSON.parse(window.sessionStorage.getItem("User")),n=this.firestore.collection("inventory-collection").doc(t.id);return this.userActionService.addUserAction({uid:i.id,uName:i.displayName,eid:t.id,eName:"Item: "+t.name,action:q.a.USED,dateTime:(new Date).toLocaleString()}),t.amount=t.amount-1,n.update({amount:t.amount}).catch(r=>{throw r})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(O.ST),e.LFG(U.X))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var V=u(8445);let ee=(()=>{class o{constructor(t){this.storage=t}uploadFile(t,i){const n=i+t.name;return this.storage.storage.ref().child(n).put(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(V.Q1))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var ae=u(1481);const se=["wrapper"],ne=["sourceImage"];function oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.imageLoadedInView())})("mousedown",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Drag))})("touchstart",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Drag))})("error",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.loadImageError(n))}),e.qZA()}if(2&o){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",t.safeImgDataUrl,e.LSH),e.uIk("alt",t.imageAltText)}}function ie(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topleft"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topleft"))}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topright"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topright"))}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomright"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomright"))}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomleft"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomleft"))}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"top"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"top"))}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"right"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"right"))}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottom"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottom"))}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"left"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"left"))}),e.qZA(),e.BQk()}}function g(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.keyboardAccess(n))}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Move))})("touchstart",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Move))}),e.qZA(),e.YNc(2,ie,21,0,"ng-container",8),e.qZA()}if(2&o){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",t.roundCropper),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}class m{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t]),this.validateOptions()}setOptionsFromChanges(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var b=(()=>{return(o=b||(b={})).Drag="drag",o.Move="move",o.Resize="resize",o.Pinch="pinch",b;var o})();function y(o,s){return o/100*s}let C=(()=>{class o{crop(t,i,n,r){const a=this.getImagePosition(t,i,n,r),c=a.x2-a.x1,M=a.y2-a.y1,E=document.createElement("canvas");E.width=c,E.height=M;const k=E.getContext("2d");if(!k)return null;null!=r.backgroundColor&&(k.fillStyle=r.backgroundColor,k.fillRect(0,0,c,M));const R=(r.transform.scale||1)*(r.transform.flipH?-1:1),$=(r.transform.scale||1)*(r.transform.flipV?-1:1),{translateH:Y,translateV:te}=this.getCanvasTranslate(t,i,r),X=i.transformed;k.setTransform(R,0,0,$,X.size.width/2+Y,X.size.height/2+te),k.translate(-a.x1/R,-a.y1/$),k.rotate((r.transform.rotate||0)*Math.PI/180),k.drawImage(X.image,-X.size.width/2,-X.size.height/2);const K={width:c,height:M,imagePosition:a,cropperPosition:{...n}};r.containWithinAspectRatio&&(K.offsetImagePosition=this.getOffsetImagePosition(t,i,n,r));const ue=this.getResizeRatio(c,M,r);return 1!==ue&&(K.width=Math.round(c*ue),K.height=r.maintainAspectRatio?Math.round(K.width/r.aspectRatio):Math.round(M*ue),function F(o,s,t){const i=o.width,n=o.height,r=i/(s=Math.round(s)),a=n/(t=Math.round(t)),c=Math.ceil(r/2),M=Math.ceil(a/2),E=o.getContext("2d");if(E){const k=E.getImageData(0,0,i,n),R=E.createImageData(s,t),$=k.data,Y=R.data;for(let te=0;te<t;te++)for(let X=0;X<s;X++){const K=4*(X+te*s),ue=te*a;let re=0,fe=0,Ze=0,$e=0,Ve=0,Ge=0,je=0;const Vi=Math.floor(X*r),Gi=Math.floor(te*a);let qe=Math.ceil((X+1)*r),Pe=Math.ceil((te+1)*a);qe=Math.min(qe,i),Pe=Math.min(Pe,n);for(let Se=Gi;Se<Pe;Se++){const Ke=Math.abs(ue-Se)/M,ji=X*r,Ki=Ke*Ke;for(let Ue=Vi;Ue<qe;Ue++){const Xe=Math.abs(ji-Ue)/c,ve=Math.sqrt(Ki+Xe*Xe);if(ve>=1)continue;re=2*ve*ve*ve-3*ve*ve+1;const _e=4*(Ue+Se*i);je+=re*$[_e+3],Ze+=re,$[_e+3]<255&&(re=re*$[_e+3]/250),$e+=re*$[_e],Ve+=re*$[_e+1],Ge+=re*$[_e+2],fe+=re}}Y[K]=$e/fe,Y[K+1]=Ve/fe,Y[K+2]=Ge/fe,Y[K+3]=je/Ze}o.width=s,o.height=t,E.putImageData(R,0,0)}}(E,K.width,K.height)),K.base64=E.toDataURL("image/"+r.format,this.getQuality(r)),K}getCanvasTranslate(t,i,n){if("px"===n.transform.translateUnit){const r=this.getRatio(t,i);return{translateH:(n.transform.translateH||0)*r,translateV:(n.transform.translateV||0)*r}}return{translateH:n.transform.translateH?y(n.transform.translateH,i.transformed.size.width):0,translateV:n.transform.translateV?y(n.transform.translateV,i.transformed.size.height):0}}getRatio(t,i){return i.transformed.size.width/t.nativeElement.offsetWidth}getImagePosition(t,i,n,r){const a=this.getRatio(t,i),c={x1:Math.round(n.x1*a),y1:Math.round(n.y1*a),x2:Math.round(n.x2*a),y2:Math.round(n.y2*a)};return r.containWithinAspectRatio||(c.x1=Math.max(c.x1,0),c.y1=Math.max(c.y1,0),c.x2=Math.min(c.x2,i.transformed.size.width),c.y2=Math.min(c.y2,i.transformed.size.height)),c}getOffsetImagePosition(t,i,n,r){const M=i.transformed.size.width/t.nativeElement.offsetWidth;let E,k;(r.canvasRotation+i.exifTransform.rotate)%2?(E=(i.transformed.size.width-i.original.size.height)/2,k=(i.transformed.size.height-i.original.size.width)/2):(E=(i.transformed.size.width-i.original.size.width)/2,k=(i.transformed.size.height-i.original.size.height)/2);const R={x1:Math.round(n.x1*M)-E,y1:Math.round(n.y1*M)-k,x2:Math.round(n.x2*M)-E,y2:Math.round(n.y2*M)-k};return r.containWithinAspectRatio||(R.x1=Math.max(R.x1,0),R.y1=Math.max(R.y1,0),R.x2=Math.min(R.x2,i.transformed.size.width),R.y2=Math.min(R.y2,i.transformed.size.height)),R}getResizeRatio(t,i,n){const r=n.resizeToWidth/t,a=n.resizeToHeight/i,c=new Array;n.resizeToWidth>0&&c.push(r),n.resizeToHeight>0&&c.push(a);const M=0===c.length?1:Math.min(...c);return M>1&&!n.onlyScaleDown?M:Math.min(M,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),D=(()=>{class o{resetCropperPosition(t,i,n){if(null==t||!t.nativeElement)return;const r=t.nativeElement;if(n.cropperStaticHeight&&n.cropperStaticWidth)i.x1=0,i.x2=r.offsetWidth>n.cropperStaticWidth?n.cropperStaticWidth:r.offsetWidth,i.y1=0,i.y2=r.offsetHeight>n.cropperStaticHeight?n.cropperStaticHeight:r.offsetHeight;else{const a=Math.min(n.cropperScaledMaxWidth,r.offsetWidth),c=Math.min(n.cropperScaledMaxHeight,r.offsetHeight);if(n.maintainAspectRatio)if(r.offsetWidth/n.aspectRatio<r.offsetHeight){i.x1=0,i.x2=a;const M=a/n.aspectRatio;i.y1=(r.offsetHeight-M)/2,i.y2=i.y1+M}else{i.y1=0,i.y2=c;const M=c*n.aspectRatio;i.x1=(r.offsetWidth-M)/2,i.x2=i.x1+M}else i.x1=0,i.x2=a,i.y1=0,i.y2=c}}move(t,i,n){const r=this.getClientX(t)-i.clientX,a=this.getClientY(t)-i.clientY;n.x1=i.x1+r,n.y1=i.y1+a,n.x2=i.x2+r,n.y2=i.y2+a}resize(t,i,n,r,a){const c=this.getClientX(t)-i.clientX,M=this.getClientY(t)-i.clientY;switch(i.position){case"left":n.x1=Math.min(Math.max(i.x1+c,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth);break;case"topleft":n.x1=Math.min(Math.max(i.x1+c,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.y1+M,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"top":n.y1=Math.min(Math.max(i.y1+M,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"topright":n.x2=Math.max(Math.min(i.x2+c,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.y1+M,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"right":n.x2=Math.max(Math.min(i.x2+c,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth);break;case"bottomright":n.x2=Math.max(Math.min(i.x2+c,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.y2+M,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"bottom":n.y2=Math.max(Math.min(i.y2+M,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"bottomleft":n.x1=Math.min(Math.max(i.x1+c,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.y2+M,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"center":const E=t.scale,k=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(i.x2-i.x1)*E),a.cropperScaledMaxWidth),R=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(i.y2-i.y1)*E),a.cropperScaledMaxHeight);n.x1=i.clientX-k/2,n.x2=i.clientX+k/2,n.y1=i.clientY-R/2,n.y2=i.clientY+R/2,n.x1<0?(n.x2-=n.x1,n.x1=0):n.x2>r.width&&(n.x1-=n.x2-r.width,n.x2=r.width),n.y1<0?(n.y2-=n.y1,n.y1=0):n.y2>r.height&&(n.y1-=n.y2-r.height,n.y2=r.height)}a.maintainAspectRatio&&this.checkAspectRatio(i.position,n,r,a)}checkAspectRatio(t,i,n,r){let a=0,c=0;switch(t){case"top":i.x2=i.x1+(i.y2-i.y1)*r.aspectRatio,a=Math.max(i.x2-n.width,0),c=Math.max(0-i.y1,0),(a>0||c>0)&&(i.x2-=c*r.aspectRatio>a?c*r.aspectRatio:a,i.y1+=c*r.aspectRatio>a?c:a/r.aspectRatio);break;case"bottom":i.x2=i.x1+(i.y2-i.y1)*r.aspectRatio,a=Math.max(i.x2-n.width,0),c=Math.max(i.y2-n.height,0),(a>0||c>0)&&(i.x2-=c*r.aspectRatio>a?c*r.aspectRatio:a,i.y2-=c*r.aspectRatio>a?c:a/r.aspectRatio);break;case"topleft":i.y1=i.y2-(i.x2-i.x1)/r.aspectRatio,a=Math.max(0-i.x1,0),c=Math.max(0-i.y1,0),(a>0||c>0)&&(i.x1+=c*r.aspectRatio>a?c*r.aspectRatio:a,i.y1+=c*r.aspectRatio>a?c:a/r.aspectRatio);break;case"topright":i.y1=i.y2-(i.x2-i.x1)/r.aspectRatio,a=Math.max(i.x2-n.width,0),c=Math.max(0-i.y1,0),(a>0||c>0)&&(i.x2-=c*r.aspectRatio>a?c*r.aspectRatio:a,i.y1+=c*r.aspectRatio>a?c:a/r.aspectRatio);break;case"right":case"bottomright":i.y2=i.y1+(i.x2-i.x1)/r.aspectRatio,a=Math.max(i.x2-n.width,0),c=Math.max(i.y2-n.height,0),(a>0||c>0)&&(i.x2-=c*r.aspectRatio>a?c*r.aspectRatio:a,i.y2-=c*r.aspectRatio>a?c:a/r.aspectRatio);break;case"left":case"bottomleft":i.y2=i.y1+(i.x2-i.x1)/r.aspectRatio,a=Math.max(0-i.x1,0),c=Math.max(i.y2-n.height,0),(a>0||c>0)&&(i.x1+=c*r.aspectRatio>a?c*r.aspectRatio:a,i.y2-=c*r.aspectRatio>a?c:a/r.aspectRatio);break;case"center":i.x2=i.x1+(i.y2-i.y1)*r.aspectRatio,i.y2=i.y1+(i.x2-i.x1)/r.aspectRatio;const M=Math.max(0-i.x1,0),E=Math.max(i.x2-n.width,0),k=Math.max(i.y2-n.height,0),R=Math.max(0-i.y1,0);(M>0||E>0||k>0||R>0)&&(i.x1+=k*r.aspectRatio>M?k*r.aspectRatio:M,i.x2-=R*r.aspectRatio>E?R*r.aspectRatio:E,i.y1+=R*r.aspectRatio>E?R:E/r.aspectRatio,i.y2-=k*r.aspectRatio>M?k:M/r.aspectRatio)}}getClientX(t){var i;return(null===(i=t.touches)||void 0===i?void 0:i[0].clientX)||t.clientX||0}getClientY(t){var i;return(null===(i=t.touches)||void 0===i?void 0:i[0].clientY)||t.clientY||0}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();let be=(()=>{class o{constructor(){this.autoRotateSupported=function de(){return new Promise(o=>{const s=new Image;s.onload=()=>{o(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(t,i){return new Promise((n,r)=>{const a=new FileReader;a.onload=c=>{this.loadImage(c.target.result,t.type,i).then(n).catch(r)},a.readAsDataURL(t)})}loadImage(t,i,n){return this.isValidImageType(i)?this.loadBase64Image(t,n):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,i){return new Promise((n,r)=>{const a=new Image;a.onerror=()=>r,a.onload=()=>{const c=document.createElement("canvas"),M=c.getContext("2d");c.width=a.width,c.height=a.height,M?.drawImage(a,0,0),this.loadBase64Image(c.toDataURL(),i).then(n)},a.crossOrigin="anonymous",a.src=t})}loadBase64Image(t,i){return new Promise((n,r)=>{const a=new Image;a.onload=()=>n({originalImage:a,originalBase64:t}),a.onerror=r,a.src=t}).then(n=>this.transformImageBase64(n,i))}transformImageBase64(t,i){var n=this;return(0,x.Z)(function*(){const r=yield n.autoRotateSupported,a=yield function he(o){switch("string"==typeof o&&(o=function pe(o){const s=new DataView(function Fe(o){o=o.replace(/^data\:([^\;]+)\;base64,/gim,"");const s=atob(o),t=s.length,i=new Uint8Array(t);for(let n=0;n<t;n++)i[n]=s.charCodeAt(n);return i.buffer}(o));if(65496!==s.getUint16(0,!1))return-2;const t=s.byteLength;let i=2;for(;i<t;){if(s.getUint16(i+2,!1)<=8)return-1;const n=s.getUint16(i,!1);if(i+=2,65505==n){if(1165519206!==s.getUint32(i+=2,!1))return-1;const r=18761==s.getUint16(i+=6,!1);i+=s.getUint32(i+4,r);const a=s.getUint16(i,r);i+=2;for(let c=0;c<a;c++)if(274==s.getUint16(i+12*c,r))return s.getUint16(i+12*c+8,r)}else{if(65280!=(65280&n))break;i+=s.getUint16(i,!1)}}return-1}(o)),o){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(r?-1:t.originalBase64);return t.originalImage&&t.originalImage.complete?n.transformLoadedImage({original:{base64:t.originalBase64,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a},i):Promise.reject(new Error("No image loaded"))})()}transformLoadedImage(t,i){var n=this;return(0,x.Z)(function*(){const r=i.canvasRotation+t.exifTransform.rotate,a={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===r&&!t.exifTransform.flip&&!i.containWithinAspectRatio)return{original:{base64:t.original.base64,image:t.original.image,size:{...a}},transformed:{base64:t.original.base64,image:t.original.image,size:{...a}},exifTransform:t.exifTransform};const c=n.getTransformedSize(a,t.exifTransform,i),M=document.createElement("canvas");M.width=c.width,M.height=c.height;const E=M.getContext("2d");E?.setTransform(t.exifTransform.flip?-1:1,0,0,1,M.width/2,M.height/2),E?.rotate(Math.PI*(r/2)),E?.drawImage(t.original.image,-a.width/2,-a.height/2);const k=M.toDataURL(),R=yield n.loadImageFromBase64(k);return{original:{base64:t.original.base64,image:t.original.image,size:{...a}},transformed:{base64:k,image:R,size:{width:R.width,height:R.height}},exifTransform:t.exifTransform}})()}loadImageFromBase64(t){return new Promise((i,n)=>{const r=new Image;r.onload=()=>i(r),r.onerror=n,r.src=t})}getTransformedSize(t,i,n){const r=n.canvasRotation+i.rotate;if(n.containWithinAspectRatio){if(r%2){const c=t.height/n.aspectRatio;return{width:Math.max(t.height,t.width*n.aspectRatio),height:Math.max(t.width,c)}}{const c=t.width/n.aspectRatio;return{width:Math.max(t.width,t.height*n.aspectRatio),height:Math.max(t.height,c)}}}return r%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),xe=(()=>{class o{constructor(t,i,n,r,a){var c;this.cropService=t,this.cropperPositionService=i,this.loadImageService=n,this.sanitizer=r,this.cd=a,this.Hammer=(null===(c=window)||void 0===c?void 0:c.Hammer)||null,this.settings=new m,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=b,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.reset()}ngOnChanges(t){var i;this.onChangesUpdateSettings(t),this.onChangesInputImage(t),null!==(i=this.loadedImage)&&void 0!==i&&i.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!t.maintainAspectRatio&&!t.aspectRatio?t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition(),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var t,i,n;return(null===(t=this.imageChangedEvent)||void 0===t||null===(i=t.target)||void 0===i||null===(n=i.files)||void 0===n?void 0:n.length)>0}setCssTransform(){var t;const i=(null===(t=this.transform)||void 0===t?void 0:t.translateUnit)||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${i}, ${this.transform.translateV||0}${i}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit({...this.maxSize}),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var t,i;return(null===(t=this.sourceImage)||void 0===t||null===(i=t.nativeElement)||void 0===i?void 0:i.offsetWidth)>0}onResize(){!this.loadedImage||(this.hidden?this.resizedWhileHidden=!0:(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()))}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;(this.maxSize.width!==t.offsetWidth||this.maxSize.height!==t.offsetHeight)&&(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const i=+t.key;i>=1&&i<=9&&(this.settings.stepSize=i)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const n=t.shiftKey?b.Resize:b.Move,r=t.altKey?function w(o){switch(o){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function l(o){switch(o){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),a=function P(o,s){switch(o){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},n,r),this.moveImg(a),this.moveStop()}startMove(t,i,n=null){var r,a;this.disabled||null!==(r=this.moveStart)&&void 0!==r&&r.active&&(null===(a=this.moveStart)||void 0===a?void 0:a.type)===b.Pinch||i===b.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:i,position:n,transform:{...this.transform},clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t),...this.cropper})}startPinch(t){!this.safeImgDataUrl||(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:b.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2,...this.cropper})}moveImg(t){if(this.moveStart.active){if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===b.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===b.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===b.Drag){var i,n;const r=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,a=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform={...this.transform,translateH:((null===(i=this.moveStart.transform)||void 0===i?void 0:i.translateH)||0)+r,translateV:((null===(n=this.moveStart.transform)||void 0===n?void 0:n.translateV)||0)+a},this.setCssTransform()}this.cd.detectChanges()}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===b.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){var t,i;null!==(t=this.loadedImage)&&void 0!==t&&null!==(i=t.transformed)&&void 0!==i&&i.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){var t,i;if(null!==(t=this.loadedImage)&&void 0!==t&&null!==(i=t.transformed)&&void 0!==i&&i.image){const n=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/n:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/n:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){var t;this.moveStart.active&&(this.moveStart.active=!1,(null===(t=this.moveStart)||void 0===t?void 0:t.type)===b.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){var t,i;if(null!=(null===(t=this.loadedImage)||void 0===t||null===(i=t.transformed)||void 0===i?void 0:i.image)){this.startCropImage.emit();const n=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=n&&this.imageCropped.emit(n),n}return null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C),e.Y36(D),e.Y36(be),e.Y36(ae.H7),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["image-cropper"]],viewQuery:function(t,i){if(1&t&&(e.Gf(se,7),e.Gf(ne,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.wrapper=n.first),e.iGM(n=e.CRH())&&(i.sourceImage=n.first)}},hostVars:6,hostBindings:function(t,i){1&t&&e.NdJ("resize",function(){return i.onResize()},!1,e.Jf7)("mousemove",function(r){return i.moveImg(r)},!1,e.evT)("touchmove",function(r){return i.moveImg(r)},!1,e.evT)("mouseup",function(){return i.moveStop()},!1,e.evT)("touchend",function(){return i.moveStop()},!1,e.evT),2&t&&(e.Udp("text-align",i.alignImage),e.ekj("disabled",i.disabled)("ngx-ix-hidden",i.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart","error"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,i){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,oe,2,8,"img",1),e._UZ(3,"div",2),e.YNc(4,g,3,15,"div",3),e.qZA()),2&t&&(e.Udp("background",i.imageVisible&&i.backgroundColor),e.xp6(2),e.Q6J("ngIf",i.safeImgDataUrl),e.xp6(1),e.Udp("width",i.maxSize.width,"px")("height",i.maxSize.height,"px")("margin-left","center"===i.alignImage?i.marginLeft:null),e.xp6(1),e.Q6J("ngIf",i.imageVisible))},dependencies:[Z.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),o})(),et=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[Z.ez]]}),o})();var tt=u(2687),Ce=u(1281),Be=u(3353),ce=u(3238),Le=u(727),it=u(7579),nt=u(9770),Te=u(6451),ot=u(9646),Ie=u(4968),Me=u(8184),He=u(8605),rt=u(445),me=u(9521),at=u(4080),ze=u(9549),st=u(8675),Oe=u(3900),ye=u(5698),Ee=u(9300),lt=u(4004),ct=u(8505),ut=u(4986),dt=u(7272),pt=u(4482),mt=u(5403),ht=u(5032),ft=u(9718),vt=u(5577);function De(o,s){return s?t=>(0,dt.z)(s.pipe((0,ye.q)(1),function gt(){return(0,pt.e)((o,s)=>{o.subscribe((0,mt.x)(s,ht.Z))})}()),t.pipe(De(o))):(0,vt.z)((t,i)=>o(t,i).pipe((0,ye.q)(1),(0,ft.h)(t)))}var _t=u(5963);const yt=["panel"];function At(o,s){if(1&o&&(e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA()),2&o){const t=s.id,i=e.oxw();e.Q6J("id",i.id)("ngClass",i._classList),e.uIk("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(t))}}const wt=["*"];let xt=0;class Ct{constructor(s,t){this.source=s,this.option=t}}const Tt=(0,ce.Kr)(class{}),Je=new e.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function Mt(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1}}});let Zt=(()=>{class o extends Tt{constructor(t,i,n,r){super(),this._changeDetectorRef=t,this._elementRef=i,this._activeOptionChanges=Le.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new e.vpe,this.opened=new e.vpe,this.closed=new e.vpe,this.optionActivated=new e.vpe,this._classList={},this.id="mat-autocomplete-"+xt++,this.inertGroups=r?.SAFARI||!1,this._autoActiveFirstOption=!!n.autoActiveFirstOption,this._autoSelectActiveOption=!!n.autoSelectActiveOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(t){this._autoActiveFirstOption=(0,Ce.Ig)(t)}get autoSelectActiveOption(){return this._autoSelectActiveOption}set autoSelectActiveOption(t){this._autoSelectActiveOption=(0,Ce.Ig)(t)}set classList(t){this._classList=t&&t.length?(0,Ce.du)(t).reduce((i,n)=>(i[n]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new tt.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const i=new Ct(this,t);this.optionSelected.emit(i)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_setVisibilityClasses(t){t[this._visibleClass]=this.showPanel,t[this._hiddenClass]=!this.showPanel}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(Je),e.Y36(Be.t4))},o.\u0275dir=e.lG2({type:o,viewQuery:function(t,i){if(1&t&&(e.Gf(e.Rgc,7),e.Gf(yt,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.template=n.first),e.iGM(n=e.CRH())&&(i.panel=n.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[e.qOj]}),o})(),St=(()=>{class o extends Zt{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return o.\u0275fac=function(){let s;return function(i){return(s||(s=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["mat-autocomplete"]],contentQueries:function(t,i,n){if(1&t&&(e.Suo(n,ce.K7,5),e.Suo(n,ce.ey,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.optionGroups=r),e.iGM(r=e.CRH())&&(i.options=r)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[e._Bn([{provide:ce.HF,useExisting:o}]),e.qOj],ngContentSelectors:wt,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,At,3,4,"ng-template"))},dependencies:[Z.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0}),o})();const Ye=new e.OlP("mat-autocomplete-scroll-strategy"),Ft={provide:Ye,deps:[Me.aV],useFactory:function Ut(o){return()=>o.scrollStrategies.reposition()}},It={provide:d.JU,useExisting:(0,e.Gpc)(()=>Qe),multi:!0};let Ot=(()=>{class o{constructor(t,i,n,r,a,c,M,E,k,R,$){this._element=t,this._overlay=i,this._viewContainerRef=n,this._zone=r,this._changeDetectorRef=a,this._dir=M,this._formField=E,this._document=k,this._viewportRuler=R,this._defaults=$,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=Le.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new it.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,nt.P)(()=>{const Y=this.autocomplete?this.autocomplete.options:null;return Y?Y.changes.pipe((0,st.O)(Y),(0,Oe.w)(()=>(0,Te.T)(...Y.map(te=>te.onSelectionChange)))):this._zone.onStable.pipe((0,ye.q)(1),(0,Oe.w)(()=>this.optionSelections))}),this._scrollStrategy=c}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(t){this._autocompleteDisabled=(0,Ce.Ig)(t)}ngAfterViewInit(){const t=this._getWindow();typeof t<"u"&&this._zone.runOutsideAngular(()=>t.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const t=this._getWindow();typeof t<"u"&&t.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,Te.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,Ee.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,Ee.h)(()=>this._overlayAttached)):(0,ot.of)()).pipe((0,lt.U)(t=>t instanceof ce.rN?t:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,Te.T)((0,Ie.R)(this._document,"click"),(0,Ie.R)(this._document,"auxclick"),(0,Ie.R)(this._document,"touchend")).pipe((0,Ee.h)(t=>{const i=(0,Be.sA)(t),n=this._formField?this._formField._elementRef.nativeElement:null,r=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!n||!n.contains(i))&&(!r||!r.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const i=t.keyCode,n=(0,me.Vb)(t);if(i===me.hY&&!n&&t.preventDefault(),this.activeOption&&i===me.K5&&this.panelOpen&&!n)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const r=this.autocomplete._keyManager.activeItem,a=i===me.LH||i===me.JH;i===me.Mf||a&&!n&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):a&&this._canOpen()&&this.openPanel(),(a||this.autocomplete._keyManager.activeItem!==r)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let i=t.target,n=i.value;"number"===i.type&&(n=""==n?null:parseFloat(n)),this._previousValue!==n&&(this._previousValue=n,this._pendingAutoselectedOption=null,this._onChange(n),this._canOpen()&&this._document.activeElement===t.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const t=this._zone.onStable.pipe((0,ye.q)(1)),i=this.autocomplete.options.changes.pipe((0,ct.b)(()=>this._positionStrategy.reapplyLastPosition()),function bt(o,s=ut.z){const t=(0,_t.H)(o,s);return De(()=>t)}(0));return(0,Te.T)(t,i).pipe((0,Oe.w)(()=>(this._zone.run(()=>{const n=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),n!==this.panelOpen&&(this.panelOpen?this.autocomplete.opened.emit():this.autocomplete.closed.emit())}),this.panelClosingActions)),(0,ye.q)(1)).subscribe(n=>this._setValueAndClose(n))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(t){const i=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(t):t;this._updateNativeInputValue(i??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const i=t?t.source:this._pendingAutoselectedOption;i&&(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),this.autocomplete._emitSelectEvent(i),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(t){this.autocomplete.options.forEach(i=>{i!==t&&i.selected&&i.deselect()})}_attachOverlay(){let t=this._overlayRef;var i;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new at.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(i=this._formField)||void 0===i?void 0:i.getLabelId()}),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,this._handleOverlayEvents(t),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})})),t&&!t.hasAttached()&&(t.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const n=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&n!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var t;return new Me.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(t=this._defaults)||void 0===t?void 0:t.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],n=this._aboveClass,r=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:n},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:n}];let a;a="above"===this.position?r:"below"===this.position?i:[...i,...r],t.withPositions(a)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;t.autoActiveFirstOption?t._keyManager.setFirstItemActive():t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this._autocompleteDisabled}_getWindow(){var t;return(null===(t=this._document)||void 0===t?void 0:t.defaultView)||window}_scrollToOption(t){const i=this.autocomplete,n=(0,ce.CB)(t,i.options,i.optionGroups);if(0===t&&1===n)i._setScrollTop(0);else if(i.panel){const r=i.options.toArray()[t];if(r){const a=r._getHostElement(),c=(0,ce.jH)(a.offsetTop,a.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(c)}}}_handleOverlayEvents(t){t.keydownEvents().subscribe(i=>{var n;(i.keyCode===me.hY&&!(0,me.Vb)(i)||i.keyCode===me.LH&&(0,me.Vb)(i,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(null!==(n=this._valueBeforeAutoSelection)&&void 0!==n?n:""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),i.stopPropagation(),i.preventDefault())}),t.outsidePointerEvents().subscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(Me.aV),e.Y36(e.s_b),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(Ye),e.Y36(rt.Is,8),e.Y36(ze.G_,9),e.Y36(Z.K0,8),e.Y36(He.rL),e.Y36(Je,8))},o.\u0275dir=e.lG2({type:o,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[e.TTD]}),o})(),Qe=(()=>{class o extends Ot{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return o.\u0275fac=function(){let s;return function(i){return(s||(s=e.n5z(o)))(i||o)}}(),o.\u0275dir=e.lG2({type:o,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(t,i){1&t&&e.NdJ("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(r){return i._handleInput(r)})("keydown",function(r){return i._handleKeydown(r)})("click",function(){return i._handleClick()}),2&t&&e.uIk("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-owns",i.autocompleteDisabled||!i.panelOpen||null==i.autocomplete?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[e._Bn([It]),e.qOj]}),o})(),Et=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Ft],imports:[Me.U8,ce.Ng,ce.BQ,Z.ez,He.ZD,ce.Ng,ce.BQ]}),o})();function Nt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.renderBorrowModal(n))}),e._uU(1," Borrow "),e.qZA()}}function kt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.renderReturnModal(n))}),e._uU(1," Return "),e.qZA()}}function Rt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.useItemModal(n))}),e._uU(1," Use 1 "),e.qZA()}}function qt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",40),e._uU(2),e.qZA(),e.TgZ(3,"td",40),e._uU(4),e.qZA(),e.TgZ(5,"td",40),e._uU(6),e.qZA(),e.TgZ(7,"td",40),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",40),e._uU(14),e.YNc(15,Nt,2,0,"button",41),e.YNc(16,kt,2,0,"button",41),e.YNc(17,Rt,2,0,"button",41),e.qZA(),e.TgZ(18,"td"),e._UZ(19,"img",42),e.qZA(),e.TgZ(20,"td")(21,"button",4),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.renderEditItem(r))}),e._uU(22," Edit "),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(t.internalPartNumber),e.xp6(2),e.Oqu(t.manufacturerPartNumber),e.xp6(2),e.Oqu(t.location),e.xp6(2),e.Oqu(t.amount),e.xp6(2),e.hij(" ",t.borrowedByUser," "),e.xp6(1),e.Q6J("ngIf",!1===t.isBorrowed&&!0===t.isBorrowable),e.xp6(1),e.Q6J("ngIf",!0===t.isBorrowed&&"Borrowed by: You"===t.borrowedByUser),e.xp6(1),e.Q6J("ngIf",!0!==t.isBorrowable),e.xp6(2),e.s9C("src",t.imageUrl,e.LSH)}}function Pt(o,s){if(1&o&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Bt(o,s){if(1&o&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t," ")}}function Lt(o,s){if(1&o&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t," ")}}function Ht(o,s){1&o&&(e.TgZ(0,"span",46),e._uU(1,"(Can not be disabled if item is borrowed)"),e.qZA())}function zt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteImage())}),e._uU(1," X "),e.qZA()}}let ge=new(T())({}),Jt=(()=>{class o{constructor(t,i,n,r,a,c){this.inventoryService=t,this.formBuilder=i,this.uploadService=n,this.userActionService=r,this.authService=a,this.userService=c,this.user=JSON.parse(window.sessionStorage.getItem("User")),this.imageChangedEvent="",this.addItemForm=this.formBuilder.group({name:[""],type:[""],internalPartNumber:[""],manufacturerPartNumber:[""],manufacturer:[""],link:[""],description:[""],amountUnit:[""],location:[""],amount:0,isBorrowable:!1,image:[""]}),this.elecLocals=["Cabinet - Bin 1","Cabinet - Bin 2","Cabinet - Bin 3"],this.mechLocals=["Cabinet - Bin 1","Cabinet - Bin 2","Cabinet - Bin 3"],this.lockerLocals=["Cabinet - Bin 1","Cabinet - Bin 2","Cabinet - Bin 3"],this.basementLocals=["Cabinet - Bin 1","Cabinet - Bin 2","Cabinet - Bin 3"],this.amountUnitOptions=["Each","Meter","Feet","Pack","Pounds","Liter","Roll","Yard"],this.locations=[],this.checkoutButtonText="Borrow",this.editButtonText="Edit",this.submitButtonText="Add Item",this.borrowFilter=!1}fileChangeEvent(t){this.imageChangedEvent=t,this.image=t.target.files[0]}imageCropped(t){this.previewImgUrl=t.base64,this.dataUrlToFile()}dataUrlToFile(){var t=this;return(0,x.Z)(function*(){const i=t.previewImgUrl,n=t.image.name,a=yield(yield fetch(i)).blob(),c=new File([a],n,{type:"image/webp"});t.image=c})()}addItemNotification(t){ge.async(t,"Item has been added","Item failed to add, contact tech support")}updateItemNotification(t){ge.async(t,"Item has been updated","Item failed to update, contact tech support")}borrowItemNotification(t){ge.async(t,"Item has been borrowed","Failed to borrow item, contact tech support")}returnItemNotification(t){ge.async(t,"Item has been returned","Item failed to return, contact tech support")}deleteImage(){this.image=null,this.previewImgUrl=null}useItemNotification(t){ge.async(t,"Item has been used","Item was not used. Check there are more than 1 or contact tech support")}useConfirmationNotification(){return(0,x.Z)(function*(){return new Promise(t=>{ge.confirm("Are you sure you would like to use? Item count will be reduced by 1.",()=>{t(!0)},()=>{t(!1)},{labels:{confirm:"Dangerous action"}})})})()}borrowConfirmationNotification(){return(0,x.Z)(function*(){return new Promise(t=>{ge.confirm("Are you sure you would like to borrow?",()=>{t(!0)},()=>{t(!1)},{labels:{confirm:"Dangerous action"}})})})()}returnConfirmationNotification(){return(0,x.Z)(function*(){return new Promise(t=>{ge.confirm("Are you sure you would like to return?",()=>{t(!0)},()=>{t(!1)},{labels:{confirm:"Dangerous action"}})})})()}borrowCheckNotification(){return(0,x.Z)(function*(){return new Promise(t=>{ge.confirm("The max value for an item than can be borrowed is 1. If you proceed, the item count will be changed to 1",()=>{t(!0)},()=>{t(!1)},{labels:{confirm:"Dangerous action"}})})})()}ngOnInit(){this.inventoryService.getInventoryItems().subscribe(t=>{this.items=t.map(i=>{const n={id:i.payload.doc.id,...i.payload.doc.data()};return""===n.borrowedByUser?(n.borrowedByUser="",n):n.borrowedByUser===this.user.id?(n.borrowedByUser="Borrowed by: You",n):(this.userService.getUser(n.borrowedByUser).subscribe(r=>{const a=r.data();n.borrowedByUser="Borrowed by: "+a.displayName}),n)}),this.locationList=[...new Set(t.map(i=>{const n={id:i.payload.doc.id,...i.payload.doc.data()};return n.location?n.location:null}).filter(i=>null!==i))]})}setImage(t){this.image=t[0];const i=new FileReader;i.onload=n=>{this.previewImgUrl=n.target.result},i.readAsDataURL(this.image)}manageItemForm(){if(this.submitButtonText.startsWith("Edit Item")){if(null==this.image){const t={id:this.updateItemId,name:this.addItemForm.get("name").value,type:this.addItemForm.get("type").value,internalPartNumber:this.addItemForm.get("internalPartNumber").value,manufacturerPartNumber:this.addItemForm.get("manufacturerPartNumber").value,manufacturer:this.addItemForm.get("manufacturer").value,link:this.addItemForm.get("link").value,description:this.addItemForm.get("description").value,amountUnit:this.addItemForm.get("amountUnit").value,location:this.addItemForm.get("location").value,amount:this.addItemForm.get("amount").value,isBorrowable:this.addItemForm.get("isBorrowable").value,isBorrowed:!1,borrowedByUser:"",image:null,imageUrl:this.previewImgUrl};let i=this.inventoryService.updateInventoryItem(t);this.updateItemNotification(i)}else{const t=this.updateItemId,i=this.addItemForm.get("name").value,n=this.addItemForm.get("type").value,r=this.addItemForm.get("internalPartNumber").value,a=this.addItemForm.get("manufacturerPartNumber").value,c=this.addItemForm.get("manufacturer").value,M=this.addItemForm.get("link").value,E=this.addItemForm.get("description").value,k=this.addItemForm.get("amountUnit").value,R=this.addItemForm.get("location").value,$=this.addItemForm.get("amount").value,Y=this.addItemForm.get("isBorrowable").value;this.uploadService.uploadFile(this.image,"assets/inventory_images/").then(te=>{te.ref.getDownloadURL().then(X=>{let ue=this.inventoryService.updateInventoryItem({id:t,name:i,type:n,internalPartNumber:r,manufacturerPartNumber:a,manufacturer:c,link:M,description:E,amountUnit:k,location:R,amount:$,isBorrowable:Y,isBorrowed:!1,borrowedByUser:"",image:null,imageUrl:X});this.updateItemNotification(ue)})})}return this.resetForm(),void this.modalVisiblity(!1)}if(null==this.image){const t={name:this.addItemForm.get("name").value,type:this.addItemForm.get("type").value,internalPartNumber:this.addItemForm.get("internalPartNumber").value,manufacturerPartNumber:this.addItemForm.get("manufacturerPartNumber").value,manufacturer:this.addItemForm.get("manufacturer").value,link:this.addItemForm.get("link").value,description:this.addItemForm.get("description").value,amountUnit:this.addItemForm.get("amountUnit").value,location:this.addItemForm.get("location").value,amount:this.addItemForm.get("amount").value,isBorrowable:this.addItemForm.get("isBorrowable").value,isBorrowed:!1,borrowedByUser:"",image:null,imageUrl:"https://firebasestorage.googleapis.com/v0/b/solarcardatabase.appspot.com/o/assets%2Finventory_images%2Fno_img.png?alt=media&token=47ff8883-f59c-48d9-89dd-5db91fe23021"};let i=this.inventoryService.addInventoryItem(t);this.addItemNotification(i)}else{const t=this.addItemForm.get("name").value,i=this.addItemForm.get("type").value,n=this.addItemForm.get("internalPartNumber").value,r=this.addItemForm.get("manufacturerPartNumber").value,a=this.addItemForm.get("manufacturer").value,c=this.addItemForm.get("link").value,M=this.addItemForm.get("description").value,E=this.addItemForm.get("amountUnit").value,k=this.addItemForm.get("location").value,R=this.addItemForm.get("amount").value,$=this.addItemForm.get("isBorrowable").value;this.uploadService.uploadFile(this.image,"assets/inventory_images/").then(Y=>{Y.ref.getDownloadURL().then(te=>{let K=this.inventoryService.addInventoryItem({name:t,type:i,internalPartNumber:n,manufacturerPartNumber:r,manufacturer:a,link:c,description:M,amountUnit:E,location:k,amount:R,isBorrowable:$,isBorrowed:!1,borrowedByUser:"",image:null,imageUrl:te});this.addItemNotification(K)})})}this.resetForm(),this.modalVisiblity(!1)}modalVisiblity(t){!0===t?document.getElementsByClassName("itemControlModal")[0].setAttribute("style","display:block"):document.getElementsByClassName("itemControlModal")[0].setAttribute("style","display:none")}renderAddItem(){this.resetForm(),this.modalVisiblity(!0),this.submitButtonText="Add Item"}renderEditItem(t){this.resetForm(),this.modalVisiblity(!0),this.updateItemId=t.id,this.addItemForm.get("name").setValue(t.name),this.addItemForm.get("type").setValue(t.type),this.addItemForm.get("internalPartNumber").setValue(t.internalPartNumber),this.addItemForm.get("manufacturerPartNumber").setValue(t.manufacturerPartNumber),this.addItemForm.get("manufacturer").setValue(t.manufacturer),this.addItemForm.get("description").setValue(t.description),this.addItemForm.get("amountUnit").setValue(t.amountUnit),this.addItemForm.get("link").setValue(t.link),this.addItemForm.get("location").setValue(t.location),this.addItemForm.get("amount").setValue(t.amount),this.addItemForm.get("isBorrowable").setValue(t.isBorrowable),t.isBorrowed&&this.addItemForm.get("isBorrowable").disable(),this.previewImgUrl=t.imageUrl,this.image=null,this.submitButtonText="Edit Item",document.documentElement.scrollTop=0}cancelItemForm(){this.modalVisiblity(!1),this.resetForm()}resetForm(){this.addItemForm.reset(),this.previewImgUrl="",this.imageChangedEvent="",this.updateItemId="",this.addItemForm.get("isBorrowable").enable()}renderBorrowModal(t){var i=this;return(0,x.Z)(function*(){if((yield i.borrowConfirmationNotification())&&!0===t.isBorrowable&&!1===t.isBorrowed){let r=i.inventoryService.borrowItem(t);i.borrowItemNotification(r)}})()}renderReturnModal(t){var i=this;return(0,x.Z)(function*(){if((yield i.returnConfirmationNotification())&&!0===t.isBorrowable&&!0===t.isBorrowed){t.borrowedByUser=i.user.id;let r=i.inventoryService.returnItem(t);i.returnItemNotification(r)}})()}useItemModal(t){var i=this;return(0,x.Z)(function*(){if(t.amount>0){if(yield i.useConfirmationNotification()){let r=i.inventoryService.useItem(t);i.useItemNotification(r)}}else{let n=Promise.reject(new Error("No items left to use"));i.useItemNotification(n)}})()}returnItemFilter(){this.borrowFilter?(this.runSearch(2),this.borrowFilter=!1):(this.runSearch(1),this.borrowFilter=!0)}runSearch(t=0){let i,n,r,a,c,M,E,k,R,$,Y,te,X,K,ue,re,fe;for(0===t?(i=document.getElementsByClassName("search-field")[0],n=i.value.toUpperCase()):2===t?(i="",n=i.toUpperCase(),document.getElementsByClassName("search-field")[0].setAttribute("value","")):(i="Borrowed by: You",n=i.toUpperCase(),document.getElementsByClassName("search-field")[0].setAttribute("value","*Borrowed*")),r=document.getElementsByClassName("inventory-table")[0],a=r.getElementsByTagName("tr"),Y=1;Y<a.length;Y++)c=a[Y].getElementsByTagName("td")[0],M=a[Y].getElementsByTagName("td")[1],E=a[Y].getElementsByTagName("td")[2],k=a[Y].getElementsByTagName("td")[3],R=a[Y].getElementsByTagName("td")[4],$=a[Y].getElementsByTagName("td")[6],te=c.textContent||c.innerText,X=M.textContent||M.innerText,K=E.textContent||E.innerText,ue=k.textContent||k.innerText,re=R.textContent||R.innerText,fe=$.textContent||$.innerText,a[Y].style.display=te.toUpperCase().indexOf(n)>-1||X.toUpperCase().indexOf(n)>-1||K.toUpperCase().indexOf(n)>-1||ue.toUpperCase().indexOf(n)>-1||re.toUpperCase().indexOf(n)>-1||fe.toUpperCase().indexOf(n)>-1?"":"none"}locationUpdate(){const t=document.getElementsByClassName("location-field")[0];"Custom"===this.addItemForm.get("location").value?t.setAttribute("style","display:block"):t.setAttribute("style","display:none")}borrowableCheck(){var t=this;return(0,x.Z)(function*(){let i=yield t.borrowCheckNotification();!0===t.addItemForm.get("isBorrowable").value&&1!==t.addItemForm.get("amount").value&&(i?t.addItemForm.controls.amount.setValue(1):t.addItemForm.controls.isBorrowable.setValue(!1))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(J),e.Y36(d.QS),e.Y36(ee),e.Y36(U.X),e.Y36(H),e.Y36(S))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-inventory"]],decls:116,vars:21,consts:[[1,"inventoryContainer"],[1,"inventoryControls"],[1,"defaultActions"],["placeholder","Search # or name",1,"search-field",3,"keyup"],[1,"btn","btn-danger","actionButton",3,"click"],["type","checkbox","id","btn-borrowed","autocomplete","off",1,"btn-check",2,"display","none",3,"click"],["for","btn-borrowed",1,"btn","btn-danger"],[1,"inventoryList"],[1,"tableHeading"],[1,"table","inventory-table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"itemControlModal"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["formControlName","type","required",""],["formControlName","internalPartNumber",1,"form-control"],["formControlName","manufacturerPartNumber",1,"form-control"],["formControlName","manufacturer",1,"form-control"],["formControlName","link",1,"form-control"],["type","text","aria-label","Number","matInput","","formControlName","location","required","",1,"form-control",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["formControlName","location",1,"form-control",3,"change"],["value","Custom"],["label","Electrical Room"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","amount","required","",1,"form-control",3,"readonly"],["formControlName","amountUnit","required","",1,"form-control",3,"value","change"],["type","text","formControlName","description",1,"form-control"],["class","isBorrowed",4,"ngIf"],["type","checkbox","formControlName","isBorrowable",1,"form-control",3,"change"],["type","file","formControlName","image","accept","image/*",1,"form-control",3,"change"],[1,"croppingArea"],["format","webp","imageQuality","50",1,"imageCrop",3,"imageChangedEvent","maintainAspectRatio","cropperMinWidth","imageCropped"],[1,"imagePreview",3,"src"],["class","btn btn-warning actionButton","type","button",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-danger",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"searchItem"],["class","btn btn-warning actionButton",3,"click",4,"ngIf"],[1,"imageResultsPreview",3,"src"],[1,"btn","btn-warning","actionButton",3,"click"],[3,"value"],[3,"ngValue"],[1,"isBorrowed"],["type","button",1,"btn","btn-warning","actionButton",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),e.NdJ("keyup",function(){return i.runSearch()}),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return i.renderAddItem()}),e._uU(5," Add Item "),e.qZA(),e.TgZ(6,"input",5),e.NdJ("click",function(){return i.returnItemFilter()}),e.qZA(),e.TgZ(7,"label",6),e._uU(8,"Borrowed Items"),e.qZA()()(),e.TgZ(9,"div",7)(10,"h1",8),e._uU(11,"Team Inventory"),e.qZA(),e.TgZ(12,"table",9)(13,"tr")(14,"th",10),e._uU(15,"Name"),e.qZA(),e.TgZ(16,"th",10),e._uU(17,"Type"),e.qZA(),e.TgZ(18,"th",10),e._uU(19,"SC Part#"),e.qZA(),e.TgZ(20,"th",10),e._uU(21,"Man. Part#"),e.qZA(),e.TgZ(22,"th",10),e._uU(23,"Location"),e.qZA(),e.TgZ(24,"th",10),e._uU(25,"Amount"),e.qZA(),e.TgZ(26,"th",10),e._uU(27,"Actions"),e.qZA(),e.TgZ(28,"th",10),e._uU(29,"Image"),e.qZA(),e.TgZ(30,"th",10),e._uU(31,"Edit"),e.qZA()(),e.YNc(32,qt,23,11,"tr",11),e.qZA(),e.TgZ(33,"p"),e._uU(34,"--- End of Items ---"),e.qZA()(),e.TgZ(35,"div",12)(36,"form",13),e.NdJ("ngSubmit",function(){return i.manageItemForm()}),e.TgZ(37,"h3"),e._uU(38),e.qZA(),e.TgZ(39,"div",14)(40,"label"),e._uU(41,"Name *"),e.qZA(),e._UZ(42,"input",15),e.qZA(),e.TgZ(43,"div",14)(44,"label"),e._uU(45,"Type *"),e.qZA(),e._UZ(46,"br"),e.TgZ(47,"select",16)(48,"option"),e._uU(49,"Part"),e.qZA(),e.TgZ(50,"option"),e._uU(51,"Tool"),e.qZA()()(),e.TgZ(52,"div",14)(53,"label"),e._uU(54,"Internal Part #"),e.qZA(),e._UZ(55,"input",17),e.qZA(),e.TgZ(56,"div",14)(57,"label"),e._uU(58,"Man. Part #"),e.qZA(),e._UZ(59,"input",18),e.qZA(),e.TgZ(60,"div",14)(61,"label"),e._uU(62,"Manufacturer"),e.qZA(),e._UZ(63,"input",19),e.qZA(),e.TgZ(64,"div",14)(65,"label"),e._uU(66,"Link"),e.qZA(),e._UZ(67,"input",20),e.qZA(),e.TgZ(68,"div",14)(69,"label"),e._uU(70,"Location: *"),e.qZA(),e._UZ(71,"br")(72,"input",21),e.TgZ(73,"mat-autocomplete",null,22),e.YNc(75,Pt,2,2,"mat-option",23),e.ALo(76,"async"),e.qZA()(),e.TgZ(77,"select",24),e.NdJ("change",function(){return i.locationUpdate()}),e.TgZ(78,"option",25),e._uU(79,"Custom"),e.qZA(),e._UZ(80,"optgroup",26),e.YNc(81,Bt,2,2,"option",27),e.ALo(82,"async"),e.qZA(),e.TgZ(83,"div",14)(84,"label"),e._uU(85,"Amount *"),e.qZA(),e._UZ(86,"input",28),e.TgZ(87,"select",29),e.NdJ("change",function(){return i.locationUpdate()}),e.YNc(88,Lt,2,2,"option",27),e.qZA()(),e.TgZ(89,"div",14)(90,"label"),e._uU(91,"Description"),e.qZA(),e._UZ(92,"input",30),e.qZA(),e.TgZ(93,"div",14)(94,"label"),e._uU(95,"Borrowable "),e.YNc(96,Ht,2,0,"span",31),e.qZA(),e.TgZ(97,"input",32),e.NdJ("change",function(){return i.borrowableCheck()}),e.qZA()(),e.TgZ(98,"div",14)(99,"label"),e._uU(100,"Image"),e.qZA(),e.TgZ(101,"input",33),e.NdJ("change",function(r){return i.fileChangeEvent(r)}),e.qZA(),e.TgZ(102,"span",34)(103,"image-cropper",35),e.NdJ("imageCropped",function(r){return i.imageCropped(r)}),e.qZA()(),e.TgZ(104,"span",34)(105,"label"),e._uU(106,"Image Preview =>"),e.qZA()(),e.TgZ(107,"span",34),e._UZ(108,"img",36),e.qZA()(),e._UZ(109,"br"),e.YNc(110,zt,2,0,"button",37),e.TgZ(111,"div",14)(112,"button",38),e._uU(113),e.qZA(),e.TgZ(114,"button",39),e.NdJ("click",function(){return i.cancelItemForm()}),e._uU(115," Cancel "),e.qZA()()()()()),2&t){const n=e.MAs(74);e.xp6(32),e.Q6J("ngForOf",i.items),e.xp6(4),e.Q6J("formGroup",i.addItemForm),e.xp6(2),e.Oqu(i.submitButtonText),e.xp6(34),e.Q6J("matAutocomplete",n),e.xp6(3),e.Q6J("ngForOf",e.lcZ(76,17,i.locationList)),e.xp6(6),e.Q6J("ngForOf",e.lcZ(82,19,i.locationList)),e.xp6(5),e.Q6J("readonly",!0===i.addItemForm.get("isBorrowable").value),e.xp6(1),e.Q6J("value",i.amountUnitOptions[0]),e.xp6(1),e.Q6J("ngForOf",i.amountUnitOptions),e.xp6(8),e.Q6J("ngIf",i.addItemForm.get("isBorrowable").disabled),e.xp6(7),e.Q6J("imageChangedEvent",i.imageChangedEvent)("maintainAspectRatio",!1)("cropperMinWidth",128),e.xp6(5),e.s9C("src",i.previewImgUrl,e.LSH),e.xp6(2),e.Q6J("ngIf",i.previewImgUrl),e.xp6(2),e.Q6J("disabled",!i.addItemForm.valid),e.xp6(1),e.hij(" ",i.submitButtonText," ")}},dependencies:[Z.sg,Z.O5,d._Y,d.YN,d.Kr,d.Fj,d.Wl,d.EJ,d.JJ,d.JL,d.Q7,d.sg,d.u,xe,St,Qe,ce.ey,Z.Ov],styles:[".inventoryContainer[_ngcontent-%COMP%]{width:100%;display:inline-block}.inventoryControls[_ngcontent-%COMP%]{top:0;float:left;width:15%;min-width:175px;padding:1em}.defaultActions[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-bottom:5px;max-width:90%}.inventoryList[_ngcontent-%COMP%]{float:left;height:95%;width:85%;min-width:500px;padding:1em;overflow:scroll}.itemControlModal[_ngcontent-%COMP%]{display:none;position:fixed;top:0;width:100%;height:100%;padding:2em;z-index:10000;background:white;overflow:scroll}.imageResultsPreview[_ngcontent-%COMP%]{height:50px}.imagePreview[_ngcontent-%COMP%]{height:100px}"]}),o})();var Yt=u(1857);function Qt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"textarea",19),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.markdown=n)}),e.qZA(),e._UZ(2,"markdown",20),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.markdown),e.xp6(1),e.Q6J("data",t.markdown)}}function Wt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"label"),e._uU(2,"Link"),e.qZA(),e.TgZ(3,"input",22),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.link=n)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.link)}}function $t(o,s){if(1&o&&(e.TgZ(0,"div")(1,"a",28),e._uU(2,"Link to Article"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.s9C("href",t.link,e.LSH)}}function Vt(o,s){if(1&o&&(e.TgZ(0,"div")(1,"div",29),e._UZ(2,"markdown",30),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("data",t.markdown)}}function Gt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th",23),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"img",24),e.qZA(),e.TgZ(9,"td"),e.YNc(10,$t,3,1,"div",13),e.YNc(11,Vt,3,1,"div",13),e.qZA(),e.TgZ(12,"td")(13,"div",25)(14,"button",26),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteNews(r))}),e._uU(15," Delete "),e.qZA(),e.TgZ(16,"button",27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.setupNewsUpdate(r))}),e._uU(17," Update "),e.qZA()()()()}if(2&o){const t=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.date),e.xp6(2),e.s9C("src",t.thumbnailUrl,e.LSH),e.xp6(2),e.Q6J("ngIf",null!==t.link),e.xp6(1),e.Q6J("ngIf",null===t.Link)}}let Ne=new(T())({}),Kt=(()=>{class o{constructor(t,i,n){this.newsService=t,this.uploadService=i,this.formBuilder=n,this.imageChangedEvent="",this.addNewsForm=this.formBuilder.group({name:[""],date:[""],thumnail:[""]}),this.mainButtonText="Add News Article",this.markdown='Title\n---\n---\nSomething...\n<img src="https://s3-alpha.figma.com/hub/file/948140848/1f4d8ea7-e9d9-48b7-b70c-819482fb10fb-cover.png">',this.link="",this.isLinkOnlyFormat=!1}fileChangeEvent(t){this.imageChangedEvent=t,this.thumbnail=t.target.files[0]}imageCropped(t){this.previewThumbnailUrl=t.base64,this.dataUrlToFile()}addItemNotification(t){Ne.async(t,"News item has been added","News item failed to add, contact tech support")}updateNewsNotification(t){Ne.async(t,"News item has been updated","News item failed to update, contact tech support")}removeNewsNotification(t){Ne.async(t,"News item has been removed","News item failed to remove, contact tech support")}dataUrlToFile(){var t=this;return(0,x.Z)(function*(){const i=t.previewThumbnailUrl,n=t.thumbnail.name,a=yield(yield fetch(i)).blob(),c=new File([a],n,{type:"image/webp"});t.thumbnail=c})()}ngOnInit(){this.newsService.getNewsArticles().subscribe(t=>{this.newsArticles=t.map(i=>({id:i.payload.doc.id,...i.payload.doc.data()})),this.newsArticles.sort((i,n)=>Date.parse(n.date)-Date.parse(i.date))})}setThumbnail(t){this.thumbnail=t[0];const i=new FileReader;i.onload=n=>{this.previewThumbnailUrl=n.target.result},i.readAsDataURL(this.thumbnail)}resetForm(){this.addNewsForm.reset(),this.previewThumbnailUrl="",this.updateNewsId="",this.mainButtonText="Add News Article",this.markdown="",this.imageChangedEvent=null}manageNews(){let t,i;if(this.isLinkOnlyFormat?(t="",i=this.link):(t=this.markdown,i=null),this.mainButtonText.startsWith("Update")){if(null===this.thumbnail){const n={id:this.updateNewsId,name:this.addNewsForm.get("name").value,date:this.addNewsForm.get("date").value,markdown:t,link:i,thumbnail:null,thumbnailUrl:this.previewThumbnailUrl};let r=this.newsService.updateNews(n);this.updateNewsNotification(r)}else{const n=this.updateNewsId,r=this.addNewsForm.get("name").value,a=this.addNewsForm.get("date").value;this.uploadService.uploadFile(this.thumbnail,"assets/thumnails/").then(c=>{c.ref.getDownloadURL().then(M=>{let k=this.newsService.updateNews({id:n,name:r,date:a,markdown:t,link:i,thumbnail:null,thumbnailUrl:M});this.updateNewsNotification(k)})})}this.resetForm()}else if(null===this.thumbnail){const r={name:this.addNewsForm.get("name").value,date:this.addNewsForm.get("date").value,markdown:t,link:i,thumbnail:null,thumbnailUrl:""};console.log(r);let a=this.newsService.addNews(r);this.addItemNotification(a),this.resetForm()}else{const n=this.addNewsForm.get("name").value,r=this.addNewsForm.get("date").value;this.uploadService.uploadFile(this.thumbnail,"assets/thumnails/").then(a=>{a.ref.getDownloadURL().then(c=>{const M={name:n,date:r,markdown:t,link:i,thumbnail:null,thumbnailUrl:c};console.log(M);let E=this.newsService.addNews(M);this.addItemNotification(E)})}),this.resetForm()}}deleteNews(t){let i=this.newsService.deleteNews(t);this.removeNewsNotification(i)}setupNewsUpdate(t){this.updateNewsId=t.id,this.addNewsForm.get("name").setValue(t.name),this.addNewsForm.get("date").setValue(t.date),this.markdown=t.markdown,this.link=t.link,this.previewThumbnailUrl=t.thumbnailUrl,this.thumbnail=null,this.mainButtonText="Update News Article",this.isLinkOnlyFormat=null!==this.link}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Yt.Y),e.Y36(ee),e.Y36(d.QS))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-news"]],decls:51,vars:11,consts:[[1,"container"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","submit",1,"btn","btn-danger",3,"disabled"],[1,"row"],[1,"col-4"],["type","text","formControlName","name","required","",1,"form-control"],["type","date","formControlName","date","required","",1,"form-control"],["type","file","formControlName","thumbnail","accept","image/*","required","",1,"form-control",3,"change"],[1,"croppingArea"],["format","webp","imageQuality","90",1,"imageCrop",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMinWidth","imageCropped"],[2,"max-width","500px",3,"src"],[1,"btn","btn-danger","btn-block",3,"click"],[4,"ngIf"],["class","col-md",4,"ngIf"],[1,"resultsTable"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"variable-textarea",2,"height","100%",3,"ngModel","ngModelChange"],[1,"variable-binding",3,"data"],[1,"col-md"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["scope","row"],[2,"max-width","100px",3,"src"],[1,"btn-group"],[1,"btn","btn-warning","actionButton",3,"click"],[1,"btn","btn-danger","actionButton",3,"click"],["target","_blank",1,"btn","btn-danger",3,"href"],[1,"overflow-auto",2,"max-height","300px"],[3,"data"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"br")(2,"br"),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return i.manageNews()}),e.TgZ(4,"div",2)(5,"button",3),e._uU(6),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5)(9,"label"),e._uU(10,"Name"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"div",5)(13,"label"),e._uU(14,"Date"),e.qZA(),e._UZ(15,"input",7),e.qZA(),e.TgZ(16,"div",5)(17,"label"),e._uU(18,"Thumbnail"),e.qZA(),e.TgZ(19,"input",8),e.NdJ("change",function(r){return i.fileChangeEvent(r)}),e.qZA()()(),e.TgZ(20,"span",9)(21,"image-cropper",10),e.NdJ("imageCropped",function(r){return i.imageCropped(r)}),e.qZA()(),e.TgZ(22,"span",9)(23,"label"),e._uU(24,"Logo Preview => "),e._UZ(25,"img",11),e.qZA()()(),e._UZ(26,"br"),e.TgZ(27,"button",12),e.NdJ("click",function(){return i.isLinkOnlyFormat=!i.isLinkOnlyFormat}),e._uU(28," Toggle format (Article or External Link) "),e.qZA(),e._UZ(29,"br"),e.YNc(30,Qt,3,2,"div",13),e.YNc(31,Wt,4,1,"div",14),e._UZ(32,"br"),e.qZA(),e.TgZ(33,"div",15)(34,"table",16)(35,"thead")(36,"tr")(37,"th",17),e._uU(38,"#"),e.qZA(),e.TgZ(39,"th",17),e._uU(40,"Name"),e.qZA(),e.TgZ(41,"th",17),e._uU(42,"Date"),e.qZA(),e.TgZ(43,"th",17),e._uU(44,"Logo"),e.qZA(),e.TgZ(45,"th",17),e._uU(46,"Article or Link"),e.qZA(),e.TgZ(47,"th",17),e._uU(48,"Manage"),e.qZA()()(),e.TgZ(49,"tbody"),e.YNc(50,Gt,18,6,"tr",18),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",i.addNewsForm),e.xp6(2),e.Q6J("disabled",!i.addNewsForm.valid),e.xp6(1),e.hij(" ",i.mainButtonText," "),e.xp6(15),e.Q6J("imageChangedEvent",i.imageChangedEvent)("maintainAspectRatio",!1)("aspectRatio",4/3)("cropperMinWidth",128),e.xp6(4),e.Q6J("src",i.previewThumbnailUrl,e.LSH),e.xp6(5),e.Q6J("ngIf",!i.isLinkOnlyFormat),e.xp6(1),e.Q6J("ngIf",i.isLinkOnlyFormat),e.xp6(19),e.Q6J("ngForOf",i.newsArticles))},dependencies:[Z.sg,Z.O5,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.sg,d.u,d.On,Q.lF,xe],styles:[".variable-binding[_ngcontent-%COMP%], .variable-textarea[_ngcontent-%COMP%]{width:49%}.variable-textarea[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 1px 2px #00000012;min-height:420px;padding:8px;transition:all .3s ease-out}.variable-textarea[_ngcontent-%COMP%]:hover{box-shadow:0 6px 12px 3px #00000017,0 2px 3px 1px #0000000f}.variable-binding[_ngcontent-%COMP%]{display:block;float:right}.imageCrop[_ngcontent-%COMP%]{max-width:500px}.croppingArea[_ngcontent-%COMP%]{display:inline-block}"]}),o})();var Xt=u(1420);function ei(o,s){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Oqu(t)}}function ti(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"th",19),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&o){const t=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.uid),e.xp6(2),e.Oqu(t.uName),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function ii(o,s){if(1&o&&(e.TgZ(0,"div",18)(1,"h1",15),e._uU(2,"Action History"),e.qZA(),e.TgZ(3,"table",16)(4,"thead")(5,"tr")(6,"th",17),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",17),e._uU(9,"User ID"),e.qZA(),e.TgZ(10,"th",17),e._uU(11,"User"),e.qZA(),e.TgZ(12,"th",17),e._uU(13,"Entity"),e.qZA(),e.TgZ(14,"th",17),e._uU(15,"Action"),e.qZA(),e.TgZ(16,"th",17),e._uU(17,"Date"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,ti,13,6,"tr",7),e.qZA()(),e._UZ(20,"br"),e.qZA()),2&o){const t=e.oxw();e.xp6(19),e.Q6J("ngForOf",t.actionHistory)}}function ni(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th",19),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"a",20),e._UZ(9,"img",21),e.qZA()(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteSponsor(r))}),e._uU(14," Delete "),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.setupSponsorUpdate(r))}),e._uU(17," Update "),e.qZA(),e._UZ(18,"br"),e.TgZ(19,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.showActionHistory(r))}),e._uU(20," History "),e.qZA()()()}if(2&o){const t=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.s9C("href",t.link,e.LSH),e.xp6(1),e.s9C("src",t.logoUrl,e.LSH),e.xp6(2),e.Oqu(t.tier)}}let ke=new(T())({}),ri=(()=>{class o{constructor(t,i,n,r){this.sponsorService=t,this.uploadService=i,this.formBuilder=n,this.userActionService=r,this.tiers=["Lead","Platinum","Gold","Silver","Bronze","Friend"],this.imageChangedEvent="",this.addSponsorForm=this.formBuilder.group({name:[""],link:[""],logo:[""],tier:[null]}),this.mainButtonText="Add Sponsor",this.actionHistory=[]}fileChangeEvent(t){this.imageChangedEvent=t,this.logo=t.target.files[0]}imageCropped(t){this.previewLogoUrl=t.base64,this.dataUrlToFile()}addSponsorNotification(t){ke.async(t,"Sponsor has been added","Sponsor failed to add, contact tech support")}updateSponsorNotification(t){ke.async(t,"Sponsor has been updated","Sponsor failed to update, contact tech support")}removeSponsorNotification(t){ke.async(t,"Sponsor has been removed","Sponsor failed to remove, contact tech support")}dataUrlToFile(){var t=this;return(0,x.Z)(function*(){const i=t.previewLogoUrl,n=t.logo.name,a=yield(yield fetch(i)).blob(),c=new File([a],n,{type:"image/webp"});t.logo=c})()}ngOnInit(){this.sponsorService.getSponsors().subscribe(t=>{this.sponsors=t.map(i=>({id:i.payload.doc.id,...i.payload.doc.data()}))})}setLogo(t){this.logo=t[0];const i=new FileReader;i.onload=n=>{this.previewLogoUrl=n.target.result},i.readAsDataURL(this.logo)}resetForm(){this.addSponsorForm.reset(),this.previewLogoUrl="",this.updateSponsorId="",this.mainButtonText="Add Sponsor",this.imageChangedEvent=null}manageSponsor(){if(this.mainButtonText.startsWith("Update")){if(null===this.logo){const r={id:this.updateSponsorId,name:this.addSponsorForm.get("name").value,link:this.addSponsorForm.get("link").value,logoUrl:this.previewLogoUrl,tier:this.addSponsorForm.get("tier").value,logo:null};let a=this.sponsorService.updateSponsor(r);this.updateSponsorNotification(a)}else{const r=this.updateSponsorId,a=this.addSponsorForm.get("name").value,c=this.addSponsorForm.get("link").value,M=this.addSponsorForm.get("tier").value;this.uploadService.uploadFile(this.logo,"assets/logos/").then(E=>{E.ref.getDownloadURL().then(k=>{let $=this.sponsorService.updateSponsor({id:r,name:a,link:c,logoUrl:k,tier:M,logo:null});this.updateSponsorNotification($)})})}return void this.resetForm()}const t=this.addSponsorForm.get("name").value,i=this.addSponsorForm.get("link").value,n=this.addSponsorForm.get("tier").value;this.uploadService.uploadFile(this.logo,"assets/logos/").then(r=>{r.ref.getDownloadURL().then(a=>{let M=this.sponsorService.addSponsor({name:t,link:i,logoUrl:a,tier:n,logo:null});this.addSponsorNotification(M)})}),this.resetForm()}deleteSponsor(t){let i=this.sponsorService.deleteSponsor(t);this.removeSponsorNotification(i)}setupSponsorUpdate(t){this.updateSponsorId=t.id,this.addSponsorForm.get("name").setValue(t.name),this.addSponsorForm.get("link").setValue(t.link),this.addSponsorForm.get("tier").setValue(t.tier),this.previewLogoUrl=t.logoUrl,this.logo=null,this.mainButtonText="Update Sponsor",document.documentElement.scrollTop=0}showActionHistory(t){this.actionHistory=[],this.userActionService.getEntityActions(t.id).then(i=>{i.forEach(n=>{this.actionHistory.push({id:n.id,...n.data()})})}),document.documentElement.scrollTop=0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Xt.c),e.Y36(ee),e.Y36(d.QS),e.Y36(U.X))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-sponsors"]],decls:53,vars:12,consts:[[1,"formContainer"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["type","text","formControlName","link","required","",1,"form-control"],["formControlName","tier","required","",1,"form-control"],["disabled","",3,"ngValue"],[4,"ngFor","ngForOf"],["type","file","formControlName","logo","accept","image/*",1,"form-control",3,"change"],[1,"croppingArea"],["format","webp","imageQuality","90",1,"imageCrop",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMinWidth","imageCropped"],[1,"logoPreview",3,"src"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","historyTable",4,"ngIf"],[1,"resultsTable"],[1,"tableHeading"],[1,"table"],["scope","col"],[1,"historyTable"],["scope","row"],["target","_blank",3,"href"],[1,"logoResultsPreview",3,"src"],[1,"btn","btn-danger","actionButton",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return i.manageSponsor()}),e.TgZ(2,"div",2)(3,"label"),e._uU(4,"Name"),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"div",2)(7,"label"),e._uU(8,"Link"),e.qZA(),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"div",2)(11,"label"),e._uU(12,"Tier"),e.qZA(),e.TgZ(13,"select",5)(14,"option",6),e._uU(15,"---- Select an option ----"),e.qZA(),e.YNc(16,ei,2,1,"option",7),e.qZA()(),e.TgZ(17,"div",2)(18,"label"),e._uU(19,"Logo"),e.qZA(),e.TgZ(20,"input",8),e.NdJ("change",function(r){return i.fileChangeEvent(r)}),e.qZA(),e.TgZ(21,"span",9)(22,"image-cropper",10),e.NdJ("imageCropped",function(r){return i.imageCropped(r)}),e.qZA()(),e.TgZ(23,"span",9)(24,"label"),e._uU(25,"Logo Preview =>"),e.qZA()(),e.TgZ(26,"span",9),e._UZ(27,"img",11),e.qZA()(),e._UZ(28,"br"),e.TgZ(29,"div",2)(30,"button",12),e._uU(31),e.qZA()()()(),e.YNc(32,ii,21,1,"div",13),e.TgZ(33,"div",14)(34,"h1",15),e._uU(35,"Sponsors"),e.qZA(),e.TgZ(36,"table",16)(37,"thead")(38,"tr")(39,"th",17),e._uU(40,"#"),e.qZA(),e.TgZ(41,"th",17),e._uU(42,"ID"),e.qZA(),e.TgZ(43,"th",17),e._uU(44,"Name"),e.qZA(),e.TgZ(45,"th",17),e._uU(46,"Logo"),e.qZA(),e.TgZ(47,"th",17),e._uU(48,"Tier"),e.qZA(),e.TgZ(49,"th",17),e._uU(50,"Action"),e.qZA()()(),e.TgZ(51,"tbody"),e.YNc(52,ni,21,6,"tr",7),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.addSponsorForm),e.xp6(13),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",i.tiers),e.xp6(6),e.Q6J("imageChangedEvent",i.imageChangedEvent)("maintainAspectRatio",!1)("aspectRatio",4/3)("cropperMinWidth",128),e.xp6(5),e.s9C("src",i.previewLogoUrl,e.LSH),e.xp6(3),e.Q6J("disabled",!i.addSponsorForm.valid),e.xp6(1),e.hij(" ",i.mainButtonText," "),e.xp6(1),e.Q6J("ngIf",0!==i.actionHistory.length),e.xp6(20),e.Q6J("ngForOf",i.sponsors))},dependencies:[Z.sg,Z.O5,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,d.Q7,d.sg,d.u,xe],styles:[".resultsTable[_ngcontent-%COMP%]{max-width:100%}.logoResultsPreview[_ngcontent-%COMP%]{min-width:500px;max-width:500px}.actionButton[_ngcontent-%COMP%]{margin-bottom:1em}.logoPreview[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px;min-width:500px}.formContainer[_ngcontent-%COMP%]{padding:3em}.tableHeading[_ngcontent-%COMP%]{padding-left:.5em}.imageCrop[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px}.croppingArea[_ngcontent-%COMP%]{display:inline-block}"]}),o})();var ai=u(6341);let si=(()=>{class o{constructor(t){this.storage=t}deleteFile(t){return this.storage.storage.refFromURL(t).delete().catch(n=>{throw n})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(V.Q1))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function li(o,s){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Oqu(t)}}function ci(o,s){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Oqu(t)}}function ui(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteImage())}),e._uU(1," X "),e.qZA()}}function di(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"th",25),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&o){const t=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.uid),e.xp6(2),e.Oqu(t.uName),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function pi(o,s){if(1&o&&(e.TgZ(0,"div",23)(1,"h1",24),e._uU(2,"Action History"),e.qZA(),e.TgZ(3,"table",20)(4,"thead")(5,"tr")(6,"th",21),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",21),e._uU(9,"User ID"),e.qZA(),e.TgZ(10,"th",21),e._uU(11,"User"),e.qZA(),e.TgZ(12,"th",21),e._uU(13,"Entity"),e.qZA(),e.TgZ(14,"th",21),e._uU(15,"Action"),e.qZA(),e.TgZ(16,"th",21),e._uU(17,"Date"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,di,13,6,"tr",6),e.qZA()(),e._UZ(20,"br"),e.qZA()),2&o){const t=e.oxw();e.xp6(19),e.Q6J("ngForOf",t.actionHistory)}}function mi(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th",25),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"img",26),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"button",27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteMember(r))}),e._uU(19," Delete "),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"button",27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.setupMemberUpdate(r))}),e._uU(22," Update "),e.qZA(),e._UZ(23,"br"),e.TgZ(24,"button",27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.showActionHistory(r))}),e._uU(25," History "),e.qZA()()()}if(2&o){const t=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.s9C("src",t.imageName,e.LSH),e.xp6(2),e.Oqu(t.position),e.xp6(2),e.Oqu(t.subteam),e.xp6(2),e.Oqu(t.major),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.year)}}let Ae=new(T())({}),We={},gi=(()=>{class o{constructor(t,i,n,r,a){this.memberService=t,this.formBuilder=i,this.uploadService=n,this.userActionService=r,this.deleteService=a,this.imageChangedEvent="",this.addMemberForm=this.formBuilder.group({name:[""],position:[null],subteam:[null],major:[""],description:[""],year:[""],image:[""],releaseTime:[""]}),this.mainButtonText="Add Member",this.positions=["Member","Manager","Leads","Team Captain","Engineering Team Manager","Business Team Manager"],this.subteams=["Mechanical","Electrical","Software","Multi-Team","Business"],this.actionHistory=[],this.deleteFlag=null}fileChangeEvent(t){this.imageChangedEvent=t,this.image=t.target.files[0]}imageCropped(t){this.previewImgUrl=t.base64,this.dataUrlToFile()}addMemberNotification(t){Ae.async(t,"Team member has been added","Team member failed to add, contact tech support")}updateMemberNotification(t){Ae.async(t,"Team member has been updated","Team member failed to update, contact tech support")}removeMemberNotification(t){Ae.async(t,"Team member has been removed","Team member failed to remove, contact tech support")}dataUrlToFile(){var t=this;return(0,x.Z)(function*(){const i=t.previewImgUrl,n=t.image.name,a=yield(yield fetch(i)).blob(),c=new File([a],n,{type:"image/webp"});t.image=c})()}ngOnInit(){this.memberService.getMembers().subscribe(t=>{this.members=t.map(i=>({id:i.payload.doc.id,...i.payload.doc.data()}))})}setImage(t){this.image=t[0];const i=new FileReader;i.onload=n=>{this.previewImgUrl=n.target.result},i.readAsDataURL(this.image)}resetForm(){this.addMemberForm.reset(),this.previewImgUrl="",this.updateMemberId="",this.mainButtonText="Add Member",this.imageChangedEvent=null}deleteMember(t){let i=this.memberService.deleteMember(t);this.removeMemberNotification(i)}setupMemberUpdate(t){this.updateMemberId=t.id,this.addMemberForm.get("name").setValue(t.name),this.addMemberForm.get("position").setValue(t.position),this.addMemberForm.get("subteam").setValue(t.subteam),this.addMemberForm.get("major").setValue(t.major),this.addMemberForm.get("description").setValue(t.description),this.addMemberForm.get("year").setValue(t.year),this.previewImgUrl=t.imageName,this.image=null,this.imageChangedEvent=null,this.mainButtonText="Update Member",document.documentElement.scrollTop=0}deleteImage(){this.deleteFlag=this.previewImgUrl,this.previewImgUrl="",this.image=null,this.imageChangedEvent=null,console.log(this.deleteFlag)}manageMember(){try{const t=this.addMemberForm.get("releaseTime").value;let i=null;if(""!==t&&(i=new Date(t).toUTCString()),this.mainButtonText.startsWith("Update")){if(this.deleteFlag){let k=this.deleteService.deleteFile(this.deleteFlag);this.removeMemberNotification(k)}if(null===this.image){const k={id:this.updateMemberId,name:this.addMemberForm.get("name").value,position:this.addMemberForm.get("position").value,subteam:this.addMemberForm.get("subteam").value,major:this.addMemberForm.get("major").value,description:this.addMemberForm.get("description").value,year:this.addMemberForm.get("year").value,imageName:this.previewImgUrl,image:null,releaseTime:i};let R=this.memberService.updateMember(k);this.updateMemberNotification(R)}else{const k=this.updateMemberId,R=this.addMemberForm.get("name").value,$=this.addMemberForm.get("position").value,Y=this.addMemberForm.get("subteam").value,te=this.addMemberForm.get("major").value,X=this.addMemberForm.get("description").value,K=this.addMemberForm.get("year").value;this.uploadService.uploadFile(this.image,"assets/member_images/").then(ue=>{ue.ref.getDownloadURL().then(re=>{let Ze=this.memberService.updateMember({id:k,name:R,position:$,imageName:re,subteam:Y,major:te,description:X,year:K,image:null,releaseTime:i});this.updateMemberNotification(Ze)})})}return void this.resetForm()}const n=this.addMemberForm.get("name").value,r=this.addMemberForm.get("position").value,a=this.addMemberForm.get("subteam").value,c=this.addMemberForm.get("major").value,M=this.addMemberForm.get("description").value,E=this.addMemberForm.get("year").value;this.uploadService.uploadFile(this.image,"assets/member_images/").then(k=>{k.ref.getDownloadURL().then(R=>{let Y=this.memberService.addMember({name:n,position:r,imageName:R,subteam:a,major:c,description:M,year:E,image:null,releaseTime:i});this.addMemberNotification(Y)})}).catch(k=>{Ae.alert("Image upload failed",We)}),this.resetForm()}catch{Ae.alert("Form submission failed",We)}}showActionHistory(t){this.actionHistory=[],this.userActionService.getEntityActions(t.id).then(i=>{i.forEach(n=>{this.actionHistory.push({id:n.id,...n.data()})})}),document.documentElement.scrollTop=0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ai.n),e.Y36(d.QS),e.Y36(ee),e.Y36(U.X),e.Y36(si))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-team"]],decls:77,vars:15,consts:[[1,"formContainer"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["formControlName","position","required","",1,"form-control"],["disabled","",3,"ngValue"],[4,"ngFor","ngForOf"],["formControlName","subteam","required","",1,"form-control"],["type","text","formControlName","major","required","",1,"form-control"],["type","text","formControlName","description","required","",1,"form-control"],["type","number","formControlName","year","required","",1,"form-control"],["type","datetime-local","formControlName","releaseTime",1,"form-control"],["type","file","formControlName","image","accept","image/*",1,"form-control",3,"change"],[1,"croppingArea"],["format","webp","imageQuality","50",1,"imageCrop",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMinWidth","imageCropped"],[1,"imagePreview",3,"src"],["class","btn btn-warning actionButton","type","button",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","historyTable",4,"ngIf"],[1,"resultsTable"],[1,"table"],["scope","col"],["type","button",1,"btn","btn-warning","actionButton",3,"click"],[1,"historyTable"],[1,"tableHeading"],["scope","row"],[1,"imageResultsPreview",3,"src"],[1,"btn","btn-danger","actionButton",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return i.manageMember()}),e.TgZ(2,"div",2)(3,"label"),e._uU(4,"Name*"),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"div",2)(7,"label"),e._uU(8,"Position*"),e.qZA(),e.TgZ(9,"select",4)(10,"option",5),e._uU(11,"---- Select an option ----"),e.qZA(),e.YNc(12,li,2,1,"option",6),e.qZA()(),e.TgZ(13,"div",2)(14,"label"),e._uU(15,"Subteam*"),e.qZA(),e.TgZ(16,"select",7)(17,"option",5),e._uU(18,"---- Select an option ----"),e.qZA(),e.YNc(19,ci,2,1,"option",6),e.qZA()(),e.TgZ(20,"div",2)(21,"label"),e._uU(22,"Major*"),e.qZA(),e._UZ(23,"input",8),e.qZA(),e.TgZ(24,"div",2)(25,"label"),e._uU(26,"Description*"),e.qZA(),e._UZ(27,"input",9),e.qZA(),e.TgZ(28,"div",2)(29,"label"),e._uU(30,"Year*"),e.qZA(),e._UZ(31,"input",10),e.qZA(),e.TgZ(32,"div",2)(33,"label"),e._uU(34,"Release Time"),e.qZA(),e._UZ(35,"input",11),e.qZA(),e.TgZ(36,"div",2)(37,"label"),e._uU(38,"Image"),e.qZA(),e.TgZ(39,"input",12),e.NdJ("change",function(r){return i.fileChangeEvent(r)}),e.qZA(),e.TgZ(40,"span",13)(41,"image-cropper",14),e.NdJ("imageCropped",function(r){return i.imageCropped(r)}),e.qZA()(),e.TgZ(42,"span",13)(43,"label"),e._uU(44,"Image Preview =>"),e.qZA()(),e.TgZ(45,"span",13),e._UZ(46,"img",15),e.qZA()(),e._UZ(47,"br"),e.YNc(48,ui,2,0,"button",16),e.TgZ(49,"div",2)(50,"button",17),e._uU(51),e.qZA()()()(),e.YNc(52,pi,21,1,"div",18),e.TgZ(53,"div",19)(54,"table",20)(55,"thead")(56,"tr")(57,"th",21),e._uU(58,"#"),e.qZA(),e.TgZ(59,"th",21),e._uU(60,"Name"),e.qZA(),e.TgZ(61,"th",21),e._uU(62,"Image"),e.qZA(),e.TgZ(63,"th",21),e._uU(64,"Position"),e.qZA(),e.TgZ(65,"th",21),e._uU(66,"Subteam"),e.qZA(),e.TgZ(67,"th",21),e._uU(68,"Major"),e.qZA(),e.TgZ(69,"th",21),e._uU(70,"Description"),e.qZA(),e.TgZ(71,"th",21),e._uU(72,"Year"),e.qZA(),e.TgZ(73,"th",21),e._uU(74,"Action"),e.qZA()()(),e.TgZ(75,"tbody"),e.YNc(76,mi,26,8,"tr",6),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.addMemberForm),e.xp6(9),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",i.positions),e.xp6(5),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",i.subteams),e.xp6(22),e.Q6J("imageChangedEvent",i.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",4/3)("cropperMinWidth",128),e.xp6(5),e.s9C("src",i.previewImgUrl,e.LSH),e.xp6(2),e.Q6J("ngIf",i.previewImgUrl),e.xp6(2),e.Q6J("disabled",!i.addMemberForm.valid),e.xp6(1),e.hij(" ",i.mainButtonText," "),e.xp6(1),e.Q6J("ngIf",0!==i.actionHistory.length),e.xp6(24),e.Q6J("ngForOf",i.members))},dependencies:[Z.sg,Z.O5,d._Y,d.YN,d.Kr,d.Fj,d.wV,d.EJ,d.JJ,d.JL,d.Q7,d.sg,d.u,xe],styles:[".resultsTable[_ngcontent-%COMP%]{max-width:100%}.imageResultsPreview[_ngcontent-%COMP%]{min-width:250px;max-width:250px}.actionButton[_ngcontent-%COMP%]{margin-bottom:1em}.imagePreview[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px;min-width:500px}.formContainer[_ngcontent-%COMP%]{padding:3em}.imageCrop[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px}.croppingArea[_ngcontent-%COMP%]{display:inline-block}"]}),o})();function fi(o,s){1&o&&(e.TgZ(0,"div")(1,"small",8),e._uU(2," Please enter a valid email "),e.qZA()())}let _i=new(T())({}),bi=(()=>{class o{constructor(t,i){this.formBuilder=t,this.authService=i,this.loginForm=this.formBuilder.group({email:["",d.kI.pattern(".+@.+..+")],password:[""]})}userLoginNotification(t){_i.async(t,"User has logged in","User has failed login. Please check your password and email or contact tech support")}Login(){let t=this.authService.Login(this.loginForm.get("email").value,this.loginForm.get("password").value);this.userLoginNotification(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.QS),e.Y36(H))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:16,vars:3,consts:[[1,"loginFormDiv"],[1,"loginForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/register",1,"error"],["routerLink","/portal/reset-password",1,"error"],[1,"error"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return i.Login()}),e._UZ(2,"input",2),e.YNc(3,fi,3,0,"div",3),e._UZ(4,"input",4)(5,"br"),e.TgZ(6,"button",5),e._uU(7,"Login"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"a",6),e._uU(10,"No account? "),e.TgZ(11,"strong"),e._uU(12,"Create one here"),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"a",7),e._uU(15,"Forgot Password"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.loginForm),e.xp6(2),e.Q6J("ngIf",i.loginForm.get("email").invalid&&i.loginForm.get("email").errors&&(i.loginForm.get("email").dirty||i.loginForm.get("email").touched)),e.xp6(3),e.Q6J("disabled",!i.loginForm.valid))},dependencies:[Z.O5,v.yS,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.sg,d.u],styles:[".loginFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.loginForm[_ngcontent-%COMP%], .resetPasswordForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:red}"]}),o})();function yi(o,s){1&o&&(e.TgZ(0,"div")(1,"small",9),e._uU(2," Please enter a valid email "),e.qZA()())}function Ai(o,s){1&o&&(e.TgZ(0,"div")(1,"small",9),e._uU(2," Password must contain at least 6 characters "),e.qZA()())}function wi(o,s){1&o&&(e.TgZ(0,"div")(1,"small",9),e._uU(2,"The passwords do not match"),e.qZA()())}function xi(o,s){1&o&&(e.TgZ(0,"div")(1,"small",9),e._uU(2,"Sign up successfull. Please wait to be verified"),e.qZA()())}function Ci(o,s){1&o&&(e.TgZ(0,"div")(1,"small",9),e._uU(2,"Please use an @ucalgary.ca email address"),e.qZA()())}let Mi=new(T())({}),Zi=(()=>{class o{constructor(t,i){this.formBuilder=t,this.authService=i,this.ucalgaryEmailUsed=!0,this.signUpForm=this.formBuilder.group({displayName:[""],email:["",d.kI.pattern(".+@.+.c.+")],password:["",d.kI.pattern("^.{6,}$")],passwordConfirm:[""]})}registerUserNotification(t){Mi.async(t,"User has been registered","User has failed to register, contact tech support")}SignUp(){this.signUpForm.get("password").value===this.signUpForm.get("passwordConfirm").value?(this.passwordsDoNotMatch=!1,this.authService.SignUp(this.signUpForm.get("displayName").value,this.signUpForm.get("email").value,this.signUpForm.get("password").value)):this.passwordsDoNotMatch=!0}SignUpSuccess(){const t=JSON.parse(window.sessionStorage.getItem("User"));return null!==t&&!t.verified}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.QS),e.Y36(H))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:19,vars:7,consts:[[1,"signUpFormDiv"],[1,"signUpForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Display Name","formControlName","displayName","required","",1,"form-control"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["type","password","placeholder","Confirm Password","formControlName","passwordConfirm","required","",1,"form-control"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/login",1,"error"],[1,"error"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return i.SignUp()}),e._UZ(2,"input",2)(3,"input",3),e.YNc(4,yi,3,0,"div",4),e._UZ(5,"input",5),e.YNc(6,Ai,3,0,"div",4),e._UZ(7,"input",6),e.YNc(8,wi,3,0,"div",4),e._UZ(9,"br"),e.TgZ(10,"button",7),e._uU(11," Sign up "),e.qZA(),e._UZ(12,"br"),e.YNc(13,xi,3,0,"div",4),e.YNc(14,Ci,3,0,"div",4),e.TgZ(15,"a",8),e._uU(16,"Have an account? "),e.TgZ(17,"strong"),e._uU(18,"Login here"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.signUpForm),e.xp6(3),e.Q6J("ngIf",i.signUpForm.get("email").invalid&&i.signUpForm.get("email").errors&&(i.signUpForm.get("email").dirty||i.signUpForm.get("email").touched)),e.xp6(2),e.Q6J("ngIf",i.signUpForm.get("password").invalid&&i.signUpForm.get("password").errors&&(i.signUpForm.get("password").dirty||i.signUpForm.get("password").touched)),e.xp6(2),e.Q6J("ngIf",i.passwordsDoNotMatch),e.xp6(2),e.Q6J("disabled",!i.signUpForm.valid),e.xp6(3),e.Q6J("ngIf",i.SignUpSuccess()),e.xp6(1),e.Q6J("ngIf",!i.ucalgaryEmailUsed))},dependencies:[Z.O5,v.yS,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.sg,d.u],styles:[".signUpFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.signUpForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:red}"]}),o})(),we=(()=>{class o{constructor(t,i){this.authService=t,this.router=i}canActivate(t,i){return"User"in window.sessionStorage?JSON.parse(window.sessionStorage.getItem("User")).verified:(this.router.navigateByUrl("portal/login"),!1)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(H),e.LFG(v.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Si(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"th",5),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&o){const t=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.eid),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function Ui(o,s){if(1&o&&(e.TgZ(0,"div")(1,"h1",1),e._uU(2,"Action History"),e.qZA(),e.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",3),e._uU(9,"Entity"),e.qZA(),e.TgZ(10,"th",3),e._uU(11,"Entity ID"),e.qZA(),e.TgZ(12,"th",3),e._uU(13,"Action"),e.qZA(),e.TgZ(14,"th",3),e._uU(15,"Date"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,Si,11,5,"tr",4),e.qZA()(),e._UZ(18,"br"),e.qZA()),2&o){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.userActionHistory)}}function Fi(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",7),e.NdJ("change",function(n){const a=e.CHM(t).$implicit,c=e.oxw().$implicit,M=e.oxw();return e.KtG(M.updateUserPrivileges(c.id,a,n))}),e.qZA(),e._uU(2),e.qZA()}if(2&o){const t=s.$implicit,i=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.s9C("value",t),e.Q6J("checked",n.userHasPrivilege(i.id,t)),e.xp6(1),e.hij(" ",t," ")}}function Ii(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"button",6),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.verifyUser(n.id))}),e._uU(2,"Verify"),e.qZA()()}}function Oi(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th",5),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.YNc(10,Fi,3,3,"div",4),e.qZA(),e.YNc(11,Ii,3,0,"td",0),e.TgZ(12,"td")(13,"button",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.getUserActions(r.id))}),e._uU(14,"History"),e.qZA()(),e.TgZ(15,"td")(16,"button",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteUser(r.id))}),e._uU(17,"Delete"),e.qZA()()()}if(2&o){const t=s.$implicit,i=s.index,n=e.oxw();e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.displayName),e.xp6(2),e.Oqu(t.verified),e.xp6(2),e.Q6J("ngForOf",n.privileges),e.xp6(1),e.Q6J("ngIf",!t.verified)}}let Ei=(()=>{class o{constructor(t,i,n){this.userActionService=t,this.userService=i,this.authService=n,this.privileges=Object.keys(N).map(r=>N[r]),this.userActionHistory=[],this.userPrivileges=new Map}ngOnInit(){this.authService.isAdmin()&&this.userService.getUsers().subscribe(t=>{this.users=t.map(i=>{const n={id:i.payload.doc.id,...i.payload.doc.data()};return this.userPrivileges.set(n.id,n.userPrivileges),n})})}getUserActions(t){this.userActionHistory=[],this.userActionService.getUserActions(t).then(i=>{i.forEach(n=>{this.userActionHistory.push({id:n.id,...n.data()});const r=this.userActionHistory.pop();this.userService.getUser(r.uid).subscribe(a=>{const c=a.data();r.uid=c.displayName,this.userActionHistory.push(r)})})})}getPrivilegeString(t){if(1===t.length)return t[0];let i="";return t.forEach(n=>{i+=n+", "}),i}verifyUser(t){this.userService.verifyUser(t)}updateUserPrivileges(t,i,n){n.target.checked?this.userService.addUserPrivilege(t,i):this.userService.removeUserPrivilege(t,i)}deleteUser(t){this.userService.deleteUser(t)}userHasPrivilege(t,i){return this.userPrivileges.get(t).includes(i)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U.X),e.Y36(S),e.Y36(H))},o.\u0275cmp=e.Xpm({type:o,selectors:[["admin-panel"]],decls:20,vars:2,consts:[[4,"ngIf"],[1,"tableHeading"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-danger",3,"click"],["name","i","type","checkbox",3,"value","checked","change"]],template:function(t,i){1&t&&(e.YNc(0,Ui,19,1,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Users"),e.qZA(),e.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",3),e._uU(9,"Email"),e.qZA(),e.TgZ(10,"th",3),e._uU(11,"Display Name"),e.qZA(),e.TgZ(12,"th",3),e._uU(13,"Verified"),e.qZA(),e.TgZ(14,"th",3),e._uU(15,"Privileges"),e.qZA(),e.TgZ(16,"th",3),e._uU(17,"Action"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,Oi,18,6,"tr",4),e.qZA()()),2&t&&(e.Q6J("ngIf",0!==i.userActionHistory.length),e.xp6(19),e.Q6J("ngForOf",i.users))},dependencies:[Z.sg,Z.O5],styles:[".tableHeading[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em}"]}),o})();function Ni(o,s){1&o&&(e.TgZ(0,"div",4)(1,"button",10),e._uU(2,"Update"),e.qZA()())}function ki(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"th",14),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&o){const t=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.eid),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function Ri(o,s){if(1&o&&(e.TgZ(0,"div")(1,"h1",1),e._uU(2,"Your Action History"),e.qZA(),e.TgZ(3,"table",11)(4,"thead")(5,"tr")(6,"th",12),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",12),e._uU(9,"Entity"),e.qZA(),e.TgZ(10,"th",12),e._uU(11,"Entity ID"),e.qZA(),e.TgZ(12,"th",12),e._uU(13,"Action"),e.qZA(),e.TgZ(14,"th",12),e._uU(15,"Date"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,ki,11,5,"tr",13),e.qZA()()()),2&o){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.userActions)}}function qi(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"th",14),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&o){const t=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.eid),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function Pi(o,s){if(1&o&&(e.TgZ(0,"div")(1,"h1",1),e._uU(2,"Your Action History"),e.qZA(),e.TgZ(3,"table",11)(4,"thead")(5,"tr")(6,"th",12),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",12),e._uU(9,"Entity"),e.qZA(),e.TgZ(10,"th",12),e._uU(11,"Entity ID"),e.qZA(),e.TgZ(12,"th",12),e._uU(13,"Action"),e.qZA(),e.TgZ(14,"th",12),e._uU(15,"Date"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,qi,11,5,"tr",13),e.qZA()()()),2&o){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.userActions)}}function Bi(o,s){1&o&&(e.TgZ(0,"div"),e._UZ(1,"admin-panel"),e.qZA())}let Re=new(T())({}),Hi=(()=>{class o{constructor(t,i,n,r){this.authService=t,this.userService=i,this.userActionService=n,this.formBuilder=r,this.userForm=this.formBuilder.group({displayName:"",email:"",password:""}),this.userActions=[],this.user=JSON.parse(window.sessionStorage.getItem("User"))}updateUserPasswordNotification(t){Re.async(t,"User password has been updated","User password has failed to update. Please use at least 6 characters or contact tech support")}updateUserNameNotification(t){Re.async(t,"User Name has been updated","User Name has failed to update, contact tech support")}updateUserEmailNotification(t){Re.async(t,"User email has been updated","User email has failed to update. Please use @ucalgary.ca email or contact tech support")}ngOnInit(){this.userActionService.getUserActions(this.user.id).then(t=>{t.forEach(i=>{this.userActions.push({id:i.id,...i.data()})})}),this.userForm.get("displayName").setValue(this.user.displayName),this.userForm.get("email").setValue(this.user.email)}getAuth(){return this.authService}getUser(){return JSON.parse(window.sessionStorage.getItem("User"))}manageUser(){const t=JSON.parse(window.sessionStorage.getItem("User"));if(this.userForm.get("displayName").value!==t.displayName&&""!==this.userForm.get("displayName").value){t.displayName=this.userForm.get("displayName").value;let i=this.userService.updateUser(t);this.updateUserNameNotification(i)}if(this.userForm.get("email").value!==t.email){let i=this.authService.ChangeEmail(this.userForm.get("email").value);this.updateUserEmailNotification(i)}if(""!==this.userForm.get("password").value&&this.userForm.get("password").value!==t.password){console.log(t.password),console.log(this.userForm.get("password").value),t.password=this.userForm.get("password").value;let i=this.authService.ChangePassword(this.userForm.get("password").value);this.updateUserPasswordNotification(i)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(H),e.Y36(S),e.Y36(U.X),e.Y36(d.QS))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-profile"]],decls:22,vars:7,consts:[[1,"profileContainer"],[1,"tableHeading"],[1,"userForm"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","displayName","required","",1,"form-control",3,"placeholder"],["type","text","formControlName","email","required","",1,"form-control",3,"placeholder"],["type","password","formControlName","password","required","",1,"form-control"],["class","mb-3",4,"ngIf"],[4,"ngIf"],["type","submit",1,"btn","btn-danger"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h1",1),e._uU(3,"Profile"),e.qZA(),e.TgZ(4,"div",2)(5,"form",3),e.NdJ("ngSubmit",function(){return i.manageUser()}),e.TgZ(6,"div",4)(7,"label"),e._uU(8,"Display Name"),e.qZA(),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"div",4)(11,"label"),e._uU(12,"Email"),e.qZA(),e._UZ(13,"input",6),e.qZA(),e.TgZ(14,"div",4)(15,"label"),e._uU(16,"Password"),e.qZA(),e._UZ(17,"input",7),e.qZA(),e.YNc(18,Ni,3,0,"div",8),e.qZA()(),e.YNc(19,Ri,18,1,"div",9),e.qZA(),e.YNc(20,Pi,18,1,"div",9),e.YNc(21,Bi,2,0,"div",9),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",i.userForm),e.xp6(4),e.s9C("placeholder",i.getUser().displayName),e.xp6(4),e.s9C("placeholder",i.getUser().email),e.xp6(5),e.Q6J("ngIf",i.userForm.get("displayName").dirty||i.userForm.get("email").dirty||i.userForm.get("password").dirty),e.xp6(1),e.Q6J("ngIf",i.getAuth().isAdmin()),e.xp6(1),e.Q6J("ngIf",!i.getAuth().isAdmin()),e.xp6(1),e.Q6J("ngIf",i.getAuth().isAdmin()))},dependencies:[Z.sg,Z.O5,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.sg,d.u,Ei],styles:[".profileContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%}.tableHeading[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em}.userForm[_ngcontent-%COMP%]{max-width:80%;padding-left:1em}"]}),o})();function zi(o,s){1&o&&(e.TgZ(0,"div")(1,"small",7),e._uU(2," Please enter a valid email "),e.qZA()())}function Di(o,s){if(1&o&&(e.TgZ(0,"small",7),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}let Yi=new(T())({});const Qi=[{path:"",component:f,children:[{path:"manage-news",component:Kt,canActivate:[we]},{path:"manage-sponsors",component:ri,canActivate:[we]},{path:"manage-team",component:gi,canActivate:[we]},{path:"manage-inventory",component:Jt,canActivate:[we]},{path:"login",component:bi},{path:"register",component:Zi},{path:"reset-password",component:(()=>{class o{constructor(t,i){this.authService=t,this.formBuilder=i,this.isMessageVisible=!1,this.message="Please check your email to reset your password",this.resetForm=this.formBuilder.group({email:["",d.kI.pattern(".+@.+..+")]})}showMessage(){this.isMessageVisible=!0}resetPasswordNotification(t){Yi.async(t,"Password has been reset","Password has failed to reset. Please contact tech support")}resetPasswordSubmit(){let t=this.authService.ResetPassword(this.resetForm.get("email").value);this.resetPasswordNotification(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(H),e.Y36(d.QS))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reset-password"]],decls:11,vars:4,consts:[[1,"resetFormDiv"],[1,"resetPasswordForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","submit",1,"btn","btn-danger",3,"disabled","click"],["class","error",4,"ngIf"],["routerLink","/portal/login",1,"backToLogin"],[1,"error"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return i.resetPasswordSubmit()}),e._UZ(2,"input",2),e.YNc(3,zi,3,0,"div",3),e._UZ(4,"br"),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.showMessage()}),e._uU(6," Reset Password "),e.qZA(),e.YNc(7,Di,2,1,"small",5),e._UZ(8,"br"),e.TgZ(9,"a",6),e._uU(10,"Back to Login"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.resetForm),e.xp6(2),e.Q6J("ngIf",i.resetForm.get("email").invalid&&i.resetForm.get("email").errors&&(i.resetForm.get("email").dirty||i.resetForm.get("email").touched)),e.xp6(2),e.Q6J("disabled",!i.resetForm.valid),e.xp6(2),e.Q6J("ngIf",i.isMessageVisible))},dependencies:[Z.O5,v.yS,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.sg,d.u],styles:[".resetFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.resetPasswordForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%], .backToLogin[_ngcontent-%COMP%]{color:red}"]}),o})()},{path:"user",component:Hi,canActivate:[we]},{path:"**",redirectTo:"user",pathMatch:"full"}]}];let Wi=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.Bz.forChild(Qi),v.Bz]}),o})();u(5083),u(6028),u(7597),u(9709);let $i=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o,bootstrap:[f]}),o.\u0275inj=e.cJS({imports:[Z.ez,Wi,d.UX,d.u5,j.JF,Q.JP.forRoot(),et,ze.lN,Et]}),o})()},4847:W=>{self,W.exports=(()=>{"use strict";var G={d:(g,m)=>{for(var b in m)G.o(m,b)&&!G.o(g,b)&&Object.defineProperty(g,b,{enumerable:!0,get:m[b]})},o:(g,m)=>Object.prototype.hasOwnProperty.call(g,m),r:g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})}},u={};function Z(g){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}function Q(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}G.r(u),G.d(u,{default:()=>ie});var d={maxNotifications:10,animationDuration:300,position:"bottom-right",labels:{tip:"Tip",info:"Info",success:"Success",warning:"Attention",alert:"Error",async:"Loading",confirm:"Confirmation required",confirmOk:"OK",confirmCancel:"Cancel"},icons:{tip:"question-circle",info:"info-circle",success:"check-circle",warning:"exclamation-circle",alert:"exclamation-triangle",async:"cog fa-spin",confirm:"exclamation-triangle",prefix:"<i class='fa fas fa-fw fa-",suffix:"'></i>",enabled:!0},replacements:{tip:null,info:null,success:null,warning:null,alert:null,async:null,"async-block":null,modal:null,confirm:null,general:{"<script>":"","<\/script>":""}},messages:{tip:"",info:"",success:"Action has been succeeded",warning:"",alert:"Action has been failed",confirm:"This action can't be undone. Continue?",async:"Please, wait...","async-block":"Loading"},formatError:function(g){if(g.response){if(!g.response.data)return"500 API Server Error";if(g.response.data.errors)return g.response.data.errors.map(function(m){return m.detail}).join("<br>");if(g.response.statusText)return"".concat(g.response.status," ").concat(g.response.statusText,": ").concat(g.response.data)}return g.message?g.message:g},durations:{global:5e3,success:null,info:null,tip:null,warning:null,alert:null},minDurations:{async:1e3,"async-block":1e3}},v=function(){function g(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;Q(this,g),Object.assign(this,this.defaultsDeep(w,l))}var b;return(b=[{key:"icon",value:function(l){return this.icons.enabled?"".concat(this.icons.prefix).concat(this.icons[l]).concat(this.icons.suffix):""}},{key:"label",value:function(l){return this.labels[l]}},{key:"duration",value:function(l){var w=this.durations[l];return null===w?this.durations.global:w}},{key:"toSecs",value:function(l){return"".concat(l/1e3,"s")}},{key:"applyReplacements",value:function(l,w){if(!l)return this.messages[w]||"";for(var P=0,F=["general",w];P<F.length;P++){var y=F[P];if(this.replacements[y])for(var C in this.replacements[y])l=l.replace(C,this.replacements[y][C])}return l}},{key:"override",value:function(l){return l?new g(l,this):this}},{key:"defaultsDeep",value:function(l,w){var P={};for(var F in l)P[F]=w.hasOwnProperty(F)?"object"===Z(l[F])&&null!==l[F]?this.defaultsDeep(l[F],w[F]):w[F]:l[F];return P}}])&&function j(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(g.prototype,b),g}(),x="awn",e={popup:"".concat(x,"-popup"),toast:"".concat(x,"-toast"),btn:"".concat(x,"-btn"),confirm:"".concat(x,"-confirm")},N={prefix:e.toast,klass:{label:"".concat(e.toast,"-label"),content:"".concat(e.toast,"-content"),icon:"".concat(e.toast,"-icon"),progressBar:"".concat(e.toast,"-progress-bar"),progressBarPause:"".concat(e.toast,"-progress-bar-paused")},ids:{container:"".concat(e.toast,"-container")}},I={prefix:e.popup,klass:{buttons:"".concat(x,"-buttons"),button:e.btn,successBtn:"".concat(e.btn,"-success"),cancelBtn:"".concat(e.btn,"-cancel"),title:"".concat(e.popup,"-title"),body:"".concat(e.popup,"-body"),content:"".concat(e.popup,"-content"),dotAnimation:"".concat(e.popup,"-loading-dots")},ids:{wrapper:"".concat(e.popup,"-wrapper"),confirmOk:"".concat(e.confirm,"-ok"),confirmCancel:"".concat(e.confirm,"-cancel")}},O={klass:{hiding:"".concat(x,"-hiding")},lib:x};var H=function(){function g(l,w,P,F,y){(function(C,D){if(!(C instanceof D))throw new TypeError("Cannot call a class as a function")})(this,g),this.newNode=document.createElement("div"),w&&(this.newNode.id=w),P&&(this.newNode.className=P),F&&(this.newNode.style.cssText=F),this.parent=l,this.options=y}var b;return b=[{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"insert",value:function(){return this.beforeInsert(),this.el=this.parent.appendChild(this.newNode),this.afterInsert(),this}},{key:"replace",value:function(l){var w=this;if(this.getElement())return this.beforeDelete().then(function(){return w.updateType(l.type),w.parent.replaceChild(l.newNode,w.el),w.el=w.getElement(l.newNode),w.afterInsert(),w})}},{key:"beforeDelete",value:function(){var l=this,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el,P=0;return this.start&&(P=this.options.minDurations[this.type]+this.start-Date.now())<0&&(P=0),new Promise(function(F){setTimeout(function(){w.classList.add(O.klass.hiding),setTimeout(F,l.options.animationDuration)},P)})}},{key:"delete",value:function(){var l=this,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return this.getElement(w)?this.beforeDelete(w).then(function(){w.remove(),l.afterDelete()}):null}},{key:"afterDelete",value:function(){}},{key:"getElement",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return l?document.getElementById(l.id):null}},{key:"addEvent",value:function(l,w){this.el.addEventListener(l,w)}},{key:"toggleClass",value:function(l){this.el.classList.toggle(l)}},{key:"updateType",value:function(l){this.type=l,this.duration=this.options.duration(this.type)}}],b&&function S(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(g.prototype,b),g}();var L=function(){function g(l,w){(function(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")})(this,g),this.callback=l,this.remaining=w,this.resume()}var b;return(b=[{key:"pause",value:function(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"resume",value:function(){var l=this;this.paused=!1,this.start=new Date,window.clearTimeout(this.timerId),this.timerId=window.setTimeout(function(){window.clearTimeout(l.timerId),l.callback()},this.remaining)}},{key:"toggle",value:function(){this.paused?this.resume():this.pause()}}])&&function B(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(g.prototype,b),g}();function z(g){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}function p(g,m){return(p=Object.setPrototypeOf||function(b,l){return b.__proto__=l,b})(g,m)}function _(g,m){if(m&&("object"===z(m)||"function"==typeof m))return m;if(void 0!==m)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(g)}function f(g){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})(g)}var A=function(g){!function(y,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(C&&C.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),C&&p(y,C)}(F,g);var b,l,w,P=(l=F,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,C=f(l);if(w){var D=f(this).constructor;y=Reflect.construct(C,arguments,D)}else y=C.apply(this,arguments);return _(this,y)});function F(y,C,D,le){var de;return function(he,pe){if(!(he instanceof pe))throw new TypeError("Cannot call a class as a function")}(this,F),(de=P.call(this,le,"".concat(N.prefix,"-").concat(Math.floor(Date.now()-100*Math.random())),"".concat(N.prefix," ").concat(N.prefix,"-").concat(C),"animation-duration: ".concat(D.toSecs(D.animationDuration),";"),D)).updateType(C),de.setInnerHtml(y),de}return b=[{key:"setInnerHtml",value:function(y){"alert"===this.type&&y&&(y=this.options.formatError(y)),y=this.options.applyReplacements(y,this.type),this.newNode.innerHTML='<div class="awn-toast-wrapper">'.concat(this.progressBar).concat(this.label,'<div class="').concat(N.klass.content,'">').concat(y,'</div><span class="').concat(N.klass.icon,'">').concat(this.options.icon(this.type),"</span></div>")}},{key:"beforeInsert",value:function(){var y=this;if(this.parent.childElementCount>=this.options.maxNotifications){var C=Array.from(this.parent.getElementsByClassName(N.prefix));this.delete(C.find(function(D){return!y.isDeleted(D)}))}}},{key:"afterInsert",value:function(){var y=this;if("async"==this.type)return this.start=Date.now();if(this.addEvent("click",function(){return y.delete()}),!(this.duration<=0)){this.timer=new L(function(){return y.delete()},this.duration);for(var C=0,D=["mouseenter","mouseleave"];C<D.length;C++)this.addEvent(D[C],function(){y.isDeleted()||(y.toggleClass(N.klass.progressBarPause),y.timer.toggle())})}}},{key:"isDeleted",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el).classList.contains(O.klass.hiding)}},{key:"progressBar",get:function(){return this.duration<=0||"async"===this.type?"":"<div class='".concat(N.klass.progressBar,"' style=\"animation-duration:").concat(this.options.toSecs(this.duration),';"></div>')}},{key:"label",get:function(){return'<b class="'.concat(N.klass.label,'">').concat(this.options.label(this.type),"</b>")}}],b&&function h(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(F.prototype,b),F}(H);function T(g){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}function q(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function J(g,m){return(J=Object.setPrototypeOf||function(b,l){return b.__proto__=l,b})(g,m)}function V(g,m){if(m&&("object"===T(m)||"function"==typeof m))return m;if(void 0!==m)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(g)}function ee(g){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})(g)}var ae=function(g){!function(y,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(C&&C.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),C&&J(y,C)}(F,g);var b,l,w,P=(l=F,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,C=ee(l);if(w){var D=ee(this).constructor;y=Reflect.construct(C,arguments,D)}else y=C.apply(this,arguments);return V(this,y)});function F(y){var C,D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"modal",le=arguments.length>2?arguments[2]:void 0,de=arguments.length>3?arguments[3]:void 0,he=arguments.length>4?arguments[4]:void 0;q(this,F);var pe="animation-duration: ".concat(le.toSecs(le.animationDuration),";");return(C=P.call(this,document.body,I.ids.wrapper,null,pe,le))[I.ids.confirmOk]=de,C[I.ids.confirmCancel]=he,C.className="".concat(I.prefix,"-").concat(D),["confirm","async-block","modal"].includes(D)||(D="modal"),C.updateType(D),C.setInnerHtml(y),C.insert(),C}return(b=[{key:"setInnerHtml",value:function(y){var C=this.options.applyReplacements(y,this.type);switch(this.type){case"confirm":var D=["<button class='".concat(I.klass.button," ").concat(I.klass.successBtn,"'id='").concat(I.ids.confirmOk,"'>").concat(this.options.labels.confirmOk,"</button>")];!1!==this[I.ids.confirmCancel]&&D.push("<button class='".concat(I.klass.button," ").concat(I.klass.cancelBtn,"'id='").concat(I.ids.confirmCancel,"'>").concat(this.options.labels.confirmCancel,"</button>")),C="".concat(this.options.icon(this.type),"<div class='").concat(I.klass.title,"'>").concat(this.options.label(this.type),'</div><div class="').concat(I.klass.content,'">').concat(C,"</div><div class='").concat(I.klass.buttons," ").concat(I.klass.buttons,"-").concat(D.length,"'>").concat(D.join(""),"</div>");break;case"async-block":C="".concat(C,'<div class="').concat(I.klass.dotAnimation,'"></div>')}this.newNode.innerHTML='<div class="'.concat(I.klass.body," ").concat(this.className,'">').concat(C,"</div>")}},{key:"keyupListener",value:function(y){if("async-block"===this.type)return y.preventDefault();switch(y.code){case"Escape":y.preventDefault(),this.delete();case"Tab":if(y.preventDefault(),"confirm"!==this.type||!1===this[I.ids.confirmCancel])return!0;var C=this.okBtn;y.shiftKey?document.activeElement.id==I.ids.confirmOk&&(C=this.cancelBtn):document.activeElement.id!==I.ids.confirmCancel&&(C=this.cancelBtn),C.focus()}}},{key:"afterInsert",value:function(){var y=this;switch(this.listener=function(C){return y.keyupListener(C)},window.addEventListener("keydown",this.listener),this.type){case"async-block":this.start=Date.now();break;case"confirm":this.okBtn.focus(),this.addEvent("click",function(C){if("BUTTON"!==C.target.nodeName)return!1;y.delete(),y[C.target.id]&&y[C.target.id]()});break;default:document.activeElement.blur(),this.addEvent("click",function(C){C.target.id===y.newNode.id&&y.delete()})}}},{key:"afterDelete",value:function(){window.removeEventListener("keydown",this.listener)}},{key:"okBtn",get:function(){return document.getElementById(I.ids.confirmOk)}},{key:"cancelBtn",get:function(){return document.getElementById(I.ids.confirmCancel)}}])&&function U(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(F.prototype,b),F}(H);function se(g){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}function ne(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}var ie=function(){function g(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ne(this,g),this.options=new v(l)}var b;return(b=[{key:"tip",value:function(l,w){return this._addToast(l,"tip",w).el}},{key:"info",value:function(l,w){return this._addToast(l,"info",w).el}},{key:"success",value:function(l,w){return this._addToast(l,"success",w).el}},{key:"warning",value:function(l,w){return this._addToast(l,"warning",w).el}},{key:"alert",value:function(l,w){return this._addToast(l,"alert",w).el}},{key:"async",value:function(l,w,P,F,y){var C=this._addToast(F,"async",y);return this._afterAsync(l,w,P,y,C)}},{key:"confirm",value:function(l,w,P,F){return this._addPopup(l,"confirm",F,w,P)}},{key:"asyncBlock",value:function(l,w,P,F,y){var C=this._addPopup(F,"async-block",y);return this._afterAsync(l,w,P,y,C)}},{key:"modal",value:function(l,w,P){return this._addPopup(l,w,P)}},{key:"closeToasts",value:function(){for(var l=this.container;l.firstChild;)l.removeChild(l.firstChild)}},{key:"_addPopup",value:function(l,w,P,F,y){return new ae(l,w,this.options.override(P),F,y)}},{key:"_addToast",value:function(l,w,P,F){P=this.options.override(P);var y=new A(l,w,P,this.container);return F?F instanceof ae?F.delete().then(function(){return y.insert()}):F.replace(y):y.insert()}},{key:"_afterAsync",value:function(l,w,P,F,y){return l.then(this._responseHandler(w,"success",F,y),this._responseHandler(P,"alert",F,y))}},{key:"_responseHandler",value:function(l,w,P,F){var y=this;return function(C){switch(se(l)){case"undefined":case"string":y._addToast("alert"===w?l||C:l,w,P,F);break;default:F.delete().then(function(){l&&l(C)})}}}},{key:"_createContainer",value:function(){return new H(document.body,N.ids.container,"awn-".concat(this.options.position)).insert().el}},{key:"container",get:function(){return document.getElementById(N.ids.container)||this._createContainer()}}])&&function oe(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(g.prototype,b),g}();return u})()},6028:()=>{!function(W){W.languages.typescript=W.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),W.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete W.languages.typescript.parameter,delete W.languages.typescript["literal-property"];var G=W.languages.extend("typescript",{});delete G["class-name"],W.languages.typescript["class-name"].inside=G,W.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:G}}}}),W.languages.ts=W.languages.typescript}(Prism)},9709:()=>{!function(){if(!(typeof Prism>"u"||typeof document>"u")&&document.querySelector){var O,W="line-numbers",G="linkable-line-numbers",u=/\n(?!$)/g,e=!0;Prism.plugins.lineHighlight={highlightLines:function(S,H,B){var L=(H="string"==typeof H?H:S.getAttribute("data-line")||"").replace(/\s+/g,"").split(",").filter(Boolean),z=+S.getAttribute("data-line-offset")||0,p=(function(){if(typeof O>"u"){var S=document.createElement("div");S.style.fontSize="13px",S.style.lineHeight="1.5",S.style.padding="0",S.style.border="0",S.innerHTML="&nbsp;<br />&nbsp;",document.body.appendChild(S),O=38===S.offsetHeight,document.body.removeChild(S)}return O}()?parseInt:parseFloat)(getComputedStyle(S).lineHeight),_=Prism.util.isActive(S,W),f=S.querySelector("code"),A=_?S:f||S,T=[],q=f.textContent.match(u),U=q?q.length+1:1,J=f&&A!=f?function v(O,S){var H=getComputedStyle(O),B=getComputedStyle(S);function L(z){return+z.substr(0,z.length-2)}return S.offsetTop+L(B.borderTopWidth)+L(B.paddingTop)-L(H.paddingTop)}(S,f):0;L.forEach(function(ae){var se=ae.split("-"),ne=+se[0],oe=+se[1]||ne;if(!((oe=Math.min(U+z,oe))<ne)){var ie=S.querySelector('.line-highlight[data-range="'+ae+'"]')||document.createElement("div");if(T.push(function(){ie.setAttribute("aria-hidden","true"),ie.setAttribute("data-range",ae),ie.className=(B||"")+" line-highlight"}),_&&Prism.plugins.lineNumbers){var g=Prism.plugins.lineNumbers.getLine(S,ne),m=Prism.plugins.lineNumbers.getLine(S,oe);if(g){var b=g.offsetTop+J+"px";T.push(function(){ie.style.top=b})}if(m){var l=m.offsetTop-g.offsetTop+m.offsetHeight+"px";T.push(function(){ie.style.height=l})}}else T.push(function(){ie.setAttribute("data-start",String(ne)),oe>ne&&ie.setAttribute("data-end",String(oe)),ie.style.top=(ne-z-1)*p+J+"px",ie.textContent=new Array(oe-ne+2).join(" \n")});T.push(function(){ie.style.width=S.scrollWidth+"px"}),T.push(function(){A.appendChild(ie)})}});var V=S.id;if(_&&Prism.util.isActive(S,G)&&V){Q(S,G)||T.push(function(){S.classList.add(G)});var ee=parseInt(S.getAttribute("data-start")||"1");Z(".line-numbers-rows > span",S).forEach(function(ae,se){var ne=se+ee;ae.onclick=function(){e=!1,location.hash=V+"."+ne,setTimeout(function(){e=!0},1)}})}return function(){T.forEach(j)}}};var I=0;Prism.hooks.add("before-sanity-check",function(O){var S=O.element.parentElement;if(x(S)){var H=0;Z(".line-highlight",S).forEach(function(B){H+=B.textContent.length,B.parentNode.removeChild(B)}),H&&/^(?: \n)+$/.test(O.code.slice(-H))&&(O.code=O.code.slice(0,-H))}}),Prism.hooks.add("complete",function O(S){var H=S.element.parentElement;if(x(H)){clearTimeout(I);var B=Prism.plugins.lineNumbers,L=S.plugins&&S.plugins.lineNumbers;Q(H,W)&&B&&!L?Prism.hooks.add("line-numbers",O):(Prism.plugins.lineHighlight.highlightLines(H)(),I=setTimeout(N,1))}}),window.addEventListener("hashchange",N),window.addEventListener("resize",function(){Z("pre").filter(x).map(function(S){return Prism.plugins.lineHighlight.highlightLines(S)}).forEach(j)})}function Z(O,S){return Array.prototype.slice.call((S||document).querySelectorAll(O))}function Q(O,S){return O.classList.contains(S)}function j(O){O()}function x(O){return!(!O||!/pre/i.test(O.nodeName)||!(O.hasAttribute("data-line")||O.id&&Prism.util.isActive(O,G)))}function N(){var O=location.hash.slice(1);Z(".temporary.line-highlight").forEach(function(z){z.parentNode.removeChild(z)});var S=(O.match(/\.([\d,-]+)$/)||[,""])[1];if(S&&!document.getElementById(O)){var H=O.slice(0,O.lastIndexOf(".")),B=document.getElementById(H);B&&(B.hasAttribute("data-line")||B.setAttribute("data-line",""),Prism.plugins.lineHighlight.highlightLines(B,S,"temporary ")(),e&&document.querySelector(".temporary.line-highlight").scrollIntoView())}}}()},7597:()=>{!function(){if(!(typeof Prism>"u"||typeof document>"u")){var W="line-numbers",G=/\n(?!$)/g,u=Prism.plugins.lineNumbers={getLine:function(d,v){if("PRE"===d.tagName&&d.classList.contains(W)){var x=d.querySelector(".line-numbers-rows");if(x){var e=parseInt(d.getAttribute("data-start"),10)||1,N=e+(x.children.length-1);return v<e&&(v=e),v>N&&(v=N),x.children[v-e]}}},resize:function(d){Z([d])},assumeViewportIndependence:!0},j=void 0;window.addEventListener("resize",function(){u.assumeViewportIndependence&&j===window.innerWidth||(j=window.innerWidth,Z(Array.prototype.slice.call(document.querySelectorAll("pre."+W))))}),Prism.hooks.add("complete",function(d){if(d.code){var v=d.element,x=v.parentNode;if(x&&/pre/i.test(x.nodeName)&&!v.querySelector(".line-numbers-rows")&&Prism.util.isActive(v,W)){v.classList.remove(W),x.classList.add(W);var I,e=d.code.match(G),O=new Array((e?e.length+1:1)+1).join("<span></span>");(I=document.createElement("span")).setAttribute("aria-hidden","true"),I.className="line-numbers-rows",I.innerHTML=O,x.hasAttribute("data-start")&&(x.style.counterReset="linenumber "+(parseInt(x.getAttribute("data-start"),10)-1)),d.element.appendChild(I),Z([x]),Prism.hooks.run("line-numbers",d)}}}),Prism.hooks.add("line-numbers",function(d){d.plugins=d.plugins||{},d.plugins.lineNumbers=!0})}function Z(d){if(0!=(d=d.filter(function(x){var e=function Q(d){return d?window.getComputedStyle?getComputedStyle(d):d.currentStyle||null:null}(x),N=e["white-space"];return"pre-wrap"===N||"pre-line"===N})).length){var v=d.map(function(x){var e=x.querySelector("code"),N=x.querySelector(".line-numbers-rows");if(e&&N){var I=x.querySelector(".line-numbers-sizer"),O=e.textContent.split(G);I||((I=document.createElement("span")).className="line-numbers-sizer",e.appendChild(I)),I.innerHTML="0",I.style.display="block";var S=I.getBoundingClientRect().height;return I.innerHTML="",{element:x,lines:O,lineHeights:[],oneLinerHeight:S,sizer:I}}}).filter(Boolean);v.forEach(function(x){var e=x.sizer,N=x.lines,I=x.lineHeights,O=x.oneLinerHeight;I[N.length-1]=void 0,N.forEach(function(S,H){if(S&&S.length>1){var B=e.appendChild(document.createElement("span"));B.style.display="block",B.textContent=S}else I[H]=O})}),v.forEach(function(x){for(var e=x.sizer,N=x.lineHeights,I=0,O=0;O<N.length;O++)void 0===N[O]&&(N[O]=e.children[I++].getBoundingClientRect().height)}),v.forEach(function(x){var e=x.sizer,N=x.element.querySelector(".line-numbers-rows");e.style.display="none",e.innerHTML="",x.lineHeights.forEach(function(I,O){N.children[O].style.height=I+"px"})})}}}()},5083:W=>{var u=function(Z){var Q=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,j=0,d={},v={manual:Z.Prism&&Z.Prism.manual,disableWorkerMessageHandler:Z.Prism&&Z.Prism.disableWorkerMessageHandler,util:{encode:function h(p){return p instanceof x?new x(p.type,h(p.content),p.alias):Array.isArray(p)?p.map(h):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(h){return Object.prototype.toString.call(h).slice(8,-1)},objId:function(h){return h.__id||Object.defineProperty(h,"__id",{value:++j}),h.__id},clone:function h(p,_){var f,A;switch(_=_||{},v.util.type(p)){case"Object":if(A=v.util.objId(p),_[A])return _[A];for(var T in _[A]=f={},p)p.hasOwnProperty(T)&&(f[T]=h(p[T],_));return f;case"Array":return A=v.util.objId(p),_[A]?_[A]:(_[A]=f=[],p.forEach(function(q,U){f[U]=h(q,_)}),f);default:return p}},getLanguage:function(h){for(;h;){var p=Q.exec(h.className);if(p)return p[1].toLowerCase();h=h.parentElement}return"none"},setLanguage:function(h,p){h.className=h.className.replace(RegExp(Q,"gi"),""),h.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(f){var h=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(f.stack)||[])[1];if(h){var p=document.getElementsByTagName("script");for(var _ in p)if(p[_].src==h)return p[_]}return null}},isActive:function(h,p,_){for(var f="no-"+p;h;){var A=h.classList;if(A.contains(p))return!0;if(A.contains(f))return!1;h=h.parentElement}return!!_}},languages:{plain:d,plaintext:d,text:d,txt:d,extend:function(h,p){var _=v.util.clone(v.languages[h]);for(var f in p)_[f]=p[f];return _},insertBefore:function(h,p,_,f){var A=(f=f||v.languages)[h],T={};for(var q in A)if(A.hasOwnProperty(q)){if(q==p)for(var U in _)_.hasOwnProperty(U)&&(T[U]=_[U]);_.hasOwnProperty(q)||(T[q]=A[q])}var J=f[h];return f[h]=T,v.languages.DFS(v.languages,function(V,ee){ee===J&&V!=h&&(this[V]=T)}),T},DFS:function h(p,_,f,A){A=A||{};var T=v.util.objId;for(var q in p)if(p.hasOwnProperty(q)){_.call(p,q,p[q],f||q);var U=p[q],J=v.util.type(U);"Object"!==J||A[T(U)]?"Array"===J&&!A[T(U)]&&(A[T(U)]=!0,h(U,_,q,A)):(A[T(U)]=!0,h(U,_,null,A))}}},plugins:{},highlightAll:function(h,p){v.highlightAllUnder(document,h,p)},highlightAllUnder:function(h,p,_){var f={callback:_,container:h,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};v.hooks.run("before-highlightall",f),f.elements=Array.prototype.slice.apply(f.container.querySelectorAll(f.selector)),v.hooks.run("before-all-elements-highlight",f);for(var T,A=0;T=f.elements[A++];)v.highlightElement(T,!0===p,f.callback)},highlightElement:function(h,p,_){var f=v.util.getLanguage(h),A=v.languages[f];v.util.setLanguage(h,f);var T=h.parentElement;T&&"pre"===T.nodeName.toLowerCase()&&v.util.setLanguage(T,f);var U={element:h,language:f,grammar:A,code:h.textContent};function J(ee){U.highlightedCode=ee,v.hooks.run("before-insert",U),U.element.innerHTML=U.highlightedCode,v.hooks.run("after-highlight",U),v.hooks.run("complete",U),_&&_.call(U.element)}if(v.hooks.run("before-sanity-check",U),(T=U.element.parentElement)&&"pre"===T.nodeName.toLowerCase()&&!T.hasAttribute("tabindex")&&T.setAttribute("tabindex","0"),!U.code)return v.hooks.run("complete",U),void(_&&_.call(U.element));if(v.hooks.run("before-highlight",U),U.grammar)if(p&&Z.Worker){var V=new Worker(v.filename);V.onmessage=function(ee){J(ee.data)},V.postMessage(JSON.stringify({language:U.language,code:U.code,immediateClose:!0}))}else J(v.highlight(U.code,U.grammar,U.language));else J(v.util.encode(U.code))},highlight:function(h,p,_){var f={code:h,grammar:p,language:_};if(v.hooks.run("before-tokenize",f),!f.grammar)throw new Error('The language "'+f.language+'" has no grammar.');return f.tokens=v.tokenize(f.code,f.grammar),v.hooks.run("after-tokenize",f),x.stringify(v.util.encode(f.tokens),f.language)},tokenize:function(h,p){var _=p.rest;if(_){for(var f in _)p[f]=_[f];delete p.rest}var A=new I;return O(A,A.head,h),N(h,A,p,A.head,0),function H(h){for(var p=[],_=h.head.next;_!==h.tail;)p.push(_.value),_=_.next;return p}(A)},hooks:{all:{},add:function(h,p){var _=v.hooks.all;_[h]=_[h]||[],_[h].push(p)},run:function(h,p){var _=v.hooks.all[h];if(_&&_.length)for(var A,f=0;A=_[f++];)A(p)}},Token:x};function x(h,p,_,f){this.type=h,this.content=p,this.alias=_,this.length=0|(f||"").length}function e(h,p,_,f){h.lastIndex=p;var A=h.exec(_);if(A&&f&&A[1]){var T=A[1].length;A.index+=T,A[0]=A[0].slice(T)}return A}function N(h,p,_,f,A,T){for(var q in _)if(_.hasOwnProperty(q)&&_[q]){var U=_[q];U=Array.isArray(U)?U:[U];for(var J=0;J<U.length;++J){if(T&&T.cause==q+","+J)return;var V=U[J],ee=V.inside,ae=!!V.lookbehind,se=!!V.greedy,ne=V.alias;if(se&&!V.pattern.global){var oe=V.pattern.toString().match(/[imsuy]*$/)[0];V.pattern=RegExp(V.pattern.source,oe+"g")}for(var ie=V.pattern||V,g=f.next,m=A;g!==p.tail&&!(T&&m>=T.reach);m+=g.value.length,g=g.next){var b=g.value;if(p.length>h.length)return;if(!(b instanceof x)){var w,l=1;if(se){if(!(w=e(ie,m,h,ae))||w.index>=h.length)break;var C=w.index,P=w.index+w[0].length,F=m;for(F+=g.value.length;C>=F;)F+=(g=g.next).value.length;if(m=F-=g.value.length,g.value instanceof x)continue;for(var y=g;y!==p.tail&&(F<P||"string"==typeof y.value);y=y.next)l++,F+=y.value.length;l--,b=h.slice(m,F),w.index-=m}else if(!(w=e(ie,0,b,ae)))continue;var D=w[0],le=b.slice(0,C=w.index),de=b.slice(C+D.length),he=m+b.length;T&&he>T.reach&&(T.reach=he);var pe=g.prev;if(le&&(pe=O(p,pe,le),m+=le.length),S(p,pe,l),g=O(p,pe,new x(q,ee?v.tokenize(D,ee):D,ne,D)),de&&O(p,g,de),l>1){var be={cause:q+","+J,reach:he};N(h,p,_,g.prev,m,be),T&&be.reach>T.reach&&(T.reach=be.reach)}}}}}}function I(){var h={value:null,prev:null,next:null},p={value:null,prev:h,next:null};h.next=p,this.head=h,this.tail=p,this.length=0}function O(h,p,_){var f=p.next,A={value:_,prev:p,next:f};return p.next=A,f.prev=A,h.length++,A}function S(h,p,_){for(var f=p.next,A=0;A<_&&f!==h.tail;A++)f=f.next;p.next=f,f.prev=p,h.length-=A}if(Z.Prism=v,x.stringify=function h(p,_){if("string"==typeof p)return p;if(Array.isArray(p)){var f="";return p.forEach(function(J){f+=h(J,_)}),f}var A={type:p.type,content:h(p.content,_),tag:"span",classes:["token",p.type],attributes:{},language:_},T=p.alias;T&&(Array.isArray(T)?Array.prototype.push.apply(A.classes,T):A.classes.push(T)),v.hooks.run("wrap",A);var q="";for(var U in A.attributes)q+=" "+U+'="'+(A.attributes[U]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+q+">"+A.content+"</"+A.tag+">"},!Z.document)return Z.addEventListener&&(v.disableWorkerMessageHandler||Z.addEventListener("message",function(h){var p=JSON.parse(h.data),_=p.language,A=p.immediateClose;Z.postMessage(v.highlight(p.code,v.languages[_],_)),A&&Z.close()},!1)),v;var B=v.util.currentScript();function L(){v.manual||v.highlightAll()}if(B&&(v.filename=B.src,B.hasAttribute("data-manual")&&(v.manual=!0)),!v.manual){var z=document.readyState;"loading"===z||"interactive"===z&&B&&B.defer?document.addEventListener("DOMContentLoaded",L):window.requestAnimationFrame?window.requestAnimationFrame(L):window.setTimeout(L,16)}return v}(typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{});W.exports&&(W.exports=u),typeof global<"u"&&(global.Prism=u),u.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},u.languages.markup.tag.inside["attr-value"].inside.entity=u.languages.markup.entity,u.languages.markup.doctype.inside["internal-subset"].inside=u.languages.markup,u.hooks.add("wrap",function(Z){"entity"===Z.type&&(Z.attributes.title=Z.content.replace(/&amp;/,"&"))}),Object.defineProperty(u.languages.markup.tag,"addInlined",{value:function(Q,j){var d={};d["language-"+j]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:u.languages[j]},d.cdata=/^<!\[CDATA\[|\]\]>$/i;var v={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:d}};v["language-"+j]={pattern:/[\s\S]+/,inside:u.languages[j]};var x={};x[Q]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return Q}),"i"),lookbehind:!0,greedy:!0,inside:v},u.languages.insertBefore("markup","cdata",x)}}),Object.defineProperty(u.languages.markup.tag,"addAttribute",{value:function(Z,Q){u.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+Z+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[Q,"language-"+Q],inside:u.languages[Q]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),u.languages.html=u.languages.markup,u.languages.mathml=u.languages.markup,u.languages.svg=u.languages.markup,u.languages.xml=u.languages.extend("markup",{}),u.languages.ssml=u.languages.xml,u.languages.atom=u.languages.xml,u.languages.rss=u.languages.xml,function(Z){var Q=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;Z.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+Q.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+Q.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+Q.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+Q.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:Q,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},Z.languages.css.atrule.inside.rest=Z.languages.css;var j=Z.languages.markup;j&&(j.tag.addInlined("style","css"),j.tag.addAttribute("style","css"))}(u),u.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},u.languages.javascript=u.languages.extend("clike",{"class-name":[u.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),u.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,u.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:u.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:u.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:u.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:u.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:u.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),u.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:u.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),u.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),u.languages.markup&&(u.languages.markup.tag.addInlined("script","javascript"),u.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),u.languages.js=u.languages.javascript,function(){if(!(typeof u>"u"||typeof document>"u")){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var d={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},v="data-src-status",x="loading",e="loaded",I="pre[data-src]:not(["+v+'="'+e+'"]):not(['+v+'="'+x+'"])';u.hooks.add("before-highlightall",function(B){B.selector+=", "+I}),u.hooks.add("before-sanity-check",function(B){var L=B.element;if(L.matches(I)){B.code="",L.setAttribute(v,x);var z=L.appendChild(document.createElement("CODE"));z.textContent="Loading\u2026";var h=L.getAttribute("data-src"),p=B.language;if("none"===p){var _=(/\.(\w+)$/.exec(h)||[,"none"])[1];p=d[_]||_}u.util.setLanguage(z,p),u.util.setLanguage(L,p);var f=u.plugins.autoloader;f&&f.loadLanguages(p),function O(B,L,z){var h=new XMLHttpRequest;h.open("GET",B,!0),h.onreadystatechange=function(){4==h.readyState&&(h.status<400&&h.responseText?L(h.responseText):z(h.status>=400?function(B,L){return"\u2716 Error "+B+" while fetching file: "+L}(h.status,h.statusText):"\u2716 Error: File does not exist or is empty"))},h.send(null)}(h,function(A){L.setAttribute(v,e);var T=function S(B){var L=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(B||"");if(L){var z=Number(L[1]),p=L[3];return L[2]?p?[z,Number(p)]:[z,void 0]:[z,z]}}(L.getAttribute("data-range"));if(T){var q=A.split(/\r\n?|\n/g),U=T[0],J=T[1]??q.length;U<0&&(U+=q.length),U=Math.max(0,Math.min(U-1,q.length)),J<0&&(J+=q.length),J=Math.max(0,Math.min(J,q.length)),A=q.slice(U,J).join("\n"),L.hasAttribute("data-start")||L.setAttribute("data-start",String(U+1))}z.textContent=A,u.highlightElement(z)},function(A){L.setAttribute(v,"failed"),z.textContent=A})}}),u.plugins.fileHighlight={highlight:function(L){for(var p,z=(L||document).querySelectorAll(I),h=0;p=z[h++];)u.highlightElement(p)}};var H=!1;u.fileHighlight=function(){H||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),H=!0),u.plugins.fileHighlight.highlight.apply(this,arguments)}}}()}}]);