"use strict";(self.webpackChunkSolar_Car_Website=self.webpackChunkSolar_Car_Website||[]).push([[179],{6217:(Lt,We,U)=>{U.d(We,{nm:()=>ks});var w=U(4976);U(4650),U(259);var Ve=U(5861),Ee=U(6881),Ne=U(4859),ft=U(2090),Et=U(1877);const et=new Map,He={activated:!1,tokenObservers:[]},we={initialized:!1,enabled:!1};function Pe(Oe){return et.get(Oe)||Object.assign({},He)}function je(){return we}class nr{constructor(be,ze,lt,Rt,gn){if(this.operation=be,this.retryPolicy=ze,this.getWaitDuration=lt,this.lowerBound=Rt,this.upperBound=gn,this.pending=null,this.nextErrorWaitInterval=Rt,Rt>gn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(be){var ze=this;return(0,Ve.Z)(function*(){ze.stop();try{ze.pending=new ft.BH,yield function Mn(Oe){return new Promise(be=>{setTimeout(be,Oe)})}(ze.getNextRun(be)),ze.pending.resolve(),yield ze.pending.promise,ze.pending=new ft.BH,yield ze.operation(),ze.pending.resolve(),yield ze.pending.promise,ze.process(!0).catch(()=>{})}catch(lt){ze.retryPolicy(lt)?ze.process(!1).catch(()=>{}):ze.stop()}})()}getNextRun(be){if(be)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ze=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ze}}}const pt=new ft.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wn(Oe){if(!Pe(Oe).activated)throw pt.create("use-before-activation",{appName:Oe.name})}function Sr(Oe,be){return yr.apply(this,arguments)}function yr(){return(yr=(0,Ve.Z)(function*({url:Oe,body:be},ze){const lt={"Content-Type":"application/json"},Rt=ze.getImmediate({optional:!0});if(Rt){const Ni=yield Rt.getHeartbeatsHeader();Ni&&(lt["X-Firebase-Client"]=Ni)}const gn={method:"POST",body:JSON.stringify(be),headers:lt};let Xn,kn;try{Xn=yield fetch(Oe,gn)}catch(Ni){throw pt.create("fetch-network-error",{originalErrorMessage:Ni?.message})}if(200!==Xn.status)throw pt.create("fetch-status-error",{httpStatus:Xn.status});try{kn=yield Xn.json()}catch(Ni){throw pt.create("fetch-parse-error",{originalErrorMessage:Ni?.message})}const gr=kn.ttl.match(/^([\d.]+)(s)$/);if(!gr||!gr[2]||isNaN(Number(gr[1])))throw pt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${kn.ttl}`});const zs=1e3*Number(gr[1]),ys=Date.now();return{token:kn.token,expireTimeMillis:ys+zs,issuedAtTimeMillis:ys}})).apply(this,arguments)}function Lr(Oe,be){const{projectId:ze,appId:lt,apiKey:Rt}=Oe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${ze}/apps/${lt}:exchangeDebugToken?key=${Rt}`,body:{debug_token:be}}}const ur="firebase-app-check-store";let Fr=null;function Jr(){return Fr||(Fr=new Promise((Oe,be)=>{try{const ze=indexedDB.open("firebase-app-check-database",1);ze.onsuccess=lt=>{Oe(lt.target.result)},ze.onerror=lt=>{var Rt;be(pt.create("storage-open",{originalErrorMessage:null===(Rt=lt.target.error)||void 0===Rt?void 0:Rt.message}))},ze.onupgradeneeded=lt=>{0===lt.oldVersion&&lt.target.result.createObjectStore(ur,{keyPath:"compositeKey"})}}catch(ze){be(pt.create("storage-open",{originalErrorMessage:ze?.message}))}}),Fr)}function Ln(){return(Ln=(0,Ve.Z)(function*(Oe,be){const lt=(yield Jr()).transaction(ur,"readwrite"),gn=lt.objectStore(ur).put({compositeKey:Oe,value:be});return new Promise((Xn,kn)=>{gn.onsuccess=gr=>{Xn()},lt.onerror=gr=>{var zs;kn(pt.create("storage-set",{originalErrorMessage:null===(zs=gr.target.error)||void 0===zs?void 0:zs.message}))}})})).apply(this,arguments)}const pn=new Et.Yd("@firebase/app-check");function jt(Oe,be){return(0,ft.hl)()?function ls(Oe,be){return function hr(Oe,be){return Ln.apply(this,arguments)}(function Kn(Oe){return`${Oe.options.appId}-${Oe.name}`}(Oe),be)}(Oe,be).catch(ze=>{pn.warn(`Failed to write token to IndexedDB. Error: ${ze}`)}):Promise.resolve()}function hi(){return je().enabled}function Hn(){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,Ve.Z)(function*(){const Oe=je();if(Oe.enabled&&Oe.token)return Oe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Wr={error:"UNKNOWN_ERROR"};function _r(Oe){return ft.US.encodeString(JSON.stringify(Oe),!1)}function zr(Oe){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,Ve.Z)(function*(Oe,be=!1){const ze=Oe.app;wn(ze);const lt=Pe(ze);let gn,Rt=lt.token;if(Rt&&!Fe(Rt)&&(lt.token=void 0,Rt=void 0),!Rt){const gr=yield lt.cachedTokenPromise;gr&&(Fe(gr)?Rt=gr:yield jt(ze,void 0))}if(!be&&Rt&&Fe(Rt))return{token:Rt.token};let kn,Xn=!1;if(hi()){lt.exchangeTokenPromise||(lt.exchangeTokenPromise=Sr(Lr(ze,yield Hn()),Oe.heartbeatServiceProvider).finally(()=>{lt.exchangeTokenPromise=void 0}),Xn=!0);const gr=yield lt.exchangeTokenPromise;return yield jt(ze,gr),lt.token=gr,{token:gr.token}}try{lt.exchangeTokenPromise||(lt.exchangeTokenPromise=lt.provider.getToken().finally(()=>{lt.exchangeTokenPromise=void 0}),Xn=!0),Rt=yield Pe(ze).exchangeTokenPromise}catch(gr){"appCheck/throttled"===gr.code?pn.warn(gr.message):pn.error(gr),gn=gr}return Rt?gn?kn=Fe(Rt)?{token:Rt.token,internalError:gn}:At(gn):(kn={token:Rt.token},lt.token=Rt,yield jt(ze,Rt)):kn=At(gn),Xn&&Ye(ze,kn),kn})).apply(this,arguments)}function ye(Oe,be){const ze=Pe(Oe),lt=ze.tokenObservers.filter(Rt=>Rt.next!==be);0===lt.length&&ze.tokenRefresher&&ze.tokenRefresher.isRunning()&&ze.tokenRefresher.stop(),ze.tokenObservers=lt}function le(Oe){const{app:be}=Oe,ze=Pe(be);let lt=ze.tokenRefresher;lt||(lt=function Te(Oe){const{app:be}=Oe;return new nr((0,Ve.Z)(function*(){let lt;if(lt=Pe(be).token?yield zr(Oe,!0):yield zr(Oe),lt.error)throw lt.error;if(lt.internalError)throw lt.internalError}),()=>!0,()=>{const ze=Pe(be);if(ze.token){let lt=ze.token.issuedAtTimeMillis+.5*(ze.token.expireTimeMillis-ze.token.issuedAtTimeMillis)+3e5;return lt=Math.min(lt,ze.token.expireTimeMillis-3e5),Math.max(0,lt-Date.now())}return 0},3e4,96e4)}(Oe),ze.tokenRefresher=lt),!lt.isRunning()&&ze.isTokenAutoRefreshEnabled&&lt.start()}function Ye(Oe,be){const ze=Pe(Oe).tokenObservers;for(const lt of ze)try{"EXTERNAL"===lt.type&&null!=be.error?lt.error(be.error):lt.next(be)}catch{}}function Fe(Oe){return Oe.expireTimeMillis-Date.now()>0}function At(Oe){return{token:_r(Wr),error:Oe}}class ln{constructor(be,ze){this.app=be,this.heartbeatServiceProvider=ze}_delete(){const{tokenObservers:be}=Pe(this.app);for(const ze of be)ye(this.app,ze.next);return Promise.resolve()}}const lr="app-check-internal";!function vi(){(0,Ee._registerComponent)(new Ne.wA("app-check",Oe=>function In(Oe,be){return new ln(Oe,be)}(Oe.getProvider("app").getImmediate(),Oe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Oe,be,ze)=>{Oe.getProvider(lr).initialize()})),(0,Ee._registerComponent)(new Ne.wA(lr,Oe=>function ir(Oe){return{getToken:be=>zr(Oe,be),addTokenListener:be=>function ri(Oe,be,ze,lt){const{app:Rt}=Oe,gn=Pe(Rt);if(gn.tokenObservers=[...gn.tokenObservers,{next:ze,error:lt,type:be}],gn.token&&Fe(gn.token)){const kn=gn.token;Promise.resolve().then(()=>{ze({token:kn.token}),le(Oe)}).catch(()=>{})}gn.cachedTokenPromise.then(()=>le(Oe))}(Oe,"INTERNAL",be),removeTokenListener:be=>ye(Oe.app,be)}}(Oe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ee.registerVersion)("@firebase/app-check","0.7.0")}();class ks{constructor(){return(0,w.vb)("app-check")}}typeof window<"u"&&window},3385:(Lt,We,U)=>{U.d(We,{zQ:()=>Pe,ww:()=>ot,rT:()=>Et,f7:()=>He,L6:()=>Ne,_Q:()=>ft,lh:()=>et,Qv:()=>Ee,nw:()=>we});var w=U(4650),W=U(7579),G=U(9646),fe=U(9751),pe=U(8996),_e=U(6451),De=U(5363),ge=U(3900),xe=U(4004),ae=U(4782),ue=U(590),ve=U(576);function ct(je,Mt){return(0,ve.m)(Mt)?(0,ge.w)(()=>je,Mt):(0,ge.w)(()=>je)}var it=U(9468),Xe=U(9300),mt=U(4976),Qe=U(2011),nt=U(6895),Le=U(6217),St=U(9260);const Ee=new w.OlP("angularfire2.auth.use-emulator"),Ne=new w.OlP("angularfire2.auth.settings"),ft=new w.OlP("angularfire2.auth.tenant-id"),Et=new w.OlP("angularfire2.auth.langugage-code"),et=new w.OlP("angularfire2.auth.use-device-language"),He=new w.OlP("angularfire.auth.persistence"),we=(je,Mt,It,yn,On,Rn,Dt,nr)=>(0,Qe.cc)(`${je.name}.auth`,"AngularFireAuth",je.name,()=>{const Mn=Mt.runOutsideAngular(()=>je.auth());if(It&&Mn.useEmulator(...It),yn&&(Mn.tenantId=yn),Mn.languageCode=On,Rn&&Mn.useDeviceLanguage(),Dt)for(const[en,pt]of Object.entries(Dt))Mn.settings[en]=pt;return nr&&Mn.setPersistence(nr),Mn},[It,yn,On,Rn,Dt,nr]);let Pe=(()=>{class je{constructor(It,yn,On,Rn,Dt,nr,Mn,en,pt,jn,wn,ar){const Qn=new W.x,Sr=(0,G.of)(void 0).pipe((0,De.Q)(Dt.outsideAngular),(0,ge.w)(()=>Rn.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,2644)))),(0,xe.U)(()=>(0,Qe.on)(It,Rn,yn)),(0,xe.U)(yr=>we(yr,Rn,nr,en,pt,jn,Mn,wn)),(0,ae.d)({bufferSize:1,refCount:!1}));if((0,nt.PM)(On))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{Sr.pipe((0,ue.P)()).subscribe();const Mi=Sr.pipe((0,ge.w)(Sn=>Sn.getRedirectResult().then($n=>$n,()=>null)),mt.iC,(0,ae.d)({bufferSize:1,refCount:!1})),dr=Sr.pipe((0,ge.w)(Sn=>new fe.y($n=>({unsubscribe:Rn.runOutsideAngular(()=>Sn.onAuthStateChanged(ur=>$n.next(ur),ur=>$n.error(ur),()=>$n.complete()))})))),Lr=Sr.pipe((0,ge.w)(Sn=>new fe.y($n=>({unsubscribe:Rn.runOutsideAngular(()=>Sn.onIdTokenChanged(ur=>$n.next(ur),ur=>$n.error(ur),()=>$n.complete()))}))));this.authState=Mi.pipe(ct(dr),(0,it.R)(Dt.outsideAngular),(0,De.Q)(Dt.insideAngular)),this.user=Mi.pipe(ct(Lr),(0,it.R)(Dt.outsideAngular),(0,De.Q)(Dt.insideAngular)),this.idToken=this.user.pipe((0,ge.w)(Sn=>Sn?(0,pe.D)(Sn.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,ge.w)(Sn=>Sn?(0,pe.D)(Sn.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,_e.T)(Mi,Qn,this.authState.pipe((0,Xe.h)(Sn=>!Sn))).pipe((0,xe.U)(Sn=>Sn?.user?Sn:null),(0,it.R)(Dt.outsideAngular),(0,De.Q)(Dt.insideAngular))}return(0,Qe.pX)(this,Sr,Rn,{spy:{apply:(yr,Mi,dr)=>{(yr.startsWith("signIn")||yr.startsWith("createUser"))&&dr.then(Lr=>Qn.next(Lr))}}})}}return je.\u0275fac=function(It){return new(It||je)(w.LFG(Qe.Dh),w.LFG(Qe.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(mt.HU),w.LFG(Ee,8),w.LFG(Ne,8),w.LFG(ft,8),w.LFG(Et,8),w.LFG(et,8),w.LFG(He,8),w.LFG(Le.nm,8))},je.\u0275prov=w.Yz7({token:je,factory:je.\u0275fac,providedIn:"any"}),je})(),ot=(()=>{class je{constructor(){St.Z.registerVersion("angularfire",mt.q4.full,"auth-compat")}}return je.\u0275fac=function(It){return new(It||je)},je.\u0275mod=w.oAB({type:je}),je.\u0275inj=w.cJS({providers:[Pe]}),je})()},1762:(Lt,We,U)=>{U.d(We,{ST:()=>km,yb:()=>Lm,L6:()=>$_});var w=U(4650),W=U(4986),G=U(9751),fe=U(8996),pe=U(9646),_e=U(4976),De=U(8675),ge=U(4482),xe=U(5403);function ae(){return(0,ge.e)((r,e)=>{let t,s=!1;r.subscribe((0,xe.x)(e,a=>{const l=t;t=a,s&&e.next([l,a]),s=!0}))})}var et,ue=U(4004),ve=U(5026),ct=U(1884),it=U(9300),Xe=U(2011),mt=U(6895),nt=(U(2644),U(3942)),Le=U(5861),St=U(6881),Ve=U(4859),Ee=U(1877),Ne=U(2090),ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Et={},He=He||{},we=ft||self;function Pe(){}function ot(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function je(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var It="closure_uid_"+(1e9*Math.random()>>>0),yn=0;function On(r,e,t){return r.call.apply(r.bind,arguments)}function Rn(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function Dt(r,e,t){return(Dt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?On:Rn).apply(null,arguments)}function nr(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function Mn(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,l){for(var p=Array(arguments.length-2),b=2;b<arguments.length;b++)p[b-2]=arguments[b];return e.prototype[a].apply(s,p)}}function en(){this.s=this.s,this.o=this.o}en.prototype.s=!1,en.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function Mt(r){Object.prototype.hasOwnProperty.call(r,It)&&r[It]||(r[It]=++yn)}(this)},en.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jn=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function wn(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function ar(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(ot(s)){const a=r.length||0,l=s.length||0;r.length=a+l;for(let p=0;p<l;p++)r[a+p]=s[p]}else r.push(s)}}function Qn(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}Qn.prototype.h=function(){this.defaultPrevented=!0};var Sr=function(){if(!we.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{we.addEventListener("test",Pe,e),we.removeEventListener("test",Pe,e)}catch{}return r}();function yr(r){return/^[\s\xa0]*$/.test(r)}var Mi=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function dr(r,e){return r<e?-1:r>e?1:0}function Lr(){var r=we.navigator;return r&&(r=r.userAgent)?r:""}function Sn(r){return-1!=Lr().indexOf(r)}function $n(r){return $n[" "](r),r}function ur(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}$n[" "]=Pe;var hr,r,Ut=Sn("Opera"),Fr=Sn("Trident")||Sn("MSIE"),Jr=Sn("Edge"),Ur=Jr||Fr,ls=Sn("Gecko")&&!(-1!=Lr().toLowerCase().indexOf("webkit")&&!Sn("Edge"))&&!(Sn("Trident")||Sn("MSIE"))&&!Sn("Edge"),xi=-1!=Lr().toLowerCase().indexOf("webkit")&&!Sn("Edge");function ti(){var r=we.document;return r?r.documentMode:void 0}e:{var Ln="",Ht=(r=Lr(),ls?/rv:([^\);]+)(\)|;)/.exec(r):Jr?/Edge\/([\d\.]+)/.exec(r):Fr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):xi?/WebKit\/(\S+)/.exec(r):Ut?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(Ht&&(Ln=Ht?Ht[1]:""),Fr){var nn=ti();if(null!=nn&&nn>parseFloat(Ln)){hr=String(nn);break e}}hr=Ln}var Kn={},jt=we.document&&Fr&&(ti()||parseInt(hr,10))||void 0;function wr(r,e){if(Qn.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(ls){e:{try{$n(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Fn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&wr.$.h.call(this)}}Mn(wr,Qn);var Fn={2:"touch",3:"pen",4:"mouse"};wr.prototype.h=function(){wr.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var hi="closure_listenable_"+(1e6*Math.random()|0),Hn=0;function Ar(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Hn,this.fa=this.ia=!1}function Ir(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Wr(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function _r(r){const e={};for(const t in r)e[t]=r[t];return e}const zr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vr(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let l=0;l<zr.length;l++)t=zr[l],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function rr(r){this.src=r,this.g={},this.h=0}function ni(r,e){var t=e.type;if(t in r.g){var l,s=r.g[t],a=jn(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(Ir(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function ri(r,e,t,s){for(var a=0;a<r.length;++a){var l=r[a];if(!l.fa&&l.listener==e&&l.capture==!!t&&l.la==s)return a}return-1}rr.prototype.add=function(r,e,t,s,a){var l=r.toString();(r=this.g[l])||(r=this.g[l]=[],this.h++);var p=ri(r,e,s,a);return-1<p?(e=r[p],t||(e.ia=!1)):((e=new Ar(e,this.src,l,!!s,a)).ia=t,r.push(e)),e};var ye="closure_lm_"+(1e6*Math.random()|0),le={};function Te(r,e,t,s,a){if(s&&s.once)return At(r,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Te(r,e[l],t,s,a);return null}return t=Ae(t),r&&r[hi]?r.O(e,t,je(s)?!!s.capture:!!s,a):Ye(r,e,t,!1,s,a)}function Ye(r,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=je(a)?!!a.capture:!!a,b=ie(r);if(b||(r[ye]=b=new rr(r)),(t=b.add(e,t,s,p,l)).proxy)return t;if(s=function Fe(){const e=se;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Sr||(a=p),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(ir(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function At(r,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)At(r,e[l],t,s,a);return null}return t=Ae(t),r&&r[hi]?r.P(e,t,je(s)?!!s.capture:!!s,a):Ye(r,e,t,!0,s,a)}function ln(r,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)ln(r,e[l],t,s,a);else s=je(s)?!!s.capture:!!s,t=Ae(t),r&&r[hi]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=ri(l=r.g[e],t,s,a))&&(Ir(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete r.g[e],r.h--))):r&&(r=ie(r))&&(e=r.g[e.toString()],r=-1,e&&(r=ri(e,t,s,a)),(t=-1<r?e[r]:null)&&In(t))}function In(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[hi])ni(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(ir(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=ie(e))?(ni(t,r),0==t.h&&(t.src=null,e[ye]=null)):Ir(r)}}}function ir(r){return r in le?le[r]:le[r]="on"+r}function se(r,e){if(r.fa)r=!0;else{e=new wr(e,this);var t=r.listener,s=r.la||r.src;r.ia&&In(r),r=t.call(s,e)}return r}function ie(r){return(r=r[ye])instanceof rr?r:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ae(r){return"function"==typeof r?r:(r[ee]||(r[ee]=function(e){return r.handleEvent(e)}),r[ee])}function st(){en.call(this),this.i=new rr(this),this.S=this,this.J=null}function Pt(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new Qn(e,r);else if(e instanceof Qn)e.target=e.target||r;else{var a=e;Vr(e=new Qn(s,r),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=on(p,s,!0,e)&&a}if(a=on(p=e.g=r,s,!0,e)&&a,a=on(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=on(p=e.g=t[l],s,!1,e)&&a}function on(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.fa&&p.capture==t){var b=p.listener,k=p.la||p.src;p.ia&&ni(r.i,p),a=!1!==b.call(k,s)&&a}}return a&&!s.defaultPrevented}Mn(st,en),st.prototype[hi]=!0,st.prototype.removeEventListener=function(r,e,t,s){ln(this,r,e,t,s)},st.prototype.N=function(){if(st.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)Ir(t[s]);delete r.g[e],r.h--}}this.J=null},st.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},st.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Ue=we.JSON.stringify;function ke(){var r=bi;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var br,vt=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new Zt,r=>r.reset());class Zt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Dn(r){we.setTimeout(()=>{throw r},0)}function Yn(r,e){br||function Pn(){var r=we.Promise.resolve(void 0);br=function(){r.then(qi)}}(),_i||(br(),_i=!0),bi.add(r,e)}var _i=!1,bi=new class yt{constructor(){this.h=this.g=null}add(e,t){const s=vt.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function qi(){for(var r;r=ke();){try{r.h.call(r.g)}catch(t){Dn(t)}var e=vt;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}_i=!1}function Ps(r,e){st.call(this),this.h=r||1,this.g=e||we,this.j=Dt(this.qb,this),this.l=Date.now()}function Ns(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function zn(r,e,t){if("function"==typeof r)t&&(r=Dt(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Dt(r.handleEvent,r)}return 2147483647<Number(e)?-1:we.setTimeout(r,e||0)}function fi(r){r.g=zn(()=>{r.g=null,r.i&&(r.i=!1,fi(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Mn(Ps,st),(et=Ps.prototype).ga=!1,et.T=null,et.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pt(this,"tick"),this.ga&&(Ns(this),this.start()))}},et.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.N=function(){Ps.$.N.call(this),Ns(this),delete this.g};class Os extends en{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fi(this)}N(){super.N(),this.g&&(we.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cs(r){en.call(this),this.h=r,this.g={}}Mn(cs,en);var oo=[];function lr(r,e,t,s){Array.isArray(t)||(t&&(oo[0]=t.toString()),t=oo);for(var a=0;a<t.length;a++){var l=Te(e,t[a],s||r.handleEvent,!1,r.h||r);if(!l)break;r.g[l.key]=l}}function vi(r){Wr(r.g,function(e,t){this.g.hasOwnProperty(t)&&In(e)},r),r.g={}}function Ji(){this.g=!0}function Kr(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function js(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return Ue(t)}catch{return e}}(r,t)+(s?" "+s:"")})}cs.prototype.N=function(){cs.$.N.call(this),vi(this)},cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ji.prototype.Ea=function(){this.g=!1},Ji.prototype.info=function(){};var Ci={},es=null;function Rr(){return es=es||new st}function ms(r){Qn.call(this,Ci.Ta,r)}function ao(r){const e=Rr();Pt(e,new ms(e))}function ko(r,e){Qn.call(this,Ci.STAT_EVENT,r),this.stat=e}function Pi(r){const e=Rr();Pt(e,new ko(e,r))}function Zo(r,e){Qn.call(this,Ci.Ua,r),this.size=e}function sr(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return we.setTimeout(function(){r()},e)}Ci.Ta="serverreachability",Mn(ms,Qn),Ci.STAT_EVENT="statevent",Mn(ko,Qn),Ci.Ua="timingevent",Mn(Zo,Qn);var Hs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Lo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ls(){}function be(){}Ls.prototype.h=null;var gn,ze={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function lt(){Qn.call(this,"d")}function Rt(){Qn.call(this,"c")}function Xn(){}function kn(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new cs(this),this.P=zs,this.V=new Ps(r=Ur?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new gr}function gr(){this.i=null,this.g="",this.h=!1}Mn(lt,Qn),Mn(Rt,Qn),Mn(Xn,Ls),Xn.prototype.g=function(){return new XMLHttpRequest},Xn.prototype.i=function(){return{}},gn=new Xn;var zs=45e3,ys={},Ni={};function Qs(r,e,t){r.L=1,r.v=Si(Is(e)),r.s=t,r.S=!0,ds(r,null)}function ds(r,e){r.G=Date.now(),Es(r),r.A=Is(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Ys(t.i,"t",s),r.C=0,t=r.l.I,r.h=new gr,r.g=bn(r.l,t?e:null,!r.s),0<r.O&&(r.M=new Os(Dt(r.Pa,r,r.g),r.O)),lr(r.U,r.g,"readystatechange",r.nb),e=r.I?_r(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),ao(),function Un(r,e,t,s,a,l){r.info(function(){if(r.g)if(l)for(var p="",b=l.split("&"),k=0;k<b.length;k++){var $=b[k].split("=");if(1<$.length){var Y=$[0];$=$[1];var me=Y.split("_");p=2<=me.length&&"type"==me[1]?p+(Y+"=")+$+"&":p+(Y+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(r.j,r.u,r.A,r.m,r.W,r.s)}function _s(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function Fo(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=vs(r,t),a==Ni){4==e&&(r.o=4,Pi(14),s=!1),Kr(r.j,r.m,null,"[Incomplete Response]");break}if(a==ys){r.o=4,Pi(15),Kr(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}Kr(r.j,r.m,a,null),Uo(r,a)}_s(r)&&a!=Ni&&a!=ys&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,Pi(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),X(e),e.L=!0,Pi(11))):(Kr(r.j,r.m,t,"[Invalid Chunked Response]"),co(r),ws(r))}function vs(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?Ni:(t=Number(e.substring(t,s)),isNaN(t)?ys:(s+=1)+t>e.length?Ni:(e=e.substr(s,t),r.C=s+t,e))}function Es(r){r.Y=Date.now()+r.P,uo(r,r.P)}function uo(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=sr(Dt(r.lb,r),e)}function lo(r){r.B&&(we.clearTimeout(r.B),r.B=null)}function ws(r){0==r.l.H||r.J||Be(r.l,r)}function co(r){lo(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,Ns(r.V),vi(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function Uo(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||_t(t.h,r)))if(!r.K&&_t(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;ce(t),R(t)}z(t),Pi(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.M&&0==t.A&&!t.v&&(t.v=sr(Dt(t.ib,t),6e3));if(1>=Ks(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else bt(t,11)}else if((r.K||t.g==r)&&ce(t),!yr(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let $=a[e];if(t.V=$[0],$=$[1],2==t.H)if("c"==$[0]){t.J=$[1],t.oa=$[2];const Y=$[3];null!=Y&&(t.qa=Y,t.j.info("VER="+t.qa));const me=$[4];null!=me&&(t.Ga=me,t.j.info("SVER="+t.Ga));const Ze=$[5];null!=Ze&&"number"==typeof Ze&&0<Ze&&(t.K=s=1.5*Ze,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const ht=r.g;if(ht){const kt=ht.g?ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kt){var l=s.h;l.g||-1==kt.indexOf("spdy")&&-1==kt.indexOf("quic")&&-1==kt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(Cn(l,l.h),l.h=null))}if(s.F){const Qt=ht.g?ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Qt&&(s.Da=Qt,jr(s.G,s.F,Qt))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var p=r;if((s=t).wa=Tn(s,s.I?s.oa:null,s.Y),p.K){Yo(s.h,p);var b=p,k=s.K;k&&b.setTimeout(k),b.B&&(lo(b),Es(b)),s.g=p}else x(s);0<t.i.length&&N(t)}else"stop"!=$[0]&&"close"!=$[0]||bt(t,7);else 3==t.H&&("stop"==$[0]||"close"==$[0]?"stop"==$[0]?bt(t,7):Qi(t):"noop"!=$[0]&&t.l&&t.l.Aa($),t.A=0)}ao()}catch{}}function Ei(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(ot(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function ga(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(ot(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function Bo(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(ot(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],r)}(et=kn.prototype).setTimeout=function(r){this.P=r},et.nb=function(r){r=r.target;const e=this.M;e&&3==xr(r)?e.l():this.Pa(r)},et.Pa=function(r){try{if(r==this.g)e:{const Y=xr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Y)&&(3!=Y||Ur||this.g&&(this.h.h||this.g.ja()||Qr(this.g)))){this.J||4!=Y||7==e||ao(),lo(this);var t=this.g.da();this.aa=t;t:if(_s(this)){var s=Qr(this.g);r="";var a=s.length,l=4==xr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){co(this),ws(this);var p="";break t}this.h.i=new we.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,p=this.h.g}else p=this.g.ja();if(this.i=200==t,function ks(r,e,t,s,a,l,p){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.W,Y,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var b,k=this.g;if((b=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yr(b)){var $=b;break t}}$=null}if(!(t=$)){this.i=!1,this.o=3,Pi(12),co(this),ws(this);break e}Kr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uo(this,t)}this.S?(Fo(this,Y,p),Ur&&this.i&&3==Y&&(lr(this.U,this.V,"tick",this.mb),this.V.start())):(Kr(this.j,this.m,p,null),Uo(this,p)),4==Y&&co(this),this.i&&!this.J&&(4==Y?Be(this.l,this):(this.i=!1,Es(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Pi(12)):(this.o=0,Pi(13)),co(this),ws(this)}}}catch{}},et.mb=function(){if(this.g){var r=xr(this.g),e=this.g.ja();this.C<e.length&&(lo(this),Fo(this,r,e),this.i&&4!=r&&Es(this))}},et.cancel=function(){this.J=!0,co(this)},et.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function ii(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ao(),Pi(17)),co(this),this.o=2,ws(this)):uo(this,this.Y-r)};var wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ss(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ss){this.h=void 0!==e?e:r.h,ma(this,r.j),this.s=r.s,this.g=r.g,$r(this,r.m),this.l=r.l,e=r.i;var t=new Ii;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ai(this,t),this.o=r.o}else r&&(t=String(r).match(wi))?(this.h=!!e,ma(this,t[1]||"",!0),this.s=Ui(t[2]||""),this.g=Ui(t[3]||"",!0),$r(this,t[4]),this.l=Ui(t[5]||"",!0),ai(this,t[6]||"",!0),this.o=Ui(t[7]||"")):(this.h=!!e,this.i=new Ii(null,this.h))}function Is(r){return new Ss(r)}function ma(r,e,t){r.j=t?Ui(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function $r(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function ai(r,e,t){e instanceof Ii?(r.i=e,function Do(r,e){e&&!r.j&&(Oi(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(ki(this,s),Ys(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=Vo(e,Zi)),r.i=new Ii(e,r.h))}function jr(r,e,t){r.i.set(e,t)}function Si(r){return jr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Ui(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Vo(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Io),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Io(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Ss.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Vo(e,Gs,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Vo(e,Gs,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(Vo(t,"/"==t.charAt(0)?Sa:Jn,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Vo(t,pi)),r.join("")};var Gs=/[#\/\?@]/g,Jn=/[#\?:]/g,Sa=/[#\?]/g,Zi=/[#\?@]/g,pi=/#/g;function Ii(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Oi(r){r.g||(r.g=new Map,r.h=0,r.i&&function Qo(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var l=r[t].substring(0,s);a=r[t].substring(s+1)}else l=r[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ki(r,e){Oi(r),e=Ws(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function dn(r,e){return Oi(r),e=Ws(r,e),r.g.has(e)}function Ys(r,e,t){ki(r,e),0<t.length&&(r.i=null,r.g.set(Ws(r,e),wn(t)),r.h+=t.length)}function Ws(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Xs(r){this.l=r||Fs,r=we.PerformanceNavigationTiming?0<(r=we.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(we.g&&we.g.Ka&&we.g.Ka()&&we.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=Ii.prototype).add=function(r,e){Oi(this),this.i=null,r=Ws(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},et.forEach=function(r,e){Oi(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},et.sa=function(){Oi(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let l=0;l<a.length;l++)t.push(e[s])}return t},et.Z=function(r){Oi(this);let e=[];if("string"==typeof r)dn(this,r)&&(e=e.concat(this.g.get(Ws(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},et.set=function(r,e){return Oi(this),this.i=null,dn(this,r=Ws(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},et.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const l=encodeURIComponent(String(s)),p=this.Z(s);for(s=0;s<p.length;s++){var a=l;""!==p[s]&&(a+="="+encodeURIComponent(String(p[s]))),r.push(a)}}return this.i=r.join("&")};var Fs=10;function $i(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Ks(r){return r.h?1:r.g?r.g.size:0}function _t(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Cn(r,e){r.g?r.g.add(e):r.h=e}function Yo(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function $o(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return wn(r.i)}function qr(){}function Xo(){this.g=new qr}function To(r,e,t){const s=t||"";try{Ei(r,function(a,l){let p=a;je(a)&&(p=Ue(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function B(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function L(r){this.l=r.fc||null,this.j=r.ob||!1}function J(r,e){st.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=he,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xs.prototype.cancel=function(){if(this.i=$o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},qr.prototype.stringify=function(r){return we.JSON.stringify(r,void 0)},qr.prototype.parse=function(r){return we.JSON.parse(r,void 0)},Mn(L,Ls),L.prototype.g=function(){return new J(this.l,this.j)},L.prototype.i=function(r){return function(){return r}}({}),Mn(J,st);var he=0;function Re(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function rt(r){r.readyState=4,r.l=null,r.j=null,r.A=null,dt(r)}function dt(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(et=J.prototype).open=function(r,e){if(this.readyState!=he)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,dt(this)},et.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||we).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rt(this)),this.readyState=he},et.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,dt(this)),this.g&&(this.readyState=3,dt(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof we.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Re(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},et.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?rt(this):dt(this),3==this.readyState&&Re(this)}},et.Za=function(r){this.g&&(this.response=this.responseText=r,rt(this))},et.Ya=function(r){this.g&&(this.response=r,rt(this))},et.ka=function(){this.g&&rt(this)},et.setRequestHeader=function(r,e){this.v.append(r,e)},et.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(J.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var zt=we.JSON.parse;function Ct(r){st.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vn,this.L=this.M=!1}Mn(Ct,st);var vn="",xn=/^https?$/i,ui=["POST","PUT"];function Zr(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Hr(r),Mr(r)}function Hr(r){r.F||(r.F=!0,Pt(r,"complete"),Pt(r,"error"))}function ts(r){if(r.h&&typeof He<"u"&&(!r.C[1]||4!=xr(r)||2!=r.da()))if(r.v&&4==xr(r))zn(r.La,0,r);else if(Pt(r,"readystatechange"),4==xr(r)){r.h=!1;try{const b=r.da();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===b){var a=String(r.I).match(wi)[1]||null;if(!a&&we.self&&we.self.location){var l=we.self.location.protocol;a=l.substr(0,l.length-1)}s=!xn.test(a?a.toLowerCase():"")}t=s}if(t)Pt(r,"complete"),Pt(r,"success");else{r.m=6;try{var p=2<xr(r)?r.g.statusText:""}catch{p=""}r.j=p+" ["+r.da()+"]",Hr(r)}}finally{Mr(r)}}}function Mr(r,e){if(r.g){Us(r);const t=r.g,s=r.C[0]?Pe:null;r.g=null,r.C=null,e||Pt(r,"ready");try{t.onreadystatechange=s}catch{}}}function Us(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(we.clearTimeout(r.A),r.A=null)}function xr(r){return r.g?r.g.readyState:0}function Qr(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case vn:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function li(r){let e="";return Wr(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Bs(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=li(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):jr(r,e,t))}function ns(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function bo(r){this.Ga=0,this.i=[],this.j=new Ji,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ns("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ns("baseRetryDelayMs",5e3,r),this.hb=ns("retryDelaySeedMs",1e4,r),this.eb=ns("forwardChannelMaxRetries",2,r),this.xa=ns("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new Xs(r&&r.concurrentRequestLimit),this.Ja=new Xo,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Qi(r){if(H(r),3==r.H){var e=r.W++,t=Is(r.G);jr(t,"SID",r.J),jr(t,"RID",e),jr(t,"TYPE","terminate"),g(r,t),(e=new kn(r,r.j,e,void 0)).L=2,e.v=Si(Is(t)),t=!1,we.navigator&&we.navigator.sendBeacon&&(t=we.navigator.sendBeacon(e.v.toString(),"")),!t&&we.Image&&((new Image).src=e.v,t=!0),t||(e.g=bn(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Es(e)}Gt(r)}function R(r){r.g&&(X(r),r.g.cancel(),r.g=null)}function H(r){R(r),r.u&&(we.clearTimeout(r.u),r.u=null),ce(r),r.h.cancel(),r.m&&("number"==typeof r.m&&we.clearTimeout(r.m),r.m=null)}function N(r){$i(r.h)||r.m||(r.m=!0,Yn(r.Na,r),r.C=0)}function S(r,e){var t;t=e?e.m:r.W++;const s=Is(r.G);jr(s,"SID",r.J),jr(s,"RID",t),jr(s,"AID",r.V),g(r,s),r.o&&r.s&&Bs(s,r.o,r.s),t=new kn(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=y(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Cn(r.h,t),Qs(t,s,e)}function g(r,e){r.ma&&Wr(r.ma,function(t,s){jr(e,s,t)}),r.l&&Ei({},function(t,s){jr(e,s,t)})}function y(r,e,t){t=Math.min(r.i.length,t);var s=r.l?Dt(r.l.Va,r.l,r):null;e:{var a=r.i;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let b=!0;for(let k=0;k<t;k++){let $=a[k].h;const Y=a[k].g;if($-=l,0>$)l=Math.max(0,a[k].h-100),b=!1;else try{To(Y,p,"req"+$+"_")}catch{s&&s(Y)}}if(b){s=p.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function x(r){r.g||r.u||(r.ba=1,Yn(r.Ma,r),r.A=0)}function z(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=sr(Dt(r.Ma,r),tt(r,r.A)),r.A++,0))}function X(r){null!=r.B&&(we.clearTimeout(r.B),r.B=null)}function de(r){r.g=new kn(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=Is(r.wa);jr(e,"RID","rpc"),jr(e,"SID",r.J),jr(e,"CI",r.M?"0":"1"),jr(e,"AID",r.V),jr(e,"TYPE","xmlhttp"),g(r,e),r.o&&r.s&&Bs(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=Si(Is(e)),t.s=null,t.S=!0,ds(t,r)}function ce(r){null!=r.v&&(we.clearTimeout(r.v),r.v=null)}function Be(r,e){var t=null;if(r.g==e){ce(r),X(r),r.g=null;var s=2}else{if(!_t(r.h,e))return;t=e.F,Yo(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;Pt(s=Rr(),new Zo(s,t)),N(r)}else x(r);else if(3==(a=e.o)||0==a&&0<r.ta||!(1==s&&function K(r,e){return!(Ks(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=sr(Dt(r.Na,r,e),tt(r,r.C)),r.C++,0)))}(r,e)||2==s&&z(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),a){case 1:bt(r,5);break;case 4:bt(r,10);break;case 3:bt(r,6);break;default:bt(r,2)}}function tt(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function bt(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=Dt(r.pb,r);t||(t=new Ss("//www.google.com/images/cleardot.gif"),we.location&&"http"==we.location.protocol||ma(t,"https"),Si(t)),function hs(r,e){const t=new Ji;if(we.Image){const s=new Image;s.onload=nr(B,t,s,"TestLoadImage: loaded",!0,e),s.onerror=nr(B,t,s,"TestLoadImage: error",!1,e),s.onabort=nr(B,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=nr(B,t,s,"TestLoadImage: timeout",!1,e),we.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else Pi(2);r.H=0,r.l&&r.l.za(e),Gt(r),H(r)}function Gt(r){if(r.H=0,r.pa=[],r.l){const e=$o(r.h);(0!=e.length||0!=r.i.length)&&(ar(r.pa,e),ar(r.pa,r.i),r.h.i.length=0,wn(r.i),r.i.length=0),r.l.ya()}}function Tn(r,e,t){var s=t instanceof Ss?Is(t):new Ss(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),$r(s,s.m);else{var a=we.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new Ss(null,void 0);s&&ma(l,s),e&&(l.g=e),a&&$r(l,a),t&&(l.l=t),s=l}return e=r.Da,(t=r.F)&&e&&jr(s,t,e),jr(s,"VER",r.qa),g(r,s),s}function bn(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ct(t&&r.Ha&&!r.va?new L({ob:!0}):r.va)).Oa(r.I),e}function _n(){}function hn(){if(Fr&&!(10<=Number(jt)))throw Error("Environmental error: no available transport.")}function An(r,e){st.call(this),this.g=new bo(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!yr(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yr(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Pr(this)}function vr(r){lt.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function ji(){Rt.call(this),this.status=1}function Pr(r){this.g=r}function Hi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ho(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var l=r.g[3],p=(e=r.g[0])+(l^(t=r.g[1])&((a=r.g[2])^l))+s[0]+3614090360&4294967295;p=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=t+(p<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^t&(a^l))+s[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^t&(a^l))+s[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^t&(a^l))+s[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=l+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^l&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(l^e))+s[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(a^l&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^l&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^l&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^l&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=l+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(l^e))+s[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=t+(l^e&(a^l))+s[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(t^a^l)+s[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^l)+s[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^l)+s[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^l)+s[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=a+(l^e^t)+s[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^l^e)+s[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(a^(t|~l))+s[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(l|~t))+s[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=t+(l^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~l))+s[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(l|~t))+s[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=t+(l^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~l))+s[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(l|~t))+s[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=t+(l^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((l=(e=t+((p=e+(a^(t|~l))+s[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=l+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((a=l+((p=a+(e^(l|~t))+s[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(p<<21&4294967295|p>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+l&4294967295}function qn(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var l=0|r[a];s&&l==e||(t[a]=l,s=!1)}this.g=t}(et=Ct.prototype).Oa=function(r){this.M=r},et.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gn.g(),this.C=function Oe(r){return r.h||(r.h=r.i())}(this.u?this.u:gn),this.g.onreadystatechange=Dt(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(l){return void Zr(this,l)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())t.set(l,s.get(l))}s=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=we.FormData&&r instanceof we.FormData,!(0<=jn(ui,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,p]of t)this.g.setRequestHeader(l,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Us(this),0<this.B&&((this.L=function Dr(r){return Fr&&function pn(){return ur(Kn,9,function(){let r=0;const e=Mi(String(hr)).split("."),t=Mi("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==r&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;r=dr(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||dr(0==a[2].length,0==l[2].length)||dr(a[2],l[2]),a=a[3],l=l[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dt(this.ua,this)):this.A=zn(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(l){Zr(this,l)}},et.ua=function(){typeof He<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pt(this,"timeout"),this.abort(8))},et.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,Pt(this,"complete"),Pt(this,"abort"),Mr(this))},et.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mr(this,!0)),Ct.$.N.call(this)},et.La=function(){this.s||(this.G||this.v||this.l?ts(this):this.kb())},et.kb=function(){ts(this)},et.da=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},et.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},et.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),zt(e)}},et.Ia=function(){return this.m},et.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=bo.prototype).qa=8,et.H=1,et.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new kn(this,this.j,r,void 0);let l=this.s;if(this.U&&(l?(l=_r(l),Vr(l,this.U)):l=this.U),null!==this.o||this.O||(a.I=l,l=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=y(this,a,e),jr(t=Is(this.G),"RID",r),jr(t,"CVER",22),this.F&&jr(t,"X-HTTP-Session-Id",this.F),g(this,t),l&&(this.O?e="headers="+encodeURIComponent(String(li(l)))+"&"+e:this.o&&Bs(t,this.o,l)),Cn(this.h,a),this.bb&&jr(t,"TYPE","init"),this.P?(jr(t,"$req",e),jr(t,"SID","null"),a.ba=!0,Qs(a,t,null)):Qs(a,t,e),this.H=2}}else 3==this.H&&(r?S(this,r):0==this.i.length||$i(this.h)||S(this))},et.Ma=function(){if(this.u=null,de(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=sr(Dt(this.jb,this),r)}},et.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Pi(10),R(this),de(this))},et.ib=function(){null!=this.v&&(this.v=null,R(this),z(this),Pi(19))},et.pb=function(r){r?(this.j.info("Successfully pinged google.com"),Pi(2)):(this.j.info("Failed to ping google.com"),Pi(1))},(et=_n.prototype).Ba=function(){},et.Aa=function(){},et.za=function(){},et.ya=function(){},et.Va=function(){},hn.prototype.g=function(r,e){return new An(r,e)},Mn(An,st),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;Pi(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=Tn(r,null,r.Y),N(r)},An.prototype.close=function(){Qi(this.g)},An.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Ue(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&N(e)},An.prototype.N=function(){this.g.l=null,delete this.j,Qi(this.g),delete this.g,An.$.N.call(this)},Mn(vr,lt),Mn(ji,Rt),Mn(Pr,_n),Pr.prototype.Ba=function(){Pt(this.g,"a")},Pr.prototype.Aa=function(r){Pt(this.g,new vr(r))},Pr.prototype.za=function(r){Pt(this.g,new ji)},Pr.prototype.ya=function(){Pt(this.g,"b")},Mn(Hi,function Li(){this.blockSize=-1}),Hi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Hi.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,l=0;l<e;){if(0==a)for(;l<=t;)ho(this,r,l),l+=this.blockSize;if("string"==typeof r){for(;l<e;)if(s[a++]=r.charCodeAt(l++),a==this.blockSize){ho(this,s),a=0;break}}else for(;l<e;)if(s[a++]=r[l++],a==this.blockSize){ho(this,s),a=0;break}}this.h=a,this.i+=e},Hi.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var fo={};function jo(r){return-128<=r&&128>r?ur(fo,r,function(e){return new qn([0|e],0>e?-1:0)}):new qn([0|r],0>r?-1:0)}function zi(r){if(isNaN(r)||!isFinite(r))return Js;if(0>r)return rn(zi(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=po;return new qn(e,0)}var po=4294967296,Js=jo(0),eo=jo(1),Jo=jo(16777216);function Yt(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Xt(r){return-1==r.h}function rn(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new qn(t,~r.h).add(eo)}function Nn(r,e){return r.add(rn(e))}function Gr(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function Yi(r,e){this.g=r,this.h=e}function Bi(r,e){if(Yt(e))throw Error("division by zero");if(Yt(r))return new Yi(Js,Js);if(Xt(r))return e=Bi(rn(r),e),new Yi(rn(e.g),rn(e.h));if(Xt(e))return e=Bi(r,rn(e)),new Yi(rn(e.g),e.h);if(30<r.g.length){if(Xt(r)||Xt(e))throw Error("slowDivide_ only works with positive integers.");for(var t=eo,s=e;0>=s.X(r);)t=to(t),s=to(s);var a=or(t,1),l=or(s,1);for(s=or(s,2),t=or(t,2);!Yt(s);){var p=l.add(s);0>=p.X(r)&&(a=a.add(t),l=p),s=or(s,1),t=or(t,1)}return e=Nn(r,a.R(e)),new Yi(a,e)}for(a=Js;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),p=(l=zi(t)).R(e);Xt(p)||0<p.X(r);)p=(l=zi(t-=s)).R(e);Yt(l)&&(l=eo),a=a.add(l),r=Nn(r,p)}return new Yi(a,r)}function to(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new qn(t,r.h)}function or(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],l=0;l<s;l++)a[l]=0<e?r.D(l+t)>>>e|r.D(l+t+1)<<32-e:r.D(l+t);return new qn(a,r.h)}(et=qn.prototype).ea=function(){if(Xt(this))return-rn(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:po+s)*e,e*=po}return r},et.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Yt(this))return"0";if(Xt(this))return"-"+rn(this).toString(r);for(var e=zi(Math.pow(r,6)),t=this,s="";;){var a=Bi(t,e).g,l=((0<(t=Nn(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Yt(t=a))return l+s;for(;6>l.length;)l="0"+l;s=l+s}},et.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},et.X=function(r){return Xt(r=Nn(this,r))?-1:Yt(r)?0:1},et.abs=function(){return Xt(this)?rn(this):this},et.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var l=s+(65535&this.D(a))+(65535&r.D(a)),p=(l>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=p>>>16,t[a]=(p&=65535)<<16|(l&=65535)}return new qn(t,-2147483648&t[t.length-1]?-1:0)},et.R=function(r){if(Yt(this)||Yt(r))return Js;if(Xt(this))return Xt(r)?rn(this).R(rn(r)):rn(rn(this).R(r));if(Xt(r))return rn(this.R(rn(r)));if(0>this.X(Jo)&&0>r.X(Jo))return zi(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var l=this.D(s)>>>16,p=65535&this.D(s),b=r.D(a)>>>16,k=65535&r.D(a);t[2*s+2*a]+=p*k,Gr(t,2*s+2*a),t[2*s+2*a+1]+=l*k,Gr(t,2*s+2*a+1),t[2*s+2*a+1]+=p*b,Gr(t,2*s+2*a+1),t[2*s+2*a+2]+=l*b,Gr(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new qn(t,0)},et.gb=function(r){return Bi(this,r).h},et.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new qn(t,this.h&r.h)},et.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new qn(t,this.h|r.h)},et.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new qn(t,this.h^r.h)},hn.prototype.createWebChannel=hn.prototype.g,An.prototype.send=An.prototype.u,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,Lo.COMPLETE="complete",be.EventType=ze,ze.OPEN="a",ze.CLOSE="b",ze.ERROR="c",ze.MESSAGE="d",st.prototype.listen=st.prototype.O,Ct.prototype.listenOnce=Ct.prototype.P,Ct.prototype.getLastError=Ct.prototype.Sa,Ct.prototype.getLastErrorCode=Ct.prototype.Ia,Ct.prototype.getStatus=Ct.prototype.da,Ct.prototype.getResponseJson=Ct.prototype.Wa,Ct.prototype.getResponseText=Ct.prototype.ja,Ct.prototype.send=Ct.prototype.ha,Ct.prototype.setWithCredentials=Ct.prototype.Oa,Hi.prototype.digest=Hi.prototype.l,Hi.prototype.reset=Hi.prototype.reset,Hi.prototype.update=Hi.prototype.j,qn.prototype.add=qn.prototype.add,qn.prototype.multiply=qn.prototype.R,qn.prototype.modulo=qn.prototype.gb,qn.prototype.compare=qn.prototype.X,qn.prototype.toNumber=qn.prototype.ea,qn.prototype.toString=qn.prototype.toString,qn.prototype.getBits=qn.prototype.D,qn.fromNumber=zi,qn.fromString=function ya(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return rn(ya(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=zi(Math.pow(e,8)),s=Js,a=0;a<r.length;a+=8){var l=Math.min(8,r.length-a),p=parseInt(r.substring(a,a+l),e);8>l?(l=zi(Math.pow(e,l)),s=s.R(l).add(zi(p))):s=(s=s.R(t)).add(zi(p))}return s};var Aa=Et.createWebChannelTransport=function(){return new hn},Ra=Et.getStatEventTarget=function(){return Rr()},Gi=Et.ErrorCode=Hs,Ds=Et.EventType=Lo,rs=Et.Event=Ci,Ho=Et.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},_a=Et.FetchXmlHttpFactory=L,Va=Et.WebChannel=be,ll=Et.XhrIo=Ct,Eu=Et.Md5=Hi,Di=Et.Integer=qn;const Xl="@firebase/firestore";class gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");let Co="9.22.0";const As=new Ee.Yd("@firebase/firestore");function ju(){return As.logLevel}function Tt(r,...e){if(As.logLevel<=Ee.in.DEBUG){const t=e.map(eu);As.debug(`Firestore (${Co}): ${r}`,...t)}}function fs(r,...e){if(As.logLevel<=Ee.in.ERROR){const t=e.map(eu);As.error(`Firestore (${Co}): ${r}`,...t)}}function Nr(r,...e){if(As.logLevel<=Ee.in.WARN){const t=e.map(eu);As.warn(`Firestore (${Co}): ${r}`,...t)}}function eu(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Jt(r="Unexpected state"){const e=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+r;throw fs(e),new Error(e)}function mn(r,e){r||Jt()}function $t(r,e){return r}const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gt extends Ne.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $a{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class la{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class Ea{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ja{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=$=>this.i!==a?(a=this.i,t($)):Promise.resolve();let p=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Tr,e.enqueueRetryable(()=>l(this.currentUser))};const b=()=>{const $=p;e.enqueueRetryable((0,Le.Z)(function*(){yield $.promise,yield l(s.currentUser)}))},k=$=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=$,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit($=>k($)),setTimeout(()=>{if(!this.auth){const $=this.t.getImmediate({optional:!0});$?k($):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Tr)}},0),b()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(mn("string"==typeof s.accessToken),new $a(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mn(null===e||"string"==typeof e),new gi(e)}}class mi{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=gi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class cl{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new mi(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Iu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=l=>{null!=l.error&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.T;return this.T=l.token,Tt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?a(l):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mn("string"==typeof t.token),this.T=t.token,new tu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jl(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class nu{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Jl(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Zn(r,e){return r<e?-1:r>e?1:0}function zo(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function Kc(r){return r+"\0"}class ci{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new gt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ci.fromMillis(Date.now())}static fromDate(e){return ci.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new ci(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zn(this.nanoseconds,e.nanoseconds):Zn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Kt(e)}static min(){return new Kt(new ci(0,0))}static max(){return new Kt(new ci(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ma{constructor(e,t,s){void 0===t?t=0:t>e.length&&Jt(),void 0===s?s=e.length-t:s>e.length-t&&Jt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Ma.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ma?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mr extends Ma{construct(e,t,s){return new mr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new gt(Ke.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new mr(t)}static emptyPath(){return new mr([])}}const hl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wi extends Ma{construct(e,t,s){return new Wi(e,t,s)}static isValidIdentifier(e){return hl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wi(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new gt(Ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const b=e[a];if("\\"===b){if(a+1===e.length)throw new gt(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const k=e[a+1];if("\\"!==k&&"."!==k&&"`"!==k)throw new gt(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=k,a+=2}else"`"===b?(p=!p,a++):"."!==b||p?(s+=b,a++):(l(),a++)}if(l(),p)throw new gt(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wi(t)}static emptyPath(){return new Wi([])}}class Nt{constructor(e){this.path=e}static fromPath(e){return new Nt(mr.fromString(e))}static fromName(e){return new Nt(mr.fromString(e).popFirst(5))}static empty(){return new Nt(mr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nt(new mr(e.slice()))}}class no{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Ha(r){return r.fields.find(e=>2===e.kind)}function ca(r){return r.fields.filter(e=>2!==e.kind)}no.UNKNOWN_ID=-1;class T{constructor(e,t){this.fieldPath=e,this.kind=t}}class A{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new A(0,te.min())}}function O(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Kt.fromTimestamp(1e9===s?new ci(t+1,0):new ci(t,s));return new te(a,Nt.empty(),e)}function Z(r){return new te(r.readTime,r.key,-1)}class te{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new te(Kt.min(),Nt.empty(),-1)}static max(){return new te(Kt.max(),Nt.empty(),-1)}}function oe(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Nt.comparator(r.documentKey,e.documentKey),0!==t?t:Zn(r.largestBatchId,e.largestBatchId))}const qe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ot{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function tn(r){return Wt.apply(this,arguments)}function Wt(){return Wt=(0,Le.Z)(function*(r){if(r.code!==Ke.FAILED_PRECONDITION||r.message!==qe)throw r;Tt("LocalStore","Unexpectedly lost primary lease")}),Wt.apply(this,arguments)}class Me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Me((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Me?t:Me.resolve(t)}catch(t){return Me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Me.reject(t)}static resolve(e){return new Me((t,s)=>{t(e)})}static reject(e){return new Me((t,s)=>{s(e)})}static waitFor(e){return new Me((t,s)=>{let a=0,l=0,p=!1;e.forEach(b=>{++a,b.next(()=>{++l,p&&l===a&&t()},k=>s(k))}),p=!0,l===a&&t()})}static or(e){let t=Me.resolve(!1);for(const s of e)t=t.next(a=>a?Me.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new Me((s,a)=>{const l=e.length,p=new Array(l);let b=0;for(let k=0;k<l;k++){const $=k;t(e[$]).next(Y=>{p[$]=Y,++b,b===l&&s(p)},Y=>a(Y))}})}static doWhile(e,t){return new Me((s,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):s()};l()})}}class Or{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Tr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ts(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=yo(s.target.error);this.v.reject(new Ts(e,a))}}static open(e,t,s,a){try{return new Or(t,e.transaction(a,s))}catch(l){throw new Ts(t,l)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Go(t)}}class Yr{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===Yr.S((0,Ne.z$)())&&fs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Tt("SimpleDb","Removing database:",e),go(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ne.hl)())return!1;if(Yr.C())return!0;const e=(0,Ne.z$)(),t=Yr.S(e),s=0<t&&t<10,a=Yr.N(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,Le.Z)(function*(){return t.db||(Tt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new Ts(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const b=p.target.error;a("VersionError"===b.name?new gt(Ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new gt(Ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new Ts(e,b))},l.onupgradeneeded=p=>{Tt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.V.O(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{Tt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,Le.Z)(function*(){const p="readonly"===t;let b=0;for(;;){++b;try{l.db=yield l.$(e);const k=Or.open(l.db,e,p?"readonly":"readwrite",s),$=a(k).next(Y=>(k.P(),Y)).catch(Y=>(k.abort(Y),Me.reject(Y))).toPromise();return $.catch(()=>{}),yield k.R,$}catch(k){const $=k,Y="FirebaseError"!==$.name&&b<3;if(Tt("SimpleDb","Transaction failed with error:",$.message,"Retrying:",Y),l.close(),!Y)return Promise.reject($)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ro{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return go(this.L.delete())}}class Ts extends gt{constructor(e,t){super(Ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function is(r){return"IndexedDbTransactionError"===r.name}class Go{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Tt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),go(s)}add(e){return Tt("SimpleDb","ADD",this.store.name,e,e),go(this.store.add(e))}get(e){return go(this.store.get(e)).next(t=>(void 0===t&&(t=null),Tt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Tt("SimpleDb","DELETE",this.store.name,e),go(this.store.delete(e))}count(){return Tt("SimpleDb","COUNT",this.store.name),go(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),l=[];return this.W(a,(p,b)=>{l.push(b)}).next(()=>l)}{const a=this.store.getAll(s.range);return new Me((l,p)=>{a.onerror=b=>{p(b.target.error)},a.onsuccess=b=>{l(b.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Me((a,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}J(e,t){Tt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(l,p,b)=>b.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new Me((s,a)=>{t.onerror=l=>{const p=yo(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(b=>{b?p.continue():s()}):s()}})}W(e,t){const s=[];return new Me((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const b=p.target.result;if(!b)return void a();const k=new ro(b),$=t(b.primaryKey,b.value,k);if($ instanceof Me){const Y=$.catch(me=>(k.done(),Me.reject(me)));s.push(Y)}k.isDone?a():null===k.K?b.continue():b.continue(k.K)}}).next(()=>Me.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function go(r){return new Me((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=yo(s.target.error);t(a)}})}let mo=!1;function yo(r){const e=Yr.S((0,Ne.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mo||(mo=!0,setTimeout(()=>{throw s},0)),s}}return r}class xa{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Tt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Le.Z)(function*(){t.task=null;try{Tt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){is(s)?Tt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield tn(s)}yield t.et(6e4)}))}}class _o{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,l=!0;return Me.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return Tt("IndexBackiller",`Processing collection: ${p}`),this.it(e,p,a).next(b=>{a-=b,s.add(p)});l=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.rt(a,l)).next(b=>(Tt("IndexBackiller",`Updating offset: ${b}`),this.localStore.indexManager.updateCollectionGroup(e,t,b))).next(()=>p.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,l)=>{const p=Z(l);oe(p,s)>0&&(s=p)}),new te(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let So=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function Du(r){return null==r}function za(r){return 0===r&&1/r==-1/0}function Tu(r){return"number"==typeof r&&Number.isInteger(r)&&!za(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function ss(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=fl(e)),e=vo(r.get(t),e);return fl(e)}function vo(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function fl(r){return r+"\x01\x01"}function di(r){const e=r.length;if(mn(e>=2),2===e)return mn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),mr.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=r.indexOf("\x01",l);switch((p<0||p>t)&&Jt(),r.charAt(p+1)){case"\x01":const b=r.substring(l,p);let k;0===a.length?k=b:(a+=b,k=a,a=""),s.push(k);break;case"\x10":a+=r.substring(l,p),a+="\0";break;case"\x11":a+=r.substring(l,p+1);break;default:Jt()}l=p+2}return new mr(s)}const ec=["userId","batchId"];function ru(r,e){return[r,ss(e)]}function tc(r,e,t){return[r,ss(e),t]}const iu={},nc=["prefixPath","collectionGroup","readTime","documentId"],rc=["prefixPath","collectionGroup","documentId"],pl=["collectionGroup","readTime","prefixPath","documentId"],ic=["canonicalId","targetId"],su=["targetId","path"],gl=["path","targetId"],bu=["collectionId","parent"],qc=["indexId","uid"],qd=["uid","sequenceNumber"],ou=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ml=["indexId","uid","orderedDocumentKey"],yl=["userId","collectionPath","documentId"],Zc=["userId","collectionPath","largestBatchId"],Zd=["userId","collectionGroup","largestBatchId"],Pa=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hu=[...Pa,"documentOverlays"],Qc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sc=Qc,Yc=[...sc,"indexConfiguration","indexState","indexEntries"];class Xc extends Ot{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Rs(r,e){const t=$t(r);return Yr.M(t.ht,e)}function Jc(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function da(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function zu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class si{constructor(e,t){this.comparator=e,this.root=t||ps.EMPTY}insert(e,t){return new si(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ga(this.root,e,this.comparator,!0)}}class Ga{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??ps.RED,this.left=a??ps.EMPTY,this.right=l??ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new ps(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ps.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Jt();const e=this.left.check();if(e!==this.right.check())throw Jt();return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1,ps.EMPTY=new class{constructor(){this.size=0}get key(){throw Jt()}get value(){throw Jt()}get color(){throw Jt()}get left(){throw Jt()}get right(){throw Jt()}copy(r,e,t,s,a){return this}insert(r,e,t){return new ps(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ti{constructor(e){this.comparator=e,this.data=new si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _l(this.data.getIterator())}getIteratorFrom(e){return new _l(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ti)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ti(this.comparator);return t.data=e,t}}class _l{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wa(r){return r.hasNext()?r.getNext():void 0}class io{constructor(e){this.fields=e,e.sort(Wi.comparator)}static empty(){return new io([])}unionWith(e){let t=new Ti(Wi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new io(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Cu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Cu("Invalid base64 string: "+a):a}}(e);return new gs(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new gs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gs.EMPTY_BYTE_STRING=new gs("");const oc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ia(r){if(mn(!!r),"string"==typeof r){let e=0;const t=oc.exec(r);if(mn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ai(r.seconds),nanos:Ai(r.nanos)}}function Ai(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function so(r){return"string"==typeof r?gs.fromBase64String(r):gs.fromUint8Array(r)}function Gu(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ac(r){const e=r.mapValue.fields.__previous_value__;return Gu(e)?ac(e):e}function Na(r){const e=Ia(r.mapValue.fields.__local_write_time__.timestampValue);return new ci(e.seconds,e.nanos)}class Oa{constructor(e,t,s,a,l,p,b,k,$){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=b,this.longPollingOptions=k,this.useFetchStreams=$}}class ea{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ea("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}const Eo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wu={nullValue:"NULL_VALUE"};function Wo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Gu(r)?4:Gn(r)?9007199254740991:10:Jt()}function ha(r,e){if(r===e)return!0;const t=Wo(r);if(t!==Wo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Na(r).isEqual(Na(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Ia(s.timestampValue),p=Ia(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,so(r.bytesValue).isEqual(so(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return Ai(s.geoPointValue.latitude)===Ai(a.geoPointValue.latitude)&&Ai(s.geoPointValue.longitude)===Ai(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ai(s.integerValue)===Ai(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Ai(s.doubleValue),p=Ai(a.doubleValue);return l===p?za(l)===za(p):isNaN(l)&&isNaN(p)}return!1}(r,e);case 9:return zo(r.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Jc(l)!==Jc(p))return!1;for(const b in l)if(l.hasOwnProperty(b)&&(void 0===p[b]||!ha(l[b],p[b])))return!1;return!0}(r,e);default:return Jt()}var a}function Ku(r,e){return void 0!==(r.values||[]).find(t=>ha(t,e))}function Wa(r,e){if(r===e)return 0;const t=Wo(r),s=Wo(e);if(t!==s)return Zn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zn(r.booleanValue,e.booleanValue);case 2:return function(a,l){const p=Ai(a.integerValue||a.doubleValue),b=Ai(l.integerValue||l.doubleValue);return p<b?-1:p>b?1:p===b?0:isNaN(p)?isNaN(b)?0:-1:1}(r,e);case 3:return Yd(r.timestampValue,e.timestampValue);case 4:return Yd(Na(r),Na(e));case 5:return Zn(r.stringValue,e.stringValue);case 6:return function(a,l){const p=so(a),b=so(l);return p.compareTo(b)}(r.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),b=l.split("/");for(let k=0;k<p.length&&k<b.length;k++){const $=Zn(p[k],b[k]);if(0!==$)return $}return Zn(p.length,b.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,l){const p=Zn(Ai(a.latitude),Ai(l.latitude));return 0!==p?p:Zn(Ai(a.longitude),Ai(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],b=l.values||[];for(let k=0;k<p.length&&k<b.length;++k){const $=Wa(p[k],b[k]);if($)return $}return Zn(p.length,b.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===Eo.mapValue&&l===Eo.mapValue)return 0;if(a===Eo.mapValue)return 1;if(l===Eo.mapValue)return-1;const p=a.fields||{},b=Object.keys(p),k=l.fields||{},$=Object.keys(k);b.sort(),$.sort();for(let Y=0;Y<b.length&&Y<$.length;++Y){const me=Zn(b[Y],$[Y]);if(0!==me)return me;const Ze=Wa(p[b[Y]],k[$[Y]]);if(0!==Ze)return Ze}return Zn(b.length,$.length)}(r.mapValue,e.mapValue);default:throw Jt()}}function Yd(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Zn(r,e);const t=Ia(r),s=Ia(e),a=Zn(t.seconds,s.seconds);return 0!==a?a:Zn(t.nanos,s.nanos)}function D(r){return M(r)}function M(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=Ia(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?so(r.bytesValue).toBase64():"referenceValue"in r?Nt.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=M(p);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const b of a)p?p=!1:l+=",",l+=`${b}:${M(s.fields[b])}`;return l+"}"}(r.mapValue):Jt();var e}function ne(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ce(r){return!!r&&"integerValue"in r}function Ge(r){return!!r&&"arrayValue"in r}function ut(r){return!!r&&"nullValue"in r}function qt(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Bt(r){return!!r&&"mapValue"in r}function fn(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return da(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=fn(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fn(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Gn(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function er(r){return"nullValue"in r?Wu:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?ne(ea.empty(),Nt.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Jt()}function ta(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?ne(ea.empty(),Nt.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Eo:Jt()}function bs(r,e){const t=Wa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Da(r,e){const t=Wa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Bt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fn(t)}setAll(e){let t=Wi.emptyPath(),s={},a=[];e.forEach((p,b)=>{if(!t.isImmediateParentOf(b)){const k=this.getFieldsMap(t);this.applyChanges(k,s,a),s={},a=[],t=b.popLast()}p?s[b.lastSegment()]=fn(p):a.push(b.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Bt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Bt(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){da(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Ri(fn(this.value))}}function na(r){const e=[];return da(r.fields,(t,s)=>{const a=new Wi([t]);if(Bt(s)){const l=na(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new io(e)}class kr{constructor(e,t,s,a,l,p,b){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=p,this.documentState=b}static newInvalidDocument(e){return new kr(e,0,Kt.min(),Kt.min(),Kt.min(),Ri.empty(),0)}static newFoundDocument(e,t,s,a){return new kr(e,1,t,Kt.min(),s,a,0)}static newNoDocument(e,t){return new kr(e,2,t,Kt.min(),Kt.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new kr(e,3,t,Kt.min(),Kt.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Kt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qs{constructor(e,t){this.position=e,this.inclusive=t}}function vl(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],p=r.position[a];if(s=l.field.isKeyField()?Nt.comparator(Nt.fromName(p.referenceValue),t.key):Wa(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function Xd(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ha(r.position[t],e.position[t]))return!1;return!0}class uc{constructor(e,t="asc"){this.field=e,this.dir=t}}function J_(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class El{}class Cr extends El{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new ff(e,t,s):"array-contains"===t?new gf(e,s):"in"===t?new ed(e,s):"not-in"===t?new nh(e,s):"array-contains-any"===t?new td(e,s):new Cr(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new pf(e,s):new qu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Wa(t,this.value)):null!==t&&Wo(this.value)===Wo(t)&&this.matchesComparison(Wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class yi extends El{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new yi(e,t)}matches(e){return wl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function wl(r){return"and"===r.op}function lc(r){return"or"===r.op}function Jd(r){return df(r)&&wl(r)}function df(r){for(const e of r.filters)if(e instanceof yi)return!1;return!0}function eh(r){if(r instanceof Cr)return r.field.canonicalString()+r.op.toString()+D(r.value);if(Jd(r))return r.filters.map(e=>eh(e)).join(",");{const e=r.filters.map(t=>eh(t)).join(",");return`${r.op}(${e})`}}function hf(r,e){return r instanceof Cr?(t=r,(s=e)instanceof Cr&&t.op===s.op&&t.field.isEqual(s.field)&&ha(t.value,s.value)):r instanceof yi?function(t,s){return s instanceof yi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,l,p)=>a&&hf(l,s.filters[p]),!0)}(r,e):void Jt();var t,s}function th(r,e){const t=r.filters.concat(e);return yi.create(t,r.op)}function Il(r){return r instanceof Cr?`${(e=r).field.canonicalString()} ${e.op} ${D(e.value)}`:r instanceof yi?function(e){return e.op.toString()+" {"+e.getFilters().map(Il).join(" ,")+"}"}(r):"Filter";var e}class ff extends Cr{constructor(e,t,s){super(e,t,s),this.key=Nt.fromName(s.referenceValue)}matches(e){const t=Nt.comparator(e.key,this.key);return this.matchesComparison(t)}}class pf extends Cr{constructor(e,t){super(e,"in",t),this.keys=Cs(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qu extends Cr{constructor(e,t){super(e,"not-in",t),this.keys=Cs(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cs(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Nt.fromName(s.referenceValue))}class gf extends Cr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ge(t)&&Ku(t.arrayValue,this.value)}}class ed extends Cr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ku(this.value.arrayValue,t)}}class nh extends Cr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ku(this.value.arrayValue,t)}}class td extends Cr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ge(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ku(this.value.arrayValue,s))}}class Hp{constructor(e,t=null,s=[],a=[],l=null,p=null,b=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=b,this.dt=null}}function rh(r,e=null,t=[],s=[],a=null,l=null,p=null){return new Hp(r,e,t,s,a,l,p)}function au(r){const e=$t(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>eh(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Du(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>D(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>D(s)).join(",")),e.dt=t}return e.dt}function cc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!J_(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!hf(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Xd(r.startAt,e.startAt)&&Xd(r.endAt,e.endAt)}function nd(r){return Nt.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function dc(r,e){return r.filters.filter(t=>t instanceof Cr&&t.field.isEqual(e))}function zp(r,e,t){let s=Wu,a=!0;for(const l of dc(r,e)){let p=Wu,b=!0;switch(l.op){case"<":case"<=":p=er(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,b=!1;break;case"!=":case"not-in":p=Wu}bs({value:s,inclusive:a},{value:p,inclusive:b})<0&&(s=p,a=b)}if(null!==t)for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const p=t.position[l];bs({value:s,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}function Dl(r,e,t){let s=Eo,a=!0;for(const l of dc(r,e)){let p=Eo,b=!0;switch(l.op){case">=":case">":p=ta(l.value),b=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,b=!1;break;case"!=":case"not-in":p=Eo}Da({value:s,inclusive:a},{value:p,inclusive:b})>0&&(s=p,a=b)}if(null!==t)for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const p=t.position[l];Da({value:s,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}class ka{constructor(e,t=null,s=[],a=[],l=null,p="F",b=null,k=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=b,this.endAt=k,this.wt=null,this._t=null}}function ih(r,e,t,s,a,l,p,b){return new ka(r,e,t,s,a,l,p,b)}function Zu(r){return new ka(r)}function rd(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function hc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function fc(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function id(r){return null!==r.collectionGroup}function La(r){const e=$t(r);if(null===e.wt){e.wt=[];const t=fc(e),s=hc(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new uc(t)),e.wt.push(new uc(Wi.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new uc(Wi.keyField(),l))}}}return e.wt}function Ao(r){const e=$t(r);if(!e._t)if("F"===e.limitType)e._t=rh(e.path,e.collectionGroup,La(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of La(e))t.push(new uc(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new qs(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new qs(e.startAt.position,e.startAt.inclusive):null;e._t=rh(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function sh(r,e){e.getFirstInequalityField(),fc(r);const t=r.filters.concat([e]);return new ka(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Tl(r,e,t){return new ka(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function uu(r,e){return cc(Ao(r),Ao(e))&&r.limitType===e.limitType}function oh(r){return`${au(Ao(r))}|lt:${r.limitType}`}function lu(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Il(s)).join(", ")}]`),Du(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>D(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>D(s)).join(",")),`Target(${t})`}(Ao(r))}; limitType=${r.limitType})`}function pc(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Nt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of La(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,l,p){const b=vl(a,l,p);return a.inclusive?b<=0:b<0}(t.startAt,La(t),s)||t.endAt&&!function(a,l,p){const b=vl(a,l,p);return a.inclusive?b>=0:b>0}(t.endAt,La(t),s)));var t,s}function gc(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function mc(r){return(e,t)=>{let s=!1;for(const a of La(r)){const l=Gp(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function Gp(r,e,t){const s=r.field.isKeyField()?Nt.comparator(e.key,t.key):function(a,l,p){const b=l.data.field(a),k=p.data.field(a);return null!==b&&null!==k?Wa(b,k):Jt()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Jt()}}class Fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return zu(this.inner)}size(){return this.innerSize}}const sd=new si(Nt.comparator);function os(){return sd}const ah=new si(Nt.comparator);function Su(...r){let e=ah;for(const t of r)e=e.insert(t.key,t);return e}function mf(r){let e=ah;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Ka(){return qa()}function uh(){return qa()}function qa(){return new Fa(r=>r.toString(),(r,e)=>r.isEqual(e))}const yf=new si(Nt.comparator),lh=new Ti(Nt.comparator);function cr(...r){let e=lh;for(const t of r)e=e.add(t);return e}const _f=new Ti(Zn);function yc(){return _f}function od(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:za(e)?"-0":e}}function ch(r){return{integerValue:""+r}}function ra(r,e){return Tu(e)?ch(e):od(r,e)}class cu{constructor(){this._=void 0}}function Wp(r,e,t){return r instanceof Ru?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Gu(a)&&(a=ac(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):r instanceof Ta?Qu(r,e):r instanceof Yu?Mu(r,e):function(s,a){const l=Au(s,a),p=vf(l)+vf(s.gt);return Ce(l)&&Ce(s.gt)?ch(p):od(s.serializer,p)}(r,e)}function Kp(r,e,t){return r instanceof Ta?Qu(r,e):r instanceof Yu?Mu(r,e):t}function Au(r,e){return r instanceof xu?Ce(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Ru extends cu{}class Ta extends cu{constructor(e){super(),this.elements=e}}function Qu(r,e){const t=Ef(e);for(const s of r.elements)t.some(a=>ha(a,s))||t.push(s);return{arrayValue:{values:t}}}class Yu extends cu{constructor(e){super(),this.elements=e}}function Mu(r,e){let t=Ef(e);for(const s of r.elements)t=t.filter(a=>!ha(a,s));return{arrayValue:{values:t}}}class xu extends cu{constructor(e,t){super(),this.serializer=e,this.gt=t}}function vf(r){return Ai(r.integerValue||r.doubleValue)}function Ef(r){return Ge(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class _c{constructor(e,t){this.field=e,this.transform=t}}class Ko{constructor(e,t){this.version=e,this.transformResults=t}}class Fi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fi}static exists(e){return new Fi(void 0,e)}static updateTime(e){return new Fi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bl(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class ad{}function ba(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new m(r.key,Fi.none()):new Xu(r.key,r.data,Fi.none());{const t=r.data,s=Ri.empty();let a=new Ti(Wi.comparator);for(let l of e.fields)if(!a.has(l)){let p=t.field(l);null===p&&l.length>1&&(l=l.popLast(),p=t.field(l)),null===p?s.delete(l):s.set(l,p),a=a.add(l)}return new Pu(r.key,s,new io(a.toArray()),Fi.none())}}function ud(r,e,t){r instanceof Xu?function(s,a,l){const p=s.value.clone(),b=Qp(s.fieldTransforms,a,l.transformResults);p.setAll(b),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(r,e,t):r instanceof Pu?function(s,a,l){if(!bl(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=Qp(s.fieldTransforms,a,l.transformResults),b=a.data;b.setAll(Zp(s)),b.setAll(p),a.convertToFoundDocument(l.version,b).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vc(r,e,t,s){return r instanceof Xu?function(a,l,p,b){if(!bl(a.precondition,l))return p;const k=a.value.clone(),$=wf(a.fieldTransforms,b,l);return k.setAll($),l.convertToFoundDocument(l.version,k).setHasLocalMutations(),null}(r,e,t,s):r instanceof Pu?function(a,l,p,b){if(!bl(a.precondition,l))return p;const k=wf(a.fieldTransforms,b,l),$=l.data;return $.setAll(Zp(a)),$.setAll(k),l.convertToFoundDocument(l.version,$).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(Y=>Y.field))}(r,e,t,s):(p=t,bl(r.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p);var l,p}function ld(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=Au(s.transform,a||null);null!=l&&(null===t&&(t=Ri.empty()),t.set(s.field,l))}return t||null}function qp(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&zo(t,s,(a,l)=>function dh(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof Ta&&s instanceof Ta||t instanceof Yu&&s instanceof Yu?zo(t.elements,s.elements,ha):t instanceof xu&&s instanceof xu?ha(t.gt,s.gt):t instanceof Ru&&s instanceof Ru);var t,s}(a,l))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class Xu extends ad{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Pu extends ad{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Zp(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Qp(r,e,t){const s=new Map;mn(r.length===t.length);for(let a=0;a<t.length;a++){const l=r[a],p=l.transform,b=e.data.field(l.field);s.set(l.field,Kp(p,b,t[a]))}return s}function wf(r,e,t){const s=new Map;for(const a of r){const l=a.transform,p=t.data.field(a.field);s.set(a.field,Wp(l,p,e))}return s}class m extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class h{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&ud(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=vc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=vc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=uh();return this.mutations.forEach(a=>{const l=e.get(a.key),p=l.overlayedDocument;let b=this.applyToLocalView(p,l.mutatedFields);b=t.has(a.key)?null:b;const k=ba(p,b);null!==k&&s.set(a.key,k),p.isValidDocument()||p.convertToNoDocument(Kt.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cr())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(t,s)=>qp(t,s))&&zo(this.baseMutations,e.baseMutations,(t,s)=>qp(t,s))}}class E{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){mn(e.mutations.length===s.length);let a=yf;const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new E(e,t,s,a)}}class F{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ie{constructor(e,t){this.count=e,this.unchangedNames=t}}var $e,at;function Vt(r){switch(r){default:return Jt();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}function un(r){if(void 0===r)return fs("GRPC error has no .code"),Ke.UNKNOWN;switch(r){case $e.OK:return Ke.OK;case $e.CANCELLED:return Ke.CANCELLED;case $e.UNKNOWN:return Ke.UNKNOWN;case $e.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case $e.INTERNAL:return Ke.INTERNAL;case $e.UNAVAILABLE:return Ke.UNAVAILABLE;case $e.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case $e.NOT_FOUND:return Ke.NOT_FOUND;case $e.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case $e.ABORTED:return Ke.ABORTED;case $e.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case $e.DATA_LOSS:return Ke.DATA_LOSS;default:return Jt()}}(at=$e||($e={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";class cn{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Vi}static getOrCreateInstance(){return null===Vi&&(Vi=new cn),Vi}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Vi=null;function Ca(){return new TextEncoder}const cd=new Di([4294967295,4294967295],0);function hh(r){const e=Ca().encode(r),t=new Eu;return t.update(e),new Uint8Array(t.digest())}function dd(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Di([t,s],0),new Di([a,l],0)]}class Cl{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Sl(`Invalid padding: ${t}`);if(s<0)throw new Sl(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Sl(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Sl(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Di.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(Di.fromNumber(s)));return 1===a.compare(cd)&&(a=new Di([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=hh(e),[s,a]=dd(t);for(let l=0;l<this.hashCount;l++){const p=this.Et(s,a,l);if(!this.At(p))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),p=new Cl(l,a,t);return s.forEach(b=>p.insert(b)),p}insert(e){if(0===this.It)return;const t=hh(e),[s,a]=dd(t);for(let l=0;l<this.hashCount;l++){const p=this.Et(s,a,l);this.Rt(p)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ju{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ju(Kt.min(),a,new si(Zn),os(),cr())}}class Al{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Al(s,t,cr(),cr(),cr())}}class Rl{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class hd{constructor(e,t){this.targetId=e,this.Vt=t}}class fh{constructor(e,t,s=gs.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Ro{constructor(){this.St=0,this.Dt=If(),this.Ct=gs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=cr(),t=cr(),s=cr();return this.Dt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Jt()}}),new Al(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=If()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Ec{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=os(),this.zt=ph(),this.Wt=new si(Zn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:Jt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,l=this.se(s);if(l){const p=l.target;if(nd(p))if(0===a){const b=new Nt(p.path);this.Yt(s,b,kr.newNoDocument(b,Kt.min()))}else mn(1===a);else{const b=this.ie(s);if(b!==a){const k=this.re(e,b);0!==k&&(this.ee(s),this.Wt=this.Wt.insert(s,2===k?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=cn.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function($,Y,me){var Ze,ht,kt,Qt,an,fr;const ei={localCacheCount:Y,existenceFilterCount:me.count},pr=me.unchangedNames;return pr&&(ei.bloomFilter={applied:0===$,hashCount:null!==(Ze=pr?.hashCount)&&void 0!==Ze?Ze:0,bitmapLength:null!==(Qt=null===(kt=null===(ht=pr?.bits)||void 0===ht?void 0:ht.bitmap)||void 0===kt?void 0:kt.length)&&void 0!==Qt?Qt:0,padding:null!==(fr=null===(an=pr?.bits)||void 0===an?void 0:an.padding)&&void 0!==fr?fr:0}),ei}(k,b,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:l="",padding:p=0},hashCount:b=0}=s;let k,$;try{k=so(l).toUint8Array()}catch(Y){if(Y instanceof Cu)return Nr("Decoding the base64 bloom filter in existence filter failed ("+Y.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw Y}try{$=new Cl(k,p,b)}catch(Y){return Nr(Y instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",Y),1}return 0===$.It?1:a!==t-this.oe(e.targetId,$)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(l=>{const p=this.Gt.ue(),b=`projects/${p.projectId}/databases/${p.database}/documents/${l.path.canonicalString()}`;t.vt(b)||(this.Yt(e,l,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((l,p)=>{const b=this.se(p);if(b){if(l.current&&nd(b.target)){const k=new Nt(b.target.path);null!==this.jt.get(k)||this.ae(p,k)||this.Yt(p,k,kr.newNoDocument(k,e))}l.Mt&&(t.set(p,l.Ot()),l.Ft())}});let s=cr();this.zt.forEach((l,p)=>{let b=!0;p.forEachWhile(k=>{const $=this.se(k);return!$||"TargetPurposeLimboResolution"===$.purpose||(b=!1,!1)}),b&&(s=s.add(l))}),this.jt.forEach((l,p)=>p.setReadTime(e));const a=new Ju(e,t,this.Wt,this.jt,s);return this.jt=os(),this.zt=ph(),this.Wt=new si(Zn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Ro,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ti(Zn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Tt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Ro),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ph(){return new si(Nt.comparator)}function If(){return new si(Nt.comparator)}const ia={asc:"ASCENDING",desc:"DESCENDING"},gh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$m={and:"AND",or:"OR"};class ev{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yp(r,e){return r.useProto3Json||Du(e)?e:{value:e}}function wc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jm(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Hm(r,e){return wc(r,e.toTimestamp())}function Zs(r){return mn(!!r),Kt.fromTimestamp(function(e){const t=Ia(e);return new ci(t.seconds,t.nanos)}(r))}function Df(r,e){return(t=r,new mr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function zm(r){const e=mr.fromString(r);return mn(Ic(e)),e}function mh(r,e){return Df(r.databaseId,e.path)}function du(r,e){const t=zm(e);if(t.get(1)!==r.databaseId.projectId)throw new gt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new gt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Nt(Ou(t))}function Tf(r,e){return Df(r.databaseId,e)}function Gm(r){const e=zm(r);return 4===e.length?mr.emptyPath():Ou(e)}function Nu(r){return new mr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Ou(r){return mn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Wm(r,e,t){return{name:mh(r,e),fields:t.value.mapValue.fields}}function Km(r,e,t){const s=du(r,e.name),a=Zs(e.updateTime),l=e.createTime?Zs(e.createTime):Kt.min(),p=new Ri({mapValue:{fields:e.fields}}),b=kr.newFoundDocument(s,a,l,p);return t&&b.setHasCommittedMutations(),t?b.setHasCommittedMutations():b}function fd(r,e){let t;if(e instanceof Xu)t={update:Wm(r,e.key,e.value)};else if(e instanceof m)t={delete:mh(r,e.key)};else if(e instanceof Pu)t={update:Wm(r,e.key,e.data),updateMask:eE(e.fieldMask)};else{if(!(e instanceof d))return Jt();t={verify:mh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof Ru)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ta)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Yu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof xu)return{fieldPath:l.field.canonicalString(),increment:p.gt};throw Jt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Hm(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Jt()),t;var a}function qm(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Fi.updateTime(Zs(a.updateTime)):void 0!==a.exists?Fi.exists(a.exists):Fi.none():Fi.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let b=null;"setToServerValue"in p?(mn("REQUEST_TIME"===p.setToServerValue),b=new Ru):"appendMissingElements"in p?b=new Ta(p.appendMissingElements.values||[]):"removeAllFromArray"in p?b=new Yu(p.removeAllFromArray.values||[]):"increment"in p?b=new xu(l,p.increment):Jt();const k=Wi.fromServerFormat(p.fieldPath);return new _c(k,b)}(r,a)):[];var a;if(e.update){const a=du(r,e.update.name),l=new Ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new io((e.updateMask.fieldPaths||[]).map($=>Wi.fromServerFormat($)));return new Pu(a,l,p,t,s)}return new Xu(a,l,t,s)}if(e.delete){const a=du(r,e.delete);return new m(a,t)}if(e.verify){const a=du(r,e.verify);return new d(a,t)}return Jt()}function bf(r,e){return{documents:[Tf(r,e.path)]}}function yh(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Tf(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Tf(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(k){if(0!==k.length)return Xp(yi.create(k,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(k){if(0!==k.length)return k.map($=>{return{field:Lu((Y=$).field),direction:_h(Y.dir)};var Y})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=Yp(r,e.limit);var b,k;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(b=e.startAt).inclusive,values:b.position}),e.endAt&&(t.structuredQuery.endAt={before:!(k=e.endAt).inclusive,values:k.position}),t}function Zm(r){let e=Gm(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){mn(1===s);const Y=t.from[0];Y.allDescendants?a=Y.collectionId:e=e.child(Y.collectionId)}let l=[];t.where&&(l=function(Y){const me=Ym(Y);return me instanceof yi&&Jd(me)?me.getFilters():[me]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(Y=>{return new uc(Ml((me=Y).field),function(Ze){switch(Ze){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(me.direction));var me}));let b=null;t.limit&&(b=function(Y){let me;return me="object"==typeof Y?Y.value:Y,Du(me)?null:me}(t.limit));let k=null;var Y;t.startAt&&(k=new qs((Y=t.startAt).values||[],!!Y.before));let $=null;return t.endAt&&($=function(Y){return new qs(Y.values||[],!Y.before)}(t.endAt)),ih(e,a,p,l,b,"F",k,$)}function Ym(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ml(e.unaryFilter.field);return Cr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Ml(e.unaryFilter.field);return Cr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ml(e.unaryFilter.field);return Cr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ml(e.unaryFilter.field);return Cr.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Jt()}}(r):void 0!==r.fieldFilter?Cr.create(Ml((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return yi.create(e.compositeFilter.filters.map(t=>Ym(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Jt()}}(e.compositeFilter.op))}(r):Jt();var e}function _h(r){return ia[r]}function tv(r){return gh[r]}function nv(r){return $m[r]}function Lu(r){return{fieldPath:r.canonicalString()}}function Ml(r){return Wi.fromServerFormat(r.fieldPath)}function Xp(r){return r instanceof Cr?function(e){if("=="===e.op){if(qt(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NAN"}};if(ut(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qt(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NOT_NAN"}};if(ut(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(e.field),op:tv(e.op),value:e.value}}}(r):r instanceof yi?function(e){const t=e.getFilters().map(s=>Xp(s));return 1===t.length?t[0]:{compositeFilter:{op:nv(e.op),filters:t}}}(r):Jt()}function eE(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ic(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class hu{constructor(e,t,s,a,l=Kt.min(),p=Kt.min(),b=gs.EMPTY_BYTE_STRING,k=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=b,this.expectedCount=k}withSequenceNumber(e){return new hu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jp{constructor(e){this.fe=e}}function Cf(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Sf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:mh(a=r.fe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:wc(a,l.version.toTimestamp()),createTime:wc(a,l.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Dc(e.version)};else{if(!e.isUnknownDocument())return Jt();s.unknownDocument={path:t.path.toArray(),version:Dc(e.version)}}var a,l;return s}function Sf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Dc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tc(r){const e=new ci(r.seconds,r.nanoseconds);return Kt.fromTimestamp(e)}function bc(r,e){const t=(e.baseMutations||[]).map(l=>qm(r.fe,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>qm(r.fe,l)),a=ci.fromMillis(e.localWriteTimeMs);return new h(e.batchId,a,t,s)}function vh(r){const e=Tc(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Tc(r.lastLimboFreeSnapshotVersion):Kt.min();let s;var a;return void 0!==r.query.documents?(mn(1===(a=r.query).documents.length),s=Ao(Zu(Gm(a.documents[0])))):s=Ao(Zm(r.query)),new hu(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,gs.fromBase64String(r.resumeToken))}function Xm(r,e){const t=Dc(e.snapshotVersion),s=Dc(e.lastLimboFreeSnapshotVersion);let a;a=nd(e.target)?bf(r.fe,e.target):yh(r.fe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:au(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Af(r){const e=Zm({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Tl(e,e.limit,"L"):e}function Eh(r,e){return new F(e.largestBatchId,qm(r.fe,e.overlayMutation))}function eg(r,e){const t=e.path.lastSegment();return[r,ss(e.path.popLast()),t]}function Rf(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Dc(s.readTime),documentKey:ss(s.documentKey.path),largestBatchId:s.largestBatchId}}class iv{getBundleMetadata(e,t){return Jm(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Tc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Jm(e).put({bundleId:(s=t).id,createTime:Dc(Zs(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return tg(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Af(a.bundledQuery),readTime:Tc(a.readTime)};var a})}saveNamedQuery(e,t){return tg(e).put({name:(s=t).name,readTime:Dc(Zs(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Jm(r){return Rs(r,"bundles")}function tg(r){return Rs(r,"namedQueries")}class wh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new wh(e,t.uid||"")}getOverlay(e,t){return fu(e).get(eg(this.userId,t)).next(s=>s?Eh(this.serializer,s):null)}getOverlays(e,t){const s=Ka();return Me.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((l,p)=>{const b=new F(t,p);a.push(this.we(e,b))}),Me.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add(ss(p.getCollectionPath())));const l=[];return a.forEach(p=>{const b=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push(fu(e).J("collectionPathOverlayIndex",b))}),Me.waitFor(l)}getOverlaysForCollection(e,t,s){const a=Ka(),l=ss(t),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return fu(e).j("collectionPathOverlayIndex",p).next(b=>{for(const k of b){const $=Eh(this.serializer,k);a.set($.getKey(),$)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const l=Ka();let p;const b=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fu(e).X({index:"collectionGroupOverlayIndex",range:b},(k,$,Y)=>{const me=Eh(this.serializer,$);l.size()<a||me.largestBatchId===p?(l.set(me.getKey(),me),p=me.largestBatchId):Y.done()}).next(()=>l)}we(e,t){return fu(e).put(function(s,a,l){const[p,b,k]=eg(a,l.mutation.key);return{userId:a,collectionPath:b,documentId:k,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:fd(s.fe,l.mutation)}}(this.serializer,this.userId,t))}}function fu(r){return Rs(r,"documentOverlays")}class xl{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ai(e.integerValue));else if("doubleValue"in e){const s=Ai(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),za(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(so(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?Gn(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Jt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),Nt.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function ey(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function ty(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const l=ey(255&t[a]);if(s+=l,8!==l)break}return s}(r);return Math.ceil(e/8)}xl.Ve=new xl;class tE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=ty(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=ty(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Mf{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class sv{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class pd{constructor(){this.je=new tE,this.ze=new Mf(this.je),this.We=new sv(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Pl{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Pl(this.indexId,this.documentKey,this.arrayValue,s)}}function el(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=xf(r.arrayValue,e.arrayValue),0!==t?t:(t=xf(r.directionalValue,e.directionalValue),0!==t?t:Nt.comparator(r.documentKey,e.documentKey)))}function xf(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class ny{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){mn(e.collectionGroup===this.collectionId);const t=Ha(e);if(void 0!==t&&!this.en(t))return!1;const s=ca(e);let a=0,l=0;for(;a<s.length&&this.en(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.Ze){const p=s[a];if(!this.nn(this.Ze,p)||!this.sn(this.Ye[l++],p))return!1;++a}for(;a<s.length;++a){const p=s[a];if(l>=this.Ye.length||!this.sn(this.Ye[l++],p))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ih(r){var e,t;if(mn(r instanceof Cr||r instanceof yi),r instanceof Cr){if(r instanceof ed){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>Cr.create(r.field,"==",l)))||[];return yi.create(a,"or")}return r}const s=r.filters.map(a=>Ih(a));return yi.create(s,r.op)}function Pf(r){if(0===r.getFilters().length)return[];const e=Th(Ih(r));return mn(ng(e)),Nf(e)||Dh(e)?[e]:e.getFilters()}function Nf(r){return r instanceof Cr}function Dh(r){return r instanceof yi&&Jd(r)}function ng(r){return Nf(r)||Dh(r)||function(e){if(e instanceof yi&&lc(e)){for(const t of e.getFilters())if(!Nf(t)&&!Dh(t))return!1;return!0}return!1}(r)}function Th(r){if(mn(r instanceof Cr||r instanceof yi),r instanceof Cr)return r;if(1===r.filters.length)return Th(r.filters[0]);const e=r.filters.map(s=>Th(s));let t=yi.create(e,r.op);return t=bh(t),ng(t)?t:(mn(t instanceof yi),mn(wl(t)),mn(t.filters.length>1),t.filters.reduce((s,a)=>Cc(s,a)))}function Cc(r,e){let t;return mn(r instanceof Cr||r instanceof yi),mn(e instanceof Cr||e instanceof yi),t=r instanceof Cr?e instanceof Cr?yi.create([r,e],"and"):ry(r,e):e instanceof Cr?ry(e,r):function(s,a){if(mn(s.filters.length>0&&a.filters.length>0),wl(s)&&wl(a))return th(s,a.getFilters());const l=lc(s)?s:a,p=lc(s)?a:s,b=l.filters.map(k=>Cc(k,p));return yi.create(b,"or")}(r,e),bh(t)}function ry(r,e){if(wl(e))return th(e,r.getFilters());{const t=e.filters.map(s=>Cc(r,s));return yi.create(t,"or")}}function bh(r){if(mn(r instanceof Cr||r instanceof yi),r instanceof Cr)return r;const e=r.getFilters();if(1===e.length)return bh(e[0]);if(df(r))return r;const t=e.map(a=>bh(a)),s=[];return t.forEach(a=>{a instanceof Cr?s.push(a):a instanceof yi&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:yi.create(s,r.op)}class ov{constructor(){this.rn=new rg}addToCollectionParentIndex(e,t){return this.rn.add(t),Me.resolve()}getCollectionParents(e,t){return Me.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Me.resolve()}deleteFieldIndex(e,t){return Me.resolve()}getDocumentsMatchingTarget(e,t){return Me.resolve(null)}getIndexType(e,t){return Me.resolve(0)}getFieldIndexes(e,t){return Me.resolve([])}getNextCollectionGroupToUpdate(e){return Me.resolve(null)}getMinOffset(e,t){return Me.resolve(te.min())}getMinOffsetFromCollectionGroup(e,t){return Me.resolve(te.min())}updateCollectionGroup(e,t,s){return Me.resolve()}updateIndexEntries(e,t){return Me.resolve()}}class rg{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Ti(mr.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Ti(mr.comparator)).toArray()}}const Ch=new Uint8Array(0);class ig{constructor(e,t){this.user=e,this.databaseId=t,this.on=new rg,this.un=new Fa(s=>au(s),(s,a)=>cc(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const l={collectionId:s,parent:ss(a)};return sg(e).put(l)}return Me.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Kc(t),""],!1,!0);return sg(e).j(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(di(p.parent))}return s})}addFieldIndex(e,t){const s=Sh(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(b=>[b.fieldPath.canonicalString(),b.kind])};var p;delete a.indexId;const l=s.add(a);if(t.indexState){const p=Ah(e);return l.next(b=>{p.put(Rf(b,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const s=Sh(e),a=Ah(e),l=Of(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Of(e);let a=!0;const l=new Map;return Me.forEach(this.cn(t),p=>this.an(e,p).next(b=>{a&&(a=!!b),l.set(p,b)})).next(()=>{if(a){let p=cr();const b=[];return Me.forEach(l,(k,$)=>{var Y;Tt("IndexedDbIndexManager",`Using index ${Y=k,`id=${Y.indexId}|cg=${Y.collectionGroup}|f=${Y.fields.map(pr=>`${pr.fieldPath}:${pr.kind}`).join(",")}`} to execute ${au(t)}`);const me=function(pr,xs){const us=Ha(xs);if(void 0===us)return null;for(const Xi of dc(pr,us.fieldPath))switch(Xi.op){case"array-contains-any":return Xi.value.arrayValue.values||[];case"array-contains":return[Xi.value]}return null}($,k),Ze=function(pr,xs){const us=new Map;for(const Xi of ca(xs))for(const aa of dc(pr,Xi.fieldPath))switch(aa.op){case"==":case"in":us.set(Xi.fieldPath.canonicalString(),aa.value);break;case"not-in":case"!=":return us.set(Xi.fieldPath.canonicalString(),aa.value),Array.from(us.values())}return null}($,k),ht=function(pr,xs){const us=[];let Xi=!0;for(const aa of ca(xs)){const Ql=0===aa.kind?zp(pr,aa.fieldPath,pr.startAt):Dl(pr,aa.fieldPath,pr.startAt);us.push(Ql.value),Xi&&(Xi=Ql.inclusive)}return new qs(us,Xi)}($,k),kt=function(pr,xs){const us=[];let Xi=!0;for(const aa of ca(xs)){const Ql=0===aa.kind?Dl(pr,aa.fieldPath,pr.endAt):zp(pr,aa.fieldPath,pr.endAt);us.push(Ql.value),Xi&&(Xi=Ql.inclusive)}return new qs(us,Xi)}($,k),Qt=this.hn(k,$,ht),an=this.hn(k,$,kt),fr=this.ln(k,$,Ze),ei=this.fn(k.indexId,me,Qt,ht.inclusive,an,kt.inclusive,fr);return Me.forEach(ei,pr=>s.H(pr,t.limit).next(xs=>{xs.forEach(us=>{const Xi=Nt.fromSegments(us.documentKey);p.has(Xi)||(p=p.add(Xi),b.push(Xi))})}))}).next(()=>b)}return Me.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Pf(yi.create(e.filters,"and")).map(s=>rh(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,l,p,b){const k=(null!=t?t.length:1)*Math.max(s.length,l.length),$=k/(null!=t?t.length:1),Y=[];for(let me=0;me<k;++me){const Ze=t?this.dn(t[me/$]):Ch,ht=this.wn(e,Ze,s[me%$],a),kt=this._n(e,Ze,l[me%$],p),Qt=b.map(an=>this.wn(e,Ze,an,!0));Y.push(...this.createRange(ht,kt,Qt))}return Y}wn(e,t,s,a){const l=new Pl(e,Nt.empty(),t,s);return a?l:l.Je()}_n(e,t,s,a){const l=new Pl(e,Nt.empty(),t,s);return a?l.Je():l}an(e,t){const s=new ny(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let p=null;for(const b of l)s.tn(b)&&(!p||b.fields.length>p.fields.length)&&(p=b);return p})}getIndexType(e,t){let s=2;const a=this.cn(t);return Me.forEach(a,l=>this.an(e,l).next(p=>{p?0!==s&&p.fields.length<function(b){let k=new Ti(Wi.comparator),$=!1;for(const Y of b.filters)for(const me of Y.getFlattenedFilters())me.field.isKeyField()||("array-contains"===me.op||"array-contains-any"===me.op?$=!0:k=k.add(me.field));for(const Y of b.orderBy)Y.field.isKeyField()||(k=k.add(Y.field));return k.size+($?1:0)}(l)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new pd;for(const a of ca(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const p=s.He(a.kind);xl.Ve._e(l,p)}return s.Qe()}dn(e){const t=new pd;return xl.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new pd;return xl.Ve._e(ne(this.databaseId,t),s.He(function(a){const l=ca(a);return 0===l.length?0:l[l.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new pd);let l=0;for(const p of ca(e)){const b=s[l++];for(const k of a)if(this.yn(t,p.fieldPath)&&Ge(b))a=this.pn(a,p,b);else{const $=k.He(p.kind);xl.Ve._e(b,$)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],l=[];for(const p of s.arrayValue.values||[])for(const b of a){const k=new pd;k.seed(b.Qe()),xl.Ve._e(p,k.He(t.kind)),l.push(k)}return l}yn(e,t){return!!e.filters.find(s=>s instanceof Cr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Sh(e),a=Ah(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(l=>{const p=[];return Me.forEach(l,b=>a.get([b.indexId,this.uid]).next(k=>{p.push(function($,Y){const me=Y?new A(Y.sequenceNumber,new te(Tc(Y.readTime),new Nt(di(Y.documentKey)),Y.largestBatchId)):A.empty(),Ze=$.fields.map(([ht,kt])=>new T(Wi.fromServerFormat(ht),kt));return new no($.indexId,$.collectionGroup,Ze,me)}(b,k))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const l=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:Zn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Sh(e),l=Ah(e);return this.Tn(e).next(p=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(b=>Me.forEach(b,k=>l.put(Rf(k.indexId,this.user,p,s)))))}updateIndexEntries(e,t){const s=new Map;return Me.forEach(t,(a,l)=>{const p=s.get(a.collectionGroup);return(p?Me.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(b=>(s.set(a.collectionGroup,b),Me.forEach(b,k=>this.En(e,a,k).next($=>{const Y=this.An(l,k);return $.isEqual(Y)?Me.resolve():this.vn(e,l,k,$,Y)}))))})}Rn(e,t,s,a){return Of(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return Of(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=Of(e);let l=new Ti(el);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(p,b)=>{l=l.add(new Pl(s.indexId,t,b.arrayValue,b.directionalValue))}).next(()=>l)}An(e,t){let s=new Ti(el);const a=this.mn(t,e);if(null==a)return s;const l=Ha(t);if(null!=l){const p=e.data.field(l.fieldPath);if(Ge(p))for(const b of p.arrayValue.values||[])s=s.add(new Pl(t.indexId,e.key,this.dn(b),a))}else s=s.add(new Pl(t.indexId,e.key,Ch,a));return s}vn(e,t,s,a,l){Tt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(b,k,$,Y,me){const Ze=b.getIterator(),ht=k.getIterator();let kt=wa(Ze),Qt=wa(ht);for(;kt||Qt;){let an=!1,fr=!1;if(kt&&Qt){const ei=$(kt,Qt);ei<0?fr=!0:ei>0&&(an=!0)}else null!=kt?fr=!0:an=!0;an?(Y(Qt),Qt=wa(ht)):fr?(me(kt),kt=wa(Ze)):(kt=wa(Ze),Qt=wa(ht))}}(a,l,el,b=>{p.push(this.Rn(e,t,s,b))},b=>{p.push(this.Pn(e,t,s,b))}),Me.waitFor(p)}Tn(e){let t=1;return Ah(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,b)=>el(p,b)).filter((p,b,k)=>!b||0!==el(p,k[b-1]));const a=[];a.push(e);for(const p of s){const b=el(p,e),k=el(p,t);if(0===b)a[0]=e.Je();else if(b>0&&k<0)a.push(p),a.push(p.Je());else if(k>0)break}a.push(t);const l=[];for(let p=0;p<a.length;p+=2){if(this.bn(a[p],a[p+1]))return[];l.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Ch,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Ch,[]]))}return l}bn(e,t){return el(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(og)}getMinOffset(e,t){return Me.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||Jt())).next(og)}}function sg(r){return Rs(r,"collectionParents")}function Of(r){return Rs(r,"indexEntries")}function Sh(r){return Rs(r,"indexConfiguration")}function Ah(r){return Rs(r,"indexState")}function og(r){mn(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;oe(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new te(e.readTime,e.documentKey,t)}const iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sa{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new sa(e,sa.DEFAULT_COLLECTION_PERCENTILE,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Za(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),l=[],p=IDBKeyRange.only(t.batchId);let b=0;const k=s.X({range:p},(Y,me,Ze)=>(b++,Ze.delete()));l.push(k.next(()=>{mn(1===b)}));const $=[];for(const Y of t.mutations){const me=tc(e,Y.key.path,t.batchId);l.push(a.delete(me)),$.push(Y.key)}return Me.waitFor(l).next(()=>$)}function kf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Jt();e=r.noDocument}return JSON.stringify(e).length}sa.DEFAULT_COLLECTION_PERCENTILE=10,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sa.DEFAULT=new sa(41943040,sa.DEFAULT_COLLECTION_PERCENTILE,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sa.DISABLED=new sa(-1,0,0);class Rh{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){mn(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Rh(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nl(e).X({index:"userMutationsIndex",range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=gd(e),p=Nl(e);return p.add({}).next(b=>{mn("number"==typeof b);const k=new h(b,t,s,a),$=function(Ze,ht,kt){const Qt=kt.baseMutations.map(fr=>fd(Ze.fe,fr)),an=kt.mutations.map(fr=>fd(Ze.fe,fr));return{userId:ht,batchId:kt.batchId,localWriteTimeMs:kt.localWriteTime.toMillis(),baseMutations:Qt,mutations:an}}(this.serializer,this.userId,k),Y=[];let me=new Ti((Ze,ht)=>Zn(Ze.canonicalString(),ht.canonicalString()));for(const Ze of a){const ht=tc(this.userId,Ze.key.path,b);me=me.add(Ze.key.path.popLast()),Y.push(p.put($)),Y.push(l.put(ht,iu))}return me.forEach(Ze=>{Y.push(this.indexManager.addToCollectionParentIndex(e,Ze))}),e.addOnCommittedListener(()=>{this.Vn[b]=k.keys()}),Me.waitFor(Y).next(()=>k)})}lookupMutationBatch(e,t){return Nl(e).get(t).next(s=>s?(mn(s.userId===this.userId),bc(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?Me.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Nl(e).X({index:"userMutationsIndex",range:a},(p,b,k)=>{b.userId===this.userId&&(mn(b.batchId>=s),l=bc(this.serializer,b)),k.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Nl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nl(e).j("userMutationsIndex",t).next(s=>s.map(a=>bc(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ru(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return gd(e).X({range:a},(p,b,k)=>{const[$,Y,me]=p,Ze=di(Y);if($===this.userId&&t.path.isEqual(Ze))return Nl(e).get(me).next(ht=>{if(!ht)throw Jt();mn(ht.userId===this.userId),l.push(bc(this.serializer,ht))});k.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ti(Zn);const a=[];return t.forEach(l=>{const p=ru(this.userId,l.path),b=IDBKeyRange.lowerBound(p),k=gd(e).X({range:b},($,Y,me)=>{const[Ze,ht,kt]=$,Qt=di(ht);Ze===this.userId&&l.path.isEqual(Qt)?s=s.add(kt):me.done()});a.push(k)}),Me.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=ru(this.userId,s),p=IDBKeyRange.lowerBound(l);let b=new Ti(Zn);return gd(e).X({range:p},(k,$,Y)=>{const[me,Ze,ht]=k,kt=di(Ze);me===this.userId&&s.isPrefixOf(kt)?kt.length===a&&(b=b.add(ht)):Y.done()}).next(()=>this.Dn(e,b))}Dn(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Nl(e).get(l).next(p=>{if(null===p)throw Jt();mn(p.userId===this.userId),s.push(bc(this.serializer,p))}))}),Me.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Za(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Me.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Me.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return gd(e).X({range:s},(l,p,b)=>{if(l[0]===this.userId){const k=di(l[1]);a.push(k)}else b.done()}).next(()=>{mn(0===a.length)})})}containsKey(e,t){return sy(e,this.userId,t)}xn(e){return oy(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sy(r,e,t){const s=ru(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return gd(r).X({range:l,Y:!0},(b,k,$)=>{const[Y,me,Ze]=b;Y===e&&me===a&&(p=!0),$.done()}).next(()=>p)}function Nl(r){return Rs(r,"mutations")}function gd(r){return Rs(r,"documentMutations")}function oy(r){return Rs(r,"mutationQueues")}class Ol{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ol(0)}static Mn(){return new Ol(-1)}}class av{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new Ol(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Kt.fromTimestamp(new ci(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>md(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(mn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return md(e).X((p,b)=>{const k=vh(b);k.sequenceNumber<=t&&null===s.get(k.targetId)&&(a++,l.push(this.removeTargetData(e,k)))}).next(()=>Me.waitFor(l)).next(()=>a)}forEachTarget(e,t){return md(e).X((s,a)=>{const l=vh(a);t(l)})}$n(e){return ay(e).get("targetGlobalKey").next(t=>(mn(null!==t),t))}On(e,t){return ay(e).put("targetGlobalKey",t)}Fn(e,t){return md(e).put(Xm(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=au(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return md(e).X({range:a,index:"queryTargetsIndex"},(p,b,k)=>{const $=vh(b);cc(t,$.target)&&(l=$,k.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Wn(e);return t.forEach(p=>{const b=ss(p.path);a.push(l.put({targetId:s,path:b})),a.push(this.referenceDelegate.addReference(e,s,p))}),Me.waitFor(a)}removeMatchingKeys(e,t,s){const a=Wn(e);return Me.forEach(t,l=>{const p=ss(l.path);return Me.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Wn(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Wn(e);let l=cr();return a.X({range:s,Y:!0},(p,b,k)=>{const $=di(p[1]),Y=new Nt($);l=l.add(Y)}).next(()=>l)}containsKey(e,t){const s=ss(t.path),a=IDBKeyRange.bound([s],[Kc(s)],!1,!0);let l=0;return Wn(e).X({index:"documentTargetsIndex",Y:!0,range:a},([p,b],k,$)=>{0!==p&&(l++,$.done())}).next(()=>l>0)}le(e,t){return md(e).get(t).next(s=>s?vh(s):null)}}function md(r){return Rs(r,"targets")}function ay(r){return Rs(r,"targetGlobal")}function Wn(r){return Rs(r,"targetDocuments")}function ag([r,e],[t,s]){const a=Zn(r,t);return 0===a?Zn(e,s):a}class uy{constructor(e){this.Ln=e,this.buffer=new Ti(ag),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ag(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ug{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Tt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Le.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){is(s)?Tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield tn(s)}yield t.Qn(3e5)}))}}class uv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Me.resolve(So.ct);const s=new uy(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(iy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iy):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,l,p,b,k,$;const Y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(me=>(me>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${me}`),a=this.params.maximumSequenceNumbersToCollect):a=me,p=Date.now(),this.nthSequenceNumber(e,a))).next(me=>(s=me,b=Date.now(),this.removeTargets(e,s,t))).next(me=>(l=me,k=Date.now(),this.removeOrphanedDocuments(e,s))).next(me=>($=Date.now(),ju()<=Ee.in.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-Y}ms\n\tDetermined least recently used ${a} in `+(b-p)+`ms\n\tRemoved ${l} targets in `+(k-b)+`ms\n\tRemoved ${me} documents in `+($-k)+`ms\nTotal Duration: ${$-Y}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:me})))}}class cy{constructor(e,t){this.db=e,this.garbageCollector=function ly(r,e){return new uv(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Lf(e,s)}removeReference(e,t,s){return Lf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Lf(e,t)}Xn(e,t){return function(s,a){let l=!1;return oy(s).Z(p=>sy(s,p,a).next(b=>(b&&(l=!0),Me.resolve(!b)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Yn(e,(p,b)=>{if(b<=t){const k=this.Xn(e,p).next($=>{if(!$)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,Kt.min()),Wn(e).delete([0,ss(p.path)])))});a.push(k)}}).next(()=>Me.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Lf(e,t)}Yn(e,t){const s=Wn(e);let a,l=So.ct;return s.X({index:"documentTargetsIndex"},([p,b],{path:k,sequenceNumber:$})=>{0===p?(l!==So.ct&&t(new Nt(di(a)),l),l=$,a=k):l=So.ct}).next(()=>{l!==So.ct&&t(new Nt(di(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(r,e){return Wn(r).put((s=r.currentSequenceNumber,{targetId:0,path:ss(e.path),sequenceNumber:s}));var s}class lg{constructor(){this.changes=new Fa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Me.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return kl(e).put(s)}removeEntry(e,t,s){return kl(e).delete(function(a,l){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Sf(l),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=kr.newInvalidDocument(t);return kl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(pu(t))},(a,l)=>{s=this.ts(t,l)}).next(()=>s)}es(e,t){let s={size:0,document:kr.newInvalidDocument(t)};return kl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(pu(t))},(a,l)=>{s={document:this.ts(t,l),size:kf(l)}}).next(()=>s)}getEntries(e,t){let s=os();return this.ns(e,t,(a,l)=>{const p=this.ts(a,l);s=s.insert(a,p)}).next(()=>s)}ss(e,t){let s=os(),a=new si(Nt.comparator);return this.ns(e,t,(l,p)=>{const b=this.ts(l,p);s=s.insert(l,b),a=a.insert(l,kf(p))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return Me.resolve();let a=new Ti(Ff);t.forEach(k=>a=a.add(k));const l=IDBKeyRange.bound(pu(a.first()),pu(a.last())),p=a.getIterator();let b=p.getNext();return kl(e).X({index:"documentKeyIndex",range:l},(k,$,Y)=>{const me=Nt.fromSegments([...$.prefixPath,$.collectionGroup,$.documentId]);for(;b&&Ff(b,me)<0;)s(b,null),b=p.getNext();b&&b.isEqual(me)&&(s(b,$),b=p.hasNext()?p.getNext():null),b?Y.G(pu(b)):Y.done()}).next(()=>{for(;b;)s(b,null),b=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const l=t.path,p=[l.popLast().toArray(),l.lastSegment(),Sf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],b=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return kl(e).j(IDBKeyRange.bound(p,b,!0)).next(k=>{let $=os();for(const Y of k){const me=this.ts(Nt.fromSegments(Y.prefixPath.concat(Y.collectionGroup,Y.documentId)),Y);me.isFoundDocument()&&(pc(t,me)||a.has(me.key))&&($=$.insert(me.key,me))}return $})}getAllFromCollectionGroup(e,t,s,a){let l=os();const p=hy(t,s),b=hy(t,te.max());return kl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,b,!0)},(k,$,Y)=>{const me=this.ts(Nt.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);l=l.insert(me.key,me),l.size===a&&Y.done()}).next(()=>l)}newChangeBuffer(e){return new nE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return cg(e).get("remoteDocumentGlobalKey").next(t=>(mn(!!t),t))}Zn(e,t){return cg(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function rv(r,e){let t;if(e.document)t=Km(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Nt.fromSegments(e.noDocument.path),a=Tc(e.noDocument.readTime);t=kr.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Jt();{const s=Nt.fromSegments(e.unknownDocument.path),a=Tc(e.unknownDocument.version);t=kr.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new ci(s[0],s[1]);return Kt.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Kt.min()))return s}return kr.newInvalidDocument(e)}}function dy(r){return new lv(r)}class nE extends lg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Fa(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Ti((l,p)=>Zn(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const b=this.us.get(l);if(t.push(this.os.removeEntry(e,l,b.readTime)),p.isValidDocument()){const k=Cf(this.os.serializer,p);a=a.add(l.path.popLast()),s+=kf(k)-b.size,t.push(this.os.addEntry(e,l,k))}else if(s-=b.size,this.trackRemovals){const k=Cf(this.os.serializer,p.convertToNoDocument(Kt.min()));t.push(this.os.addEntry(e,l,k))}}),a.forEach(l=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.os.updateMetadata(e,s)),Me.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((l,p)=>{this.us.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function cg(r){return Rs(r,"remoteDocumentGlobal")}function kl(r){return Rs(r,"remoteDocumentsV14")}function pu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hy(r,e){const t=e.documentKey.path.toArray();return[r,Sf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ff(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<s.length-2;++l)if(a=Zn(t[l],s[l]),a)return a;return a=Zn(t.length,s.length),a||(a=Zn(t[t.length-2],s[s.length-2]),a||Zn(t[t.length-1],s[s.length-1]))}class dg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fy{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&vc(s.mutation,a,io.empty(),ci.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,cr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=cr()){const a=Ka();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let p=Su();return l.forEach((b,k)=>{p=p.insert(b,k.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=Ka();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,cr()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((p,b)=>{t.set(p,b)})})}computeViews(e,t,s,a){let l=os();const p=qa(),b=qa();return t.forEach((k,$)=>{const Y=s.get($.key);a.has($.key)&&(void 0===Y||Y.mutation instanceof Pu)?l=l.insert($.key,$):void 0!==Y?(p.set($.key,Y.mutation.getFieldMask()),vc(Y.mutation,$,Y.mutation.getFieldMask(),ci.now())):p.set($.key,io.empty())}),this.recalculateAndSaveOverlays(e,l).next(k=>(k.forEach(($,Y)=>p.set($,Y)),t.forEach(($,Y)=>{var me;return b.set($,new dg(Y,null!==(me=p.get($))&&void 0!==me?me:null))}),b))}recalculateAndSaveOverlays(e,t){const s=qa();let a=new si((p,b)=>p-b),l=cr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const b of p)b.keys().forEach(k=>{const $=t.get(k);if(null===$)return;let Y=s.get(k)||io.empty();Y=b.applyToLocalView($,Y),s.set(k,Y);const me=(a.get(b.batchId)||cr()).add(k);a=a.insert(b.batchId,me)})}).next(()=>{const p=[],b=a.getReverseIterator();for(;b.hasNext();){const k=b.getNext(),$=k.key,Y=k.value,me=uh();Y.forEach(Ze=>{if(!l.has(Ze)){const ht=ba(t.get(Ze),s.get(Ze));null!==ht&&me.set(Ze,ht),l=l.add(Ze)}}),p.push(this.documentOverlayCache.saveOverlays(e,$,me))}return Me.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Nt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):id(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const p=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):Me.resolve(Ka());let b=-1,k=l;return p.next($=>Me.forEach($,(Y,me)=>(b<me.largestBatchId&&(b=me.largestBatchId),l.get(Y)?Me.resolve():this.remoteDocumentCache.getEntry(e,Y).next(Ze=>{k=k.insert(Y,Ze)}))).next(()=>this.populateOverlays(e,$,l)).next(()=>this.computeViews(e,k,$,cr())).next(Y=>({batchId:b,changes:mf(Y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Nt(t)).next(s=>{let a=Su();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let l=Su();return this.indexManager.getCollectionParents(e,a).next(p=>Me.forEach(p,b=>{const k=($=t,Y=b.child(a),new ka(Y,null,$.explicitOrderBy.slice(),$.filters.slice(),$.limit,$.limitType,$.startAt,$.endAt));var $,Y;return this.getDocumentsMatchingCollectionQuery(e,k,s).next($=>{$.forEach((Y,me)=>{l=l.insert(Y,me)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(l=>{a.forEach((b,k)=>{const $=k.getKey();null===l.get($)&&(l=l.insert($,kr.newInvalidDocument($)))});let p=Su();return l.forEach((b,k)=>{const $=a.get(b);void 0!==$&&vc($.mutation,k,io.empty(),ci.now()),pc(t,k)&&(p=p.insert(b,k))}),p})}}class rE{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Me.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Zs(s.createTime)}),Me.resolve()}getNamedQuery(e,t){return Me.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:Af(s.bundledQuery),readTime:Zs(s.readTime)}),Me.resolve();var s}}class iE{constructor(){this.overlays=new si(Nt.comparator),this.ls=new Map}getOverlay(e,t){return Me.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ka();return Me.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.we(e,t,l)}),Me.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(s)),Me.resolve()}getOverlaysForCollection(e,t,s){const a=Ka(),l=t.length+1,p=new Nt(t.child("")),b=this.overlays.getIteratorFrom(p);for(;b.hasNext();){const k=b.getNext().value,$=k.getKey();if(!t.isPrefixOf($.path))break;$.path.length===l&&k.largestBatchId>s&&a.set(k.getKey(),k)}return Me.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new si(($,Y)=>$-Y);const p=this.overlays.getIterator();for(;p.hasNext();){const $=p.getNext().value;if($.getKey().getCollectionGroup()===t&&$.largestBatchId>s){let Y=l.get($.largestBatchId);null===Y&&(Y=Ka(),l=l.insert($.largestBatchId,Y)),Y.set($.getKey(),$)}}const b=Ka(),k=l.getIterator();for(;k.hasNext()&&(k.getNext().value.forEach(($,Y)=>b.set($,Y)),!(b.size()>=a)););return Me.resolve(b)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const p=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new F(t,s));let l=this.ls.get(t);void 0===l&&(l=cr(),this.ls.set(t,l)),this.ls.set(t,l.add(s.key))}}class py{constructor(){this.fs=new Ti(Mo.ds),this.ws=new Ti(Mo._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new Mo(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new Mo(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new Nt(new mr([])),s=new Mo(t,e),a=new Mo(t,e+1),l=[];return this.ws.forEachInRange([s,a],p=>{this.ys(p),l.push(p.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Nt(new mr([])),s=new Mo(t,e),a=new Mo(t,e+1);let l=cr();return this.ws.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Mo(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Mo{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Nt.comparator(e.key,t.key)||Zn(e.As,t.As)}static _s(e,t){return Zn(e.As,t.As)||Nt.comparator(e.key,t.key)}}class gy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ti(Mo.ds)}checkEmpty(e){return Me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const l=this.vs;this.vs++;const p=new h(l,t,s,a);this.mutationQueue.push(p);for(const b of a)this.Rs=this.Rs.add(new Mo(b.key,l)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return Me.resolve(p)}lookupMutationBatch(e,t){return Me.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),l=a<0?0:a;return Me.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Mo(t,0),a=new Mo(t,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([s,a],p=>{const b=this.Ps(p.As);l.push(b)}),Me.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ti(Zn);return t.forEach(a=>{const l=new Mo(a,0),p=new Mo(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,p],b=>{s=s.add(b.As)})}),Me.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Nt.isDocumentKey(l)||(l=l.child(""));const p=new Mo(new Nt(l),0);let b=new Ti(Zn);return this.Rs.forEachWhile(k=>{const $=k.key.path;return!!s.isPrefixOf($)&&($.length===a&&(b=b.add(k.As)),!0)},p),Me.resolve(this.Vs(b))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){mn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return Me.forEach(t.mutations,a=>{const l=new Mo(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new Mo(t,0),a=this.Rs.firstAfterOrEqual(s);return Me.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Me.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sE{constructor(e){this.Ds=e,this.docs=new si(Nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,p=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Me.resolve(s?s.document.mutableCopy():kr.newInvalidDocument(t))}getEntries(e,t){let s=os();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():kr.newInvalidDocument(a))}),Me.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=os();const p=t.path,b=new Nt(p.child("")),k=this.docs.getIteratorFrom(b);for(;k.hasNext();){const{key:$,value:{document:Y}}=k.getNext();if(!p.isPrefixOf($.path))break;$.path.length>p.length+1||oe(Z(Y),s)<=0||(a.has(Y.key)||pc(t,Y))&&(l=l.insert(Y.key,Y.mutableCopy()))}return Me.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Jt()}Cs(e,t){return Me.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new cv(this)}getSize(e){return Me.resolve(this.size)}}class cv extends lg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),Me.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class yd{constructor(e){this.persistence=e,this.xs=new Fa(t=>au(t),cc),this.lastRemoteSnapshotVersion=Kt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new py,this.targetCount=0,this.Ms=Ol.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),Me.resolve()}getLastRemoteSnapshotVersion(e){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Me.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),Me.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ol(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Me.resolve()}updateTargetData(e,t){return this.Fn(t),Me.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Me.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.xs.forEach((p,b)=>{b.sequenceNumber<=t&&null===s.get(b.targetId)&&(this.xs.delete(p),l.push(this.removeMatchingKeysForTargetId(e,b.targetId)),a++)}),Me.waitFor(l).next(()=>a)}getTargetCount(e){return Me.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return Me.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),Me.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),Me.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Me.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return Me.resolve(s)}containsKey(e,t){return Me.resolve(this.ks.containsKey(t))}}class hg{constructor(e,t){this.$s={},this.overlays={},this.Os=new So(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new yd(this),this.indexManager=new ov,this.remoteDocumentCache=new sE(s=>this.referenceDelegate.Ls(s)),this.serializer=new Jp(t),this.qs=new rE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new gy(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){Tt("MemoryPersistence","Starting transaction:",e);const a=new my(this.Os.next());return this.referenceDelegate.Us(),s(a).next(l=>this.referenceDelegate.Ks(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Gs(e,t){return Me.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class my extends Ot{constructor(e){super(),this.currentSequenceNumber=e}}class Sc{constructor(e){this.persistence=e,this.Qs=new py,this.js=null}static zs(e){return new Sc(e)}get Ws(){if(this.js)return this.js;throw Jt()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),Me.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),Me.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Me.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Ws.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.Ws,s=>{const a=Nt.fromPath(s);return this.Hs(e,a).next(l=>{l||t.removeEntry(a,Kt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Me.or([()=>Me.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class yy{constructor(e){this.serializer=e}O(e,t,s,a){const l=new Or("createOrUpgrade",t);var b;s<1&&a>=1&&(e.createObjectStore("owner"),(b=e).createObjectStore("mutationQueues",{keyPath:"userId"}),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ec,{unique:!0}),b.createObjectStore("documentMutations"),_y(e),function(b){b.createObjectStore("remoteDocuments")}(e));let p=Me.resolve();return s<3&&a>=3&&(0!==s&&(function(b){b.deleteObjectStore("targetDocuments"),b.deleteObjectStore("targets"),b.deleteObjectStore("targetGlobal")}(e),_y(e)),p=p.next(()=>function(b){const k=b.store("targetGlobal"),$={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Kt.min().toTimestamp(),targetCount:0};return k.put("targetGlobalKey",$)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(b,k){return k.store("mutations").j().next($=>{b.deleteObjectStore("mutations"),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ec,{unique:!0});const Y=k.store("mutations"),me=$.map(Ze=>Y.put(Ze));return Me.waitFor(me)})}(e,l))),p=p.next(()=>{!function(b){b.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ys(l))),s<6&&a>=6&&(p=p.next(()=>(function(b){b.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(l)))),s<7&&a>=7&&(p=p.next(()=>this.Zs(l))),s<8&&a>=8&&(p=p.next(()=>this.ti(e,l))),s<9&&a>=9&&(p=p.next(()=>{!function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.ei(l))),s<11&&a>=11&&(p=p.next(()=>{(function(b){b.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(b){b.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(b){const k=b.createObjectStore("documentOverlays",{keyPath:yl});k.createIndex("collectionPathOverlayIndex",Zc,{unique:!1}),k.createIndex("collectionGroupOverlayIndex",Zd,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(b){const k=b.createObjectStore("remoteDocumentsV14",{keyPath:nc});k.createIndex("documentKeyIndex",rc),k.createIndex("collectionGroupIndex",pl)}(e)).next(()=>this.ni(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>this.si(e,l))),s<15&&a>=15&&(p=p.next(()=>function(b){b.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),b.createObjectStore("indexState",{keyPath:qc}).createIndex("sequenceNumberIndex",qd,{unique:!1}),b.createObjectStore("indexEntries",{keyPath:ou}).createIndex("documentKeyIndex",ml,{unique:!1})}(e))),p}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=kf(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>Me.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",p).next(b=>Me.forEach(b,k=>{mn(k.userId===l.userId);const $=bc(this.serializer,k);return Za(e,l.userId,$).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return s.X((p,b)=>{const k=new mr(p),$=[0,ss(k)];l.push(t.get($).next(Y=>Y?Me.resolve():t.put({targetId:0,path:ss(k),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>Me.waitFor(l))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:bu});const s=t.store("collectionParents"),a=new rg,l=p=>{if(a.add(p)){const b=p.lastSegment(),k=p.popLast();return s.put({collectionId:b,parent:ss(k)})}};return t.store("remoteDocuments").X({Y:!0},(p,b)=>{const k=new mr(p);return l(k.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([p,b,k],$)=>{const Y=di(b);return l(Y.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const l=vh(a),p=Xm(this.serializer,l);return t.put(p)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((l,p)=>{const b=t.store("remoteDocumentsV14"),k=($=p,$.document?new Nt(mr.fromString($.document.name).popFirst(5)):$.noDocument?Nt.fromSegments($.noDocument.path):$.unknownDocument?Nt.fromSegments($.unknownDocument.path):Jt()).path.toArray();var $;const Y={prefixPath:k.slice(0,k.length-2),collectionGroup:k[k.length-2],documentId:k[k.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(b.put(Y))}).next(()=>Me.waitFor(a))}si(e,t){const s=t.store("mutations"),a=dy(this.serializer),l=new hg(Sc.zs,this.serializer.fe);return s.j().next(p=>{const b=new Map;return p.forEach(k=>{var $;let Y=null!==($=b.get(k.userId))&&void 0!==$?$:cr();bc(this.serializer,k).keys().forEach(me=>Y=Y.add(me)),b.set(k.userId,Y)}),Me.forEach(b,(k,$)=>{const Y=new gi($),me=wh.de(this.serializer,Y),Ze=l.getIndexManager(Y),ht=Rh.de(Y,this.serializer,Ze,l.referenceDelegate);return new fy(a,ht,me,Ze).recalculateAndSaveOverlaysForDocumentKeys(new Xc(t,So.ct),k).next()})})}}function _y(r){r.createObjectStore("targetDocuments",{keyPath:su}).createIndex("documentTargetsIndex",gl,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ic,{unique:!0}),r.createObjectStore("targetGlobal")}const fg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pg{constructor(e,t,s,a,l,p,b,k,$,Y,me=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=l,this.window=p,this.document=b,this.ri=$,this.oi=Y,this.ui=me,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Ze=>Promise.resolve(),!pg.D())throw new gt(Ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cy(this,a),this.di=t+"main",this.serializer=new Jp(k),this.wi=new Yr(this.di,this.ui,new yy(this.serializer)),this.Bs=new av(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dy(this.serializer),this.qs=new iv,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===Y&&fs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gt(Ke.FAILED_PRECONDITION,fg);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new So(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,Le.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Le.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Le.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(is(e))return Tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Mh(e).get("owner").next(t=>Me.resolve(this.Ri(t)))}Pi(e){return Bf(e).delete(this.clientId)}bi(){var e=this;return(0,Le.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Rs(s,"clientMetadata");return a.j().next(l=>{const p=e.Si(l,18e5),b=l.filter(k=>-1===p.indexOf(k));return Me.forEach(b,k=>a.delete(k.clientId)).next(()=>b)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Me.resolve(!0):Mh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new gt(Ke.FAILED_PRECONDITION,fg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bf(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,b=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&b)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Tt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Le.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Xc(t,So.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Bf(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Rh.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ig(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return wh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){Tt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(p=this.ui)?Yc:14===p?sc:13===p?Qc:12===p?Hu:11===p?Pa:void Jt();var p;let b;return this.wi.runTransaction(e,a,l,k=>(b=new Xc(k,this.Os?this.Os.next():So.ct),"readwrite-primary"===t?this.Ti(b).next($=>!!$||this.Ei(b)).next($=>{if(!$)throw fs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new gt(Ke.FAILED_PRECONDITION,qe);return s(b)}).next($=>this.vi(b).next(()=>$)):this.Oi(b).next(()=>s(b)))).then(k=>(b.raiseOnCommittedEvent(),k))}Oi(e){return Mh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new gt(Ke.FAILED_PRECONDITION,fg)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mh(e).put("owner",t)}static D(){return Yr.D()}Ai(e){const t=Mh(e);return t.get("owner").next(s=>this.Ri(s)?(Tt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Me.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(fs(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Ne.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Tt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return fs("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){fs("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mh(r){return Rs(r,"owner")}function Bf(r){return Rs(r,"clientMetadata")}function Vf(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class gg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=cr(),a=cr();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new gg(e,t.fromCache,s,a)}}class mg{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(l=>l||this.Gi(e,t,a,s)).next(l=>l||this.Qi(e,t))}Ki(e,t){if(rd(t))return Me.resolve(null);let s=Ao(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Tl(t,null,"F"),s=Ao(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const p=cr(...l);return this.Ui.getDocuments(e,p).next(b=>this.indexManager.getMinOffset(e,s).next(k=>{const $=this.ji(t,b);return this.zi(t,$,p,k.readTime)?this.Ki(e,Tl(t,null,"F")):this.Wi(e,$,t,k)}))})))}Gi(e,t,s,a){return rd(t)||a.isEqual(Kt.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(l=>{const p=this.ji(t,l);return this.zi(t,p,s,a)?this.Qi(e,t):(ju()<=Ee.in.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),lu(t)),this.Wi(e,p,t,O(a,-1)))})}ji(e,t){let s=new Ti(mc(e));return t.forEach((a,l)=>{pc(e,l)&&(s=s.add(l))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Qi(e,t){return ju()<=Ee.in.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",lu(t)),this.Ui.getDocumentsMatchingQuery(e,t,te.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(p=>{l=l.insert(p.key,p)}),l))}}class vy{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new si(Zn),this.Yi=new Fa(l=>au(l),cc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fy(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function $f(r,e,t,s){return new vy(r,e,t,s)}function dv(r,e){return xh.apply(this,arguments)}function xh(){return xh=(0,Le.Z)(function*(r,e){const t=$t(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const p=[],b=[];let k=cr();for(const $ of a){p.push($.batchId);for(const Y of $.mutations)k=k.add(Y.key)}for(const $ of l){b.push($.batchId);for(const Y of $.mutations)k=k.add(Y.key)}return t.localDocuments.getDocuments(s,k).next($=>({er:$,removedBatchIds:p,addedBatchIds:b}))})})}),xh.apply(this,arguments)}function hv(r,e){const t=$t(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Zi.newChangeBuffer({trackRemovals:!0});return function(p,b,k,$){const Y=k.batch,me=Y.keys();let Ze=Me.resolve();return me.forEach(ht=>{Ze=Ze.next(()=>$.getEntry(b,ht)).next(kt=>{const Qt=k.docVersions.get(ht);mn(null!==Qt),kt.version.compareTo(Qt)<0&&(Y.applyToRemoteDocument(kt,k),kt.isValidDocument()&&(kt.setReadTime(k.commitVersion),$.addEntry(kt)))})}),Ze.next(()=>p.mutationQueue.removeMutationBatch(b,Y))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let b=cr();for(let k=0;k<p.mutationResults.length;++k)p.mutationResults[k].transformResults.length>0&&(b=b.add(p.batch.mutations[k].key));return b}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function fv(r){const e=$t(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function _d(r,e){const t=$t(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const b=[];e.targetChanges.forEach((Y,me)=>{const Ze=a.get(me);if(!Ze)return;b.push(t.Bs.removeMatchingKeys(l,Y.removedDocuments,me).next(()=>t.Bs.addMatchingKeys(l,Y.addedDocuments,me)));let ht=Ze.withSequenceNumber(l.currentSequenceNumber);var kt,Qt,an;null!==e.targetMismatches.get(me)?ht=ht.withResumeToken(gs.EMPTY_BYTE_STRING,Kt.min()).withLastLimboFreeSnapshotVersion(Kt.min()):Y.resumeToken.approximateByteSize()>0&&(ht=ht.withResumeToken(Y.resumeToken,s)),a=a.insert(me,ht),Qt=ht,an=Y,(0===(kt=Ze).resumeToken.approximateByteSize()||Qt.snapshotVersion.toMicroseconds()-kt.snapshotVersion.toMicroseconds()>=3e8||an.addedDocuments.size+an.modifiedDocuments.size+an.removedDocuments.size>0)&&b.push(t.Bs.updateTargetData(l,ht))});let k=os(),$=cr();if(e.documentUpdates.forEach(Y=>{e.resolvedLimboDocuments.has(Y)&&b.push(t.persistence.referenceDelegate.updateLimboDocument(l,Y))}),b.push(yg(l,p,e.documentUpdates).next(Y=>{k=Y.nr,$=Y.sr})),!s.isEqual(Kt.min())){const Y=t.Bs.getLastRemoteSnapshotVersion(l).next(me=>t.Bs.setTargetsMetadata(l,l.currentSequenceNumber,s));b.push(Y)}return Me.waitFor(b).next(()=>p.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,k,$)).next(()=>k)}).then(l=>(t.Ji=a,l))}function yg(r,e,t){let s=cr(),a=cr();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let p=os();return t.forEach((b,k)=>{const $=l.get(b);k.isFoundDocument()!==$.isFoundDocument()&&(a=a.add(b)),k.isNoDocument()&&k.version.isEqual(Kt.min())?(e.removeEntry(b,k.readTime),p=p.insert(b,k)):!$.isValidDocument()||k.version.compareTo($.version)>0||0===k.version.compareTo($.version)&&$.hasPendingWrites?(e.addEntry(k),p=p.insert(b,k)):Tt("LocalStore","Ignoring outdated watch update for ",b,". Current version:",$.version," Watch version:",k.version)}),{nr:p,sr:a}})}function Ey(r,e){const t=$t(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function tl(r,e){const t=$t(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(l=>l?(a=l,Me.resolve(a)):t.Bs.allocateTargetId(s).next(p=>(a=new hu(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function oa(r,e,t){return jf.apply(this,arguments)}function jf(){return jf=(0,Le.Z)(function*(r,e,t){const s=$t(r),a=s.Ji.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!is(p))throw p;Tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),jf.apply(this,arguments)}function Hf(r,e,t){const s=$t(r);let a=Kt.min(),l=cr();return s.persistence.runTransaction("Execute query","readonly",p=>function(b,k,$){const Y=$t(b),me=Y.Yi.get($);return void 0!==me?Me.resolve(Y.Ji.get(me)):Y.Bs.getTargetData(k,$)}(s,p,Ao(e)).next(b=>{if(b)return a=b.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(p,b.targetId).next(k=>{l=k})}).next(()=>s.Hi.getDocumentsMatchingQuery(p,e,t?a:Kt.min(),t?l:cr())).next(b=>(Gf(s,gc(e),b),{documents:b,ir:l})))}function zf(r,e){const t=$t(r),s=$t(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.le(l,e).next(p=>p?p.target:null))}function Fu(r,e){const t=$t(r),s=t.Xi.get(e)||Kt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,O(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Gf(t,e,a),a))}function Gf(r,e,t){let s=r.Xi.get(e)||Kt.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.Xi.set(e,s)}function Ph(){return Ph=(0,Le.Z)(function*(r,e,t,s){const a=$t(r);let l=cr(),p=os();for(const $ of t){const Y=e.rr($.metadata.name);$.document&&(l=l.add(Y));const me=e.ur($);me.setReadTime(e.cr($.metadata.readTime)),p=p.insert(Y,me)}const b=a.Zi.newChangeBuffer({trackRemovals:!0}),k=yield tl(a,($=s,Ao(Zu(mr.fromString(`__bundle__/docs/${$}`)))));var $;return a.persistence.runTransaction("Apply bundle documents","readwrite",$=>yg($,b,p).next(Y=>(b.apply($),Y)).next(Y=>a.Bs.removeMatchingKeysForTargetId($,k.targetId).next(()=>a.Bs.addMatchingKeys($,l,k.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments($,Y.nr,Y.sr)).next(()=>Y.nr)))}),Ph.apply(this,arguments)}function oE(r,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Le.Z)(function*(r,e,t=cr()){const s=yield tl(r,Ao(Af(e.bundledQuery))),a=$t(r);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=Zs(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.qs.saveNamedQuery(l,e);const b=s.withResumeToken(gs.EMPTY_BYTE_STRING,p);return a.Ji=a.Ji.insert(b.targetId,b),a.Bs.updateTargetData(l,b).next(()=>a.Bs.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.Bs.addMatchingKeys(l,t,s.targetId)).next(()=>a.qs.saveNamedQuery(l,e))})}),Wf.apply(this,arguments)}function pv(r,e){return`firestore_clients_${r}_${e}`}function Nh(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function vd(r,e){return`firestore_targets_${r}_${e}`}class Ed{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new gt(a.error.code,a.error.message))),p?new Ed(e,t,a.state,l):(fs("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ac{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new gt(s.error.code,s.error.message))),l?new Ac(e,s.state,a):(fs("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=yc();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=Tu(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new wd(e,l):(fs("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Iy{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Iy(t.clientId,t.onlineState):(fs("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _g{constructor(){this.activeTargetIds=yc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vg{constructor(e,t,s,a,l){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new si(Zn),this.started=!1,this.yr=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.pr=pv(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new _g),this.Tr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(b){return`firestore_bundle_loaded_v2_${b}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Le.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const l=e.getItem(pv(e.persistenceKey,a));if(l){const p=wd.ar(a,l);p&&(e.gr=e.gr.insert(p.clientId,p))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(vd(this.persistenceKey,e));if(s){const a=Ac.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vd(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Tt("SharedClientState","READ",e,t),t}setItem(e,t){Tt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Tt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Tt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void fs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Le.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(l){let p=So.ct;if(null!=l)try{const b=JSON.parse(l);mn("number"==typeof b),p=b}catch(b){fs("SharedClientState","Failed to read sequence number from WebStorage",b)}return p}(s.newValue);a!==So.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(l=>t.syncEngine.Qr(l)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new Ed(this.currentUser,e,t,s),l=Nh(this.persistenceKey,this.currentUser,e);this.setItem(l,a.hr())}Cr(e){const t=Nh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=vd(this.persistenceKey,e),l=new Ac(e,t,s);this.setItem(a,l.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return wd.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return Ed.ar(new gi(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return Ac.ar(a,t)}br(e){return Iy.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Tt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),l=this.Sr(s),p=[],b=[];return l.forEach(k=>{a.has(k)||p.push(k)}),a.forEach(k=>{l.has(k)||b.push(k)}),this.syncEngine.Wr(p,b).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=yc();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Dy{constructor(){this.Hr=new _g,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new _g,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gv{Yr(e){}shutdown(){}}class Eg{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let wg=null;function Ig(){return null===wg?wg=268435456+Math.round(2147483648*Math.random()):wg++,"0x"+wg.toString(16)}const aE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ty{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const qo="WebChannelConnection";class mv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,l){const p=Ig(),b=this.To(e,t);Tt("RestConnection",`Sending RPC '${e}' ${p}:`,b,s);const k={};return this.Eo(k,a,l),this.Ao(e,b,k,s).then($=>(Tt("RestConnection",`Received RPC '${e}' ${p}: `,$),$),$=>{throw Nr("RestConnection",`RPC '${e}' ${p} failed with error: `,$,"url: ",b,"request:",s),$})}vo(e,t,s,a,l,p){return this.Io(e,t,s,a,l)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Co,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}To(e,t){return`${this.mo}/v1/${t}:${aE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const l=Ig();return new Promise((p,b)=>{const k=new ll;k.setWithCredentials(!0),k.listenOnce(Ds.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case Gi.NO_ERROR:const Y=k.getResponseJson();Tt(qo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(Y)),p(Y);break;case Gi.TIMEOUT:Tt(qo,`RPC '${e}' ${l} timed out`),b(new gt(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case Gi.HTTP_ERROR:const me=k.getStatus();if(Tt(qo,`RPC '${e}' ${l} failed with status:`,me,"response text:",k.getResponseText()),me>0){let Ze=k.getResponseJson();Array.isArray(Ze)&&(Ze=Ze[0]);const ht=Ze?.error;if(ht&&ht.status&&ht.message){const kt=function(Qt){const an=Qt.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(an)>=0?an:Ke.UNKNOWN}(ht.status);b(new gt(kt,ht.message))}else b(new gt(Ke.UNKNOWN,"Server responded with status "+k.getStatus()))}else b(new gt(Ke.UNAVAILABLE,"Connection failed."));break;default:Jt()}}finally{Tt(qo,`RPC '${e}' ${l} completed.`)}});const $=JSON.stringify(a);Tt(qo,`RPC '${e}' ${l} sending request:`,a),k.send(t,"POST",$,s,15)})}Ro(e,t,s){const a=Ig(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Aa(),b=Ra(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},$=this.longPollingOptions.timeoutSeconds;void 0!==$&&(k.longPollingTimeout=Math.round(1e3*$)),this.useFetchStreams&&(k.xmlHttpFactory=new _a({})),this.Eo(k.initMessageHeaders,t,s),k.encodeInitMessageHeaders=!0;const Y=l.join("");Tt(qo,`Creating RPC '${e}' stream ${a}: ${Y}`,k);const me=p.createWebChannel(Y,k);let Ze=!1,ht=!1;const kt=new Ty({ro:an=>{ht?Tt(qo,`Not sending because RPC '${e}' stream ${a} is closed:`,an):(Ze||(Tt(qo,`Opening RPC '${e}' stream ${a} transport.`),me.open(),Ze=!0),Tt(qo,`RPC '${e}' stream ${a} sending:`,an),me.send(an))},oo:()=>me.close()}),Qt=(an,fr,ei)=>{an.listen(fr,pr=>{try{ei(pr)}catch(xs){setTimeout(()=>{throw xs},0)}})};return Qt(me,Va.EventType.OPEN,()=>{ht||Tt(qo,`RPC '${e}' stream ${a} transport opened.`)}),Qt(me,Va.EventType.CLOSE,()=>{ht||(ht=!0,Tt(qo,`RPC '${e}' stream ${a} transport closed`),kt.wo())}),Qt(me,Va.EventType.ERROR,an=>{ht||(ht=!0,Nr(qo,`RPC '${e}' stream ${a} transport errored:`,an),kt.wo(new gt(Ke.UNAVAILABLE,"The operation could not be completed")))}),Qt(me,Va.EventType.MESSAGE,an=>{var fr;if(!ht){const ei=an.data[0];mn(!!ei);const pr=ei,xs=pr.error||(null===(fr=pr[0])||void 0===fr?void 0:fr.error);if(xs){Tt(qo,`RPC '${e}' stream ${a} received error:`,xs);const us=xs.status;let Xi=function(Ql){const _0=$e[Ql];if(void 0!==_0)return un(_0)}(us),aa=xs.message;void 0===Xi&&(Xi=Ke.INTERNAL,aa="Unknown error status: "+us+" with message "+xs.message),ht=!0,kt.wo(new gt(Xi,aa)),me.close()}else Tt(qo,`RPC '${e}' stream ${a} received:`,ei),kt._o(ei)}}),Qt(b,rs.STAT_EVENT,an=>{an.stat===Ho.PROXY?Tt(qo,`RPC '${e}' stream ${a} detected buffering proxy`):an.stat===Ho.NOPROXY&&Tt(qo,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{kt.fo()},0),kt}}function Kf(){return typeof window<"u"?window:null}function Dg(){return typeof document<"u"?document:null}function qf(r){return new ev(r,!0)}class by{constructor(e,t,s=1e3,a=1.5,l=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&Tt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class yv{constructor(e,t,s,a,l,p,b,k){this.ii=e,this.$o=s,this.Oo=a,this.connection=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=b,this.listener=k,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new by(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Le.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Le.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,Le.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===Ke.RESOURCE_EXHAUSTED?(fs(t.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===Ke.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new gt(Ke.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,Le.Z)(function*(){e.state=0,e.start()}))}tu(e){return Tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uE extends yv{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.serializer=l}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function J0(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(k=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===k?1:"REMOVE"===k?2:"CURRENT"===k?3:"RESET"===k?4:Jt(),a=e.targetChange.targetIds||[],l=function(k,$){return k.useProto3Json?(mn(void 0===$||"string"==typeof $),gs.fromBase64String($||"")):(mn(void 0===$||$ instanceof Uint8Array),gs.fromUint8Array($||new Uint8Array))}(r,e.targetChange.resumeToken),p=e.targetChange.cause,b=p&&function(k){const $=void 0===k.code?Ke.UNKNOWN:un(k.code);return new gt($,k.message||"")}(p);t=new fh(s,a,l,b||null)}else if("documentChange"in e){const s=e.documentChange,a=du(r,s.document.name),l=Zs(s.document.updateTime),p=s.document.createTime?Zs(s.document.createTime):Kt.min(),b=new Ri({mapValue:{fields:s.document.fields}}),k=kr.newFoundDocument(a,l,p,b);t=new Rl(s.targetIds||[],s.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const s=e.documentDelete,a=du(r,s.document),l=s.readTime?Zs(s.readTime):Kt.min(),p=kr.newNoDocument(a,l);t=new Rl([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=du(r,s.document);t=new Rl([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Jt();{const s=e.filter,{count:a=0,unchangedNames:l}=s,p=new Ie(a,l);t=new hd(s.targetId,p)}}var k;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return Kt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Kt.min():l.readTime?Zs(l.readTime):Kt.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=Nu(this.serializer),t.addTarget=function(a,l){let p;const b=l.target;if(p=nd(b)?{documents:bf(a,b)}:{query:yh(a,b)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){p.resumeToken=jm(a,l.resumeToken);const k=Yp(a,l.expectedCount);null!==k&&(p.expectedCount=k)}else if(l.snapshotVersion.compareTo(Kt.min())>0){p.readTime=wc(a,l.snapshotVersion.toTimestamp());const k=Yp(a,l.expectedCount);null!==k&&(p.expectedCount=k)}return p}(this.serializer,e);const s=function Qm(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=Nu(this.serializer),t.removeTarget=e,this.Wo(t)}}class lE extends yv{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function ku(r,e){return r&&r.length>0?(mn(void 0!==e),r.map(t=>function(s,a){let l=Zs(s.updateTime?s.updateTime:a);return l.isEqual(Kt.min())&&(l=Zs(a)),new Ko(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Zs(e.commitTime);return this.listener.cu(s,t)}return mn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Nu(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>fd(this.serializer,s))};this.Wo(t)}}class cE extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new gt(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Io(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new gt(Ke.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.vo(e,t,s,l,p,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new gt(Ke.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class hE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(fs(t),this.mu=!1):Tt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Ll{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(b=>{s.enqueueAndForget((0,Le.Z)(function*(){var k;Fl(p)&&(Tt("RemoteStore","Restarting streams for network reachability change."),yield(k=(0,Le.Z)(function*($){const Y=$t($);Y.vu.add(4),yield Mc(Y),Y.bu.set("Unknown"),Y.vu.delete(4),yield Rc(Y)}),function($){return k.apply(this,arguments)})(p))}))}),this.bu=new hE(s,a)}}function Rc(r){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,Le.Z)(function*(r){if(Fl(r))for(const e of r.Ru)yield e(!0)}),Tg.apply(this,arguments)}function Mc(r){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,Le.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),Oh.apply(this,arguments)}function kh(r,e){const t=$t(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Cg(t)?Zf(t):Vl(t).Ko()&&bg(t,e))}function xc(r,e){const t=$t(r),s=Vl(t);t.Au.delete(e),s.Ko()&&nl(t,e),0===t.Au.size&&(s.Ko()?s.jo():Fl(t)&&t.bu.set("Unknown"))}function bg(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Kt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(r).su(e)}function nl(r,e){r.Vu.qt(e),Vl(r).iu(e)}function Zf(r){r.Vu=new Ec({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),Vl(r).start(),r.bu.gu()}function Cg(r){return Fl(r)&&!Vl(r).Uo()&&r.Au.size>0}function Fl(r){return 0===$t(r).vu.size}function Sg(r){r.Vu=void 0}function _v(r){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,Le.Z)(function*(r){r.Au.forEach((e,t)=>{bg(r,e)})}),Ag.apply(this,arguments)}function Qf(r,e){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,Le.Z)(function*(r,e){Sg(r),Cg(r)?(r.bu.Iu(e),Zf(r)):r.bu.set("Unknown")}),Ul.apply(this,arguments)}function Rg(r,e,t){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,Le.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof fh&&2===e.state&&e.cause)try{yield(s=(0,Le.Z)(function*(a,l){const p=l.cause;for(const b of l.targetIds)a.Au.has(b)&&(yield a.remoteSyncer.rejectListen(b,p),a.Au.delete(b),a.Vu.removeTarget(b))}),function(a,l){return s.apply(this,arguments)})(r,e)}catch(s){Tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Id(r,s)}else if(e instanceof Rl?r.Vu.Ht(e):e instanceof hd?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(Kt.min()))try{const s=yield fv(r.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.Vu.ce(l);return p.targetChanges.forEach((b,k)=>{if(b.resumeToken.approximateByteSize()>0){const $=a.Au.get(k);$&&a.Au.set(k,$.withResumeToken(b.resumeToken,l))}}),p.targetMismatches.forEach((b,k)=>{const $=a.Au.get(b);if(!$)return;a.Au.set(b,$.withResumeToken(gs.EMPTY_BYTE_STRING,$.snapshotVersion)),nl(a,b);const Y=new hu($.target,b,k,$.sequenceNumber);bg(a,Y)}),a.remoteSyncer.applyRemoteEvent(p)}(r,t))}catch(s){Tt("RemoteStore","Failed to raise snapshot:",s),yield Id(r,s)}var s}),Bl.apply(this,arguments)}function Id(r,e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,Le.Z)(function*(r,e,t){if(!is(e))throw e;r.vu.add(1),yield Mc(r),r.bu.set("Offline"),t||(t=()=>fv(r.localStore)),r.asyncQueue.enqueueRetryable((0,Le.Z)(function*(){Tt("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield Rc(r)}))}),Dd.apply(this,arguments)}function Mg(r,e){return e().catch(t=>Id(r,t,e))}function Pc(r){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,Le.Z)(function*(r){const e=$t(r),t=rl(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;xg(e);)try{const a=yield Ey(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Sy(e,a)}catch(a){yield Id(e,a)}Yf(e)&&Ay(e)}),Lh.apply(this,arguments)}function xg(r){return Fl(r)&&r.Eu.length<10}function Sy(r,e){r.Eu.push(e);const t=rl(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function Yf(r){return Fl(r)&&!rl(r).Uo()&&r.Eu.length>0}function Ay(r){rl(r).start()}function fE(r){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,Le.Z)(function*(r){rl(r).hu()}),Pg.apply(this,arguments)}function Ry(r){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,Le.Z)(function*(r){const e=rl(r);for(const t of r.Eu)e.uu(t.mutations)}),Ng.apply(this,arguments)}function My(r,e,t){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,Le.Z)(function*(r,e,t){const s=r.Eu.shift(),a=E.from(s,e,t);yield Mg(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield Pc(r)}),Xf.apply(this,arguments)}function vv(r,e){return fa.apply(this,arguments)}function fa(){return fa=(0,Le.Z)(function*(r,e){var t;e&&rl(r).ou&&(yield(t=(0,Le.Z)(function*(s,a){if(Vt(l=a.code)&&l!==Ke.ABORTED){const p=s.Eu.shift();rl(s).Qo(),yield Mg(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield Pc(s)}var l}),function(s,a){return t.apply(this,arguments)})(r,e)),Yf(r)&&Ay(r)}),fa.apply(this,arguments)}function Og(r,e){return kg.apply(this,arguments)}function kg(){return kg=(0,Le.Z)(function*(r,e){const t=$t(r);t.asyncQueue.verifyOperationInProgress(),Tt("RemoteStore","RemoteStore received new credentials");const s=Fl(t);t.vu.add(3),yield Mc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Rc(t)}),kg.apply(this,arguments)}function xy(r,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,Le.Z)(function*(r,e){const t=$t(r);e?(t.vu.delete(2),yield Rc(t)):e||(t.vu.add(2),yield Mc(t),t.bu.set("Unknown"))}),Lg.apply(this,arguments)}function Vl(r){return r.Su||(r.Su=function(e,t,s){const a=$t(e);return a.fu(),new uE(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:_v.bind(null,r),ao:Qf.bind(null,r),nu:Rg.bind(null,r)}),r.Ru.push(function(){var e=(0,Le.Z)(function*(t){t?(r.Su.Qo(),Cg(r)?Zf(r):r.bu.set("Unknown")):(yield r.Su.stop(),Sg(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function rl(r){return r.Du||(r.Du=function(e,t,s){const a=$t(e);return a.fu(),new lE(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:fE.bind(null,r),ao:vv.bind(null,r),au:Ry.bind(null,r),cu:My.bind(null,r)}),r.Ru.push(function(){var e=(0,Le.Z)(function*(t){t?(r.Du.Qo(),yield Pc(r)):(yield r.Du.stop(),r.Eu.length>0&&(Tt("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class Fg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,b=new Fg(e,t,p,a,l);return b.start(s),b}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gt(Ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Td(r,e){if(fs("AsyncQueue",`${e}: ${r}`),is(r))return new gt(Ke.UNAVAILABLE,`${e}: ${r}`);throw r}class bd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Nt.comparator(t.key,s.key):(t,s)=>Nt.comparator(t.key,s.key),this.keyedMap=Su(),this.sortedSet=new si(this.comparator)}static emptySet(e){return new bd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new bd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Ug{constructor(){this.Cu=new si(Nt.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Jt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Cd{constructor(e,t,s,a,l,p,b,k,$){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=b,this.excludesMetadataChanges=k,this.hasCachedResults=$}static fromInitialDocuments(e,t,s,a,l){const p=[];return t.forEach(b=>{p.push({type:0,doc:b})}),new Cd(e,t,bd.emptySet(t),p,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Py{constructor(){this.Nu=void 0,this.listeners=[]}}class Ev{constructor(){this.queries=new Fa(e=>oh(e),uu),this.onlineState="Unknown",this.ku=new Set}}function Bg(r,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,Le.Z)(function*(r,e){const t=$t(r),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new Py),a)try{l.Nu=yield t.onListen(s)}catch(p){const b=Td(p,`Initialization of query '${lu(e.query)}' failed`);return void e.onError(b)}t.queries.set(s,l),l.listeners.push(e),e.Mu(t.onlineState),l.Nu&&e.$u(l.Nu)&&jg(t)}),Jf.apply(this,arguments)}function ep(r,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,Le.Z)(function*(r,e){const t=$t(r),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Vg.apply(this,arguments)}function Uu(r,e){const t=$t(r);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const b of p.listeners)b.$u(a)&&(s=!0);p.Nu=a}}s&&jg(t)}function $g(r,e,t){const s=$t(r),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function jg(r){r.ku.forEach(e=>{e.next()})}class Hg{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Cd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class pE{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class zg{constructor(e){this.serializer=e}rr(e){return du(this.serializer,e)}ur(e){return e.metadata.exists?Km(this.serializer,e.document,!1):kr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Zs(e)}}class wv{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ny(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=mr.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new zg(this.serializer);for(const a of e)if(a.metadata.queries){const l=s.rr(a.metadata.name);for(const p of a.metadata.queries){const b=(t.get(p)||cr()).add(l);t.set(p,b)}}return t}complete(){var e=this;return(0,Le.Z)(function*(){const t=yield function wy(r,e,t,s){return Ph.apply(this,arguments)}(e.localStore,new zg(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield oE(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Ny(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Oy{constructor(e){this.key=e}}class tp{constructor(e){this.key=e}}class ky{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=cr(),this.mutatedKeys=cr(),this.tc=mc(e),this.ec=new bd(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Ug,a=t?t.ec:this.ec;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,b=!1;const k="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,$="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((Y,me)=>{const Ze=a.get(Y),ht=pc(this.query,me)?me:null,kt=!!Ze&&this.mutatedKeys.has(Ze.key),Qt=!!ht&&(ht.hasLocalMutations||this.mutatedKeys.has(ht.key)&&ht.hasCommittedMutations);let an=!1;Ze&&ht?Ze.data.isEqual(ht.data)?kt!==Qt&&(s.track({type:3,doc:ht}),an=!0):this.rc(Ze,ht)||(s.track({type:2,doc:ht}),an=!0,(k&&this.tc(ht,k)>0||$&&this.tc(ht,$)<0)&&(b=!0)):!Ze&&ht?(s.track({type:0,doc:ht}),an=!0):Ze&&!ht&&(s.track({type:1,doc:Ze}),an=!0,(k||$)&&(b=!0)),an&&(ht?(p=p.add(ht),l=Qt?l.add(Y):l.delete(Y)):(p=p.delete(Y),l=l.delete(Y)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const Y="F"===this.query.limitType?p.last():p.first();p=p.delete(Y.key),l=l.delete(Y.key),s.track({type:1,doc:Y})}return{ec:p,ic:s,zi:b,mutatedKeys:l}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort(($,Y)=>function(me,Ze){const ht=kt=>{switch(kt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jt()}};return ht(me)-ht(Ze)}($.type,Y.type)||this.tc($.doc,Y.doc)),this.oc(s);const p=t?this.uc():[],b=0===this.Zu.size&&this.current?1:0,k=b!==this.Xu;return this.Xu=b,0!==l.length||k?{snapshot:new Cd(this.query,e.ec,a,l,e.mutatedKeys,0===b,k,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:p}:{cc:p}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ug,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=cr(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new tp(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Oy(s))}),t}hc(e){this.Yu=e.ir,this.Zu=cr();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Cd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Iv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class np{constructor(e){this.key=e,this.fc=!1}}class Gg{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.dc={},this.wc=new Fa(b=>oh(b),uu),this._c=new Map,this.mc=new Set,this.gc=new si(Nt.comparator),this.yc=new Map,this.Ic=new py,this.Tc={},this.Ec=new Map,this.Ac=Ol.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function rp(r,e){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,Le.Z)(function*(r,e){const t=il(r);let s,a;const l=t.wc.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.lc();else{const p=yield tl(t.localStore,Ao(e)),b=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Fh(t,e,s,"current"===b,p.resumeToken),t.isPrimaryClient&&kh(t.remoteStore,p)}return a}),Ly.apply(this,arguments)}function Fh(r,e,t,s,a){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,Le.Z)(function*(r,e,t,s,a){r.Rc=(me,Ze,ht)=>{return(kt=(0,Le.Z)(function*(Qt,an,fr,ei){let pr=an.view.sc(fr);pr.zi&&(pr=yield Hf(Qt.localStore,an.query,!1).then(({documents:Xi})=>an.view.sc(Xi,pr)));const xs=ei&&ei.targetChanges.get(an.targetId),us=an.view.applyChanges(pr,Qt.isPrimaryClient,xs);return qg(Qt,an.targetId,us.cc),us.snapshot}),function(Qt,an,fr,ei){return kt.apply(this,arguments)})(r,me,Ze,ht);var kt};const l=yield Hf(r.localStore,e,!0),p=new ky(e,l.ir),b=p.sc(l.documents),k=Al.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),$=p.applyChanges(b,r.isPrimaryClient,k);qg(r,t,$.cc);const Y=new Iv(e,t,p);return r.wc.set(e,Y),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),$.snapshot}),Fy.apply(this,arguments)}function Uy(r,e){return ip.apply(this,arguments)}function ip(){return ip=(0,Le.Z)(function*(r,e){const t=$t(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(l=>!uu(l,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield oa(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),xc(t.remoteStore,s.targetId),Sd(t,s.targetId)}).catch(tn))):(Sd(t,s.targetId),yield oa(t.localStore,s.targetId,!0))}),ip.apply(this,arguments)}function sp(){return sp=(0,Le.Z)(function*(r,e,t){const s=Md(r);try{const a=yield function(l,p){const b=$t(l),k=ci.now(),$=p.reduce((Ze,ht)=>Ze.add(ht.key),cr());let Y,me;return b.persistence.runTransaction("Locally write mutations","readwrite",Ze=>{let ht=os(),kt=cr();return b.Zi.getEntries(Ze,$).next(Qt=>{ht=Qt,ht.forEach((an,fr)=>{fr.isValidDocument()||(kt=kt.add(an))})}).next(()=>b.localDocuments.getOverlayedDocuments(Ze,ht)).next(Qt=>{Y=Qt;const an=[];for(const fr of p){const ei=ld(fr,Y.get(fr.key).overlayedDocument);null!=ei&&an.push(new Pu(fr.key,ei,na(ei.value.mapValue),Fi.exists(!0)))}return b.mutationQueue.addMutationBatch(Ze,k,an,p)}).next(Qt=>{me=Qt;const an=Qt.applyToLocalDocumentSet(Y,kt);return b.documentOverlayCache.saveOverlays(Ze,Qt.batchId,an)})}).then(()=>({batchId:me.batchId,changes:mf(Y)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,b){let k=l.Tc[l.currentUser.toKey()];k||(k=new si(Zn)),k=k.insert(p,b),l.Tc[l.currentUser.toKey()]=k}(s,a.batchId,t),yield Bu(s,a.changes),yield Pc(s.remoteStore)}catch(a){const l=Td(a,"Failed to persist write");t.reject(l)}}),sp.apply(this,arguments)}function op(r,e){return gu.apply(this,arguments)}function gu(){return gu=(0,Le.Z)(function*(r,e){const t=$t(r);try{const s=yield _d(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.yc.get(l);p&&(mn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.fc=!0:a.modifiedDocuments.size>0?mn(p.fc):a.removedDocuments.size>0&&(mn(p.fc),p.fc=!1))}),yield Bu(t,s,e)}catch(s){yield tn(s)}}),gu.apply(this,arguments)}function Uh(r,e,t){const s=$t(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((l,p)=>{const b=p.view.Mu(e);b.snapshot&&a.push(b.snapshot)}),function(l,p){const b=$t(l);b.onlineState=p;let k=!1;b.queries.forEach(($,Y)=>{for(const me of Y.listeners)me.Mu(p)&&(k=!0)}),k&&jg(b)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function ap(r,e,t){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,Le.Z)(function*(r,e,t){const s=$t(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),l=a&&a.key;if(l){let p=new si(Nt.comparator);p=p.insert(l,kr.newNoDocument(l,Kt.min()));const b=cr().add(l),k=new Ju(Kt.min(),new Map,new si(Zn),p,b);yield op(s,k),s.gc=s.gc.remove(l),s.yc.delete(e),Zg(s)}else yield oa(s.localStore,e,!1).then(()=>Sd(s,e,t)).catch(tn)}),Nc.apply(this,arguments)}function Dv(r,e){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,Le.Z)(function*(r,e){const t=$t(r),s=e.batch.batchId;try{const a=yield hv(t.localStore,e);$y(t,s,null),Kg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Bu(t,a)}catch(a){yield tn(a)}}),Bh.apply(this,arguments)}function Vy(r,e,t){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,Le.Z)(function*(r,e,t){const s=$t(r);try{const a=yield function(l,p){const b=$t(l);return b.persistence.runTransaction("Reject batch","readwrite-primary",k=>{let $;return b.mutationQueue.lookupMutationBatch(k,p).next(Y=>(mn(null!==Y),$=Y.keys(),b.mutationQueue.removeMutationBatch(k,Y))).next(()=>b.mutationQueue.performConsistencyCheck(k)).next(()=>b.documentOverlayCache.removeOverlaysForBatchId(k,$,p)).next(()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(k,$)).next(()=>b.localDocuments.getDocuments(k,$))})}(s.localStore,e);$y(s,e,t),Kg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Bu(s,a)}catch(a){yield tn(a)}}),Wg.apply(this,arguments)}function Oc(){return Oc=(0,Le.Z)(function*(r,e){const t=$t(r);Fl(t.remoteStore)||Tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=$t(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",b=>p.mutationQueue.getHighestUnacknowledgedBatchId(b))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=Td(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Oc.apply(this,arguments)}function Kg(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function $y(r,e,t){const s=$t(r);let a=s.Tc[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Sd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||bv(r,s)})}function bv(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(xc(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),Zg(r))}function qg(r,e,t){for(const s of t)s instanceof Oy?(r.Ic.addReference(s.key,e),Cv(r,s)):s instanceof tp?(Tt("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||bv(r,s.key)):Jt()}function Cv(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||(Tt("SyncEngine","New document in limbo: "+t),r.mc.add(s),Zg(r))}function Zg(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new Nt(mr.fromString(e)),s=r.Ac.next();r.yc.set(s,new np(t)),r.gc=r.gc.insert(t,s),kh(r.remoteStore,new hu(Ao(Zu(t.path)),s,"TargetPurposeLimboResolution",So.ct))}}function Bu(r,e,t){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,Le.Z)(function*(r,e,t){const s=$t(r),a=[],l=[],p=[];var b;s.wc.isEmpty()||(s.wc.forEach((b,k)=>{p.push(s.Rc(k,e,t).then($=>{if(($||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(k.targetId,$?.fromCache?"not-current":"current"),$){a.push($);const Y=gg.Li(k.targetId,$);l.push(Y)}}))}),yield Promise.all(p),s.dc.nu(a),yield(b=(0,Le.Z)(function*(k,$){const Y=$t(k);try{yield Y.persistence.runTransaction("notifyLocalViewChanges","readwrite",me=>Me.forEach($,Ze=>Me.forEach(Ze.Fi,ht=>Y.persistence.referenceDelegate.addReference(me,Ze.targetId,ht)).next(()=>Me.forEach(Ze.Bi,ht=>Y.persistence.referenceDelegate.removeReference(me,Ze.targetId,ht)))))}catch(me){if(!is(me))throw me;Tt("LocalStore","Failed to update sequence numbers: "+me)}for(const me of $){const Ze=me.targetId;if(!me.fromCache){const ht=Y.Ji.get(Ze),Qt=ht.withLastLimboFreeSnapshotVersion(ht.snapshotVersion);Y.Ji=Y.Ji.insert(Ze,Qt)}}}),function(k,$){return b.apply(this,arguments)})(s.localStore,l))}),Vh.apply(this,arguments)}function Sv(r,e){return $h.apply(this,arguments)}function $h(){return $h=(0,Le.Z)(function*(r,e){const t=$t(r);if(!t.currentUser.isEqual(e)){Tt("SyncEngine","User change. New user:",e.toKey());const s=yield dv(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(p=>{p.forEach(b=>{b.reject(new gt(Ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Bu(t,s.er)}var a}),$h.apply(this,arguments)}function Av(r,e){const t=$t(r),s=t.yc.get(e);if(s&&s.fc)return cr().add(s.key);{let a=cr();const l=t._c.get(e);if(!l)return a;for(const p of l){const b=t.wc.get(p);a=a.unionWith(b.view.nc)}return a}}function Rv(r,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,Le.Z)(function*(r,e){const t=$t(r),s=yield Hf(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&qg(t,e.targetId,a.cc),a}),Qg.apply(this,arguments)}function Mv(r,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,Le.Z)(function*(r,e){const t=$t(r);return Fu(t.localStore,e).then(s=>Bu(t,s))}),Yg.apply(this,arguments)}function xv(r,e,t,s){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,Le.Z)(function*(r,e,t,s){const a=$t(r),l=yield function(p,b){const k=$t(p),$=$t(k.mutationQueue);return k.persistence.runTransaction("Lookup mutation documents","readonly",Y=>$.Sn(Y,b).next(me=>me?k.localDocuments.getDocuments(Y,me):Me.resolve(null)))}(a.localStore,e);var b;null!==l?("pending"===t?yield Pc(a.remoteStore):"acknowledged"===t||"rejected"===t?($y(a,e,s||null),Kg(a,e),b=e,$t($t(a.localStore).mutationQueue).Cn(b)):Jt(),yield Bu(a,l)):Tt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ad.apply(this,arguments)}function jy(){return jy=(0,Le.Z)(function*(r,e){const t=$t(r);if(il(t),Md(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Rd(t,s.toArray());t.vc=!0,yield xy(t.remoteStore,!0);for(const l of a)kh(t.remoteStore,l)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(Sd(t,p),oa(t.localStore,p,!0))),xc(t.remoteStore,p)}),yield a,yield Rd(t,s),function(l){const p=$t(l);p.yc.forEach((b,k)=>{xc(p.remoteStore,k)}),p.Ic.Ts(),p.yc=new Map,p.gc=new si(Nt.comparator)}(t),t.vc=!1,yield xy(t.remoteStore,!1)}}),jy.apply(this,arguments)}function Rd(r,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,Le.Z)(function*(r,e,t){const s=$t(r),a=[],l=[];for(const p of e){let b;const k=s._c.get(p);if(k&&0!==k.length){b=yield tl(s.localStore,Ao(k[0]));for(const $ of k){const Y=s.wc.get($),me=yield Rv(s,Y);me.snapshot&&l.push(me.snapshot)}}else{const $=yield zf(s.localStore,p);b=yield tl(s.localStore,$),yield Fh(s,Hy($),p,!1,b.resumeToken)}a.push(b)}return s.dc.nu(l),a}),Xg.apply(this,arguments)}function Hy(r){return ih(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Jg(r){const e=$t(r);return $t($t(e.localStore).persistence).$i()}function Pv(r,e,t,s){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,Le.Z)(function*(r,e,t,s){const a=$t(r);if(a.vc)return void Tt("SyncEngine","Ignoring unexpected query state notification.");const l=a._c.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const p=yield Fu(a.localStore,gc(l[0])),b=Ju.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,gs.EMPTY_BYTE_STRING);yield Bu(a,p,b);break}case"rejected":yield oa(a.localStore,e,!0),Sd(a,e,s);break;default:Jt()}}),Qa.apply(this,arguments)}function jh(r,e,t){return xo.apply(this,arguments)}function xo(){return xo=(0,Le.Z)(function*(r,e,t){const s=il(r);if(s.vc){for(const a of e){if(s._c.has(a)){Tt("SyncEngine","Adding an already active target "+a);continue}const l=yield zf(s.localStore,a),p=yield tl(s.localStore,l);yield Fh(s,Hy(l),p.targetId,!1,p.resumeToken),kh(s.remoteStore,p)}for(const a of t)s._c.has(a)&&(yield oa(s.localStore,a,!1).then(()=>{xc(s.remoteStore,a),Sd(s,a)}).catch(tn))}}),xo.apply(this,arguments)}function il(r){const e=$t(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=op.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Av.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ap.bind(null,e),e.dc.nu=Uu.bind(null,e.eventManager),e.dc.Pc=$g.bind(null,e.eventManager),e}function Md(r){const e=$t(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vy.bind(null,e),e}class Lc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Le.Z)(function*(){t.serializer=qf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $f(this.persistence,new mg,e.initialUser,this.serializer)}createPersistence(e){return new hg(Sc.zs,this.serializer)}createSharedClientState(e){return new Dy}terminate(){var e=this;return(0,Le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $l extends Lc{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Le.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Md(s.Vc.syncEngine),yield Pc(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return $f(this.persistence,new mg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new ug(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new _o(t,this.persistence);return new xa(e.asyncQueue,s)}createPersistence(e){const t=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?sa.withCacheSize(this.cacheSizeBytes):sa.DEFAULT;return new pg(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Kf(),Dg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Dy}}class Fc extends $l{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Le.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof vg&&(s.sharedClientState.syncEngine={jr:xv.bind(null,a),zr:Pv.bind(null,a),Wr:jh.bind(null,a),$i:Jg.bind(null,a),Qr:Mv.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var l=(0,Le.Z)(function*(p){yield function kc(r,e){return jy.apply(this,arguments)}(s.Vc.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Kf();if(!vg.D(t))throw new gt(Ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vg(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class mu{initialize(e,t){var s=this;return(0,Le.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>Uh(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Sv.bind(null,s.syncEngine),yield xy(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ev}createDatastore(e){const t=qf(e.databaseInfo.databaseId),s=new mv(e.databaseInfo);return new cE(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=b=>Uh(this.syncEngine,b,0),p=Eg.D()?new Eg:new gv,new Ll(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,b,k,$){const Y=new Gg(s,a,l,p,b,k);return $&&(Y.vc=!0),Y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Le.Z)(function*(t){const s=$t(t);Tt("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield Mc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Uc(r,e=10240){let t=0;return{read:()=>(0,Le.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class sl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Pd{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Tr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Le.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Le.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Le.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const l=yield e.$c(a);return new pE(JSON.parse(l),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Le.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,Le.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Le.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Nd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new gt(Ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,Le.Z)(function*(l,p){const b=$t(l),k=Nu(b.serializer)+"/documents",$={documents:p.map(ht=>mh(b.serializer,ht))},Y=yield b.vo("BatchGetDocuments",k,$,p.length),me=new Map;Y.forEach(ht=>{const kt=function X0(r,e){return"found"in e?function(t,s){mn(!!s.found);const a=du(t,s.found.name),l=Zs(s.found.updateTime),p=s.found.createTime?Zs(s.found.createTime):Kt.min(),b=new Ri({mapValue:{fields:s.found.fields}});return kr.newFoundDocument(a,l,p,b)}(r,e):"missing"in e?function(t,s){mn(!!s.missing),mn(!!s.readTime);const a=du(t,s.missing),l=Zs(s.readTime);return kr.newNoDocument(a,l)}(r,e):Jt()}(b.serializer,ht);me.set(kt.key.toString(),kt)});const Ze=[];return p.forEach(ht=>{const kt=me.get(ht.toString());mn(!!kt),Ze.push(kt)}),Ze}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new m(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=Nt.fromPath(a);e.mutations.push(new d(l,e.precondition(l)))}),yield(s=(0,Le.Z)(function*(a,l){const p=$t(a),b=Nu(p.serializer)+"/documents",k={writes:l.map($=>fd(p.serializer,$))};yield p.Io("Commit",b,k)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Jt();t=Kt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new gt(Ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Kt.min())?Fi.exists(!1):Fi.updateTime(t):Fi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Kt.min()))throw new gt(Ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fi.updateTime(t)}return Fi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Od{constructor(e,t,s,a,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=l,this.Bc=s.maxAttempts,this.qo=new by(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Le.Z)(function*(){const t=new Nd(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Uc(l)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Du(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Vt(t)}return!1}}class zy{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=gi.UNAUTHENTICATED,this.clientId=nu.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,Le.Z)(function*(b){Tt("FirestoreClient","Received user=",b.uid),yield l.authCredentialListener(b),l.user=b});return function(b){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(Tt("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,Le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gt(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Le.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Td(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Hh(r,e){return up.apply(this,arguments)}function up(){return up=(0,Le.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),Tt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,Le.Z)(function*(l){s.isEqual(l)||(yield dv(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),up.apply(this,arguments)}function lp(r,e){return cp.apply(this,arguments)}function cp(){return cp=(0,Le.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield dp(r);Tt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>Og(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,l)=>Og(e.remoteStore,l)),r._onlineComponents=e}),cp.apply(this,arguments)}function em(r){return"FirebaseError"===r.name?r.code===Ke.FAILED_PRECONDITION||r.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function dp(r){return hp.apply(this,arguments)}function hp(){return hp=(0,Le.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Tt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Hh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!em(t))throw t;Nr("Error using user provided cache. Falling back to memory cache: "+t),yield Hh(r,new Lc)}}else Tt("FirestoreClient","Using default OfflineComponentProvider"),yield Hh(r,new Lc);return r._offlineComponents}),hp.apply(this,arguments)}function zh(r){return tm.apply(this,arguments)}function tm(){return tm=(0,Le.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Tt("FirestoreClient","Using user provided OnlineComponentProvider"),yield lp(r,r._uninitializedComponentsProvider._online)):(Tt("FirestoreClient","Using default OnlineComponentProvider"),yield lp(r,new mu))),r._onlineComponents}),tm.apply(this,arguments)}function Gy(r){return dp(r).then(e=>e.persistence)}function Gh(r){return dp(r).then(e=>e.localStore)}function Wy(r){return zh(r).then(e=>e.remoteStore)}function fp(r){return zh(r).then(e=>e.syncEngine)}function jl(r){return nm.apply(this,arguments)}function nm(){return nm=(0,Le.Z)(function*(r){const e=yield zh(r),t=e.eventManager;return t.onListen=rp.bind(null,e.syncEngine),t.onUnlisten=Uy.bind(null,e.syncEngine),t}),nm.apply(this,arguments)}function Ky(r,e,t={}){const s=new Tr;return r.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return function(a,l,p,b,k){const $=new sl({next:me=>{l.enqueueAndForget(()=>ep(a,Y));const Ze=me.docs.has(p);!Ze&&me.fromCache?k.reject(new gt(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):Ze&&me.fromCache&&b&&"server"===b.source?k.reject(new gt(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):k.resolve(me)},error:me=>k.reject(me)}),Y=new Hg(Zu(p.path),$,{includeMetadataChanges:!0,Ku:!0});return Bg(a,Y)}(yield jl(r),r.asyncQueue,e,t,s)})),s.promise}function Wh(r,e,t={}){const s=new Tr;return r.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return function(a,l,p,b,k){const $=new sl({next:me=>{l.enqueueAndForget(()=>ep(a,Y)),me.fromCache&&"server"===b.source?k.reject(new gt(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):k.resolve(me)},error:me=>k.reject(me)}),Y=new Hg(p,$,{includeMetadataChanges:!0,Ku:!0});return Bg(a,Y)}(yield jl(r),r.asyncQueue,e,t,s)})),s.promise}function sm(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const _p=new Map;function vp(r,e,t){if(!t)throw new gt(Ke.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Yy(r,e,t,s){if(!0===e&&!0===s)throw new gt(Ke.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function om(r){if(!Nt.isDocumentKey(r))throw new gt(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function am(r){if(Nt.isDocumentKey(r))throw new gt(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Kh(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Jt()}function Xr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new gt(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kh(r);throw new gt(Ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Xy(r,e){if(e<=0)throw new gt(Ke.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class um{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new gt(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gt(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=sm(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new gt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new gt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new gt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new um({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new gt(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gt(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new um(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new la;switch(t.type){case"firstParty":return new cl(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new gt(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_p.get(e);t&&(Tt("ComponentProvider","Removing Datastore"),_p.delete(e),t.terminate())}(this),Promise.resolve()}}class Ki{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ki(this.firestore,e,this._key)}}class Po{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Po(this.firestore,e,this._query)}}class yu extends Po{constructor(e,t,s){super(e,t,Zu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ki(this.firestore,null,new Nt(e))}withConverter(e){return new yu(this.firestore,e,this._path)}}function lm(r,e,...t){if(r=(0,Ne.m9)(r),vp("collection","path",e),r instanceof kd){const s=mr.fromString(e,...t);return am(s),new yu(r,null,s)}{if(!(r instanceof Ki||r instanceof yu))throw new gt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(mr.fromString(e,...t));return am(s),new yu(r.firestore,null,s)}}function qh(r,e,...t){if(r=(0,Ne.m9)(r),1===arguments.length&&(e=nu.A()),vp("doc","path",e),r instanceof kd){const s=mr.fromString(e,...t);return om(s),new Ki(r,null,new Nt(s))}{if(!(r instanceof Ki||r instanceof yu))throw new gt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(mr.fromString(e,...t));return om(s),new Ki(r.firestore,r instanceof yu?r.converter:null,new Nt(s))}}function cm(r,e){return r=(0,Ne.m9)(r),e=(0,Ne.m9)(e),(r instanceof Ki||r instanceof yu)&&(e instanceof Ki||e instanceof yu)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function wp(r,e){return r=(0,Ne.m9)(r),e=(0,Ne.m9)(e),r instanceof Po&&e instanceof Po&&r.firestore===e.firestore&&uu(r._query,e._query)&&r.converter===e.converter}class e_{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new by(this,"async_queue_retry"),this.Xc=()=>{const t=Dg();t&&Tt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Dg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Dg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Tr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Le.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!is(t))throw t;Tt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,fs("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=Fg.createAndSchedule(this,e,t,s,l=>this.na(l));return this.zc.push(a),a}Zc(){this.Wc&&Jt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Le.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function t_(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class Nv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class as extends kd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new e_,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||n_(this),this._firestoreClient.terminate()}}function Vs(r){return r._firestoreClient||n_(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function n_(r){var e,t,s;const a=r._freezeSettings(),l=(b=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Oa(r._databaseId,b,r._persistenceKey,($=a).host,$.ssl,$.experimentalForceLongPolling,$.experimentalAutoDetectLongPolling,sm($.experimentalLongPollingOptions),$.useFetchStreams));var b,$;r._firestoreClient=new zy(r._authCredentials,r._appCheckCredentials,r._queue,l),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function i_(r,e,t){const s=new Tr;return r.asyncQueue.enqueue((0,Le.Z)(function*(){try{yield Hh(r,t),yield lp(r,e),s.resolve()}catch(a){const l=a;if(!em(l))throw l;Nr("Error enabling indexeddb cache. Falling back to memory cache: "+l),s.reject(l)}})).then(()=>s.promise)}function dm(r){if(r._initialized||r._terminated)throw new gt(Ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xa(gs.fromBase64String(e))}catch(t){throw new gt(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xa(gs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Oo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new gt(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bc{constructor(e){this._methodName=e}}class Ua{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new gt(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new gt(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zn(this._lat,e._lat)||Zn(this._long,e._long)}}const _u=/^__.*__$/;class vu{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Pu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xu(e,this.data,t,this.fieldTransforms)}}class fm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Pu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pm(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jt()}}class Dp{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===l&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Qh(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(pm(this.ca)&&_u.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Uv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||qf(e)}ya(e,t,s,a=!1){return new Dp({ca:e,methodName:t,ga:s,path:Wi.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(r){const e=r._freezeSettings(),t=qf(r._databaseId);return new Uv(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Tp(r,e,t,s,a,l={}){const p=r.ya(l.merge||l.mergeFields?2:0,e,t,a);Bd("Data must be an object, but it was:",p,s);const b=mm(s,p);let k,$;if(l.merge)k=new io(p.fieldMask),$=p.fieldTransforms;else if(l.mergeFields){const Y=[];for(const me of l.mergeFields){const Ze=jc(e,me,t);if(!p.contains(Ze))throw new gt(Ke.INVALID_ARGUMENT,`Field '${Ze}' is specified in your field mask but missing from your input data.`);ym(Y,Ze)||Y.push(Ze)}k=new io(Y),$=p.fieldTransforms.filter(me=>k.covers(me.field))}else k=null,$=p.fieldTransforms;return new vu(new Ri(b),k,$)}class $c extends Bc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $c}}function Fd(r,e,t){return new Dp({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gm extends Bc{_toFieldTransform(e){return new _c(e.path,new Ru)}isEqual(e){return e instanceof gm}}class u_ extends Bc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Fd(this,e,!0),s=this.pa.map(l=>Hl(l,t)),a=new Ta(s);return new _c(e.path,a)}isEqual(e){return this===e}}class Bv extends Bc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Fd(this,e,!0),s=this.pa.map(l=>Hl(l,t)),a=new Yu(s);return new _c(e.path,a)}isEqual(e){return this===e}}class l_ extends Bc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new xu(e.serializer,ra(e.serializer,this.Ia));return new _c(e.path,t)}isEqual(e){return this===e}}function bp(r,e,t,s){const a=r.ya(1,e,t);Bd("Data must be an object, but it was:",a,s);const l=[],p=Ri.empty();da(s,(k,$)=>{const Y=Zh(e,k,t);$=(0,Ne.m9)($);const me=a.da(Y);if($ instanceof $c)l.push(Y);else{const Ze=Hl($,me);null!=Ze&&(l.push(Y),p.set(Y,Ze))}});const b=new io(l);return new fm(p,b,a.fieldTransforms)}function Ud(r,e,t,s,a,l){const p=r.ya(1,e,t),b=[jc(e,s,t)],k=[a];if(l.length%2!=0)throw new gt(Ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ze=0;Ze<l.length;Ze+=2)b.push(jc(e,l[Ze])),k.push(l[Ze+1]);const $=[],Y=Ri.empty();for(let Ze=b.length-1;Ze>=0;--Ze)if(!ym($,b[Ze])){const ht=b[Ze];let kt=k[Ze];kt=(0,Ne.m9)(kt);const Qt=p.da(ht);if(kt instanceof $c)$.push(ht);else{const an=Hl(kt,Qt);null!=an&&($.push(ht),Y.set(ht,an))}}const me=new io($);return new fm(Y,me,p.fieldTransforms)}function c_(r,e,t,s=!1){return Hl(t,r.ya(s?4:3,e))}function Hl(r,e){if(Cp(r=(0,Ne.m9)(r)))return Bd("Unsupported field value:",e,r),mm(r,e);if(r instanceof Bc)return function(t,s){if(!pm(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let b=Hl(p,s.wa(l));null==b&&(b={nullValue:"NULL_VALUE"}),a.push(b),l++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,Ne.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ra(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=ci.fromDate(t);return{timestampValue:wc(s.serializer,a)}}if(t instanceof ci){const a=new ci(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wc(s.serializer,a)}}if(t instanceof Ua)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xa)return{bytesValue:jm(s.serializer,t._byteString)};if(t instanceof Ki){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Df(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Kh(t)}`)}(r,e)}function mm(r,e){const t={};return zu(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(r,(s,a)=>{const l=Hl(a,e.ha(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function Cp(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof ci||r instanceof Ua||r instanceof Xa||r instanceof Ki||r instanceof Bc)}function Bd(r,e,t){if(!Cp(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Kh(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function jc(r,e,t){if((e=(0,Ne.m9)(e))instanceof Oo)return e._internalPath;if("string"==typeof e)return Zh(r,e);throw Qh("Field path arguments must be of type string or ",r,!1,void 0,t)}const d_=new RegExp("[~\\*/\\[\\]]");function Zh(r,e,t){if(e.search(d_)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Oo(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Qh(r,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let b=`Function ${e}() called with invalid data`;t&&(b+=" (via `toFirestore()`)"),b+=". ";let k="";return(l||p)&&(k+=" (found",l&&(k+=` in field ${s}`),p&&(k+=` in document ${a}`),k+=")"),new gt(Ke.INVALID_ARGUMENT,b+r+k)}function ym(r,e){return r.some(t=>t.isEqual(e))}class Vd{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ki(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new h_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class h_ extends Vd{data(){return super.data()}}function Yh(r,e){return"string"==typeof e?Zh(r,e):e instanceof Oo?e._internalPath:e._delegate._internalPath}function _m(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new gt(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vm{}class Xh extends vm{}function zl(r,e,...t){let s=[];e instanceof vm&&s.push(e),s=s.concat(t),function(a){const l=a.filter(b=>b instanceof $d).length,p=a.filter(b=>b instanceof Jh).length;if(l>1||l>0&&p>0)throw new gt(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class Jh extends Xh{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Jh(e,t,s)}_apply(e){const t=this._parse(e);return Tm(e._query,t),new Po(e.firestore,e.converter,sh(e._query,t))}_parse(e){const t=Vc(e.firestore);return function(a,l,p,b,k,$,Y){let me;if(k.isKeyField()){if("array-contains"===$||"array-contains-any"===$)throw new gt(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${$}' queries on documentId().`);if("in"===$||"not-in"===$){Dm(Y,$);const Ze=[];for(const ht of Y)Ze.push(Im(b,a,ht));me={arrayValue:{values:Ze}}}else me=Im(b,a,Y)}else"in"!==$&&"not-in"!==$&&"array-contains-any"!==$||Dm(Y,$),me=c_(p,"where",Y,"in"===$||"not-in"===$);return Cr.create(k,$,me)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class $d extends vm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $d(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let l=s;const p=a.getFlattenedFilters();for(const b of p)Tm(l,b),l=sh(l,b)}(e._query,t),new Po(e.firestore,e.converter,sh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Em extends Xh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Em(e,t)}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new gt(Ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new gt(Ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new uc(a,l);return function(b,k){if(null===hc(b)){const $=fc(b);null!==$&&bm(0,$,k.field)}}(s,p),p}(e._query,this._field,this._direction);return new Po(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new ka(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Sp extends Xh{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Sp(e,t,s)}_apply(e){return new Po(e.firestore,e.converter,Tl(e._query,this._limit,this._limitType))}}class Ap extends Xh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Ap(e,t,s)}_apply(e){const t=wm(e,this.type,this._docOrFields,this._inclusive);return new Po(e.firestore,e.converter,(a=t,new ka((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Rp extends Xh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Rp(e,t,s)}_apply(e){const t=wm(e,this.type,this._docOrFields,this._inclusive);return new Po(e.firestore,e.converter,(a=t,new ka((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function wm(r,e,t,s){if(t[0]=(0,Ne.m9)(t[0]),t[0]instanceof Vd)return function(a,l,p,b,k){if(!b)throw new gt(Ke.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const $=[];for(const Y of La(a))if(Y.field.isKeyField())$.push(ne(l,b.key));else{const me=b.data.field(Y.field);if(Gu(me))throw new gt(Ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===me){const Ze=Y.field.canonicalString();throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ze}' (used as the orderBy) does not exist.`)}$.push(me)}return new qs($,k)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=Vc(r.firestore);return function(l,p,b,k,$,Y){const me=l.explicitOrderBy;if($.length>me.length)throw new gt(Ke.INVALID_ARGUMENT,`Too many arguments provided to ${k}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ze=[];for(let ht=0;ht<$.length;ht++){const kt=$[ht];if(me[ht].field.isKeyField()){if("string"!=typeof kt)throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${k}(), but got a ${typeof kt}`);if(!id(l)&&-1!==kt.indexOf("/"))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${k}() must be a plain document ID, but '${kt}' contains a slash.`);const Qt=l.path.child(mr.fromString(kt));if(!Nt.isDocumentKey(Qt))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${k}() must result in a valid document path, but '${Qt}' is not because it contains an odd number of segments.`);const an=new Nt(Qt);Ze.push(ne(p,an))}else{const Qt=c_(b,k,kt);Ze.push(Qt)}}return new qs(Ze,Y)}(r._query,r.firestore._databaseId,a,e,t,s)}}function Im(r,e,t){if("string"==typeof(t=(0,Ne.m9)(t))){if(""===t)throw new gt(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!id(e)&&-1!==t.indexOf("/"))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(mr.fromString(t));if(!Nt.isDocumentKey(s))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ne(r,new Nt(s))}if(t instanceof Ki)return ne(r,t._key);throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(t)}.`)}function Dm(r,e){if(!Array.isArray(r)||0===r.length)throw new gt(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tm(r,e){if(e.isInequality()){const s=fc(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const l=hc(r);null!==l&&bm(0,a,l)}const t=function(s,a){for(const l of s)for(const p of l.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new gt(Ke.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function bm(r,e,t){if(!t.isEqual(e))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Mp{convertValue(e,t="none"){switch(Wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Jt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return da(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new Ua(Ai(e.latitude),Ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ac(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Na(e));default:return null}}convertTimestamp(e){const t=Ia(e);return new ci(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=mr.fromString(e);mn(Ic(s));const a=new ea(s.get(1),s.get(3)),l=new Nt(s.popFirst(5));return a.isEqual(t)||fs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function jd(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class g_ extends Mp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ki(this.firestore,null,t)}}class ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gl extends Vd{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Yh("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class zd extends Gl{data(e={}){return super.data(e)}}class al{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ol(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new zd(this._firestore,this._userDataWriter,s.key,s,new ol(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gt(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new zd(s._firestore,s._userDataWriter,p.doc.key,p.doc,new ol(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const b=new zd(s._firestore,s._userDataWriter,p.doc.key,p.doc,new ol(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let k=-1,$=-1;return 0!==p.type&&(k=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),$=l.indexOf(p.doc.key)),{type:wE(p.type),doc:b,oldIndex:k,newIndex:$}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jt()}}function Bn(r,e){return r instanceof Gl&&e instanceof Gl?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof al&&e instanceof al&&r._firestore===e._firestore&&wp(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class Wl extends Mp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ki(this.firestore,null,t)}}function Ms(r,e,t){r=Xr(r,Ki);const s=Xr(r.firestore,as),a=jd(r.converter,e,t);return Hc(s,[Tp(Vc(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,Fi.none())])}function Qv(r,e,t,...s){r=Xr(r,Ki);const a=Xr(r.firestore,as),l=Vc(a);let p;return p="string"==typeof(e=(0,Ne.m9)(e))||e instanceof Oo?Ud(l,"updateDoc",r._key,e,t,s):bp(l,"updateDoc",r._key,e),Hc(a,[p.toMutation(r._key,Fi.exists(!0))])}function __(r,...e){var t,s,a;r=(0,Ne.m9)(r);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||t_(e[p])||(l=e[p],p++);const b={includeMetadataChanges:l.includeMetadataChanges};if(t_(e[p])){const me=e[p];e[p]=null===(t=me.next)||void 0===t?void 0:t.bind(me),e[p+1]=null===(s=me.error)||void 0===s?void 0:s.bind(me),e[p+2]=null===(a=me.complete)||void 0===a?void 0:a.bind(me)}let k,$,Y;if(r instanceof Ki)$=Xr(r.firestore,as),Y=Zu(r._key.path),k={next:me=>{e[p]&&e[p](Np($,r,me))},error:e[p+1],complete:e[p+2]};else{const me=Xr(r,Po);$=Xr(me.firestore,as),Y=me._query;const Ze=new Wl($);k={next:ht=>{e[p]&&e[p](new al($,Ze,me,ht))},error:e[p+1],complete:e[p+2]},_m(r._query)}return function(me,Ze,ht,kt){const Qt=new sl(kt),an=new Hg(Ze,Qt,ht);return me.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return Bg(yield jl(me),an)})),()=>{Qt.Dc(),me.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return ep(yield jl(me),an)}))}}(Vs($),Y,b,k)}function Hc(r,e){return function(t,s){const a=new Tr;return t.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return function By(r,e,t){return sp.apply(this,arguments)}(yield fp(t),s,a)})),a.promise}(Vs(r),e)}function Np(r,e,t){const s=t.docs.get(e._key),a=new Wl(r);return new Gl(r,a,e._key,s,new ol(t.hasPendingWrites,t.fromCache),e.converter)}const nf={maxAttempts:5};class I_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vc(e)}set(e,t,s){this._verifyNotCommitted();const a=Kl(e,this._firestore),l=jd(a.converter,t,s),p=Tp(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,Fi.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=Kl(e,this._firestore);let p;return p="string"==typeof(t=(0,Ne.m9)(t))||t instanceof Oo?Ud(this._dataReader,"WriteBatch.update",l._key,t,s,a):bp(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,Fi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Kl(e,this._firestore);return this._mutations=this._mutations.concat(new m(t._key,Fi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new gt(Ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kl(r,e){if((r=(0,Ne.m9)(r)).firestore!==e)throw new gt(Ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class s0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vc(e)}get(e){const t=Kl(e,this._firestore),s=new g_(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Jt();const l=a[0];if(l.isFoundDocument())return new Vd(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Vd(this._firestore,s,t._key,null,t.converter);throw Jt()})}set(e,t,s){const a=Kl(e,this._firestore),l=jd(a.converter,t,s),p=Tp(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=Kl(e,this._firestore);let p;return p="string"==typeof(t=(0,Ne.m9)(t))||t instanceof Oo?Ud(this._dataReader,"Transaction.update",l._key,t,s,a):bp(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=Kl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Kl(e,this._firestore),s=new Wl(this._firestore);return super.get(e).then(a=>new Gl(this._firestore,s,t._key,a._document,new ol(!1,!1),t.converter))}}function kp(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function rf(){if(typeof Uint8Array>"u")throw new gt("unimplemented","Uint8Arrays are not available in this environment.")}function S_(){if(!function Qd(){return typeof atob<"u"}())throw new gt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){Co=St.SDK_VERSION,(0,St._registerComponent)(new Ve.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const l=t.getProvider("app").getImmediate(),p=new as(new ja(t.getProvider("auth-internal")),new Iu(t.getProvider("app-check-internal")),function(b,k){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new gt(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(b.options.projectId,k)}(l,s),l);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,St.registerVersion)(Xl,"3.12.0",r),(0,St.registerVersion)(Xl,"3.12.0","esm2017")}();class sf{constructor(e){this._delegate=e}static fromBase64String(e){return S_(),new sf(Xa.fromBase64String(e))}static fromUint8Array(e){return rf(),new sf(Xa.fromUint8Array(e))}toBase64(){return S_(),this._delegate.toBase64()}toUint8Array(){return rf(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Lp(r){return function af(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class l0{enableIndexedDbPersistence(e,t){return function kv(r,e){dm(r=Xr(r,as));const t=Vs(r);if(t._uninitializedComponentsProvider)throw new gt(Ke.FAILED_PRECONDITION,"SDK cache is already specified.");Nr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new mu;return i_(t,a,new $l(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function r_(r){dm(r=Xr(r,as));const e=Vs(r);if(e._uninitializedComponentsProvider)throw new gt(Ke.FAILED_PRECONDITION,"SDK cache is already specified.");Nr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new mu;return i_(e,s,new Fc(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function s_(r){if(r._initialized&&!r._terminated)throw new gt(Ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return r._queue.enqueueAndForgetEvenWhileRestricted((0,Le.Z)(function*(){try{yield(t=(0,Le.Z)(function*(s){if(!Yr.D())return Promise.resolve();const a=s+"main";yield Yr.delete(a)}),function(s){return t.apply(this,arguments)})(Vf(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class A_{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof ea||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Ep(r,e,t,s={}){var a;const l=(r=Xr(r,kd))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Nr("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,b;if("string"==typeof s.mockUserToken)p=s.mockUserToken,b=gi.MOCK_USER;else{p=(0,Ne.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const k=s.mockUserToken.sub||s.mockUserToken.user_id;if(!k)throw new gt(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new gi(k)}r._authCredentials=new Ea(new $a(p,b))}}(this._delegate,e,t,s)}enableNetwork(){return function Ld(r){return function gp(r){return r.asyncQueue.enqueue((0,Le.Z)(function*(){const e=yield Gy(r),t=yield Wy(r);return e.setNetworkEnabled(!0),function(s){const a=$t(s);return a.vu.delete(0),Rc(a)}(t)}))}(Vs(r=Xr(r,as)))}(this._delegate)}disableNetwork(){return function Lv(r){return function mp(r){return r.asyncQueue.enqueue((0,Le.Z)(function*(){const e=yield Gy(r),t=yield Wy(r);return e.setNetworkEnabled(!1),(s=(0,Le.Z)(function*(a){const l=$t(a);l.vu.add(0),yield Mc(l),l.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Vs(r=Xr(r,as)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Yy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function o_(r){return function(e){const t=new Tr;return e.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return function Tv(r,e){return Oc.apply(this,arguments)}(yield fp(e),t)})),t.promise}(Vs(r=Xr(r,as)))}(this._delegate)}onSnapshotsInSync(e){return function v_(r,e){return function qy(r,e){const t=new sl(e);return r.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return s=yield jl(r),a=t,$t(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return s=yield jl(r),a=t,void $t(s).ku.delete(a);var s,a}))}}(Vs(r=Xr(r,as)),t_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new gt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ql(this,lm(this._delegate,e))}catch(t){throw wo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ja(this,qh(this._delegate,e))}catch(t){throw wo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pa(this,function Jy(r,e){if(r=Xr(r,kd),vp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gt(Ke.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Po(r,null,(t=e,new ka(mr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw wo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function D_(r,e,t){r=Xr(r,as);const s=Object.assign(Object.assign({},nf),t);return function(a){if(a.maxAttempts<1)throw new gt(Ke.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,l,p){const b=new Tr;return a.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){const k=yield function pp(r){return zh(r).then(e=>e.datastore)}(a);new Od(a.asyncQueue,k,p,l,b).run()})),b.promise}(Vs(r),a=>e(new s0(r,a)),s)}(this._delegate,t=>e(new R_(this,t)))}batch(){return Vs(this._delegate),new Am(new I_(this._delegate,e=>Hc(this._delegate,e)))}loadBundle(e){return function a_(r,e){const t=Vs(r=Xr(r,as)),s=new Nv;return function Zy(r,e,t,s){const a=function(l,p){let b;return b="string"==typeof l?Ca().encode(l):l,k=function(k,$){if(k instanceof Uint8Array)return Uc(k,$);if(k instanceof ArrayBuffer)return Uc(new Uint8Array(k),$);if(k instanceof ReadableStream)return k.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(b),new Pd(k,p);var k}(t,qf(e));r.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){!function Ya(r,e,t){const s=$t(r);var a;(a=(0,Le.Z)(function*(l,p,b){try{const k=yield p.getMetadata();if(yield function(Ze,ht){const kt=$t(Ze),Qt=Zs(ht.createTime);return kt.persistence.runTransaction("hasNewerBundle","readonly",an=>kt.qs.getBundleMetadata(an,ht.id)).then(an=>!!an&&an.createTime.compareTo(Qt)>=0)}(l.localStore,k))return yield p.close(),b._completeWith({taskState:"Success",documentsLoaded:(Ze=k).totalDocuments,bytesLoaded:Ze.totalBytes,totalDocuments:Ze.totalDocuments,totalBytes:Ze.totalBytes}),Promise.resolve(new Set);b._updateProgress(Ny(k));const $=new wv(k,l.localStore,p.serializer);let Y=yield p.bc();for(;Y;){const Ze=yield $.zu(Y);Ze&&b._updateProgress(Ze),Y=yield p.bc()}const me=yield $.complete();return yield Bu(l,me.Ju,void 0),yield function(Ze,ht){const kt=$t(Ze);return kt.persistence.runTransaction("Save bundle","readwrite",Qt=>kt.qs.saveBundleMetadata(Qt,ht))}(l.localStore,k),b._completeWith(me.progress),Promise.resolve(me.Hu)}catch(k){return Nr("SyncEngine",`Loading bundle failed with ${k}`),b._failWith(k),Promise.resolve(new Set)}var Ze}),function(l,p,b){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield fp(r),a,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Fv(r,e){return function im(r,e){return r.asyncQueue.enqueue((0,Le.Z)(function*(){return function(t,s){const a=$t(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.qs.getNamedQuery(l,s))}(yield Gh(r),e)}))}(Vs(r=Xr(r,as)),e).then(t=>t?new Po(r,null,t.query):null)}(this._delegate,e).then(t=>t?new pa(this,t):null)}}class Fp extends Mp{constructor(e){super(),this.firestore=e}convertBytes(e){return new sf(new Xa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ja.forKey(t,this.firestore,null)}}class R_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}get(e){const t=Gc(e);return this._delegate.get(t).then(s=>new uf(this._firestore,new Gl(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Gc(e);return s?(kp("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Gc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Gc(e);return this._delegate.delete(t),this}}class Am{constructor(e){this._delegate=e}set(e,t,s){const a=Gc(e);return s?(kp("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Gc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Gc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zc{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new zd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wd(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=zc.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new zc(e,new Fp(e),t),a.set(t,l)),l}}zc.INSTANCES=new WeakMap;class Ja{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}static forPath(e,t,s){if(e.length%2!=0)throw new gt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ja(t,new Ki(t._delegate,s,new Nt(e)))}static forKey(e,t,s){return new Ja(t,new Ki(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new ql(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ql(this.firestore,lm(this._delegate,e))}catch(t){throw wo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ne.m9)(e))instanceof Ki&&cm(this._delegate,e)}set(e,t){t=kp("DocumentReference.set",t);try{return t?Ms(this._delegate,e,t):Ms(this._delegate,e)}catch(s){throw wo(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Qv(this._delegate,e):Qv(this._delegate,e,t,...s)}catch(a){throw wo(a,"updateDoc()","DocumentReference.update()")}}delete(){return function m_(r){return Hc(Xr(r.firestore,as),[new m(r._key,Fi.none())])}(this._delegate)}onSnapshot(...e){const t=M_(e),s=Rm(e,a=>new uf(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return __(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function qv(r){r=Xr(r,Ki);const e=Xr(r.firestore,as),t=Vs(e),s=new Wl(e);return function rm(r,e){const t=new Tr;return r.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return(s=(0,Le.Z)(function*(a,l,p){try{const b=yield function(k,$){const Y=$t(k);return Y.persistence.runTransaction("read document","readonly",me=>Y.localDocuments.getDocument(me,$))}(a,l);b.isFoundDocument()?p.resolve(b):b.isNoDocument()?p.resolve(null):p.reject(new gt(Ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const k=Td(b,`Failed to get document '${l} from cache`);p.reject(k)}}),function(a,l,p){return s.apply(this,arguments)})(yield Gh(r),e,t);var s})),t.promise}(t,r._key).then(a=>new Gl(e,s,r._key,a,new ol(null!==a&&a.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===e?.source?function Gd(r){r=Xr(r,Ki);const e=Xr(r.firestore,as);return Ky(Vs(e),r._key,{source:"server"}).then(t=>Np(e,r,t))}(this._delegate):function Kv(r){r=Xr(r,Ki);const e=Xr(r.firestore,as);return Ky(Vs(e),r._key).then(t=>Np(e,r,t))}(this._delegate),t.then(s=>new uf(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Ja(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}function wo(r,e,t){return r.message=r.message.replace(e,t),r}function M_(r){for(const e of r)if("object"==typeof e&&!Lp(e))return e;return{}}function Rm(r,e){var t,s;let a;return a=Lp(r[0])?r[0]:Lp(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class uf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ja(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Bn(this._delegate,e._delegate)}}class Wd extends uf{data(e){const t=this._delegate.data(e);return function va(r,e){r||Jt()}(void 0!==t),t}}class pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}where(e,t,s){try{return new pa(this.firestore,zl(this._delegate,function Vv(r,e,t){const s=e,a=Yh("where",r);return Jh._create(a,s,t)}(e,t,s)))}catch(a){throw wo(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new pa(this.firestore,zl(this._delegate,function $v(r,e="asc"){const t=e,s=Yh("orderBy",r);return Em._create(s,t)}(e,t)))}catch(s){throw wo(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pa(this.firestore,zl(this._delegate,function jv(r){return Xy("limit",r),Sp._create("limit",r,"F")}(e)))}catch(t){throw wo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new pa(this.firestore,zl(this._delegate,function Hv(r){return Xy("limitToLast",r),Sp._create("limitToLast",r,"L")}(e)))}catch(t){throw wo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pa(this.firestore,zl(this._delegate,function zv(...r){return Ap._create("startAt",r,!0)}(...e)))}catch(t){throw wo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pa(this.firestore,zl(this._delegate,function Gv(...r){return Ap._create("startAfter",r,!1)}(...e)))}catch(t){throw wo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pa(this.firestore,zl(this._delegate,function f_(...r){return Rp._create("endBefore",r,!1)}(...e)))}catch(t){throw wo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pa(this.firestore,zl(this._delegate,function p_(...r){return Rp._create("endAt",r,!0)}(...e)))}catch(t){throw wo(t,"endAt()","Query.endAt()")}}isEqual(e){return wp(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function xp(r){r=Xr(r,Po);const e=Xr(r.firestore,as),t=Vs(e),s=new Wl(e);return function yp(r,e){const t=new Tr;return r.asyncQueue.enqueueAndForget((0,Le.Z)(function*(){return(s=(0,Le.Z)(function*(a,l,p){try{const b=yield Hf(a,l,!0),k=new ky(l,b.ir),$=k.sc(b.documents),Y=k.applyChanges($,!1);p.resolve(Y.snapshot)}catch(b){const k=Td(b,`Failed to execute query '${l} against cache`);p.reject(k)}}),function(a,l,p){return s.apply(this,arguments)})(yield Gh(r),e,t);var s})),t.promise}(t,r._query).then(a=>new al(e,s,r,a))}(this._delegate):"server"===e?.source?function Pp(r){r=Xr(r,Po);const e=Xr(r.firestore,as),t=Vs(e),s=new Wl(e);return Wh(t,r._query,{source:"server"}).then(a=>new al(e,s,r,a))}(this._delegate):function Zv(r){r=Xr(r,Po);const e=Xr(r.firestore,as),t=Vs(e),s=new Wl(e);return _m(r._query),Wh(t,r._query).then(a=>new al(e,s,r,a))}(this._delegate),t.then(s=>new Mm(this.firestore,new al(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=M_(e),s=Rm(e,a=>new Mm(this.firestore,new al(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return __(this._delegate,t,s)}withConverter(e){return new pa(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}class x_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Wd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Mm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new pa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new x_(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Wd(this._firestore,s))})}isEqual(e){return Bn(this._delegate,e._delegate)}}class ql extends pa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ja(this.firestore,e):null}doc(e){try{return new Ja(this.firestore,void 0===e?qh(this._delegate):qh(this._delegate,e))}catch(t){throw wo(t,"doc()","CollectionReference.doc()")}}add(e){return function y_(r,e){const t=Xr(r.firestore,as),s=qh(r),a=jd(r.converter,e);return Hc(t,[Tp(Vc(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,Fi.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Ja(this.firestore,t))}isEqual(e){return cm(this._delegate,e._delegate)}withConverter(e){return new ql(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}function Gc(r){return Xr(r,Ki)}class Up{constructor(...e){this._delegate=new Oo(...e)}static documentId(){return new Up(Wi.keyField().canonicalString())}isEqual(e){return(e=(0,Ne.m9)(e))instanceof Oo&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function b_(){return new gm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Zl(e)}static delete(){const e=function T_(){return new $c("deleteField")}();return e._methodName="FieldValue.delete",new Zl(e)}static arrayUnion(...e){const t=function o0(...r){return new u_("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Zl(t)}static arrayRemove(...e){const t=function C_(...r){return new Bv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Zl(t)}static increment(e){const t=function a0(r){return new l_("increment",r)}(e);return t._methodName="FieldValue.increment",new Zl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const d0={Firestore:A_,GeoPoint:Ua,Timestamp:ci,Blob:sf,Transaction:R_,WriteBatch:Am,DocumentReference:Ja,DocumentSnapshot:uf,Query:pa,QueryDocumentSnapshot:Wd,QuerySnapshot:Mm,CollectionReference:ql,FieldPath:Up,FieldValue:Zl,setLogLevel:function c0(r){!function wu(r){As.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function f0(r){(function h0(r,e){r.INTERNAL.registerComponent(new Ve.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},d0)))})(r,(e,t)=>new A_(e,t,new l0)),r.registerVersion("@firebase/firestore-compat","0.3.9")}(nt.Z);var Vu=U(3385),p0=U(6217),P_=U(9260);function N_(r,e){return function g0(r,e=W.z){return new G.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(r,e)}function xm(r,e){return N_(r,e).pipe((0,ue.U)(t=>({payload:t,type:"query"})))}function Bp(r,e){return xm(r,e).pipe((0,De.O)(void 0),ae(),(0,ue.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,b)=>{const k=a.find(Y=>Y.doc.ref.isEqual(p.ref)),$=t?.payload.docs.find(Y=>Y.ref.isEqual(p.ref));k&&JSON.stringify(k.doc.metadata)===JSON.stringify(p.metadata)||!k&&$&&JSON.stringify($.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:b,newIndex:b,type:"modified",doc:p}})}),l}))}function O_(r,e,t){return Bp(r,t).pipe((0,ve.R)((s,a)=>function y0(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function k_(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Pm(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Pm(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Pm(r,e.oldIndex,1)}return r}(r,s))}),r}(s,a.map(l=>l.payload),e),[]),(0,ct.x)(),(0,ue.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Pm(r,e,t,...s){const a=r.slice();return a.splice(e,t,...s),a}function Nm(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class L_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Bp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ue.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,De.O)(void 0),ae(),(0,it.h)(([s,a])=>a.length>0||!s),(0,ue.U)(([s,a])=>a),_e.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nm(e);return O_(this.query,t,this.afs.schedulers.outsideAngular).pipe(_e.iC)}valueChanges(e={}){return xm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),_e.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(_e.iC)}add(e){return this.ref.add(e)}doc(e){return new F_(this.ref.doc(e),this.afs)}}class F_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=Vp(s,t);return new L_(a,l,this.afs)}snapshotChanges(){return function m0(r,e){return N_(r,e).pipe((0,De.O)(void 0),ae(),(0,ue.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_e.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ue.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fe.D)(this.ref.get(e)).pipe(_e.iC)}}class U_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Bp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,it.h)(t=>t.length>0),_e.iC):Bp(this.query,this.afs.schedulers.outsideAngular).pipe(_e.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nm(e);return O_(this.query,t,this.afs.schedulers.outsideAngular).pipe(_e.iC)}valueChanges(e={}){return xm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),_e.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(_e.iC)}}const B_=new w.OlP("angularfire2.enableFirestorePersistence"),V_=new w.OlP("angularfire2.firestore.persistenceSettings"),$_=new w.OlP("angularfire2.firestore.settings"),Om=new w.OlP("angularfire2.firestore.use-emulator");function Vp(r,e=(t=>t)){return{query:e(r),ref:r}}let km=(()=>{class r{constructor(t,s,a,l,p,b,k,$,Y,me,Ze,ht,kt,Qt,an,fr,ei){this.schedulers=k;const pr=(0,Xe.on)(t,b,s),xs=Y;me&&(0,Vu.nw)(pr,b,Ze,kt,Qt,an,ht,fr),[this.firestore,this.persistenceEnabled$]=(0,Xe.cc)(`${pr.name}.firestore`,"AngularFirestore",pr.name,()=>{const us=b.runOutsideAngular(()=>pr.firestore());if(l&&us.settings(l),xs&&us.useEmulator(...xs),a&&!(0,mt.PM)(p)){const Xi=()=>{try{return(0,fe.D)(us.enablePersistence($||void 0).then(()=>!0,()=>!1))}catch(aa){return typeof console<"u"&&console.warn(aa),(0,pe.of)(!1)}};return[us,b.runOutsideAngular(Xi)]}return[us,(0,pe.of)(!1)]},[l,xs,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=Vp(a,s),b=this.schedulers.ngZone.run(()=>l);return new L_(b,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new U_(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new F_(a,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(w.LFG(Xe.Dh),w.LFG(Xe.xv,8),w.LFG(B_,8),w.LFG($_,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(_e.HU),w.LFG(V_,8),w.LFG(Om,8),w.LFG(Vu.zQ,8),w.LFG(Vu.Qv,8),w.LFG(Vu.L6,8),w.LFG(Vu._Q,8),w.LFG(Vu.rT,8),w.LFG(Vu.lh,8),w.LFG(Vu.f7,8),w.LFG(p0.nm,8))},r.\u0275prov=w.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),Lm=(()=>{class r{constructor(){P_.Z.registerVersion("angularfire",_e.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:B_,useValue:!0},{provide:V_,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=w.oAB({type:r}),r.\u0275inj=w.cJS({providers:[km]}),r})()},8445:(Lt,We,U)=>{U.d(We,{Q1:()=>qr,TE:()=>hs});var w=U(9751),W=U(9646),G=U(8996),fe=U(8372),pe=U(4004),_e=U(3900),De=U(4976),ge=U(4650),xe=U(2011),ae=U(3942),ue=U(5861),ve=U(6881),ct=U(2090),it=U(4859);const Xe="firebasestorage.googleapis.com",mt="storageBucket";class St extends ct.ZR{constructor(L,J,he=0){super(Ee(L),`Firebase Storage: ${J} (${Ee(L)})`),this.status_=he,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(L){this.status_=L}_codeEquals(L){return Ee(L)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(L){this.customData.serverResponse=L,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ve=(()=>{return(B=Ve||(Ve={})).UNKNOWN="unknown",B.OBJECT_NOT_FOUND="object-not-found",B.BUCKET_NOT_FOUND="bucket-not-found",B.PROJECT_NOT_FOUND="project-not-found",B.QUOTA_EXCEEDED="quota-exceeded",B.UNAUTHENTICATED="unauthenticated",B.UNAUTHORIZED="unauthorized",B.UNAUTHORIZED_APP="unauthorized-app",B.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",B.INVALID_CHECKSUM="invalid-checksum",B.CANCELED="canceled",B.INVALID_EVENT_NAME="invalid-event-name",B.INVALID_URL="invalid-url",B.INVALID_DEFAULT_BUCKET="invalid-default-bucket",B.NO_DEFAULT_BUCKET="no-default-bucket",B.CANNOT_SLICE_BLOB="cannot-slice-blob",B.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",B.NO_DOWNLOAD_URL="no-download-url",B.INVALID_ARGUMENT="invalid-argument",B.INVALID_ARGUMENT_COUNT="invalid-argument-count",B.APP_DELETED="app-deleted",B.INVALID_ROOT_OPERATION="invalid-root-operation",B.INVALID_FORMAT="invalid-format",B.INTERNAL_ERROR="internal-error",B.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ve;var B})();function Ee(B){return"storage/"+B}function Ne(){return new St(Ve.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Pe(){return new St(Ve.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ot(){return new St(Ve.CANCELED,"User canceled the upload/download.")}function yn(){return new St(Ve.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nr(B){return new St(Ve.INVALID_ARGUMENT,B)}function Mn(){return new St(Ve.APP_DELETED,"The Firebase app was deleted.")}function en(B){return new St(Ve.INVALID_ROOT_OPERATION,"The operation '"+B+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pt(B,L){return new St(Ve.INVALID_FORMAT,"String does not match format '"+B+"': "+L)}function jn(B){throw new St(Ve.INTERNAL_ERROR,"Internal error: "+B)}class wn{constructor(L,J){this.bucket=L,this.path_=J}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const L=encodeURIComponent;return"/b/"+L(this.bucket)+"/o/"+L(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(L,J){let he;try{he=wn.makeFromUrl(L,J)}catch{return new wn(L,"")}if(""===he.path)return he;throw function Mt(B){return new St(Ve.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+B+"'.")}(L)}static makeFromUrl(L,J){let he=null;const Re="([A-Za-z0-9.\\-_]+)",zt=new RegExp("^gs://"+Re+"(/(.*))?$","i");function vn(li){li.path_=decodeURIComponent(li.path)}const ui=J.replace(/[.]/g,"\\."),Qr=[{regex:zt,indices:{bucket:1,path:3},postModify:function rt(li){"/"===li.path.charAt(li.path.length-1)&&(li.path_=li.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ui}/v[A-Za-z0-9_]+/b/${Re}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:vn},{regex:new RegExp(`^https?://${J===Xe?"(?:storage.googleapis.com|storage.cloud.google.com)":J}/${Re}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:vn}];for(let li=0;li<Qr.length;li++){const Bs=Qr[li],ns=Bs.regex.exec(L);if(ns){let Qi=ns[Bs.indices.path];Qi||(Qi=""),he=new wn(ns[Bs.indices.bucket],Qi),Bs.postModify(he);break}}if(null==he)throw function je(B){return new St(Ve.INVALID_URL,"Invalid URL '"+B+"'.")}(L);return he}}class ar{constructor(L){this.promise_=Promise.reject(L)}getPromise(){return this.promise_}cancel(L=!1){}}function Lr(B){return"string"==typeof B||B instanceof String}function Sn(B){return $n()&&B instanceof Blob}function $n(){return typeof Blob<"u"&&!(0,ct.UG)()}function ur(B,L,J,he){if(he<L)throw nr(`Invalid value for '${B}'. Expected ${L} or greater.`);if(he>J)throw nr(`Invalid value for '${B}'. Expected ${J} or less.`)}function Ut(B,L,J){let he=L;return null==J&&(he=`https://${L}`),`${J}://${he}/v0${B}`}function Fr(B){const L=encodeURIComponent;let J="?";for(const he in B)B.hasOwnProperty(he)&&(J=J+(L(he)+"=")+L(B[he])+"&");return J=J.slice(0,-1),J}var Jr=(()=>{return(B=Jr||(Jr={}))[B.NO_ERROR=0]="NO_ERROR",B[B.NETWORK_ERROR=1]="NETWORK_ERROR",B[B.ABORT=2]="ABORT",Jr;var B})();function Ur(B,L){const J=B>=500&&B<600,Re=-1!==[408,429].indexOf(B),rt=-1!==L.indexOf(B);return J||Re||rt}class ls{constructor(L,J,he,Re,rt,dt,zt,Ct,vn,xn,ui,Dr=!0){this.url_=L,this.method_=J,this.headers_=he,this.body_=Re,this.successCodes_=rt,this.additionalRetryCodes_=dt,this.callback_=zt,this.errorCallback_=Ct,this.timeout_=vn,this.progressCallback_=xn,this.connectionFactory_=ui,this.retry=Dr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Zr,Hr)=>{this.resolve_=Zr,this.reject_=Hr,this.start_()})}start_(){const J=(he,Re)=>{const rt=this.resolve_,dt=this.reject_,zt=Re.connection;if(Re.wasSuccessCode)try{const Ct=this.callback_(zt,zt.getResponse());!function yr(B){return void 0!==B}(Ct)?rt():rt(Ct)}catch(Ct){dt(Ct)}else if(null!==zt){const Ct=Ne();Ct.serverResponse=zt.getErrorText(),dt(this.errorCallback_?this.errorCallback_(zt,Ct):Ct)}else dt(Re.canceled?this.appDelete_?Mn():ot():Pe())};this.canceled_?J(0,new xi(!1,null,!0)):this.backoffId_=function Qn(B,L,J){let he=1,Re=null,rt=null,dt=!1,zt=0;function Ct(){return 2===zt}let vn=!1;function xn(...Mr){vn||(vn=!0,L.apply(null,Mr))}function ui(Mr){Re=setTimeout(()=>{Re=null,B(Zr,Ct())},Mr)}function Dr(){rt&&clearTimeout(rt)}function Zr(Mr,...Us){if(vn)return void Dr();if(Mr)return Dr(),void xn.call(null,Mr,...Us);if(Ct()||dt)return Dr(),void xn.call(null,Mr,...Us);let Qr;he<64&&(he*=2),1===zt?(zt=2,Qr=0):Qr=1e3*(he+Math.random()),ui(Qr)}let Hr=!1;function ts(Mr){Hr||(Hr=!0,Dr(),!vn&&(null!==Re?(Mr||(zt=2),clearTimeout(Re),ui(0)):Mr||(zt=1)))}return ui(0),rt=setTimeout(()=>{dt=!0,ts(!0)},J),ts}((he,Re)=>{if(Re)return void he(!1,new xi(!1,null,!0));const rt=this.connectionFactory_();this.pendingConnection_=rt;const dt=zt=>{null!==this.progressCallback_&&this.progressCallback_(zt.loaded,zt.lengthComputable?zt.total:-1)};null!==this.progressCallback_&&rt.addUploadProgressListener(dt),rt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&rt.removeUploadProgressListener(dt),this.pendingConnection_=null;const zt=rt.getErrorCode()===Jr.NO_ERROR,Ct=rt.getStatus();if(!zt||Ur(Ct,this.additionalRetryCodes_)&&this.retry){const xn=rt.getErrorCode()===Jr.ABORT;return void he(!1,new xi(!1,null,xn))}const vn=-1!==this.successCodes_.indexOf(Ct);he(!0,new xi(vn,rt))})},J,this.timeout_)}getPromise(){return this.promise_}cancel(L){this.canceled_=!0,this.appDelete_=L||!1,null!==this.backoffId_&&function Sr(B){B(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xi{constructor(L,J,he){this.wasSuccessCode=L,this.connection=J,this.canceled=!!he}}function pn(...B){const L=function Kn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==L){const J=new L;for(let he=0;he<B.length;he++)J.append(B[he]);return J.getBlob()}if($n())return new Blob(B);throw new St(Ve.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const jt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wr{constructor(L,J){this.data=L,this.contentType=J||null}}function Fn(B,L){switch(B){case jt.RAW:return new wr(hi(L));case jt.BASE64:case jt.BASE64URL:return new wr(Ar(B,L));case jt.DATA_URL:return new wr(function Wr(B){const L=new Ir(B);return L.base64?Ar(jt.BASE64,L.rest):function Hn(B){let L;try{L=decodeURIComponent(B)}catch{throw pt(jt.DATA_URL,"Malformed data URL.")}return hi(L)}(L.rest)}(L),function _r(B){return new Ir(B).contentType}(L))}throw Ne()}function hi(B){const L=[];for(let J=0;J<B.length;J++){let he=B.charCodeAt(J);he<=127?L.push(he):he<=2047?L.push(192|he>>6,128|63&he):55296==(64512&he)?J<B.length-1&&56320==(64512&B.charCodeAt(J+1))?(he=65536|(1023&he)<<10|1023&B.charCodeAt(++J),L.push(240|he>>18,128|he>>12&63,128|he>>6&63,128|63&he)):L.push(239,191,189):56320==(64512&he)?L.push(239,191,189):L.push(224|he>>12,128|he>>6&63,128|63&he)}return new Uint8Array(L)}function Ar(B,L){switch(B){case jt.BASE64:{const Re=-1!==L.indexOf("-"),rt=-1!==L.indexOf("_");if(Re||rt)throw pt(B,"Invalid character '"+(Re?"-":"_")+"' found: is it base64url encoded?");break}case jt.BASE64URL:{const Re=-1!==L.indexOf("+"),rt=-1!==L.indexOf("/");if(Re||rt)throw pt(B,"Invalid character '"+(Re?"+":"/")+"' found: is it base64 encoded?");L=L.replace(/-/g,"+").replace(/_/g,"/");break}}let J;try{J=function Br(B){if(typeof atob>"u")throw function Dt(B){return new St(Ve.UNSUPPORTED_ENVIRONMENT,`${B} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(B)}(L)}catch(Re){throw Re.message.includes("polyfill")?Re:pt(B,"Invalid character found")}const he=new Uint8Array(J.length);for(let Re=0;Re<J.length;Re++)he[Re]=J.charCodeAt(Re);return he}class Ir{constructor(L){this.base64=!1,this.contentType=null;const J=L.match(/^data:([^,]+)?,/);if(null===J)throw pt(jt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const he=J[1]||null;null!=he&&(this.base64=function zr(B,L){return B.length>=L.length&&B.substring(B.length-L.length)===L}(he,";base64"),this.contentType=this.base64?he.substring(0,he.length-7):he),this.rest=L.substring(L.indexOf(",")+1)}}class Vr{constructor(L,J){let he=0,Re="";Sn(L)?(this.data_=L,he=L.size,Re=L.type):L instanceof ArrayBuffer?(J?this.data_=new Uint8Array(L):(this.data_=new Uint8Array(L.byteLength),this.data_.set(new Uint8Array(L))),he=this.data_.length):L instanceof Uint8Array&&(J?this.data_=L:(this.data_=new Uint8Array(L.length),this.data_.set(L)),he=L.length),this.size_=he,this.type_=Re}size(){return this.size_}type(){return this.type_}slice(L,J){if(Sn(this.data_)){const Re=function Er(B,L,J){return B.webkitSlice?B.webkitSlice(L,J):B.mozSlice?B.mozSlice(L,J):B.slice?B.slice(L,J):null}(this.data_,L,J);return null===Re?null:new Vr(Re)}{const he=new Uint8Array(this.data_.buffer,L,J-L);return new Vr(he,!0)}}static getBlob(...L){if($n()){const J=L.map(he=>he instanceof Vr?he.data_:he);return new Vr(pn.apply(null,J))}{const J=L.map(dt=>Lr(dt)?Fn(jt.RAW,dt).data:dt.data_);let he=0;J.forEach(dt=>{he+=dt.byteLength});const Re=new Uint8Array(he);let rt=0;return J.forEach(dt=>{for(let zt=0;zt<dt.length;zt++)Re[rt++]=dt[zt]}),new Vr(Re,!0)}}uploadData(){return this.data_}}function rr(B){let L;try{L=JSON.parse(B)}catch{return null}return function dr(B){return"object"==typeof B&&!Array.isArray(B)}(L)?L:null}function ye(B){const L=B.lastIndexOf("/",B.length-2);return-1===L?B:B.slice(L+1)}function le(B,L){return L}class Te{constructor(L,J,he,Re){this.server=L,this.local=J||L,this.writable=!!he,this.xform=Re||le}}let Ye=null;function At(){if(Ye)return Ye;const B=[];B.push(new Te("bucket")),B.push(new Te("generation")),B.push(new Te("metageneration")),B.push(new Te("name","fullPath",!0));const J=new Te("name");J.xform=function L(rt,dt){return function Fe(B){return!Lr(B)||B.length<2?B:ye(B)}(dt)},B.push(J);const Re=new Te("size");return Re.xform=function he(rt,dt){return void 0!==dt?Number(dt):dt},B.push(Re),B.push(new Te("timeCreated")),B.push(new Te("updated")),B.push(new Te("md5Hash",null,!0)),B.push(new Te("cacheControl",null,!0)),B.push(new Te("contentDisposition",null,!0)),B.push(new Te("contentEncoding",null,!0)),B.push(new Te("contentLanguage",null,!0)),B.push(new Te("contentType",null,!0)),B.push(new Te("metadata","customMetadata",!0)),Ye=B,Ye}function ir(B,L,J){const he=rr(L);return null===he?null:function In(B,L,J){const he={type:"file"},Re=J.length;for(let rt=0;rt<Re;rt++){const dt=J[rt];he[dt.local]=dt.xform(he,L[dt.server])}return function ln(B,L){Object.defineProperty(B,"ref",{get:function J(){const rt=new wn(B.bucket,B.fullPath);return L._makeStorageReference(rt)}})}(he,B),he}(B,he,J)}function ie(B,L){const J={},he=L.length;for(let Re=0;Re<he;Re++){const rt=L[Re];rt.writable&&(J[rt.server]=B[rt.local])}return JSON.stringify(J)}const ee="prefixes";class on{constructor(L,J,he,Re){this.url=L,this.method=J,this.handler=he,this.timeout=Re,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ue(B){if(!B)throw Ne()}function ke(B,L){return function J(he,Re){const rt=ir(B,Re,L);return Ue(null!==rt),rt}}function Zt(B){return function L(J,he){let Re;return Re=401===J.getStatus()?J.getErrorText().includes("Firebase App Check token is invalid")?function He(){return new St(Ve.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function et(){return new St(Ve.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===J.getStatus()?function Et(B){return new St(Ve.QUOTA_EXCEEDED,"Quota for bucket '"+B+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(B.bucket):403===J.getStatus()?function we(B){return new St(Ve.UNAUTHORIZED,"User does not have permission to access '"+B+"'.")}(B.path):he,Re.status=J.getStatus(),Re.serverResponse=he.serverResponse,Re}}function Dn(B){const L=Zt(B);return function J(he,Re){let rt=L(he,Re);return 404===he.getStatus()&&(rt=function ft(B){return new St(Ve.OBJECT_NOT_FOUND,"Object '"+B+"' does not exist.")}(B.path)),rt.serverResponse=Re.serverResponse,rt}}function Yn(B,L,J){const Re=Ut(L.fullServerUrl(),B.host,B._protocol),dt=B.maxOperationRetryTime,zt=new on(Re,"GET",ke(B,J),dt);return zt.errorHandler=Dn(L),zt}function br(B,L,J,he,Re){const rt={};rt.prefix=L.isRoot?"":L.path+"/",J&&J.length>0&&(rt.delimiter=J),he&&(rt.pageToken=he),Re&&(rt.maxResults=Re);const zt=Ut(L.bucketOnlyServerUrl(),B.host,B._protocol),vn=B.maxOperationRetryTime,xn=new on(zt,"GET",function yt(B,L){return function J(he,Re){const rt=function Pt(B,L,J){const he=rr(J);return null===he?null:function st(B,L,J){const he={prefixes:[],items:[],nextPageToken:J.nextPageToken};if(J[ee])for(const Re of J[ee]){const rt=Re.replace(/\/$/,""),dt=B._makeStorageReference(new wn(L,rt));he.prefixes.push(dt)}if(J.items)for(const Re of J.items){const rt=B._makeStorageReference(new wn(L,Re.name));he.items.push(rt)}return he}(B,L,he)}(B,L,Re);return Ue(null!==rt),rt}}(B,L.bucket),vn);return xn.urlParams=rt,xn.errorHandler=Zt(L),xn}function Ns(B,L,J){const he=Object.assign({},J);return he.fullPath=B.path,he.size=L.size(),he.contentType||(he.contentType=function Ps(B,L){return B&&B.contentType||L&&L.type()||"application/octet-stream"}(null,L)),he}class fi{constructor(L,J,he,Re){this.current=L,this.total=J,this.finalized=!!he,this.metadata=Re||null}}function Os(B,L){let J=null;try{J=B.getResponseHeader("X-Goog-Upload-Status")}catch{Ue(!1)}return Ue(!!J&&-1!==(L||["active"]).indexOf(J)),J}const Ji={STATE_CHANGED:"state_changed"},Un={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ks(B){switch(B){case"running":case"pausing":case"canceling":return Un.RUNNING;case"paused":return Un.PAUSED;case"success":return Un.SUCCESS;case"canceled":return Un.CANCELED;default:return Un.ERROR}}class Kr{constructor(L,J,he){if(function Mi(B){return"function"==typeof B}(L)||null!=J||null!=he)this.next=L,this.error=J??void 0,this.complete=he??void 0;else{const rt=L;this.next=rt.next,this.error=rt.error,this.complete=rt.complete}}}function ii(B){return(...L)=>{Promise.resolve().then(()=>B(...L))}}class es extends class Ci{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jr.NO_ERROR,this.sendPromise_=new Promise(L=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jr.ABORT,L()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jr.NETWORK_ERROR,L()}),this.xhr_.addEventListener("load",()=>{L()})})}send(L,J,he,Re){if(this.sent_)throw jn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(J,L,!0),void 0!==Re)for(const rt in Re)Re.hasOwnProperty(rt)&&this.xhr_.setRequestHeader(rt,Re[rt].toString());return void 0!==he?this.xhr_.send(he):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(L){return this.xhr_.getResponseHeader(L)}addUploadProgressListener(L){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",L)}removeUploadProgressListener(L){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",L)}}{initXhr(){this.xhr_.responseType="text"}}function Rr(){return new es}class Zo{constructor(L,J,he=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=L,this._blob=J,this._metadata=he,this._mappings=At(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Re=>{if(this._request=void 0,this._chunkMultiplier=1,Re._codeEquals(Ve.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const rt=this.isExponentialBackoffExpired();if(Ur(Re.status,[])){if(!rt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();Re=Pe()}this._error=Re,this._transition("error")}},this._metadataErrorHandler=Re=>{this._request=void 0,Re._codeEquals(Ve.CANCELED)?this.completeTransitions_():(this._error=Re,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((Re,rt)=>{this._resolve=Re,this._reject=rt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const L=this._transferred;return J=>this._updateProgress(L+J)}_shouldDoResumable(L){return L.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(L){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([J,he])=>{switch(this._state){case"running":L(J,he);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((L,J)=>{const he=function cs(B,L,J,he,Re){const rt=L.bucketOnlyServerUrl(),dt=Ns(L,he,Re),zt={name:dt.fullPath},Ct=Ut(rt,B.host,B._protocol),xn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${he.size()}`,"X-Goog-Upload-Header-Content-Type":dt.contentType,"Content-Type":"application/json; charset=utf-8"},ui=ie(dt,J),Hr=new on(Ct,"POST",function Zr(ts){let Mr;Os(ts);try{Mr=ts.getResponseHeader("X-Goog-Upload-URL")}catch{Ue(!1)}return Ue(Lr(Mr)),Mr},B.maxUploadRetryTime);return Hr.urlParams=zt,Hr.headers=xn,Hr.body=ui,Hr.errorHandler=Zt(L),Hr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Re=this._ref.storage._makeRequest(he,Rr,L,J);this._request=Re,Re.getPromise().then(rt=>{this._request=void 0,this._uploadUrl=rt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const L=this._uploadUrl;this._resolveToken((J,he)=>{const Re=function oo(B,L,J,he){const Ct=new on(J,"POST",function rt(vn){const xn=Os(vn,["active","final"]);let ui=null;try{ui=vn.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ue(!1)}ui||Ue(!1);const Dr=Number(ui);return Ue(!isNaN(Dr)),new fi(Dr,he.size(),"final"===xn)},B.maxUploadRetryTime);return Ct.headers={"X-Goog-Upload-Command":"query"},Ct.errorHandler=Zt(L),Ct}(this._ref.storage,this._ref._location,L,this._blob),rt=this._ref.storage._makeRequest(Re,Rr,J,he);this._request=rt,rt.getPromise().then(dt=>{this._request=void 0,this._updateProgress(dt.current),this._needToFetchStatus=!1,dt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const L=262144*this._chunkMultiplier,J=new fi(this._transferred,this._blob.size()),he=this._uploadUrl;this._resolveToken((Re,rt)=>{let dt;try{dt=function vi(B,L,J,he,Re,rt,dt,zt){const Ct=new fi(0,0);if(dt?(Ct.current=dt.current,Ct.total=dt.total):(Ct.current=0,Ct.total=he.size()),he.size()!==Ct.total)throw function On(){return new St(Ve.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const vn=Ct.total-Ct.current;let xn=vn;Re>0&&(xn=Math.min(xn,Re));const ui=Ct.current;let Zr="";Zr=0===xn?"finalize":vn===xn?"upload, finalize":"upload";const Hr={"X-Goog-Upload-Command":Zr,"X-Goog-Upload-Offset":`${Ct.current}`},ts=he.slice(ui,ui+xn);if(null===ts)throw yn();const Qr=new on(J,"POST",function Mr(li,Bs){const ns=Os(li,["active","final"]),bo=Ct.current+xn,Qi=he.size();let R;return R="final"===ns?ke(L,rt)(li,Bs):null,new fi(bo,Qi,"final"===ns,R)},L.maxUploadRetryTime);return Qr.headers=Hr,Qr.body=ts.uploadData(),Qr.progressCallback=zt||null,Qr.errorHandler=Zt(B),Qr}(this._ref._location,this._ref.storage,he,this._blob,L,this._mappings,J,this._makeProgressCallback())}catch(Ct){return this._error=Ct,void this._transition("error")}const zt=this._ref.storage._makeRequest(dt,Rr,Re,rt,!1);this._request=zt,zt.getPromise().then(Ct=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Ct.current),Ct.finalized?(this._metadata=Ct.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((L,J)=>{const he=Yn(this._ref.storage,this._ref._location,this._mappings),Re=this._ref.storage._makeRequest(he,Rr,L,J);this._request=Re,Re.getPromise().then(rt=>{this._request=void 0,this._metadata=rt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((L,J)=>{const he=function zn(B,L,J,he,Re){const rt=L.bucketOnlyServerUrl(),dt={"X-Goog-Upload-Protocol":"multipart"},Ct=function zt(){let Qr="";for(let li=0;li<2;li++)Qr+=Math.random().toString().slice(2);return Qr}();dt["Content-Type"]="multipart/related; boundary="+Ct;const vn=Ns(L,he,Re),xn=ie(vn,J),Zr=Vr.getBlob("--"+Ct+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+xn+"\r\n--"+Ct+"\r\nContent-Type: "+vn.contentType+"\r\n\r\n",he,"\r\n--"+Ct+"--");if(null===Zr)throw yn();const Hr={name:vn.fullPath},ts=Ut(rt,B.host,B._protocol),Us=B.maxUploadRetryTime,xr=new on(ts,"POST",ke(B,J),Us);return xr.urlParams=Hr,xr.headers=dt,xr.body=Zr.uploadData(),xr.errorHandler=Zt(L),xr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Re=this._ref.storage._makeRequest(he,Rr,L,J);this._request=Re,Re.getPromise().then(rt=>{this._request=void 0,this._metadata=rt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(L){const J=this._transferred;this._transferred=L,this._transferred!==J&&this._notifyObservers()}_transition(L){if(this._state!==L)switch(L){case"canceling":case"pausing":this._state=L,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const J="paused"===this._state;this._state=L,J&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=L,this._notifyObservers();break;case"canceled":this._error=ot(),this._state=L,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const L=ks(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:L,metadata:this._metadata,task:this,ref:this._ref}}on(L,J,he,Re){const rt=new Kr(J||void 0,he||void 0,Re||void 0);return this._addObserver(rt),()=>{this._removeObserver(rt)}}then(L,J){return this._promise.then(L,J)}catch(L){return this.then(null,L)}_addObserver(L){this._observers.push(L),this._notifyObserver(L)}_removeObserver(L){const J=this._observers.indexOf(L);-1!==J&&this._observers.splice(J,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(J=>{this._notifyObserver(J)})}_finishPromise(){if(void 0!==this._resolve){let L=!0;switch(ks(this._state)){case Un.SUCCESS:ii(this._resolve.bind(null,this.snapshot))();break;case Un.CANCELED:case Un.ERROR:ii(this._reject.bind(null,this._error))();break;default:L=!1}L&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(L){switch(ks(this._state)){case Un.RUNNING:case Un.PAUSED:L.next&&ii(L.next.bind(L,this.snapshot))();break;case Un.SUCCESS:L.complete&&ii(L.complete.bind(L))();break;default:L.error&&ii(L.error.bind(L,this._error))()}}resume(){const L="paused"===this._state||"pausing"===this._state;return L&&this._transition("running"),L}pause(){const L="running"===this._state;return L&&this._transition("pausing"),L}cancel(){const L="running"===this._state||"pausing"===this._state;return L&&this._transition("canceling"),L}}class sr{constructor(L,J){this._service=L,this._location=J instanceof wn?J:wn.makeFromUrl(J,L.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(L,J){return new sr(L,J)}get root(){const L=new wn(this._location.bucket,"");return this._newRef(this._service,L)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ye(this._location.path)}get storage(){return this._service}get parent(){const L=function ni(B){if(0===B.length)return null;const L=B.lastIndexOf("/");return-1===L?"":B.slice(0,L)}(this._location.path);if(null===L)return null;const J=new wn(this._location.bucket,L);return new sr(this._service,J)}_throwIfRoot(L){if(""===this._location.path)throw en(L)}}function lt(B,L,J){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,ue.Z)(function*(B,L,J){const Re=yield gn(B,{pageToken:J});L.prefixes.push(...Re.prefixes),L.items.push(...Re.items),null!=Re.nextPageToken&&(yield lt(B,L,Re.nextPageToken))})).apply(this,arguments)}function gn(B,L){null!=L&&"number"==typeof L.maxResults&&ur("options.maxResults",1,1e3,L.maxResults);const J=L||{},he=br(B.storage,B._location,"/",J.pageToken,J.maxResults);return B.storage.makeRequestWithTokens(he,Rr)}function gr(B){B._throwIfRoot("getDownloadURL");const L=function _i(B,L,J){const Re=Ut(L.fullServerUrl(),B.host,B._protocol),dt=B.maxOperationRetryTime,zt=new on(Re,"GET",function vt(B,L){return function J(he,Re){const rt=ir(B,Re,L);return Ue(null!==rt),function se(B,L,J,he){const Re=rr(L);if(null===Re||!Lr(Re.downloadTokens))return null;const rt=Re.downloadTokens;if(0===rt.length)return null;const dt=encodeURIComponent;return rt.split(",").map(vn=>{const ui=B.fullPath;return Ut("/b/"+dt(B.bucket)+"/o/"+dt(ui),J,he)+Fr({alt:"media",token:vn})})[0]}(rt,Re,B.host,B._protocol)}}(B,J),dt);return zt.errorHandler=Dn(L),zt}(B.storage,B._location,At());return B.storage.makeRequestWithTokens(L,Rr).then(J=>{if(null===J)throw function Rn(){return new St(Ve.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return J})}function ys(B,L){const J=function ri(B,L){const J=L.split("/").filter(he=>he.length>0).join("/");return 0===B.length?J:B+"/"+J}(B._location.path,L),he=new wn(B._location.bucket,J);return new sr(B.storage,he)}function ds(B,L){if(B instanceof Es){const J=B;if(null==J._bucket)throw function It(){return new St(Ve.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mt+"' property when initializing the app?")}();const he=new sr(J,J._bucket);return null!=L?ds(he,L):he}return void 0!==L?ys(B,L):B}function _s(B,L){if(L&&function Ni(B){return/^[A-Za-z]+:\/\//.test(B)}(L)){if(B instanceof Es)return function Qs(B,L){return new sr(B,L)}(B,L);throw nr("To use ref(service, url), the first argument must be a Storage instance.")}return ds(B,L)}function Fo(B,L){const J=L?.[mt];return null==J?null:wn.makeFromBucketSpec(J,B)}class Es{constructor(L,J,he,Re,rt){this.app=L,this._authProvider=J,this._appCheckProvider=he,this._url=Re,this._firebaseVersion=rt,this._bucket=null,this._host=Xe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Re?wn.makeFromBucketSpec(Re,this._host):Fo(this._host,this.app.options)}get host(){return this._host}set host(L){this._host=L,this._bucket=null!=this._url?wn.makeFromBucketSpec(this._url,L):Fo(L,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(L){ur("time",0,Number.POSITIVE_INFINITY,L),this._maxUploadRetryTime=L}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(L){ur("time",0,Number.POSITIVE_INFINITY,L),this._maxOperationRetryTime=L}_getAuthToken(){var L=this;return(0,ue.Z)(function*(){if(L._overrideAuthToken)return L._overrideAuthToken;const J=L._authProvider.getImmediate({optional:!0});if(J){const he=yield J.getToken();if(null!==he)return he.accessToken}return null})()}_getAppCheckToken(){var L=this;return(0,ue.Z)(function*(){const J=L._appCheckProvider.getImmediate({optional:!0});return J?(yield J.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(L=>L.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(L){return new sr(this,L)}_makeRequest(L,J,he,Re,rt=!0){if(this._deleted)return new ar(Mn());{const dt=function nn(B,L,J,he,Re,rt,dt=!0){const zt=Fr(B.urlParams),Ct=B.url+zt,vn=Object.assign({},B.headers);return function Ln(B,L){L&&(B["X-Firebase-GMPID"]=L)}(vn,L),function ti(B,L){null!==L&&L.length>0&&(B.Authorization="Firebase "+L)}(vn,J),function hr(B,L){B["X-Firebase-Storage-Version"]="webjs/"+(L??"AppManager")}(vn,rt),function Ht(B,L){null!==L&&(B["X-Firebase-AppCheck"]=L)}(vn,he),new ls(Ct,B.method,vn,B.body,B.successCodes,B.additionalRetryCodes,B.handler,B.errorHandler,B.timeout,B.progressCallback,Re,dt)}(L,this._appId,he,Re,J,this._firebaseVersion,rt);return this._requests.add(dt),dt.getPromise().then(()=>this._requests.delete(dt),()=>this._requests.delete(dt)),dt}}makeRequestWithTokens(L,J){var he=this;return(0,ue.Z)(function*(){const[Re,rt]=yield Promise.all([he._getAuthToken(),he._getAppCheckToken()]);return he._makeRequest(L,J,Re,rt).getPromise()})()}}const uo="@firebase/storage";function $r(B,L){return _s(B=(0,ct.m9)(B),L)}function Io(B,{instanceIdentifier:L}){const J=B.getProvider("app").getImmediate(),he=B.getProvider("auth-internal"),Re=B.getProvider("app-check-internal");return new Es(J,he,Re,L,ve.SDK_VERSION)}!function Gs(){(0,ve._registerComponent)(new it.wA("storage",Io,"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(uo,"0.11.2",""),(0,ve.registerVersion)(uo,"0.11.2","esm2017")}();class Jn{constructor(L,J,he){this._delegate=L,this.task=J,this.ref=he}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Sa{constructor(L,J){this._delegate=L,this._ref=J,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Jn(this._delegate.snapshot,this,this._ref)}then(L,J){return this._delegate.then(he=>{if(L)return L(new Jn(he,this,this._ref))},J)}on(L,J,he,Re){let rt;return J&&(rt="function"==typeof J?dt=>J(new Jn(dt,this,this._ref)):{next:J.next?dt=>J.next(new Jn(dt,this,this._ref)):void 0,complete:J.complete||void 0,error:J.error||void 0}),this._delegate.on(L,rt,he||void 0,Re||void 0)}}class Zi{constructor(L,J){this._delegate=L,this._service=J}get prefixes(){return this._delegate.prefixes.map(L=>new pi(L,this._service))}get items(){return this._delegate.items.map(L=>new pi(L,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class pi{constructor(L,J){this._delegate=L,this.storage=J}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(L){const J=function ai(B,L){return ys(B,L)}(this._delegate,L);return new pi(J,this.storage)}get root(){return new pi(this._delegate.root,this.storage)}get parent(){const L=this._delegate.parent;return null==L?null:new pi(L,this.storage)}put(L,J){return this._throwIfRoot("put"),new Sa(function ga(B,L,J){return function Oe(B,L,J){return B._throwIfRoot("uploadBytesResumable"),new Zo(B,new Vr(L),J)}(B=(0,ct.m9)(B),L,J)}(this._delegate,L,J),this)}putString(L,J=jt.RAW,he){this._throwIfRoot("putString");const Re=Fn(J,L),rt=Object.assign({},he);return null==rt.contentType&&null!=Re.contentType&&(rt.contentType=Re.contentType),new Sa(new Zo(this._delegate,new Vr(Re.data,!0),rt),this)}listAll(){return function Ss(B){return function ze(B){const L={prefixes:[],items:[]};return lt(B,L).then(()=>L)}(B=(0,ct.m9)(B))}(this._delegate).then(L=>new Zi(L,this.storage))}list(L){return function Qo(B,L){return gn(B=(0,ct.m9)(B),L)}(this._delegate,L||void 0).then(J=>new Zi(J,this.storage))}getMetadata(){return function Ei(B){return function Xn(B){B._throwIfRoot("getMetadata");const L=Yn(B.storage,B._location,At());return B.storage.makeRequestWithTokens(L,Rr)}(B=(0,ct.m9)(B))}(this._delegate)}updateMetadata(L){return function wi(B,L){return function kn(B,L){B._throwIfRoot("updateMetadata");const J=function bi(B,L,J,he){const rt=Ut(L.fullServerUrl(),B.host,B._protocol),zt=ie(J,he),vn=B.maxOperationRetryTime,xn=new on(rt,"PATCH",ke(B,he),vn);return xn.headers={"Content-Type":"application/json; charset=utf-8"},xn.body=zt,xn.errorHandler=Dn(L),xn}(B.storage,B._location,L,At());return B.storage.makeRequestWithTokens(J,Rr)}(B=(0,ct.m9)(B),L)}(this._delegate,L)}getDownloadURL(){return function Is(B){return gr(B=(0,ct.m9)(B))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ma(B){return function zs(B){B._throwIfRoot("deleteObject");const L=function qi(B,L){const he=Ut(L.fullServerUrl(),B.host,B._protocol),zt=new on(he,"DELETE",function dt(Ct,vn){},B.maxOperationRetryTime);return zt.successCodes=[200,204],zt.errorHandler=Dn(L),zt}(B.storage,B._location);return B.storage.makeRequestWithTokens(L,Rr)}(B=(0,ct.m9)(B))}(this._delegate)}_throwIfRoot(L){if(""===this._delegate._location.path)throw en(L)}}class Ii{constructor(L,J){this.app=L,this._delegate=J}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(L){if(Oi(L))throw nr("ref() expected a child path but got a URL, use refFromURL instead.");return new pi($r(this._delegate,L),this)}refFromURL(L){if(!Oi(L))throw nr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{wn.makeFromUrl(L,this._delegate.host)}catch{throw nr("refFromUrl() expected a valid full URL but got an invalid one.")}return new pi($r(this._delegate,L),this)}setMaxUploadRetryTime(L){this._delegate.maxUploadRetryTime=L}setMaxOperationRetryTime(L){this._delegate.maxOperationRetryTime=L}useEmulator(L,J,he={}){!function Si(B,L,J,he={}){!function vs(B,L,J,he={}){B.host=`${L}:${J}`,B._protocol="http";const{mockUserToken:Re}=he;Re&&(B._overrideAuthToken="string"==typeof Re?Re:(0,ct.Sg)(Re,B.app.options.projectId))}(B,L,J,he)}(this._delegate,L,J,he)}}function Oi(B){return/^[A-Za-z]+:\/\//.test(B)}function Ws(B,{instanceIdentifier:L}){const J=B.getProvider("app-compat").getImmediate(),he=B.getProvider("storage").getImmediate({identifier:L});return new Ii(J,he)}!function Do(B){const L={TaskState:Un,TaskEvent:Ji,StringFormat:jt,Storage:Ii,Reference:pi};B.INTERNAL.registerComponent(new it.wA("storage-compat",Ws,"PUBLIC").setServiceProps(L).setMultipleInstances(!0)),B.registerVersion("@firebase/storage-compat","0.3.2")}(ae.Z);var ua=U(6217),Xs=U(9260);function $i(B){const L=function Fs(B){return new w.y(L=>{const J=dt=>L.next(dt);J(B.snapshot);const rt=B.on("state_changed",J);return B.then(dt=>{J(dt),L.complete()},dt=>{J(B.snapshot),(dt=>{L.error(dt)})(dt)}),function(){rt()}}).pipe((0,fe.b)(0))}(B);return{task:B,then:B.then.bind(B),catch:B.catch.bind(B),pause:B.pause.bind(B),cancel:B.cancel.bind(B),resume:B.resume.bind(B),snapshotChanges:()=>L,percentageChanges:()=>L.pipe((0,pe.U)(J=>J.bytesTransferred/J.totalBytes*100))}}function Ks(B){return{getDownloadURL:()=>(0,W.of)(void 0).pipe(De.fc,(0,_e.w)(()=>B.getDownloadURL()),De.iC),getMetadata:()=>(0,W.of)(void 0).pipe(De.fc,(0,_e.w)(()=>B.getMetadata()),De.iC),delete:()=>(0,G.D)(B.delete()),child:L=>Ks(B.child(L)),updateMetadata:L=>(0,G.D)(B.updateMetadata(L)),put:(L,J)=>$i(B.put(L,J)),putString:(L,J,he)=>$i(B.putString(L,J,he)),list:L=>(0,G.D)(B.list(L)),listAll:()=>(0,G.D)(B.listAll())}}const _t=new ge.OlP("angularfire2.storageBucket"),Cn=new ge.OlP("angularfire2.storage.maxUploadRetryTime"),Yo=new ge.OlP("angularfire2.storage.maxOperationRetryTime"),$o=new ge.OlP("angularfire2.storage.use-emulator");let qr=(()=>{class B{constructor(J,he,Re,rt,dt,zt,Ct,vn,xn,ui){const Dr=(0,xe.on)(J,dt,he);this.storage=(0,xe.cc)(`${Dr.name}.storage.${Re}`,"AngularFireStorage",Dr.name,()=>{const Zr=dt.runOutsideAngular(()=>Dr.storage(Re||void 0)),Hr=xn;return Hr&&Zr.useEmulator(...Hr),Ct&&Zr.setMaxUploadRetryTime(Ct),vn&&Zr.setMaxOperationRetryTime(vn),Zr},[Ct,vn])}ref(J){return Ks(this.storage.ref(J))}refFromURL(J){return Ks(this.storage.refFromURL(J))}upload(J,he,Re){return Ks(this.storage.ref(J)).put(he,Re)}}return B.\u0275fac=function(J){return new(J||B)(ge.LFG(xe.Dh),ge.LFG(xe.xv,8),ge.LFG(_t,8),ge.LFG(ge.Lbi),ge.LFG(ge.R0b),ge.LFG(De.HU),ge.LFG(Cn,8),ge.LFG(Yo,8),ge.LFG($o,8),ge.LFG(ua.nm,8))},B.\u0275prov=ge.Yz7({token:B,factory:B.\u0275fac,providedIn:"any"}),B})(),To=(()=>{class B{}return B.\u0275fac=function(J){return new(J||B)},B.\u0275mod=ge.oAB({type:B}),B.\u0275inj=ge.cJS({}),B})(),hs=(()=>{class B{constructor(){Xs.Z.registerVersion("angularfire",De.q4.full,"gcs-compat")}}return B.\u0275fac=function(J){return new(J||B)},B.\u0275mod=ge.oAB({type:B}),B.\u0275inj=ge.cJS({providers:[qr],imports:[To]}),B})()},2011:(Lt,We,U)=>{U.d(We,{Dh:()=>ge,GT:()=>_e,cc:()=>it,hO:()=>ct,on:()=>ae,pX:()=>pe,xv:()=>xe});var w=U(4650),W=U(9260),G=U(4976);Lt=U.hmd(Lt);const fe=["ngOnDestroy"],pe=(nt,Le,St,Ve={})=>new Proxy(nt,{get:(Ee,Ne)=>St.runOutsideAngular(()=>{var ft;if(nt[Ne])return!(null===(ft=Ve?.spy)||void 0===ft)&&ft.get&&Ve.spy.get(Ne,nt[Ne]),nt[Ne];if(fe.indexOf(Ne)>-1)return()=>{};const Et=Le.toPromise().then(et=>{const He=et&&et[Ne];return"function"==typeof He?He.bind(et):He&&He.then?He.then(we=>St.run(()=>we)):St.run(()=>He)});return new Proxy(()=>{},{get:(et,He)=>Et[He],apply:(et,He,we)=>Et.then(Pe=>{var ot;const je=Pe&&Pe(...we);return!(null===(ot=Ve?.spy)||void 0===ot)&&ot.apply&&Ve.spy.apply(Ne,we,je),je})})})}),_e=(nt,Le)=>{Le.forEach(St=>{Object.getOwnPropertyNames(St.prototype||St).forEach(Ve=>{Object.defineProperty(nt.prototype,Ve,Object.getOwnPropertyDescriptor(St.prototype||St,Ve))})})};class De{constructor(Le){return Le}}const ge=new w.OlP("angularfire2.app.options"),xe=new w.OlP("angularfire2.app.name");function ae(nt,Le,St){const Ee="object"==typeof St&&St||{};Ee.name=Ee.name||"string"==typeof St&&St||"[DEFAULT]";const ft=W.Z.apps.filter(Et=>Et&&Et.name===Ee.name)[0]||Le.runOutsideAngular(()=>W.Z.initializeApp(nt,Ee));try{JSON.stringify(nt)!==JSON.stringify(ft.options)&&ue("error",`${ft.name} Firebase App already initialized with different options${Lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new De(ft)}const ue=(nt,...Le)=>{(0,w.X6Q)()&&typeof console<"u"&&console[nt](...Le)},ve={provide:De,useFactory:ae,deps:[ge,w.R0b,[new w.FiY,xe]]};let ct=(()=>{class nt{constructor(St){W.Z.registerVersion("angularfire",G.q4.full,"core"),W.Z.registerVersion("angularfire",G.q4.full,"app-compat"),W.Z.registerVersion("angular",w.q4F.full,St.toString())}static initializeApp(St,Ve){return{ngModule:nt,providers:[{provide:ge,useValue:St},{provide:xe,useValue:Ve}]}}}return nt.\u0275fac=function(St){return new(St||nt)(w.LFG(w.Lbi))},nt.\u0275mod=w.oAB({type:nt}),nt.\u0275inj=w.cJS({providers:[ve]}),nt})();function it(nt,Le,St,Ve,Ee){const[,Ne,ft]=globalThis.\u0275AngularfireInstanceCache.find(Et=>Et[0]===nt)||[];if(Ne)return function Xe(nt,Le){try{return nt.toString()===Le.toString()}catch{return nt===Le}}(Ee,ft)||(Qe("error",`${Le} was already initialized on the ${St} Firebase App with different settings.${mt?" You may need to reload as Firebase is not HMR aware.":""}`),Qe("warn",{is:Ee,was:ft})),Ne;{const Et=Ve();return globalThis.\u0275AngularfireInstanceCache.push([nt,Et,Ee]),Et}}const mt=!!Lt.hot,Qe=(nt,...Le)=>{(0,w.X6Q)()&&typeof console<"u"&&console[nt](...Le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Lt,We,U)=>{U.d(We,{q4:()=>si,iC:()=>ha,fc:()=>Wu,HU:()=>Na,vb:()=>Ai,JM:()=>Ia});var w=U(4650),W=U(259),G=U(5861),fe=U(6881),pe=U(2090),_e=U(4859),De=U(1877);let xe,ae;const ct=new WeakMap,it=new WeakMap,Xe=new WeakMap,mt=new WeakMap,Qe=new WeakMap;let St={get(D,M,j){if(D instanceof IDBTransaction){if("done"===M)return it.get(D);if("objectStoreNames"===M)return D.objectStoreNames||Xe.get(D);if("store"===M)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return ft(D[M])},set:(D,M,j)=>(D[M]=j,!0),has:(D,M)=>D instanceof IDBTransaction&&("done"===M||"store"===M)||M in D};function Ne(D){return"function"==typeof D?function Ee(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...M){return D.apply(Et(this),M),ft(ct.get(this))}:function(...M){return ft(D.apply(Et(this),M))}:function(M,...j){const ne=D.call(Et(this),M,...j);return Xe.set(ne,M.sort?M.sort():[M]),ft(ne)}}(D):(D instanceof IDBTransaction&&function Le(D){if(it.has(D))return;const M=new Promise((j,ne)=>{const Ce=()=>{D.removeEventListener("complete",Ge),D.removeEventListener("error",ut),D.removeEventListener("abort",ut)},Ge=()=>{j(),Ce()},ut=()=>{ne(D.error||new DOMException("AbortError","AbortError")),Ce()};D.addEventListener("complete",Ge),D.addEventListener("error",ut),D.addEventListener("abort",ut)});it.set(D,M)}(D),((D,M)=>M.some(j=>D instanceof j))(D,function ue(){return xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,St):D)}function ft(D){if(D instanceof IDBRequest)return function nt(D){const M=new Promise((j,ne)=>{const Ce=()=>{D.removeEventListener("success",Ge),D.removeEventListener("error",ut)},Ge=()=>{j(ft(D.result)),Ce()},ut=()=>{ne(D.error),Ce()};D.addEventListener("success",Ge),D.addEventListener("error",ut)});return M.then(j=>{j instanceof IDBCursor&&ct.set(j,D)}).catch(()=>{}),Qe.set(M,D),M}(D);if(mt.has(D))return mt.get(D);const M=Ne(D);return M!==D&&(mt.set(D,M),Qe.set(M,D)),M}const Et=D=>Qe.get(D),we=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],ot=new Map;function je(D,M){if(!(D instanceof IDBDatabase)||M in D||"string"!=typeof M)return;if(ot.get(M))return ot.get(M);const j=M.replace(/FromIndex$/,""),ne=M!==j,Ce=Pe.includes(j);if(!(j in(ne?IDBIndex:IDBObjectStore).prototype)||!Ce&&!we.includes(j))return;const Ge=function(){var ut=(0,G.Z)(function*(qt,...Bt){const fn=this.transaction(qt,Ce?"readwrite":"readonly");let Gn=fn.store;return ne&&(Gn=Gn.index(Bt.shift())),(yield Promise.all([Gn[j](...Bt),Ce&&fn.done]))[0]});return function(Bt){return ut.apply(this,arguments)}}();return ot.set(M,Ge),Ge}!function Ve(D){St=D(St)}(D=>({...D,get:(M,j,ne)=>je(M,j)||D.get(M,j,ne),has:(M,j)=>!!je(M,j)||D.has(M,j)}));const Mt="@firebase/installations",On="w:0.6.4",Rn="FIS_v2",jn=new pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function wn(D){return D instanceof pe.ZR&&D.code.includes("request-failed")}function ar({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Qn(D){return{token:D.token,requestStatus:2,expiresIn:$n(D.expiresIn),creationTime:Date.now()}}function Sr(D,M){return yr.apply(this,arguments)}function yr(){return(yr=(0,G.Z)(function*(D,M){const ne=(yield M.json()).error;return jn.create("request-failed",{requestName:D,serverCode:ne.code,serverMessage:ne.message,serverStatus:ne.status})})).apply(this,arguments)}function Mi({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function dr(D,{refreshToken:M}){const j=Mi(D);return j.append("Authorization",function ur(D){return`${Rn} ${D}`}(M)),j}function Lr(D){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,G.Z)(function*(D){const M=yield D();return M.status>=500&&M.status<600?D():M})).apply(this,arguments)}function $n(D){return Number(D.replace("s","000"))}function Ut(D,M){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,G.Z)(function*({appConfig:D,heartbeatServiceProvider:M},{fid:j}){const ne=ar(D),Ce=Mi(D),Ge=M.getImmediate({optional:!0});if(Ge){const fn=yield Ge.getHeartbeatsHeader();fn&&Ce.append("x-firebase-client",fn)}const qt={method:"POST",headers:Ce,body:JSON.stringify({fid:j,authVersion:Rn,appId:D.appId,sdkVersion:On})},Bt=yield Lr(()=>fetch(ne,qt));if(Bt.ok){const fn=yield Bt.json();return{fid:fn.fid||j,registrationStatus:2,refreshToken:fn.refreshToken,authToken:Qn(fn.authToken)}}throw yield Sr("Create Installation",Bt)})).apply(this,arguments)}function Jr(D){return new Promise(M=>{setTimeout(M,D)})}const ls=/^[cdef][\w-]{21}$/;function ti(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const j=function hr(D){return function Ur(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return ls.test(j)?j:""}catch{return""}}function Ln(D){return`${D.appName}!${D.appId}`}const Ht=new Map;function nn(D,M){const j=Ln(D);Er(j,M),function Br(D,M){const j=function wr(){return!jt&&"BroadcastChannel"in self&&(jt=new BroadcastChannel("[Firebase] FID Change"),jt.onmessage=D=>{Er(D.data.key,D.data.fid)}),jt}();j&&j.postMessage({key:D,fid:M}),function Fn(){0===Ht.size&&jt&&(jt.close(),jt=null)}()}(j,M)}function Er(D,M){const j=Ht.get(D);if(j)for(const ne of j)ne(M)}let jt=null;const Ar="firebase-installations-store";let Ir=null;function Wr(){return Ir||(Ir=function et(D,M,{blocked:j,upgrade:ne,blocking:Ce,terminated:Ge}={}){const ut=indexedDB.open(D,M),qt=ft(ut);return ne&&ut.addEventListener("upgradeneeded",Bt=>{ne(ft(ut.result),Bt.oldVersion,Bt.newVersion,ft(ut.transaction))}),j&&ut.addEventListener("blocked",()=>j()),qt.then(Bt=>{Ge&&Bt.addEventListener("close",()=>Ge()),Ce&&Bt.addEventListener("versionchange",()=>Ce())}).catch(()=>{}),qt}("firebase-installations-database",1,{upgrade:(D,M)=>{0===M&&D.createObjectStore(Ar)}})),Ir}function _r(D,M){return zr.apply(this,arguments)}function zr(){return(zr=(0,G.Z)(function*(D,M){const j=Ln(D),Ce=(yield Wr()).transaction(Ar,"readwrite"),Ge=Ce.objectStore(Ar),ut=yield Ge.get(j);return yield Ge.put(M,j),yield Ce.done,(!ut||ut.fid!==M.fid)&&nn(D,M.fid),M})).apply(this,arguments)}function Vr(D){return rr.apply(this,arguments)}function rr(){return(rr=(0,G.Z)(function*(D){const M=Ln(D),ne=(yield Wr()).transaction(Ar,"readwrite");yield ne.objectStore(Ar).delete(M),yield ne.done})).apply(this,arguments)}function ni(D,M){return ri.apply(this,arguments)}function ri(){return(ri=(0,G.Z)(function*(D,M){const j=Ln(D),Ce=(yield Wr()).transaction(Ar,"readwrite"),Ge=Ce.objectStore(Ar),ut=yield Ge.get(j),qt=M(ut);return void 0===qt?yield Ge.delete(j):yield Ge.put(qt,j),yield Ce.done,qt&&(!ut||ut.fid!==qt.fid)&&nn(D,qt.fid),qt})).apply(this,arguments)}function ye(D){return le.apply(this,arguments)}function le(){return(le=(0,G.Z)(function*(D){let M;const j=yield ni(D.appConfig,ne=>{const Ce=Te(ne),Ge=Ye(D,Ce);return M=Ge.registrationPromise,Ge.installationEntry});return""===j.fid?{installationEntry:yield M}:{installationEntry:j,registrationPromise:M}})).apply(this,arguments)}function Te(D){return se(D||{fid:ti(),registrationStatus:0})}function Ye(D,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(jn.create("app-offline"))};const j={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},ne=function Fe(D,M){return At.apply(this,arguments)}(D,j);return{installationEntry:j,registrationPromise:ne}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:ln(D)}:{installationEntry:M}}function At(){return(At=(0,G.Z)(function*(D,M){try{const j=yield Ut(D,M);return _r(D.appConfig,j)}catch(j){throw wn(j)&&409===j.customData.serverCode?yield Vr(D.appConfig):yield _r(D.appConfig,{fid:M.fid,registrationStatus:0}),j}})).apply(this,arguments)}function ln(D){return In.apply(this,arguments)}function In(){return(In=(0,G.Z)(function*(D){let M=yield ir(D.appConfig);for(;1===M.registrationStatus;)yield Jr(100),M=yield ir(D.appConfig);if(0===M.registrationStatus){const{installationEntry:j,registrationPromise:ne}=yield ye(D);return ne||j}return M})).apply(this,arguments)}function ir(D){return ni(D,M=>{if(!M)throw jn.create("installation-not-found");return se(M)})}function se(D){return function ie(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ee(D,M){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,G.Z)(function*({appConfig:D,heartbeatServiceProvider:M},j){const ne=st(D,j),Ce=dr(D,j),Ge=M.getImmediate({optional:!0});if(Ge){const fn=yield Ge.getHeartbeatsHeader();fn&&Ce.append("x-firebase-client",fn)}const qt={method:"POST",headers:Ce,body:JSON.stringify({installation:{sdkVersion:On,appId:D.appId}})},Bt=yield Lr(()=>fetch(ne,qt));if(Bt.ok)return Qn(yield Bt.json());throw yield Sr("Generate Auth Token",Bt)})).apply(this,arguments)}function st(D,{fid:M}){return`${ar(D)}/${M}/authTokens:generate`}function Pt(D){return on.apply(this,arguments)}function on(){return(on=(0,G.Z)(function*(D,M=!1){let j;const ne=yield ni(D.appConfig,Ge=>{if(!Dn(Ge))throw jn.create("not-registered");const ut=Ge.authToken;if(!M&&Yn(ut))return Ge;if(1===ut.requestStatus)return j=Ue(D,M),Ge;{if(!navigator.onLine)throw jn.create("app-offline");const qt=Pn(Ge);return j=vt(D,qt),qt}});return j?yield j:ne.authToken})).apply(this,arguments)}function Ue(D,M){return ke.apply(this,arguments)}function ke(){return(ke=(0,G.Z)(function*(D,M){let j=yield yt(D.appConfig);for(;1===j.authToken.requestStatus;)yield Jr(100),j=yield yt(D.appConfig);const ne=j.authToken;return 0===ne.requestStatus?Pt(D,M):ne})).apply(this,arguments)}function yt(D){return ni(D,M=>{if(!Dn(M))throw jn.create("not-registered");return function _i(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function vt(D,M){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,G.Z)(function*(D,M){try{const j=yield ee(D,M),ne=Object.assign(Object.assign({},M),{authToken:j});return yield _r(D.appConfig,ne),j}catch(j){if(!wn(j)||401!==j.customData.serverCode&&404!==j.customData.serverCode){const ne=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield _r(D.appConfig,ne)}else yield Vr(D.appConfig);throw j}})).apply(this,arguments)}function Dn(D){return void 0!==D&&2===D.registrationStatus}function Yn(D){return 2===D.requestStatus&&!function br(D){const M=Date.now();return M<D.creationTime||D.creationTime+D.expiresIn<M+36e5}(D)}function Pn(D){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:M})}function qi(){return(qi=(0,G.Z)(function*(D){const M=D,{installationEntry:j,registrationPromise:ne}=yield ye(M);return ne?ne.catch(console.error):Pt(M).catch(console.error),j.fid})).apply(this,arguments)}function Ns(){return(Ns=(0,G.Z)(function*(D,M=!1){const j=D;return yield zn(j),(yield Pt(j,M)).token})).apply(this,arguments)}function zn(D){return fi.apply(this,arguments)}function fi(){return(fi=(0,G.Z)(function*(D){const{registrationPromise:M}=yield ye(D);M&&(yield M)})).apply(this,arguments)}function Kr(D){return jn.create("missing-app-config-values",{valueName:D})}const ii="installations",Ci=D=>{const M=D.getProvider("app").getImmediate(),j=function ks(D){if(!D||!D.options)throw Kr("App Configuration");if(!D.name)throw Kr("App Name");const M=["projectId","apiKey","appId"];for(const j of M)if(!D.options[j])throw Kr(j);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(M);return{app:M,appConfig:j,heartbeatServiceProvider:(0,fe._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},es=D=>{const M=D.getProvider("app").getImmediate(),j=(0,fe._getProvider)(M,ii).getImmediate();return{getId:()=>function bi(D){return qi.apply(this,arguments)}(j),getToken:Ce=>function Ps(D){return Ns.apply(this,arguments)}(j,Ce)}};(function Rr(){(0,fe._registerComponent)(new _e.wA(ii,Ci,"PUBLIC")),(0,fe._registerComponent)(new _e.wA("installations-internal",es,"PRIVATE"))})(),(0,fe.registerVersion)(Mt,"0.6.4"),(0,fe.registerVersion)(Mt,"0.6.4","esm2017");const ms="@firebase/remote-config",sr=new pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vs{constructor(M,j,ne,Ce){this.client=M,this.storage=j,this.storageCache=ne,this.logger=Ce}isCachedDataFresh(M,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ne=Date.now()-j,Ce=ne<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${Ce}.`),Ce}fetch(M){var j=this;return(0,G.Z)(function*(){const[ne,Ce]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(Ce&&j.isCachedDataFresh(M.cacheMaxAgeMillis,ne))return Ce;M.eTag=Ce&&Ce.eTag;const Ge=yield j.client.fetch(M),ut=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ge.status&&ut.push(j.storage.setLastSuccessfulFetchResponse(Ge)),yield Promise.all(ut),Ge})()}}function Es(D=navigator){return D.languages&&D.languages[0]||D.language}class uo{constructor(M,j,ne,Ce,Ge,ut){this.firebaseInstallations=M,this.sdkVersion=j,this.namespace=ne,this.projectId=Ce,this.apiKey=Ge,this.appId=ut}fetch(M){var j=this;return(0,G.Z)(function*(){const[ne,Ce]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),ut=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,qt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},Bt={sdk_version:j.sdkVersion,app_instance_id:ne,app_instance_id_token:Ce,app_id:j.appId,language_code:Es()},fn={method:"POST",headers:qt,body:JSON.stringify(Bt)},Gn=fetch(ut,fn),er=new Promise((kr,qs)=>{M.signal.addEventListener(()=>{const vl=new Error("The operation was aborted.");vl.name="AbortError",qs(vl)})});let ta;try{yield Promise.race([Gn,er]),ta=yield Gn}catch(kr){let qs="fetch-client-network";throw"AbortError"===kr?.name&&(qs="fetch-timeout"),sr.create(qs,{originalErrorMessage:kr?.message})}let bs=ta.status;const Da=ta.headers.get("ETag")||void 0;let Ri,na;if(200===ta.status){let kr;try{kr=yield ta.json()}catch(qs){throw sr.create("fetch-client-parse",{originalErrorMessage:qs?.message})}Ri=kr.entries,na=kr.state}if("INSTANCE_STATE_UNSPECIFIED"===na?bs=500:"NO_CHANGE"===na?bs=304:("NO_TEMPLATE"===na||"EMPTY_CONFIG"===na)&&(Ri={}),304!==bs&&200!==bs)throw sr.create("fetch-status",{httpStatus:bs});return{status:bs,eTag:Da,config:Ri}})()}}class co{constructor(M,j){this.client=M,this.storage=j}fetch(M){var j=this;return(0,G.Z)(function*(){const ne=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(M,ne)})()}attemptFetch(M,{throttleEndTimeMillis:j,backoffCount:ne}){var Ce=this;return(0,G.Z)(function*(){yield function lo(D,M){return new Promise((j,ne)=>{const Ce=Math.max(M-Date.now(),0),Ge=setTimeout(j,Ce);D.addEventListener(()=>{clearTimeout(Ge),ne(sr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,j);try{const Ge=yield Ce.client.fetch(M);return yield Ce.storage.deleteThrottleMetadata(),Ge}catch(Ge){if(!function ws(D){if(!(D instanceof pe.ZR&&D.customData))return!1;const M=Number(D.customData.httpStatus);return 429===M||500===M||503===M||504===M}(Ge))throw Ge;const ut={throttleEndTimeMillis:Date.now()+(0,pe.$s)(ne),backoffCount:ne+1};return yield Ce.storage.setThrottleMetadata(ut),Ce.attemptFetch(M,ut)}})()}}class ga{constructor(M,j,ne,Ce,Ge){this.app=M,this._client=j,this._storageCache=ne,this._storage=Ce,this._logger=Ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ei(D,M){const j=D.target.error||void 0;return sr.create(M,{originalErrorMessage:j&&j?.message})}const wi="app_namespace_store";class ma{constructor(M,j,ne,Ce=function Is(){return new Promise((D,M)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ne=>{M(Ei(ne,"storage-open"))},j.onsuccess=ne=>{D(ne.target.result)},j.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(wi,{keyPath:"compositeKey"})}}catch(j){M(sr.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=M,this.appName=j,this.namespace=ne,this.openDbPromise=Ce}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var j=this;return(0,G.Z)(function*(){const ne=yield j.openDbPromise;return new Promise((Ce,Ge)=>{const qt=ne.transaction([wi],"readonly").objectStore(wi),Bt=j.createCompositeKey(M);try{const fn=qt.get(Bt);fn.onerror=Gn=>{Ge(Ei(Gn,"storage-get"))},fn.onsuccess=Gn=>{const er=Gn.target.result;Ce(er?er.value:void 0)}}catch(fn){Ge(sr.create("storage-get",{originalErrorMessage:fn?.message}))}})})()}set(M,j){var ne=this;return(0,G.Z)(function*(){const Ce=yield ne.openDbPromise;return new Promise((Ge,ut)=>{const Bt=Ce.transaction([wi],"readwrite").objectStore(wi),fn=ne.createCompositeKey(M);try{const Gn=Bt.put({compositeKey:fn,value:j});Gn.onerror=er=>{ut(Ei(er,"storage-set"))},Gn.onsuccess=()=>{Ge()}}catch(Gn){ut(sr.create("storage-set",{originalErrorMessage:Gn?.message}))}})})()}delete(M){var j=this;return(0,G.Z)(function*(){const ne=yield j.openDbPromise;return new Promise((Ce,Ge)=>{const qt=ne.transaction([wi],"readwrite").objectStore(wi),Bt=j.createCompositeKey(M);try{const fn=qt.delete(Bt);fn.onerror=Gn=>{Ge(Ei(Gn,"storage-delete"))},fn.onsuccess=()=>{Ce()}}catch(fn){Ge(sr.create("storage-delete",{originalErrorMessage:fn?.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class $r{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,G.Z)(function*(){const j=M.storage.getLastFetchStatus(),ne=M.storage.getLastSuccessfulFetchTimestampMillis(),Ce=M.storage.getActiveConfig(),Ge=yield j;Ge&&(M.lastFetchStatus=Ge);const ut=yield ne;ut&&(M.lastSuccessfulFetchTimestampMillis=ut);const qt=yield Ce;qt&&(M.activeConfig=qt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function Ui(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,G.Z)(function*(){if(!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch{return!1}})).apply(this,arguments)}let Gs,Jn;!function ai(){(0,fe._registerComponent)(new _e.wA("remote-config",function D(M,{instanceIdentifier:j}){const ne=M.getProvider("app").getImmediate(),Ce=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw sr.create("registration-window");if(!(0,pe.hl)())throw sr.create("indexed-db-unavailable");const{projectId:Ge,apiKey:ut,appId:qt}=ne.options;if(!Ge)throw sr.create("registration-project-id");if(!ut)throw sr.create("registration-api-key");if(!qt)throw sr.create("registration-app-id");const Bt=new ma(qt,ne.name,j=j||"firebase"),fn=new $r(Bt),Gn=new De.Yd(ms);Gn.logLevel=De.in.ERROR;const er=new uo(Ce,fe.SDK_VERSION,j,Ge,ut,qt),ta=new co(er,Bt),bs=new vs(ta,Bt,fn,Gn),Da=new ga(ne,bs,fn,Bt,Gn);return function Xn(D){const M=(0,pe.m9)(D);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Da),Da},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(ms,"0.4.4"),(0,fe.registerVersion)(ms,"0.4.4","esm2017")}();const pi=new WeakMap,Ii=new WeakMap,Oi=new WeakMap,ki=new WeakMap,dn=new WeakMap;let Do={get(D,M,j){if(D instanceof IDBTransaction){if("done"===M)return Ii.get(D);if("objectStoreNames"===M)return D.objectStoreNames||Oi.get(D);if("store"===M)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return $i(D[M])},set:(D,M,j)=>(D[M]=j,!0),has:(D,M)=>D instanceof IDBTransaction&&("done"===M||"store"===M)||M in D};function Fs(D){return"function"==typeof D?function Xs(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Zi(){return Jn||(Jn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...M){return D.apply(Ks(this),M),$i(pi.get(this))}:function(...M){return $i(D.apply(Ks(this),M))}:function(M,...j){const ne=D.call(Ks(this),M,...j);return Oi.set(ne,M.sort?M.sort():[M]),$i(ne)}}(D):(D instanceof IDBTransaction&&function Ws(D){if(Ii.has(D))return;const M=new Promise((j,ne)=>{const Ce=()=>{D.removeEventListener("complete",Ge),D.removeEventListener("error",ut),D.removeEventListener("abort",ut)},Ge=()=>{j(),Ce()},ut=()=>{ne(D.error||new DOMException("AbortError","AbortError")),Ce()};D.addEventListener("complete",Ge),D.addEventListener("error",ut),D.addEventListener("abort",ut)});Ii.set(D,M)}(D),((D,M)=>M.some(j=>D instanceof j))(D,function Sa(){return Gs||(Gs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,Do):D)}function $i(D){if(D instanceof IDBRequest)return function Ys(D){const M=new Promise((j,ne)=>{const Ce=()=>{D.removeEventListener("success",Ge),D.removeEventListener("error",ut)},Ge=()=>{j($i(D.result)),Ce()},ut=()=>{ne(D.error),Ce()};D.addEventListener("success",Ge),D.addEventListener("error",ut)});return M.then(j=>{j instanceof IDBCursor&&pi.set(j,D)}).catch(()=>{}),dn.set(M,D),M}(D);if(ki.has(D))return ki.get(D);const M=Fs(D);return M!==D&&(ki.set(D,M),dn.set(M,D)),M}const Ks=D=>dn.get(D);function _t(D,M,{blocked:j,upgrade:ne,blocking:Ce,terminated:Ge}={}){const ut=indexedDB.open(D,M),qt=$i(ut);return ne&&ut.addEventListener("upgradeneeded",Bt=>{ne($i(ut.result),Bt.oldVersion,Bt.newVersion,$i(ut.transaction))}),j&&ut.addEventListener("blocked",()=>j()),qt.then(Bt=>{Ge&&Bt.addEventListener("close",()=>Ge()),Ce&&Bt.addEventListener("versionchange",()=>Ce())}).catch(()=>{}),qt}function Cn(D,{blocked:M}={}){const j=indexedDB.deleteDatabase(D);return M&&j.addEventListener("blocked",()=>M()),$i(j).then(()=>{})}const Yo=["get","getKey","getAll","getAllKeys","count"],$o=["put","add","delete","clear"],qr=new Map;function Xo(D,M){if(!(D instanceof IDBDatabase)||M in D||"string"!=typeof M)return;if(qr.get(M))return qr.get(M);const j=M.replace(/FromIndex$/,""),ne=M!==j,Ce=$o.includes(j);if(!(j in(ne?IDBIndex:IDBObjectStore).prototype)||!Ce&&!Yo.includes(j))return;const Ge=function(){var ut=(0,G.Z)(function*(qt,...Bt){const fn=this.transaction(qt,Ce?"readwrite":"readonly");let Gn=fn.store;return ne&&(Gn=Gn.index(Bt.shift())),(yield Promise.all([Gn[j](...Bt),Ce&&fn.done]))[0]});return function(Bt){return ut.apply(this,arguments)}}();return qr.set(M,Ge),Ge}!function ua(D){Do=D(Do)}(D=>({...D,get:(M,j,ne)=>Xo(M,j)||D.get(M,j,ne),has:(M,j)=>!!Xo(M,j)||D.has(M,j)}));const To="/firebase-messaging-sw.js",hs="/firebase-cloud-messaging-push-scope",B="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",J="google.c.a.c_id",he="google.c.a.c_l",Re="google.c.a.ts",rt="google.c.a.e";var zt=(()=>{return(D=zt||(zt={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",zt;var D})();function Ct(D){const M=new Uint8Array(D);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vn(D){const j=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob(j),Ce=new Uint8Array(ne.length);for(let Ge=0;Ge<ne.length;++Ge)Ce[Ge]=ne.charCodeAt(Ge);return Ce}const xn="fcm_token_details_db",Dr="fcm_token_object_Store";function Zr(D){return Hr.apply(this,arguments)}function Hr(){return Hr=(0,G.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ge=>Ge.name).includes(xn))return null;let M=null;return(yield _t(xn,5,{upgrade:(ne=(0,G.Z)(function*(Ce,Ge,ut,qt){var Bt;if(Ge<2||!Ce.objectStoreNames.contains(Dr))return;const fn=qt.objectStore(Dr),Gn=yield fn.index("fcmSenderId").get(D);if(yield fn.clear(),Gn)if(2===Ge){const er=Gn;if(!er.auth||!er.p256dh||!er.endpoint)return;M={token:er.fcmToken,createTime:null!==(Bt=er.createTime)&&void 0!==Bt?Bt:Date.now(),subscriptionOptions:{auth:er.auth,p256dh:er.p256dh,endpoint:er.endpoint,swScope:er.swScope,vapidKey:"string"==typeof er.vapidKey?er.vapidKey:Ct(er.vapidKey)}}}else if(3===Ge){const er=Gn;M={token:er.fcmToken,createTime:er.createTime,subscriptionOptions:{auth:Ct(er.auth),p256dh:Ct(er.p256dh),endpoint:er.endpoint,swScope:er.swScope,vapidKey:Ct(er.vapidKey)}}}else if(4===Ge){const er=Gn;M={token:er.fcmToken,createTime:er.createTime,subscriptionOptions:{auth:Ct(er.auth),p256dh:Ct(er.p256dh),endpoint:er.endpoint,swScope:er.swScope,vapidKey:Ct(er.vapidKey)}}}}),function(Ge,ut,qt,Bt){return ne.apply(this,arguments)})})).close(),yield Cn(xn),yield Cn("fcm_vapid_details_db"),yield Cn("undefined"),ts(M)?M:null;var ne}),Hr.apply(this,arguments)}function ts(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:M}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const xr="firebase-messaging-store";let Qr=null;function li(){return Qr||(Qr=_t("firebase-messaging-database",1,{upgrade:(D,M)=>{0===M&&D.createObjectStore(xr)}})),Qr}function Bs(D){return ns.apply(this,arguments)}function ns(){return(ns=(0,G.Z)(function*(D){const M=N(D),ne=yield(yield li()).transaction(xr).objectStore(xr).get(M);if(ne)return ne;{const Ce=yield Zr(D.appConfig.senderId);if(Ce)return yield bo(D,Ce),Ce}})).apply(this,arguments)}function bo(D,M){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,G.Z)(function*(D,M){const j=N(D),Ce=(yield li()).transaction(xr,"readwrite");return yield Ce.objectStore(xr).put(M,j),yield Ce.done,M})).apply(this,arguments)}function R(D){return H.apply(this,arguments)}function H(){return(H=(0,G.Z)(function*(D){const M=N(D),ne=(yield li()).transaction(xr,"readwrite");yield ne.objectStore(xr).delete(M),yield ne.done})).apply(this,arguments)}function N({appConfig:D}){return D.appId}const S=new pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function g(D,M){return y.apply(this,arguments)}function y(){return(y=(0,G.Z)(function*(D,M){const j=yield Be(D),ne=bt(M),Ce={method:"POST",headers:j,body:JSON.stringify(ne)};let Ge;try{Ge=yield(yield fetch(ce(D.appConfig),Ce)).json()}catch(ut){throw S.create("token-subscribe-failed",{errorInfo:ut?.toString()})}if(Ge.error)throw S.create("token-subscribe-failed",{errorInfo:Ge.error.message});if(!Ge.token)throw S.create("token-subscribe-no-token");return Ge.token})).apply(this,arguments)}function x(D,M){return z.apply(this,arguments)}function z(){return(z=(0,G.Z)(function*(D,M){const j=yield Be(D),ne=bt(M.subscriptionOptions),Ce={method:"PATCH",headers:j,body:JSON.stringify(ne)};let Ge;try{Ge=yield(yield fetch(`${ce(D.appConfig)}/${M.token}`,Ce)).json()}catch(ut){throw S.create("token-update-failed",{errorInfo:ut?.toString()})}if(Ge.error)throw S.create("token-update-failed",{errorInfo:Ge.error.message});if(!Ge.token)throw S.create("token-update-no-token");return Ge.token})).apply(this,arguments)}function X(D,M){return de.apply(this,arguments)}function de(){return(de=(0,G.Z)(function*(D,M){const ne={method:"DELETE",headers:yield Be(D)};try{const Ge=yield(yield fetch(`${ce(D.appConfig)}/${M}`,ne)).json();if(Ge.error)throw S.create("token-unsubscribe-failed",{errorInfo:Ge.error.message})}catch(Ce){throw S.create("token-unsubscribe-failed",{errorInfo:Ce?.toString()})}})).apply(this,arguments)}function ce({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Be(D){return tt.apply(this,arguments)}function tt(){return(tt=(0,G.Z)(function*({appConfig:D,installations:M}){const j=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function bt({p256dh:D,auth:M,endpoint:j,vapidKey:ne}){const Ce={web:{endpoint:j,auth:M,p256dh:D}};return ne!==B&&(Ce.web.applicationPubKey=ne),Ce}const Gt=6048e5;function Tn(D){return bn.apply(this,arguments)}function bn(){return(bn=(0,G.Z)(function*(D){const M=yield Li(D.swRegistration,D.vapidKey),j={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:M.endpoint,auth:Ct(M.getKey("auth")),p256dh:Ct(M.getKey("p256dh"))},ne=yield Bs(D.firebaseDependencies);if(ne){if(ho(ne.subscriptionOptions,j))return Date.now()>=ne.createTime+Gt?An(D,{token:ne.token,createTime:Date.now(),subscriptionOptions:j}):ne.token;try{yield X(D.firebaseDependencies,ne.token)}catch(Ce){console.warn(Ce)}return ji(D.firebaseDependencies,j)}return ji(D.firebaseDependencies,j)})).apply(this,arguments)}function _n(D){return hn.apply(this,arguments)}function hn(){return(hn=(0,G.Z)(function*(D){const M=yield Bs(D.firebaseDependencies);M&&(yield X(D.firebaseDependencies,M.token),yield R(D.firebaseDependencies));const j=yield D.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()})).apply(this,arguments)}function An(D,M){return vr.apply(this,arguments)}function vr(){return(vr=(0,G.Z)(function*(D,M){try{const j=yield x(D.firebaseDependencies,M),ne=Object.assign(Object.assign({},M),{token:j,createTime:Date.now()});return yield bo(D.firebaseDependencies,ne),j}catch(j){throw yield _n(D),j}})).apply(this,arguments)}function ji(D,M){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,G.Z)(function*(D,M){const ne={token:yield g(D,M),createTime:Date.now(),subscriptionOptions:M};return yield bo(D,ne),ne.token})).apply(this,arguments)}function Li(D,M){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,G.Z)(function*(D,M){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vn(M)})})).apply(this,arguments)}function ho(D,M){return M.vapidKey===D.vapidKey&&M.endpoint===D.endpoint&&M.auth===D.auth&&M.p256dh===D.p256dh}function qn(D){const M={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function fo(D,M){if(!M.notification)return;D.notification={};const j=M.notification.title;j&&(D.notification.title=j);const ne=M.notification.body;ne&&(D.notification.body=ne);const Ce=M.notification.image;Ce&&(D.notification.image=Ce);const Ge=M.notification.icon;Ge&&(D.notification.icon=Ge)}(M,D),function jo(D,M){!M.data||(D.data=M.data)}(M,D),function zi(D,M){var j,ne,Ce,Ge,ut;if(!(M.fcmOptions||null!==(j=M.notification)&&void 0!==j&&j.click_action))return;D.fcmOptions={};const qt=null!==(Ce=null===(ne=M.fcmOptions)||void 0===ne?void 0:ne.link)&&void 0!==Ce?Ce:null===(Ge=M.notification)||void 0===Ge?void 0:Ge.click_action;qt&&(D.fcmOptions.link=qt);const Bt=null===(ut=M.fcmOptions)||void 0===ut?void 0:ut.analytics_label;Bt&&(D.fcmOptions.analyticsLabel=Bt)}(M,D),M}function ya(D){return"object"==typeof D&&!!D&&J in D}function po(D,M){const j=[];for(let ne=0;ne<D.length;ne++)j.push(D.charAt(ne)),ne<M.length&&j.push(M.charAt(ne));return j.join("")}function eo(D){return S.create("missing-app-config-values",{valueName:D})}po("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),po("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Jo{constructor(M,j,ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ce=function Js(D){if(!D||!D.options)throw eo("App Configuration Object");if(!D.name)throw eo("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:j}=D;for(const ne of M)if(!j[ne])throw eo(ne);return{appName:D.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:Ce,installations:j,analyticsProvider:ne}}_delete(){return Promise.resolve()}}function Yt(D){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,G.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(To,{scope:hs}),D.swRegistration.update().catch(()=>{})}catch(M){throw S.create("failed-service-worker-registration",{browserErrorMessage:M?.message})}})).apply(this,arguments)}function rn(D,M){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,G.Z)(function*(D,M){if(!M&&!D.swRegistration&&(yield Yt(D)),M||!D.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw S.create("invalid-sw-registration");D.swRegistration=M}})).apply(this,arguments)}function Gr(D,M){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,G.Z)(function*(D,M){M?D.vapidKey=M:D.vapidKey||(D.vapidKey=B)})).apply(this,arguments)}function to(){return(to=(0,G.Z)(function*(D,M){if(!navigator)throw S.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw S.create("permission-blocked");return yield Gr(D,M?.vapidKey),yield rn(D,M?.serviceWorkerRegistration),Tn(D)})).apply(this,arguments)}function or(D,M,j){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,G.Z)(function*(D,M,j){const ne=Ra(M);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(ne,{message_id:j[J],message_name:j[he],message_time:j[Re],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ra(D){switch(D){case zt.NOTIFICATION_CLICKED:return"notification_open";case zt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ds(){return(Ds=(0,G.Z)(function*(D,M){const j=M.data;if(!j.isFirebaseMessaging)return;D.onMessageHandler&&j.messageType===zt.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(qn(j)):D.onMessageHandler.next(qn(j)));const ne=j.data;ya(ne)&&"1"===ne[rt]&&(yield or(D,j.messageType,ne))})).apply(this,arguments)}const rs="@firebase/messaging",_a=D=>{const M=new Jo(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function Gi(D,M){return Ds.apply(this,arguments)}(M,j)),M},Va=D=>{const M=D.getProvider("messaging").getImmediate();return{getToken:ne=>function Bi(D,M){return to.apply(this,arguments)}(M,ne)}};function Eu(){return Di.apply(this,arguments)}function Di(){return(Di=(0,G.Z)(function*(){try{yield(0,pe.eu)()}catch{return!1}return typeof window<"u"&&(0,pe.hl)()&&(0,pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ll(){(0,fe._registerComponent)(new _e.wA("messaging",_a,"PUBLIC")),(0,fe._registerComponent)(new _e.wA("messaging-internal",Va,"PRIVATE")),(0,fe.registerVersion)(rs,"0.12.4"),(0,fe.registerVersion)(rs,"0.12.4","esm2017")}();const Nr="analytics",eu="firebase_id",va="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$t="https://www.googletagmanager.com/gtag/js",Ke=new De.Yd("@firebase/analytics"),Tr=new pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function $a(D){if(!D.startsWith($t)){const M=Tr.create("invalid-gtag-resource",{gtagURL:D});return Ke.warn(M.message),""}return D}function la(D){return Promise.all(D.map(M=>M.catch(j=>j)))}function ja(D,M){const j=function Ea(D,M){let j;return window.trustedTypes&&(j=window.trustedTypes.createPolicy(D,M)),j}("firebase-js-sdk-policy",{createScriptURL:$a}),ne=document.createElement("script"),Ce=`${$t}?l=${D}&id=${M}`;ne.src=j?j?.createScriptURL(Ce):Ce,ne.async=!0,document.head.appendChild(ne)}function cl(D,M,j,ne,Ce,Ge){return tu.apply(this,arguments)}function tu(){return(tu=(0,G.Z)(function*(D,M,j,ne,Ce,Ge){const ut=ne[Ce];try{if(ut)yield M[ut];else{const Bt=(yield la(j)).find(fn=>fn.measurementId===Ce);Bt&&(yield M[Bt.appId])}}catch(qt){Ke.error(qt)}D("config",Ce,Ge)})).apply(this,arguments)}function Iu(D,M,j,ne,Ce){return dl.apply(this,arguments)}function dl(){return(dl=(0,G.Z)(function*(D,M,j,ne,Ce){try{let Ge=[];if(Ce&&Ce.send_to){let ut=Ce.send_to;Array.isArray(ut)||(ut=[ut]);const qt=yield la(j);for(const Bt of ut){const fn=qt.find(er=>er.measurementId===Bt),Gn=fn&&M[fn.appId];if(!Gn){Ge=[];break}Ge.push(Gn)}}0===Ge.length&&(Ge=Object.values(M)),yield Promise.all(Ge),D("event",ne,Ce||{})}catch(Ge){Ke.error(Ge)}})).apply(this,arguments)}function Zn(D){const M=window.document.getElementsByTagName("script");for(const j of Object.values(M))if(j.src&&j.src.includes($t)&&j.src.includes(D))return j;return null}const Kt=new class ci{constructor(M={},j=1e3){this.throttleMetadata=M,this.intervalMillis=j}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,j){this.throttleMetadata[M]=j}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Ma(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function mr(D){return hl.apply(this,arguments)}function hl(){return(hl=(0,G.Z)(function*(D){var M;const{appId:j,apiKey:ne}=D,Ce={method:"GET",headers:Ma(ne)},Ge=va.replace("{app-id}",j),ut=yield fetch(Ge,Ce);if(200!==ut.status&&304!==ut.status){let qt="";try{const Bt=yield ut.json();null!==(M=Bt.error)&&void 0!==M&&M.message&&(qt=Bt.error.message)}catch{}throw Tr.create("config-fetch-failed",{httpStatus:ut.status,responseMessage:qt})}return ut.json()})).apply(this,arguments)}function Wi(D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,G.Z)(function*(D,M=Kt,j){const{appId:ne,apiKey:Ce,measurementId:Ge}=D.options;if(!ne)throw Tr.create("no-app-id");if(!Ce){if(Ge)return{measurementId:Ge,appId:ne};throw Tr.create("no-api-key")}const ut=M.getThrottleMetadata(ne)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qt=new T;return setTimeout((0,G.Z)(function*(){qt.abort()}),void 0!==j?j:6e4),no({appId:ne,apiKey:Ce,measurementId:Ge},ut,qt,M)})).apply(this,arguments)}function no(D,M,j){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,G.Z)(function*(D,{throttleEndTimeMillis:M,backoffCount:j},ne,Ce=Kt){var Ge;const{appId:ut,measurementId:qt}=D;try{yield ca(ne,M)}catch(Bt){if(qt)return Ke.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qt} provided in the "measurementId" field in the local Firebase config. [${Bt?.message}]`),{appId:ut,measurementId:qt};throw Bt}try{const Bt=yield mr(D);return Ce.deleteThrottleMetadata(ut),Bt}catch(Bt){const fn=Bt;if(!I(fn)){if(Ce.deleteThrottleMetadata(ut),qt)return Ke.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qt} provided in the "measurementId" field in the local Firebase config. [${fn?.message}]`),{appId:ut,measurementId:qt};throw Bt}const Gn=503===Number(null===(Ge=fn?.customData)||void 0===Ge?void 0:Ge.httpStatus)?(0,pe.$s)(j,Ce.intervalMillis,30):(0,pe.$s)(j,Ce.intervalMillis),er={throttleEndTimeMillis:Date.now()+Gn,backoffCount:j+1};return Ce.setThrottleMetadata(ut,er),Ke.debug(`Calling attemptFetch again in ${Gn} millis`),no(D,er,ne,Ce)}})).apply(this,arguments)}function ca(D,M){return new Promise((j,ne)=>{const Ce=Math.max(M-Date.now(),0),Ge=setTimeout(j,Ce);D.addEventListener(()=>{clearTimeout(Ge),ne(Tr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function I(D){if(!(D instanceof pe.ZR&&D.customData))return!1;const M=Number(D.customData.httpStatus);return 429===M||500===M||503===M||504===M}class T{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let v,ro;function O(){return(O=(0,G.Z)(function*(D,M,j,ne,Ce){if(Ce&&Ce.global)D("event",j,ne);else{const Ge=yield M;D("event",j,Object.assign(Object.assign({},ne),{send_to:Ge}))}})).apply(this,arguments)}function Ts(D){ro=D}function is(D){v=D}function Go(){return go.apply(this,arguments)}function go(){return(go=(0,G.Z)(function*(){if(!(0,pe.hl)())return Ke.warn(Tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,pe.eu)()}catch(D){return Ke.warn(Tr.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function yo(){return(yo=(0,G.Z)(function*(D,M,j,ne,Ce,Ge,ut){var qt;const Bt=Wi(D);Bt.then(bs=>{j[bs.measurementId]=bs.appId,D.options.measurementId&&bs.measurementId!==D.options.measurementId&&Ke.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${bs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(bs=>Ke.error(bs)),M.push(Bt);const fn=Go().then(bs=>{if(bs)return ne.getId()}),[Gn,er]=yield Promise.all([Bt,fn]);Zn(Ge)||ja(Ge,Gn.measurementId),ro&&(Ce("consent","default",ro),Ts(void 0)),Ce("js",new Date);const ta=null!==(qt=ut?.config)&&void 0!==qt?qt:{};return ta.origin="firebase",ta.update=!0,null!=er&&(ta[eu]=er),Ce("config",Gn.measurementId,ta),v&&(Ce("set",v),is(void 0)),Gn.measurementId})).apply(this,arguments)}class xa{constructor(M){this.app=M}_delete(){return delete _o[this.app.options.appId],Promise.resolve()}}let _o={},So=[];const Du={};let ss,vo,za="dataLayer",fl=!1;function ru(D,M,j){!function ec(){const D=[];if((0,pe.ru)()&&D.push("This is a browser extension environment."),(0,pe.zI)()||D.push("Cookies are not available."),D.length>0){const M=D.map((ne,Ce)=>`(${Ce+1}) ${ne}`).join(" "),j=Tr.create("invalid-analytics-context",{errorInfo:M});Ke.warn(j.message)}}();const ne=D.options.appId;if(!ne)throw Tr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Tr.create("no-api-key");Ke.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_o[ne])throw Tr.create("already-exists",{id:ne});if(!fl){!function mi(D){let M=[];Array.isArray(window[D])?M=window[D]:window[D]=M}(za);const{wrappedGtag:Ge,gtagCore:ut}=function nu(D,M,j,ne,Ce){let Ge=function(...ut){window[ne].push(arguments)};return window[Ce]&&"function"==typeof window[Ce]&&(Ge=window[Ce]),window[Ce]=function Jl(D,M,j,ne){function Ge(){return(Ge=(0,G.Z)(function*(ut,...qt){try{if("event"===ut){const[Bt,fn]=qt;yield Iu(D,M,j,Bt,fn)}else if("config"===ut){const[Bt,fn]=qt;yield cl(D,M,j,ne,Bt,fn)}else if("consent"===ut){const[Bt]=qt;D("consent","update",Bt)}else if("get"===ut){const[Bt,fn,Gn]=qt;D("get",Bt,fn,Gn)}else if("set"===ut){const[Bt]=qt;D("set",Bt)}else D(ut,...qt)}catch(Bt){Ke.error(Bt)}})).apply(this,arguments)}return function Ce(ut){return Ge.apply(this,arguments)}}(Ge,D,M,j),{gtagCore:Ge,wrappedGtag:window[Ce]}}(_o,So,Du,za,"gtag");vo=Ge,ss=ut,fl=!0}return _o[ne]=function mo(D,M,j,ne,Ce,Ge,ut){return yo.apply(this,arguments)}(D,So,Du,M,ss,za,j),new xa(D)}function nc(){return rc.apply(this,arguments)}function rc(){return(rc=(0,G.Z)(function*(){if((0,pe.ru)()||!(0,pe.zI)()||!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch{return!1}})).apply(this,arguments)}const yl="@firebase/analytics";!function Zd(){(0,fe._registerComponent)(new _e.wA(Nr,(M,{options:j})=>ru(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,fe._registerComponent)(new _e.wA("analytics-internal",function D(M){try{const j=M.getProvider(Nr).getImmediate();return{logEvent:(ne,Ce,Ge)=>function ou(D,M,j,ne){D=(0,pe.m9)(D),function A(D,M,j,ne,Ce){return O.apply(this,arguments)}(vo,_o[D.app.options.appId],M,j,ne).catch(Ce=>Ke.error(Ce))}(j,ne,Ce,Ge)}}catch(j){throw Tr.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,fe.registerVersion)(yl,"0.10.0"),(0,fe.registerVersion)(yl,"0.10.0","esm2017")}();var Pa=U(4408),Qc=U(7565);const Yc=new class sc extends Qc.v{}(class Hu extends Pa.o{constructor(M,j){super(M,j),this.scheduler=M,this.work=j}schedule(M,j=0){return j>0?super.schedule(M,j):(this.delay=j,this.state=M,this.scheduler.flush(this),this)}execute(M,j){return j>0||this.closed?super.execute(M,j):this._execute(M,j)}requestAsyncId(M,j,ne=0){return null!=ne&&ne>0||null==ne&&this.delay>0?super.requestAsyncId(M,j,ne):(M.flush(this),0)}});var Rs=U(4986),Jc=U(8505),da=U(5363),zu=U(9468);const si=new w.GfV("7.4.1"),Ga="__angularfire_symbol__analyticsIsSupportedValue",ps="__angularfire_symbol__analyticsIsSupported",Ti="__angularfire_symbol__remoteConfigIsSupportedValue",_l="__angularfire_symbol__remoteConfigIsSupported",wa="__angularfire_symbol__messagingIsSupportedValue",io="__angularfire_symbol__messagingIsSupported";function Ia(D,M,j){if(M){if(1===M.length)return M[0];const Ge=M.filter(ut=>ut.app===j);if(1===Ge.length)return Ge[0]}return j.container.getProvider(D).getImmediate({optional:!0})}globalThis[ps]||(globalThis[ps]=nc().then(D=>globalThis[Ga]=D).catch(()=>globalThis[Ga]=!1)),globalThis[io]||(globalThis[io]=Eu().then(D=>globalThis[wa]=D).catch(()=>globalThis[wa]=!1)),globalThis[_l]||(globalThis[_l]=Ui().then(D=>globalThis[Ti]=D).catch(()=>globalThis[Ti]=!1));const Ai=(D,M)=>{const j=M?[M]:(0,W.C6)(),ne=[];return j.forEach(Ce=>{Ce.container.getProvider(D).instances.forEach(ut=>{ne.includes(ut)||ne.push(ut)})}),ne};function so(){}class Gu{constructor(M,j=Yc){this.zone=M,this.delegate=j}now(){return this.delegate.now()}schedule(M,j,ne){const Ce=this.zone;return this.delegate.schedule(function(ut){Ce.runGuarded(()=>{M.apply(this,[ut])})},j,ne)}}class ac{constructor(M){this.zone=M,this.task=null}call(M,j){const ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",so,{},so,so)),j.pipe((0,Jc.b)({next:ne,complete:ne,error:ne})).subscribe(M).add(ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Na=(()=>{class D{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new Gu(Zone.current)),this.insideAngular=j.run(()=>new Gu(Zone.current,Rs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(j){return new(j||D)(w.LFG(w.R0b))},D.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Oa(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Wu(D){return D.pipe((0,da.Q)(Oa().outsideAngular))}function ha(D){return Oa(),function Ku(D){return function(j){return(j=j.lift(new ac(D.ngZone))).pipe((0,zu.R)(D.outsideAngular),(0,da.Q)(D.insideAngular))}}(Oa())(D)}},2090:(Lt,We,U)=>{U.d(We,{$s:()=>Vr,BH:()=>Ne,G6:()=>On,L:()=>xe,LL:()=>pt,Pz:()=>Ee,Sg:()=>ft,UG:()=>He,US:()=>_e,ZB:()=>ve,ZR:()=>en,aH:()=>Ve,b$:()=>ot,eu:()=>Dt,hl:()=>Rn,jU:()=>we,m9:()=>ri,ne:()=>Ln,pd:()=>ti,r3:()=>Sn,ru:()=>Pe,tV:()=>ae,uI:()=>et,vZ:()=>Fr,w1:()=>Mt,xO:()=>ls,xb:()=>ur,z$:()=>Et,zI:()=>nr,zd:()=>xi});const fe=function(ye){const le=[];let Te=0;for(let Ye=0;Ye<ye.length;Ye++){let Fe=ye.charCodeAt(Ye);Fe<128?le[Te++]=Fe:Fe<2048?(le[Te++]=Fe>>6|192,le[Te++]=63&Fe|128):55296==(64512&Fe)&&Ye+1<ye.length&&56320==(64512&ye.charCodeAt(Ye+1))?(Fe=65536+((1023&Fe)<<10)+(1023&ye.charCodeAt(++Ye)),le[Te++]=Fe>>18|240,le[Te++]=Fe>>12&63|128,le[Te++]=Fe>>6&63|128,le[Te++]=63&Fe|128):(le[Te++]=Fe>>12|224,le[Te++]=Fe>>6&63|128,le[Te++]=63&Fe|128)}return le},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ye,le){if(!Array.isArray(ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Te=le?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ye=[];for(let Fe=0;Fe<ye.length;Fe+=3){const At=ye[Fe],ln=Fe+1<ye.length,In=ln?ye[Fe+1]:0,ir=Fe+2<ye.length,se=ir?ye[Fe+2]:0;let Ae=(15&In)<<2|se>>6,st=63&se;ir||(st=64,ln||(Ae=64)),Ye.push(Te[At>>2],Te[(3&At)<<4|In>>4],Te[Ae],Te[st])}return Ye.join("")},encodeString(ye,le){return this.HAS_NATIVE_SUPPORT&&!le?btoa(ye):this.encodeByteArray(fe(ye),le)},decodeString(ye,le){return this.HAS_NATIVE_SUPPORT&&!le?atob(ye):function(ye){const le=[];let Te=0,Ye=0;for(;Te<ye.length;){const Fe=ye[Te++];if(Fe<128)le[Ye++]=String.fromCharCode(Fe);else if(Fe>191&&Fe<224){const At=ye[Te++];le[Ye++]=String.fromCharCode((31&Fe)<<6|63&At)}else if(Fe>239&&Fe<365){const ir=((7&Fe)<<18|(63&ye[Te++])<<12|(63&ye[Te++])<<6|63&ye[Te++])-65536;le[Ye++]=String.fromCharCode(55296+(ir>>10)),le[Ye++]=String.fromCharCode(56320+(1023&ir))}else{const At=ye[Te++],ln=ye[Te++];le[Ye++]=String.fromCharCode((15&Fe)<<12|(63&At)<<6|63&ln)}}return le.join("")}(this.decodeStringToByteArray(ye,le))},decodeStringToByteArray(ye,le){this.init_();const Te=le?this.charToByteMapWebSafe_:this.charToByteMap_,Ye=[];for(let Fe=0;Fe<ye.length;){const At=Te[ye.charAt(Fe++)],In=Fe<ye.length?Te[ye.charAt(Fe)]:0;++Fe;const se=Fe<ye.length?Te[ye.charAt(Fe)]:64;++Fe;const ee=Fe<ye.length?Te[ye.charAt(Fe)]:64;if(++Fe,null==At||null==In||null==se||null==ee)throw new De;Ye.push(At<<2|In>>4),64!==se&&(Ye.push(In<<4&240|se>>2),64!==ee&&Ye.push(se<<6&192|ee))}return Ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ye=0;ye<this.ENCODED_VALS.length;ye++)this.byteToCharMap_[ye]=this.ENCODED_VALS.charAt(ye),this.charToByteMap_[this.byteToCharMap_[ye]]=ye,this.byteToCharMapWebSafe_[ye]=this.ENCODED_VALS_WEBSAFE.charAt(ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ye]]=ye,ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ye)]=ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ye)]=ye)}}};class De extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function(ye){return function(ye){const le=fe(ye);return _e.encodeByteArray(le,!0)}(ye).replace(/\./g,"")},ae=function(ye){try{return _e.decodeString(ye,!0)}catch(le){console.error("base64Decode failed: ",le)}return null};function ve(ye,le){if(!(le instanceof Object))return le;switch(le.constructor){case Date:return new Date(le.getTime());case Object:void 0===ye&&(ye={});break;case Array:ye=[];break;default:return le}for(const Te in le)!le.hasOwnProperty(Te)||!ct(Te)||(ye[Te]=ve(ye[Te],le[Te]));return ye}function ct(ye){return"__proto__"!==ye}const nt=()=>{try{return function it(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ye=process.env.__FIREBASE_DEFAULTS__;return ye?JSON.parse(ye):void 0})()||(()=>{if(typeof document>"u")return;let ye;try{ye=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const le=ye&&ae(ye[1]);return le&&JSON.parse(le)})()}catch(ye){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ye}`)}},Ve=()=>{var ye;return null===(ye=nt())||void 0===ye?void 0:ye.config},Ee=ye=>{var le;return null===(le=nt())||void 0===le?void 0:le[`_${ye}`]};class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((le,Te)=>{this.resolve=le,this.reject=Te})}wrapCallback(le){return(Te,Ye)=>{Te?this.reject(Te):this.resolve(Ye),"function"==typeof le&&(this.promise.catch(()=>{}),1===le.length?le(Te):le(Te,Ye))}}}function ft(ye,le){if(ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ye=le||"demo-project",Fe=ye.iat||0,At=ye.sub||ye.user_id;if(!At)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ln=Object.assign({iss:`https://securetoken.google.com/${Ye}`,aud:Ye,iat:Fe,exp:Fe+3600,auth_time:Fe,sub:At,user_id:At,firebase:{sign_in_provider:"custom",identities:{}}},ye);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(ln)),""].join(".")}function Et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function et(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function He(){var ye;const le=null===(ye=nt())||void 0===ye?void 0:ye.forceEnvironment;if("node"===le)return!0;if("browser"===le)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function we(){return"object"==typeof self&&self.self===self}function Pe(){const ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ye&&void 0!==ye.id}function ot(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Mt(){const ye=Et();return ye.indexOf("MSIE ")>=0||ye.indexOf("Trident/")>=0}function On(){return!He()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rn(){try{return"object"==typeof indexedDB}catch{return!1}}function Dt(){return new Promise((ye,le)=>{try{let Te=!0;const Ye="validate-browser-context-for-indexeddb-analytics-module",Fe=self.indexedDB.open(Ye);Fe.onsuccess=()=>{Fe.result.close(),Te||self.indexedDB.deleteDatabase(Ye),ye(!0)},Fe.onupgradeneeded=()=>{Te=!1},Fe.onerror=()=>{var At;le((null===(At=Fe.error)||void 0===At?void 0:At.message)||"")}}catch(Te){le(Te)}})}function nr(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class en extends Error{constructor(le,Te,Ye){super(Te),this.code=le,this.customData=Ye,this.name="FirebaseError",Object.setPrototypeOf(this,en.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pt.prototype.create)}}class pt{constructor(le,Te,Ye){this.service=le,this.serviceName=Te,this.errors=Ye}create(le,...Te){const Ye=Te[0]||{},Fe=`${this.service}/${le}`,At=this.errors[le],ln=At?function jn(ye,le){return ye.replace(wn,(Te,Ye)=>{const Fe=le[Ye];return null!=Fe?String(Fe):`<${Ye}?>`})}(At,Ye):"Error";return new en(Fe,`${this.serviceName}: ${ln} (${Fe}).`,Ye)}}const wn=/\{\$([^}]+)}/g;function Sn(ye,le){return Object.prototype.hasOwnProperty.call(ye,le)}function ur(ye){for(const le in ye)if(Object.prototype.hasOwnProperty.call(ye,le))return!1;return!0}function Fr(ye,le){if(ye===le)return!0;const Te=Object.keys(ye),Ye=Object.keys(le);for(const Fe of Te){if(!Ye.includes(Fe))return!1;const At=ye[Fe],ln=le[Fe];if(Jr(At)&&Jr(ln)){if(!Fr(At,ln))return!1}else if(At!==ln)return!1}for(const Fe of Ye)if(!Te.includes(Fe))return!1;return!0}function Jr(ye){return null!==ye&&"object"==typeof ye}function ls(ye){const le=[];for(const[Te,Ye]of Object.entries(ye))Array.isArray(Ye)?Ye.forEach(Fe=>{le.push(encodeURIComponent(Te)+"="+encodeURIComponent(Fe))}):le.push(encodeURIComponent(Te)+"="+encodeURIComponent(Ye));return le.length?"&"+le.join("&"):""}function xi(ye){const le={};return ye.replace(/^\?/,"").split("&").forEach(Ye=>{if(Ye){const[Fe,At]=Ye.split("=");le[decodeURIComponent(Fe)]=decodeURIComponent(At)}}),le}function ti(ye){const le=ye.indexOf("?");if(!le)return"";const Te=ye.indexOf("#",le);return ye.substring(le,Te>0?Te:void 0)}function Ln(ye,le){const Te=new Ht(ye,le);return Te.subscribe.bind(Te)}class Ht{constructor(le,Te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Te,this.task.then(()=>{le(this)}).catch(Ye=>{this.error(Ye)})}next(le){this.forEachObserver(Te=>{Te.next(le)})}error(le){this.forEachObserver(Te=>{Te.error(le)}),this.close(le)}complete(){this.forEachObserver(le=>{le.complete()}),this.close()}subscribe(le,Te,Ye){let Fe;if(void 0===le&&void 0===Te&&void 0===Ye)throw new Error("Missing Observer.");Fe=function Kn(ye,le){if("object"!=typeof ye||null===ye)return!1;for(const Te of le)if(Te in ye&&"function"==typeof ye[Te])return!0;return!1}(le,["next","error","complete"])?le:{next:le,error:Te,complete:Ye},void 0===Fe.next&&(Fe.next=pn),void 0===Fe.error&&(Fe.error=pn),void 0===Fe.complete&&(Fe.complete=pn);const At=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Fe.error(this.finalError):Fe.complete()}catch{}}),this.observers.push(Fe),At}unsubscribeOne(le){void 0===this.observers||void 0===this.observers[le]||(delete this.observers[le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(le){if(!this.finalized)for(let Te=0;Te<this.observers.length;Te++)this.sendOne(Te,le)}sendOne(le,Te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[le])try{Te(this.observers[le])}catch(Ye){typeof console<"u"&&console.error&&console.error(Ye)}})}close(le){this.finalized||(this.finalized=!0,void 0!==le&&(this.finalError=le),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pn(){}function Vr(ye,le=1e3,Te=2){const Ye=le*Math.pow(Te,ye),Fe=Math.round(.5*Ye*(Math.random()-.5)*2);return Math.min(144e5,Ye+Fe)}function ri(ye){return ye&&ye._delegate?ye._delegate:ye}},4662:(Lt,We,U)=>{var w=U(1481),W=U(4650),G=U(7340);function pe(S){return new W.vHH(3e3,!1)}function jn(){return typeof window<"u"&&typeof window.document<"u"}function wn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ar(S){switch(S.length){case 0:return new G.ZN;case 1:return S[0];default:return new G.ZE(S)}}function Qn(S,g,y,x,z=new Map,X=new Map){const de=[],ce=[];let Be=-1,tt=null;if(x.forEach(bt=>{const Gt=bt.get("offset"),Tn=Gt==Be,bn=Tn&&tt||new Map;bt.forEach((_n,hn)=>{let An=hn,vr=_n;if("offset"!==hn)switch(An=g.normalizePropertyName(An,de),vr){case G.k1:vr=z.get(hn);break;case G.l3:vr=X.get(hn);break;default:vr=g.normalizeStyleValue(hn,An,vr,de)}bn.set(An,vr)}),Tn||ce.push(bn),tt=bn,Be=Gt}),de.length)throw function Pe(S){return new W.vHH(3502,!1)}();return ce}function Sr(S,g,y,x){switch(g){case"start":S.onStart(()=>x(y&&yr(y,"start",S)));break;case"done":S.onDone(()=>x(y&&yr(y,"done",S)));break;case"destroy":S.onDestroy(()=>x(y&&yr(y,"destroy",S)))}}function yr(S,g,y){const X=Mi(S.element,S.triggerName,S.fromState,S.toState,g||S.phaseName,y.totalTime??S.totalTime,!!y.disabled),de=S._data;return null!=de&&(X._data=de),X}function Mi(S,g,y,x,z="",X=0,de){return{element:S,triggerName:g,fromState:y,toState:x,phaseName:z,totalTime:X,disabled:!!de}}function dr(S,g,y){let x=S.get(g);return x||S.set(g,x=y),x}function Lr(S){const g=S.indexOf(":");return[S.substring(1,g),S.slice(g+1)]}let Sn=(S,g)=>!1,$n=(S,g,y)=>[],ur=null;function Ut(S){const g=S.parentNode||S.host;return g===ur?null:g}(wn()||typeof Element<"u")&&(jn()?(ur=(()=>document.documentElement)(),Sn=(S,g)=>{for(;g;){if(g===S)return!0;g=Ut(g)}return!1}):Sn=(S,g)=>S.contains(g),$n=(S,g,y)=>{if(y)return Array.from(S.querySelectorAll(g));const x=S.querySelector(g);return x?[x]:[]});let Ur=null,ls=!1;const Ln=Sn,Ht=$n;let Kn=(()=>{class S{validateStyleProperty(y){return function xi(S){Ur||(Ur=function hr(){return typeof document<"u"?document.body:null}()||{},ls=!!Ur.style&&"WebkitAppearance"in Ur.style);let g=!0;return Ur.style&&!function Jr(S){return"ebkit"==S.substring(1,6)}(S)&&(g=S in Ur.style,!g&&ls&&(g="Webkit"+S.charAt(0).toUpperCase()+S.slice(1)in Ur.style)),g}(y)}matchesElement(y,x){return!1}containsElement(y,x){return Ln(y,x)}getParentElement(y){return Ut(y)}query(y,x,z){return Ht(y,x,z)}computeStyle(y,x,z){return z||""}animate(y,x,z,X,de,ce=[],Be){return new G.ZN(z,X)}}return S.\u0275fac=function(y){return new(y||S)},S.\u0275prov=W.Yz7({token:S,factory:S.\u0275fac}),S})(),pn=(()=>{class S{}return S.NOOP=new Kn,S})();const wr="ng-enter",Fn="ng-leave",hi="ng-trigger",Hn=".ng-trigger",Ar="ng-animating",Ir=".ng-animating";function Wr(S){if("number"==typeof S)return S;const g=S.match(/^(-?[\.\d]+)(m?s)/);return!g||g.length<2?0:_r(parseFloat(g[1]),g[2])}function _r(S,g){return"s"===g?1e3*S:S}function zr(S,g,y){return S.hasOwnProperty("duration")?S:function Vr(S,g,y){let z,X=0,de="";if("string"==typeof S){const ce=S.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ce)return g.push(pe()),{duration:0,delay:0,easing:""};z=_r(parseFloat(ce[1]),ce[2]);const Be=ce[3];null!=Be&&(X=_r(parseFloat(Be),ce[4]));const tt=ce[5];tt&&(de=tt)}else z=S;if(!y){let ce=!1,Be=g.length;z<0&&(g.push(function _e(){return new W.vHH(3100,!1)}()),ce=!0),X<0&&(g.push(function De(){return new W.vHH(3101,!1)}()),ce=!0),ce&&g.splice(Be,0,pe())}return{duration:z,delay:X,easing:de}}(S,g,y)}function rr(S,g={}){return Object.keys(S).forEach(y=>{g[y]=S[y]}),g}function ni(S){const g=new Map;return Object.keys(S).forEach(y=>{g.set(y,S[y])}),g}function le(S,g=new Map,y){if(y)for(let[x,z]of y)g.set(x,z);for(let[x,z]of S)g.set(x,z);return g}function Te(S,g,y){return y?g+":"+y+";":""}function Ye(S){let g="";for(let y=0;y<S.style.length;y++){const x=S.style.item(y);g+=Te(0,x,S.style.getPropertyValue(x))}for(const y in S.style)S.style.hasOwnProperty(y)&&!y.startsWith("_")&&(g+=Te(0,Pt(y),S.style[y]));S.setAttribute("style",g)}function Fe(S,g,y){S.style&&(g.forEach((x,z)=>{const X=st(z);y&&!y.has(z)&&y.set(z,S.style[X]),S.style[X]=x}),wn()&&Ye(S))}function At(S,g){S.style&&(g.forEach((y,x)=>{const z=st(x);S.style[z]=""}),wn()&&Ye(S))}function ln(S){return Array.isArray(S)?1==S.length?S[0]:(0,G.vP)(S):S}const ir=new RegExp("{{\\s*(.+?)\\s*}}","g");function se(S){let g=[];if("string"==typeof S){let y;for(;y=ir.exec(S);)g.push(y[1]);ir.lastIndex=0}return g}function ie(S,g,y){const x=S.toString(),z=x.replace(ir,(X,de)=>{let ce=g[de];return null==ce&&(y.push(function xe(S){return new W.vHH(3003,!1)}()),ce=""),ce.toString()});return z==x?S:z}function ee(S){const g=[];let y=S.next();for(;!y.done;)g.push(y.value),y=S.next();return g}const Ae=/-+([a-z0-9])/g;function st(S){return S.replace(Ae,(...g)=>g[1].toUpperCase())}function Pt(S){return S.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ke(S,g,y){switch(g.type){case 7:return S.visitTrigger(g,y);case 0:return S.visitState(g,y);case 1:return S.visitTransition(g,y);case 2:return S.visitSequence(g,y);case 3:return S.visitGroup(g,y);case 4:return S.visitAnimate(g,y);case 5:return S.visitKeyframes(g,y);case 6:return S.visitStyle(g,y);case 8:return S.visitReference(g,y);case 9:return S.visitAnimateChild(g,y);case 10:return S.visitAnimateRef(g,y);case 11:return S.visitQuery(g,y);case 12:return S.visitStagger(g,y);default:throw function ae(S){return new W.vHH(3004,!1)}()}}function yt(S,g){return window.getComputedStyle(S)[g]}function qi(S,g){const y=[];return"string"==typeof S?S.split(/\s*,\s*/).forEach(x=>function Ps(S,g,y){if(":"==S[0]){const Be=function Ns(S,g){switch(S){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(y,x)=>parseFloat(x)>parseFloat(y);case":decrement":return(y,x)=>parseFloat(x)<parseFloat(y);default:return g.push(function Et(S){return new W.vHH(3016,!1)}()),"* => *"}}(S,y);if("function"==typeof Be)return void g.push(Be);S=Be}const x=S.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==x||x.length<4)return y.push(function ft(S){return new W.vHH(3015,!1)}()),g;const z=x[1],X=x[2],de=x[3];g.push(Os(z,de));"<"==X[0]&&!("*"==z&&"*"==de)&&g.push(Os(de,z))}(x,y,g)):y.push(S),y}const zn=new Set(["true","1"]),fi=new Set(["false","0"]);function Os(S,g){const y=zn.has(S)||fi.has(S),x=zn.has(g)||fi.has(g);return(z,X)=>{let de="*"==S||S==z,ce="*"==g||g==X;return!de&&y&&"boolean"==typeof z&&(de=z?zn.has(S):fi.has(S)),!ce&&x&&"boolean"==typeof X&&(ce=X?zn.has(g):fi.has(g)),de&&ce}}const oo=new RegExp("s*:selfs*,?","g");function lr(S,g,y,x){return new Ji(S).build(g,y,x)}class Ji{constructor(g){this._driver=g}build(g,y,x){const z=new Kr(y);return this._resetContextStyleTimingState(z),ke(this,ln(g),z)}_resetContextStyleTimingState(g){g.currentQuerySelector="",g.collectedStyles=new Map,g.collectedStyles.set("",new Map),g.currentTime=0}visitTrigger(g,y){let x=y.queryCount=0,z=y.depCount=0;const X=[],de=[];return"@"==g.name.charAt(0)&&y.errors.push(function ve(){return new W.vHH(3006,!1)}()),g.definitions.forEach(ce=>{if(this._resetContextStyleTimingState(y),0==ce.type){const Be=ce,tt=Be.name;tt.toString().split(/\s*,\s*/).forEach(bt=>{Be.name=bt,X.push(this.visitState(Be,y))}),Be.name=tt}else if(1==ce.type){const Be=this.visitTransition(ce,y);x+=Be.queryCount,z+=Be.depCount,de.push(Be)}else y.errors.push(function ct(){return new W.vHH(3007,!1)}())}),{type:7,name:g.name,states:X,transitions:de,queryCount:x,depCount:z,options:null}}visitState(g,y){const x=this.visitStyle(g.styles,y),z=g.options&&g.options.params||null;if(x.containsDynamicStyles){const X=new Set,de=z||{};x.styles.forEach(ce=>{ce instanceof Map&&ce.forEach(Be=>{se(Be).forEach(tt=>{de.hasOwnProperty(tt)||X.add(tt)})})}),X.size&&(ee(X.values()),y.errors.push(function it(S,g){return new W.vHH(3008,!1)}()))}return{type:0,name:g.name,style:x,options:z?{params:z}:null}}visitTransition(g,y){y.queryCount=0,y.depCount=0;const x=ke(this,ln(g.animation),y);return{type:1,matchers:qi(g.expr,y.errors),animation:x,queryCount:y.queryCount,depCount:y.depCount,options:Ci(g.options)}}visitSequence(g,y){return{type:2,steps:g.steps.map(x=>ke(this,x,y)),options:Ci(g.options)}}visitGroup(g,y){const x=y.currentTime;let z=0;const X=g.steps.map(de=>{y.currentTime=x;const ce=ke(this,de,y);return z=Math.max(z,y.currentTime),ce});return y.currentTime=z,{type:3,steps:X,options:Ci(g.options)}}visitAnimate(g,y){const x=function js(S,g){if(S.hasOwnProperty("duration"))return S;if("number"==typeof S)return es(zr(S,g).duration,0,"");const y=S;if(y.split(/\s+/).some(X=>"{"==X.charAt(0)&&"{"==X.charAt(1))){const X=es(0,0,"");return X.dynamic=!0,X.strValue=y,X}const z=zr(y,g);return es(z.duration,z.delay,z.easing)}(g.timings,y.errors);y.currentAnimateTimings=x;let z,X=g.styles?g.styles:(0,G.oB)({});if(5==X.type)z=this.visitKeyframes(X,y);else{let de=g.styles,ce=!1;if(!de){ce=!0;const tt={};x.easing&&(tt.easing=x.easing),de=(0,G.oB)(tt)}y.currentTime+=x.duration+x.delay;const Be=this.visitStyle(de,y);Be.isEmptyStep=ce,z=Be}return y.currentAnimateTimings=null,{type:4,timings:x,style:z,options:null}}visitStyle(g,y){const x=this._makeStyleAst(g,y);return this._validateStyleAst(x,y),x}_makeStyleAst(g,y){const x=[],z=Array.isArray(g.styles)?g.styles:[g.styles];for(let ce of z)"string"==typeof ce?ce===G.l3?x.push(ce):y.errors.push(new W.vHH(3002,!1)):x.push(ni(ce));let X=!1,de=null;return x.forEach(ce=>{if(ce instanceof Map&&(ce.has("easing")&&(de=ce.get("easing"),ce.delete("easing")),!X))for(let Be of ce.values())if(Be.toString().indexOf("{{")>=0){X=!0;break}}),{type:6,styles:x,easing:de,offset:g.offset,containsDynamicStyles:X,options:null}}_validateStyleAst(g,y){const x=y.currentAnimateTimings;let z=y.currentTime,X=y.currentTime;x&&X>0&&(X-=x.duration+x.delay),g.styles.forEach(de=>{"string"!=typeof de&&de.forEach((ce,Be)=>{const tt=y.collectedStyles.get(y.currentQuerySelector),bt=tt.get(Be);let Gt=!0;bt&&(X!=z&&X>=bt.startTime&&z<=bt.endTime&&(y.errors.push(function Qe(S,g,y,x,z){return new W.vHH(3010,!1)}()),Gt=!1),X=bt.startTime),Gt&&tt.set(Be,{startTime:X,endTime:z}),y.options&&function In(S,g,y){const x=g.params||{},z=se(S);z.length&&z.forEach(X=>{x.hasOwnProperty(X)||y.push(function ge(S){return new W.vHH(3001,!1)}())})}(ce,y.options,y.errors)})})}visitKeyframes(g,y){const x={type:5,styles:[],options:null};if(!y.currentAnimateTimings)return y.errors.push(function nt(){return new W.vHH(3011,!1)}()),x;let X=0;const de=[];let ce=!1,Be=!1,tt=0;const bt=g.steps.map(vr=>{const ji=this._makeStyleAst(vr,y);let Pr=null!=ji.offset?ji.offset:function ii(S){if("string"==typeof S)return null;let g=null;if(Array.isArray(S))S.forEach(y=>{if(y instanceof Map&&y.has("offset")){const x=y;g=parseFloat(x.get("offset")),x.delete("offset")}});else if(S instanceof Map&&S.has("offset")){const y=S;g=parseFloat(y.get("offset")),y.delete("offset")}return g}(ji.styles),Li=0;return null!=Pr&&(X++,Li=ji.offset=Pr),Be=Be||Li<0||Li>1,ce=ce||Li<tt,tt=Li,de.push(Li),ji});Be&&y.errors.push(function Le(){return new W.vHH(3012,!1)}()),ce&&y.errors.push(function St(){return new W.vHH(3200,!1)}());const Gt=g.steps.length;let Tn=0;X>0&&X<Gt?y.errors.push(function Ve(){return new W.vHH(3202,!1)}()):0==X&&(Tn=1/(Gt-1));const bn=Gt-1,_n=y.currentTime,hn=y.currentAnimateTimings,An=hn.duration;return bt.forEach((vr,ji)=>{const Pr=Tn>0?ji==bn?1:Tn*ji:de[ji],Li=Pr*An;y.currentTime=_n+hn.delay+Li,hn.duration=Li,this._validateStyleAst(vr,y),vr.offset=Pr,x.styles.push(vr)}),x}visitReference(g,y){return{type:8,animation:ke(this,ln(g.animation),y),options:Ci(g.options)}}visitAnimateChild(g,y){return y.depCount++,{type:9,options:Ci(g.options)}}visitAnimateRef(g,y){return{type:10,animation:this.visitReference(g.animation,y),options:Ci(g.options)}}visitQuery(g,y){const x=y.currentQuerySelector,z=g.options||{};y.queryCount++,y.currentQuery=g;const[X,de]=function Un(S){const g=!!S.split(/\s*,\s*/).find(y=>":self"==y);return g&&(S=S.replace(oo,"")),S=S.replace(/@\*/g,Hn).replace(/@\w+/g,y=>Hn+"-"+y.slice(1)).replace(/:animating/g,Ir),[S,g]}(g.selector);y.currentQuerySelector=x.length?x+" "+X:X,dr(y.collectedStyles,y.currentQuerySelector,new Map);const ce=ke(this,ln(g.animation),y);return y.currentQuery=null,y.currentQuerySelector=x,{type:11,selector:X,limit:z.limit||0,optional:!!z.optional,includeSelf:de,animation:ce,originalSelector:g.selector,options:Ci(g.options)}}visitStagger(g,y){y.currentQuery||y.errors.push(function Ee(){return new W.vHH(3013,!1)}());const x="full"===g.timings?{duration:0,delay:0,easing:"full"}:zr(g.timings,y.errors,!0);return{type:12,animation:ke(this,ln(g.animation),y),timings:x,options:null}}}class Kr{constructor(g){this.errors=g,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ci(S){return S?(S=rr(S)).params&&(S.params=function ks(S){return S?rr(S):null}(S.params)):S={},S}function es(S,g,y){return{duration:S,delay:g,easing:y}}function Rr(S,g,y,x,z,X,de=null,ce=!1){return{type:1,element:S,keyframes:g,preStyleProps:y,postStyleProps:x,duration:z,delay:X,totalTime:z+X,easing:de,subTimeline:ce}}class ms{constructor(){this._map=new Map}get(g){return this._map.get(g)||[]}append(g,y){let x=this._map.get(g);x||this._map.set(g,x=[]),x.push(...y)}has(g){return this._map.has(g)}clear(){this._map.clear()}}const Pi=new RegExp(":enter","g"),sr=new RegExp(":leave","g");function Hs(S,g,y,x,z,X=new Map,de=new Map,ce,Be,tt=[]){return(new Lo).buildKeyframes(S,g,y,x,z,X,de,ce,Be,tt)}class Lo{buildKeyframes(g,y,x,z,X,de,ce,Be,tt,bt=[]){tt=tt||new ms;const Gt=new Oe(g,y,tt,z,X,bt,[]);Gt.options=Be;const Tn=Be.delay?Wr(Be.delay):0;Gt.currentTimeline.delayNextStep(Tn),Gt.currentTimeline.setStyles([de],null,Gt.errors,Be),ke(this,x,Gt);const bn=Gt.timelines.filter(_n=>_n.containsAnimation());if(bn.length&&ce.size){let _n;for(let hn=bn.length-1;hn>=0;hn--){const An=bn[hn];if(An.element===y){_n=An;break}}_n&&!_n.allowOnlyTimelineStyles()&&_n.setStyles([ce],null,Gt.errors,Be)}return bn.length?bn.map(_n=>_n.buildKeyframes()):[Rr(y,[],[],[],0,Tn,"",!1)]}visitTrigger(g,y){}visitState(g,y){}visitTransition(g,y){}visitAnimateChild(g,y){const x=y.subInstructions.get(y.element);if(x){const z=y.createSubContext(g.options),X=y.currentTimeline.currentTime,de=this._visitSubInstructions(x,z,z.options);X!=de&&y.transformIntoNewTimeline(de)}y.previousNode=g}visitAnimateRef(g,y){const x=y.createSubContext(g.options);x.transformIntoNewTimeline(),this._applyAnimationRefDelays([g.options,g.animation.options],y,x),this.visitReference(g.animation,x),y.transformIntoNewTimeline(x.currentTimeline.currentTime),y.previousNode=g}_applyAnimationRefDelays(g,y,x){for(const X of g){const de=X?.delay;if(de){var z;const ce="number"==typeof de?de:Wr(ie(de,null!==(z=X?.params)&&void 0!==z?z:{},y.errors));x.delayNextStep(ce)}}}_visitSubInstructions(g,y,x){let X=y.currentTimeline.currentTime;const de=null!=x.duration?Wr(x.duration):null,ce=null!=x.delay?Wr(x.delay):null;return 0!==de&&g.forEach(Be=>{const tt=y.appendInstructionToTimeline(Be,de,ce);X=Math.max(X,tt.duration+tt.delay)}),X}visitReference(g,y){y.updateOptions(g.options,!0),ke(this,g.animation,y),y.previousNode=g}visitSequence(g,y){const x=y.subContextCount;let z=y;const X=g.options;if(X&&(X.params||X.delay)&&(z=y.createSubContext(X),z.transformIntoNewTimeline(),null!=X.delay)){6==z.previousNode.type&&(z.currentTimeline.snapshotCurrentStyles(),z.previousNode=Ls);const de=Wr(X.delay);z.delayNextStep(de)}g.steps.length&&(g.steps.forEach(de=>ke(this,de,z)),z.currentTimeline.applyStylesToKeyframe(),z.subContextCount>x&&z.transformIntoNewTimeline()),y.previousNode=g}visitGroup(g,y){const x=[];let z=y.currentTimeline.currentTime;const X=g.options&&g.options.delay?Wr(g.options.delay):0;g.steps.forEach(de=>{const ce=y.createSubContext(g.options);X&&ce.delayNextStep(X),ke(this,de,ce),z=Math.max(z,ce.currentTimeline.currentTime),x.push(ce.currentTimeline)}),x.forEach(de=>y.currentTimeline.mergeTimelineCollectedStyles(de)),y.transformIntoNewTimeline(z),y.previousNode=g}_visitTiming(g,y){if(g.dynamic){const x=g.strValue;return zr(y.params?ie(x,y.params,y.errors):x,y.errors)}return{duration:g.duration,delay:g.delay,easing:g.easing}}visitAnimate(g,y){const x=y.currentAnimateTimings=this._visitTiming(g.timings,y),z=y.currentTimeline;x.delay&&(y.incrementTime(x.delay),z.snapshotCurrentStyles());const X=g.style;5==X.type?this.visitKeyframes(X,y):(y.incrementTime(x.duration),this.visitStyle(X,y),z.applyStylesToKeyframe()),y.currentAnimateTimings=null,y.previousNode=g}visitStyle(g,y){const x=y.currentTimeline,z=y.currentAnimateTimings;!z&&x.hasCurrentStyleProperties()&&x.forwardFrame();const X=z&&z.easing||g.easing;g.isEmptyStep?x.applyEmptyStep(X):x.setStyles(g.styles,X,y.errors,y.options),y.previousNode=g}visitKeyframes(g,y){const x=y.currentAnimateTimings,z=y.currentTimeline.duration,X=x.duration,ce=y.createSubContext().currentTimeline;ce.easing=x.easing,g.styles.forEach(Be=>{ce.forwardTime((Be.offset||0)*X),ce.setStyles(Be.styles,Be.easing,y.errors,y.options),ce.applyStylesToKeyframe()}),y.currentTimeline.mergeTimelineCollectedStyles(ce),y.transformIntoNewTimeline(z+X),y.previousNode=g}visitQuery(g,y){const x=y.currentTimeline.currentTime,z=g.options||{},X=z.delay?Wr(z.delay):0;X&&(6===y.previousNode.type||0==x&&y.currentTimeline.hasCurrentStyleProperties())&&(y.currentTimeline.snapshotCurrentStyles(),y.previousNode=Ls);let de=x;const ce=y.invokeQuery(g.selector,g.originalSelector,g.limit,g.includeSelf,!!z.optional,y.errors);y.currentQueryTotal=ce.length;let Be=null;ce.forEach((tt,bt)=>{y.currentQueryIndex=bt;const Gt=y.createSubContext(g.options,tt);X&&Gt.delayNextStep(X),tt===y.element&&(Be=Gt.currentTimeline),ke(this,g.animation,Gt),Gt.currentTimeline.applyStylesToKeyframe(),de=Math.max(de,Gt.currentTimeline.currentTime)}),y.currentQueryIndex=0,y.currentQueryTotal=0,y.transformIntoNewTimeline(de),Be&&(y.currentTimeline.mergeTimelineCollectedStyles(Be),y.currentTimeline.snapshotCurrentStyles()),y.previousNode=g}visitStagger(g,y){const x=y.parentContext,z=y.currentTimeline,X=g.timings,de=Math.abs(X.duration),ce=de*(y.currentQueryTotal-1);let Be=de*y.currentQueryIndex;switch(X.duration<0?"reverse":X.easing){case"reverse":Be=ce-Be;break;case"full":Be=x.currentStaggerTime}const bt=y.currentTimeline;Be&&bt.delayNextStep(Be);const Gt=bt.currentTime;ke(this,g.animation,y),y.previousNode=g,x.currentStaggerTime=z.currentTime-Gt+(z.startTime-x.currentTimeline.startTime)}}const Ls={};class Oe{constructor(g,y,x,z,X,de,ce,Be){this._driver=g,this.element=y,this.subInstructions=x,this._enterClassName=z,this._leaveClassName=X,this.errors=de,this.timelines=ce,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ls,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Be||new be(this._driver,y,0),ce.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(g,y){if(!g)return;const x=g;let z=this.options;null!=x.duration&&(z.duration=Wr(x.duration)),null!=x.delay&&(z.delay=Wr(x.delay));const X=x.params;if(X){let de=z.params;de||(de=this.options.params={}),Object.keys(X).forEach(ce=>{(!y||!de.hasOwnProperty(ce))&&(de[ce]=ie(X[ce],de,this.errors))})}}_copyOptions(){const g={};if(this.options){const y=this.options.params;if(y){const x=g.params={};Object.keys(y).forEach(z=>{x[z]=y[z]})}}return g}createSubContext(g=null,y,x){const z=y||this.element,X=new Oe(this._driver,z,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(z,x||0));return X.previousNode=this.previousNode,X.currentAnimateTimings=this.currentAnimateTimings,X.options=this._copyOptions(),X.updateOptions(g),X.currentQueryIndex=this.currentQueryIndex,X.currentQueryTotal=this.currentQueryTotal,X.parentContext=this,this.subContextCount++,X}transformIntoNewTimeline(g){return this.previousNode=Ls,this.currentTimeline=this.currentTimeline.fork(this.element,g),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(g,y,x){const z={duration:y??g.duration,delay:this.currentTimeline.currentTime+(x??0)+g.delay,easing:""},X=new ze(this._driver,g.element,g.keyframes,g.preStyleProps,g.postStyleProps,z,g.stretchStartingKeyframe);return this.timelines.push(X),z}incrementTime(g){this.currentTimeline.forwardTime(this.currentTimeline.duration+g)}delayNextStep(g){g>0&&this.currentTimeline.delayNextStep(g)}invokeQuery(g,y,x,z,X,de){let ce=[];if(z&&ce.push(this.element),g.length>0){g=(g=g.replace(Pi,"."+this._enterClassName)).replace(sr,"."+this._leaveClassName);let tt=this._driver.query(this.element,g,1!=x);0!==x&&(tt=x<0?tt.slice(tt.length+x,tt.length):tt.slice(0,x)),ce.push(...tt)}return!X&&0==ce.length&&de.push(function Ne(S){return new W.vHH(3014,!1)}()),ce}}class be{constructor(g,y,x,z){this._driver=g,this.element=y,this.startTime=x,this._elementTimelineStylesLookup=z,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(y),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(y,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(g){const y=1===this._keyframes.size&&this._pendingStyles.size;this.duration||y?(this.forwardTime(this.currentTime+g),y&&this.snapshotCurrentStyles()):this.startTime+=g}fork(g,y){return this.applyStylesToKeyframe(),new be(this._driver,g,y||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(g){this.applyStylesToKeyframe(),this.duration=g,this._loadKeyframe()}_updateStyle(g,y){this._localTimelineStyles.set(g,y),this._globalTimelineStyles.set(g,y),this._styleSummary.set(g,{time:this.currentTime,value:y})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(g){g&&this._previousKeyframe.set("easing",g);for(let[y,x]of this._globalTimelineStyles)this._backFill.set(y,x||G.l3),this._currentKeyframe.set(y,G.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(g,y,x,z){y&&this._previousKeyframe.set("easing",y);const X=z&&z.params||{},de=function Rt(S,g){const y=new Map;let x;return S.forEach(z=>{if("*"===z){x=x||g.keys();for(let X of x)y.set(X,G.l3)}else le(z,y)}),y}(g,this._globalTimelineStyles);for(let[Be,tt]of de){const bt=ie(tt,X,x);var ce;this._pendingStyles.set(Be,bt),this._localTimelineStyles.has(Be)||this._backFill.set(Be,null!==(ce=this._globalTimelineStyles.get(Be))&&void 0!==ce?ce:G.l3),this._updateStyle(Be,bt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((g,y)=>{this._currentKeyframe.set(y,g)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((g,y)=>{this._currentKeyframe.has(y)||this._currentKeyframe.set(y,g)}))}snapshotCurrentStyles(){for(let[g,y]of this._localTimelineStyles)this._pendingStyles.set(g,y),this._updateStyle(g,y)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const g=[];for(let y in this._currentKeyframe)g.push(y);return g}mergeTimelineCollectedStyles(g){g._styleSummary.forEach((y,x)=>{const z=this._styleSummary.get(x);(!z||y.time>z.time)&&this._updateStyle(x,y.value)})}buildKeyframes(){this.applyStylesToKeyframe();const g=new Set,y=new Set,x=1===this._keyframes.size&&0===this.duration;let z=[];this._keyframes.forEach((ce,Be)=>{const tt=le(ce,new Map,this._backFill);tt.forEach((bt,Gt)=>{bt===G.k1?g.add(Gt):bt===G.l3&&y.add(Gt)}),x||tt.set("offset",Be/this.duration),z.push(tt)});const X=g.size?ee(g.values()):[],de=y.size?ee(y.values()):[];if(x){const ce=z[0],Be=new Map(ce);ce.set("offset",0),Be.set("offset",1),z=[ce,Be]}return Rr(this.element,z,X,de,this.duration,this.startTime,this.easing,!1)}}class ze extends be{constructor(g,y,x,z,X,de,ce=!1){super(g,y,de.delay),this.keyframes=x,this.preStyleProps=z,this.postStyleProps=X,this._stretchStartingKeyframe=ce,this.timings={duration:de.duration,delay:de.delay,easing:de.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let g=this.keyframes,{delay:y,duration:x,easing:z}=this.timings;if(this._stretchStartingKeyframe&&y){const X=[],de=x+y,ce=y/de,Be=le(g[0]);Be.set("offset",0),X.push(Be);const tt=le(g[0]);tt.set("offset",lt(ce)),X.push(tt);const bt=g.length-1;for(let Gt=1;Gt<=bt;Gt++){let Tn=le(g[Gt]);const bn=Tn.get("offset");Tn.set("offset",lt((y+bn*x)/de)),X.push(Tn)}x=de,y=0,z="",g=X}return Rr(this.element,g,this.preStyleProps,this.postStyleProps,x,y,z,!0)}}function lt(S,g=3){const y=Math.pow(10,g-1);return Math.round(S*y)/y}class Xn{}const gr=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class zs extends Xn{normalizePropertyName(g,y){return st(g)}normalizeStyleValue(g,y,x,z){let X="";const de=x.toString().trim();if(gr.has(y)&&0!==x&&"0"!==x)if("number"==typeof x)X="px";else{const ce=x.match(/^[+-]?[\d\.]+([a-z]*)$/);ce&&0==ce[1].length&&z.push(function ue(S,g){return new W.vHH(3005,!1)}())}return de+X}}function ys(S,g,y,x,z,X,de,ce,Be,tt,bt,Gt,Tn){return{type:0,element:S,triggerName:g,isRemovalTransition:z,fromState:y,fromStyles:X,toState:x,toStyles:de,timelines:ce,queriedElements:Be,preStyleProps:tt,postStyleProps:bt,totalTime:Gt,errors:Tn}}const Ni={};class Qs{constructor(g,y,x){this._triggerName=g,this.ast=y,this._stateStyles=x}match(g,y,x,z){return function _s(S,g,y,x,z){return S.some(X=>X(g,y,x,z))}(this.ast.matchers,g,y,x,z)}buildStyles(g,y,x){let z=this._stateStyles.get("*");return void 0!==g&&(z=this._stateStyles.get(g?.toString())||z),z?z.buildStyles(y,x):new Map}build(g,y,x,z,X,de,ce,Be,tt,bt){var Gt;const Tn=[],bn=this.ast.options&&this.ast.options.params||Ni,hn=this.buildStyles(x,ce&&ce.params||Ni,Tn),An=Be&&Be.params||Ni,vr=this.buildStyles(z,An,Tn),ji=new Set,Pr=new Map,Li=new Map,Hi="void"===z,ho={params:Fo(An,bn),delay:null===(Gt=this.ast.options)||void 0===Gt?void 0:Gt.delay},qn=bt?[]:Hs(g,y,this.ast.animation,X,de,hn,vr,ho,tt,Tn);let fo=0;if(qn.forEach(zi=>{fo=Math.max(zi.duration+zi.delay,fo)}),Tn.length)return ys(y,this._triggerName,x,z,Hi,hn,vr,[],[],Pr,Li,fo,Tn);qn.forEach(zi=>{const ya=zi.element,po=dr(Pr,ya,new Set);zi.preStyleProps.forEach(eo=>po.add(eo));const Js=dr(Li,ya,new Set);zi.postStyleProps.forEach(eo=>Js.add(eo)),ya!==y&&ji.add(ya)});const jo=ee(ji.values());return ys(y,this._triggerName,x,z,Hi,hn,vr,qn,jo,Pr,Li,fo)}}function Fo(S,g){const y=rr(g);for(const x in S)S.hasOwnProperty(x)&&null!=S[x]&&(y[x]=S[x]);return y}class vs{constructor(g,y,x){this.styles=g,this.defaultParams=y,this.normalizer=x}buildStyles(g,y){const x=new Map,z=rr(this.defaultParams);return Object.keys(g).forEach(X=>{const de=g[X];null!==de&&(z[X]=de)}),this.styles.styles.forEach(X=>{"string"!=typeof X&&X.forEach((de,ce)=>{de&&(de=ie(de,z,y));const Be=this.normalizer.normalizePropertyName(ce,y);de=this.normalizer.normalizeStyleValue(ce,Be,de,y),x.set(Be,de)})}),x}}class uo{constructor(g,y,x){this.name=g,this.ast=y,this._normalizer=x,this.transitionFactories=[],this.states=new Map,y.states.forEach(z=>{this.states.set(z.name,new vs(z.style,z.options&&z.options.params||{},x))}),ws(this.states,"true","1"),ws(this.states,"false","0"),y.transitions.forEach(z=>{this.transitionFactories.push(new Qs(g,z,this.states))}),this.fallbackTransition=function lo(S,g,y){return new Qs(S,{type:1,animation:{type:2,steps:[],options:null},matchers:[(de,ce)=>!0],options:null,queryCount:0,depCount:0},g)}(g,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(g,y,x,z){return this.transitionFactories.find(de=>de.match(g,y,x,z))||null}matchStyles(g,y,x){return this.fallbackTransition.buildStyles(g,y,x)}}function ws(S,g,y){S.has(g)?S.has(y)||S.set(y,S.get(g)):S.has(y)&&S.set(g,S.get(y))}const co=new ms;class Uo{constructor(g,y,x){this.bodyNode=g,this._driver=y,this._normalizer=x,this._animations=new Map,this._playersById=new Map,this.players=[]}register(g,y){const x=[],X=lr(this._driver,y,x,[]);if(x.length)throw function ot(S){return new W.vHH(3503,!1)}();this._animations.set(g,X)}_buildPlayer(g,y,x){const z=g.element,X=Qn(0,this._normalizer,0,g.keyframes,y,x);return this._driver.animate(z,X,g.duration,g.delay,g.easing,[],!0)}create(g,y,x={}){const z=[],X=this._animations.get(g);let de;const ce=new Map;if(X?(de=Hs(this._driver,y,X,wr,Fn,new Map,new Map,x,co,z),de.forEach(bt=>{const Gt=dr(ce,bt.element,new Map);bt.postStyleProps.forEach(Tn=>Gt.set(Tn,null))})):(z.push(function je(){return new W.vHH(3300,!1)}()),de=[]),z.length)throw function Mt(S){return new W.vHH(3504,!1)}();ce.forEach((bt,Gt)=>{bt.forEach((Tn,bn)=>{bt.set(bn,this._driver.computeStyle(Gt,bn,G.l3))})});const tt=ar(de.map(bt=>{const Gt=ce.get(bt.element);return this._buildPlayer(bt,new Map,Gt)}));return this._playersById.set(g,tt),tt.onDestroy(()=>this.destroy(g)),this.players.push(tt),tt}destroy(g){const y=this._getPlayer(g);y.destroy(),this._playersById.delete(g);const x=this.players.indexOf(y);x>=0&&this.players.splice(x,1)}_getPlayer(g){const y=this._playersById.get(g);if(!y)throw function It(S){return new W.vHH(3301,!1)}();return y}listen(g,y,x,z){const X=Mi(y,"","","");return Sr(this._getPlayer(g),x,X,z),()=>{}}command(g,y,x,z){if("register"==x)return void this.register(g,z[0]);if("create"==x)return void this.create(g,y,z[0]||{});const X=this._getPlayer(g);switch(x){case"play":X.play();break;case"pause":X.pause();break;case"reset":X.reset();break;case"restart":X.restart();break;case"finish":X.finish();break;case"init":X.init();break;case"setPosition":X.setPosition(parseFloat(z[0]));break;case"destroy":this.destroy(g)}}}const Bo="ng-animate-queued",Ei="ng-animate-disabled",Is=[],ma={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},$r={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ai="__ng_removed";class jr{constructor(g,y=""){this.namespaceId=y;const x=g&&g.hasOwnProperty("value");if(this.value=function Sa(S){return S??null}(x?g.value:g),x){const X=rr(g);delete X.value,this.options=X}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(g){const y=g.params;if(y){const x=this.options.params;Object.keys(y).forEach(z=>{null==x[z]&&(x[z]=y[z])})}}}const Si="void",Ui=new jr(Si);class Vo{constructor(g,y,x){this.id=g,this.hostElement=y,this._engine=x,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+g,dn(y,this._hostClassName)}listen(g,y,x,z){if(!this._triggers.has(y))throw function yn(S,g){return new W.vHH(3302,!1)}();if(null==x||0==x.length)throw function On(S){return new W.vHH(3303,!1)}();if(!function pi(S){return"start"==S||"done"==S}(x))throw function Rn(S,g){return new W.vHH(3400,!1)}();const X=dr(this._elementListeners,g,[]),de={name:y,phase:x,callback:z};X.push(de);const ce=dr(this._engine.statesByElement,g,new Map);return ce.has(y)||(dn(g,hi),dn(g,hi+"-"+y),ce.set(y,Ui)),()=>{this._engine.afterFlush(()=>{const Be=X.indexOf(de);Be>=0&&X.splice(Be,1),this._triggers.has(y)||ce.delete(y)})}}register(g,y){return!this._triggers.has(g)&&(this._triggers.set(g,y),!0)}_getTrigger(g){const y=this._triggers.get(g);if(!y)throw function Dt(S){return new W.vHH(3401,!1)}();return y}trigger(g,y,x,z=!0){const X=this._getTrigger(y),de=new Gs(this.id,y,g);let ce=this._engine.statesByElement.get(g);ce||(dn(g,hi),dn(g,hi+"-"+y),this._engine.statesByElement.set(g,ce=new Map));let Be=ce.get(y);const tt=new jr(x,this.id);if(!(x&&x.hasOwnProperty("value"))&&Be&&tt.absorbOptions(Be.options),ce.set(y,tt),Be||(Be=Ui),tt.value!==Si&&Be.value===tt.value){if(!function Xs(S,g){const y=Object.keys(S),x=Object.keys(g);if(y.length!=x.length)return!1;for(let z=0;z<y.length;z++){const X=y[z];if(!g.hasOwnProperty(X)||S[X]!==g[X])return!1}return!0}(Be.params,tt.params)){const hn=[],An=X.matchStyles(Be.value,Be.params,hn),vr=X.matchStyles(tt.value,tt.params,hn);hn.length?this._engine.reportError(hn):this._engine.afterFlush(()=>{At(g,An),Fe(g,vr)})}return}const Tn=dr(this._engine.playersByElement,g,[]);Tn.forEach(hn=>{hn.namespaceId==this.id&&hn.triggerName==y&&hn.queued&&hn.destroy()});let bn=X.matchTransition(Be.value,tt.value,g,tt.params),_n=!1;if(!bn){if(!z)return;bn=X.fallbackTransition,_n=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:y,transition:bn,fromState:Be,toState:tt,player:de,isFallbackTransition:_n}),_n||(dn(g,Bo),de.onStart(()=>{Ys(g,Bo)})),de.onDone(()=>{let hn=this.players.indexOf(de);hn>=0&&this.players.splice(hn,1);const An=this._engine.playersByElement.get(g);if(An){let vr=An.indexOf(de);vr>=0&&An.splice(vr,1)}}),this.players.push(de),Tn.push(de),de}deregister(g){this._triggers.delete(g),this._engine.statesByElement.forEach(y=>y.delete(g)),this._elementListeners.forEach((y,x)=>{this._elementListeners.set(x,y.filter(z=>z.name!=g))})}clearElementCache(g){this._engine.statesByElement.delete(g),this._elementListeners.delete(g);const y=this._engine.playersByElement.get(g);y&&(y.forEach(x=>x.destroy()),this._engine.playersByElement.delete(g))}_signalRemovalForInnerTriggers(g,y){const x=this._engine.driver.query(g,Hn,!0);x.forEach(z=>{if(z[ai])return;const X=this._engine.fetchNamespacesByElement(z);X.size?X.forEach(de=>de.triggerLeaveAnimation(z,y,!1,!0)):this.clearElementCache(z)}),this._engine.afterFlushAnimationsDone(()=>x.forEach(z=>this.clearElementCache(z)))}triggerLeaveAnimation(g,y,x,z){const X=this._engine.statesByElement.get(g),de=new Map;if(X){const ce=[];if(X.forEach((Be,tt)=>{if(de.set(tt,Be.value),this._triggers.has(tt)){const bt=this.trigger(g,tt,Si,z);bt&&ce.push(bt)}}),ce.length)return this._engine.markElementAsRemoved(this.id,g,!0,y,de),x&&ar(ce).onDone(()=>this._engine.processLeaveNode(g)),!0}return!1}prepareLeaveAnimationListeners(g){const y=this._elementListeners.get(g),x=this._engine.statesByElement.get(g);if(y&&x){const z=new Set;y.forEach(X=>{const de=X.name;if(z.has(de))return;z.add(de);const Be=this._triggers.get(de).fallbackTransition,tt=x.get(de)||Ui,bt=new jr(Si),Gt=new Gs(this.id,de,g);this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:de,transition:Be,fromState:tt,toState:bt,player:Gt,isFallbackTransition:!0})})}}removeNode(g,y){const x=this._engine;if(g.childElementCount&&this._signalRemovalForInnerTriggers(g,y),this.triggerLeaveAnimation(g,y,!0))return;let z=!1;if(x.totalAnimations){const X=x.players.length?x.playersByQueriedElement.get(g):[];if(X&&X.length)z=!0;else{let de=g;for(;de=de.parentNode;)if(x.statesByElement.get(de)){z=!0;break}}}if(this.prepareLeaveAnimationListeners(g),z)x.markElementAsRemoved(this.id,g,!1,y);else{const X=g[ai];(!X||X===ma)&&(x.afterFlush(()=>this.clearElementCache(g)),x.destroyInnerAnimations(g),x._onRemovalComplete(g,y))}}insertNode(g,y){dn(g,this._hostClassName)}drainQueuedTransitions(g){const y=[];return this._queue.forEach(x=>{const z=x.player;if(z.destroyed)return;const X=x.element,de=this._elementListeners.get(X);de&&de.forEach(ce=>{if(ce.name==x.triggerName){const Be=Mi(X,x.triggerName,x.fromState.value,x.toState.value);Be._data=g,Sr(x.player,ce.phase,Be,ce.callback)}}),z.markedForDestroy?this._engine.afterFlush(()=>{z.destroy()}):y.push(x)}),this._queue=[],y.sort((x,z)=>{const X=x.transition.ast.depCount,de=z.transition.ast.depCount;return 0==X||0==de?X-de:this._engine.driver.containsElement(x.element,z.element)?1:-1})}destroy(g){this.players.forEach(y=>y.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,g)}elementContainsData(g){let y=!1;return this._elementListeners.has(g)&&(y=!0),y=!!this._queue.find(x=>x.element===g)||y,y}}class Io{constructor(g,y,x){this.bodyNode=g,this.driver=y,this._normalizer=x,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(z,X)=>{}}_onRemovalComplete(g,y){this.onRemovalComplete(g,y)}get queuedPlayers(){const g=[];return this._namespaceList.forEach(y=>{y.players.forEach(x=>{x.queued&&g.push(x)})}),g}createNamespace(g,y){const x=new Vo(g,y,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,y)?this._balanceNamespaceList(x,y):(this.newHostElements.set(y,x),this.collectEnterElement(y)),this._namespaceLookup[g]=x}_balanceNamespaceList(g,y){const x=this._namespaceList,z=this.namespacesByHostElement;if(x.length-1>=0){let de=!1,ce=this.driver.getParentElement(y);for(;ce;){const Be=z.get(ce);if(Be){const tt=x.indexOf(Be);x.splice(tt+1,0,g),de=!0;break}ce=this.driver.getParentElement(ce)}de||x.unshift(g)}else x.push(g);return z.set(y,g),g}register(g,y){let x=this._namespaceLookup[g];return x||(x=this.createNamespace(g,y)),x}registerTrigger(g,y,x){let z=this._namespaceLookup[g];z&&z.register(y,x)&&this.totalAnimations++}destroy(g,y){if(!g)return;const x=this._fetchNamespace(g);this.afterFlush(()=>{this.namespacesByHostElement.delete(x.hostElement),delete this._namespaceLookup[g];const z=this._namespaceList.indexOf(x);z>=0&&this._namespaceList.splice(z,1)}),this.afterFlushAnimationsDone(()=>x.destroy(y))}_fetchNamespace(g){return this._namespaceLookup[g]}fetchNamespacesByElement(g){const y=new Set,x=this.statesByElement.get(g);if(x)for(let z of x.values())if(z.namespaceId){const X=this._fetchNamespace(z.namespaceId);X&&y.add(X)}return y}trigger(g,y,x,z){if(Zi(y)){const X=this._fetchNamespace(g);if(X)return X.trigger(y,x,z),!0}return!1}insertNode(g,y,x,z){if(!Zi(y))return;const X=y[ai];if(X&&X.setForRemoval){X.setForRemoval=!1,X.setForMove=!0;const de=this.collectedLeaveElements.indexOf(y);de>=0&&this.collectedLeaveElements.splice(de,1)}if(g){const de=this._fetchNamespace(g);de&&de.insertNode(y,x)}z&&this.collectEnterElement(y)}collectEnterElement(g){this.collectedEnterElements.push(g)}markElementAsDisabled(g,y){y?this.disabledNodes.has(g)||(this.disabledNodes.add(g),dn(g,Ei)):this.disabledNodes.has(g)&&(this.disabledNodes.delete(g),Ys(g,Ei))}removeNode(g,y,x,z){if(Zi(y)){const X=g?this._fetchNamespace(g):null;if(X?X.removeNode(y,z):this.markElementAsRemoved(g,y,!1,z),x){const de=this.namespacesByHostElement.get(y);de&&de.id!==g&&de.removeNode(y,z)}}else this._onRemovalComplete(y,z)}markElementAsRemoved(g,y,x,z,X){this.collectedLeaveElements.push(y),y[ai]={namespaceId:g,setForRemoval:z,hasAnimation:x,removedBeforeQueried:!1,previousTriggersValues:X}}listen(g,y,x,z,X){return Zi(y)?this._fetchNamespace(g).listen(y,x,z,X):()=>{}}_buildInstruction(g,y,x,z,X){return g.transition.build(this.driver,g.element,g.fromState.value,g.toState.value,x,z,g.fromState.options,g.toState.options,y,X)}destroyInnerAnimations(g){let y=this.driver.query(g,Hn,!0);y.forEach(x=>this.destroyActiveAnimationsForElement(x)),0!=this.playersByQueriedElement.size&&(y=this.driver.query(g,Ir,!0),y.forEach(x=>this.finishActiveQueriedAnimationOnElement(x)))}destroyActiveAnimationsForElement(g){const y=this.playersByElement.get(g);y&&y.forEach(x=>{x.queued?x.markedForDestroy=!0:x.destroy()})}finishActiveQueriedAnimationOnElement(g){const y=this.playersByQueriedElement.get(g);y&&y.forEach(x=>x.finish())}whenRenderingDone(){return new Promise(g=>{if(this.players.length)return ar(this.players).onDone(()=>g());g()})}processLeaveNode(g){var y;const x=g[ai];if(x&&x.setForRemoval){if(g[ai]=ma,x.namespaceId){this.destroyInnerAnimations(g);const z=this._fetchNamespace(x.namespaceId);z&&z.clearElementCache(g)}this._onRemovalComplete(g,x.setForRemoval)}null!==(y=g.classList)&&void 0!==y&&y.contains(Ei)&&this.markElementAsDisabled(g,!1),this.driver.query(g,".ng-animate-disabled",!0).forEach(z=>{this.markElementAsDisabled(z,!1)})}flush(g=-1){let y=[];if(this.newHostElements.size&&(this.newHostElements.forEach((x,z)=>this._balanceNamespaceList(x,z)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let x=0;x<this.collectedEnterElements.length;x++)dn(this.collectedEnterElements[x],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const x=[];try{y=this._flushAnimations(x,g)}finally{for(let z=0;z<x.length;z++)x[z]()}}else for(let x=0;x<this.collectedLeaveElements.length;x++)this.processLeaveNode(this.collectedLeaveElements[x]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(x=>x()),this._flushFns=[],this._whenQuietFns.length){const x=this._whenQuietFns;this._whenQuietFns=[],y.length?ar(y).onDone(()=>{x.forEach(z=>z())}):x.forEach(z=>z())}}reportError(g){throw function nr(S){return new W.vHH(3402,!1)}()}_flushAnimations(g,y){const x=new ms,z=[],X=new Map,de=[],ce=new Map,Be=new Map,tt=new Map,bt=new Set;this.disabledNodes.forEach(Yt=>{bt.add(Yt);const Xt=this.driver.query(Yt,".ng-animate-queued",!0);for(let rn=0;rn<Xt.length;rn++)bt.add(Xt[rn])});const Gt=this.bodyNode,Tn=Array.from(this.statesByElement.keys()),bn=ki(Tn,this.collectedEnterElements),_n=new Map;let hn=0;bn.forEach((Yt,Xt)=>{const rn=wr+hn++;_n.set(Xt,rn),Yt.forEach(Nn=>dn(Nn,rn))});const An=[],vr=new Set,ji=new Set;for(let Yt=0;Yt<this.collectedLeaveElements.length;Yt++){const Xt=this.collectedLeaveElements[Yt],rn=Xt[ai];rn&&rn.setForRemoval&&(An.push(Xt),vr.add(Xt),rn.hasAnimation?this.driver.query(Xt,".ng-star-inserted",!0).forEach(Nn=>vr.add(Nn)):ji.add(Xt))}const Pr=new Map,Li=ki(Tn,Array.from(vr));Li.forEach((Yt,Xt)=>{const rn=Fn+hn++;Pr.set(Xt,rn),Yt.forEach(Nn=>dn(Nn,rn))}),g.push(()=>{bn.forEach((Yt,Xt)=>{const rn=_n.get(Xt);Yt.forEach(Nn=>Ys(Nn,rn))}),Li.forEach((Yt,Xt)=>{const rn=Pr.get(Xt);Yt.forEach(Nn=>Ys(Nn,rn))}),An.forEach(Yt=>{this.processLeaveNode(Yt)})});const Hi=[],ho=[];for(let Yt=this._namespaceList.length-1;Yt>=0;Yt--)this._namespaceList[Yt].drainQueuedTransitions(y).forEach(rn=>{const Nn=rn.player,Gr=rn.element;if(Hi.push(Nn),this.collectedEnterElements.length){const Gi=Gr[ai];if(Gi&&Gi.setForMove){if(Gi.previousTriggersValues&&Gi.previousTriggersValues.has(rn.triggerName)){const Ds=Gi.previousTriggersValues.get(rn.triggerName),rs=this.statesByElement.get(rn.element);if(rs&&rs.has(rn.triggerName)){const Ho=rs.get(rn.triggerName);Ho.value=Ds,rs.set(rn.triggerName,Ho)}}return void Nn.destroy()}}const Yi=!Gt||!this.driver.containsElement(Gt,Gr),Bi=Pr.get(Gr),to=_n.get(Gr),or=this._buildInstruction(rn,x,to,Bi,Yi);if(or.errors&&or.errors.length)return void ho.push(or);if(Yi)return Nn.onStart(()=>At(Gr,or.fromStyles)),Nn.onDestroy(()=>Fe(Gr,or.toStyles)),void z.push(Nn);if(rn.isFallbackTransition)return Nn.onStart(()=>At(Gr,or.fromStyles)),Nn.onDestroy(()=>Fe(Gr,or.toStyles)),void z.push(Nn);const Aa=[];or.timelines.forEach(Gi=>{Gi.stretchStartingKeyframe=!0,this.disabledNodes.has(Gi.element)||Aa.push(Gi)}),or.timelines=Aa,x.append(Gr,or.timelines),de.push({instruction:or,player:Nn,element:Gr}),or.queriedElements.forEach(Gi=>dr(ce,Gi,[]).push(Nn)),or.preStyleProps.forEach((Gi,Ds)=>{if(Gi.size){let rs=Be.get(Ds);rs||Be.set(Ds,rs=new Set),Gi.forEach((Ho,_a)=>rs.add(_a))}}),or.postStyleProps.forEach((Gi,Ds)=>{let rs=tt.get(Ds);rs||tt.set(Ds,rs=new Set),Gi.forEach((Ho,_a)=>rs.add(_a))})});if(ho.length){const Yt=[];ho.forEach(Xt=>{Yt.push(function en(S,g){return new W.vHH(3505,!1)}())}),Hi.forEach(Xt=>Xt.destroy()),this.reportError(Yt)}const qn=new Map,fo=new Map;de.forEach(Yt=>{const Xt=Yt.element;x.has(Xt)&&(fo.set(Xt,Xt),this._beforeAnimationBuild(Yt.player.namespaceId,Yt.instruction,qn))}),z.forEach(Yt=>{const Xt=Yt.element;this._getPreviousPlayers(Xt,!1,Yt.namespaceId,Yt.triggerName,null).forEach(Nn=>{dr(qn,Xt,[]).push(Nn),Nn.destroy()})});const jo=An.filter(Yt=>Fs(Yt,Be,tt)),zi=new Map;Oi(zi,this.driver,ji,tt,G.l3).forEach(Yt=>{Fs(Yt,Be,tt)&&jo.push(Yt)});const po=new Map;bn.forEach((Yt,Xt)=>{Oi(po,this.driver,new Set(Yt),Be,G.k1)}),jo.forEach(Yt=>{var Xt,rn;const Nn=zi.get(Yt),Gr=po.get(Yt);zi.set(Yt,new Map([...Array.from(null!==(Xt=Nn?.entries())&&void 0!==Xt?Xt:[]),...Array.from(null!==(rn=Gr?.entries())&&void 0!==rn?rn:[])]))});const Js=[],eo=[],Jo={};de.forEach(Yt=>{const{element:Xt,player:rn,instruction:Nn}=Yt;if(x.has(Xt)){if(bt.has(Xt))return rn.onDestroy(()=>Fe(Xt,Nn.toStyles)),rn.disabled=!0,rn.overrideTotalTime(Nn.totalTime),void z.push(rn);let Gr=Jo;if(fo.size>1){let Bi=Xt;const to=[];for(;Bi=Bi.parentNode;){const or=fo.get(Bi);if(or){Gr=or;break}to.push(Bi)}to.forEach(or=>fo.set(or,Gr))}const Yi=this._buildAnimation(rn.namespaceId,Nn,qn,X,po,zi);if(rn.setRealPlayer(Yi),Gr===Jo)Js.push(rn);else{const Bi=this.playersByElement.get(Gr);Bi&&Bi.length&&(rn.parentPlayer=ar(Bi)),z.push(rn)}}else At(Xt,Nn.fromStyles),rn.onDestroy(()=>Fe(Xt,Nn.toStyles)),eo.push(rn),bt.has(Xt)&&z.push(rn)}),eo.forEach(Yt=>{const Xt=X.get(Yt.element);if(Xt&&Xt.length){const rn=ar(Xt);Yt.setRealPlayer(rn)}}),z.forEach(Yt=>{Yt.parentPlayer?Yt.syncPlayerEvents(Yt.parentPlayer):Yt.destroy()});for(let Yt=0;Yt<An.length;Yt++){const Xt=An[Yt],rn=Xt[ai];if(Ys(Xt,Fn),rn&&rn.hasAnimation)continue;let Nn=[];if(ce.size){let Yi=ce.get(Xt);Yi&&Yi.length&&Nn.push(...Yi);let Bi=this.driver.query(Xt,Ir,!0);for(let to=0;to<Bi.length;to++){let or=ce.get(Bi[to]);or&&or.length&&Nn.push(...or)}}const Gr=Nn.filter(Yi=>!Yi.destroyed);Gr.length?Ws(this,Xt,Gr):this.processLeaveNode(Xt)}return An.length=0,Js.forEach(Yt=>{this.players.push(Yt),Yt.onDone(()=>{Yt.destroy();const Xt=this.players.indexOf(Yt);this.players.splice(Xt,1)}),Yt.play()}),Js}elementContainsData(g,y){let x=!1;const z=y[ai];return z&&z.setForRemoval&&(x=!0),this.playersByElement.has(y)&&(x=!0),this.playersByQueriedElement.has(y)&&(x=!0),this.statesByElement.has(y)&&(x=!0),this._fetchNamespace(g).elementContainsData(y)||x}afterFlush(g){this._flushFns.push(g)}afterFlushAnimationsDone(g){this._whenQuietFns.push(g)}_getPreviousPlayers(g,y,x,z,X){let de=[];if(y){const ce=this.playersByQueriedElement.get(g);ce&&(de=ce)}else{const ce=this.playersByElement.get(g);if(ce){const Be=!X||X==Si;ce.forEach(tt=>{tt.queued||!Be&&tt.triggerName!=z||de.push(tt)})}}return(x||z)&&(de=de.filter(ce=>!(x&&x!=ce.namespaceId||z&&z!=ce.triggerName))),de}_beforeAnimationBuild(g,y,x){const X=y.element,de=y.isRemovalTransition?void 0:g,ce=y.isRemovalTransition?void 0:y.triggerName;for(const Be of y.timelines){const tt=Be.element,bt=tt!==X,Gt=dr(x,tt,[]);this._getPreviousPlayers(tt,bt,de,ce,y.toState).forEach(bn=>{const _n=bn.getRealPlayer();_n.beforeDestroy&&_n.beforeDestroy(),bn.destroy(),Gt.push(bn)})}At(X,y.fromStyles)}_buildAnimation(g,y,x,z,X,de){const ce=y.triggerName,Be=y.element,tt=[],bt=new Set,Gt=new Set,Tn=y.timelines.map(_n=>{const hn=_n.element;bt.add(hn);const An=hn[ai];if(An&&An.removedBeforeQueried)return new G.ZN(_n.duration,_n.delay);const vr=hn!==Be,ji=function Do(S){const g=[];return ua(S,g),g}((x.get(hn)||Is).map(qn=>qn.getRealPlayer())).filter(qn=>!!qn.element&&qn.element===hn),Pr=X.get(hn),Li=de.get(hn),Hi=Qn(0,this._normalizer,0,_n.keyframes,Pr,Li),ho=this._buildPlayer(_n,Hi,ji);if(_n.subTimeline&&z&&Gt.add(hn),vr){const qn=new Gs(g,ce,hn);qn.setRealPlayer(ho),tt.push(qn)}return ho});tt.forEach(_n=>{dr(this.playersByQueriedElement,_n.element,[]).push(_n),_n.onDone(()=>function Jn(S,g,y){let x=S.get(g);if(x){if(x.length){const z=x.indexOf(y);x.splice(z,1)}0==x.length&&S.delete(g)}return x}(this.playersByQueriedElement,_n.element,_n))}),bt.forEach(_n=>dn(_n,Ar));const bn=ar(Tn);return bn.onDestroy(()=>{bt.forEach(_n=>Ys(_n,Ar)),Fe(Be,y.toStyles)}),Gt.forEach(_n=>{dr(z,_n,[]).push(bn)}),bn}_buildPlayer(g,y,x){return y.length>0?this.driver.animate(g.element,y,g.duration,g.delay,g.easing,x):new G.ZN(g.duration,g.delay)}}class Gs{constructor(g,y,x){this.namespaceId=g,this.triggerName=y,this.element=x,this._player=new G.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(g){this._containsRealPlayer||(this._player=g,this._queuedCallbacks.forEach((y,x)=>{y.forEach(z=>Sr(g,x,void 0,z))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(g.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(g){this.totalTime=g}syncPlayerEvents(g){const y=this._player;y.triggerCallback&&g.onStart(()=>y.triggerCallback("start")),g.onDone(()=>this.finish()),g.onDestroy(()=>this.destroy())}_queueEvent(g,y){dr(this._queuedCallbacks,g,[]).push(y)}onDone(g){this.queued&&this._queueEvent("done",g),this._player.onDone(g)}onStart(g){this.queued&&this._queueEvent("start",g),this._player.onStart(g)}onDestroy(g){this.queued&&this._queueEvent("destroy",g),this._player.onDestroy(g)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(g){this.queued||this._player.setPosition(g)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(g){const y=this._player;y.triggerCallback&&y.triggerCallback(g)}}function Zi(S){return S&&1===S.nodeType}function Ii(S,g){const y=S.style.display;return S.style.display=g??"none",y}function Oi(S,g,y,x,z){const X=[];y.forEach(Be=>X.push(Ii(Be)));const de=[];x.forEach((Be,tt)=>{const bt=new Map;Be.forEach(Gt=>{const Tn=g.computeStyle(tt,Gt,z);bt.set(Gt,Tn),(!Tn||0==Tn.length)&&(tt[ai]=$r,de.push(tt))}),S.set(tt,bt)});let ce=0;return y.forEach(Be=>Ii(Be,X[ce++])),de}function ki(S,g){const y=new Map;if(S.forEach(ce=>y.set(ce,[])),0==g.length)return y;const z=new Set(g),X=new Map;function de(ce){if(!ce)return 1;let Be=X.get(ce);if(Be)return Be;const tt=ce.parentNode;return Be=y.has(tt)?tt:z.has(tt)?1:de(tt),X.set(ce,Be),Be}return g.forEach(ce=>{const Be=de(ce);1!==Be&&y.get(Be).push(ce)}),y}function dn(S,g){var y;null===(y=S.classList)||void 0===y||y.add(g)}function Ys(S,g){var y;null===(y=S.classList)||void 0===y||y.remove(g)}function Ws(S,g,y){ar(y).onDone(()=>S.processLeaveNode(g))}function ua(S,g){for(let y=0;y<S.length;y++){const x=S[y];x instanceof G.ZE?ua(x.players,g):g.push(x)}}function Fs(S,g,y){const x=y.get(S);if(!x)return!1;let z=g.get(S);return z?x.forEach(X=>z.add(X)):g.set(S,x),y.delete(S),!0}class $i{constructor(g,y,x){this.bodyNode=g,this._driver=y,this._normalizer=x,this._triggerCache={},this.onRemovalComplete=(z,X)=>{},this._transitionEngine=new Io(g,y,x),this._timelineEngine=new Uo(g,y,x),this._transitionEngine.onRemovalComplete=(z,X)=>this.onRemovalComplete(z,X)}registerTrigger(g,y,x,z,X){const de=g+"-"+z;let ce=this._triggerCache[de];if(!ce){const Be=[],bt=lr(this._driver,X,Be,[]);if(Be.length)throw function we(S,g){return new W.vHH(3404,!1)}();ce=function Es(S,g,y){return new uo(S,g,y)}(z,bt,this._normalizer),this._triggerCache[de]=ce}this._transitionEngine.registerTrigger(y,z,ce)}register(g,y){this._transitionEngine.register(g,y)}destroy(g,y){this._transitionEngine.destroy(g,y)}onInsert(g,y,x,z){this._transitionEngine.insertNode(g,y,x,z)}onRemove(g,y,x,z){this._transitionEngine.removeNode(g,y,z||!1,x)}disableAnimations(g,y){this._transitionEngine.markElementAsDisabled(g,y)}process(g,y,x,z){if("@"==x.charAt(0)){const[X,de]=Lr(x);this._timelineEngine.command(X,y,de,z)}else this._transitionEngine.trigger(g,y,x,z)}listen(g,y,x,z,X){if("@"==x.charAt(0)){const[de,ce]=Lr(x);return this._timelineEngine.listen(de,y,ce,X)}return this._transitionEngine.listen(g,y,x,z,X)}flush(g=-1){this._transitionEngine.flush(g)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let _t=(()=>{class S{constructor(y,x,z){this._element=y,this._startStyles=x,this._endStyles=z,this._state=0;let X=S.initialStylesByElement.get(y);X||S.initialStylesByElement.set(y,X=new Map),this._initialStyles=X}start(){this._state<1&&(this._startStyles&&Fe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Fe(this._element,this._initialStyles),this._endStyles&&(Fe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(S.initialStylesByElement.delete(this._element),this._startStyles&&(At(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(At(this._element,this._endStyles),this._endStyles=null),Fe(this._element,this._initialStyles),this._state=3)}}return S.initialStylesByElement=new WeakMap,S})();function Cn(S){let g=null;return S.forEach((y,x)=>{(function Yo(S){return"display"===S||"position"===S})(x)&&(g=g||new Map,g.set(x,y))}),g}class $o{constructor(g,y,x,z){this.element=g,this.keyframes=y,this.options=x,this._specialStyles=z,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=x.duration,this._delay=x.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(g=>g()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const g=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,g,this.options),this._finalKeyframe=g.length?g[g.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(g){const y=[];return g.forEach(x=>{y.push(Object.fromEntries(x))}),y}_triggerWebAnimation(g,y,x){return g.animate(this._convertKeyframesToObject(y),x)}onStart(g){this._originalOnStartFns.push(g),this._onStartFns.push(g)}onDone(g){this._originalOnDoneFns.push(g),this._onDoneFns.push(g)}onDestroy(g){this._onDestroyFns.push(g)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(g=>g()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(g=>g()),this._onDestroyFns=[])}setPosition(g){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=g*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const g=new Map;this.hasStarted()&&this._finalKeyframe.forEach((x,z)=>{"offset"!==z&&g.set(z,this._finished?x:yt(this.element,z))}),this.currentSnapshot=g}triggerCallback(g){const y="start"===g?this._onStartFns:this._onDoneFns;y.forEach(x=>x()),y.length=0}}class qr{validateStyleProperty(g){return!0}validateAnimatableStyleProperty(g){return!0}matchesElement(g,y){return!1}containsElement(g,y){return Ln(g,y)}getParentElement(g){return Ut(g)}query(g,y,x){return Ht(g,y,x)}computeStyle(g,y,x){return window.getComputedStyle(g)[y]}animate(g,y,x,z,X,de=[]){const Be={duration:x,delay:z,fill:0==z?"both":"forwards"};X&&(Be.easing=X);const tt=new Map,bt=de.filter(bn=>bn instanceof $o);(function on(S,g){return 0===S||0===g})(x,z)&&bt.forEach(bn=>{bn.currentSnapshot.forEach((_n,hn)=>tt.set(hn,_n))});let Gt=function ri(S){return S.length?S[0]instanceof Map?S:S.map(g=>ni(g)):[]}(y).map(bn=>le(bn));Gt=function Ue(S,g,y){if(y.size&&g.length){let x=g[0],z=[];if(y.forEach((X,de)=>{x.has(de)||z.push(de),x.set(de,X)}),z.length)for(let X=1;X<g.length;X++){let de=g[X];z.forEach(ce=>de.set(ce,yt(S,ce)))}}return g}(g,Gt,tt);const Tn=function Ks(S,g){let y=null,x=null;return Array.isArray(g)&&g.length?(y=Cn(g[0]),g.length>1&&(x=Cn(g[g.length-1]))):g instanceof Map&&(y=Cn(g)),y||x?new _t(S,y,x):null}(g,Gt);return new $o(g,Gt,Be,Tn)}}var Xo=U(6895);let To=(()=>{class S extends G._j{constructor(y,x){super(),this._nextAnimationId=0,this._renderer=y.createRenderer(x.body,{id:"0",encapsulation:W.ifc.None,styles:[],data:{animation:[]}})}build(y){const x=this._nextAnimationId.toString();this._nextAnimationId++;const z=Array.isArray(y)?(0,G.vP)(y):y;return L(this._renderer,null,x,"register",[z]),new hs(x,this._renderer)}}return S.\u0275fac=function(y){return new(y||S)(W.LFG(W.FYo),W.LFG(Xo.K0))},S.\u0275prov=W.Yz7({token:S,factory:S.\u0275fac}),S})();class hs extends G.LC{constructor(g,y){super(),this._id=g,this._renderer=y}create(g,y){return new B(this._id,g,y||{},this._renderer)}}class B{constructor(g,y,x,z){this.id=g,this.element=y,this._renderer=z,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",x)}_listen(g,y){return this._renderer.listen(this.element,`@@${this.id}:${g}`,y)}_command(g,...y){return L(this._renderer,this.element,this.id,g,y)}onDone(g){this._listen("done",g)}onStart(g){this._listen("start",g)}onDestroy(g){this._listen("destroy",g)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(g){this._command("setPosition",g)}getPosition(){var g,y;return null!==(g=null===(y=this._renderer.engine.players[+this.id])||void 0===y?void 0:y.getPosition())&&void 0!==g?g:0}}function L(S,g,y,x,z){return S.setProperty(g,`@@${y}:${x}`,z)}const J="@",he="@.disabled";let Re=(()=>{class S{constructor(y,x,z){this.delegate=y,this.engine=x,this._zone=z,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),x.onRemovalComplete=(X,de)=>{const ce=de?.parentNode(X);ce&&de.removeChild(ce,X)}}createRenderer(y,x){const X=this.delegate.createRenderer(y,x);if(!(y&&x&&x.data&&x.data.animation)){let bt=this._rendererCache.get(X);return bt||(bt=new rt("",X,this.engine),this._rendererCache.set(X,bt)),bt}const de=x.id,ce=x.id+"-"+this._currentId;this._currentId++,this.engine.register(ce,y);const Be=bt=>{Array.isArray(bt)?bt.forEach(Be):this.engine.registerTrigger(de,ce,y,bt.name,bt)};return x.data.animation.forEach(Be),new dt(this,ce,X,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(y,x,z){y>=0&&y<this._microtaskId?this._zone.run(()=>x(z)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(X=>{const[de,ce]=X;de(ce)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([x,z]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return S.\u0275fac=function(y){return new(y||S)(W.LFG(W.FYo),W.LFG($i),W.LFG(W.R0b))},S.\u0275prov=W.Yz7({token:S,factory:S.\u0275fac}),S})();class rt{constructor(g,y,x){this.namespaceId=g,this.delegate=y,this.engine=x,this.destroyNode=this.delegate.destroyNode?z=>y.destroyNode(z):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(g,y){return this.delegate.createElement(g,y)}createComment(g){return this.delegate.createComment(g)}createText(g){return this.delegate.createText(g)}appendChild(g,y){this.delegate.appendChild(g,y),this.engine.onInsert(this.namespaceId,y,g,!1)}insertBefore(g,y,x,z=!0){this.delegate.insertBefore(g,y,x),this.engine.onInsert(this.namespaceId,y,g,z)}removeChild(g,y,x){this.engine.onRemove(this.namespaceId,y,this.delegate,x)}selectRootElement(g,y){return this.delegate.selectRootElement(g,y)}parentNode(g){return this.delegate.parentNode(g)}nextSibling(g){return this.delegate.nextSibling(g)}setAttribute(g,y,x,z){this.delegate.setAttribute(g,y,x,z)}removeAttribute(g,y,x){this.delegate.removeAttribute(g,y,x)}addClass(g,y){this.delegate.addClass(g,y)}removeClass(g,y){this.delegate.removeClass(g,y)}setStyle(g,y,x,z){this.delegate.setStyle(g,y,x,z)}removeStyle(g,y,x){this.delegate.removeStyle(g,y,x)}setProperty(g,y,x){y.charAt(0)==J&&y==he?this.disableAnimations(g,!!x):this.delegate.setProperty(g,y,x)}setValue(g,y){this.delegate.setValue(g,y)}listen(g,y,x){return this.delegate.listen(g,y,x)}disableAnimations(g,y){this.engine.disableAnimations(g,y)}}class dt extends rt{constructor(g,y,x,z){super(y,x,z),this.factory=g,this.namespaceId=y}setProperty(g,y,x){y.charAt(0)==J?"."==y.charAt(1)&&y==he?this.disableAnimations(g,x=void 0===x||!!x):this.engine.process(this.namespaceId,g,y.slice(1),x):this.delegate.setProperty(g,y,x)}listen(g,y,x){if(y.charAt(0)==J){const z=function zt(S){switch(S){case"body":return document.body;case"document":return document;case"window":return window;default:return S}}(g);let X=y.slice(1),de="";return X.charAt(0)!=J&&([X,de]=function Ct(S){const g=S.indexOf(".");return[S.substring(0,g),S.slice(g+1)]}(X)),this.engine.listen(this.namespaceId,z,X,de,ce=>{this.factory.scheduleListenerCallback(ce._data||-1,x,ce)})}return this.delegate.listen(g,y,x)}}const Dr=[{provide:G._j,useClass:To},{provide:Xn,useFactory:function xn(){return new zs}},{provide:$i,useClass:(()=>{class S extends $i{constructor(y,x,z,X){super(y.body,x,z)}ngOnDestroy(){this.flush()}}return S.\u0275fac=function(y){return new(y||S)(W.LFG(Xo.K0),W.LFG(pn),W.LFG(Xn),W.LFG(W.z2F))},S.\u0275prov=W.Yz7({token:S,factory:S.\u0275fac}),S})()},{provide:W.FYo,useFactory:function ui(S,g,y){return new Re(S,g,y)},deps:[w.se,$i,W.R0b]}],Zr=[{provide:pn,useFactory:()=>new qr},{provide:W.QbO,useValue:"BrowserAnimations"},...Dr],Hr=[{provide:pn,useClass:Kn},{provide:W.QbO,useValue:"NoopAnimations"},...Dr];let ts=(()=>{class S{static withConfig(y){return{ngModule:S,providers:y.disableAnimations?Hr:Zr}}}return S.\u0275fac=function(y){return new(y||S)},S.\u0275mod=W.oAB({type:S}),S.\u0275inj=W.cJS({providers:Zr,imports:[w.b2]}),S})();var Qr=U(9379);const li=[{path:"portal",loadChildren:()=>Promise.all([U.e(992),U.e(444)]).then(U.bind(U,9444)).then(S=>S.PortalModule)},{path:"",loadChildren:()=>Promise.all([U.e(992),U.e(257)]).then(U.bind(U,8257)).then(S=>S.BusinessModule)}];let Bs=(()=>{class S{}return S.\u0275fac=function(y){return new(y||S)},S.\u0275mod=W.oAB({type:S}),S.\u0275inj=W.cJS({imports:[Qr.Bz.forRoot(li),Qr.Bz]}),S})(),ns=(()=>{class S{constructor(){}}return S.\u0275fac=function(y){return new(y||S)},S.\u0275cmp=W.Xpm({type:S,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"site"]],template:function(y,x){1&y&&(W.TgZ(0,"div",0),W._UZ(1,"router-outlet"),W.qZA())},dependencies:[Qr.lC],styles:[".site[_ngcontent-%COMP%]{overflow-x:hidden}"]}),S})();var bo=U(2011),Qi=U(1762),R=U(3385),H=U(8445);const N_firebaseConfig={apiKey:"AIzaSyCKXG8CCr_9nqB7Qlup5VU5HgD4niJhN9I",authDomain:"solarcardatabase.firebaseapp.com",databaseURL:"https://solarcardatabase.firebaseio.com",projectId:"solarcardatabase",storageBucket:"solarcardatabase.appspot.com",messagingSenderId:"188569717520",appId:"1:188569717520:web:7891916923765620a47395",measurementId:"G-FR63XJDZHP"};let K=(()=>{class S{}return S.\u0275fac=function(y){return new(y||S)},S.\u0275mod=W.oAB({type:S,bootstrap:[ns]}),S.\u0275inj=W.cJS({providers:[{provide:Qi.L6,useValue:void 0},{provide:R.L6,useValue:void 0}],imports:[w.b2,ts,Bs,bo.hO.initializeApp(N_firebaseConfig),Qi.yb,R.ww,H.TE]}),S})();(0,W.G48)(),w.q6().bootstrapModule(K).catch(S=>console.error(S))},1135:(Lt,We,U)=>{U.d(We,{X:()=>W});var w=U(7579);class W extends w.x{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const pe=super._subscribe(fe);return!pe.closed&&fe.next(this._value),pe}getValue(){const{hasError:fe,thrownError:pe,_value:_e}=this;if(fe)throw pe;return this._throwIfClosed(),_e}next(fe){super.next(this._value=fe)}}},9751:(Lt,We,U)=>{U.d(We,{y:()=>ge});var w=U(930),W=U(727),G=U(8822),fe=U(9635),pe=U(2416),_e=U(576),De=U(2806);let ge=(()=>{class ve{constructor(it){it&&(this._subscribe=it)}lift(it){const Xe=new ve;return Xe.source=this,Xe.operator=it,Xe}subscribe(it,Xe,mt){const Qe=function ue(ve){return ve&&ve instanceof w.Lv||function ae(ve){return ve&&(0,_e.m)(ve.next)&&(0,_e.m)(ve.error)&&(0,_e.m)(ve.complete)}(ve)&&(0,W.Nn)(ve)}(it)?it:new w.Hp(it,Xe,mt);return(0,De.x)(()=>{const{operator:nt,source:Le}=this;Qe.add(nt?nt.call(Qe,Le):Le?this._subscribe(Qe):this._trySubscribe(Qe))}),Qe}_trySubscribe(it){try{return this._subscribe(it)}catch(Xe){it.error(Xe)}}forEach(it,Xe){return new(Xe=xe(Xe))((mt,Qe)=>{const nt=new w.Hp({next:Le=>{try{it(Le)}catch(St){Qe(St),nt.unsubscribe()}},error:Qe,complete:mt});this.subscribe(nt)})}_subscribe(it){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(it)}[G.L](){return this}pipe(...it){return(0,fe.U)(it)(this)}toPromise(it){return new(it=xe(it))((Xe,mt)=>{let Qe;this.subscribe(nt=>Qe=nt,nt=>mt(nt),()=>Xe(Qe))})}}return ve.create=ct=>new ve(ct),ve})();function xe(ve){var ct;return null!==(ct=ve??pe.v.Promise)&&void 0!==ct?ct:Promise}},4707:(Lt,We,U)=>{U.d(We,{t:()=>G});var w=U(7579),W=U(6063);class G extends w.x{constructor(pe=1/0,_e=1/0,De=W.l){super(),this._bufferSize=pe,this._windowTime=_e,this._timestampProvider=De,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=_e===1/0,this._bufferSize=Math.max(1,pe),this._windowTime=Math.max(1,_e)}next(pe){const{isStopped:_e,_buffer:De,_infiniteTimeWindow:ge,_timestampProvider:xe,_windowTime:ae}=this;_e||(De.push(pe),!ge&&De.push(xe.now()+ae)),this._trimBuffer(),super.next(pe)}_subscribe(pe){this._throwIfClosed(),this._trimBuffer();const _e=this._innerSubscribe(pe),{_infiniteTimeWindow:De,_buffer:ge}=this,xe=ge.slice();for(let ae=0;ae<xe.length&&!pe.closed;ae+=De?1:2)pe.next(xe[ae]);return this._checkFinalizedStatuses(pe),_e}_trimBuffer(){const{_bufferSize:pe,_timestampProvider:_e,_buffer:De,_infiniteTimeWindow:ge}=this,xe=(ge?1:2)*pe;if(pe<1/0&&xe<De.length&&De.splice(0,De.length-xe),!ge){const ae=_e.now();let ue=0;for(let ve=1;ve<De.length&&De[ve]<=ae;ve+=2)ue=ve;ue&&De.splice(0,ue+1)}}}},7579:(Lt,We,U)=>{U.d(We,{x:()=>De});var w=U(9751),W=U(727);const fe=(0,U(3888).d)(xe=>function(){xe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=U(8737),_e=U(2806);let De=(()=>{class xe extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const ve=new ge(this,this);return ve.operator=ue,ve}_throwIfClosed(){if(this.closed)throw new fe}next(ue){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ve of this.currentObservers)ve.next(ue)}})}error(ue){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:ve}=this;for(;ve.length;)ve.shift().error(ue)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:ve,isStopped:ct,observers:it}=this;return ve||ct?W.Lc:(this.currentObservers=null,it.push(ue),new W.w0(()=>{this.currentObservers=null,(0,pe.P)(it,ue)}))}_checkFinalizedStatuses(ue){const{hasError:ve,thrownError:ct,isStopped:it}=this;ve?ue.error(ct):it&&ue.complete()}asObservable(){const ue=new w.y;return ue.source=this,ue}}return xe.create=(ae,ue)=>new ge(ae,ue),xe})();class ge extends De{constructor(ae,ue){super(),this.destination=ae,this.source=ue}next(ae){var ue,ve;null===(ve=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===ve||ve.call(ue,ae)}error(ae){var ue,ve;null===(ve=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===ve||ve.call(ue,ae)}complete(){var ae,ue;null===(ue=null===(ae=this.destination)||void 0===ae?void 0:ae.complete)||void 0===ue||ue.call(ae)}_subscribe(ae){var ue,ve;return null!==(ve=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(ae))&&void 0!==ve?ve:W.Lc}}},930:(Lt,We,U)=>{U.d(We,{Hp:()=>mt,Lv:()=>ve});var w=U(576),W=U(727),G=U(2416),fe=U(7849),pe=U(5032);const _e=xe("C",void 0,void 0);function xe(Ve,Ee,Ne){return{kind:Ve,value:Ee,error:Ne}}var ae=U(3410),ue=U(2806);class ve extends W.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,W.Nn)(Ee)&&Ee.add(this)):this.destination=St}static create(Ee,Ne,ft){return new mt(Ee,Ne,ft)}next(Ee){this.isStopped?Le(function ge(Ve){return xe("N",Ve,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Le(function De(Ve){return xe("E",void 0,Ve)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Le(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ct=Function.prototype.bind;function it(Ve,Ee){return ct.call(Ve,Ee)}class Xe{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ne}=this;if(Ne.next)try{Ne.next(Ee)}catch(ft){Qe(ft)}}error(Ee){const{partialObserver:Ne}=this;if(Ne.error)try{Ne.error(Ee)}catch(ft){Qe(ft)}else Qe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ne){Qe(Ne)}}}class mt extends ve{constructor(Ee,Ne,ft){let Et;if(super(),(0,w.m)(Ee)||!Ee)Et={next:Ee??void 0,error:Ne??void 0,complete:ft??void 0};else{let et;this&&G.v.useDeprecatedNextContext?(et=Object.create(Ee),et.unsubscribe=()=>this.unsubscribe(),Et={next:Ee.next&&it(Ee.next,et),error:Ee.error&&it(Ee.error,et),complete:Ee.complete&&it(Ee.complete,et)}):Et=Ee}this.destination=new Xe(Et)}}function Qe(Ve){G.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(Ve):(0,fe.h)(Ve)}function Le(Ve,Ee){const{onStoppedNotification:Ne}=G.v;Ne&&ae.z.setTimeout(()=>Ne(Ve,Ee))}const St={closed:!0,next:pe.Z,error:function nt(Ve){throw Ve},complete:pe.Z}},727:(Lt,We,U)=>{U.d(We,{Lc:()=>_e,w0:()=>pe,Nn:()=>De});var w=U(576);const G=(0,U(3888).d)(xe=>function(ue){xe(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((ve,ct)=>`${ct+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var fe=U(8737);class pe{constructor(ae){this.initialTeardown=ae,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ae;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const it of ue)it.remove(this);else ue.remove(this);const{initialTeardown:ve}=this;if((0,w.m)(ve))try{ve()}catch(it){ae=it instanceof G?it.errors:[it]}const{_finalizers:ct}=this;if(ct){this._finalizers=null;for(const it of ct)try{ge(it)}catch(Xe){ae=ae??[],Xe instanceof G?ae=[...ae,...Xe.errors]:ae.push(Xe)}}if(ae)throw new G(ae)}}add(ae){var ue;if(ae&&ae!==this)if(this.closed)ge(ae);else{if(ae instanceof pe){if(ae.closed||ae._hasParent(this))return;ae._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(ae)}}_hasParent(ae){const{_parentage:ue}=this;return ue===ae||Array.isArray(ue)&&ue.includes(ae)}_addParent(ae){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(ae),ue):ue?[ue,ae]:ae}_removeParent(ae){const{_parentage:ue}=this;ue===ae?this._parentage=null:Array.isArray(ue)&&(0,fe.P)(ue,ae)}remove(ae){const{_finalizers:ue}=this;ue&&(0,fe.P)(ue,ae),ae instanceof pe&&ae._removeParent(this)}}pe.EMPTY=(()=>{const xe=new pe;return xe.closed=!0,xe})();const _e=pe.EMPTY;function De(xe){return xe instanceof pe||xe&&"closed"in xe&&(0,w.m)(xe.remove)&&(0,w.m)(xe.add)&&(0,w.m)(xe.unsubscribe)}function ge(xe){(0,w.m)(xe)?xe():xe.unsubscribe()}},2416:(Lt,We,U)=>{U.d(We,{v:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(Lt,We,U)=>{U.d(We,{c:()=>_e});var w=U(9751),W=U(727),G=U(8343),fe=U(5403),pe=U(4482);class _e extends w.y{constructor(ge,xe){super(),this.source=ge,this.subjectFactory=xe,this._subject=null,this._refCount=0,this._connection=null,(0,pe.A)(ge)&&(this.lift=ge.lift)}_subscribe(ge){return this.getSubject().subscribe(ge)}getSubject(){const ge=this._subject;return(!ge||ge.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:ge}=this;this._subject=this._connection=null,ge?.unsubscribe()}connect(){let ge=this._connection;if(!ge){ge=this._connection=new W.w0;const xe=this.getSubject();ge.add(this.source.subscribe((0,fe.x)(xe,void 0,()=>{this._teardown(),xe.complete()},ae=>{this._teardown(),xe.error(ae)},()=>this._teardown()))),ge.closed&&(this._connection=null,ge=W.w0.EMPTY)}return ge}refCount(){return(0,G.x)()(this)}}},9841:(Lt,We,U)=>{U.d(We,{a:()=>ae});var w=U(9751),W=U(4742),G=U(8996),fe=U(4671),pe=U(3268),_e=U(3269),De=U(1810),ge=U(5403),xe=U(9672);function ae(...ct){const it=(0,_e.yG)(ct),Xe=(0,_e.jO)(ct),{args:mt,keys:Qe}=(0,W.D)(ct);if(0===mt.length)return(0,G.D)([],it);const nt=new w.y(function ue(ct,it,Xe=fe.y){return mt=>{ve(it,()=>{const{length:Qe}=ct,nt=new Array(Qe);let Le=Qe,St=Qe;for(let Ve=0;Ve<Qe;Ve++)ve(it,()=>{const Ee=(0,G.D)(ct[Ve],it);let Ne=!1;Ee.subscribe((0,ge.x)(mt,ft=>{nt[Ve]=ft,Ne||(Ne=!0,St--),St||mt.next(Xe(nt.slice()))},()=>{--Le||mt.complete()}))},mt)},mt)}}(mt,it,Qe?Le=>(0,De.n)(Qe,Le):fe.y));return Xe?nt.pipe((0,pe.Z)(Xe)):nt}function ve(ct,it,Xe){ct?(0,xe.f)(Xe,ct,it):it()}},7272:(Lt,We,U)=>{U.d(We,{z:()=>pe});var w=U(8189),G=U(3269),fe=U(8996);function pe(..._e){return function W(){return(0,w.J)(1)}()((0,fe.D)(_e,(0,G.yG)(_e)))}},9770:(Lt,We,U)=>{U.d(We,{P:()=>G});var w=U(9751),W=U(8421);function G(fe){return new w.y(pe=>{(0,W.Xf)(fe()).subscribe(pe)})}},515:(Lt,We,U)=>{U.d(We,{E:()=>W});const W=new(U(9751).y)(pe=>pe.complete())},8996:(Lt,We,U)=>{U.d(We,{D:()=>Ee});var w=U(8421),W=U(5363),G=U(9468),_e=U(9751),ge=U(2202),xe=U(576),ae=U(9672);function ve(Ne,ft){if(!Ne)throw new Error("Iterable cannot be null");return new _e.y(Et=>{(0,ae.f)(Et,ft,()=>{const et=Ne[Symbol.asyncIterator]();(0,ae.f)(Et,ft,()=>{et.next().then(He=>{He.done?Et.complete():Et.next(He.value)})},0,!0)})})}var ct=U(3670),it=U(8239),Xe=U(1144),mt=U(6495),Qe=U(2206),nt=U(4532),Le=U(3260);function Ee(Ne,ft){return ft?function Ve(Ne,ft){if(null!=Ne){if((0,ct.c)(Ne))return function fe(Ne,ft){return(0,w.Xf)(Ne).pipe((0,G.R)(ft),(0,W.Q)(ft))}(Ne,ft);if((0,Xe.z)(Ne))return function De(Ne,ft){return new _e.y(Et=>{let et=0;return ft.schedule(function(){et===Ne.length?Et.complete():(Et.next(Ne[et++]),Et.closed||this.schedule())})})}(Ne,ft);if((0,it.t)(Ne))return function pe(Ne,ft){return(0,w.Xf)(Ne).pipe((0,G.R)(ft),(0,W.Q)(ft))}(Ne,ft);if((0,Qe.D)(Ne))return ve(Ne,ft);if((0,mt.T)(Ne))return function ue(Ne,ft){return new _e.y(Et=>{let et;return(0,ae.f)(Et,ft,()=>{et=Ne[ge.h](),(0,ae.f)(Et,ft,()=>{let He,we;try{({value:He,done:we}=et.next())}catch(Pe){return void Et.error(Pe)}we?Et.complete():Et.next(He)},0,!0)}),()=>(0,xe.m)(et?.return)&&et.return()})}(Ne,ft);if((0,Le.L)(Ne))return function St(Ne,ft){return ve((0,Le.Q)(Ne),ft)}(Ne,ft)}throw(0,nt.z)(Ne)}(Ne,ft):(0,w.Xf)(Ne)}},8421:(Lt,We,U)=>{U.d(We,{Xf:()=>ct});var w=U(655),W=U(1144),G=U(8239),fe=U(9751),pe=U(3670),_e=U(2206),De=U(4532),ge=U(6495),xe=U(3260),ae=U(576),ue=U(7849),ve=U(8822);function ct(Ve){if(Ve instanceof fe.y)return Ve;if(null!=Ve){if((0,pe.c)(Ve))return function it(Ve){return new fe.y(Ee=>{const Ne=Ve[ve.L]();if((0,ae.m)(Ne.subscribe))return Ne.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,W.z)(Ve))return function Xe(Ve){return new fe.y(Ee=>{for(let Ne=0;Ne<Ve.length&&!Ee.closed;Ne++)Ee.next(Ve[Ne]);Ee.complete()})}(Ve);if((0,G.t)(Ve))return function mt(Ve){return new fe.y(Ee=>{Ve.then(Ne=>{Ee.closed||(Ee.next(Ne),Ee.complete())},Ne=>Ee.error(Ne)).then(null,ue.h)})}(Ve);if((0,_e.D)(Ve))return nt(Ve);if((0,ge.T)(Ve))return function Qe(Ve){return new fe.y(Ee=>{for(const Ne of Ve)if(Ee.next(Ne),Ee.closed)return;Ee.complete()})}(Ve);if((0,xe.L)(Ve))return function Le(Ve){return nt((0,xe.Q)(Ve))}(Ve)}throw(0,De.z)(Ve)}function nt(Ve){return new fe.y(Ee=>{(function St(Ve,Ee){var Ne,ft,Et,et;return(0,w.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,w.KL)(Ve);!(ft=yield Ne.next()).done;)if(Ee.next(ft.value),Ee.closed)return}catch(He){Et={error:He}}finally{try{ft&&!ft.done&&(et=Ne.return)&&(yield et.call(Ne))}finally{if(Et)throw Et.error}}Ee.complete()})})(Ve,Ee).catch(Ne=>Ee.error(Ne))})}},6451:(Lt,We,U)=>{U.d(We,{T:()=>_e});var w=U(8189),W=U(8421),G=U(515),fe=U(3269),pe=U(8996);function _e(...De){const ge=(0,fe.yG)(De),xe=(0,fe._6)(De,1/0),ae=De;return ae.length?1===ae.length?(0,W.Xf)(ae[0]):(0,w.J)(xe)((0,pe.D)(ae,ge)):G.E}},9646:(Lt,We,U)=>{U.d(We,{of:()=>G});var w=U(3269),W=U(8996);function G(...fe){const pe=(0,w.yG)(fe);return(0,W.D)(fe,pe)}},2843:(Lt,We,U)=>{U.d(We,{_:()=>G});var w=U(9751),W=U(576);function G(fe,pe){const _e=(0,W.m)(fe)?fe:()=>fe,De=ge=>ge.error(_e());return new w.y(pe?ge=>pe.schedule(De,0,ge):De)}},5403:(Lt,We,U)=>{U.d(We,{x:()=>W});var w=U(930);function W(fe,pe,_e,De,ge){return new G(fe,pe,_e,De,ge)}class G extends w.Lv{constructor(pe,_e,De,ge,xe,ae){super(pe),this.onFinalize=xe,this.shouldUnsubscribe=ae,this._next=_e?function(ue){try{_e(ue)}catch(ve){pe.error(ve)}}:super._next,this._error=ge?function(ue){try{ge(ue)}catch(ve){pe.error(ve)}finally{this.unsubscribe()}}:super._error,this._complete=De?function(){try{De()}catch(ue){pe.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},4351:(Lt,We,U)=>{U.d(We,{b:()=>G});var w=U(5577),W=U(576);function G(fe,pe){return(0,W.m)(pe)?(0,w.z)(fe,pe,1):(0,w.z)(fe,1)}},8372:(Lt,We,U)=>{U.d(We,{b:()=>fe});var w=U(4986),W=U(4482),G=U(5403);function fe(pe,_e=w.z){return(0,W.e)((De,ge)=>{let xe=null,ae=null,ue=null;const ve=()=>{if(xe){xe.unsubscribe(),xe=null;const it=ae;ae=null,ge.next(it)}};function ct(){const it=ue+pe,Xe=_e.now();if(Xe<it)return xe=this.schedule(void 0,it-Xe),void ge.add(xe);ve()}De.subscribe((0,G.x)(ge,it=>{ae=it,ue=_e.now(),xe||(xe=_e.schedule(ct,pe),ge.add(xe))},()=>{ve(),ge.complete()},void 0,()=>{ae=xe=null}))})}},6590:(Lt,We,U)=>{U.d(We,{d:()=>G});var w=U(4482),W=U(5403);function G(fe){return(0,w.e)((pe,_e)=>{let De=!1;pe.subscribe((0,W.x)(_e,ge=>{De=!0,_e.next(ge)},()=>{De||_e.next(fe),_e.complete()}))})}},1884:(Lt,We,U)=>{U.d(We,{x:()=>fe});var w=U(4671),W=U(4482),G=U(5403);function fe(_e,De=w.y){return _e=_e??pe,(0,W.e)((ge,xe)=>{let ae,ue=!0;ge.subscribe((0,G.x)(xe,ve=>{const ct=De(ve);(ue||!_e(ae,ct))&&(ue=!1,ae=ct,xe.next(ve))}))})}function pe(_e,De){return _e===De}},9300:(Lt,We,U)=>{U.d(We,{h:()=>G});var w=U(4482),W=U(5403);function G(fe,pe){return(0,w.e)((_e,De)=>{let ge=0;_e.subscribe((0,W.x)(De,xe=>fe.call(pe,xe,ge++)&&De.next(xe)))})}},590:(Lt,We,U)=>{U.d(We,{P:()=>De});var w=U(6805),W=U(9300),G=U(5698),fe=U(6590),pe=U(8068),_e=U(4671);function De(ge,xe){const ae=arguments.length>=2;return ue=>ue.pipe(ge?(0,W.h)((ve,ct)=>ge(ve,ct,ue)):_e.y,(0,G.q)(1),ae?(0,fe.d)(xe):(0,pe.T)(()=>new w.K))}},4004:(Lt,We,U)=>{U.d(We,{U:()=>G});var w=U(4482),W=U(5403);function G(fe,pe){return(0,w.e)((_e,De)=>{let ge=0;_e.subscribe((0,W.x)(De,xe=>{De.next(fe.call(pe,xe,ge++))}))})}},8189:(Lt,We,U)=>{U.d(We,{J:()=>G});var w=U(5577),W=U(4671);function G(fe=1/0){return(0,w.z)(W.y,fe)}},5577:(Lt,We,U)=>{U.d(We,{z:()=>ge});var w=U(4004),W=U(8421),G=U(4482),fe=U(9672),pe=U(5403),De=U(576);function ge(xe,ae,ue=1/0){return(0,De.m)(ae)?ge((ve,ct)=>(0,w.U)((it,Xe)=>ae(ve,it,ct,Xe))((0,W.Xf)(xe(ve,ct))),ue):("number"==typeof ae&&(ue=ae),(0,G.e)((ve,ct)=>function _e(xe,ae,ue,ve,ct,it,Xe,mt){const Qe=[];let nt=0,Le=0,St=!1;const Ve=()=>{St&&!Qe.length&&!nt&&ae.complete()},Ee=ft=>nt<ve?Ne(ft):Qe.push(ft),Ne=ft=>{it&&ae.next(ft),nt++;let Et=!1;(0,W.Xf)(ue(ft,Le++)).subscribe((0,pe.x)(ae,et=>{ct?.(et),it?Ee(et):ae.next(et)},()=>{Et=!0},void 0,()=>{if(Et)try{for(nt--;Qe.length&&nt<ve;){const et=Qe.shift();Xe?(0,fe.f)(ae,Xe,()=>Ne(et)):Ne(et)}Ve()}catch(et){ae.error(et)}}))};return xe.subscribe((0,pe.x)(ae,Ee,()=>{St=!0,Ve()})),()=>{mt?.()}}(ve,ct,xe,ue)))}},5363:(Lt,We,U)=>{U.d(We,{Q:()=>fe});var w=U(9672),W=U(4482),G=U(5403);function fe(pe,_e=0){return(0,W.e)((De,ge)=>{De.subscribe((0,G.x)(ge,xe=>(0,w.f)(ge,pe,()=>ge.next(xe),_e),()=>(0,w.f)(ge,pe,()=>ge.complete(),_e),xe=>(0,w.f)(ge,pe,()=>ge.error(xe),_e)))})}},8343:(Lt,We,U)=>{U.d(We,{x:()=>G});var w=U(4482),W=U(5403);function G(){return(0,w.e)((fe,pe)=>{let _e=null;fe._refCount++;const De=(0,W.x)(pe,void 0,void 0,void 0,()=>{if(!fe||fe._refCount<=0||0<--fe._refCount)return void(_e=null);const ge=fe._connection,xe=_e;_e=null,ge&&(!xe||ge===xe)&&ge.unsubscribe(),pe.unsubscribe()});fe.subscribe(De),De.closed||(_e=fe.connect())})}},5026:(Lt,We,U)=>{U.d(We,{R:()=>fe});var w=U(4482),W=U(5403);function G(pe,_e,De,ge,xe){return(ae,ue)=>{let ve=De,ct=_e,it=0;ae.subscribe((0,W.x)(ue,Xe=>{const mt=it++;ct=ve?pe(ct,Xe,mt):(ve=!0,Xe),ge&&ue.next(ct)},xe&&(()=>{ve&&ue.next(ct),ue.complete()})))}}function fe(pe,_e){return(0,w.e)(G(pe,_e,arguments.length>=2,!0))}},3099:(Lt,We,U)=>{U.d(We,{B:()=>pe});var w=U(8421),W=U(7579),G=U(930),fe=U(4482);function pe(De={}){const{connector:ge=(()=>new W.x),resetOnError:xe=!0,resetOnComplete:ae=!0,resetOnRefCountZero:ue=!0}=De;return ve=>{let ct,it,Xe,mt=0,Qe=!1,nt=!1;const Le=()=>{it?.unsubscribe(),it=void 0},St=()=>{Le(),ct=Xe=void 0,Qe=nt=!1},Ve=()=>{const Ee=ct;St(),Ee?.unsubscribe()};return(0,fe.e)((Ee,Ne)=>{mt++,!nt&&!Qe&&Le();const ft=Xe=Xe??ge();Ne.add(()=>{mt--,0===mt&&!nt&&!Qe&&(it=_e(Ve,ue))}),ft.subscribe(Ne),!ct&&mt>0&&(ct=new G.Hp({next:Et=>ft.next(Et),error:Et=>{nt=!0,Le(),it=_e(St,xe,Et),ft.error(Et)},complete:()=>{Qe=!0,Le(),it=_e(St,ae),ft.complete()}}),(0,w.Xf)(Ee).subscribe(ct))})(ve)}}function _e(De,ge,...xe){if(!0===ge)return void De();if(!1===ge)return;const ae=new G.Hp({next:()=>{ae.unsubscribe(),De()}});return ge(...xe).subscribe(ae)}},4782:(Lt,We,U)=>{U.d(We,{d:()=>G});var w=U(4707),W=U(3099);function G(fe,pe,_e){let De,ge=!1;return fe&&"object"==typeof fe?({bufferSize:De=1/0,windowTime:pe=1/0,refCount:ge=!1,scheduler:_e}=fe):De=fe??1/0,(0,W.B)({connector:()=>new w.t(De,pe,_e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ge})}},8675:(Lt,We,U)=>{U.d(We,{O:()=>fe});var w=U(7272),W=U(3269),G=U(4482);function fe(...pe){const _e=(0,W.yG)(pe);return(0,G.e)((De,ge)=>{(_e?(0,w.z)(pe,De,_e):(0,w.z)(pe,De)).subscribe(ge)})}},9468:(Lt,We,U)=>{U.d(We,{R:()=>W});var w=U(4482);function W(G,fe=0){return(0,w.e)((pe,_e)=>{_e.add(G.schedule(()=>pe.subscribe(_e),fe))})}},3900:(Lt,We,U)=>{U.d(We,{w:()=>fe});var w=U(8421),W=U(4482),G=U(5403);function fe(pe,_e){return(0,W.e)((De,ge)=>{let xe=null,ae=0,ue=!1;const ve=()=>ue&&!xe&&ge.complete();De.subscribe((0,G.x)(ge,ct=>{xe?.unsubscribe();let it=0;const Xe=ae++;(0,w.Xf)(pe(ct,Xe)).subscribe(xe=(0,G.x)(ge,mt=>ge.next(_e?_e(ct,mt,Xe,it++):mt),()=>{xe=null,ve()}))},()=>{ue=!0,ve()}))})}},5698:(Lt,We,U)=>{U.d(We,{q:()=>fe});var w=U(515),W=U(4482),G=U(5403);function fe(pe){return pe<=0?()=>w.E:(0,W.e)((_e,De)=>{let ge=0;_e.subscribe((0,G.x)(De,xe=>{++ge<=pe&&(De.next(xe),pe<=ge&&De.complete())}))})}},2529:(Lt,We,U)=>{U.d(We,{o:()=>G});var w=U(4482),W=U(5403);function G(fe,pe=!1){return(0,w.e)((_e,De)=>{let ge=0;_e.subscribe((0,W.x)(De,xe=>{const ae=fe(xe,ge++);(ae||pe)&&De.next(xe),!ae&&De.complete()}))})}},8505:(Lt,We,U)=>{U.d(We,{b:()=>pe});var w=U(576),W=U(4482),G=U(5403),fe=U(4671);function pe(_e,De,ge){const xe=(0,w.m)(_e)||De||ge?{next:_e,error:De,complete:ge}:_e;return xe?(0,W.e)((ae,ue)=>{var ve;null===(ve=xe.subscribe)||void 0===ve||ve.call(xe);let ct=!0;ae.subscribe((0,G.x)(ue,it=>{var Xe;null===(Xe=xe.next)||void 0===Xe||Xe.call(xe,it),ue.next(it)},()=>{var it;ct=!1,null===(it=xe.complete)||void 0===it||it.call(xe),ue.complete()},it=>{var Xe;ct=!1,null===(Xe=xe.error)||void 0===Xe||Xe.call(xe,it),ue.error(it)},()=>{var it,Xe;ct&&(null===(it=xe.unsubscribe)||void 0===it||it.call(xe)),null===(Xe=xe.finalize)||void 0===Xe||Xe.call(xe)}))}):fe.y}},8068:(Lt,We,U)=>{U.d(We,{T:()=>fe});var w=U(6805),W=U(4482),G=U(5403);function fe(_e=pe){return(0,W.e)((De,ge)=>{let xe=!1;De.subscribe((0,G.x)(ge,ae=>{xe=!0,ge.next(ae)},()=>xe?ge.complete():ge.error(_e())))})}function pe(){return new w.K}},4408:(Lt,We,U)=>{U.d(We,{o:()=>pe});var w=U(727);class W extends w.w0{constructor(De,ge){super()}schedule(De,ge=0){return this}}const G={setInterval(_e,De,...ge){const{delegate:xe}=G;return xe?.setInterval?xe.setInterval(_e,De,...ge):setInterval(_e,De,...ge)},clearInterval(_e){const{delegate:De}=G;return(De?.clearInterval||clearInterval)(_e)},delegate:void 0};var fe=U(8737);class pe extends W{constructor(De,ge){super(De,ge),this.scheduler=De,this.work=ge,this.pending=!1}schedule(De,ge=0){var xe;if(this.closed)return this;this.state=De;const ae=this.id,ue=this.scheduler;return null!=ae&&(this.id=this.recycleAsyncId(ue,ae,ge)),this.pending=!0,this.delay=ge,this.id=null!==(xe=this.id)&&void 0!==xe?xe:this.requestAsyncId(ue,this.id,ge),this}requestAsyncId(De,ge,xe=0){return G.setInterval(De.flush.bind(De,this),xe)}recycleAsyncId(De,ge,xe=0){if(null!=xe&&this.delay===xe&&!1===this.pending)return ge;null!=ge&&G.clearInterval(ge)}execute(De,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const xe=this._execute(De,ge);if(xe)return xe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(De,ge){let ae,xe=!1;try{this.work(De)}catch(ue){xe=!0,ae=ue||new Error("Scheduled action threw falsy error")}if(xe)return this.unsubscribe(),ae}unsubscribe(){if(!this.closed){const{id:De,scheduler:ge}=this,{actions:xe}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(xe,this),null!=De&&(this.id=this.recycleAsyncId(ge,De,null)),this.delay=null,super.unsubscribe()}}}},7565:(Lt,We,U)=>{U.d(We,{v:()=>G});var w=U(6063);class W{constructor(pe,_e=W.now){this.schedulerActionCtor=pe,this.now=_e}schedule(pe,_e=0,De){return new this.schedulerActionCtor(this,pe).schedule(De,_e)}}W.now=w.l.now;class G extends W{constructor(pe,_e=W.now){super(pe,_e),this.actions=[],this._active=!1}flush(pe){const{actions:_e}=this;if(this._active)return void _e.push(pe);let De;this._active=!0;do{if(De=pe.execute(pe.state,pe.delay))break}while(pe=_e.shift());if(this._active=!1,De){for(;pe=_e.shift();)pe.unsubscribe();throw De}}}},4986:(Lt,We,U)=>{U.d(We,{P:()=>fe,z:()=>G});var w=U(4408);const G=new(U(7565).v)(w.o),fe=G},6063:(Lt,We,U)=>{U.d(We,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},3410:(Lt,We,U)=>{U.d(We,{z:()=>w});const w={setTimeout(W,G,...fe){const{delegate:pe}=w;return pe?.setTimeout?pe.setTimeout(W,G,...fe):setTimeout(W,G,...fe)},clearTimeout(W){const{delegate:G}=w;return(G?.clearTimeout||clearTimeout)(W)},delegate:void 0}},2202:(Lt,We,U)=>{U.d(We,{h:()=>W});const W=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Lt,We,U)=>{U.d(We,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Lt,We,U)=>{U.d(We,{K:()=>W});const W=(0,U(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Lt,We,U)=>{U.d(We,{_6:()=>_e,jO:()=>fe,yG:()=>pe});var w=U(576),W=U(3532);function G(De){return De[De.length-1]}function fe(De){return(0,w.m)(G(De))?De.pop():void 0}function pe(De){return(0,W.K)(G(De))?De.pop():void 0}function _e(De,ge){return"number"==typeof G(De)?De.pop():ge}},4742:(Lt,We,U)=>{U.d(We,{D:()=>pe});const{isArray:w}=Array,{getPrototypeOf:W,prototype:G,keys:fe}=Object;function pe(De){if(1===De.length){const ge=De[0];if(w(ge))return{args:ge,keys:null};if(function _e(De){return De&&"object"==typeof De&&W(De)===G}(ge)){const xe=fe(ge);return{args:xe.map(ae=>ge[ae]),keys:xe}}}return{args:De,keys:null}}},8737:(Lt,We,U)=>{function w(W,G){if(W){const fe=W.indexOf(G);0<=fe&&W.splice(fe,1)}}U.d(We,{P:()=>w})},3888:(Lt,We,U)=>{function w(W){const fe=W(pe=>{Error.call(pe),pe.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}U.d(We,{d:()=>w})},1810:(Lt,We,U)=>{function w(W,G){return W.reduce((fe,pe,_e)=>(fe[pe]=G[_e],fe),{})}U.d(We,{n:()=>w})},2806:(Lt,We,U)=>{U.d(We,{O:()=>fe,x:()=>G});var w=U(2416);let W=null;function G(pe){if(w.v.useDeprecatedSynchronousErrorHandling){const _e=!W;if(_e&&(W={errorThrown:!1,error:null}),pe(),_e){const{errorThrown:De,error:ge}=W;if(W=null,De)throw ge}}else pe()}function fe(pe){w.v.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=pe)}},9672:(Lt,We,U)=>{function w(W,G,fe,pe=0,_e=!1){const De=G.schedule(function(){fe(),_e?W.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(W.add(De),!_e)return De}U.d(We,{f:()=>w})},4671:(Lt,We,U)=>{function w(W){return W}U.d(We,{y:()=>w})},1144:(Lt,We,U)=>{U.d(We,{z:()=>w});const w=W=>W&&"number"==typeof W.length&&"function"!=typeof W},2206:(Lt,We,U)=>{U.d(We,{D:()=>W});var w=U(576);function W(G){return Symbol.asyncIterator&&(0,w.m)(G?.[Symbol.asyncIterator])}},576:(Lt,We,U)=>{function w(W){return"function"==typeof W}U.d(We,{m:()=>w})},3670:(Lt,We,U)=>{U.d(We,{c:()=>G});var w=U(8822),W=U(576);function G(fe){return(0,W.m)(fe[w.L])}},6495:(Lt,We,U)=>{U.d(We,{T:()=>G});var w=U(2202),W=U(576);function G(fe){return(0,W.m)(fe?.[w.h])}},8239:(Lt,We,U)=>{U.d(We,{t:()=>W});var w=U(576);function W(G){return(0,w.m)(G?.then)}},3260:(Lt,We,U)=>{U.d(We,{L:()=>fe,Q:()=>G});var w=U(655),W=U(576);function G(pe){return(0,w.FC)(this,arguments,function*(){const De=pe.getReader();try{for(;;){const{value:ge,done:xe}=yield(0,w.qq)(De.read());if(xe)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(ge)}}finally{De.releaseLock()}})}function fe(pe){return(0,W.m)(pe?.getReader)}},3532:(Lt,We,U)=>{U.d(We,{K:()=>W});var w=U(576);function W(G){return G&&(0,w.m)(G.schedule)}},4482:(Lt,We,U)=>{U.d(We,{A:()=>W,e:()=>G});var w=U(576);function W(fe){return(0,w.m)(fe?.lift)}function G(fe){return pe=>{if(W(pe))return pe.lift(function(_e){try{return fe(_e,this)}catch(De){this.error(De)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Lt,We,U)=>{U.d(We,{Z:()=>fe});var w=U(4004);const{isArray:W}=Array;function fe(pe){return(0,w.U)(_e=>function G(pe,_e){return W(_e)?pe(..._e):pe(_e)}(pe,_e))}},5032:(Lt,We,U)=>{function w(){}U.d(We,{Z:()=>w})},9635:(Lt,We,U)=>{U.d(We,{U:()=>G,z:()=>W});var w=U(4671);function W(...fe){return G(fe)}function G(fe){return 0===fe.length?w.y:1===fe.length?fe[0]:function(_e){return fe.reduce((De,ge)=>ge(De),_e)}}},7849:(Lt,We,U)=>{U.d(We,{h:()=>G});var w=U(2416),W=U(3410);function G(fe){W.z.setTimeout(()=>{const{onUnhandledError:pe}=w.v;if(!pe)throw fe;pe(fe)})}},4532:(Lt,We,U)=>{function w(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(We,{z:()=>w})},655:(Lt,We,U)=>{function fe(we,Pe){var ot={};for(var je in we)Object.prototype.hasOwnProperty.call(we,je)&&Pe.indexOf(je)<0&&(ot[je]=we[je]);if(null!=we&&"function"==typeof Object.getOwnPropertySymbols){var Mt=0;for(je=Object.getOwnPropertySymbols(we);Mt<je.length;Mt++)Pe.indexOf(je[Mt])<0&&Object.prototype.propertyIsEnumerable.call(we,je[Mt])&&(ot[je[Mt]]=we[je[Mt]])}return ot}function ge(we,Pe,ot,je){return new(ot||(ot=Promise))(function(It,yn){function On(nr){try{Dt(je.next(nr))}catch(Mn){yn(Mn)}}function Rn(nr){try{Dt(je.throw(nr))}catch(Mn){yn(Mn)}}function Dt(nr){nr.done?It(nr.value):function Mt(It){return It instanceof ot?It:new ot(function(yn){yn(It)})}(nr.value).then(On,Rn)}Dt((je=je.apply(we,Pe||[])).next())})}function Qe(we){return this instanceof Qe?(this.v=we,this):new Qe(we)}function nt(we,Pe,ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Mt,je=ot.apply(we,Pe||[]),It=[];return Mt={},yn("next"),yn("throw"),yn("return"),Mt[Symbol.asyncIterator]=function(){return this},Mt;function yn(en){je[en]&&(Mt[en]=function(pt){return new Promise(function(jn,wn){It.push([en,pt,jn,wn])>1||On(en,pt)})})}function On(en,pt){try{!function Rn(en){en.value instanceof Qe?Promise.resolve(en.value.v).then(Dt,nr):Mn(It[0][2],en)}(je[en](pt))}catch(jn){Mn(It[0][3],jn)}}function Dt(en){On("next",en)}function nr(en){On("throw",en)}function Mn(en,pt){en(pt),It.shift(),It.length&&On(It[0][0],It[0][1])}}function St(we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,Pe=we[Symbol.asyncIterator];return Pe?Pe.call(we):(we=function ve(we){var Pe="function"==typeof Symbol&&Symbol.iterator,ot=Pe&&we[Pe],je=0;if(ot)return ot.call(we);if(we&&"number"==typeof we.length)return{next:function(){return we&&je>=we.length&&(we=void 0),{value:we&&we[je++],done:!we}}};throw new TypeError(Pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(we),ot={},je("next"),je("throw"),je("return"),ot[Symbol.asyncIterator]=function(){return this},ot);function je(It){ot[It]=we[It]&&function(yn){return new Promise(function(On,Rn){!function Mt(It,yn,On,Rn){Promise.resolve(Rn).then(function(Dt){It({value:Dt,done:On})},yn)}(On,Rn,(yn=we[It](yn)).done,yn.value)})}}}U.d(We,{FC:()=>nt,KL:()=>St,_T:()=>fe,mG:()=>ge,qq:()=>Qe})},7340:(Lt,We,U)=>{U.d(We,{F4:()=>ae,IO:()=>Xe,LC:()=>W,SB:()=>xe,X$:()=>fe,ZE:()=>Le,ZN:()=>nt,_j:()=>w,eR:()=>ue,jt:()=>pe,k1:()=>St,l3:()=>G,oB:()=>ge,pV:()=>ct,vP:()=>De});class w{}class W{}const G="*";function fe(Ve,Ee){return{type:7,name:Ve,definitions:Ee,options:{}}}function pe(Ve,Ee=null){return{type:4,styles:Ee,timings:Ve}}function De(Ve,Ee=null){return{type:2,steps:Ve,options:Ee}}function ge(Ve){return{type:6,styles:Ve,offset:null}}function xe(Ve,Ee,Ne){return{type:0,name:Ve,styles:Ee,options:Ne}}function ae(Ve){return{type:5,steps:Ve}}function ue(Ve,Ee,Ne=null){return{type:1,expr:Ve,animation:Ee,options:Ne}}function ct(Ve=null){return{type:9,options:Ve}}function Xe(Ve,Ee,Ne=null){return{type:11,selector:Ve,animation:Ee,options:Ne}}function Qe(Ve){Promise.resolve().then(Ve)}class nt{constructor(Ee=0,Ne=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ee+Ne}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ee=>Ee()),this._onDoneFns=[])}onStart(Ee){this._originalOnStartFns.push(Ee),this._onStartFns.push(Ee)}onDone(Ee){this._originalOnDoneFns.push(Ee),this._onDoneFns.push(Ee)}onDestroy(Ee){this._onDestroyFns.push(Ee)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Qe(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ee=>Ee()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ee=>Ee()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ee){this._position=this.totalTime?Ee*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ee){const Ne="start"==Ee?this._onStartFns:this._onDoneFns;Ne.forEach(ft=>ft()),Ne.length=0}}class Le{constructor(Ee){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ee;let Ne=0,ft=0,Et=0;const et=this.players.length;0==et?Qe(()=>this._onFinish()):this.players.forEach(He=>{He.onDone(()=>{++Ne==et&&this._onFinish()}),He.onDestroy(()=>{++ft==et&&this._onDestroy()}),He.onStart(()=>{++Et==et&&this._onStart()})}),this.totalTime=this.players.reduce((He,we)=>Math.max(He,we.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ee=>Ee()),this._onDoneFns=[])}init(){this.players.forEach(Ee=>Ee.init())}onStart(Ee){this._onStartFns.push(Ee)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ee=>Ee()),this._onStartFns=[])}onDone(Ee){this._onDoneFns.push(Ee)}onDestroy(Ee){this._onDestroyFns.push(Ee)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ee=>Ee.play())}pause(){this.players.forEach(Ee=>Ee.pause())}restart(){this.players.forEach(Ee=>Ee.restart())}finish(){this._onFinish(),this.players.forEach(Ee=>Ee.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ee=>Ee.destroy()),this._onDestroyFns.forEach(Ee=>Ee()),this._onDestroyFns=[])}reset(){this.players.forEach(Ee=>Ee.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ee){const Ne=Ee*this.totalTime;this.players.forEach(ft=>{const Et=ft.totalTime?Math.min(1,Ne/ft.totalTime):1;ft.setPosition(Et)})}getPosition(){const Ee=this.players.reduce((Ne,ft)=>null===Ne||ft.totalTime>Ne.totalTime?ft:Ne,null);return null!=Ee?Ee.getPosition():0}beforeDestroy(){this.players.forEach(Ee=>{Ee.beforeDestroy&&Ee.beforeDestroy()})}triggerCallback(Ee){const Ne="start"==Ee?this._onStartFns:this._onDoneFns;Ne.forEach(ft=>ft()),Ne.length=0}}const St="!"},6895:(Lt,We,U)=>{U.d(We,{Do:()=>St,ED:()=>es,EM:()=>ai,HT:()=>pe,JF:()=>Io,K0:()=>De,Mx:()=>Ns,NF:()=>Qo,O5:()=>Un,Ov:()=>be,PM:()=>Ss,RF:()=>js,S$:()=>Qe,V_:()=>ae,Ye:()=>Ve,b0:()=>Le,bD:()=>Bo,ez:()=>Uo,mk:()=>zn,n9:()=>Ci,q:()=>G,sg:()=>lr,w_:()=>_e});var w=U(4650);let W=null;function G(){return W}function pe(R){W||(W=R)}class _e{}const De=new w.OlP("DocumentToken");let ge=(()=>{class R{historyGo(N){throw new Error("Not implemented")}}return R.\u0275fac=function(N){return new(N||R)},R.\u0275prov=w.Yz7({token:R,factory:function(){return function xe(){return(0,w.LFG)(ue)}()},providedIn:"platform"}),R})();const ae=new w.OlP("Location Initialized");let ue=(()=>{class R extends ge{constructor(N){super(),this._doc=N,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(N){const K=G().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",N,!1),()=>K.removeEventListener("popstate",N)}onHashChange(N){const K=G().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",N,!1),()=>K.removeEventListener("hashchange",N)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(N){this.location.pathname=N}pushState(N,K,S){ve()?this._history.pushState(N,K,S):this.location.hash=S}replaceState(N,K,S){ve()?this._history.replaceState(N,K,S):this.location.hash=S}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return R.\u0275fac=function(N){return new(N||R)(w.LFG(De))},R.\u0275prov=w.Yz7({token:R,factory:function(){return function ct(){return new ue((0,w.LFG)(De))}()},providedIn:"platform"}),R})();function ve(){return!!window.history.pushState}function it(R,H){if(0==R.length)return H;if(0==H.length)return R;let N=0;return R.endsWith("/")&&N++,H.startsWith("/")&&N++,2==N?R+H.substring(1):1==N?R+H:R+"/"+H}function Xe(R){const H=R.match(/#|\?|$/),N=H&&H.index||R.length;return R.slice(0,N-("/"===R[N-1]?1:0))+R.slice(N)}function mt(R){return R&&"?"!==R[0]?"?"+R:R}let Qe=(()=>{class R{historyGo(N){throw new Error("Not implemented")}}return R.\u0275fac=function(N){return new(N||R)},R.\u0275prov=w.Yz7({token:R,factory:function(){return(0,w.f3M)(Le)},providedIn:"root"}),R})();const nt=new w.OlP("appBaseHref");let Le=(()=>{class R extends Qe{constructor(N,K){var S,g,y;super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=null!==(S=null!==(g=K??this._platformLocation.getBaseHrefFromDOM())&&void 0!==g?g:null===(y=(0,w.f3M)(De).location)||void 0===y?void 0:y.origin)&&void 0!==S?S:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return it(this._baseHref,N)}path(N=!1){const K=this._platformLocation.pathname+mt(this._platformLocation.search),S=this._platformLocation.hash;return S&&N?`${K}${S}`:K}pushState(N,K,S,g){const y=this.prepareExternalUrl(S+mt(g));this._platformLocation.pushState(N,K,y)}replaceState(N,K,S,g){const y=this.prepareExternalUrl(S+mt(g));this._platformLocation.replaceState(N,K,y)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){var K,S;null===(K=(S=this._platformLocation).historyGo)||void 0===K||K.call(S,N)}}return R.\u0275fac=function(N){return new(N||R)(w.LFG(ge),w.LFG(nt,8))},R.\u0275prov=w.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),St=(()=>{class R extends Qe{constructor(N,K){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(N){const K=it(this._baseHref,N);return K.length>0?"#"+K:K}pushState(N,K,S,g){let y=this.prepareExternalUrl(S+mt(g));0==y.length&&(y=this._platformLocation.pathname),this._platformLocation.pushState(N,K,y)}replaceState(N,K,S,g){let y=this.prepareExternalUrl(S+mt(g));0==y.length&&(y=this._platformLocation.pathname),this._platformLocation.replaceState(N,K,y)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){var K,S;null===(K=(S=this._platformLocation).historyGo)||void 0===K||K.call(S,N)}}return R.\u0275fac=function(N){return new(N||R)(w.LFG(ge),w.LFG(nt,8))},R.\u0275prov=w.Yz7({token:R,factory:R.\u0275fac}),R})(),Ve=(()=>{class R{constructor(N){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const K=this._locationStrategy.getBaseHref();this._baseHref=Xe(ft(K)),this._locationStrategy.onPopState(S=>{this._subject.emit({url:this.path(!0),pop:!0,state:S.state,type:S.type})})}ngOnDestroy(){var N;null===(N=this._urlChangeSubscription)||void 0===N||N.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,K=""){return this.path()==this.normalize(N+mt(K))}normalize(N){return R.stripTrailingSlash(function Ne(R,H){return R&&H.startsWith(R)?H.substring(R.length):H}(this._baseHref,ft(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,K="",S=null){this._locationStrategy.pushState(S,"",N,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+mt(K)),S)}replaceState(N,K="",S=null){this._locationStrategy.replaceState(S,"",N,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+mt(K)),S)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){var K,S;null===(K=(S=this._locationStrategy).historyGo)||void 0===K||K.call(S,N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)})),()=>{const K=this._urlChangeListeners.indexOf(N);var S;this._urlChangeListeners.splice(K,1),0===this._urlChangeListeners.length&&(null===(S=this._urlChangeSubscription)||void 0===S||S.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",K){this._urlChangeListeners.forEach(S=>S(N,K))}subscribe(N,K,S){return this._subject.subscribe({next:N,error:K,complete:S})}}return R.normalizeQueryParams=mt,R.joinWithSlash=it,R.stripTrailingSlash=Xe,R.\u0275fac=function(N){return new(N||R)(w.LFG(Qe))},R.\u0275prov=w.Yz7({token:R,factory:function(){return function Ee(){return new Ve((0,w.LFG)(Qe))}()},providedIn:"root"}),R})();function ft(R){return R.replace(/\/index.html$/,"")}function Ns(R,H){H=encodeURIComponent(H);for(const N of R.split(";")){const K=N.indexOf("="),[S,g]=-1==K?[N,""]:[N.slice(0,K),N.slice(K+1)];if(S.trim()===H)return decodeURIComponent(g)}return null}let zn=(()=>{class R{constructor(N,K,S,g){this._iterableDiffers=N,this._keyValueDiffers=K,this._ngEl=S,this._renderer=g,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(N){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof N?N.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(N){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof N?N.split(/\s+/):N,this._rawClass&&((0,w.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const N=this._iterableDiffer.diff(this._rawClass);N&&this._applyIterableChanges(N)}else if(this._keyValueDiffer){const N=this._keyValueDiffer.diff(this._rawClass);N&&this._applyKeyValueChanges(N)}}_applyKeyValueChanges(N){N.forEachAddedItem(K=>this._toggleClass(K.key,K.currentValue)),N.forEachChangedItem(K=>this._toggleClass(K.key,K.currentValue)),N.forEachRemovedItem(K=>{K.previousValue&&this._toggleClass(K.key,!1)})}_applyIterableChanges(N){N.forEachAddedItem(K=>{if("string"!=typeof K.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,w.AaK)(K.item)}`);this._toggleClass(K.item,!0)}),N.forEachRemovedItem(K=>this._toggleClass(K.item,!1))}_applyClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(K=>this._toggleClass(K,!0)):Object.keys(N).forEach(K=>this._toggleClass(K,!!N[K])))}_removeClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(K=>this._toggleClass(K,!1)):Object.keys(N).forEach(K=>this._toggleClass(K,!1)))}_toggleClass(N,K){(N=N.trim())&&N.split(/\s+/g).forEach(S=>{K?this._renderer.addClass(this._ngEl.nativeElement,S):this._renderer.removeClass(this._ngEl.nativeElement,S)})}}return R.\u0275fac=function(N){return new(N||R)(w.Y36(w.ZZ4),w.Y36(w.aQg),w.Y36(w.SBq),w.Y36(w.Qsj))},R.\u0275dir=w.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),R})();class oo{constructor(H,N,K,S){this.$implicit=H,this.ngForOf=N,this.index=K,this.count=S}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lr=(()=>{class R{constructor(N,K,S){this._viewContainer=N,this._template=K,this._differs=S,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const K=this._viewContainer;N.forEachOperation((S,g,y)=>{if(null==S.previousIndex)K.createEmbeddedView(this._template,new oo(S.item,this._ngForOf,-1,-1),null===y?void 0:y);else if(null==y)K.remove(null===g?void 0:g);else if(null!==g){const x=K.get(g);K.move(x,y),vi(x,S)}});for(let S=0,g=K.length;S<g;S++){const x=K.get(S).context;x.index=S,x.count=g,x.ngForOf=this._ngForOf}N.forEachIdentityChange(S=>{vi(K.get(S.currentIndex),S)})}static ngTemplateContextGuard(N,K){return!0}}return R.\u0275fac=function(N){return new(N||R)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},R.\u0275dir=w.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),R})();function vi(R,H){R.context.$implicit=H.item}let Un=(()=>{class R{constructor(N,K){this._viewContainer=N,this._context=new ks,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){Kr("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){Kr("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,K){return!0}}return R.\u0275fac=function(N){return new(N||R)(w.Y36(w.s_b),w.Y36(w.Rgc))},R.\u0275dir=w.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),R})();class ks{constructor(){this.$implicit=null,this.ngIf=null}}function Kr(R,H){if(H&&!H.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,w.AaK)(H)}'.`)}class ii{constructor(H,N){this._viewContainerRef=H,this._templateRef=N,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(H){H&&!this._created?this.create():!H&&this._created&&this.destroy()}}let js=(()=>{class R{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(N){this._ngSwitch=N,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(N){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(N)}_matchCase(N){const K=N==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||K,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),K}_updateDefaultCases(N){if(this._defaultViews&&N!==this._defaultUsed){this._defaultUsed=N;for(let K=0;K<this._defaultViews.length;K++)this._defaultViews[K].enforceState(N)}}}return R.\u0275fac=function(N){return new(N||R)},R.\u0275dir=w.lG2({type:R,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),R})(),Ci=(()=>{class R{constructor(N,K,S){this.ngSwitch=S,S._addCase(),this._view=new ii(N,K)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return R.\u0275fac=function(N){return new(N||R)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(js,9))},R.\u0275dir=w.lG2({type:R,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),R})(),es=(()=>{class R{constructor(N,K,S){S._addDefault(new ii(N,K))}}return R.\u0275fac=function(N){return new(N||R)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(js,9))},R.\u0275dir=w.lG2({type:R,selectors:[["","ngSwitchDefault",""]],standalone:!0}),R})();class Hs{createSubscription(H,N){return H.subscribe({next:N,error:K=>{throw K}})}dispose(H){H.unsubscribe()}}class Lo{createSubscription(H,N){return H.then(N,K=>{throw K})}dispose(H){}}const Ls=new Lo,Oe=new Hs;let be=(()=>{class R{constructor(N){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=N}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(N){return this._obj?N!==this._obj?(this._dispose(),this.transform(N)):this._latestValue:(N&&this._subscribe(N),this._latestValue)}_subscribe(N){this._obj=N,this._strategy=this._selectStrategy(N),this._subscription=this._strategy.createSubscription(N,K=>this._updateLatestValue(N,K))}_selectStrategy(N){if((0,w.QGY)(N))return Ls;if((0,w.F4k)(N))return Oe;throw function sr(R,H){return new w.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(N,K){N===this._obj&&(this._latestValue=K,this._ref.markForCheck())}}return R.\u0275fac=function(N){return new(N||R)(w.Y36(w.sBO,16))},R.\u0275pipe=w.Yjl({name:"async",type:R,pure:!1,standalone:!0}),R})(),Uo=(()=>{class R{}return R.\u0275fac=function(N){return new(N||R)},R.\u0275mod=w.oAB({type:R}),R.\u0275inj=w.cJS({}),R})();const Bo="browser";function Qo(R){return R===Bo}function Ss(R){return"server"===R}let ai=(()=>{class R{}return R.\u0275prov=(0,w.Yz7)({token:R,providedIn:"root",factory:()=>new jr((0,w.LFG)(De),window)}),R})();class jr{constructor(H,N){this.document=H,this.window=N,this.offset=()=>[0,0]}setOffset(H){this.offset=Array.isArray(H)?()=>H:H}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(H){this.supportsScrolling()&&this.window.scrollTo(H[0],H[1])}scrollToAnchor(H){if(!this.supportsScrolling())return;const N=function Ui(R,H){const N=R.getElementById(H)||R.getElementsByName(H)[0];if(N)return N;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const K=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let S=K.currentNode;for(;S;){const g=S.shadowRoot;if(g){const y=g.getElementById(H)||g.querySelector(`[name="${H}"]`);if(y)return y}S=K.nextNode()}}return null}(this.document,H);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(H){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=H)}}scrollToElement(H){const N=H.getBoundingClientRect(),K=N.left+this.window.pageXOffset,S=N.top+this.window.pageYOffset,g=this.offset();this.window.scrollTo(K-g[0],S-g[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const H=Si(this.window.history)||Si(Object.getPrototypeOf(this.window.history));return!(!H||!H.writable&&!H.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Si(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class Io{}},4650:(Lt,We,U)=>{U.d(We,{$8M:()=>va,$Z:()=>yg,AFp:()=>mw,ALo:()=>LE,AaK:()=>ge,AcB:()=>dl,AsE:()=>jc,BQk:()=>Wh,CHM:()=>Yo,CRH:()=>WE,CZH:()=>K_,CqO:()=>sm,D6c:()=>FD,DdM:()=>AE,EJc:()=>XI,EiD:()=>ff,EpF:()=>Zy,F$t:()=>um,F4k:()=>Qy,FYo:()=>xu,FiY:()=>su,G48:()=>vD,Gf:()=>zE,GfV:()=>dh,Gpc:()=>ue,Gre:()=>_m,Hsn:()=>kd,IIB:()=>WI,Ikx:()=>jd,JOm:()=>ku,JVY:()=>Ce,Jf7:()=>du,KtG:()=>$o,L6k:()=>Ge,LAX:()=>qt,LFG:()=>di,LSH:()=>nh,Lbi:()=>qI,Lck:()=>b,MAs:()=>fp,MGl:()=>Ki,MMx:()=>Ze,NdJ:()=>_p,O4$:()=>x,OlP:()=>mi,Oqu:()=>Cp,PXZ:()=>fD,PiD:()=>gl,Q6J:()=>pp,QGY:()=>im,QP$:()=>ln,QbO:()=>ZI,Qsj:()=>vf,R0b:()=>$u,RDi:()=>Qd,Rgc:()=>Bm,SBq:()=>Qu,Sil:()=>eD,Suo:()=>GE,TTD:()=>vs,TgZ:()=>gp,Udp:()=>hm,VKq:()=>RE,W1O:()=>QE,X6Q:()=>_D,XFs:()=>Ut,Xpm:()=>_r,Xts:()=>ka,Y36:()=>_d,YKP:()=>p,YNc:()=>Gh,Yjl:()=>Te,Yz7:()=>pt,Z0I:()=>Qn,ZZ4:()=>$0,_Bn:()=>a,_UZ:()=>rm,_Vd:()=>Au,_c5:()=>kD,_uU:()=>mm,aQg:()=>j0,c2e:()=>QI,cJS:()=>wn,cg1:()=>ol,dDg:()=>lD,dqk:()=>Kn,eBb:()=>ut,eFA:()=>Rw,ekj:()=>Xa,eoX:()=>Cw,evT:()=>Tf,f3M:()=>ru,g9A:()=>_w,h0i:()=>l,hGG:()=>LD,hij:()=>Bd,iGM:()=>HE,ifc:()=>nn,ip1:()=>gw,jDz:()=>kt,kL8:()=>zd,kYT:()=>ri,kcU:()=>X,lG2:()=>le,lcZ:()=>FE,lqb:()=>os,lri:()=>Tw,mCW:()=>Da,n5z:()=>Nr,n_E:()=>j_,oAB:()=>ni,oJD:()=>gf,oxw:()=>Xr,pB0:()=>Bt,q3G:()=>Cs,q4F:()=>Ko,qLn:()=>at,qOj:()=>Vh,qZA:()=>mp,qzn:()=>j,rFY:()=>ME,rWj:()=>bw,r_U:()=>KI,s9C:()=>Ep,sBO:()=>ED,sIi:()=>Rd,s_b:()=>z_,soG:()=>q_,tBr:()=>ic,tb:()=>vw,tp0:()=>bu,uIk:()=>Lc,vHH:()=>Xe,vpe:()=>Yl,wAp:()=>Bn,xp6:()=>ag,ynx:()=>yp,z2F:()=>Z_,z3N:()=>M,zSh:()=>gc,zs3:()=>pu});var w=U(7579),W=U(727),G=U(9751),fe=U(6451),pe=U(3099);function _e(n){for(let i in n)if(n[i]===_e)return i;throw Error("Could not find renamed property on target object.")}function De(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function xe(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const ae=_e({__forward_ref__:_e});function ue(n){return n.__forward_ref__=ue,n.toString=function(){return ge(this())},n}function ve(n){return ct(n)?n():n}function ct(n){return"function"==typeof n&&n.hasOwnProperty(ae)&&n.__forward_ref__===ue}class Xe extends Error{constructor(i,o){super(function mt(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}(i,o)),this.code=i}}function Qe(n){return"string"==typeof n?n:null==n?"":String(n)}function Ee(n,i){throw new Xe(-201,!1)}function Rn(n,i){null==n&&function Dt(n,i,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,n,null,"!=")}function pt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function ar(n){return Sr(n,Lr)||Sr(n,$n)}function Qn(n){return null!==ar(n)}function Sr(n,i){return n.hasOwnProperty(i)?n[i]:null}function dr(n){return n&&(n.hasOwnProperty(Sn)||n.hasOwnProperty(ur))?n[Sn]:null}const Lr=_e({\u0275prov:_e}),Sn=_e({\u0275inj:_e}),$n=_e({ngInjectableDef:_e}),ur=_e({ngInjectorDef:_e});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let Fr;function Ur(n){const i=Fr;return Fr=n,i}function ls(n,i,o){const u=ar(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Ut.Optional?null:void 0!==i?i:void Ee(ge(n))}function ti(n){return{toString:n}.toString()}var hr=(()=>((hr=hr||{})[hr.OnPush=0]="OnPush",hr[hr.Default=1]="Default",hr))(),nn=(()=>{return(n=nn||(nn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",nn;var n})();const Kn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Br={},jt=[],wr=_e({\u0275cmp:_e}),Fn=_e({\u0275dir:_e}),hi=_e({\u0275pipe:_e}),Hn=_e({\u0275mod:_e}),Ar=_e({\u0275fac:_e}),Ir=_e({__NG_ELEMENT_ID__:_e});let Wr=0;function _r(n){return ti(()=>{const o=!0===n.standalone,u={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===hr.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||jt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||nn.Emulated,id:"c"+Wr++,styles:n.styles||jt,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.dependencies,_=n.features;return c.inputs=ye(n.inputs,u),c.outputs=ye(n.outputs),_&&_.forEach(C=>C(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(Vr).filter(rr):null,c.pipeDefs=f?()=>("function"==typeof f?f():f).map(At).filter(rr):null,c})}function Vr(n){return Ye(n)||Fe(n)}function rr(n){return null!==n}function ni(n){return ti(()=>({type:n.type,bootstrap:n.bootstrap||jt,declarations:n.declarations||jt,imports:n.imports||jt,exports:n.exports||jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ri(n,i){return ti(()=>{const o=In(n,!0);o.declarations=i.declarations||jt,o.imports=i.imports||jt,o.exports=i.exports||jt})}function ye(n,i){if(null==n)return Br;const o={};for(const u in n)if(n.hasOwnProperty(u)){let c=n[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),o[c]=u,i&&(i[c]=f)}return o}const le=_r;function Te(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ye(n){return n[wr]||null}function Fe(n){return n[Fn]||null}function At(n){return n[hi]||null}function ln(n){const i=Ye(n)||Fe(n)||At(n);return null!==i&&i.standalone}function In(n,i){const o=n[Hn]||null;if(!o&&!0===i)throw new Error(`Type ${ge(n)} does not have '\u0275mod' property.`);return o}function Kr(n){return Array.isArray(n)&&"object"==typeof n[1]}function ii(n){return Array.isArray(n)&&!0===n[1]}function js(n){return 0!=(8&n.flags)}function Ci(n){return 2==(2&n.flags)}function es(n){return 1==(1&n.flags)}function Rr(n){return null!==n.template}function ms(n){return 0!=(256&n[2])}function _s(n,i){return n.hasOwnProperty(Ar)?n[Ar]:null}class Fo{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function vs(){return Es}function Es(n){return n.type.prototype.ngOnChanges&&(n.setInput=lo),uo}function uo(){const n=co(this),i=n?.current;if(i){const o=n.previous;if(o===Br)n.previous=i;else for(let u in i)o[u]=i[u];n.current=null,this.ngOnChanges(i)}}function lo(n,i,o,u){const c=co(n)||function Uo(n,i){return n[ws]=i}(n,{previous:Br,current:null}),f=c.current||(c.current={}),_=c.previous,C=this.declaredInputs[o],P=_[C];f[C]=new Fo(P&&P.currentValue,i,_===Br),n[u]=i}vs.ngInherit=!0;const ws="__ngSimpleChanges__";function co(n){return n[ws]||null}function $r(n){for(;Array.isArray(n);)n=n[0];return n}function Si(n,i){return $r(i[n])}function Ui(n,i){return $r(i[n.index])}function Io(n,i){return n.data[i]}function Gs(n,i){return n[i]}function Jn(n,i){const o=i[n];return Kr(o)?o:o[0]}function Zi(n){return 64==(64&n[2])}function Ii(n,i){return null==i?null:n[i]}function Oi(n){n[18]=0}function ki(n,i){n[5]+=i;let o=n,u=n[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const dn={lFrame:bo(null),bindingsEnabled:!0};function Fs(){return dn.bindingsEnabled}function _t(){return dn.lFrame.lView}function Cn(){return dn.lFrame.tView}function Yo(n){return dn.lFrame.contextLView=n,n[8]}function $o(n){return dn.lFrame.contextLView=null,n}function qr(){let n=Xo();for(;null!==n&&64===n.type;)n=n.parent;return n}function Xo(){return dn.lFrame.currentTNode}function hs(n,i){const o=dn.lFrame;o.currentTNode=n,o.isParent=i}function B(){return dn.lFrame.isParent}function L(){dn.lFrame.isParent=!1}function dt(){const n=dn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function vn(){return dn.lFrame.bindingIndex++}function xn(n){const i=dn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Zr(n,i){const o=dn.lFrame;o.bindingIndex=o.bindingRootIndex=n,ts(i)}function ts(n){dn.lFrame.currentDirectiveIndex=n}function Us(){return dn.lFrame.currentQueryIndex}function xr(n){dn.lFrame.currentQueryIndex=n}function Qr(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function li(n,i,o){if(o&Ut.SkipSelf){let c=i,f=n;for(;!(c=c.parent,null!==c||o&Ut.Host||(c=Qr(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;i=c,n=f}const u=dn.lFrame=ns();return u.currentTNode=i,u.lView=n,!0}function Bs(n){const i=ns(),o=n[1];dn.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function ns(){const n=dn.lFrame,i=null===n?null:n.child;return null===i?bo(n):i}function bo(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Qi(){const n=dn.lFrame;return dn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const R=Qi;function H(){const n=Qi();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function S(){return dn.lFrame.selectedIndex}function g(n){dn.lFrame.selectedIndex=n}function y(){const n=dn.lFrame;return Io(n.tView,n.selectedIndex)}function x(){dn.lFrame.currentNamespace="svg"}function X(){!function de(){dn.lFrame.currentNamespace=null}()}function tt(n,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const f=n.data[o].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:P,ngAfterViewChecked:V,ngOnDestroy:Q}=f;_&&(n.contentHooks||(n.contentHooks=[])).push(-o,_),C&&((n.contentHooks||(n.contentHooks=[])).push(o,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,C)),P&&(n.viewHooks||(n.viewHooks=[])).push(-o,P),V&&((n.viewHooks||(n.viewHooks=[])).push(o,V),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,V)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(o,Q)}}function bt(n,i,o){bn(n,i,3,o)}function Gt(n,i,o,u){(3&n[2])===o&&bn(n,i,o,u)}function Tn(n,i){let o=n[2];(3&o)===i&&(o&=2047,o+=1,n[2]=o)}function bn(n,i,o,u){const f=u??-1,_=i.length-1;let C=0;for(let P=void 0!==u?65535&n[18]:0;P<_;P++)if("number"==typeof i[P+1]){if(C=i[P],null!=u&&C>=u)break}else i[P]<0&&(n[18]+=65536),(C<f||-1==f)&&(_n(n,o,i,P),n[18]=(4294901760&n[18])+P+2),P++}function _n(n,i,o,u){const c=o[u]<0,f=o[u+1],C=n[c?-o[u]:o[u]];if(c){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class An{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function jo(n,i,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const f=o[u++],_=o[u++],C=o[u++];n.setAttribute(i,_,C,f)}else{const f=c,_=o[++u];ya(f)?n.setProperty(i,f,_):n.setAttribute(i,f,_),u++}}return u}function zi(n){return 3===n||4===n||6===n}function ya(n){return 64===n.charCodeAt(0)}function po(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||Js(n,o,c,null,-1===o||2===o?i[++u]:null)}}return n}function Js(n,i,o,u,c){let f=0,_=n.length;if(-1===i)_=-1;else for(;f<n.length;){const C=n[f++];if("number"==typeof C){if(C===i){_=-1;break}if(C>i){_=f-1;break}}}for(;f<n.length;){const C=n[f];if("number"==typeof C)break;if(C===o){if(null===u)return void(null!==c&&(n[f+1]=c));if(u===n[f+1])return void(n[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==_&&(n.splice(_,0,i),f=_+1),n.splice(f++,0,o),null!==u&&n.splice(f++,0,u),null!==c&&n.splice(f++,0,c)}function eo(n){return-1!==n}function Jo(n){return 32767&n}function Xt(n,i){let o=function Yt(n){return n>>16}(n),u=i;for(;o>0;)u=u[15],o--;return u}let rn=!0;function Nn(n){const i=rn;return rn=n,i}let to=0;const or={};function Ra(n,i){const o=Ds(n,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(n.injectorIndex=i.length,Gi(u.data,n),Gi(i,null),Gi(u.blueprint,null));const c=rs(n,i),f=n.injectorIndex;if(eo(c)){const _=Jo(c),C=Xt(c,i),P=C[1].data;for(let V=0;V<8;V++)i[f+V]=C[_+V]|P[_+V]}return i[f+8]=c,f}function Gi(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Ds(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function rs(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){if(u=mn(c),null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Ho(n,i,o){!function Aa(n,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Ir)&&(u=o[Ir]),null==u&&(u=o[Ir]=to++);const c=255&u;i.data[n+(c>>5)]|=1<<c}(n,i,o)}function Va(n,i,o){if(o&Ut.Optional||void 0!==n)return n;Ee()}function ll(n,i,o,u){if(o&Ut.Optional&&void 0===u&&(u=null),0==(o&(Ut.Self|Ut.Host))){const c=n[9],f=Ur(void 0);try{return c?c.get(i,u,o&Ut.Optional):ls(i,u,o&Ut.Optional)}finally{Ur(f)}}return Va(u,0,o)}function Eu(n,i,o,u=Ut.Default,c){if(null!==n){if(1024&i[2]){const _=function Jt(n,i,o,u,c){let f=n,_=i;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const C=Di(f,_,o,u|Ut.Self,or);if(C!==or)return C;let P=f.parent;if(!P){const V=_[21];if(V){const Q=V.get(o,or,u);if(Q!==or)return Q}P=mn(_),_=_[15]}f=P}return c}(n,i,o,u,or);if(_!==or)return _}const f=Di(n,i,o,u,or);if(f!==or)return f}return ll(i,o,u,c)}function Di(n,i,o,u,c){const f=function As(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Ir)?n[Ir]:void 0;return"number"==typeof i?i>=0?255&i:fs:i}(o);if("function"==typeof f){if(!li(i,n,u))return u&Ut.Host?Va(c,0,u):ll(i,o,u,c);try{const _=f(u);if(null!=_||u&Ut.Optional)return _;Ee()}finally{R()}}else if("number"==typeof f){let _=null,C=Ds(n,i),P=-1,V=u&Ut.Host?i[16][6]:null;for((-1===C||u&Ut.SkipSelf)&&(P=-1===C?rs(n,i):i[C+8],-1!==P&&wu(u,!1)?(_=i[1],C=Jo(P),i=Xt(P,i)):C=-1);-1!==C;){const Q=i[1];if(ju(f,C,Q.data)){const re=Xl(C,i,o,_,u,V);if(re!==or)return re}P=i[C+8],-1!==P&&wu(u,i[1].data[C+8]===V)&&ju(f,C,i)?(_=Q,C=Jo(P),i=Xt(P,i)):C=-1}}return c}function Xl(n,i,o,u,c,f){const _=i[1],C=_.data[n+8],Q=gi(C,_,o,null==u?Ci(C)&&rn:u!=_&&0!=(3&C.type),c&Ut.Host&&f===C);return null!==Q?Co(i,_,Q,C):or}function gi(n,i,o,u,c){const f=n.providerIndexes,_=i.data,C=1048575&f,P=n.directiveStart,Q=f>>20,Se=c?C+Q:n.directiveEnd;for(let Je=u?C:C+Q;Je<Se;Je++){const wt=_[Je];if(Je<P&&o===wt||Je>=P&&wt.type===o)return Je}if(c){const Je=_[P];if(Je&&Rr(Je)&&Je.type===o)return P}return null}function Co(n,i,o,u){let c=n[o];const f=i.data;if(function vr(n){return n instanceof An}(c)){const _=c;_.resolving&&function Le(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Xe(-200,`Circular dependency in DI detected for ${n}${o}`)}(function nt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Qe(n)}(f[o]));const C=Nn(_.canSeeViewProviders);_.resolving=!0;const P=_.injectImpl?Ur(_.injectImpl):null;li(n,u,Ut.Default);try{c=n[o]=_.factory(void 0,f,n,u),i.firstCreatePass&&o>=u.directiveStart&&function Be(n,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=i.type.prototype;if(u){const _=Es(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,_)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,c),f&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,f))}(o,f[o],i)}finally{null!==P&&Ur(P),Nn(C),_.resolving=!1,R()}}return c}function ju(n,i,o){return!!(o[i+(n>>5)]&1<<n)}function wu(n,i){return!(n&Ut.Self||n&Ut.Host&&i)}class Tt{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Eu(this._tNode,this._lView,i,u,o)}}function fs(){return new Tt(qr(),_t())}function Nr(n){return ti(()=>{const i=n.prototype.constructor,o=i[Ar]||eu(i),u=Object.prototype;let c=Object.getPrototypeOf(n.prototype).constructor;for(;c&&c!==u;){const f=c[Ar]||eu(c);if(f&&f!==o)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function eu(n){return ct(n)?()=>{const i=eu(ve(n));return i&&i()}:_s(n)}function mn(n){const i=n[1],o=i.type;return 2===o?i.declTNode:1===o?n[6]:null}function va(n){return function _a(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const f=o[c];if(zi(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(f===i)return o[c+1];c+=2}}}return null}(qr(),n)}const Ke="__parameters__",gt="__prop__metadata__";function $a(n){return function(...o){if(n){const u=n(...o);for(const c in u)this[c]=u[c]}}}function la(n,i,o){return ti(()=>{const u=$a(i);function c(...f){if(this instanceof c)return u.apply(this,f),this;const _=new c(...f);return C.annotation=_,C;function C(P,V,Q){const re=P.hasOwnProperty(Ke)?P[Ke]:Object.defineProperty(P,Ke,{value:[]})[Ke];for(;re.length<=Q;)re.push(null);return(re[Q]=re[Q]||[]).push(_),P}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}function Ea(n,i,o,u){return ti(()=>{const c=$a(i);function f(..._){if(this instanceof f)return c.apply(this,_),this;const C=new f(..._);return function P(V,Q){const re=V.constructor,Se=re.hasOwnProperty(gt)?re[gt]:Object.defineProperty(re,gt,{value:{}})[gt];Se[Q]=Se.hasOwnProperty(Q)&&Se[Q]||[],Se[Q].unshift(C),u&&u(V,Q,..._)}}return o&&(f.prototype=Object.create(o.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class mi{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=pt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}class Iu{}const dl=Ea("ContentChildren",(n,i={})=>({selector:n,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...i}),Iu);function Nt(n,i){void 0===i&&(i=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(i===n&&(i=n.slice(0,o)),Nt(u,i)):i!==n&&i.push(u)}return i}function no(n,i){n.forEach(o=>Array.isArray(o)?no(o,i):i(o))}function Ha(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function ca(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function I(n,i){const o=[];for(let u=0;u<n;u++)o.push(i);return o}function oe(n,i,o){let u=Ot(n,i);return u>=0?n[1|u]=o:(u=~u,function A(n,i,o,u){let c=n.length;if(c==i)n.push(o,u);else if(1===c)n.push(u,n[0]),n[0]=o;else{for(c--,n.push(n[c-1],n[c]);c>i;)n[c]=n[c-2],c--;n[i]=o,n[i+1]=u}}(n,u,i,o)),u}function qe(n,i){const o=Ot(n,i);if(o>=0)return n[1|o]}function Ot(n,i){return function Wt(n,i,o){let u=0,c=n.length>>o;for(;c!==u;){const f=u+(c-u>>1),_=n[f<<o];if(i===_)return f<<o;_>i?c=f:u=f+1}return~(c<<o)}(n,i,1)}const yo={},xa="__NG_DI_FLAG__",_o="ngTempTokenPath",Du=/\n/gm,Tu="__source";let ss;function vo(n){const i=ss;return ss=n,i}function fl(n,i=Ut.Default){if(void 0===ss)throw new Xe(-203,!1);return null===ss?ls(n,void 0,i):ss.get(n,i&Ut.Optional?null:void 0,i)}function di(n,i=Ut.Default){return(function Jr(){return Fr}()||fl)(ve(n),i)}function ru(n,i=Ut.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),di(n,i)}function tc(n){const i=[];for(let o=0;o<n.length;o++){const u=ve(n[o]);if(Array.isArray(u)){if(0===u.length)throw new Xe(900,!1);let c,f=Ut.Default;for(let _=0;_<u.length;_++){const C=u[_],P=nc(C);"number"==typeof P?-1===P?c=C.token:f|=P:c=C}i.push(di(c,f))}else i.push(di(u))}return i}function iu(n,i){return n[xa]=i,n.prototype[xa]=i,n}function nc(n){return n[xa]}const ic=iu(la("Inject",n=>({token:n})),-1),su=iu(la("Optional"),8),gl=iu(la("Self"),2),bu=iu(la("SkipSelf"),4);let Cu,oc,Na;function Qd(n){Cu=n}function Ai(n){var i;return(null===(i=function Ia(){if(void 0===oc&&(oc=null,Kn.trustedTypes))try{oc=Kn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return oc}())||void 0===i?void 0:i.createHTML(n))||n}function ea(n){var i;return(null===(i=function Oa(){if(void 0===Na&&(Na=null,Kn.trustedTypes))try{Na=Kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Na}())||void 0===i?void 0:i.createHTML(n))||n}class Wo{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ha extends Wo{getTypeName(){return"HTML"}}class Ku extends Wo{getTypeName(){return"Style"}}class Wa extends Wo{getTypeName(){return"Script"}}class Yd extends Wo{getTypeName(){return"URL"}}class D extends Wo{getTypeName(){return"ResourceURL"}}function M(n){return n instanceof Wo?n.changingThisBreaksApplicationSecurity:n}function j(n,i){const o=function ne(n){return n instanceof Wo&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function Ce(n){return new ha(n)}function Ge(n){return new Ku(n)}function ut(n){return new Wa(n)}function qt(n){return new Yd(n)}function Bt(n){return new D(n)}class Gn{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Ai(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class er{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Ai(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Ai(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const _=o.item(c).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&i.removeAttribute(_)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const bs=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Da(n){return(n=String(n)).match(bs)?n:"unsafe:"+n}function Ri(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function na(...n){const i={};for(const o of n)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const kr=Ri("area,br,col,hr,img,wbr"),qs=Ri("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vl=Ri("rp,rt"),El=na(kr,na(qs,Ri("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),na(vl,Ri("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),na(vl,qs)),Cr=Ri("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lc=na(Cr,Ri("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ri("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Jd=Ri("script,style,template");class df{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!El.hasOwnProperty(o))return this.sanitizedSomething=!0,!Jd.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const f=u.item(c),_=f.name,C=_.toLowerCase();if(!lc.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let P=f.value;Cr[C]&&(P=Da(P)),this.buf.push(" ",_,'="',th(P),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();El.hasOwnProperty(o)&&!kr.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(th(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const eh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hf=/([^\#-~ |!])/g;function th(n){return n.replace(/&/g,"&amp;").replace(eh,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(hf,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Il;function ff(n,i){let o=null;try{Il=Il||function fn(n){const i=new er(n);return function ta(){try{return!!(new window.DOMParser).parseFromString(Ai(""),"text/html")}catch{return!1}}()?new Gn(i):i}(n);let u=i?String(i):"";o=Il.getInertBodyElement(u);let c=5,f=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=f,f=o.innerHTML,o=Il.getInertBodyElement(u)}while(u!==f);return Ai((new df).sanitizeChildren(pf(o)||o))}finally{if(o){const u=pf(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function pf(n){return"content"in n&&function qu(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Cs=(()=>((Cs=Cs||{})[Cs.NONE=0]="NONE",Cs[Cs.HTML=1]="HTML",Cs[Cs.STYLE=2]="STYLE",Cs[Cs.SCRIPT=3]="SCRIPT",Cs[Cs.URL=4]="URL",Cs[Cs.RESOURCE_URL=5]="RESOURCE_URL",Cs))();function gf(n){const i=Dl();return i?ea(i.sanitize(Cs.HTML,n)||""):j(n,"HTML")?ea(M(n)):ff(function gs(){return void 0!==Cu?Cu:typeof document<"u"?document:void 0}(),Qe(n))}function nh(n){const i=Dl();return i?i.sanitize(Cs.URL,n)||"":j(n,"URL")?M(n):Da(Qe(n))}function Dl(){const n=_t();return n&&n[12]}const ka=new mi("ENVIRONMENT_INITIALIZER"),ih=new mi("INJECTOR",-1),Zu=new mi("INJECTOR_DEF_TYPES");class rd{get(i,o=yo){if(o===yo){const u=new Error(`NullInjectorError: No provider for ${ge(i)}!`);throw u.name="NullInjectorError",u}return o}}function hc(...n){return{\u0275providers:fc(0,n)}}function fc(n,...i){const o=[],u=new Set;let c;return no(i,f=>{const _=f;La(_,o,[],u)&&(c||(c=[]),c.push(_))}),void 0!==c&&id(c,o),o}function id(n,i){for(let o=0;o<n.length;o++){const{providers:c}=n[o];no(c,f=>{i.push(f)})}}function La(n,i,o,u){if(!(n=ve(n)))return!1;let c=null,f=dr(n);const _=!f&&Ye(n);if(f||_){if(_&&!_.standalone)return!1;c=n}else{const P=n.ngModule;if(f=dr(P),!f)return!1;c=P}const C=u.has(c);if(_){if(C)return!1;if(u.add(c),_.dependencies){const P="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const V of P)La(V,i,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!C){let V;u.add(c);try{no(f.imports,Q=>{La(Q,i,o,u)&&(V||(V=[]),V.push(Q))})}finally{}void 0!==V&&id(V,i)}if(!C){const V=_s(c)||(()=>new c);i.push({provide:c,useFactory:V,deps:jt},{provide:Zu,useValue:c,multi:!0},{provide:ka,useValue:()=>di(c),multi:!0})}const P=f.providers;null==P||C||no(P,Q=>{i.push(Q)})}}return c!==n&&void 0!==n.providers}const sh=_e({provide:String,useValue:_e});function Tl(n){return null!==n&&"object"==typeof n&&sh in n}function lu(n){return"function"==typeof n}const gc=new mi("Set Injector scope."),mc={},Gp={};let Fa;function sd(){return void 0===Fa&&(Fa=new rd),Fa}class os{}class ah extends os{constructor(i,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yc(i,_=>this.processProvider(_)),this.records.set(ih,qa(void 0,this)),c.has("environment")&&this.records.set(os,qa(void 0,this));const f=this.records.get(gc);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Zu.multi,jt,Ut.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=vo(this),u=Ur(void 0);try{return i()}finally{vo(o),Ur(u)}}get(i,o=yo,u=Ut.Default){this.assertNotDestroyed();const c=vo(this),f=Ur(void 0);try{if(!(u&Ut.SkipSelf)){let C=this.records.get(i);if(void 0===C){const P=function cr(n){return"function"==typeof n||"object"==typeof n&&n instanceof mi}(i)&&ar(i);C=P&&this.injectableDefInScope(P)?qa(Su(i),mc):null,this.records.set(i,C)}if(null!=C)return this.hydrate(i,C)}return(u&Ut.Self?sd():this.parent).get(i,o=u&Ut.Optional&&o===yo?null:o)}catch(_){if("NullInjectorError"===_.name){if((_[_o]=_[_o]||[]).unshift(ge(i)),c)throw _;return function rc(n,i,o,u){const c=n[_o];throw i[Tu]&&c.unshift(i[Tu]),n.message=function pl(n,i,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let c=ge(i);if(Array.isArray(i))c=i.map(ge).join(" -> ");else if("object"==typeof i){let f=[];for(let _ in i)if(i.hasOwnProperty(_)){let C=i[_];f.push(_+":"+("string"==typeof C?JSON.stringify(C):ge(C)))}c=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${n.replace(Du,"\n  ")}`}("\n"+n.message,c,o,u),n.ngTokenPath=c,n[_o]=null,n}(_,i,"R3InjectorError",this.source)}throw _}finally{Ur(f),vo(c)}}resolveInjectorInitializers(){const i=vo(this),o=Ur(void 0);try{const u=this.get(ka.multi,jt,Ut.Self);for(const c of u)c()}finally{vo(i),Ur(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(ge(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xe(205,!1)}processProvider(i){let o=lu(i=ve(i))?i:ve(i&&i.provide);const u=function Ka(n){return Tl(n)?qa(void 0,n.useValue):qa(uh(n),mc)}(i);if(lu(i)||!0!==i.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=qa(void 0,mc,!0),c.factory=()=>tc(c.multi),this.records.set(o,c)),o=i,c.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===mc&&(o.value=Gp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function lh(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=ve(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Su(n){const i=ar(n),o=null!==i?i.factory:_s(n);if(null!==o)return o;if(n instanceof mi)throw new Xe(204,!1);if(n instanceof Function)return function mf(n){const i=n.length;if(i>0)throw I(i,"?"),new Xe(204,!1);const o=function yr(n){const i=n&&(n[Lr]||n[$n]);if(i){const o=function Mi(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Xe(204,!1)}function uh(n,i,o){let u;if(lu(n)){const c=ve(n);return _s(c)||Su(c)}if(Tl(n))u=()=>ve(n.useValue);else if(function oh(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...tc(n.deps||[]));else if(function uu(n){return!(!n||!n.useExisting)}(n))u=()=>di(ve(n.useExisting));else{const c=ve(n&&(n.useClass||n.provide));if(!function yf(n){return!!n.deps}(n))return _s(c)||Su(c);u=()=>new c(...tc(n.deps))}return u}function qa(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function _f(n){return!!n.\u0275providers}function yc(n,i){for(const o of n)Array.isArray(o)?yc(o,i):_f(o)?yc(o.\u0275providers,i):i(o)}class ch{}class Kp{resolveComponentFactory(i){throw function ra(n){const i=Error(`No component factory found for ${ge(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Au=(()=>{class n{}return n.NULL=new Kp,n})();function Ru(){return Ta(qr(),_t())}function Ta(n,i){return new Qu(Ui(n,i))}let Qu=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Ru,n})();function Yu(n){return n instanceof Qu?n.nativeElement:n}class xu{}let vf=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ef(){const n=_t(),o=Jn(qr().index,n);return(Kr(o)?o:n)[11]}(),n})(),_c=(()=>{class n{}return n.\u0275prov=pt({token:n,providedIn:"root",factory:()=>null}),n})();class dh{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Ko=new dh("14.2.5"),Fi={};function $e(n){return n.ngOriginalError}class at{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&$e(i);for(;o&&$e(o);)o=$e(o);return o||null}}const Cl=new Map;let Sl=0;const If="__ngContext__";function ia(n,i){Kr(i)?(n[If]=i[20],function Al(n){Cl.set(n[20],n)}(i)):n[If]=i}function du(n){return n.ownerDocument.defaultView}function Tf(n){return n.ownerDocument}function Ou(n){return n instanceof Function?n():n}var ku=(()=>((ku=ku||{})[ku.Important=1]="Important",ku[ku.DashCase=2]="DashCase",ku))();function yh(n,i){return undefined(n,i)}function _h(n){const i=n[3];return ii(i)?i[3]:i}function Lu(n){return Xp(n[13])}function Ml(n){return Xp(n[4])}function Xp(n){for(;null!==n&&!ii(n);)n=n[4];return n}function Ic(n,i,o,u,c){if(null!=u){let f,_=!1;ii(u)?f=u:Kr(u)&&(_=!0,u=u[0]);const C=$r(u);0===n&&null!==o?null==c?xl(i,o,C):fu(i,o,C,c||null,!0):1===n&&null!==o?fu(i,o,C,c||null,!0):2===n?function ng(n,i,o){const u=Mf(n,i);u&&function ty(n,i,o,u){n.removeChild(i,o,u)}(n,u,i,o)}(i,C,_):3===n&&i.destroyNode(C),null!=f&&function ov(n,i,o,u,c){const f=o[7];f!==$r(o)&&Ic(i,n,u,f,c);for(let C=10;C<o.length;C++){const P=o[C];Cc(P[1],P,n,i,u,f)}}(i,n,f,o,c)}}function Cf(n,i,o){return n.createElement(i,o)}function Af(n,i){const o=n[9],u=o.indexOf(i),c=i[3];512&i[2]&&(i[2]&=-513,ki(c,-1)),o.splice(u,1)}function Eh(n,i){if(n.length<=10)return;const o=10+i,u=n[o];if(u){const c=u[17];null!==c&&c!==n&&Af(c,u),i>0&&(n[o-1][4]=u[4]);const f=ca(n,10+i);!function Sf(n,i){Cc(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const _=f[19];null!==_&&_.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function eg(n,i){if(!(128&i[2])){const o=i[11];o.destroyNode&&Cc(n,i,o,3,null,null),function bc(n){let i=n[13];if(!i)return Rf(n[1],n);for(;i;){let o=null;if(Kr(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==n;)Kr(i)&&Rf(i[1],i),i=i[3];null===i&&(i=n),Kr(i)&&Rf(i[1],i),o=i&&i[4]}i=o}}(i)}}function Rf(n,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function Jm(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof An)){const f=o[u+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const C=c[f[_]],P=f[_+1];try{P.call(C)}finally{}}else try{f.call(c)}finally{}}}}(n,i),function iv(n,i){const o=n.cleanup,u=i[7];let c=-1;if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const _=o[f+1],C="function"==typeof _?_(i):$r(i[_]),P=u[c=o[f+2]],V=o[f+3];"boolean"==typeof V?C.removeEventListener(o[f],P,V):V>=0?u[c=V]():u[c=-V].unsubscribe(),f+=2}else{const _=u[c=o[f+1]];o[f].call(_)}if(null!==u){for(let f=c+1;f<u.length;f++)(0,u[f])();i[7]=null}}(n,i),1===i[1].type&&i[11].destroy();const o=i[17];if(null!==o&&ii(i[3])){o!==i[3]&&Af(o,i);const u=i[19];null!==u&&u.detachView(n)}!function hd(n){Cl.delete(n[20])}(i)}}function tg(n,i,o){return function wh(n,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=n.data[u.directiveStart].encapsulation;if(c===nn.None||c===nn.Emulated)return null}return Ui(u,o)}(n,i.parent,o)}function fu(n,i,o,u,c){n.insertBefore(i,o,u,c)}function xl(n,i,o){n.appendChild(i,o)}function ey(n,i,o,u,c){null!==u?fu(n,i,o,u,c):xl(n,i,o)}function Mf(n,i){return n.parentNode(i)}function pd(n,i,o){return el(n,i,o)}let el=function Pl(n,i,o){return 40&n.type?Ui(n,o):null};function Ih(n,i,o,u){const c=tg(n,u,i),f=i[11],C=pd(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let P=0;P<o.length;P++)ey(f,c,o[P],C,!1);else ey(f,c,o,C,!1)}function Pf(n,i){if(null!==i){const o=i.type;if(3&o)return Ui(i,n);if(4&o)return Dh(-1,n[i.index]);if(8&o){const u=i.child;if(null!==u)return Pf(n,u);{const c=n[i.index];return ii(c)?Dh(-1,c):$r(c)}}if(32&o)return yh(i,n)()||$r(n[i.index]);{const u=Nf(n,i);return null!==u?Array.isArray(u)?u[0]:Pf(_h(n[16]),u):Pf(n,i.next)}}return null}function Nf(n,i){return null!==i?n[16][6].projection[i.projection]:null}function Dh(n,i){const o=10+n+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return Pf(u,c)}return i[7]}function Th(n,i,o,u,c,f,_){for(;null!=o;){const C=u[o.index],P=o.type;if(_&&0===i&&(C&&ia($r(C),u),o.flags|=4),64!=(64&o.flags))if(8&P)Th(n,i,o.child,u,c,f,!1),Ic(i,n,c,C,f);else if(32&P){const V=yh(o,u);let Q;for(;Q=V();)Ic(i,n,c,Q,f);Ic(i,n,c,C,f)}else 16&P?bh(n,i,u,o,c,f):Ic(i,n,c,C,f);o=_?o.projectionNext:o.next}}function Cc(n,i,o,u,c,f){Th(o,u,n.firstChild,i,c,f,!1)}function bh(n,i,o,u,c,f){const _=o[16],P=_[6].projection[u.projection];if(Array.isArray(P))for(let V=0;V<P.length;V++)Ic(i,n,c,P[V],f);else Th(n,i,P,_[3],c,f,!0)}function Ch(n,i,o){n.setAttribute(i,"style",o)}function ig(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function sg(n,i,o){let u=n.length;for(;;){const c=n.indexOf(i,o);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){const f=i.length;if(c+f===u||n.charCodeAt(c+f)<=32)return c}o=c+1}}const Sh="ng-template";function Ah(n,i,o){let u=0;for(;u<n.length;){let c=n[u++];if(o&&"class"===c){if(c=n[u],-1!==sg(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<n.length&&"string"==typeof(c=n[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function og(n){return 4===n.type&&n.value!==Sh}function iy(n,i,o){return i===(4!==n.type||o?n.value:Sh)}function sa(n,i,o){let u=4;const c=n.attrs||[],f=function Nl(n){for(let i=0;i<n.length;i++)if(zi(n[i]))return i;return n.length}(c);let _=!1;for(let C=0;C<i.length;C++){const P=i[C];if("number"!=typeof P){if(!_)if(4&u){if(u=2|1&u,""!==P&&!iy(n,P,o)||""===P&&1===i.length){if(Za(u))return!1;_=!0}}else{const V=8&u?P:i[++C];if(8&u&&null!==n.attrs){if(!Ah(n.attrs,V,o)){if(Za(u))return!1;_=!0}continue}const re=kf(8&u?"class":P,c,og(n),o);if(-1===re){if(Za(u))return!1;_=!0;continue}if(""!==V){let Se;Se=re>f?"":c[re+1].toLowerCase();const Je=8&u?Se:null;if(Je&&-1!==sg(Je,V,0)||2&u&&V!==Se){if(Za(u))return!1;_=!0}}}}else{if(!_&&!Za(u)&&!Za(P))return!1;if(_&&Za(P))continue;_=!1,u=P|1&u}}return Za(u)||_}function Za(n){return 0==(1&n)}function kf(n,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let f=!1;for(;c<i.length;){const _=i[c];if(_===n)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let C=i[++c];for(;"string"==typeof C;)C=i[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function gd(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,n)}function Rh(n,i,o=!1){for(let u=0;u<i.length;u++)if(sa(n,i[u],o))return!0;return!1}function oy(n,i){e:for(let o=0;o<i.length;o++){const u=i[o];if(n.length===u.length){for(let c=0;c<n.length;c++)if(n[c]!==u[c])continue e;return!0}}return!1}function Ol(n,i){return n?":not("+i.trim()+")":i}function av(n){let i=n[0],o=1,u=2,c="",f=!1;for(;o<n.length;){let _=n[o];if("string"==typeof _)if(2&u){const C=n[++o];c+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!Za(_)&&(i+=Ol(f,c),c=""),u=_,f=f||!Za(u);o++}return""!==c&&(i+=Ol(f,c)),i}const Wn={};function ag(n){uy(Cn(),_t(),S()+n,!1)}function uy(n,i,o,u){if(!u)if(3==(3&i[2])){const f=n.preOrderCheckHooks;null!==f&&bt(i,f,o)}else{const f=n.preOrderHooks;null!==f&&Gt(i,f,0,o)}g(o)}function cg(n,i=null,o=null,u){const c=kl(n,i,o,u);return c.resolveInjectorInitializers(),c}function kl(n,i=null,o=null,u,c=new Set){const f=[o||jt,hc(n)];return u=u||("object"==typeof n?void 0:ge(n)),new ah(f,i||sd(),u||null,c)}let pu=(()=>{class n{static create(o,u){if(Array.isArray(o))return cg({name:""},u,o,"");{var c;const f=null!==(c=o.name)&&void 0!==c?c:"";return cg({name:f},o.parent,o.providers,f)}}}return n.THROW_IF_NOT_FOUND=yo,n.NULL=new rd,n.\u0275prov=pt({token:n,providedIn:"any",factory:()=>di(ih)}),n.__NG_ELEMENT_ID__=-1,n})();function _d(n,i=Ut.Default){const o=_t();return null===o?di(n,i):Eu(qr(),o,ve(n),i)}function yg(){throw new Error("invalid")}function tl(n,i){return n<<17|i<<2}function oa(n){return n>>17&32767}function zf(n){return 2|n}function Fu(n){return(131068&n)>>2}function Gf(n,i){return-131069&n|i<<2}function Ph(n){return 1|n}function Sg(n,i){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],f=o[u+1];if(-1!==f){const _=n.data[f];xr(c),_.contentQueries(2,i[f],f)}}}function Qf(n,i,o,u,c,f,_,C,P,V,Q){const re=i.blueprint.slice();return re[0]=c,re[2]=76|u,(null!==Q||n&&1024&n[2])&&(re[2]|=1024),Oi(re),re[3]=re[15]=n,re[8]=o,re[10]=_||n&&n[10],re[11]=C||n&&n[11],re[12]=P||n&&n[12]||null,re[9]=V||n&&n[9]||null,re[6]=f,re[20]=function Ju(){return Sl++}(),re[21]=Q,re[16]=2==i.type?n[16]:re,re}function Ul(n,i,o,u,c){let f=n.data[i];if(null===f)f=function Rg(n,i,o,u,c){const f=Xo(),_=B(),P=n.data[i]=function Ng(n,i,o,u,c,f){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,o,i,u,c);return null===n.firstChild&&(n.firstChild=P),null!==f&&(_?null==f.child&&null!==P.parent&&(f.child=P):null===f.next&&(f.next=P)),P}(n,i,o,u,c),function ui(){return dn.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=o,f.value=u,f.attrs=c;const _=function To(){const n=dn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return hs(f,!0),f}function Bl(n,i,o,u){if(0===o)return-1;const c=i.length;for(let f=0;f<o;f++)i.push(u),n.blueprint.push(u),n.data.push(null);return c}function Id(n,i,o){Bs(i);try{const u=n.viewQuery;null!==u&&Fh(1,u,o);const c=n.template;null!==c&&Mg(n,i,c,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Sg(n,i),n.staticViewQueries&&Fh(2,n.viewQuery,o);const f=n.components;null!==f&&function Ag(n,i){for(let o=0;o<i.length;o++)ky(n,i[o])}(i,f)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{i[2]&=-5,H()}}function Dd(n,i,o,u){const c=i[2];if(128!=(128&c)){Bs(i);try{Oi(i),function Ct(n){return dn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Mg(n,i,o,2,u);const _=3==(3&c);if(_){const V=n.preOrderCheckHooks;null!==V&&bt(i,V,null)}else{const V=n.preOrderHooks;null!==V&&Gt(i,V,0,null),Tn(i,0)}if(function Ny(n){for(let i=Lu(n);null!==i;i=Ml(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],f=c[3];0==(512&c[2])&&ki(f,1),c[2]|=512}}}(i),function wv(n){for(let i=Lu(n);null!==i;i=Ml(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];Zi(u)&&Dd(c,u,c.template,u[8])}}(i),null!==n.contentQueries&&Sg(n,i),_){const V=n.contentCheckHooks;null!==V&&bt(i,V)}else{const V=n.contentHooks;null!==V&&Gt(i,V,1),Tn(i,1)}!function Fl(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)g(~c);else{const f=c,_=o[++u],C=o[++u];Zr(_,f),C(2,i[f])}}}finally{g(-1)}}(n,i);const C=n.components;null!==C&&function _v(n,i){for(let o=0;o<i.length;o++)Oy(n,i[o])}(i,C);const P=n.viewQuery;if(null!==P&&Fh(2,P,u),_){const V=n.viewCheckHooks;null!==V&&bt(i,V)}else{const V=n.viewHooks;null!==V&&Gt(i,V,2),Tn(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,ki(i[3],-1))}finally{H()}}}function Mg(n,i,o,u,c){const f=S(),_=2&u;try{g(-1),_&&i.length>22&&uy(n,i,22,!1),o(u,c)}finally{g(f)}}function Pc(n,i,o){if(js(i)){const c=i.directiveEnd;for(let f=i.directiveStart;f<c;f++){const _=n.data[f];_.contentQueries&&_.contentQueries(1,o[f],f)}}}function Lh(n,i,o){!Fs()||(function Td(n,i,o,u){const c=o.directiveStart,f=o.directiveEnd;n.firstCreatePass||Ra(o,i),ia(u,i);const _=o.initialInputs;for(let C=c;C<f;C++){const P=n.data[C],V=Rr(P);V&&Vg(i,o,P);const Q=Co(i,n,C,o);ia(Q,i),null!==_&&jg(0,C-c,Q,P,0,_),V&&(Jn(o.index,i)[8]=Q)}}(n,i,o,Ui(o,i)),128==(128&o.flags)&&function bd(n,i,o){const u=o.directiveStart,c=o.directiveEnd,f=o.index,_=function Hr(){return dn.lFrame.currentDirectiveIndex}();try{g(f);for(let C=u;C<c;C++){const P=n.data[C],V=i[C];ts(C),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&Ug(P,V)}}finally{g(-1),ts(_)}}(n,i,o))}function xg(n,i,o=Ui){const u=i.localNames;if(null!==u){let c=i.index+1;for(let f=0;f<u.length;f+=2){const _=u[f+1],C=-1===_?o(i,n):n[_];n[c++]=C}}}function Sy(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Yf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Yf(n,i,o,u,c,f,_,C,P,V){const Q=22+u,re=Q+c,Se=function Ay(n,i){const o=[];for(let u=0;u<i;u++)o.push(u<n?null:Wn);return o}(Q,re),Je="function"==typeof V?V():V;return Se[1]={type:n,blueprint:Se,template:o,queries:null,viewQuery:C,declTNode:i,data:Se.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:P,consts:Je,incompleteFirstPass:!1}}function Ry(n,i,o,u){const c=Uy(i);null===o?c.push(u):(c.push(o),n.firstCreatePass&&ip(n).push(u,c.length-1))}function My(n,i,o){for(let u in n)if(n.hasOwnProperty(u)){const c=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function Xf(n,i){const u=i.directiveEnd,c=n.data,f=i.attrs,_=[];let C=null,P=null;for(let V=i.directiveStart;V<u;V++){const Q=c[V],re=Q.inputs,Se=null===f||og(i)?null:Hg(re,f);_.push(Se),C=My(re,V,C),P=My(Q.outputs,V,P)}null!==C&&(C.hasOwnProperty("class")&&(i.flags|=16),C.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=_,i.inputs=C,i.outputs=P}function fa(n,i,o,u,c,f,_,C){const P=Ui(i,o);let Q,V=i.inputs;!C&&null!=V&&(Q=V[u])?(op(n,o,Q,u,c),Ci(i)&&Og(o,i.index)):3&i.type&&(u=function vv(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),c=null!=_?_(c,i.value||"",u):c,f.setProperty(P,u,c))}function Og(n,i){const o=Jn(i,n);16&o[2]||(o[2]|=32)}function Vl(n,i,o,u){let c=!1;if(Fs()){const f=function Cd(n,i,o){const u=n.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];Rh(o,_.selectors,!1)&&(c||(c=[]),Ho(Ra(o,i),n,_.type),Rr(_)?(Py(n,o),c.unshift(_)):c.push(_))}return c}(n,i,o),_=null===u?null:{"":-1};if(null!==f){c=!0,Jf(o,n.data.length,f.length);for(let Q=0;Q<f.length;Q++){const re=f[Q];re.providersResolver&&re.providersResolver(re)}let C=!1,P=!1,V=Bl(n,i,f.length,null);for(let Q=0;Q<f.length;Q++){const re=f[Q];o.mergedAttrs=po(o.mergedAttrs,re.hostAttrs),ep(n,o,i,V,re),Bg(V,re,_),null!==re.contentQueries&&(o.flags|=8),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(o.flags|=128);const Se=re.type.prototype;!C&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),C=!0),!P&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),P=!0),V++}Xf(n,o)}_&&function Ev(n,i,o){if(i){const u=n.localNames=[];for(let c=0;c<i.length;c+=2){const f=o[i[c+1]];if(null==f)throw new Xe(-301,!1);u.push(i[c],f)}}}(o,u,_)}return o.mergedAttrs=po(o.mergedAttrs,o.attrs),c}function rl(n,i,o,u,c,f){const _=f.hostBindings;if(_){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const P=~i.index;(function Fg(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(C)!=P&&C.push(P),C.push(u,c,_)}}function Ug(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Py(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Bg(n,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=n;Rr(i)&&(o[""]=n)}}function Jf(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}function ep(n,i,o,u,c){n.data[u]=c;const f=c.factory||(c.factory=_s(c.type)),_=new An(f,Rr(c),_d);n.blueprint[u]=_,o[u]=_,rl(n,i,0,u,Bl(n,o,c.hostVars,Wn),c)}function Vg(n,i,o){const u=Ui(i,n),c=Sy(o),f=n[10],_=np(n,Qf(n,c,null,o.onPush?32:16,u,i,f,f.createRenderer(u,o),null,null,null));n[i.index]=_}function Uu(n,i,o,u,c,f){const _=Ui(n,i);!function $g(n,i,o,u,c,f,_){if(null==f)n.removeAttribute(i,c,o);else{const C=null==_?Qe(f):_(f,u||"",c);n.setAttribute(i,c,C,o)}}(i[11],_,f,n.value,o,u,c)}function jg(n,i,o,u,c,f){const _=f[i];if(null!==_){const C=u.setInput;for(let P=0;P<_.length;){const V=_[P++],Q=_[P++],re=_[P++];null!==C?u.setInput(o,re,V,Q):o[Q]=re}}}function Hg(n,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;n.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,n[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function zg(n,i,o,u){return new Array(n,!0,!1,i,null,0,u,o,null,null)}function Oy(n,i){const o=Jn(i,n);if(Zi(o)){const u=o[1];48&o[2]?Dd(u,o,u.template,o[8]):o[5]>0&&tp(o)}}function tp(n){for(let u=Lu(n);null!==u;u=Ml(u))for(let c=10;c<u.length;c++){const f=u[c];if(Zi(f))if(512&f[2]){const _=f[1];Dd(_,f,_.template,f[8])}else f[5]>0&&tp(f)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=Jn(o[u],n);Zi(c)&&c[5]>0&&tp(c)}}function ky(n,i){const o=Jn(i,n),u=o[1];(function Iv(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(u,o),Id(u,o,o[8])}function np(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Gg(n){for(;n;){n[2]|=32;const i=_h(n);if(ms(n)&&!i)return n;n=i}return null}function rp(n,i,o,u=!0){const c=i[10];c.begin&&c.begin();try{Dd(n,i,n.template,o)}catch(_){throw u&&sp(i,_),_}finally{c.end&&c.end()}}function Fh(n,i,o){xr(0),i(n,o)}function Uy(n){return n[7]||(n[7]=[])}function ip(n){return n.cleanup||(n.cleanup=[])}function sp(n,i){const o=n[9],u=o?o.get(at,null):null;u&&u.handleError(i)}function op(n,i,o,u,c){for(let f=0;f<o.length;){const _=o[f++],C=o[f++],P=i[_],V=n.data[_];null!==V.setInput?V.setInput(P,c,u,C):P[C]=c}}function gu(n,i,o){const u=Si(i,n);!function Jp(n,i,o){n.setValue(i,o)}(n[11],u,o)}function Uh(n,i,o){let u=o?n.styles:null,c=o?n.classes:null,f=0;if(null!==i)for(let _=0;_<i.length;_++){const C=i[_];"number"==typeof C?f=C:1==f?c=xe(c,C):2==f&&(u=xe(u,C+": "+i[++_]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=c:n.classesWithoutHost=c}function ap(n,i,o,u,c=!1){for(;null!==o;){const f=i[o.index];if(null!==f&&u.push($r(f)),ii(f))for(let C=10;C<f.length;C++){const P=f[C],V=P[1].firstChild;null!==V&&ap(P[1],P,V,u)}const _=o.type;if(8&_)ap(n,i,o.child,u);else if(32&_){const C=yh(o,i);let P;for(;P=C();)u.push(P)}else if(16&_){const C=Nf(i,o);if(Array.isArray(C))u.push(...C);else{const P=_h(i[16]);ap(P[1],P,C,u,!0)}}o=c?o.projectionNext:o.next}return u}class Nc{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return ap(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(ii(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(Eh(i,u),ca(o,u))}this._attachedToViewContainer=!1}eg(this._lView[1],this._lView)}onDestroy(i){Ry(this._lView[1],this._lView,null,i)}markForCheck(){Gg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){rp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Tc(n,i){Cc(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Xe(902,!1);this._appRef=i}}class Dv extends Nc{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;rp(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class Bh extends Au{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Ye(i);return new Oc(o,this.ngModule)}}function Vy(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Tv{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){const c=this.injector.get(i,Fi,u);return c!==Fi||o===Fi?c:this.parentInjector.get(i,o,u)}}class Oc extends ch{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function md(n){return n.map(av).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Vy(this.componentDef.inputs)}get outputs(){return Vy(this.componentDef.outputs)}create(i,o,u,c){var f;let _=(c=c||this.ngModule)instanceof os?c:null===(f=c)||void 0===f?void 0:f.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const C=_?new Tv(i,_):i,P=C.get(xu,null);if(null===P)throw new Xe(407,!1);const V=C.get(_c,null),Q=P.createRenderer(null,this.componentDef),re=this.componentDef.selectors[0][0]||"div",Se=u?function Pg(n,i,o){return n.selectRootElement(i,o===nn.ShadowDom)}(Q,u,this.componentDef.encapsulation):Cf(P.createRenderer(null,this.componentDef),re,function Wg(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(re)),Je=this.componentDef.onPush?288:272,wt=Yf(0,null,null,1,0,null,null,null,null,null),Ft=Qf(null,wt,null,Je,null,null,P,Q,V,C,null);let sn,En;Bs(Ft);try{const tr=function qg(n,i,o,u,c,f){const _=o[1];o[22]=n;const P=Ul(_,22,2,"#host",null),V=P.mergedAttrs=i.hostAttrs;null!==V&&(Uh(P,V,!0),null!==n&&(jo(c,n,V),null!==P.classes&&ig(c,n,P.classes),null!==P.styles&&Ch(c,n,P.styles)));const Q=u.createRenderer(n,i),re=Qf(o,Sy(i),null,i.onPush?32:16,o[22],P,u,Q,f||null,null,null);return _.firstCreatePass&&(Ho(Ra(P,o),_,i.type),Py(_,P),Jf(P,o.length,1)),np(o,re),o[22]=re}(Se,this.componentDef,Ft,P,Q);if(Se)if(u)jo(Q,Se,["ng-version",Ko.full]);else{const{attrs:xt,classes:Vn}=function ay(n){const i=[],o=[];let u=1,c=2;for(;u<n.length;){let f=n[u];if("string"==typeof f)2===c?""!==f&&i.push(f,n[++u]):8===c&&o.push(f);else{if(!Za(c))break;c=f}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);xt&&jo(Q,Se,xt),Vn&&Vn.length>0&&ig(Q,Se,Vn.join(" "))}if(En=Io(wt,22),void 0!==o){const xt=En.projection=[];for(let Vn=0;Vn<this.ngContentSelectors.length;Vn++){const oi=o[Vn];xt.push(null!=oi?Array.from(oi):null)}}sn=function Cv(n,i,o,u){const c=o[1],f=function Lg(n,i,o){const u=qr();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),ep(n,u,i,Bl(n,i,1,null),o),Xf(n,u));const c=Co(i,n,u.directiveStart,u);ia(c,i);const f=Ui(u,i);return f&&ia(f,i),c}(c,o,i);if(n[8]=o[8]=f,null!==u)for(const C of u)C(f,i);if(i.contentQueries){const C=qr();i.contentQueries(1,f,C.directiveStart)}const _=qr();return!c.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(g(_.index),rl(o[1],_,0,_.directiveStart,_.directiveEnd,i),Ug(i,f)),f}(tr,this.componentDef,Ft,[Zg]),Id(wt,Ft,null)}finally{H()}return new Sd(this.componentType,sn,Ta(En,Ft),Ft,En)}}class Sd extends class od{}{constructor(i,o,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=o,this.hostView=this.changeDetectorRef=new Dv(c),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[i])){const f=this._rootLView;op(f[1],f,c,i,o),Og(f,this._tNode.index)}}get injector(){return new Tt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Zg(){const n=qr();tt(_t()[1],n)}function Vh(n){let i=function Bu(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;i;){let c;if(Rr(n))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Xe(903,!1);c=i.\u0275dir}if(c){if(o){u.push(c);const _=n;_.inputs=$h(n.inputs),_.declaredInputs=$h(n.declaredInputs),_.outputs=$h(n.outputs);const C=c.hostBindings;C&&Qg(n,C);const P=c.viewQuery,V=c.contentQueries;if(P&&Av(n,P),V&&Rv(n,V),De(n.inputs,c.inputs),De(n.declaredInputs,c.declaredInputs),De(n.outputs,c.outputs),Rr(c)&&c.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const C=f[_];C&&C.ngInherit&&C(n),C===Vh&&(o=!1)}}i=Object.getPrototypeOf(i)}!function Sv(n){let i=0,o=null;for(let u=n.length-1;u>=0;u--){const c=n[u];c.hostVars=i+=c.hostVars,c.hostAttrs=po(c.hostAttrs,o=po(o,c.hostAttrs))}}(u)}function $h(n){return n===Br?{}:n===jt?[]:n}function Av(n,i){const o=n.viewQuery;n.viewQuery=o?(u,c)=>{i(u,c),o(u,c)}:i}function Rv(n,i){const o=n.contentQueries;n.contentQueries=o?(u,c,f)=>{i(u,c,f),o(u,c,f)}:i}function Qg(n,i){const o=n.hostBindings;n.hostBindings=o?(u,c)=>{i(u,c),o(u,c)}:i}let Ad=null;function kc(){if(!Ad){const n=Kn.Symbol;if(n&&n.iterator)Ad=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Ad=u)}}}return Ad}function Rd(n){return!!Jg(n)&&(Array.isArray(n)||!(n instanceof Map)&&kc()in n)}function Jg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Qa(n,i,o){return n[i]=o}function xo(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function Lc(n,i,o,u){const c=_t();return xo(c,vn(),i)&&(Cn(),Uu(y(),c,n,i,o,u)),Lc}function $l(n,i,o,u){return xo(n,vn(),o)?i+Qe(o)+u:Wn}function Fc(n,i,o,u,c,f){const C=function il(n,i,o,u){const c=xo(n,i,o);return xo(n,i+1,u)||c}(n,function zt(){return dn.lFrame.bindingIndex}(),o,c);return xn(2),C?i+Qe(o)+u+Qe(c)+f:Wn}function Gh(n,i,o,u,c,f,_,C){const P=_t(),V=Cn(),Q=n+22,re=V.firstCreatePass?function Gy(n,i,o,u,c,f,_,C,P){const V=i.consts,Q=Ul(i,n,4,_||null,Ii(V,C));Vl(i,o,Q,Ii(V,P)),tt(i,Q);const re=Q.tViews=Yf(2,Q,u,c,f,i.directiveRegistry,i.pipeRegistry,null,i.schemas,V);return null!==i.queries&&(i.queries.template(i,Q),re.queries=i.queries.embeddedTView(Q)),Q}(Q,V,P,i,o,u,c,f,_):V.data[Q];hs(re,!1);const Se=P[11].createComment("");Ih(V,P,Se,re),ia(Se,P),np(P,P[Q]=zg(Se,P,Se,re)),es(re)&&Lh(V,P,re),null!=_&&xg(P,re,C)}function fp(n){return Gs(function he(){return dn.lFrame.contextLView}(),22+n)}function pp(n,i,o){const u=_t();return xo(u,vn(),i)&&fa(Cn(),y(),u,n,i,u[11],o,!1),pp}function jl(n,i,o,u,c){const _=c?"class":"style";op(n,o,i.inputs[_],_,u)}function gp(n,i,o,u){const c=_t(),f=Cn(),_=22+n,C=c[11],P=c[_]=Cf(C,i,function ce(){return dn.lFrame.currentNamespace}()),V=f.firstCreatePass?function nm(n,i,o,u,c,f,_){const C=i.consts,V=Ul(i,n,2,c,Ii(C,f));return Vl(i,o,V,Ii(C,_)),null!==V.attrs&&Uh(V,V.attrs,!1),null!==V.mergedAttrs&&Uh(V,V.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,V),V}(_,f,c,0,i,o,u):f.data[_];hs(V,!0);const Q=V.mergedAttrs;null!==Q&&jo(C,P,Q);const re=V.classes;null!==re&&ig(C,P,re);const Se=V.styles;return null!==Se&&Ch(C,P,Se),64!=(64&V.flags)&&Ih(f,c,P,V),0===function Do(){return dn.lFrame.elementDepthCount}()&&ia(P,c),function ua(){dn.lFrame.elementDepthCount++}(),es(V)&&(Lh(f,c,V),Pc(f,V,c)),null!==u&&xg(c,V),gp}function mp(){let n=qr();B()?L():(n=n.parent,hs(n,!1));const i=n;!function Xs(){dn.lFrame.elementDepthCount--}();const o=Cn();return o.firstCreatePass&&(tt(o,n),js(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Hi(n){return 0!=(16&n.flags)}(i)&&jl(o,i,_t(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function ho(n){return 0!=(32&n.flags)}(i)&&jl(o,i,_t(),i.stylesWithoutHost,!1),mp}function rm(n,i,o,u){return gp(n,i,o,u),mp(),rm}function yp(n,i,o){const u=_t(),c=Cn(),f=n+22,_=c.firstCreatePass?function Ky(n,i,o,u,c){const f=i.consts,_=Ii(f,u),C=Ul(i,n,8,"ng-container",_);return null!==_&&Uh(C,_,!0),Vl(i,o,C,Ii(f,c)),null!==i.queries&&i.queries.elementStart(i,C),C}(f,c,u,i,o):c.data[f];hs(_,!0);const C=u[f]=u[11].createComment("");return Ih(c,u,C,_),ia(C,u),es(_)&&(Lh(c,u,_),Pc(c,_,u)),null!=o&&xg(u,_),yp}function Wh(){let n=qr();const i=Cn();return B()?L():(n=n.parent,hs(n,!1)),i.firstCreatePass&&(tt(i,n),js(n)&&i.queries.elementEnd(n)),Wh}function Zy(){return _t()}function im(n){return!!n&&"function"==typeof n.then}function Qy(n){return!!n&&"function"==typeof n.subscribe}const sm=Qy;function _p(n,i,o,u){const c=_t(),f=Cn(),_=qr();return function om(n,i,o,u,c,f,_,C){const P=es(u),Q=n.firstCreatePass&&ip(n),re=i[8],Se=Uy(i);let Je=!0;if(3&u.type||C){const sn=Ui(u,i),En=C?C(sn):sn,tr=Se.length,xt=C?oi=>C($r(oi[u.index])):u.index;let Vn=null;if(!C&&P&&(Vn=function Yy(n,i,o,u){const c=n.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===o&&c[f+1]===u){const C=i[7],P=c[f+2];return C.length>P?C[P]:null}"string"==typeof _&&(f+=2)}return null}(n,i,c,u.index)),null!==Vn)(Vn.__ngLastListenerFn__||Vn).__ngNextListenerFn__=f,Vn.__ngLastListenerFn__=f,Je=!1;else{f=Kh(u,i,re,f,!1);const oi=o.listen(En,c,f);Se.push(f,oi),Q&&Q.push(c,xt,tr,tr+1)}}else f=Kh(u,i,re,f,!1);const wt=u.outputs;let Ft;if(Je&&null!==wt&&(Ft=wt[c])){const sn=Ft.length;if(sn)for(let En=0;En<sn;En+=2){const $s=i[Ft[En]][Ft[En+1]].subscribe(f),cf=Se.length;Se.push(f,$s),Q&&Q.push(c,u.index,cf,-(cf+1))}}}(f,c,c[11],_,n,i,0,u),_p}function am(n,i,o,u){try{return!1!==o(u)}catch(c){return sp(n,c),!1}}function Kh(n,i,o,u,c){return function f(_){if(_===Function)return u;Gg(2&n.flags?Jn(n.index,i):i);let P=am(i,0,u,_),V=f.__ngNextListenerFn__;for(;V;)P=am(i,0,V,_)&&P,V=V.__ngNextListenerFn__;return c&&!1===P&&(_.preventDefault(),_.returnValue=!1),P}}function Xr(n=1){return function N(n){return(dn.lFrame.contextLView=function K(n,i){for(;n>0;)i=i[15],n--;return i}(n,dn.lFrame.contextLView))[8]}(n)}function Xy(n,i){let o=null;const u=function sy(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(0==(1&o))return i[o+1]}return null}(n);for(let c=0;c<i.length;c++){const f=i[c];if("*"!==f){if(null===u?Rh(n,f,!0):oy(u,f))return c}else o=c}return o}function um(n){const i=_t()[16][6];if(!i.projection){const u=i.projection=I(n?n.length:1,null),c=u.slice();let f=i.child;for(;null!==f;){const _=n?Xy(f,n):0;null!==_&&(c[_]?c[_].projectionNext=f:u[_]=f,c[_]=f),f=f.next}}}function kd(n,i=0,o){const u=_t(),c=Cn(),f=Ul(c,22+n,16,null,o||null);null===f.projection&&(f.projection=i),L(),64!=(64&f.flags)&&function ry(n,i,o){bh(i[11],0,i,o,tg(n,o,i),pd(o.parent||i[6],o,i))}(c,u,f)}function Ep(n,i,o){return Ki(n,"",i,"",o),Ep}function Ki(n,i,o,u,c){const f=_t(),_=$l(f,i,o,u);return _!==Wn&&fa(Cn(),y(),f,n,_,f[11],c,!1),Ki}function as(n,i,o,u,c){const f=n[o+1],_=null===i;let C=u?oa(f):Fu(f),P=!1;for(;0!==C&&(!1===P||_);){const Q=n[C+1];gE(n[C],i)&&(P=!0,n[C+1]=u?Ph(Q):zf(Q)),C=u?oa(Q):Fu(Q)}P&&(n[o+1]=u?zf(f):Ph(f))}function gE(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ot(n,i)>=0}const No={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Vs(n){return n.substring(No.key,No.keyEnd)}function r_(n,i){const o=No.textEnd;return o===i?-1:(i=No.keyEnd=function Lv(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,No.key=i,o),Ld(n,i,o))}function Ld(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function hm(n,i,o){return _u(n,i,o,!1),hm}function Xa(n,i){return _u(n,i,null,!0),Xa}function Ua(n,i){for(let o=function kv(n){return function o_(n){No.key=0,No.keyEnd=0,No.value=0,No.valueEnd=0,No.textEnd=n.length}(n),r_(n,Ld(n,0,No.textEnd))}(i);o>=0;o=r_(i,o))oe(n,Vs(i),!0)}function _u(n,i,o,u){const c=_t(),f=Cn(),_=xn(2);f.firstUpdatePass&&pm(f,n,_,u),i!==Wn&&xo(c,_,i)&&l_(f,f.data[S()],c,c[11],n,c[_+1]=function c_(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=ge(M(n)))),n}(i,o),u,_)}function fm(n,i){return i>=n.expandoStartIndex}function pm(n,i,o,u){const c=n.data;if(null===c[o+1]){const f=c[S()],_=fm(n,o);Hl(f,u)&&null===i&&!_&&(i=!1),i=function Dp(n,i,o,u){const c=function Mr(n){const i=dn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let f=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(o=Fd(o=$c(null,n,i,o,u),i.attrs,u),f=null);else{const _=i.directiveStylingLast;if(-1===_||n[_]!==c)if(o=$c(c,n,i,o,u),null===f){let P=function Uv(n,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==Fu(u))return n[oa(u)]}(n,i,u);void 0!==P&&Array.isArray(P)&&(P=$c(null,n,i,P[1],u),P=Fd(P,i.attrs,u),function Vc(n,i,o,u){n[oa(o?i.classBindings:i.styleBindings)]=u}(n,i,u,P))}else f=function Tp(n,i,o){let u;const c=i.directiveEnd;for(let f=1+i.directiveStylingLast;f<c;f++)u=Fd(u,n[f].hostAttrs,o);return Fd(u,i.attrs,o)}(n,i,u)}return void 0!==f&&(u?i.residualClasses=f:i.residualStyles=f),o}(c,f,i,u),function Nv(n,i,o,u,c,f){let _=f?i.classBindings:i.styleBindings,C=oa(_),P=Fu(_);n[u]=o;let Q,V=!1;if(Array.isArray(o)){const re=o;Q=re[1],(null===Q||Ot(re,Q)>0)&&(V=!0)}else Q=o;if(c)if(0!==P){const Se=oa(n[C+1]);n[u+1]=tl(Se,C),0!==Se&&(n[Se+1]=Gf(n[Se+1],u)),n[C+1]=function Hf(n,i){return 131071&n|i<<17}(n[C+1],u)}else n[u+1]=tl(C,0),0!==C&&(n[C+1]=Gf(n[C+1],u)),C=u;else n[u+1]=tl(P,0),0===C?C=u:n[P+1]=Gf(n[P+1],u),P=u;V&&(n[u+1]=zf(n[u+1])),as(n,Q,u,!0),as(n,Q,u,!1),function Ov(n,i,o,u,c){const f=c?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof i&&Ot(f,i)>=0&&(o[u+1]=Ph(o[u+1]))}(i,Q,n,u,f),_=tl(C,P),f?i.classBindings=_:i.styleBindings=_}(c,f,i,o,_,u)}}function $c(n,i,o,u,c){let f=null;const _=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<_&&(f=i[C],u=Fd(u,f.hostAttrs,c),f!==n);)C++;return null!==n&&(o.directiveStylingLast=C),u}function Fd(n,i,o){const u=o?1:2;let c=-1;if(null!==i)for(let f=0;f<i.length;f++){const _=i[f];"number"==typeof _?c=_:c===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),oe(n,_,!!o||i[++f]))}return void 0===n?null:n}function l_(n,i,o,u,c,f,_,C){if(!(3&i.type))return;const P=n.data,V=P[C+1];Ud(function wy(n){return 1==(1&n)}(V)?bp(P,i,o,c,Fu(V),_):void 0)||(Ud(f)||function jf(n){return 2==(2&n)}(V)&&(f=bp(P,null,o,c,C,_)),function rg(n,i,o,u,c){if(i)c?n.addClass(o,u):n.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:ku.DashCase;null==c?n.removeStyle(o,u,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=ku.Important),n.setStyle(o,u,c,f))}}(u,_,Si(S(),o),c,f))}function bp(n,i,o,u,c,f){const _=null===i;let C;for(;c>0;){const P=n[c],V=Array.isArray(P),Q=V?P[1]:P,re=null===Q;let Se=o[c+1];Se===Wn&&(Se=re?jt:void 0);let Je=re?qe(Se,u):Q===u?Se:void 0;if(V&&!Ud(Je)&&(Je=qe(P,u)),Ud(Je)&&(C=Je,_))return C;const wt=n[c+1];c=_?oa(wt):Fu(wt)}if(null!==i){let P=f?i.residualClasses:i.residualStyles;null!=P&&(C=qe(P,u))}return C}function Ud(n){return void 0!==n}function Hl(n,i){return 0!=(n.flags&(i?16:32))}function mm(n,i=""){const o=_t(),u=Cn(),c=n+22,f=u.firstCreatePass?Ul(u,c,1,i,null):u.data[c],_=o[c]=function hu(n,i){return n.createText(i)}(o[11],i);Ih(u,o,_,f),hs(f,!1)}function Cp(n){return Bd("",n,""),Cp}function Bd(n,i,o){const u=_t(),c=$l(u,n,i,o);return c!==Wn&&gu(u,S(),c),Bd}function jc(n,i,o,u,c){const f=_t(),_=Fc(f,n,i,o,u,c);return _!==Wn&&gu(f,S(),_),jc}function _m(n,i,o){!function vu(n,i,o,u){const c=Cn(),f=xn(2);c.firstUpdatePass&&pm(c,null,f,u);const _=_t();if(o!==Wn&&xo(_,f,o)){const C=c.data[S()];if(Hl(C,u)&&!fm(c,f)){let P=u?C.classesWithoutHost:C.stylesWithoutHost;null!==P&&(o=xe(P,o||"")),jl(c,C,_,o,u)}else!function Bv(n,i,o,u,c,f,_,C){c===Wn&&(c=jt);let P=0,V=0,Q=0<c.length?c[0]:null,re=0<f.length?f[0]:null;for(;null!==Q||null!==re;){const Se=P<c.length?c[P+1]:void 0,Je=V<f.length?f[V+1]:void 0;let Ft,wt=null;Q===re?(P+=2,V+=2,Se!==Je&&(wt=re,Ft=Je)):null===re||null!==Q&&Q<re?(P+=2,wt=Q):(V+=2,wt=re,Ft=Je),null!==wt&&l_(n,i,o,u,wt,Ft,_,C),Q=P<c.length?c[P]:null,re=V<f.length?f[V]:null}}(c,C,_,_[11],_[f+1],_[f+1]=function gm(n,i,o){if(null==o||""===o)return jt;const u=[],c=M(o);if(Array.isArray(c))for(let f=0;f<c.length;f++)n(u,c[f],!0);else if("object"==typeof c)for(const f in c)c.hasOwnProperty(f)&&n(u,f,c[f]);else"string"==typeof c&&i(u,c);return u}(n,i,o),u,f)}}(oe,Ua,$l(_t(),n,i,o),!0)}function jd(n,i,o){const u=_t();return xo(u,vn(),i)&&fa(Cn(),y(),u,n,i,u[11],o,!0),jd}const Hd=void 0;var Wv=["en",[["a","p"],["AM","PM"],Hd],[["AM","PM"],Hd,Hd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hd,"{1} 'at' {0}",Hd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function EE(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ef={};function ol(n){const i=function Kv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=al(i);if(o)return o;const u=i.split("-")[0];if(o=al(u),o)return o;if("en"===u)return Wv;throw new Xe(701,!1)}function zd(n){return ol(n)[Bn.PluralCase]}function al(n){return n in ef||(ef[n]=Kn.ng&&Kn.ng.common&&Kn.ng.common.locales&&Kn.ng.common.locales[n]),ef[n]}var Bn=(()=>((Bn=Bn||{})[Bn.LocaleId=0]="LocaleId",Bn[Bn.DayPeriodsFormat=1]="DayPeriodsFormat",Bn[Bn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Bn[Bn.DaysFormat=3]="DaysFormat",Bn[Bn.DaysStandalone=4]="DaysStandalone",Bn[Bn.MonthsFormat=5]="MonthsFormat",Bn[Bn.MonthsStandalone=6]="MonthsStandalone",Bn[Bn.Eras=7]="Eras",Bn[Bn.FirstDayOfWeek=8]="FirstDayOfWeek",Bn[Bn.WeekendRange=9]="WeekendRange",Bn[Bn.DateFormat=10]="DateFormat",Bn[Bn.TimeFormat=11]="TimeFormat",Bn[Bn.DateTimeFormat=12]="DateTimeFormat",Bn[Bn.NumberSymbols=13]="NumberSymbols",Bn[Bn.NumberFormats=14]="NumberFormats",Bn[Bn.CurrencyCode=15]="CurrencyCode",Bn[Bn.CurrencySymbol=16]="CurrencySymbol",Bn[Bn.CurrencyName=17]="CurrencyName",Bn[Bn.Currencies=18]="Currencies",Bn[Bn.Directionality=19]="Directionality",Bn[Bn.PluralCase=20]="PluralCase",Bn[Bn.ExtraData=21]="ExtraData",Bn))();const Gd="en-US";let m_=Gd;function Om(n,i,o,u,c){if(n=ve(n),Array.isArray(n))for(let f=0;f<n.length;f++)Om(n[f],i,o,u,c);else{const f=Cn(),_=_t();let C=lu(n)?n:ve(n.provide),P=uh(n);const V=qr(),Q=1048575&V.providerIndexes,re=V.directiveStart,Se=V.providerIndexes>>20;if(lu(n)||!n.multi){const Je=new An(P,c,_d),wt=Lm(C,i,c?Q:Q+Se,re);-1===wt?(Ho(Ra(V,_),f,C),Vp(f,n,i.length),i.push(C),V.directiveStart++,V.directiveEnd++,c&&(V.providerIndexes+=1048576),o.push(Je),_.push(Je)):(o[wt]=Je,_[wt]=Je)}else{const Je=Lm(C,i,Q+Se,re),wt=Lm(C,i,Q,Q+Se),Ft=Je>=0&&o[Je],sn=wt>=0&&o[wt];if(c&&!sn||!c&&!Ft){Ho(Ra(V,_),f,C);const En=function s(n,i,o,u,c){const f=new An(n,o,_d);return f.multi=[],f.index=i,f.componentProviders=0,km(f,c,u&&!o),f}(c?e:r,o.length,c,u,P);!c&&sn&&(o[wt].providerFactory=En),Vp(f,n,i.length,0),i.push(C),V.directiveStart++,V.directiveEnd++,c&&(V.providerIndexes+=1048576),o.push(En),_.push(En)}else Vp(f,n,Je>-1?Je:wt,km(o[c?wt:Je],P,!c&&u));!c&&u&&sn&&o[wt].componentProviders++}}}function Vp(n,i,o,u){const c=lu(i),f=function pc(n){return!!n.useClass}(i);if(c||f){const P=(f?ve(i.useClass):i).prototype.ngOnDestroy;if(P){const V=n.destroyHooks||(n.destroyHooks=[]);if(!c&&i.multi){const Q=V.indexOf(o);-1===Q?V.push(o,[u,P]):V[Q+1].push(u,P)}else V.push(o,P)}}}function km(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Lm(n,i,o,u){for(let c=o;c<u;c++)if(i[c]===n)return c;return-1}function r(n,i,o,u){return t(this.multi,[])}function e(n,i,o,u){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,C=Co(o,o[1],this.providerFactory.index,u);f=C.slice(0,_),t(c,f);for(let P=_;P<C.length;P++)f.push(C[P])}else f=[],t(c,f);return f}function t(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function a(n,i=[]){return o=>{o.providersResolver=(u,c)=>function $_(n,i,o){const u=Cn();if(u.firstCreatePass){const c=Rr(n);Om(o,u.data,u.blueprint,c,!0),Om(i,u.data,u.blueprint,c,!1)}}(u,c?c(n):n,i)}}class l{}class p{}function b(n,i){return new $(n,i??null)}class $ extends l{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Bh(this);const u=In(i);this._bootstrapComponents=Ou(u.bootstrap),this._r3Injector=kl(i,o,[{provide:l,useValue:this},{provide:Au,useValue:this.componentFactoryResolver}],ge(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Y extends p{constructor(i){super(),this.moduleType=i}create(i){return new $(this.moduleType,i)}}class me extends l{constructor(i,o,u){super(),this.componentFactoryResolver=new Bh(this),this.instance=null;const c=new ah([...i,{provide:l,useValue:this},{provide:Au,useValue:this.componentFactoryResolver}],o||sd(),u,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Ze(n,i,o=null){return new me(n,i,o).injector}let ht=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=fc(0,o.type),c=u.length>0?Ze([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=pt({token:n,providedIn:"environment",factory:()=>new n(di(os))}),n})();function kt(n){n.getStandaloneInjector=i=>i.get(ht).getOrCreateStandaloneInjector(n)}function AE(n,i,o){const u=dt()+n,c=_t();return c[u]===Wn?Qa(c,u,o?i.call(o):i()):function jh(n,i){return n[i]}(c,u)}function RE(n,i,o,u){return xE(_t(),dt(),n,i,o,u)}function ME(n,i,o,u){return function kE(n,i,o,u,c,f){let _=i+o,C=!1;for(let P=0;P<c.length;P++)xo(n,_++,c[P])&&(C=!0);return C?Qa(n,_,u.apply(f,c)):Fm(n,_)}(_t(),dt(),n,i,o,u)}function Fm(n,i){const o=n[i];return o===Wn?void 0:o}function xE(n,i,o,u,c,f){const _=i+o;return xo(n,_,c)?Qa(n,_+1,f?u.call(f,c):u(c)):Fm(n,_+1)}function LE(n,i){const o=Cn();let u;const c=n+22;o.firstCreatePass?(u=function aI(n,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(n===u.name)return u}}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const f=u.factory||(u.factory=_s(u.type)),_=Ur(_d);try{const C=Nn(!1),P=f();return Nn(C),function Wy(n,i,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=u}(o,_t(),c,P),P}finally{Ur(_)}}function FE(n,i,o){const u=n+22,c=_t(),f=Gs(c,u);return function Um(n,i){return n[1].data[i].pure}(c,u)?xE(c,dt(),i,f.transform,o,f):f.transform(o)}function v0(n){return i=>{setTimeout(n,void 0,i)}}const Yl=class hI extends w.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let c=i,f=o||(()=>null),_=u;if(i&&"object"==typeof i){var C,P,V;const re=i;c=null===(C=re.next)||void 0===C?void 0:C.bind(re),f=null===(P=re.error)||void 0===P?void 0:P.bind(re),_=null===(V=re.complete)||void 0===V?void 0:V.bind(re)}this.__isAsync&&(f=v0(f),c&&(c=v0(c)),_&&(_=v0(_)));const Q=super.subscribe({next:c,error:f,complete:_});return i instanceof W.w0&&i.add(Q),Q}};function fI(){return this._results[kc()]()}class j_{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=kc(),u=j_.prototype;u[o]||(u[o]=fI)}get changes(){return this._changes||(this._changes=new Yl)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=Nt(i);(this._changesDetected=!function Wi(n,i,o){if(n.length!==i.length)return!1;for(let u=0;u<n.length;u++){let c=n[u],f=i[u];if(o&&(c=o(c),f=o(f)),f!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Bm=(()=>{class n{}return n.__NG_ELEMENT_ID__=mI,n})();const pI=Bm,gI=class extends pI{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i,o){const u=this._declarationTContainer.tViews,c=Qf(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(c[19]=_.createEmbeddedView(u)),Id(u,c,i),new Nc(c)}};function mI(){return H_(qr(),_t())}function H_(n,i){return 4&n.type?new gI(i,n,Ta(n,i)):null}let z_=(()=>{class n{}return n.__NG_ELEMENT_ID__=yI,n})();function yI(){return VE(qr(),_t())}const _I=z_,UE=class extends _I{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Ta(this._hostTNode,this._hostLView)}get injector(){return new Tt(this._hostTNode,this._hostLView)}get parentInjector(){const i=rs(this._hostTNode,this._hostLView);if(eo(i)){const o=Xt(i,this._hostLView),u=Jo(i);return new Tt(o[1].data[u+8],o)}return new Tt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=BE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){let c,f;"number"==typeof u?c=u:null!=u&&(c=u.index,f=u.injector);const _=i.createEmbeddedView(o||{},f);return this.insert(_,c),_}createComponent(i,o,u,c,f){const _=i&&!function mr(n){return"function"==typeof n}(i);let C;if(_)C=o;else{const re=o||{};C=re.index,u=re.injector,c=re.projectableNodes,f=re.environmentInjector||re.ngModuleRef}const P=_?i:new Oc(Ye(i)),V=u||this.parentInjector;if(!f&&null==P.ngModule){const Se=(_?V:this.parentInjector).get(os,null);Se&&(f=Se)}const Q=P.create(V,c,void 0,f);return this.insert(Q.hostView,C),Q}insert(i,o){const u=i._lView,c=u[1];if(function pi(n){return ii(n[3])}(u)){const Q=this.indexOf(i);if(-1!==Q)this.detach(Q);else{const re=u[3],Se=new UE(re,re[6],re[3]);Se.detach(Se.indexOf(i))}}const f=this._adjustIndex(o),_=this._lContainer;!function vh(n,i,o,u){const c=10+u,f=o.length;u>0&&(o[c-1][4]=i),u<f-10?(i[4]=o[c],Ha(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const _=i[17];null!==_&&o!==_&&function Xm(n,i){const o=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===o?n[9]=[i]:o.push(i)}(_,i);const C=i[19];null!==C&&C.insertView(n),i[2]|=64}(c,u,_,f);const C=Dh(f,_),P=u[11],V=Mf(P,_[7]);return null!==V&&function Dc(n,i,o,u,c,f){u[0]=c,u[6]=i,Cc(n,u,o,1,c,f)}(c,_[6],P,u,V,C),i.attachToViewContainerRef(),Ha(E0(_),f,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=BE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=Eh(this._lContainer,o);u&&(ca(E0(this._lContainer),o),eg(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=Eh(this._lContainer,o);return u&&null!=ca(E0(this._lContainer),o)?new Nc(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function BE(n){return n[8]}function E0(n){return n[8]||(n[8]=[])}function VE(n,i){let o;const u=i[n.index];if(ii(u))o=u;else{let c;if(8&n.type)c=$r(u);else{const f=i[11];c=f.createComment("");const _=Ui(n,i);fu(f,Mf(f,_),c,function sv(n,i){return n.nextSibling(i)}(f,_),!1)}i[n.index]=o=zg(u,i,c,n),np(i,o)}return new UE(o,n,i)}class w0{constructor(i){this.queryList=i,this.matches=null}clone(){return new w0(this.queryList)}setDirty(){this.queryList.setDirty()}}class I0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let f=0;f<u;f++){const _=o.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new I0(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==ZE(i,o).matches&&this.queries[o].setDirty()}}class $E{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class D0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(i,c);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new D0(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class T0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new T0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(i,o,wI(o,f)),this.matchTNodeWithReadOption(i,o,gi(o,i,f,!1,!1))}else u===Bm?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,gi(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Qu||c===z_||c===Bm&&4&o.type)this.addMatch(o.index,-2);else{const f=gi(o,i,c,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function wI(n,i){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function DI(n,i,o,u){return-1===o?function II(n,i){return 11&n.type?Ta(n,i):4&n.type?H_(n,i):null}(i,n):-2===o?function TI(n,i,o){return o===Qu?Ta(i,n):o===Bm?H_(i,n):o===z_?VE(i,n):void 0}(n,i,u):Co(n,n[1],o,i)}function jE(n,i,o,u){const c=i[19].queries[u];if(null===c.matches){const f=n.data,_=o.matches,C=[];for(let P=0;P<_.length;P+=2){const V=_[P];C.push(V<0?null:DI(i,f[V],_[P+1],o.metadata.read))}c.matches=C}return c.matches}function b0(n,i,o,u){const c=n.queries.getByIndex(o),f=c.matches;if(null!==f){const _=jE(n,i,c,o);for(let C=0;C<f.length;C+=2){const P=f[C];if(P>0)u.push(_[C/2]);else{const V=f[C+1],Q=i[-P];for(let re=10;re<Q.length;re++){const Se=Q[re];Se[17]===Se[3]&&b0(Se[1],Se,V,u)}if(null!==Q[9]){const re=Q[9];for(let Se=0;Se<re.length;Se++){const Je=re[Se];b0(Je[1],Je,V,u)}}}}}return u}function HE(n){const i=_t(),o=Cn(),u=Us();xr(u+1);const c=ZE(o,u);if(n.dirty&&function Sa(n){return 4==(4&n[2])}(i)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{const f=c.crossesNgTemplate?b0(o,i,u,[]):jE(o,i,c,u);n.reset(f,Yu),n.notifyOnChanges()}return!0}return!1}function zE(n,i,o){const u=Cn();u.firstCreatePass&&(qE(u,new $E(n,i,o),-1),2==(2&i)&&(u.staticViewQueries=!0)),KE(u,_t(),i)}function GE(n,i,o,u){const c=Cn();if(c.firstCreatePass){const f=qr();qE(c,new $E(i,o,u),f.index),function CI(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(c,n),2==(2&o)&&(c.staticContentQueries=!0)}KE(c,_t(),o)}function WE(){return function bI(n,i){return n[19].queries[i].queryList}(_t(),Us())}function KE(n,i,o){const u=new j_(4==(4&o));Ry(n,i,u,u.destroy),null===i[19]&&(i[19]=new I0),i[19].queries.push(new w0(u))}function qE(n,i,o){null===n.queries&&(n.queries=new D0),n.queries.track(new T0(i,o))}function ZE(n,i){return n.queries.getByIndex(i)}function QE(n,i){return H_(n,i)}const WI=Ea("Input",n=>({bindingPropertyName:n})),KI=Ea("Output",n=>({bindingPropertyName:n}));function W_(...n){}const gw=new mi("Application Initializer");let K_=(()=>{class n{constructor(o){this.appInits=o,this.resolve=W_,this.reject=W_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(im(f))o.push(f);else if(sm(f)){const _=new Promise((C,P)=>{f.subscribe({complete:C,error:P})});o.push(_)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(di(gw,8))},n.\u0275prov=pt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mw=new mi("AppId",{providedIn:"root",factory:function yw(){return`${M0()}${M0()}${M0()}`}});function M0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _w=new mi("Platform Initializer"),qI=new mi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vw=new mi("appBootstrapListener"),ZI=new mi("AnimationModuleType");let QI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=pt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const q_=new mi("LocaleId",{providedIn:"root",factory:()=>ru(q_,Ut.Optional|Ut.SkipSelf)||function YI(){return typeof $localize<"u"&&$localize.locale||Gd}()}),XI=new mi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class JI{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let eD=(()=>{class n{compileModuleSync(o){return new Y(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),f=Ou(In(o).declarations).reduce((_,C)=>{const P=Ye(C);return P&&_.push(new Oc(P)),_},[]);return new JI(u,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=pt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rD=(()=>Promise.resolve(0))();function x0(n){typeof Zone>"u"?rD.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class $u{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yl(!1),this.onMicrotaskEmpty=new Yl(!1),this.onStable=new Yl(!1),this.onError=new Yl(!1),typeof Zone>"u")throw new Xe(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function iD(){let n=Kn.requestAnimationFrame,i=Kn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function aD(n){const i=()=>{!function oD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Kn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,N0(n),n.isCheckStableRunning=!0,P0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),N0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,f,_,C)=>{try{return Iw(n),o.invokeTask(c,f,_,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&i(),Dw(n)}},onInvoke:(o,u,c,f,_,C,P)=>{try{return Iw(n),o.invoke(c,f,_,C,P)}finally{n.shouldCoalesceRunChangeDetection&&i(),Dw(n)}},onHasTask:(o,u,c,f)=>{o.hasTask(c,f),u===c&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,N0(n),P0(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,c,f)=>(o.handleError(c,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$u.isInAngularZone())throw new Xe(909,!1)}static assertNotInAngularZone(){if($u.isInAngularZone())throw new Xe(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,i,sD,W_,W_);try{return f.runTask(_,o,u)}finally{f.cancelTask(_)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const sD={};function P0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function N0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Iw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Dw(n){n._nesting--,P0(n)}class uD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yl,this.onMicrotaskEmpty=new Yl,this.onStable=new Yl,this.onError=new Yl}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}const Tw=new mi(""),bw=new mi("");let O0,lD=(()=>{class n{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,O0||(function cD(n){O0=n}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$u.assertNotInAngularZone(),x0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())x0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}}return n.\u0275fac=function(o){return new(o||n)(di($u),di(Cw),di(bw))},n.\u0275prov=pt({token:n,factory:n.\u0275fac}),n})(),Cw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){var c,f;return null!==(c=null===(f=O0)||void 0===f?void 0:f.findTestabilityInTree(this,o,u))&&void 0!==c?c:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=pt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Kd=null;const Sw=new mi("AllowMultipleToken"),k0=new mi("PlatformDestroyListeners");class fD{constructor(i,o){this.name=i,this.token=o}}function Rw(n,i,o=[]){const u=`Platform: ${i}`,c=new mi(u);return(f=[])=>{let _=L0();if(!_||_.injector.get(Sw,!1)){const C=[...o,...f,{provide:c,useValue:!0}];n?n(C):function pD(n){if(Kd&&!Kd.get(Sw,!1))throw new Xe(400,!1);Kd=n;const i=n.get(xw);(function Aw(n){const i=n.get(_w,null);i&&i.forEach(o=>o())})(n)}(function Mw(n=[],i){return pu.create({name:i,providers:[{provide:gc,useValue:"platform"},{provide:k0,useValue:new Set([()=>Kd=null])},...n]})}(C,u))}return function mD(n){const i=L0();if(!i)throw new Xe(401,!1);return i}()}}function L0(){var n,i;return null!==(n=null===(i=Kd)||void 0===i?void 0:i.get(xw))&&void 0!==n?n:null}let xw=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function Nw(n,i){let o;return o="noop"===n?new uD:("zone.js"===n?void 0:n)||new $u(i),o}(u?.ngZone,function Pw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),f=[{provide:$u,useValue:c}];return c.run(()=>{const _=pu.create({providers:f,parent:this.injector,name:o.moduleType.name}),C=o.create(_),P=C.injector.get(at,null);if(!P)throw new Xe(402,!1);return c.runOutsideAngular(()=>{const V=c.onError.subscribe({next:Q=>{P.handleError(Q)}});C.onDestroy(()=>{Q_(this._modules,C),V.unsubscribe()})}),function Ow(n,i,o){try{const u=o();return im(u)?u.catch(c=>{throw i.runOutsideAngular(()=>n.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>n.handleError(u)),u}}(P,c,()=>{const V=C.injector.get(K_);return V.runInitializers(),V.donePromise.then(()=>(function y_(n){Rn(n,"Expected localeId to be defined"),"string"==typeof n&&(m_=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(q_,Gd)||Gd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,u=[]){const c=kw({},u);return function dD(n,i,o){const u=new Y(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(o){const u=o.injector.get(Z_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Xe(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(k0,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(di(pu))},n.\u0275prov=pt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function kw(n,i){return Array.isArray(i)?i.reduce(kw,n):{...n,...i}}let Z_=(()=>{class n{constructor(o,u,c){this._zone=o,this._injector=u,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new G.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),_=new G.y(C=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{$u.assertNotInAngularZone(),x0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{$u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{P.unsubscribe(),V.unsubscribe()}});this.isStable=(0,fe.T)(f,_.pipe((0,pe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const c=o instanceof ch;if(!this._injector.get(K_).done)throw!c&&ln(o),new Xe(405,false);let _;_=c?o:this._injector.get(Au).resolveComponentFactory(o),this.componentTypes.push(_.componentType);const C=function hD(n){return n.isBoundToModule}(_)?void 0:this._injector.get(l),V=_.create(pu.NULL,[],u||_.selector,C),Q=V.location.nativeElement,re=V.injector.get(Tw,null);return re?.registerApplication(Q),V.onDestroy(()=>{this.detachView(V.hostView),Q_(this.components,V),re?.unregisterApplication(Q)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new Xe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Q_(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(vw,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Q_(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Xe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(di($u),di(os),di(at))},n.\u0275prov=pt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Q_(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}let Fw=!0,Uw=!1;function _D(){return Uw=!0,Fw}function vD(){if(Uw)throw new Error("Cannot enable prod mode after platform setup.");Fw=!1}let ED=(()=>{class n{}return n.__NG_ELEMENT_ID__=wD,n})();function wD(n){return function ID(n,i,o){if(Ci(n)&&!o){const u=Jn(n.index,i);return new Nc(u,u)}return 47&n.type?new Nc(i[16],i):null}(qr(),_t(),16==(16&n))}class jw{constructor(){}supports(i){return Rd(i)}create(i){return new AD(i)}}const SD=(n,i)=>i;class AD{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||SD}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,f=null;for(;o||u;){const _=!u||o&&o.currentIndex<zw(u,c,f)?o:u,C=zw(_,c,f),P=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(o=o._next,null==_.previousIndex)c++;else{f||(f=[]);const V=C-c,Q=P-c;if(V!=Q){for(let Se=0;Se<V;Se++){const Je=Se<f.length?f[Se]:f[Se]=0,wt=Je+Se;Q<=wt&&wt<V&&(f[Se]=Je+1)}f[_.previousIndex]=Q-V}}C!==P&&i(_,C,P)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Rd(i))throw new Xe(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,f,_,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let C=0;C<this.length;C++)f=i[C],_=this._trackByFn(C,f),null!==o&&Object.is(o.trackById,_)?(u&&(o=this._verifyReinsertion(o,f,_,C)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,_,C),u=!0),o=o._next}else c=0,function Hy(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[kc()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,C=>{_=this._trackByFn(c,C),null!==o&&Object.is(o.trackById,_)?(u&&(o=this._verifyReinsertion(o,C,_,c)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,_,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let f;return null===i?f=this._itTail:(f=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,f,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,f,c)):i=this._addAfter(new RD(o,u),f,c),i}_verifyReinsertion(i,o,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?i=this._reinsertAfter(f,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,f=i._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Hw),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class RD{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MD{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Hw{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new MD,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zw(n,i,o){const u=n.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class Gw{constructor(){}supports(i){return i instanceof Map||Jg(i)}create(){return new xD}}class xD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Jg(i)))throw new Xe(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const u=new PD(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class PD{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ww(){return new $0([new jw])}let $0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||Ww()),deps:[[n,new bu,new su]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Xe(901,!1)}}return n.\u0275prov=pt({token:n,providedIn:"root",factory:Ww}),n})();function Kw(){return new j0([new Gw])}let j0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||Kw()),deps:[[n,new bu,new su]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Xe(901,!1)}}return n.\u0275prov=pt({token:n,providedIn:"root",factory:Kw}),n})();const kD=Rw(null,"core",[]);let LD=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(di(Z_))},n.\u0275mod=ni({type:n}),n.\u0275inj=wn({}),n})();function FD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},1481:(Lt,We,U)=>{U.d(We,{Dx:()=>hr,H7:()=>At,b2:()=>Jr,q6:()=>$n,se:()=>je});var w=U(6895),W=U(4650);class G extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends G{static makeCurrent(){(0,w.HT)(new fe)}onAndCancel(ie,ee,Ae){return ie.addEventListener(ee,Ae,!1),()=>{ie.removeEventListener(ee,Ae,!1)}}dispatchEvent(ie,ee){ie.dispatchEvent(ee)}remove(ie){ie.parentNode&&ie.parentNode.removeChild(ie)}createElement(ie,ee){return(ee=ee||this.getDefaultDocument()).createElement(ie)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ie){return ie.nodeType===Node.ELEMENT_NODE}isShadowRoot(ie){return ie instanceof DocumentFragment}getGlobalEventTarget(ie,ee){return"window"===ee?window:"document"===ee?ie:"body"===ee?ie.body:null}getBaseHref(ie){const ee=function _e(){return pe=pe||document.querySelector("base"),pe?pe.getAttribute("href"):null}();return null==ee?null:function ge(se){De=De||document.createElement("a"),De.setAttribute("href",se);const ie=De.pathname;return"/"===ie.charAt(0)?ie:`/${ie}`}(ee)}resetBaseElement(){pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ie){return(0,w.Mx)(document.cookie,ie)}}let De,pe=null;const xe=new W.OlP("TRANSITION_ID"),ue=[{provide:W.ip1,useFactory:function ae(se,ie,ee){return()=>{ee.get(W.CZH).donePromise.then(()=>{const Ae=(0,w.q)(),st=ie.querySelectorAll(`style[ng-transition="${se}"]`);for(let Pt=0;Pt<st.length;Pt++)Ae.remove(st[Pt])})}},deps:[xe,w.K0,W.zs3],multi:!0}];let ct=(()=>{class se{build(){return new XMLHttpRequest}}return se.\u0275fac=function(ee){return new(ee||se)},se.\u0275prov=W.Yz7({token:se,factory:se.\u0275fac}),se})();const it=new W.OlP("EventManagerPlugins");let Xe=(()=>{class se{constructor(ee,Ae){this._zone=Ae,this._eventNameToPlugin=new Map,ee.forEach(st=>st.manager=this),this._plugins=ee.slice().reverse()}addEventListener(ee,Ae,st){return this._findPluginFor(Ae).addEventListener(ee,Ae,st)}addGlobalEventListener(ee,Ae,st){return this._findPluginFor(Ae).addGlobalEventListener(ee,Ae,st)}getZone(){return this._zone}_findPluginFor(ee){const Ae=this._eventNameToPlugin.get(ee);if(Ae)return Ae;const st=this._plugins;for(let Pt=0;Pt<st.length;Pt++){const on=st[Pt];if(on.supports(ee))return this._eventNameToPlugin.set(ee,on),on}throw new Error(`No event manager plugin found for event ${ee}`)}}return se.\u0275fac=function(ee){return new(ee||se)(W.LFG(it),W.LFG(W.R0b))},se.\u0275prov=W.Yz7({token:se,factory:se.\u0275fac}),se})();class mt{constructor(ie){this._doc=ie}addGlobalEventListener(ie,ee,Ae){const st=(0,w.q)().getGlobalEventTarget(this._doc,ie);if(!st)throw new Error(`Unsupported event target ${st} for event ${ee}`);return this.addEventListener(st,ee,Ae)}}let Qe=(()=>{class se{constructor(){this._stylesSet=new Set}addStyles(ee){const Ae=new Set;ee.forEach(st=>{this._stylesSet.has(st)||(this._stylesSet.add(st),Ae.add(st))}),this.onStylesAdded(Ae)}onStylesAdded(ee){}getAllStyles(){return Array.from(this._stylesSet)}}return se.\u0275fac=function(ee){return new(ee||se)},se.\u0275prov=W.Yz7({token:se,factory:se.\u0275fac}),se})(),nt=(()=>{class se extends Qe{constructor(ee){super(),this._doc=ee,this._hostNodes=new Map,this._hostNodes.set(ee.head,[])}_addStylesToHost(ee,Ae,st){ee.forEach(Pt=>{const on=this._doc.createElement("style");on.textContent=Pt,st.push(Ae.appendChild(on))})}addHost(ee){const Ae=[];this._addStylesToHost(this._stylesSet,ee,Ae),this._hostNodes.set(ee,Ae)}removeHost(ee){const Ae=this._hostNodes.get(ee);Ae&&Ae.forEach(Le),this._hostNodes.delete(ee)}onStylesAdded(ee){this._hostNodes.forEach((Ae,st)=>{this._addStylesToHost(ee,st,Ae)})}ngOnDestroy(){this._hostNodes.forEach(ee=>ee.forEach(Le))}}return se.\u0275fac=function(ee){return new(ee||se)(W.LFG(w.K0))},se.\u0275prov=W.Yz7({token:se,factory:se.\u0275fac}),se})();function Le(se){(0,w.q)().remove(se)}const St={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ve=/%COMP%/g;function we(se,ie,ee){for(let Ae=0;Ae<ie.length;Ae++){let st=ie[Ae];Array.isArray(st)?we(se,st,ee):(st=st.replace(Ve,se),ee.push(st))}return ee}function Pe(se){return ie=>{if("__ngUnwrap__"===ie)return se;!1===se(ie)&&(ie.preventDefault(),ie.returnValue=!1)}}let je=(()=>{class se{constructor(ee,Ae,st){this.eventManager=ee,this.sharedStylesHost=Ae,this.appId=st,this.rendererByCompId=new Map,this.defaultRenderer=new Mt(ee)}createRenderer(ee,Ae){if(!ee||!Ae)return this.defaultRenderer;switch(Ae.encapsulation){case W.ifc.Emulated:{let st=this.rendererByCompId.get(Ae.id);return st||(st=new Rn(this.eventManager,this.sharedStylesHost,Ae,this.appId),this.rendererByCompId.set(Ae.id,st)),st.applyToHost(ee),st}case 1:case W.ifc.ShadowDom:return new Dt(this.eventManager,this.sharedStylesHost,ee,Ae);default:if(!this.rendererByCompId.has(Ae.id)){const st=we(Ae.id,Ae.styles,[]);this.sharedStylesHost.addStyles(st),this.rendererByCompId.set(Ae.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return se.\u0275fac=function(ee){return new(ee||se)(W.LFG(Xe),W.LFG(nt),W.LFG(W.AFp))},se.\u0275prov=W.Yz7({token:se,factory:se.\u0275fac}),se})();class Mt{constructor(ie){this.eventManager=ie,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ie,ee){return ee?document.createElementNS(St[ee]||ee,ie):document.createElement(ie)}createComment(ie){return document.createComment(ie)}createText(ie){return document.createTextNode(ie)}appendChild(ie,ee){(On(ie)?ie.content:ie).appendChild(ee)}insertBefore(ie,ee,Ae){ie&&(On(ie)?ie.content:ie).insertBefore(ee,Ae)}removeChild(ie,ee){ie&&ie.removeChild(ee)}selectRootElement(ie,ee){let Ae="string"==typeof ie?document.querySelector(ie):ie;if(!Ae)throw new Error(`The selector "${ie}" did not match any elements`);return ee||(Ae.textContent=""),Ae}parentNode(ie){return ie.parentNode}nextSibling(ie){return ie.nextSibling}setAttribute(ie,ee,Ae,st){if(st){ee=st+":"+ee;const Pt=St[st];Pt?ie.setAttributeNS(Pt,ee,Ae):ie.setAttribute(ee,Ae)}else ie.setAttribute(ee,Ae)}removeAttribute(ie,ee,Ae){if(Ae){const st=St[Ae];st?ie.removeAttributeNS(st,ee):ie.removeAttribute(`${Ae}:${ee}`)}else ie.removeAttribute(ee)}addClass(ie,ee){ie.classList.add(ee)}removeClass(ie,ee){ie.classList.remove(ee)}setStyle(ie,ee,Ae,st){st&(W.JOm.DashCase|W.JOm.Important)?ie.style.setProperty(ee,Ae,st&W.JOm.Important?"important":""):ie.style[ee]=Ae}removeStyle(ie,ee,Ae){Ae&W.JOm.DashCase?ie.style.removeProperty(ee):ie.style[ee]=""}setProperty(ie,ee,Ae){ie[ee]=Ae}setValue(ie,ee){ie.nodeValue=ee}listen(ie,ee,Ae){return"string"==typeof ie?this.eventManager.addGlobalEventListener(ie,ee,Pe(Ae)):this.eventManager.addEventListener(ie,ee,Pe(Ae))}}function On(se){return"TEMPLATE"===se.tagName&&void 0!==se.content}class Rn extends Mt{constructor(ie,ee,Ae,st){super(ie),this.component=Ae;const Pt=we(st+"-"+Ae.id,Ae.styles,[]);ee.addStyles(Pt),this.contentAttr=function et(se){return"_ngcontent-%COMP%".replace(Ve,se)}(st+"-"+Ae.id),this.hostAttr=function He(se){return"_nghost-%COMP%".replace(Ve,se)}(st+"-"+Ae.id)}applyToHost(ie){super.setAttribute(ie,this.hostAttr,"")}createElement(ie,ee){const Ae=super.createElement(ie,ee);return super.setAttribute(Ae,this.contentAttr,""),Ae}}class Dt extends Mt{constructor(ie,ee,Ae,st){super(ie),this.sharedStylesHost=ee,this.hostEl=Ae,this.shadowRoot=Ae.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Pt=we(st.id,st.styles,[]);for(let on=0;on<Pt.length;on++){const Ue=document.createElement("style");Ue.textContent=Pt[on],this.shadowRoot.appendChild(Ue)}}nodeOrShadowRoot(ie){return ie===this.hostEl?this.shadowRoot:ie}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ie,ee){return super.appendChild(this.nodeOrShadowRoot(ie),ee)}insertBefore(ie,ee,Ae){return super.insertBefore(this.nodeOrShadowRoot(ie),ee,Ae)}removeChild(ie,ee){return super.removeChild(this.nodeOrShadowRoot(ie),ee)}parentNode(ie){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ie)))}}let nr=(()=>{class se extends mt{constructor(ee){super(ee)}supports(ee){return!0}addEventListener(ee,Ae,st){return ee.addEventListener(Ae,st,!1),()=>this.removeEventListener(ee,Ae,st)}removeEventListener(ee,Ae,st){return ee.removeEventListener(Ae,st)}}return se.\u0275fac=function(ee){return new(ee||se)(W.LFG(w.K0))},se.\u0275prov=W.Yz7({token:se,factory:se.\u0275fac}),se})();const Mn=["alt","control","meta","shift"],en={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pt={alt:se=>se.altKey,control:se=>se.ctrlKey,meta:se=>se.metaKey,shift:se=>se.shiftKey};let jn=(()=>{class se extends mt{constructor(ee){super(ee)}supports(ee){return null!=se.parseEventName(ee)}addEventListener(ee,Ae,st){const Pt=se.parseEventName(Ae),on=se.eventCallback(Pt.fullKey,st,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(ee,Pt.domEventName,on))}static parseEventName(ee){const Ae=ee.toLowerCase().split("."),st=Ae.shift();if(0===Ae.length||"keydown"!==st&&"keyup"!==st)return null;const Pt=se._normalizeKey(Ae.pop());let on="",Ue=Ae.indexOf("code");if(Ue>-1&&(Ae.splice(Ue,1),on="code."),Mn.forEach(yt=>{const vt=Ae.indexOf(yt);vt>-1&&(Ae.splice(vt,1),on+=yt+".")}),on+=Pt,0!=Ae.length||0===Pt.length)return null;const ke={};return ke.domEventName=st,ke.fullKey=on,ke}static matchEventFullKeyCode(ee,Ae){let st=en[ee.key]||ee.key,Pt="";return Ae.indexOf("code.")>-1&&(st=ee.code,Pt="code."),!(null==st||!st)&&(st=st.toLowerCase()," "===st?st="space":"."===st&&(st="dot"),Mn.forEach(on=>{on!==st&&(0,pt[on])(ee)&&(Pt+=on+".")}),Pt+=st,Pt===Ae)}static eventCallback(ee,Ae,st){return Pt=>{se.matchEventFullKeyCode(Pt,ee)&&st.runGuarded(()=>Ae(Pt))}}static _normalizeKey(ee){return"esc"===ee?"escape":ee}}return se.\u0275fac=function(ee){return new(ee||se)(W.LFG(w.K0))},se.\u0275prov=W.Yz7({token:se,factory:se.\u0275fac}),se})();const $n=(0,W.eFA)(W._c5,"browser",[{provide:W.Lbi,useValue:w.bD},{provide:W.g9A,useValue:function Mi(){fe.makeCurrent()},multi:!0},{provide:w.K0,useFactory:function Lr(){return(0,W.RDi)(document),document},deps:[]}]),ur=new W.OlP(""),Ut=[{provide:W.rWj,useClass:class ve{addToWindow(ie){W.dqk.getAngularTestability=(Ae,st=!0)=>{const Pt=ie.findTestabilityInTree(Ae,st);if(null==Pt)throw new Error("Could not find testability for element.");return Pt},W.dqk.getAllAngularTestabilities=()=>ie.getAllTestabilities(),W.dqk.getAllAngularRootElements=()=>ie.getAllRootElements(),W.dqk.frameworkStabilizers||(W.dqk.frameworkStabilizers=[]),W.dqk.frameworkStabilizers.push(Ae=>{const st=W.dqk.getAllAngularTestabilities();let Pt=st.length,on=!1;const Ue=function(ke){on=on||ke,Pt--,0==Pt&&Ae(on)};st.forEach(function(ke){ke.whenStable(Ue)})})}findTestabilityInTree(ie,ee,Ae){return null==ee?null:ie.getTestability(ee)??(Ae?(0,w.q)().isShadowRoot(ee)?this.findTestabilityInTree(ie,ee.host,!0):this.findTestabilityInTree(ie,ee.parentElement,!0):null)}},deps:[]},{provide:W.lri,useClass:W.dDg,deps:[W.R0b,W.eoX,W.rWj]},{provide:W.dDg,useClass:W.dDg,deps:[W.R0b,W.eoX,W.rWj]}],Fr=[{provide:W.zSh,useValue:"root"},{provide:W.qLn,useFactory:function dr(){return new W.qLn},deps:[]},{provide:it,useClass:nr,multi:!0,deps:[w.K0,W.R0b,W.Lbi]},{provide:it,useClass:jn,multi:!0,deps:[w.K0]},{provide:je,useClass:je,deps:[Xe,nt,W.AFp]},{provide:W.FYo,useExisting:je},{provide:Qe,useExisting:nt},{provide:nt,useClass:nt,deps:[w.K0]},{provide:Xe,useClass:Xe,deps:[it,W.R0b]},{provide:w.JF,useClass:ct,deps:[]},[]];let Jr=(()=>{class se{constructor(ee){}static withServerTransition(ee){return{ngModule:se,providers:[{provide:W.AFp,useValue:ee.appId},{provide:xe,useExisting:W.AFp},ue]}}}return se.\u0275fac=function(ee){return new(ee||se)(W.LFG(ur,12))},se.\u0275mod=W.oAB({type:se}),se.\u0275inj=W.cJS({providers:[...Fr,...Ut],imports:[w.ez,W.hGG]}),se})(),hr=(()=>{class se{constructor(ee){this._doc=ee}getTitle(){return this._doc.title}setTitle(ee){this._doc.title=ee||""}}return se.\u0275fac=function(ee){return new(ee||se)(W.LFG(w.K0))},se.\u0275prov=W.Yz7({token:se,factory:function(ee){let Ae=null;return Ae=ee?new ee:function ti(){return new hr((0,W.LFG)(w.K0))}(),Ae},providedIn:"root"}),se})();typeof window<"u"&&window;let At=(()=>{class se{}return se.\u0275fac=function(ee){return new(ee||se)},se.\u0275prov=W.Yz7({token:se,factory:function(ee){let Ae=null;return Ae=ee?new(ee||se):W.LFG(In),Ae},providedIn:"root"}),se})(),In=(()=>{class se extends At{constructor(ee){super(),this._doc=ee}sanitize(ee,Ae){if(null==Ae)return null;switch(ee){case W.q3G.NONE:return Ae;case W.q3G.HTML:return(0,W.qzn)(Ae,"HTML")?(0,W.z3N)(Ae):(0,W.EiD)(this._doc,String(Ae)).toString();case W.q3G.STYLE:return(0,W.qzn)(Ae,"Style")?(0,W.z3N)(Ae):Ae;case W.q3G.SCRIPT:if((0,W.qzn)(Ae,"Script"))return(0,W.z3N)(Ae);throw new Error("unsafe value used in a script context");case W.q3G.URL:return(0,W.qzn)(Ae,"URL")?(0,W.z3N)(Ae):(0,W.mCW)(String(Ae));case W.q3G.RESOURCE_URL:if((0,W.qzn)(Ae,"ResourceURL"))return(0,W.z3N)(Ae);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ee} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ee){return(0,W.JVY)(ee)}bypassSecurityTrustStyle(ee){return(0,W.L6k)(ee)}bypassSecurityTrustScript(ee){return(0,W.eBb)(ee)}bypassSecurityTrustUrl(ee){return(0,W.LAX)(ee)}bypassSecurityTrustResourceUrl(ee){return(0,W.pB0)(ee)}}return se.\u0275fac=function(ee){return new(ee||se)(W.LFG(w.K0))},se.\u0275prov=W.Yz7({token:se,factory:function(ee){let Ae=null;return Ae=ee?new ee:function ln(se){return new In(se.get(w.K0))}(W.LFG(W.zs3)),Ae},providedIn:"root"}),se})()},9379:(Lt,We,U)=>{U.d(We,{gz:()=>kn,m2:()=>Un,F0:()=>Di,rH:()=>Co,yS:()=>As,Bz:()=>Kt,lC:()=>Ss});var w=U(4650),W=U(8996),G=U(9646),fe=U(1135),pe=U(6805),_e=U(9841),De=U(7272),ge=U(9770),xe=U(9635),ae=U(2843),ue=U(9751),ve=U(515),ct=U(4033),it=U(7579),Xe=U(6895),mt=U(4004),Qe=U(3900),nt=U(5698),Le=U(8675),St=U(9300),Ve=U(5577),Ee=U(590),Ne=U(4351),ft=U(8505),Et=U(8421),et=U(5403),He=U(4482);function we(I){return(0,He.e)((T,v)=>{let Z,A=null,O=!1;A=T.subscribe((0,et.x)(v,void 0,void 0,te=>{Z=(0,Et.Xf)(I(te,we(I)(T))),A?(A.unsubscribe(),A=null,Z.subscribe(v)):O=!0})),O&&(A.unsubscribe(),A=null,Z.subscribe(v))})}var Pe=U(5026);function ot(I){return I<=0?()=>ve.E:(0,He.e)((T,v)=>{let A=[];T.subscribe((0,et.x)(v,O=>{A.push(O),I<A.length&&A.shift()},()=>{for(const O of A)v.next(O);v.complete()},void 0,()=>{A=null}))})}var je=U(8068),Mt=U(6590),It=U(4671);function yn(I,T){const v=arguments.length>=2;return A=>A.pipe(I?(0,St.h)((O,Z)=>I(O,Z,A)):It.y,ot(1),v?(0,Mt.d)(T):(0,je.T)(()=>new pe.K))}var On=U(2529);function Dt(I){return(0,He.e)((T,v)=>{try{T.subscribe(v)}finally{v.add(I)}})}var nr=U(8343),Mn=U(8189),en=U(1481);const pt="primary",jn=Symbol("RouteTitle");class wn{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const v=this.params[T];return Array.isArray(v)?v[0]:v}return null}getAll(T){if(this.has(T)){const v=this.params[T];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function ar(I){return new wn(I)}function Qn(I,T,v){const A=v.path.split("/");if(A.length>I.length||"full"===v.pathMatch&&(T.hasChildren()||A.length<I.length))return null;const O={};for(let Z=0;Z<A.length;Z++){const te=A[Z],oe=I[Z];if(te.startsWith(":"))O[te.substring(1)]=oe;else if(te!==oe.path)return null}return{consumed:I.slice(0,A.length),posParams:O}}function yr(I,T){const v=I?Object.keys(I):void 0,A=T?Object.keys(T):void 0;if(!v||!A||v.length!=A.length)return!1;let O;for(let Z=0;Z<v.length;Z++)if(O=v[Z],!Mi(I[O],T[O]))return!1;return!0}function Mi(I,T){if(Array.isArray(I)&&Array.isArray(T)){if(I.length!==T.length)return!1;const v=[...I].sort(),A=[...T].sort();return v.every((O,Z)=>A[Z]===O)}return I===T}function dr(I){return Array.prototype.concat.apply([],I)}function Lr(I){return I.length>0?I[I.length-1]:null}function $n(I,T){for(const v in I)I.hasOwnProperty(v)&&T(I[v],v)}function ur(I){return(0,w.CqO)(I)?I:(0,w.QGY)(I)?(0,W.D)(Promise.resolve(I)):(0,G.of)(I)}const Jr={exact:function ti(I,T,v){if(!jt(I.segments,T.segments)||!nn(I.segments,T.segments,v)||I.numberOfChildren!==T.numberOfChildren)return!1;for(const A in T.children)if(!I.children[A]||!ti(I.children[A],T.children[A],v))return!1;return!0},subset:Ln},Ur={exact:function xi(I,T){return yr(I,T)},subset:function hr(I,T){return Object.keys(T).length<=Object.keys(I).length&&Object.keys(T).every(v=>Mi(I[v],T[v]))},ignored:()=>!0};function ls(I,T,v){return Jr[v.paths](I.root,T.root,v.matrixParams)&&Ur[v.queryParams](I.queryParams,T.queryParams)&&!("exact"===v.fragment&&I.fragment!==T.fragment)}function Ln(I,T,v){return Ht(I,T,T.segments,v)}function Ht(I,T,v,A){if(I.segments.length>v.length){const O=I.segments.slice(0,v.length);return!(!jt(O,v)||T.hasChildren()||!nn(O,v,A))}if(I.segments.length===v.length){if(!jt(I.segments,v)||!nn(I.segments,v,A))return!1;for(const O in T.children)if(!I.children[O]||!Ln(I.children[O],T.children[O],A))return!1;return!0}{const O=v.slice(0,I.segments.length),Z=v.slice(I.segments.length);return!!(jt(I.segments,O)&&nn(I.segments,O,A)&&I.children[pt])&&Ht(I.children[pt],T,Z,A)}}function nn(I,T,v){return T.every((A,O)=>Ur[v](I[O].parameters,A.parameters))}class Kn{constructor(T,v,A){this.root=T,this.queryParams=v,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ar(this.queryParams)),this._queryParamMap}toString(){return Hn.serialize(this)}}class pn{constructor(T,v){this.segments=T,this.children=v,this.parent=null,$n(v,(A,O)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ar(this)}}class Er{constructor(T,v){this.path=T,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=ar(this.parameters)),this._parameterMap}toString(){return ri(this)}}function jt(I,T){return I.length===T.length&&I.every((v,A)=>v.path===T[A].path)}let Fn=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=w.Yz7({token:I,factory:function(){return new hi},providedIn:"root"}),I})();class hi{parse(T){const v=new ir(T);return new Kn(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(T){const v=`/${Ir(T.root,!0)}`,A=function le(I){const T=Object.keys(I).map(v=>{const A=I[v];return Array.isArray(A)?A.map(O=>`${_r(v)}=${_r(O)}`).join("&"):`${_r(v)}=${_r(A)}`}).filter(v=>!!v);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${v}${A}${"string"==typeof T.fragment?`#${function zr(I){return encodeURI(I)}(T.fragment)}`:""}`}}const Hn=new hi;function Ar(I){return I.segments.map(T=>ri(T)).join("/")}function Ir(I,T){if(!I.hasChildren())return Ar(I);if(T){const v=I.children[pt]?Ir(I.children[pt],!1):"",A=[];return $n(I.children,(O,Z)=>{Z!==pt&&A.push(`${Z}:${Ir(O,!1)}`)}),A.length>0?`${v}(${A.join("//")})`:v}{const v=function wr(I,T){let v=[];return $n(I.children,(A,O)=>{O===pt&&(v=v.concat(T(A,O)))}),$n(I.children,(A,O)=>{O!==pt&&(v=v.concat(T(A,O)))}),v}(I,(A,O)=>O===pt?[Ir(I.children[pt],!1)]:[`${O}:${Ir(A,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[pt]?`${Ar(I)}/${v[0]}`:`${Ar(I)}/(${v.join("//")})`}}function Wr(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _r(I){return Wr(I).replace(/%3B/gi,";")}function Vr(I){return Wr(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rr(I){return decodeURIComponent(I)}function ni(I){return rr(I.replace(/\+/g,"%20"))}function ri(I){return`${Vr(I.path)}${function ye(I){return Object.keys(I).map(T=>`;${Vr(T)}=${Vr(I[T])}`).join("")}(I.parameters)}`}const Te=/^[^\/()?;=#]+/;function Ye(I){const T=I.match(Te);return T?T[0]:""}const Fe=/^[^=?&#]+/,ln=/^[^&#]+/;class ir{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(T.length>0||Object.keys(v).length>0)&&(A[pt]=new pn(T,v)),A}parseSegment(){const T=Ye(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new w.vHH(4009,!1);return this.capture(T),new Er(rr(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const v=Ye(this.remaining);if(!v)return;this.capture(v);let A="";if(this.consumeOptional("=")){const O=Ye(this.remaining);O&&(A=O,this.capture(A))}T[rr(v)]=rr(A)}parseQueryParam(T){const v=function At(I){const T=I.match(Fe);return T?T[0]:""}(this.remaining);if(!v)return;this.capture(v);let A="";if(this.consumeOptional("=")){const te=function In(I){const T=I.match(ln);return T?T[0]:""}(this.remaining);te&&(A=te,this.capture(A))}const O=ni(v),Z=ni(A);if(T.hasOwnProperty(O)){let te=T[O];Array.isArray(te)||(te=[te],T[O]=te),te.push(Z)}else T[O]=Z}parseParens(T){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=Ye(this.remaining),O=this.remaining[A.length];if("/"!==O&&")"!==O&&";"!==O)throw new w.vHH(4010,!1);let Z;A.indexOf(":")>-1?(Z=A.slice(0,A.indexOf(":")),this.capture(Z),this.capture(":")):T&&(Z=pt);const te=this.parseChildren();v[Z]=1===Object.keys(te).length?te[pt]:new pn([],te),this.consumeOptional("//")}return v}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new w.vHH(4011,!1)}}function se(I){return I.segments.length>0?new pn([],{[pt]:I}):I}function ie(I){const T={};for(const A of Object.keys(I.children)){const Z=ie(I.children[A]);(Z.segments.length>0||Z.hasChildren())&&(T[A]=Z)}return function ee(I){if(1===I.numberOfChildren&&I.children[pt]){const T=I.children[pt];return new pn(I.segments.concat(T.segments),T.children)}return I}(new pn(I.segments,T))}function Ae(I){return I instanceof Kn}function ke(I,T,v,A,O){var Z;if(0===v.length)return Zt(T.root,T.root,T.root,A,O);const te=function br(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Yn(!0,0,I);let T=0,v=!1;const A=I.reduce((O,Z,te)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const oe={};return $n(Z.outlets,(qe,Ot)=>{oe[Ot]="string"==typeof qe?qe.split("/"):qe}),[...O,{outlets:oe}]}if(Z.segmentPath)return[...O,Z.segmentPath]}return"string"!=typeof Z?[...O,Z]:0===te?(Z.split("/").forEach((oe,qe)=>{0==qe&&"."===oe||(0==qe&&""===oe?v=!0:".."===oe?T++:""!=oe&&O.push(oe))}),O):[...O,Z]},[]);return new Yn(v,T,A)}(v);if(te.toRoot())return Zt(T.root,T.root,new pn([],{}),A,O);const qe=function oe(tn){var Wt;const Me=function bi(I,T,v,A){if(I.isAbsolute)return new Pn(T.root,!0,0);if(-1===A)return new Pn(v,v===T.root,0);return function qi(I,T,v){let A=I,O=T,Z=v;for(;Z>O;){if(Z-=O,A=A.parent,!A)throw new w.vHH(4005,!1);O=A.segments.length}return new Pn(A,!1,O-Z)}(v,A+(yt(I.commands[0])?0:1),I.numberOfDoubleDots)}(te,T,null===(Wt=I.snapshot)||void 0===Wt?void 0:Wt._urlSegment,tn),Or=Me.processChildren?zn(Me.segmentGroup,Me.index,te.commands):Ns(Me.segmentGroup,Me.index,te.commands);return Zt(T.root,Me.segmentGroup,Or,A,O)}(null===(Z=I.snapshot)||void 0===Z?void 0:Z._lastPathIndex);return qe}function yt(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function vt(I){return"object"==typeof I&&null!=I&&I.outlets}function Zt(I,T,v,A,O){let te,Z={};A&&$n(A,(qe,Ot)=>{Z[Ot]=Array.isArray(qe)?qe.map(tn=>`${tn}`):`${qe}`}),te=I===T?v:Dn(I,T,v);const oe=se(ie(te));return new Kn(oe,Z,O)}function Dn(I,T,v){const A={};return $n(I.children,(O,Z)=>{A[Z]=O===T?v:Dn(O,T,v)}),new pn(I.segments,A)}class Yn{constructor(T,v,A){if(this.isAbsolute=T,this.numberOfDoubleDots=v,this.commands=A,T&&A.length>0&&yt(A[0]))throw new w.vHH(4003,!1);const O=A.find(vt);if(O&&O!==Lr(A))throw new w.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pn{constructor(T,v,A){this.segmentGroup=T,this.processChildren=v,this.index=A}}function Ns(I,T,v){if(I||(I=new pn([],{})),0===I.segments.length&&I.hasChildren())return zn(I,T,v);const A=function fi(I,T,v){let A=0,O=T;const Z={match:!1,pathIndex:0,commandIndex:0};for(;O<I.segments.length;){if(A>=v.length)return Z;const te=I.segments[O],oe=v[A];if(vt(oe))break;const qe=`${oe}`,Ot=A<v.length-1?v[A+1]:null;if(O>0&&void 0===qe)break;if(qe&&Ot&&"object"==typeof Ot&&void 0===Ot.outlets){if(!lr(qe,Ot,te))return Z;A+=2}else{if(!lr(qe,{},te))return Z;A++}O++}return{match:!0,pathIndex:O,commandIndex:A}}(I,T,v),O=v.slice(A.commandIndex);if(A.match&&A.pathIndex<I.segments.length){const Z=new pn(I.segments.slice(0,A.pathIndex),{});return Z.children[pt]=new pn(I.segments.slice(A.pathIndex),I.children),zn(Z,0,O)}return A.match&&0===O.length?new pn(I.segments,{}):A.match&&!I.hasChildren()?Os(I,T,v):A.match?zn(I,0,O):Os(I,T,v)}function zn(I,T,v){if(0===v.length)return new pn(I.segments,{});{const A=function Ps(I){return vt(I[0])?I[0].outlets:{[pt]:I}}(v),O={};return $n(A,(Z,te)=>{"string"==typeof Z&&(Z=[Z]),null!==Z&&(O[te]=Ns(I.children[te],T,Z))}),$n(I.children,(Z,te)=>{void 0===A[te]&&(O[te]=Z)}),new pn(I.segments,O)}}function Os(I,T,v){const A=I.segments.slice(0,T);let O=0;for(;O<v.length;){const Z=v[O];if(vt(Z)){const qe=cs(Z.outlets);return new pn(A,qe)}if(0===O&&yt(v[0])){A.push(new Er(I.segments[T].path,oo(v[0]))),O++;continue}const te=vt(Z)?Z.outlets[pt]:`${Z}`,oe=O<v.length-1?v[O+1]:null;te&&oe&&yt(oe)?(A.push(new Er(te,oo(oe))),O+=2):(A.push(new Er(te,{})),O++)}return new pn(A,{})}function cs(I){const T={};return $n(I,(v,A)=>{"string"==typeof v&&(v=[v]),null!==v&&(T[A]=Os(new pn([],{}),0,v))}),T}function oo(I){const T={};return $n(I,(v,A)=>T[A]=`${v}`),T}function lr(I,T,v){return I==v.path&&yr(T,v.parameters)}class vi{constructor(T,v){this.id=T,this.url=v}}class Ji extends vi{constructor(T,v,A="imperative",O=null){super(T,v),this.type=0,this.navigationTrigger=A,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Un extends vi{constructor(T,v,A){super(T,v),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ks extends vi{constructor(T,v,A,O){super(T,v),this.reason=A,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Kr extends vi{constructor(T,v,A,O){super(T,v),this.error=A,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ii extends vi{constructor(T,v,A,O){super(T,v),this.urlAfterRedirects=A,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class js extends vi{constructor(T,v,A,O){super(T,v),this.urlAfterRedirects=A,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ci extends vi{constructor(T,v,A,O,Z){super(T,v),this.urlAfterRedirects=A,this.state=O,this.shouldActivate=Z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class es extends vi{constructor(T,v,A,O){super(T,v),this.urlAfterRedirects=A,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rr extends vi{constructor(T,v,A,O){super(T,v),this.urlAfterRedirects=A,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ms{constructor(T){this.route=T,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ao{constructor(T){this.route=T,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ko{constructor(T){this.snapshot=T,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pi{constructor(T){this.snapshot=T,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zo{constructor(T){this.snapshot=T,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sr{constructor(T){this.snapshot=T,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hs{constructor(T,v,A){this.routerEvent=T,this.position=v,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ls{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const v=this.pathFromRoot(T);return v.length>1?v[v.length-2]:null}children(T){const v=Oe(T,this._root);return v?v.children.map(A=>A.value):[]}firstChild(T){const v=Oe(T,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(T){const v=be(T,this._root);return v.length<2?[]:v[v.length-2].children.map(O=>O.value).filter(O=>O!==T)}pathFromRoot(T){return be(T,this._root).map(v=>v.value)}}function Oe(I,T){if(I===T.value)return T;for(const v of T.children){const A=Oe(I,v);if(A)return A}return null}function be(I,T){if(I===T.value)return[T];for(const v of T.children){const A=be(I,v);if(A.length)return A.unshift(T),A}return[]}class ze{constructor(T,v){this.value=T,this.children=v}toString(){return`TreeNode(${this.value})`}}function lt(I){const T={};return I&&I.children.forEach(v=>T[v.value.outlet]=v),T}class Rt extends Ls{constructor(T,v){super(T),this.snapshot=v,Qs(this,T)}toString(){return this.snapshot.toString()}}function gn(I,T){const v=function Xn(I,T){const te=new ys([],{},{},"",{},pt,T,null,I.root,-1,{});return new Ni("",new ze(te,[]))}(I,T),A=new fe.X([new Er("",{})]),O=new fe.X({}),Z=new fe.X({}),te=new fe.X({}),oe=new fe.X(""),qe=new kn(A,O,te,oe,Z,pt,T,v.root);return qe.snapshot=v.root,new Rt(new ze(qe,[]),v)}class kn{constructor(T,v,A,O,Z,te,oe,qe){var Ot,tn;this.url=T,this.params=v,this.queryParams=A,this.fragment=O,this.data=Z,this.outlet=te,this.component=oe,this.title=null!==(Ot=null===(tn=this.data)||void 0===tn?void 0:tn.pipe((0,mt.U)(Wt=>Wt[jn])))&&void 0!==Ot?Ot:(0,G.of)(void 0),this._futureSnapshot=qe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(T=>ar(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(T=>ar(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gr(I,T="emptyOnly"){const v=I.pathFromRoot;let A=0;if("always"!==T)for(A=v.length-1;A>=1;){const O=v[A],Z=v[A-1];if(O.routeConfig&&""===O.routeConfig.path)A--;else{if(Z.component)break;A--}}return function zs(I){return I.reduce((T,v)=>{var A;return{params:{...T.params,...v.params},data:{...T.data,...v.data},resolve:{...v.data,...T.resolve,...null===(A=v.routeConfig)||void 0===A?void 0:A.data,...v._resolvedData}}},{params:{},data:{},resolve:{}})}(v.slice(A))}class ys{constructor(T,v,A,O,Z,te,oe,qe,Ot,tn,Wt,Me){var Or;this.url=T,this.params=v,this.queryParams=A,this.fragment=O,this.data=Z,this.outlet=te,this.component=oe,this.title=null===(Or=this.data)||void 0===Or?void 0:Or[jn],this.routeConfig=qe,this._urlSegment=Ot,this._lastPathIndex=tn,this._correctedLastPathIndex=Me??tn,this._resolve=Wt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ar(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ar(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ni extends Ls{constructor(T,v){super(v),this.url=T,Qs(this,v)}toString(){return ds(this._root)}}function Qs(I,T){T.value._routerState=I,T.children.forEach(v=>Qs(I,v))}function ds(I){const T=I.children.length>0?` { ${I.children.map(ds).join(", ")} } `:"";return`${I.value}${T}`}function _s(I){if(I.snapshot){const T=I.snapshot,v=I._futureSnapshot;I.snapshot=v,yr(T.queryParams,v.queryParams)||I.queryParams.next(v.queryParams),T.fragment!==v.fragment&&I.fragment.next(v.fragment),yr(T.params,v.params)||I.params.next(v.params),function Sr(I,T){if(I.length!==T.length)return!1;for(let v=0;v<I.length;++v)if(!yr(I[v],T[v]))return!1;return!0}(T.url,v.url)||I.url.next(v.url),yr(T.data,v.data)||I.data.next(v.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Fo(I,T){const v=yr(I.params,T.params)&&function Br(I,T){return jt(I,T)&&I.every((v,A)=>yr(v.parameters,T[A].parameters))}(I.url,T.url);return v&&!(!I.parent!=!T.parent)&&(!I.parent||Fo(I.parent,T.parent))}function Es(I,T,v){if(v&&I.shouldReuseRoute(T.value,v.value.snapshot)){const A=v.value;A._futureSnapshot=T.value;const O=function uo(I,T,v){return T.children.map(A=>{for(const O of v.children)if(I.shouldReuseRoute(A.value,O.value.snapshot))return Es(I,A,O);return Es(I,A)})}(I,T,v);return new ze(A,O)}{if(I.shouldAttach(T.value)){const Z=I.retrieve(T.value);if(null!==Z){const te=Z.route;return te.value._futureSnapshot=T.value,te.children=T.children.map(oe=>Es(I,oe)),te}}const A=function lo(I){return new kn(new fe.X(I.url),new fe.X(I.params),new fe.X(I.queryParams),new fe.X(I.fragment),new fe.X(I.data),I.outlet,I.component,I)}(T.value),O=T.children.map(Z=>Es(I,Z));return new ze(A,O)}}const ws="ngNavigationCancelingError";function co(I,T){const{redirectTo:v,navigationBehaviorOptions:A}=Ae(T)?{redirectTo:T,navigationBehaviorOptions:void 0}:T,O=Uo(!1,0,T);return O.url=v,O.navigationBehaviorOptions=A,O}function Uo(I,T,v){const A=new Error("NavigationCancelingError: "+(I||""));return A[ws]=!0,A.cancellationCode=T,v&&(A.url=v),A}function Bo(I){return ga(I)&&Ae(I.url)}function ga(I){return I&&I[ws]}class Ei{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new wi,this.attachRef=null}}let wi=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(v,A){const O=this.getOrCreateContext(v);O.outlet=A,this.contexts.set(v,O)}onChildOutletDestroyed(v){const A=this.getContext(v);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let A=this.getContext(v);return A||(A=new Ei,this.contexts.set(v,A)),A}getContext(v){return this.contexts.get(v)||null}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Qo=!1;let Ss=(()=>{class I{constructor(v,A,O,Z,te){this.parentContexts=v,this.location=A,this.changeDetector=Z,this.environmentInjector=te,this.activated=null,this._activatedRoute=null,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.name=O||pt,v.onChildOutletCreated(this.name,this)}ngOnDestroy(){var v;(null===(v=this.parentContexts.getContext(this.name))||void 0===v?void 0:v.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const v=this.parentContexts.getContext(this.name);v&&v.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,Qo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,Qo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,Qo);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,A){this.activated=v,this._activatedRoute=A,this.location.insert(v.hostView),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,A){if(this.isActivated)throw new w.vHH(4013,Qo);this._activatedRoute=v;const O=this.location,te=v._futureSnapshot.component,oe=this.parentContexts.getOrCreateContext(this.name).children,qe=new Is(v,oe,O.injector);if(A&&function ma(I){return!!I.resolveComponentFactory}(A)){const Ot=A.resolveComponentFactory(te);this.activated=O.createComponent(Ot,O.length,qe)}else this.activated=O.createComponent(te,{index:O.length,injector:qe,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(v){return new(v||I)(w.Y36(wi),w.Y36(w.s_b),w.$8M("name"),w.Y36(w.sBO),w.Y36(w.lqb))},I.\u0275dir=w.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),I})();class Is{constructor(T,v,A){this.route=T,this.childContexts=v,this.parent=A}get(T,v){return T===kn?this.route:T===wi?this.childContexts:this.parent.get(T,v)}}let $r=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275cmp=w.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(v,A){1&v&&w._UZ(0,"router-outlet")},dependencies:[Ss],encapsulation:2}),I})();function ai(I,T){var v;return I.providers&&!I._injector&&(I._injector=(0,w.MMx)(I.providers,T,`Route: ${I.path}`)),null!==(v=I._injector)&&void 0!==v?v:T}function Zi(I){const T=I.children&&I.children.map(Zi),v=T?{...I,children:T}:{...I};return!v.component&&!v.loadComponent&&(T||v.loadChildren)&&v.outlet&&v.outlet!==pt&&(v.component=$r),v}function pi(I){return I.outlet||pt}function Ii(I,T){const v=I.filter(A=>pi(A)===T);return v.push(...I.filter(A=>pi(A)!==T)),v}function Oi(I){var T;if(!I)return null;if(null!==(T=I.routeConfig)&&void 0!==T&&T._injector)return I.routeConfig._injector;for(let v=I.parent;v;v=v.parent){const A=v.routeConfig;if(null!=A&&A._loadedInjector)return A._loadedInjector;if(null!=A&&A._injector)return A._injector}return null}class dn{constructor(T,v,A,O){this.routeReuseStrategy=T,this.futureState=v,this.currState=A,this.forwardEvent=O}activate(T){const v=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,A,T),_s(this.futureState.root),this.activateChildRoutes(v,A,T)}deactivateChildRoutes(T,v,A){const O=lt(v);T.children.forEach(Z=>{const te=Z.value.outlet;this.deactivateRoutes(Z,O[te],A),delete O[te]}),$n(O,(Z,te)=>{this.deactivateRouteAndItsChildren(Z,A)})}deactivateRoutes(T,v,A){const O=T.value,Z=v?v.value:null;if(O===Z)if(O.component){const te=A.getContext(O.outlet);te&&this.deactivateChildRoutes(T,v,te.children)}else this.deactivateChildRoutes(T,v,A);else Z&&this.deactivateRouteAndItsChildren(v,A)}deactivateRouteAndItsChildren(T,v){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,v):this.deactivateRouteAndOutlet(T,v)}detachAndStoreRouteSubtree(T,v){const A=v.getContext(T.value.outlet),O=A&&T.value.component?A.children:v,Z=lt(T);for(const te of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[te],O);if(A&&A.outlet){const te=A.outlet.detach(),oe=A.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:te,route:T,contexts:oe})}}deactivateRouteAndOutlet(T,v){const A=v.getContext(T.value.outlet),O=A&&T.value.component?A.children:v,Z=lt(T);for(const te of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[te],O);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(T,v,A){const O=lt(v);T.children.forEach(Z=>{this.activateRoutes(Z,O[Z.value.outlet],A),this.forwardEvent(new sr(Z.value.snapshot))}),T.children.length&&this.forwardEvent(new Pi(T.value.snapshot))}activateRoutes(T,v,A){const O=T.value,Z=v?v.value:null;if(_s(O),O===Z)if(O.component){const oe=A.getOrCreateContext(O.outlet);this.activateChildRoutes(T,v,oe.children)}else this.activateChildRoutes(T,v,A);else if(O.component){const oe=A.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const qe=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),oe.children.onOutletReAttached(qe.contexts),oe.attachRef=qe.componentRef,oe.route=qe.route.value,oe.outlet&&oe.outlet.attach(qe.componentRef,qe.route.value),_s(qe.route.value),this.activateChildRoutes(T,null,oe.children)}else{var te;const qe=Oi(O.snapshot),Ot=null!==(te=qe?.get(w._Vd))&&void 0!==te?te:null;oe.attachRef=null,oe.route=O,oe.resolver=Ot,oe.injector=qe,oe.outlet&&oe.outlet.activateWith(O,oe.injector),this.activateChildRoutes(T,null,oe.children)}}else this.activateChildRoutes(T,null,A)}}class Ys{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class Ws{constructor(T,v){this.component=T,this.route=v}}function Do(I,T,v){const A=I._root;return Fs(A,T?T._root:null,v,[A.value])}function Xs(I,T){const v=Symbol(),A=T.get(I,v);return A===v?"function"!=typeof I||(0,w.Z0I)(I)?T.get(I):I:A}function Fs(I,T,v,A,O={canDeactivateChecks:[],canActivateChecks:[]}){const Z=lt(T);return I.children.forEach(te=>{(function $i(I,T,v,A,O={canDeactivateChecks:[],canActivateChecks:[]}){const Z=I.value,te=T?T.value:null,oe=v?v.getContext(I.value.outlet):null;if(te&&Z.routeConfig===te.routeConfig){const qe=function Ks(I,T,v){if("function"==typeof v)return v(I,T);switch(v){case"pathParamsChange":return!jt(I.url,T.url);case"pathParamsOrQueryParamsChange":return!jt(I.url,T.url)||!yr(I.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fo(I,T)||!yr(I.queryParams,T.queryParams);default:return!Fo(I,T)}}(te,Z,Z.routeConfig.runGuardsAndResolvers);qe?O.canActivateChecks.push(new Ys(A)):(Z.data=te.data,Z._resolvedData=te._resolvedData),Fs(I,T,Z.component?oe?oe.children:null:v,A,O),qe&&oe&&oe.outlet&&oe.outlet.isActivated&&O.canDeactivateChecks.push(new Ws(oe.outlet.component,te))}else te&&_t(T,oe,O),O.canActivateChecks.push(new Ys(A)),Fs(I,null,Z.component?oe?oe.children:null:v,A,O)})(te,Z[te.value.outlet],v,A.concat([te.value]),O),delete Z[te.value.outlet]}),$n(Z,(te,oe)=>_t(te,v.getContext(oe),O)),O}function _t(I,T,v){const A=lt(I),O=I.value;$n(A,(Z,te)=>{_t(Z,O.component?T?T.children.getContext(te):null:T,v)}),v.canDeactivateChecks.push(new Ws(O.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,O))}function Cn(I){return"function"==typeof I}function J(I){return I instanceof pe.K||"EmptyError"===I?.name}const he=Symbol("INITIAL_VALUE");function Re(){return(0,Qe.w)(I=>(0,_e.a)(I.map(T=>T.pipe((0,nt.q)(1),(0,Le.O)(he)))).pipe((0,mt.U)(T=>{for(const v of T)if(!0!==v){if(v===he)return he;if(!1===v||v instanceof Kn)return v}return!0}),(0,St.h)(T=>T!==he),(0,nt.q)(1)))}function Hr(I){return(0,xe.z)((0,ft.b)(T=>{if(Ae(T))throw co(0,T)}),(0,mt.U)(T=>!0===T))}const Mr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Us(I,T,v,A,O){const Z=xr(I,T,v);return Z.matched?function ts(I,T,v,A){const O=T.canMatch;if(!O||0===O.length)return(0,G.of)(!0);const Z=O.map(te=>{const oe=Xs(te,I);return ur(function hs(I){return I&&Cn(I.canMatch)}(oe)?oe.canMatch(T,v):I.runInContext(()=>oe(T,v)))});return(0,G.of)(Z).pipe(Re(),Hr())}(A=ai(T,A),T,v).pipe((0,mt.U)(te=>!0===te?Z:{...Mr})):(0,G.of)(Z)}function xr(I,T,v){var A;if(""===T.path)return"full"===T.pathMatch&&(I.hasChildren()||v.length>0)?{...Mr}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const Z=(T.matcher||Qn)(v,I,T);if(!Z)return{...Mr};const te={};$n(Z.posParams,(qe,Ot)=>{te[Ot]=qe.path});const oe=Z.consumed.length>0?{...te,...Z.consumed[Z.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:Z.consumed,remainingSegments:v.slice(Z.consumed.length),parameters:oe,positionalParamSegments:null!==(A=Z.posParams)&&void 0!==A?A:{}}}function Qr(I,T,v,A,O="corrected"){if(v.length>0&&function ns(I,T,v){return v.some(A=>Qi(I,T,A)&&pi(A)!==pt)}(I,v,A)){const te=new pn(T,function Bs(I,T,v,A){const O={};O[pt]=A,A._sourceSegment=I,A._segmentIndexShift=T.length;for(const Z of v)if(""===Z.path&&pi(Z)!==pt){const te=new pn([],{});te._sourceSegment=I,te._segmentIndexShift=T.length,O[pi(Z)]=te}return O}(I,T,A,new pn(v,I.children)));return te._sourceSegment=I,te._segmentIndexShift=T.length,{segmentGroup:te,slicedSegments:[]}}if(0===v.length&&function bo(I,T,v){return v.some(A=>Qi(I,T,A))}(I,v,A)){const te=new pn(I.segments,function li(I,T,v,A,O,Z){const te={};for(const oe of A)if(Qi(I,v,oe)&&!O[pi(oe)]){const qe=new pn([],{});qe._sourceSegment=I,qe._segmentIndexShift="legacy"===Z?I.segments.length:T.length,te[pi(oe)]=qe}return{...O,...te}}(I,T,v,A,I.children,O));return te._sourceSegment=I,te._segmentIndexShift=T.length,{segmentGroup:te,slicedSegments:v}}const Z=new pn(I.segments,I.children);return Z._sourceSegment=I,Z._segmentIndexShift=T.length,{segmentGroup:Z,slicedSegments:v}}function Qi(I,T,v){return(!(I.hasChildren()||T.length>0)||"full"!==v.pathMatch)&&""===v.path}function R(I,T,v,A){return!!(pi(I)===A||A!==pt&&Qi(T,v,I))&&("**"===I.path||xr(T,I,v).matched)}function H(I,T,v){return 0===T.length&&!I.children[v]}const N=!1;class K{constructor(T){this.segmentGroup=T||null}}class S{constructor(T){this.urlTree=T}}function g(I){return(0,ae._)(new K(I))}function y(I){return(0,ae._)(new S(I))}class de{constructor(T,v,A,O,Z){this.injector=T,this.configLoader=v,this.urlSerializer=A,this.urlTree=O,this.config=Z,this.allowRedirects=!0}apply(){const T=Qr(this.urlTree.root,[],[],this.config).segmentGroup,v=new pn(T.segments,T.children);return this.expandSegmentGroup(this.injector,this.config,v,pt).pipe((0,mt.U)(Z=>this.createUrlTree(ie(Z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(we(Z=>{if(Z instanceof S)return this.allowRedirects=!1,this.match(Z.urlTree);throw Z instanceof K?this.noMatchError(Z):Z}))}match(T){return this.expandSegmentGroup(this.injector,this.config,T.root,pt).pipe((0,mt.U)(O=>this.createUrlTree(ie(O),T.queryParams,T.fragment))).pipe(we(O=>{throw O instanceof K?this.noMatchError(O):O}))}noMatchError(T){return new w.vHH(4002,N)}createUrlTree(T,v,A){const O=se(T);return new Kn(O,v,A)}expandSegmentGroup(T,v,A,O){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(T,v,A).pipe((0,mt.U)(Z=>new pn([],Z))):this.expandSegment(T,A,v,A.segments,O,!0)}expandChildren(T,v,A){const O=[];for(const Z of Object.keys(A.children))"primary"===Z?O.unshift(Z):O.push(Z);return(0,W.D)(O).pipe((0,Ne.b)(Z=>{const te=A.children[Z],oe=Ii(v,Z);return this.expandSegmentGroup(T,oe,te,Z).pipe((0,mt.U)(qe=>({segment:qe,outlet:Z})))}),(0,Pe.R)((Z,te)=>(Z[te.outlet]=te.segment,Z),{}),yn())}expandSegment(T,v,A,O,Z,te){return(0,W.D)(A).pipe((0,Ne.b)(oe=>this.expandSegmentAgainstRoute(T,v,A,oe,O,Z,te).pipe(we(Ot=>{if(Ot instanceof K)return(0,G.of)(null);throw Ot}))),(0,Ee.P)(oe=>!!oe),we((oe,qe)=>{if(J(oe))return H(v,O,Z)?(0,G.of)(new pn([],{})):g(v);throw oe}))}expandSegmentAgainstRoute(T,v,A,O,Z,te,oe){return R(O,v,Z,te)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(T,v,O,Z,te):oe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,v,A,O,Z,te):g(v):g(v)}expandSegmentAgainstRouteUsingRedirect(T,v,A,O,Z,te){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,A,O,te):this.expandRegularSegmentAgainstRouteUsingRedirect(T,v,A,O,Z,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,v,A,O){const Z=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?y(Z):this.lineralizeSegments(A,Z).pipe((0,Ve.z)(te=>{const oe=new pn(te,{});return this.expandSegment(T,oe,v,te,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,v,A,O,Z,te){const{matched:oe,consumedSegments:qe,remainingSegments:Ot,positionalParamSegments:tn}=xr(v,O,Z);if(!oe)return g(v);const Wt=this.applyRedirectCommands(qe,O.redirectTo,tn);return O.redirectTo.startsWith("/")?y(Wt):this.lineralizeSegments(O,Wt).pipe((0,Ve.z)(Me=>this.expandSegment(T,v,A,Me.concat(Ot),te,!1)))}matchSegmentAgainstRoute(T,v,A,O,Z){return"**"===A.path?(T=ai(A,T),A.loadChildren?(A._loadedRoutes?(0,G.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(T,A)).pipe((0,mt.U)(oe=>(A._loadedRoutes=oe.routes,A._loadedInjector=oe.injector,new pn(O,{})))):(0,G.of)(new pn(O,{}))):Us(v,A,O,T).pipe((0,Qe.w)(({matched:te,consumedSegments:oe,remainingSegments:qe})=>{var Ot;return te?(T=null!==(Ot=A._injector)&&void 0!==Ot?Ot:T,this.getChildConfig(T,A,O).pipe((0,Ve.z)(Wt=>{var Me;const Or=null!==(Me=Wt.injector)&&void 0!==Me?Me:T,Yr=Wt.routes,{segmentGroup:ro,slicedSegments:Ts}=Qr(v,oe,qe,Yr),is=new pn(ro.segments,ro.children);if(0===Ts.length&&is.hasChildren())return this.expandChildren(Or,Yr,is).pipe((0,mt.U)(yo=>new pn(oe,yo)));if(0===Yr.length&&0===Ts.length)return(0,G.of)(new pn(oe,{}));const Go=pi(A)===Z;return this.expandSegment(Or,is,Yr,Ts,Go?pt:Z,!0).pipe((0,mt.U)(mo=>new pn(oe.concat(mo.segments),mo.children)))}))):g(v)}))}getChildConfig(T,v,A){return v.children?(0,G.of)({routes:v.children,injector:T}):v.loadChildren?void 0!==v._loadedRoutes?(0,G.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function Zr(I,T,v,A){const O=T.canLoad;if(void 0===O||0===O.length)return(0,G.of)(!0);const Z=O.map(te=>{const oe=Xs(te,I);return ur(function $o(I){return I&&Cn(I.canLoad)}(oe)?oe.canLoad(T,v):I.runInContext(()=>oe(T,v)))});return(0,G.of)(Z).pipe(Re(),Hr())}(T,v,A).pipe((0,Ve.z)(O=>O?this.configLoader.loadChildren(T,v).pipe((0,ft.b)(Z=>{v._loadedRoutes=Z.routes,v._loadedInjector=Z.injector})):function z(I){return(0,ae._)(Uo(N,3))}())):(0,G.of)({routes:[],injector:T})}lineralizeSegments(T,v){let A=[],O=v.root;for(;;){if(A=A.concat(O.segments),0===O.numberOfChildren)return(0,G.of)(A);if(O.numberOfChildren>1||!O.children[pt])return(0,ae._)(new w.vHH(4e3,N));O=O.children[pt]}}applyRedirectCommands(T,v,A){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),T,A)}applyRedirectCreateUrlTree(T,v,A,O){const Z=this.createSegmentGroup(T,v.root,A,O);return new Kn(Z,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(T,v){const A={};return $n(T,(O,Z)=>{if("string"==typeof O&&O.startsWith(":")){const oe=O.substring(1);A[Z]=v[oe]}else A[Z]=O}),A}createSegmentGroup(T,v,A,O){const Z=this.createSegments(T,v.segments,A,O);let te={};return $n(v.children,(oe,qe)=>{te[qe]=this.createSegmentGroup(T,oe,A,O)}),new pn(Z,te)}createSegments(T,v,A,O){return v.map(Z=>Z.path.startsWith(":")?this.findPosParam(T,Z,O):this.findOrReturn(Z,A))}findPosParam(T,v,A){const O=A[v.path.substring(1)];if(!O)throw new w.vHH(4001,N);return O}findOrReturn(T,v){let A=0;for(const O of v){if(O.path===T.path)return v.splice(A),O;A++}return T}}class tt{}class Tn{constructor(T,v,A,O,Z,te,oe,qe){this.injector=T,this.rootComponentType=v,this.config=A,this.urlTree=O,this.url=Z,this.paramsInheritanceStrategy=te,this.relativeLinkResolution=oe,this.urlSerializer=qe}recognize(){const T=Qr(this.urlTree.root,[],[],this.config.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,T,pt).pipe((0,mt.U)(v=>{if(null===v)return null;const A=new ys([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pt,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new ze(A,v),Z=new Ni(this.url,O);return this.inheritParamsAndData(Z._root),Z}))}inheritParamsAndData(T){const v=T.value,A=gr(v,this.paramsInheritanceStrategy);v.params=Object.freeze(A.params),v.data=Object.freeze(A.data),T.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(T,v,A,O){return 0===A.segments.length&&A.hasChildren()?this.processChildren(T,v,A):this.processSegment(T,v,A,A.segments,O)}processChildren(T,v,A){return(0,W.D)(Object.keys(A.children)).pipe((0,Ne.b)(O=>{const Z=A.children[O],te=Ii(v,O);return this.processSegmentGroup(T,te,Z,O)}),(0,Pe.R)((O,Z)=>O&&Z?(O.push(...Z),O):null),(0,On.o)(O=>null!==O),(0,Mt.d)(null),yn(),(0,mt.U)(O=>{if(null===O)return null;const Z=An(O);return function bn(I){I.sort((T,v)=>T.value.outlet===pt?-1:v.value.outlet===pt?1:T.value.outlet.localeCompare(v.value.outlet))}(Z),Z}))}processSegment(T,v,A,O,Z){return(0,W.D)(v).pipe((0,Ne.b)(te=>{var oe;return this.processSegmentAgainstRoute(null!==(oe=te._injector)&&void 0!==oe?oe:T,te,A,O,Z)}),(0,Ee.P)(te=>!!te),we(te=>{if(J(te))return H(A,O,Z)?(0,G.of)([]):(0,G.of)(null);throw te}))}processSegmentAgainstRoute(T,v,A,O,Z){if(v.redirectTo||!R(v,A,O,Z))return(0,G.of)(null);let te;if("**"===v.path){var oe,qe;const Ot=O.length>0?Lr(O).parameters:{},tn=Pr(A)+O.length,Wt=new ys(O,Ot,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hi(v),pi(v),null!==(oe=null!==(qe=v.component)&&void 0!==qe?qe:v._loadedComponent)&&void 0!==oe?oe:null,v,ji(A),tn,ho(v),tn);te=(0,G.of)({snapshot:Wt,consumedSegments:[],remainingSegments:[]})}else te=Us(A,v,O,T).pipe((0,mt.U)(({matched:Ot,consumedSegments:tn,remainingSegments:Wt,parameters:Me})=>{var Or,Yr;if(!Ot)return null;const ro=Pr(A)+tn.length;return{snapshot:new ys(tn,Me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hi(v),pi(v),null!==(Or=null!==(Yr=v.component)&&void 0!==Yr?Yr:v._loadedComponent)&&void 0!==Or?Or:null,v,ji(A),ro,ho(v),ro),consumedSegments:tn,remainingSegments:Wt}}));return te.pipe((0,Qe.w)(Ot=>{var tn,Wt;if(null===Ot)return(0,G.of)(null);const{snapshot:Me,consumedSegments:Or,remainingSegments:Yr}=Ot;T=null!==(tn=v._injector)&&void 0!==tn?tn:T;const ro=null!==(Wt=v._loadedInjector)&&void 0!==Wt?Wt:T,Ts=function _n(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(v),{segmentGroup:is,slicedSegments:Go}=Qr(A,Or,Yr,Ts.filter(mo=>void 0===mo.redirectTo),this.relativeLinkResolution);if(0===Go.length&&is.hasChildren())return this.processChildren(ro,Ts,is).pipe((0,mt.U)(mo=>null===mo?null:[new ze(Me,mo)]));if(0===Ts.length&&0===Go.length)return(0,G.of)([new ze(Me,[])]);const go=pi(v)===Z;return this.processSegment(ro,Ts,is,Go,go?pt:Z).pipe((0,mt.U)(mo=>null===mo?null:[new ze(Me,mo)]))}))}}function hn(I){const T=I.value.routeConfig;return T&&""===T.path&&void 0===T.redirectTo}function An(I){const T=[],v=new Set;for(const A of I){if(!hn(A)){T.push(A);continue}const O=T.find(Z=>A.value.routeConfig===Z.value.routeConfig);void 0!==O?(O.children.push(...A.children),v.add(O)):T.push(A)}for(const A of v){const O=An(A.children);T.push(new ze(A.value,O))}return T.filter(A=>!v.has(A))}function ji(I){let T=I;for(;T._sourceSegment;)T=T._sourceSegment;return T}function Pr(I){var T;let v=I,A=null!==(T=v._segmentIndexShift)&&void 0!==T?T:0;for(;v._sourceSegment;){var O;v=v._sourceSegment,A+=null!==(O=v._segmentIndexShift)&&void 0!==O?O:0}return A-1}function Hi(I){return I.data||{}}function ho(I){return I.resolve||{}}function Js(I){return"string"==typeof I.title||null===I.title}function eo(I){return(0,Qe.w)(T=>{const v=I(T);return v?(0,W.D)(v).pipe((0,mt.U)(()=>T)):(0,G.of)(T)})}let Jo=(()=>{class I{buildTitle(v){let A,O=v.root;for(;void 0!==O;){var Z;A=null!==(Z=this.getResolvedTitleForRoute(O))&&void 0!==Z?Z:A,O=O.children.find(te=>te.outlet===pt)}return A}getResolvedTitleForRoute(v){return v.data[jn]}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=w.Yz7({token:I,factory:function(){return(0,w.f3M)(Yt)},providedIn:"root"}),I})(),Yt=(()=>{class I extends Jo{constructor(v){super(),this.title=v}updateTitle(v){const A=this.buildTitle(v);void 0!==A&&this.title.setTitle(A)}}return I.\u0275fac=function(v){return new(v||I)(w.LFG(en.Dx))},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class rn{}class Gr extends class Nn{shouldDetach(T){return!1}store(T,v){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,v){return T.routeConfig===v.routeConfig}}{}const Bi=new w.OlP("",{providedIn:"root",factory:()=>({})}),or=new w.OlP("ROUTES");let Aa=(()=>{class I{constructor(v,A){this.injector=v,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,G.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const A=ur(v.loadComponent()).pipe((0,ft.b)(Z=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=Z}),Dt(()=>{this.componentLoaders.delete(v)})),O=new ct.c(A,()=>new it.x).pipe((0,nr.x)());return this.componentLoaders.set(v,O),O}loadChildren(v,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,G.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const Z=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,mt.U)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(A);let qe,Ot,tn=!1;Array.isArray(oe)?Ot=oe:(qe=oe.create(v).injector,Ot=dr(qe.get(or,[],w.XFs.Self|w.XFs.Optional)));return{routes:Ot.map(Zi),injector:qe}}),Dt(()=>{this.childrenLoaders.delete(A)})),te=new ct.c(Z,()=>new it.x).pipe((0,nr.x)());return this.childrenLoaders.set(A,te),te}loadModuleFactoryOrRoutes(v){return ur(v()).pipe((0,Ve.z)(A=>A instanceof w.YKP||Array.isArray(A)?(0,G.of)(A):(0,W.D)(this.compiler.compileModuleAsync(A))))}}return I.\u0275fac=function(v){return new(v||I)(w.LFG(w.zs3),w.LFG(w.Sil))},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class Ra{}class Gi{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,v){return T}}function rs(I){throw I}function Ho(I,T,v){return T.parse("/")}const _a={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Va={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Eu(){var I,T;const v=(0,w.f3M)(Fn),A=(0,w.f3M)(wi),O=(0,w.f3M)(Xe.Ye),Z=(0,w.f3M)(w.zs3),te=(0,w.f3M)(w.Sil),oe=null!==(I=(0,w.f3M)(or,{optional:!0}))&&void 0!==I?I:[],qe=null!==(T=(0,w.f3M)(Bi,{optional:!0}))&&void 0!==T?T:{},Ot=(0,w.f3M)(Yt),tn=(0,w.f3M)(Jo,{optional:!0}),Wt=(0,w.f3M)(Ra,{optional:!0}),Me=(0,w.f3M)(rn,{optional:!0}),Or=new Di(null,v,A,O,Z,te,dr(oe));return Wt&&(Or.urlHandlingStrategy=Wt),Me&&(Or.routeReuseStrategy=Me),Or.titleStrategy=tn??Ot,function ll(I,T){I.errorHandler&&(T.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(T.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(T.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(T.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(T.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(T.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(T.canceledNavigationResolution=I.canceledNavigationResolution)}(qe,Or),Or}let Di=(()=>{class I{constructor(v,A,O,Z,te,oe,qe){this.rootComponentType=v,this.urlSerializer=A,this.rootContexts=O,this.location=Z,this.config=qe,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new it.x,this.errorHandler=rs,this.malformedUriErrorHandler=Ho,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,G.of)(void 0),this.urlHandlingStrategy=new Gi,this.routeReuseStrategy=new Gr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=te.get(Aa),this.configLoader.onLoadEndListener=Me=>this.triggerEvent(new ao(Me)),this.configLoader.onLoadStartListener=Me=>this.triggerEvent(new ms(Me)),this.ngModule=te.get(w.h0i),this.console=te.get(w.c2e);const Wt=te.get(w.R0b);this.isNgZoneEnabled=Wt instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(qe),this.currentUrlTree=function Fr(){return new Kn(new pn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gn(this.currentUrlTree,this.rootComponentType),this.transitions=new fe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var v;return null===(v=this.location.getState())||void 0===v?void 0:v.\u0275routerPageId}setupNavigations(v){const A=this.events;return v.pipe((0,St.h)(O=>0!==O.id),(0,mt.U)(O=>({...O,extractedUrl:this.urlHandlingStrategy.extract(O.rawUrl)})),(0,Qe.w)(O=>{let Z=!1,te=!1;return(0,G.of)(O).pipe((0,ft.b)(oe=>{this.currentNavigation={id:oe.id,initialUrl:oe.rawUrl,extractedUrl:oe.extractedUrl,trigger:oe.source,extras:oe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Qe.w)(oe=>{const qe=this.browserUrlTree.toString(),Ot=!this.navigated||oe.extractedUrl.toString()!==qe||qe!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ot)&&this.urlHandlingStrategy.shouldProcessUrl(oe.rawUrl))return gi(oe.source)&&(this.browserUrlTree=oe.extractedUrl),(0,G.of)(oe).pipe((0,Qe.w)(Wt=>{const Me=this.transitions.getValue();return A.next(new Ji(Wt.id,this.serializeUrl(Wt.extractedUrl),Wt.source,Wt.restoredState)),Me!==this.transitions.getValue()?ve.E:Promise.resolve(Wt)}),function ce(I,T,v,A){return(0,Qe.w)(O=>function X(I,T,v,A,O){return new de(I,T,v,A,O).apply()}(I,T,v,O.extractedUrl,A).pipe((0,mt.U)(Z=>({...O,urlAfterRedirects:Z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ft.b)(Wt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Wt.urlAfterRedirects},O.urlAfterRedirects=Wt.urlAfterRedirects}),function qn(I,T,v,A,O,Z){return(0,Ve.z)(te=>function Gt(I,T,v,A,O,Z,te="emptyOnly",oe="legacy"){return new Tn(I,T,v,A,O,te,oe,Z).recognize().pipe((0,Qe.w)(qe=>null===qe?function bt(I){return new ue.y(T=>T.error(I))}(new tt):(0,G.of)(qe)))}(I,T,v,te.urlAfterRedirects,A.serialize(te.urlAfterRedirects),A,O,Z).pipe((0,mt.U)(oe=>({...te,targetSnapshot:oe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ft.b)(Wt=>{if(O.targetSnapshot=Wt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Wt.extras.skipLocationChange){const Or=this.urlHandlingStrategy.merge(Wt.urlAfterRedirects,Wt.rawUrl);this.setBrowserUrl(Or,Wt)}this.browserUrlTree=Wt.urlAfterRedirects}const Me=new ii(Wt.id,this.serializeUrl(Wt.extractedUrl),this.serializeUrl(Wt.urlAfterRedirects),Wt.targetSnapshot);A.next(Me)}));if(Ot&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Me,extractedUrl:Or,source:Yr,restoredState:ro,extras:Ts}=oe,is=new Ji(Me,this.serializeUrl(Or),Yr,ro);A.next(is);const Go=gn(Or,this.rootComponentType).snapshot;return O={...oe,targetSnapshot:Go,urlAfterRedirects:Or,extras:{...Ts,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(O)}return this.rawUrlTree=oe.rawUrl,oe.resolve(null),ve.E}),(0,ft.b)(oe=>{const qe=new js(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot);this.triggerEvent(qe)}),(0,mt.U)(oe=>O={...oe,guards:Do(oe.targetSnapshot,oe.currentSnapshot,this.rootContexts)}),function rt(I,T){return(0,Ve.z)(v=>{const{targetSnapshot:A,currentSnapshot:O,guards:{canActivateChecks:Z,canDeactivateChecks:te}}=v;return 0===te.length&&0===Z.length?(0,G.of)({...v,guardsResult:!0}):function dt(I,T,v,A){return(0,W.D)(I).pipe((0,Ve.z)(O=>function Dr(I,T,v,A,O){const Z=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,G.of)(!0);const te=Z.map(oe=>{var qe;const Ot=null!==(qe=Oi(T))&&void 0!==qe?qe:O,tn=Xs(oe,Ot);return ur(function To(I){return I&&Cn(I.canDeactivate)}(tn)?tn.canDeactivate(I,T,v,A):Ot.runInContext(()=>tn(I,T,v,A))).pipe((0,Ee.P)())});return(0,G.of)(te).pipe(Re())}(O.component,O.route,v,T,A)),(0,Ee.P)(O=>!0!==O,!0))}(te,A,O,I).pipe((0,Ve.z)(oe=>oe&&function Yo(I){return"boolean"==typeof I}(oe)?function zt(I,T,v,A){return(0,W.D)(T).pipe((0,Ne.b)(O=>(0,De.z)(function vn(I,T){return null!==I&&T&&T(new ko(I)),(0,G.of)(!0)}(O.route.parent,A),function Ct(I,T){return null!==I&&T&&T(new Zo(I)),(0,G.of)(!0)}(O.route,A),function ui(I,T,v){const A=T[T.length-1],Z=T.slice(0,T.length-1).reverse().map(te=>function ua(I){const T=I.routeConfig?I.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:I,guards:T}:null}(te)).filter(te=>null!==te).map(te=>(0,ge.P)(()=>{const oe=te.guards.map(qe=>{var Ot;const tn=null!==(Ot=Oi(te.node))&&void 0!==Ot?Ot:v,Wt=Xs(qe,tn);return ur(function Xo(I){return I&&Cn(I.canActivateChild)}(Wt)?Wt.canActivateChild(A,I):tn.runInContext(()=>Wt(A,I))).pipe((0,Ee.P)())});return(0,G.of)(oe).pipe(Re())}));return(0,G.of)(Z).pipe(Re())}(I,O.path,v),function xn(I,T,v){const A=T.routeConfig?T.routeConfig.canActivate:null;if(!A||0===A.length)return(0,G.of)(!0);const O=A.map(Z=>(0,ge.P)(()=>{var te;const oe=null!==(te=Oi(T))&&void 0!==te?te:v,qe=Xs(Z,oe);return ur(function qr(I){return I&&Cn(I.canActivate)}(qe)?qe.canActivate(T,I):oe.runInContext(()=>qe(T,I))).pipe((0,Ee.P)())}));return(0,G.of)(O).pipe(Re())}(I,O.route,v))),(0,Ee.P)(O=>!0!==O,!0))}(A,Z,I,T):(0,G.of)(oe)),(0,mt.U)(oe=>({...v,guardsResult:oe})))})}(this.ngModule.injector,oe=>this.triggerEvent(oe)),(0,ft.b)(oe=>{if(O.guardsResult=oe.guardsResult,Ae(oe.guardsResult))throw co(0,oe.guardsResult);const qe=new Ci(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot,!!oe.guardsResult);this.triggerEvent(qe)}),(0,St.h)(oe=>!!oe.guardsResult||(this.restoreHistory(oe),this.cancelNavigationTransition(oe,"",3),!1)),eo(oe=>{if(oe.guards.canActivateChecks.length)return(0,G.of)(oe).pipe((0,ft.b)(qe=>{const Ot=new es(qe.id,this.serializeUrl(qe.extractedUrl),this.serializeUrl(qe.urlAfterRedirects),qe.targetSnapshot);this.triggerEvent(Ot)}),(0,Qe.w)(qe=>{let Ot=!1;return(0,G.of)(qe).pipe(function fo(I,T){return(0,Ve.z)(v=>{const{targetSnapshot:A,guards:{canActivateChecks:O}}=v;if(!O.length)return(0,G.of)(v);let Z=0;return(0,W.D)(O).pipe((0,Ne.b)(te=>function jo(I,T,v,A){const O=I.routeConfig,Z=I._resolve;return void 0!==O?.title&&!Js(O)&&(Z[jn]=O.title),function zi(I,T,v,A){const O=function ya(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===O.length)return(0,G.of)({});const Z={};return(0,W.D)(O).pipe((0,Ve.z)(te=>function po(I,T,v,A){var O;const Z=null!==(O=Oi(T))&&void 0!==O?O:A,te=Xs(I,Z);return ur(te.resolve?te.resolve(T,v):Z.runInContext(()=>te(T,v)))}(I[te],T,v,A).pipe((0,Ee.P)(),(0,ft.b)(oe=>{Z[te]=oe}))),ot(1),function Rn(I){return(0,mt.U)(()=>I)}(Z),we(te=>J(te)?ve.E:(0,ae._)(te)))}(Z,I,T,A).pipe((0,mt.U)(te=>(I._resolvedData=te,I.data=gr(I,v).resolve,O&&Js(O)&&(I.data[jn]=O.title),null)))}(te.route,A,I,T)),(0,ft.b)(()=>Z++),ot(1),(0,Ve.z)(te=>Z===O.length?(0,G.of)(v):ve.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ft.b)({next:()=>Ot=!0,complete:()=>{Ot||(this.restoreHistory(qe),this.cancelNavigationTransition(qe,"",2))}}))}),(0,ft.b)(qe=>{const Ot=new Rr(qe.id,this.serializeUrl(qe.extractedUrl),this.serializeUrl(qe.urlAfterRedirects),qe.targetSnapshot);this.triggerEvent(Ot)}))}),eo(oe=>{const qe=Ot=>{var tn;const Wt=[];null!==(tn=Ot.routeConfig)&&void 0!==tn&&tn.loadComponent&&!Ot.routeConfig._loadedComponent&&Wt.push(this.configLoader.loadComponent(Ot.routeConfig).pipe((0,ft.b)(Me=>{Ot.component=Me}),(0,mt.U)(()=>{})));for(const Me of Ot.children)Wt.push(...qe(Me));return Wt};return(0,_e.a)(qe(oe.targetSnapshot.root)).pipe((0,Mt.d)(),(0,nt.q)(1))}),eo(()=>this.afterPreactivation()),(0,mt.U)(oe=>{const qe=function vs(I,T,v){const A=Es(I,T._root,v?v._root:void 0);return new Rt(A,T)}(this.routeReuseStrategy,oe.targetSnapshot,oe.currentRouterState);return O={...oe,targetRouterState:qe}}),(0,ft.b)(oe=>{this.currentUrlTree=oe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(oe.urlAfterRedirects,oe.rawUrl),this.routerState=oe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(oe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,oe),this.browserUrlTree=oe.urlAfterRedirects)}),((I,T,v)=>(0,mt.U)(A=>(new dn(T,A.targetRouterState,A.currentRouterState,v).activate(I),A)))(this.rootContexts,this.routeReuseStrategy,oe=>this.triggerEvent(oe)),(0,ft.b)({next(){Z=!0},complete(){Z=!0}}),Dt(()=>{var oe;Z||te||this.cancelNavigationTransition(O,"",1),(null===(oe=this.currentNavigation)||void 0===oe?void 0:oe.id)===O.id&&(this.currentNavigation=null)}),we(oe=>{if(te=!0,ga(oe)){Bo(oe)||(this.navigated=!0,this.restoreHistory(O,!0));const Ot=new ks(O.id,this.serializeUrl(O.extractedUrl),oe.message,oe.cancellationCode);if(A.next(Ot),Bo(oe)){const tn=this.urlHandlingStrategy.merge(oe.url,this.rawUrlTree),Wt={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||gi(O.source)};this.scheduleNavigation(tn,"imperative",null,Wt,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{var qe;this.restoreHistory(O,!0);const Ot=new Kr(O.id,this.serializeUrl(O.extractedUrl),oe,null!==(qe=O.targetSnapshot)&&void 0!==qe?qe:void 0);A.next(Ot);try{O.resolve(this.errorHandler(oe))}catch(tn){O.reject(tn)}}return ve.E}))}))}resetRootComponentType(v){this.rootComponentType=v,this.routerState.root.component=this.rootComponentType}setTransition(v){this.transitions.next({...this.transitions.value,...v})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const A="popstate"===v.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{var O;const Z={replaceUrl:!0},te=null!==(O=v.state)&&void 0!==O&&O.navigationId?v.state:null;if(te){const qe={...te};delete qe.navigationId,delete qe.\u0275routerPageId,0!==Object.keys(qe).length&&(Z.state=qe)}const oe=this.parseUrl(v.url);this.scheduleNavigation(oe,A,te,Z)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(v){this.events.next(v)}resetConfig(v){this.config=v.map(Zi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,A={}){const{relativeTo:O,queryParams:Z,fragment:te,queryParamsHandling:oe,preserveFragment:qe}=A,Ot=O||this.routerState.root,tn=qe?this.currentUrlTree.fragment:te;let Wt=null;switch(oe){case"merge":Wt={...this.currentUrlTree.queryParams,...Z};break;case"preserve":Wt=this.currentUrlTree.queryParams;break;default:Wt=Z||null}return null!==Wt&&(Wt=this.removeEmptyProps(Wt)),ke(Ot,this.currentUrlTree,v,Wt,tn??null)}navigateByUrl(v,A={skipLocationChange:!1}){const O=Ae(v)?v:this.parseUrl(v),Z=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(Z,"imperative",null,A)}navigate(v,A={skipLocationChange:!1}){return function Xl(I){for(let T=0;T<I.length;T++){if(null==I[T])throw new w.vHH(4008,false)}}(v),this.navigateByUrl(this.createUrlTree(v,A),A)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let A;try{A=this.urlSerializer.parse(v)}catch(O){A=this.malformedUriErrorHandler(O,this.urlSerializer,v)}return A}isActive(v,A){let O;if(O=!0===A?{..._a}:!1===A?{...Va}:A,Ae(v))return ls(this.currentUrlTree,v,O);const Z=this.parseUrl(v);return ls(this.currentUrlTree,Z,O)}removeEmptyProps(v){return Object.keys(v).reduce((A,O)=>{const Z=v[O];return null!=Z&&(A[O]=Z),A},{})}processNavigations(){this.navigations.subscribe(v=>{var A;this.navigated=!0,this.lastSuccessfulId=v.id,this.currentPageId=v.targetPageId,this.events.next(new Un(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(A=this.titleStrategy)||void 0===A||A.updateTitle(this.routerState.snapshot),v.resolve(!0)},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}scheduleNavigation(v,A,O,Z,te){if(this.disposed)return Promise.resolve(!1);let oe,qe,Ot;te?(oe=te.resolve,qe=te.reject,Ot=te.promise):Ot=new Promise((Yr,ro)=>{oe=Yr,qe=ro});const tn=++this.navigationId;let Wt;if("computed"===this.canceledNavigationResolution)if(0===this.currentPageId&&(O=this.location.getState()),O&&O.\u0275routerPageId)Wt=O.\u0275routerPageId;else if(Z.replaceUrl||Z.skipLocationChange){var Me;Wt=null!==(Me=this.browserPageId)&&void 0!==Me?Me:0}else{var Or;Wt=(null!==(Or=this.browserPageId)&&void 0!==Or?Or:0)+1}else Wt=0;return this.setTransition({id:tn,targetPageId:Wt,source:A,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:v,extras:Z,resolve:oe,reject:qe,promise:Ot,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ot.catch(Yr=>Promise.reject(Yr))}setBrowserUrl(v,A){const O=this.urlSerializer.serialize(v),Z={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(O)||A.extras.replaceUrl?this.location.replaceState(O,"",Z):this.location.go(O,"",Z)}restoreHistory(v,A=!1){if("computed"===this.canceledNavigationResolution){var O,Z;const te=this.currentPageId-v.targetPageId;"popstate"!==v.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(O=this.currentNavigation)||void 0===O?void 0:O.finalUrl)||0===te?this.currentUrlTree===(null===(Z=this.currentNavigation)||void 0===Z?void 0:Z.finalUrl)&&0===te&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(te)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(v,A,O){const Z=new ks(v.id,this.serializeUrl(v.extractedUrl),A,O);this.triggerEvent(Z),v.resolve(!1)}generateNgRouterState(v,A){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:A}:{navigationId:v}}}return I.\u0275fac=function(v){w.$Z()},I.\u0275prov=w.Yz7({token:I,factory:function(){return Eu()},providedIn:"root"}),I})();function gi(I){return"imperative"!==I}let Co=(()=>{class I{constructor(v,A,O,Z,te){this.router=v,this.route=A,this.tabIndexAttribute=O,this.renderer=Z,this.el=te,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new it.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(v){this._preserveFragment=(0,w.D6c)(v)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(v){this._skipLocationChange=(0,w.D6c)(v)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(v){this._replaceUrl=(0,w.D6c)(v)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(v){if(null!=this.tabIndexAttribute)return;const A=this.renderer,O=this.el.nativeElement;null!==v?A.setAttribute(O,"tabindex",v):A.removeAttribute(O,"tabindex")}ngOnChanges(v){this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(v){return new(v||I)(w.Y36(Di),w.Y36(kn),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq))},I.\u0275dir=w.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(v,A){1&v&&w.NdJ("click",function(){return A.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[w.TTD]}),I})(),As=(()=>{class I{constructor(v,A,O){this.router=v,this.route=A,this.locationStrategy=O,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new it.x,this.subscription=v.events.subscribe(Z=>{Z instanceof Un&&this.updateTargetUrlAndHref()})}set preserveFragment(v){this._preserveFragment=(0,w.D6c)(v)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(v){this._skipLocationChange=(0,w.D6c)(v)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(v){this._replaceUrl=(0,w.D6c)(v)}get replaceUrl(){return this._replaceUrl}set routerLink(v){this.commands=null!=v?Array.isArray(v)?v:[v]:null}ngOnChanges(v){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(v,A,O,Z,te){return!!(0!==v||A||O||Z||te||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(v){return new(v||I)(w.Y36(Di),w.Y36(kn),w.Y36(Xe.S$))},I.\u0275dir=w.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(v,A){1&v&&w.NdJ("click",function(Z){return A.onClick(Z.button,Z.ctrlKey,Z.shiftKey,Z.altKey,Z.metaKey)}),2&v&&w.uIk("target",A.target)("href",A.href,w.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[w.TTD]}),I})();class Tt{}let eu=(()=>{class I{constructor(v,A,O,Z,te){this.router=v,this.injector=O,this.preloadingStrategy=Z,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,St.h)(v=>v instanceof Un),(0,Ne.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,A){const O=[];for(const qe of A){var Z,te;qe.providers&&!qe._injector&&(qe._injector=(0,w.MMx)(qe.providers,v,`Route: ${qe.path}`));const Ot=null!==(Z=qe._injector)&&void 0!==Z?Z:v,tn=null!==(te=qe._loadedInjector)&&void 0!==te?te:Ot;if(qe.loadChildren&&!qe._loadedRoutes&&void 0===qe.canLoad||qe.loadComponent&&!qe._loadedComponent)O.push(this.preloadConfig(Ot,qe));else if(qe.children||qe._loadedRoutes){var oe;O.push(this.processRoutes(tn,null!==(oe=qe.children)&&void 0!==oe?oe:qe._loadedRoutes))}}return(0,W.D)(O).pipe((0,Mn.J)())}preloadConfig(v,A){return this.preloadingStrategy.preload(A,()=>{let O;O=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(v,A):(0,G.of)(null);const Z=O.pipe((0,Ve.z)(te=>{var oe;return null===te?(0,G.of)(void 0):(A._loadedRoutes=te.routes,A._loadedInjector=te.injector,this.processRoutes(null!==(oe=te.injector)&&void 0!==oe?oe:v,te.routes))}));if(A.loadComponent&&!A._loadedComponent){const te=this.loader.loadComponent(A);return(0,W.D)([Z,te]).pipe((0,Mn.J)())}return Z})}}return I.\u0275fac=function(v){return new(v||I)(w.LFG(Di),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(Tt),w.LFG(Aa))},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Jt=new w.OlP("");let mn=(()=>{class I{constructor(v,A,O={}){this.router=v,this.viewportScroller=A,this.options=O,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},O.scrollPositionRestoration=O.scrollPositionRestoration||"disabled",O.anchorScrolling=O.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(v=>{v instanceof Ji?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Un&&(this.lastId=v.id,this.scheduleScrollEvent(v,this.router.parseUrl(v.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(v=>{v instanceof Hs&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,A){this.router.triggerEvent(new Hs(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(v){w.$Z()},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac}),I})();function gt(I,T){return{\u0275kind:I,\u0275providers:T}}function Tr(I){return[{provide:or,multi:!0,useValue:I}]}function la(){const I=(0,w.f3M)(w.zs3);return T=>{var v,A;const O=I.get(w.z2F);if(T!==O.components[0])return;const Z=I.get(Di),te=I.get(Ea);1===I.get(ja)&&Z.initialNavigation(),null===(v=I.get(Iu,null,w.XFs.Optional))||void 0===v||v.setUpPreloading(),null===(A=I.get(Jt,null,w.XFs.Optional))||void 0===A||A.init(),Z.resetRootComponentType(O.componentTypes[0]),te.next(),te.complete()}}const Ea=new w.OlP("",{factory:()=>new it.x}),ja=new w.OlP("",{providedIn:"root",factory:()=>1});const Iu=new w.OlP("");function dl(I){return gt(0,[{provide:Iu,useExisting:eu},{provide:Tt,useExisting:I}])}const zo=new w.OlP("ROUTER_FORROOT_GUARD"),Kc=[Xe.Ye,{provide:Fn,useClass:hi},{provide:Di,useFactory:Eu},wi,{provide:kn,useFactory:function Ke(I){return I.routerState.root},deps:[Di]},Aa];function ci(){return new w.PXZ("Router",Di)}let Kt=(()=>{class I{constructor(v){}static forRoot(v,A){return{ngModule:I,providers:[Kc,[],Tr(v),{provide:zo,useFactory:Wi,deps:[[Di,new w.FiY,new w.tp0]]},{provide:Bi,useValue:A||{}},null!=A&&A.useHash?{provide:Xe.S$,useClass:Xe.Do}:{provide:Xe.S$,useClass:Xe.b0},{provide:Jt,useFactory:()=>{const I=(0,w.f3M)(Di),T=(0,w.f3M)(Xe.EM),v=(0,w.f3M)(Bi);return v.scrollOffset&&T.setOffset(v.scrollOffset),new mn(I,T,v)}},null!=A&&A.preloadingStrategy?dl(A.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:ci},null!=A&&A.initialNavigation?Nt(A):[],[{provide:no,useFactory:la},{provide:w.tb,multi:!0,useExisting:no}]]}}static forChild(v){return{ngModule:I,providers:[Tr(v)]}}}return I.\u0275fac=function(v){return new(v||I)(w.LFG(zo,8))},I.\u0275mod=w.oAB({type:I}),I.\u0275inj=w.cJS({imports:[$r]}),I})();function Wi(I){return"guarded"}function Nt(I){return["disabled"===I.initialNavigation?gt(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const T=(0,w.f3M)(Di);return()=>{T.setUpLocationChangeListener()}}},{provide:ja,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?gt(2,[{provide:ja,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:T=>{const v=T.get(Xe.V_,Promise.resolve());let A=!1;return()=>v.then(()=>new Promise(Z=>{const te=T.get(Di),oe=T.get(Ea);(function O(Z){T.get(Di).events.pipe((0,St.h)(oe=>oe instanceof Un||oe instanceof ks||oe instanceof Kr),(0,mt.U)(oe=>oe instanceof Un||oe instanceof ks&&(0===oe.code||1===oe.code)&&null),(0,St.h)(oe=>null!==oe),(0,nt.q)(1)).subscribe(()=>{Z()})})(()=>{Z(!0),A=!0}),te.afterPreactivation=()=>(Z(!0),A||oe.closed?(0,G.of)(void 0):oe),te.initialNavigation()}))}}]).\u0275providers:[]]}const no=new w.OlP("")},3942:(Lt,We,U)=>{U.d(We,{Z:()=>Xe});var w=U(2090),W=U(4859),G=U(6881),fe=U(1877);class pe{constructor(Qe,nt){this._delegate=Qe,this.firebase=nt,(0,G._addComponent)(Qe,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=Qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qe){this._delegate.automaticDataCollectionEnabled=Qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Qe=>{this._delegate.checkDestroyed(),Qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Qe,nt=G._DEFAULT_ENTRY_NAME){var Le;this._delegate.checkDestroyed();const St=this._delegate.container.getProvider(Qe);return!St.isInitialized()&&"EXPLICIT"===(null===(Le=St.getComponent())||void 0===Le?void 0:Le.instantiationMode)&&St.initialize(),St.getImmediate({identifier:nt})}_removeServiceInstance(Qe,nt=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Qe).clearInstance(nt)}_addComponent(Qe){(0,G._addComponent)(this._delegate,Qe)}_addOrOverwriteComponent(Qe){(0,G._addOrOverwriteComponent)(this._delegate,Qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const De=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function xe(){const mt=function ge(mt){const Qe={},nt={__esModule:!0,initializeApp:function Ve(Et,et={}){const He=G.initializeApp(Et,et);if((0,w.r3)(Qe,He.name))return Qe[He.name];const we=new mt(He,nt);return Qe[He.name]=we,we},app:St,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function Ne(Et){const et=Et.name,He=et.replace("-compat","");if(G._registerComponent(Et)&&"PUBLIC"===Et.type){const we=(Pe=St())=>{if("function"!=typeof Pe[He])throw De.create("invalid-app-argument",{appName:et});return Pe[He]()};void 0!==Et.serviceProps&&(0,w.ZB)(we,Et.serviceProps),nt[He]=we,mt.prototype[He]=function(...Pe){return this._getService.bind(this,et).apply(this,Et.multipleInstances?Pe:[])}}return"PUBLIC"===Et.type?nt[He]:null},removeApp:function Le(Et){delete Qe[Et]},useAsService:function ft(Et,et){return"serverAuth"===et?null:et},modularAPIs:G}};function St(Et){if(!(0,w.r3)(Qe,Et=Et||G._DEFAULT_ENTRY_NAME))throw De.create("no-app",{appName:Et});return Qe[Et]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Ee(){return Object.keys(Qe).map(Et=>Qe[Et])}}),St.App=mt,nt}(pe);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:xe,extendNamespace:function Qe(nt){(0,w.ZB)(mt,nt)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),mt}(),ue=new fe.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=ae;!function it(mt){(0,G.registerVersion)("@firebase/app-compat","0.2.10",mt)}()},6881:(Lt,We,U)=>{U.r(We),U.d(We,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>hi,_DEFAULT_ENTRY_NAME:()=>xi,_addComponent:()=>Ht,_addOrOverwriteComponent:()=>nn,_apps:()=>hr,_clearComponents:()=>Br,_components:()=>Ln,_getProvider:()=>pn,_registerComponent:()=>Kn,_removeServiceInstance:()=>Er,deleteApp:()=>Wr,getApp:()=>Ar,getApps:()=>Ir,initializeApp:()=>Hn,onLog:()=>Vr,registerVersion:()=>zr,setLogLevel:()=>rr});var w=U(5861),W=U(4859),G=U(1877),fe=U(2090);let _e,De;const ae=new WeakMap,ue=new WeakMap,ve=new WeakMap,ct=new WeakMap,it=new WeakMap;let Qe={get(Ue,ke,yt){if(Ue instanceof IDBTransaction){if("done"===ke)return ue.get(Ue);if("objectStoreNames"===ke)return Ue.objectStoreNames||ve.get(Ue);if("store"===ke)return yt.objectStoreNames[1]?void 0:yt.objectStore(yt.objectStoreNames[0])}return Ve(Ue[ke])},set:(Ue,ke,yt)=>(Ue[ke]=yt,!0),has:(Ue,ke)=>Ue instanceof IDBTransaction&&("done"===ke||"store"===ke)||ke in Ue};function St(Ue){return"function"==typeof Ue?function Le(Ue){return Ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ue)?function(...ke){return Ue.apply(Ee(this),ke),Ve(ae.get(this))}:function(...ke){return Ve(Ue.apply(Ee(this),ke))}:function(ke,...yt){const vt=Ue.call(Ee(this),ke,...yt);return ve.set(vt,ke.sort?ke.sort():[ke]),Ve(vt)}}(Ue):(Ue instanceof IDBTransaction&&function mt(Ue){if(ue.has(Ue))return;const ke=new Promise((yt,vt)=>{const Zt=()=>{Ue.removeEventListener("complete",Dn),Ue.removeEventListener("error",Yn),Ue.removeEventListener("abort",Yn)},Dn=()=>{yt(),Zt()},Yn=()=>{vt(Ue.error||new DOMException("AbortError","AbortError")),Zt()};Ue.addEventListener("complete",Dn),Ue.addEventListener("error",Yn),Ue.addEventListener("abort",Yn)});ue.set(Ue,ke)}(Ue),((Ue,ke)=>ke.some(yt=>Ue instanceof yt))(Ue,function ge(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ue,Qe):Ue)}function Ve(Ue){if(Ue instanceof IDBRequest)return function Xe(Ue){const ke=new Promise((yt,vt)=>{const Zt=()=>{Ue.removeEventListener("success",Dn),Ue.removeEventListener("error",Yn)},Dn=()=>{yt(Ve(Ue.result)),Zt()},Yn=()=>{vt(Ue.error),Zt()};Ue.addEventListener("success",Dn),Ue.addEventListener("error",Yn)});return ke.then(yt=>{yt instanceof IDBCursor&&ae.set(yt,Ue)}).catch(()=>{}),it.set(ke,Ue),ke}(Ue);if(ct.has(Ue))return ct.get(Ue);const ke=St(Ue);return ke!==Ue&&(ct.set(Ue,ke),it.set(ke,Ue)),ke}const Ee=Ue=>it.get(Ue),Et=["get","getKey","getAll","getAllKeys","count"],et=["put","add","delete","clear"],He=new Map;function we(Ue,ke){if(!(Ue instanceof IDBDatabase)||ke in Ue||"string"!=typeof ke)return;if(He.get(ke))return He.get(ke);const yt=ke.replace(/FromIndex$/,""),vt=ke!==yt,Zt=et.includes(yt);if(!(yt in(vt?IDBIndex:IDBObjectStore).prototype)||!Zt&&!Et.includes(yt))return;const Dn=function(){var Yn=(0,w.Z)(function*(br,...Pn){const _i=this.transaction(br,Zt?"readwrite":"readonly");let bi=_i.store;return vt&&(bi=bi.index(Pn.shift())),(yield Promise.all([bi[yt](...Pn),Zt&&_i.done]))[0]});return function(Pn){return Yn.apply(this,arguments)}}();return He.set(ke,Dn),Dn}!function nt(Ue){Qe=Ue(Qe)}(Ue=>({...Ue,get:(ke,yt,vt)=>we(ke,yt)||Ue.get(ke,yt,vt),has:(ke,yt)=>!!we(ke,yt)||Ue.has(ke,yt)}));class Pe{constructor(ke){this.container=ke}getPlatformInfoString(){return this.container.getProviders().map(yt=>{if(function ot(Ue){return"VERSION"===Ue.getComponent()?.type}(yt)){const vt=yt.getImmediate();return`${vt.library}/${vt.version}`}return null}).filter(yt=>yt).join(" ")}}const je="@firebase/app",It=new G.Yd("@firebase/app"),xi="[DEFAULT]",ti={[je]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hr=new Map,Ln=new Map;function Ht(Ue,ke){try{Ue.container.addComponent(ke)}catch(yt){It.debug(`Component ${ke.name} failed to register with FirebaseApp ${Ue.name}`,yt)}}function nn(Ue,ke){Ue.container.addOrOverwriteComponent(ke)}function Kn(Ue){const ke=Ue.name;if(Ln.has(ke))return It.debug(`There were multiple attempts to register component ${ke}.`),!1;Ln.set(ke,Ue);for(const yt of hr.values())Ht(yt,Ue);return!0}function pn(Ue,ke){const yt=Ue.container.getProvider("heartbeat").getImmediate({optional:!0});return yt&&yt.triggerHeartbeat(),Ue.container.getProvider(ke)}function Er(Ue,ke,yt=xi){pn(Ue,ke).clearInstance(yt)}function Br(){Ln.clear()}const wr=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fn{constructor(ke,yt,vt){this._isDeleted=!1,this._options=Object.assign({},ke),this._config=Object.assign({},yt),this._name=yt.name,this._automaticDataCollectionEnabled=yt.automaticDataCollectionEnabled,this._container=vt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this.checkDestroyed(),this._automaticDataCollectionEnabled=ke}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ke){this._isDeleted=ke}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const hi="9.22.0";function Hn(Ue,ke={}){let yt=Ue;"object"!=typeof ke&&(ke={name:ke});const vt=Object.assign({name:xi,automaticDataCollectionEnabled:!1},ke),Zt=vt.name;if("string"!=typeof Zt||!Zt)throw wr.create("bad-app-name",{appName:String(Zt)});if(yt||(yt=(0,fe.aH)()),!yt)throw wr.create("no-options");const Dn=hr.get(Zt);if(Dn){if((0,fe.vZ)(yt,Dn.options)&&(0,fe.vZ)(vt,Dn.config))return Dn;throw wr.create("duplicate-app",{appName:Zt})}const Yn=new W.H0(Zt);for(const Pn of Ln.values())Yn.addComponent(Pn);const br=new Fn(yt,vt,Yn);return hr.set(Zt,br),br}function Ar(Ue=xi){const ke=hr.get(Ue);if(!ke&&Ue===xi&&(0,fe.aH)())return Hn();if(!ke)throw wr.create("no-app",{appName:Ue});return ke}function Ir(){return Array.from(hr.values())}function Wr(Ue){return _r.apply(this,arguments)}function _r(){return(_r=(0,w.Z)(function*(Ue){const ke=Ue.name;hr.has(ke)&&(hr.delete(ke),yield Promise.all(Ue.container.getProviders().map(yt=>yt.delete())),Ue.isDeleted=!0)})).apply(this,arguments)}function zr(Ue,ke,yt){var vt;let Zt=null!==(vt=ti[Ue])&&void 0!==vt?vt:Ue;yt&&(Zt+=`-${yt}`);const Dn=Zt.match(/\s|\//),Yn=ke.match(/\s|\//);if(Dn||Yn){const br=[`Unable to register library "${Zt}" with version "${ke}":`];return Dn&&br.push(`library name "${Zt}" contains illegal characters (whitespace or "/")`),Dn&&Yn&&br.push("and"),Yn&&br.push(`version name "${ke}" contains illegal characters (whitespace or "/")`),void It.warn(br.join(" "))}Kn(new W.wA(`${Zt}-version`,()=>({library:Zt,version:ke}),"VERSION"))}function Vr(Ue,ke){if(null!==Ue&&"function"!=typeof Ue)throw wr.create("invalid-log-argument");(0,G.Am)(Ue,ke)}function rr(Ue){(0,G.Ub)(Ue)}const ye="firebase-heartbeat-store";let le=null;function Te(){return le||(le=function Ne(Ue,ke,{blocked:yt,upgrade:vt,blocking:Zt,terminated:Dn}={}){const Yn=indexedDB.open(Ue,ke),br=Ve(Yn);return vt&&Yn.addEventListener("upgradeneeded",Pn=>{vt(Ve(Yn.result),Pn.oldVersion,Pn.newVersion,Ve(Yn.transaction),Pn)}),yt&&Yn.addEventListener("blocked",Pn=>yt(Pn.oldVersion,Pn.newVersion,Pn)),br.then(Pn=>{Dn&&Pn.addEventListener("close",()=>Dn()),Zt&&Pn.addEventListener("versionchange",_i=>Zt(_i.oldVersion,_i.newVersion,_i))}).catch(()=>{}),br}("firebase-heartbeat-database",1,{upgrade:(Ue,ke)=>{0===ke&&Ue.createObjectStore(ye)}}).catch(Ue=>{throw wr.create("idb-open",{originalErrorMessage:Ue.message})})),le}function Fe(){return(Fe=(0,w.Z)(function*(Ue){try{return yield(yield Te()).transaction(ye).objectStore(ye).get(In(Ue))}catch(ke){if(ke instanceof fe.ZR)It.warn(ke.message);else{const yt=wr.create("idb-get",{originalErrorMessage:ke?.message});It.warn(yt.message)}}})).apply(this,arguments)}function At(Ue,ke){return ln.apply(this,arguments)}function ln(){return(ln=(0,w.Z)(function*(Ue,ke){try{const vt=(yield Te()).transaction(ye,"readwrite");yield vt.objectStore(ye).put(ke,In(Ue)),yield vt.done}catch(yt){if(yt instanceof fe.ZR)It.warn(yt.message);else{const vt=wr.create("idb-set",{originalErrorMessage:yt?.message});It.warn(vt.message)}}})).apply(this,arguments)}function In(Ue){return`${Ue.name}!${Ue.options.appId}`}class ie{constructor(ke){this.container=ke,this._heartbeatsCache=null;const yt=this.container.getProvider("app").getImmediate();this._storage=new st(yt),this._heartbeatsCachePromise=this._storage.read().then(vt=>(this._heartbeatsCache=vt,vt))}triggerHeartbeat(){var ke=this;return(0,w.Z)(function*(){const vt=ke.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Zt=ee();if(null===ke._heartbeatsCache&&(ke._heartbeatsCache=yield ke._heartbeatsCachePromise),ke._heartbeatsCache.lastSentHeartbeatDate!==Zt&&!ke._heartbeatsCache.heartbeats.some(Dn=>Dn.date===Zt))return ke._heartbeatsCache.heartbeats.push({date:Zt,agent:vt}),ke._heartbeatsCache.heartbeats=ke._heartbeatsCache.heartbeats.filter(Dn=>{const Yn=new Date(Dn.date).valueOf();return Date.now()-Yn<=2592e6}),ke._storage.overwrite(ke._heartbeatsCache)})()}getHeartbeatsHeader(){var ke=this;return(0,w.Z)(function*(){if(null===ke._heartbeatsCache&&(yield ke._heartbeatsCachePromise),null===ke._heartbeatsCache||0===ke._heartbeatsCache.heartbeats.length)return"";const yt=ee(),{heartbeatsToSend:vt,unsentEntries:Zt}=function Ae(Ue,ke=1024){const yt=[];let vt=Ue.slice();for(const Zt of Ue){const Dn=yt.find(Yn=>Yn.agent===Zt.agent);if(Dn){if(Dn.dates.push(Zt.date),Pt(yt)>ke){Dn.dates.pop();break}}else if(yt.push({agent:Zt.agent,dates:[Zt.date]}),Pt(yt)>ke){yt.pop();break}vt=vt.slice(1)}return{heartbeatsToSend:yt,unsentEntries:vt}}(ke._heartbeatsCache.heartbeats),Dn=(0,fe.L)(JSON.stringify({version:2,heartbeats:vt}));return ke._heartbeatsCache.lastSentHeartbeatDate=yt,Zt.length>0?(ke._heartbeatsCache.heartbeats=Zt,yield ke._storage.overwrite(ke._heartbeatsCache)):(ke._heartbeatsCache.heartbeats=[],ke._storage.overwrite(ke._heartbeatsCache)),Dn})()}}function ee(){return(new Date).toISOString().substring(0,10)}class st{constructor(ke){this.app=ke,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ke=this;return(0,w.Z)(function*(){return(yield ke._canUseIndexedDBPromise)&&(yield function Ye(Ue){return Fe.apply(this,arguments)}(ke.app))||{heartbeats:[]}})()}overwrite(ke){var yt=this;return(0,w.Z)(function*(){var vt;if(yield yt._canUseIndexedDBPromise){const Dn=yield yt.read();return At(yt.app,{lastSentHeartbeatDate:null!==(vt=ke.lastSentHeartbeatDate)&&void 0!==vt?vt:Dn.lastSentHeartbeatDate,heartbeats:ke.heartbeats})}})()}add(ke){var yt=this;return(0,w.Z)(function*(){var vt;if(yield yt._canUseIndexedDBPromise){const Dn=yield yt.read();return At(yt.app,{lastSentHeartbeatDate:null!==(vt=ke.lastSentHeartbeatDate)&&void 0!==vt?vt:Dn.lastSentHeartbeatDate,heartbeats:[...Dn.heartbeats,...ke.heartbeats]})}})()}}function Pt(Ue){return(0,fe.L)(JSON.stringify({version:2,heartbeats:Ue})).length}!function on(Ue){Kn(new W.wA("platform-logger",ke=>new Pe(ke),"PRIVATE")),Kn(new W.wA("heartbeat",ke=>new ie(ke),"PRIVATE")),zr(je,"0.9.10",Ue),zr(je,"0.9.10","esm2017"),zr("fire-js","")}("")},4859:(Lt,We,U)=>{U.d(We,{H0:()=>ge,wA:()=>G});var w=U(5861),W=U(2090);class G{constructor(ae,ue,ve){this.name=ae,this.instanceFactory=ue,this.type=ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const fe="[DEFAULT]";class pe{constructor(ae,ue){this.name=ae,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const ue=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(ue)){const ve=new W.BH;if(this.instancesDeferred.set(ue,ve),this.isInitialized(ue)||this.shouldAutoInitialize())try{const ct=this.getOrInitializeService({instanceIdentifier:ue});ct&&ve.resolve(ct)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(ae){var ue;const ve=this.normalizeInstanceIdentifier(ae?.identifier),ct=null!==(ue=ae?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(ve)&&!this.shouldAutoInitialize()){if(ct)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ve})}catch(it){if(ct)return null;throw it}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function De(xe){return"EAGER"===xe.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[ue,ve]of this.instancesDeferred.entries()){const ct=this.normalizeInstanceIdentifier(ue);try{const it=this.getOrInitializeService({instanceIdentifier:ct});ve.resolve(it)}catch{}}}}clearInstance(ae=fe){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,w.Z)(function*(){const ue=Array.from(ae.instances.values());yield Promise.all([...ue.filter(ve=>"INTERNAL"in ve).map(ve=>ve.INTERNAL.delete()),...ue.filter(ve=>"_delete"in ve).map(ve=>ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=fe){return this.instances.has(ae)}getOptions(ae=fe){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:ue={}}=ae,ve=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(ve))throw Error(`${this.name}(${ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ct=this.getOrInitializeService({instanceIdentifier:ve,options:ue});for(const[it,Xe]of this.instancesDeferred.entries())ve===this.normalizeInstanceIdentifier(it)&&Xe.resolve(ct);return ct}onInit(ae,ue){var ve;const ct=this.normalizeInstanceIdentifier(ue),it=null!==(ve=this.onInitCallbacks.get(ct))&&void 0!==ve?ve:new Set;it.add(ae),this.onInitCallbacks.set(ct,it);const Xe=this.instances.get(ct);return Xe&&ae(Xe,ct),()=>{it.delete(ae)}}invokeOnInitCallbacks(ae,ue){const ve=this.onInitCallbacks.get(ue);if(ve)for(const ct of ve)try{ct(ae,ue)}catch{}}getOrInitializeService({instanceIdentifier:ae,options:ue={}}){let ve=this.instances.get(ae);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:(xe=ae,xe===fe?void 0:xe),options:ue}),this.instances.set(ae,ve),this.instancesOptions.set(ae,ue),this.invokeOnInitCallbacks(ve,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,ve)}catch{}var xe;return ve||null}normalizeInstanceIdentifier(ae=fe){return this.component?this.component.multipleInstances?ae:fe:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const ue=this.getProvider(ae.name);if(ue.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);ue.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const ue=new pe(ae,this);return this.providers.set(ae,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(Lt,We,U)=>{U.d(We,{Am:()=>xe,Ub:()=>ge,Yd:()=>De,in:()=>W});const w=[];var W=(()=>{return(ae=W||(W={}))[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",W;var ae})();const G={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},fe=W.INFO,pe={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},_e=(ae,ue,...ve)=>{if(ue<ae.logLevel)return;const ct=(new Date).toISOString(),it=pe[ue];if(!it)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[it](`[${ct}]  ${ae.name}:`,...ve)};class De{constructor(ue){this.name=ue,this._logLevel=fe,this._logHandler=_e,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in W))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?G[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...ue),this._logHandler(this,W.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...ue),this._logHandler(this,W.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,W.INFO,...ue),this._logHandler(this,W.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,W.WARN,...ue),this._logHandler(this,W.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...ue),this._logHandler(this,W.ERROR,...ue)}}function ge(ae){w.forEach(ue=>{ue.setLogLevel(ae)})}function xe(ae,ue){for(const ve of w){let ct=null;ue&&ue.level&&(ct=G[ue.level]),ve.userLogHandler=null===ae?null:(it,Xe,...mt)=>{const Qe=mt.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");Xe>=(ct??it.logLevel)&&ae({level:W[Xe].toLowerCase(),message:Qe,args:mt,type:it.name})}}}},259:(Lt,We,U)=>{U.d(We,{C6:()=>w.getApps,Mq:()=>w.getApp});var w=U(6881);(0,w.registerVersion)("firebase","9.22.0","app")},9260:(Lt,We,U)=>{U.d(We,{Z:()=>w.Z});var w=U(3942);w.Z.registerVersion("firebase","9.22.0","app-compat")},2644:(Lt,We,U)=>{U.r(We);var w=U(5861),W=U(3942),G=U(2090),fe=U(6881),pe=U(655),_e=U(1877),De=U(4859);const Xe=function ct(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},mt=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Qe=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Le=new _e.Yd("@firebase/auth");function Ve(m,...d){Le.logLevel<=_e.in.ERROR&&Le.error(`Auth (${fe.SDK_VERSION}): ${m}`,...d)}function Ee(m,...d){throw et(m,...d)}function Ne(m,...d){return et(m,...d)}function ft(m,d,h){const E=Object.assign(Object.assign({},mt()),{[d]:h});return new G.LL("auth","Firebase",E).create(d,{appName:m.name})}function Et(m,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&Ee(m,"argument-error"),ft(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function et(m,...d){if("string"!=typeof m){const h=d[0],E=[...d.slice(1)];return E[0]&&(E[0].appName=m.name),m._errorFactory.create(h,...E)}return Qe.create(m,...d)}function He(m,d,...h){if(!m)throw et(d,...h)}function we(m){const d="INTERNAL ASSERTION FAILED: "+m;throw Ve(d),new Error(d)}function Pe(m,d){m||we(d)}function ot(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function je(){return"http:"===Mt()||"https:"===Mt()}function Mt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class On{constructor(d,h){this.shortDelay=d,this.longDelay=h,Pe(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function It(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rn(m,d){Pe(m.emulator,"Emulator should always be set here");const{url:h}=m.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class Dt{static initialize(d,h,E){this.fetchImpl=d,h&&(this.headersImpl=h),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Mn=new On(3e4,6e4);function en(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function pt(m,d,h,E){return jn.apply(this,arguments)}function jn(){return(jn=(0,w.Z)(function*(m,d,h,E,F={}){return wn(m,F,(0,w.Z)(function*(){let q={},Ie={};E&&("GET"===d?Ie=E:q={body:JSON.stringify(E)});const $e=(0,G.xO)(Object.assign({key:m.config.apiKey},Ie)).slice(1),at=yield m._getAdditionalHeaders();return at["Content-Type"]="application/json",m.languageCode&&(at["X-Firebase-Locale"]=m.languageCode),Dt.fetch()(yr(m,m.config.apiHost,h,$e),Object.assign({method:d,headers:at,referrerPolicy:"no-referrer"},q))}))})).apply(this,arguments)}function wn(m,d,h){return ar.apply(this,arguments)}function ar(){return(ar=(0,w.Z)(function*(m,d,h){m._canInitEmulator=!1;const E=Object.assign(Object.assign({},nr),d);try{const F=new Mi(m),q=yield Promise.race([h(),F.promise]);F.clearNetworkTimeout();const Ie=yield q.json();if("needConfirmation"in Ie)throw dr(m,"account-exists-with-different-credential",Ie);if(q.ok&&!("errorMessage"in Ie))return Ie;{const $e=q.ok?Ie.errorMessage:Ie.error.message,[at,Vt]=$e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===at)throw dr(m,"credential-already-in-use",Ie);if("EMAIL_EXISTS"===at)throw dr(m,"email-already-in-use",Ie);if("USER_DISABLED"===at)throw dr(m,"user-disabled",Ie);const un=E[at]||at.toLowerCase().replace(/[_\s]+/g,"-");if(Vt)throw ft(m,un,Vt);Ee(m,un)}}catch(F){if(F instanceof G.ZR)throw F;Ee(m,"network-request-failed",{message:String(F)})}})).apply(this,arguments)}function Qn(m,d,h,E){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,w.Z)(function*(m,d,h,E,F={}){const q=yield pt(m,d,h,E,F);return"mfaPendingCredential"in q&&Ee(m,"multi-factor-auth-required",{_serverResponse:q}),q})).apply(this,arguments)}function yr(m,d,h,E){const F=`${d}${h}?${E}`;return m.config.emulator?Rn(m.config,F):`${m.config.apiScheme}://${F}`}class Mi{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,E)=>{this.timer=setTimeout(()=>E(Ne(this.auth,"network-request-failed")),Mn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dr(m,d,h){const E={appName:m.name};h.email&&(E.email=h.email),h.phoneNumber&&(E.phoneNumber=h.phoneNumber);const F=Ne(m,d,E);return F.customData._tokenResponse=h,F}function Sn(){return(Sn=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function $n(m,d){return ur.apply(this,arguments)}function ur(){return(ur=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ut(m,d){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Jr(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function xi(){return(xi=(0,w.Z)(function*(m,d=!1){const h=(0,G.m9)(m),E=yield h.getIdToken(d),F=hr(E);He(F&&F.exp&&F.auth_time&&F.iat,h.auth,"internal-error");const q="object"==typeof F.firebase?F.firebase:void 0,Ie=q?.sign_in_provider;return{claims:F,token:E,authTime:Jr(ti(F.auth_time)),issuedAtTime:Jr(ti(F.iat)),expirationTime:Jr(ti(F.exp)),signInProvider:Ie||null,signInSecondFactor:q?.sign_in_second_factor||null}})).apply(this,arguments)}function ti(m){return 1e3*Number(m)}function hr(m){const[d,h,E]=m.split(".");if(void 0===d||void 0===h||void 0===E)return Ve("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,G.tV)(h);return F?JSON.parse(F):(Ve("Failed to decode base64 JWT payload"),null)}catch(F){return Ve("Caught error parsing JWT payload as JSON",F?.toString()),null}}function Ht(m,d){return nn.apply(this,arguments)}function nn(){return(nn=(0,w.Z)(function*(m,d,h=!1){if(h)return d;try{return yield d}catch(E){throw E instanceof G.ZR&&Kn(E)&&m.auth.currentUser===m&&(yield m.auth.signOut()),E}})).apply(this,arguments)}function Kn({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class pn{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const F=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,F)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const E=this.getInterval(d);this.timerId=setTimeout((0,w.Z)(function*(){yield h.iteration()}),E)}iteration(){var d=this;return(0,w.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class Er{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jr(this.lastLoginAt),this.creationTime=Jr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Br(m){return jt.apply(this,arguments)}function jt(){return(jt=(0,w.Z)(function*(m){var d;const h=m.auth,E=yield m.getIdToken(),F=yield Ht(m,Ut(h,{idToken:E}));He(F?.users.length,h,"internal-error");const q=F.users[0];m._notifyReloadListener(q);const Ie=null!==(d=q.providerUserInfo)&&void 0!==d&&d.length?Hn(q.providerUserInfo):[],$e=hi(m.providerData,Ie),un=!!m.isAnonymous&&!(m.email&&q.passwordHash||$e?.length),cn={uid:q.localId,displayName:q.displayName||null,photoURL:q.photoUrl||null,email:q.email||null,emailVerified:q.emailVerified||!1,phoneNumber:q.phoneNumber||null,tenantId:q.tenantId||null,providerData:$e,metadata:new Er(q.createdAt,q.lastLoginAt),isAnonymous:un};Object.assign(m,cn)})).apply(this,arguments)}function Fn(){return(Fn=(0,w.Z)(function*(m){const d=(0,G.m9)(m);yield Br(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function hi(m,d){return[...m.filter(E=>!d.some(F=>F.providerId===E.providerId)),...d]}function Hn(m){return m.map(d=>{var{providerId:h}=d,E=(0,pe._T)(d,["providerId"]);return{providerId:h,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ir(){return(Ir=(0,w.Z)(function*(m,d){const h=yield wn(m,{},(0,w.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:F,apiKey:q}=m.config,Ie=yr(m,F,"/v1/token",`key=${q}`),$e=yield m._getAdditionalHeaders();return $e["Content-Type"]="application/x-www-form-urlencoded",Dt.fetch()(Ie,{method:"POST",headers:$e,body:E})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class Wr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){He(d.idToken,"internal-error"),He(typeof d.idToken<"u","internal-error"),He(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Ln(m){const d=hr(m);return He(d,"internal-error"),He(typeof d.exp<"u","internal-error"),He(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}getToken(d,h=!1){var E=this;return(0,w.Z)(function*(){return He(!E.accessToken||E.refreshToken,d,"user-token-expired"),h||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(d,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var E=this;return(0,w.Z)(function*(){const{accessToken:F,refreshToken:q,expiresIn:Ie}=yield function Ar(m,d){return Ir.apply(this,arguments)}(d,h);E.updateTokensAndExpiration(F,q,Number(Ie))})()}updateTokensAndExpiration(d,h,E){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(d,h){const{refreshToken:E,accessToken:F,expirationTime:q}=h,Ie=new Wr;return E&&(He("string"==typeof E,"internal-error",{appName:d}),Ie.refreshToken=E),F&&(He("string"==typeof F,"internal-error",{appName:d}),Ie.accessToken=F),q&&(He("number"==typeof q,"internal-error",{appName:d}),Ie.expirationTime=q),Ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Wr,this.toJSON())}_performRefresh(){return we("not implemented")}}function _r(m,d){He("string"==typeof m||typeof m>"u","internal-error",{appName:d})}class zr{constructor(d){var{uid:h,auth:E,stsTokenManager:F}=d,q=(0,pe._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=E,this.stsTokenManager=F,this.accessToken=F.accessToken,this.displayName=q.displayName||null,this.email=q.email||null,this.emailVerified=q.emailVerified||!1,this.phoneNumber=q.phoneNumber||null,this.photoURL=q.photoURL||null,this.isAnonymous=q.isAnonymous||!1,this.tenantId=q.tenantId||null,this.providerData=q.providerData?[...q.providerData]:[],this.metadata=new Er(q.createdAt||void 0,q.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,w.Z)(function*(){const E=yield Ht(h,h.stsTokenManager.getToken(h.auth,d));return He(E,h.auth,"internal-error"),h.accessToken!==E&&(h.accessToken=E,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),E})()}getIdTokenResult(d){return function ls(m){return xi.apply(this,arguments)}(this,d)}reload(){return function wr(m){return Fn.apply(this,arguments)}(this)}_assign(d){this!==d&&(He(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new zr(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var E=this;return(0,w.Z)(function*(){let F=!1;d.idToken&&d.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(d),F=!0),h&&(yield Br(E)),yield E.auth._persistUserIfCurrent(E),F&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var d=this;return(0,w.Z)(function*(){const h=yield d.getIdToken();return yield Ht(d,function Lr(m,d){return Sn.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var E,F,q,Ie,$e,at,Vt,un;const cn=null!==(E=h.displayName)&&void 0!==E?E:void 0,Vi=null!==(F=h.email)&&void 0!==F?F:void 0,Ca=null!==(q=h.phoneNumber)&&void 0!==q?q:void 0,cd=null!==(Ie=h.photoURL)&&void 0!==Ie?Ie:void 0,hh=null!==($e=h.tenantId)&&void 0!==$e?$e:void 0,dd=null!==(at=h._redirectEventId)&&void 0!==at?at:void 0,Cl=null!==(Vt=h.createdAt)&&void 0!==Vt?Vt:void 0,Sl=null!==(un=h.lastLoginAt)&&void 0!==un?un:void 0,{uid:Ju,emailVerified:Al,isAnonymous:Rl,providerData:hd,stsTokenManager:fh}=h;He(Ju&&fh,d,"internal-error");const Ro=Wr.fromJSON(this.name,fh);He("string"==typeof Ju,d,"internal-error"),_r(cn,d.name),_r(Vi,d.name),He("boolean"==typeof Al,d,"internal-error"),He("boolean"==typeof Rl,d,"internal-error"),_r(Ca,d.name),_r(cd,d.name),_r(hh,d.name),_r(dd,d.name),_r(Cl,d.name),_r(Sl,d.name);const Ec=new zr({uid:Ju,auth:d,email:Vi,emailVerified:Al,displayName:cn,isAnonymous:Rl,photoURL:cd,phoneNumber:Ca,tenantId:hh,stsTokenManager:Ro,createdAt:Cl,lastLoginAt:Sl});return hd&&Array.isArray(hd)&&(Ec.providerData=hd.map(ph=>Object.assign({},ph))),dd&&(Ec._redirectEventId=dd),Ec}static _fromIdTokenResponse(d,h,E=!1){return(0,w.Z)(function*(){const F=new Wr;F.updateFromServerResponse(h);const q=new zr({uid:h.localId,auth:d,stsTokenManager:F,isAnonymous:E});return yield Br(q),q})()}}const Vr=new Map;function rr(m){Pe(m instanceof Function,"Expected a class definition");let d=Vr.get(m);return d?(Pe(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,Vr.set(m,d),d)}const ri=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(h,E){var F=this;return(0,w.Z)(function*(){F.storage[h]=E})()}_get(h){var E=this;return(0,w.Z)(function*(){const F=E.storage[h];return void 0===F?null:F})()}_remove(h){var E=this;return(0,w.Z)(function*(){delete E.storage[h]})()}_addListener(h,E){}_removeListener(h,E){}}return m.type="NONE",m})();function ye(m,d,h){return`firebase:${m}:${d}:${h}`}class le{constructor(d,h,E){this.persistence=d,this.auth=h,this.userKey=E;const{config:F,name:q}=this.auth;this.fullUserKey=ye(this.userKey,F.apiKey,q),this.fullPersistenceKey=ye("persistence",F.apiKey,q),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,w.Z)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?zr._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,w.Z)(function*(){if(h.persistence===d)return;const E=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,E?h.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,E="authUser"){return(0,w.Z)(function*(){if(!h.length)return new le(rr(ri),d,E);const F=(yield Promise.all(h.map(function(){var Vt=(0,w.Z)(function*(un){if(yield un._isAvailable())return un});return function(un){return Vt.apply(this,arguments)}}()))).filter(Vt=>Vt);let q=F[0]||rr(ri);const Ie=ye(E,d.config.apiKey,d.name);let $e=null;for(const Vt of h)try{const un=yield Vt._get(Ie);if(un){const cn=zr._fromJSON(d,un);Vt!==q&&($e=cn),q=Vt;break}}catch{}const at=F.filter(Vt=>Vt._shouldAllowMigration);return q._shouldAllowMigration&&at.length?(q=at[0],$e&&(yield q._set(Ie,$e.toJSON())),yield Promise.all(h.map(function(){var Vt=(0,w.Z)(function*(un){if(un!==q)try{yield un._remove(Ie)}catch{}});return function(un){return Vt.apply(this,arguments)}}())),new le(q,d,E)):new le(q,d,E)})()}}function Te(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ln(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Ye(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(ir(d))return"Blackberry";if(se(d))return"Webos";if(Fe(d))return"Safari";if((d.includes("chrome/")||At(d))&&!d.includes("edge/"))return"Chrome";if(In(d))return"Android";{const E=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ye(m=(0,G.z$)()){return/firefox\//i.test(m)}function Fe(m=(0,G.z$)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function At(m=(0,G.z$)()){return/crios\//i.test(m)}function ln(m=(0,G.z$)()){return/iemobile/i.test(m)}function In(m=(0,G.z$)()){return/android/i.test(m)}function ir(m=(0,G.z$)()){return/blackberry/i.test(m)}function se(m=(0,G.z$)()){return/webos/i.test(m)}function ie(m=(0,G.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function Pt(m=(0,G.z$)()){return ie(m)||In(m)||se(m)||ir(m)||/windows phone/i.test(m)||ln(m)}function Ue(m,d=[]){let h;switch(m){case"Browser":h=Te((0,G.z$)());break;case"Worker":h=`${Te((0,G.z$)())}-${m}`;break;default:h=m}const E=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${fe.SDK_VERSION}/${E}`}function yt(){return(yt=(0,w.Z)(function*(m){return(yield pt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vt(m,d){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,w.Z)(function*(m,d){return pt(m,"GET","/v2/recaptchaConfig",en(m,d))})).apply(this,arguments)}function Dn(m){return void 0!==m&&void 0!==m.getResponse}function Yn(m){return void 0!==m&&void 0!==m.enterprise}class br{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(h=>"EMAIL_PASSWORD_PROVIDER"===h.provider&&"OFF"!==h.enforcementState)}}function _i(m){return new Promise((d,h)=>{const E=document.createElement("script");E.setAttribute("src",m),E.onload=d,E.onerror=F=>{const q=Ne("internal-error");q.customData=F,h(q)},E.type="text/javascript",E.charset="UTF-8",function Pn(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(E)})}function bi(m){return`__${m}${Math.floor(1e6*Math.random())}`}class zn{constructor(d){this.type="recaptcha-enterprise",this.auth=lr(d)}verify(d="verify",h=!1){var E=this;return(0,w.Z)(function*(){function q(){return q=(0,w.Z)(function*($e){if(!h){if(null==$e.tenantId&&null!=$e._agentRecaptchaConfig)return $e._agentRecaptchaConfig.siteKey;if(null!=$e.tenantId&&void 0!==$e._tenantRecaptchaConfigs[$e.tenantId])return $e._tenantRecaptchaConfigs[$e.tenantId].siteKey}return new Promise(function(){var at=(0,w.Z)(function*(Vt,un){vt($e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(cn=>{if(void 0!==cn.recaptchaKey){const Vi=new br(cn);return null==$e.tenantId?$e._agentRecaptchaConfig=Vi:$e._tenantRecaptchaConfigs[$e.tenantId]=Vi,Vt(Vi.siteKey)}un(new Error("recaptcha Enterprise site key undefined"))}).catch(cn=>{un(cn)})});return function(Vt,un){return at.apply(this,arguments)}}())}),q.apply(this,arguments)}function Ie($e,at,Vt){const un=window.grecaptcha;Yn(un)?un.enterprise.ready(()=>{un.enterprise.execute($e,{action:d}).then(cn=>{at(cn)}).catch(()=>{at("NO_RECAPTCHA")})}):Vt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(($e,at)=>{(function F($e){return q.apply(this,arguments)})(E.auth).then(Vt=>{if(!h&&Yn(window.grecaptcha))Ie(Vt,$e,at);else{if(typeof window>"u")return void at(new Error("RecaptchaVerifier is only supported in browser"));_i("https://www.google.com/recaptcha/enterprise.js?render="+Vt).then(()=>{Ie(Vt,$e,at)}).catch(un=>{at(un)})}}).catch(Vt=>{at(Vt)})})})()}}function fi(m,d,h){return Os.apply(this,arguments)}function Os(){return(Os=(0,w.Z)(function*(m,d,h,E=!1){const F=new zn(m);let q;try{q=yield F.verify(h)}catch{q=yield F.verify(h,!0)}const Ie=Object.assign({},d);return Object.assign(Ie,E?{captchaResp:q}:{captchaResponse:q}),Object.assign(Ie,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ie,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ie})).apply(this,arguments)}class cs{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const E=q=>new Promise((Ie,$e)=>{try{Ie(d(q))}catch(at){$e(at)}});E.onAbort=h,this.queue.push(E);const F=this.queue.length-1;return()=>{this.queue[F]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,w.Z)(function*(){if(h.auth.currentUser===d)return;const E=[];try{for(const F of h.queue)yield F(d),F.onAbort&&E.push(F.onAbort)}catch(F){E.reverse();for(const q of E)try{q()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:F?.message})}})()}}class oo{constructor(d,h,E,F){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=E,this.config=F,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vi(this),this.idTokenSubscription=new vi(this),this.beforeStateQueue=new cs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=F.sdkClientVersion}_initializeWithPersistence(d,h){var E=this;return h&&(this._popupRedirectResolver=rr(h)),this._initializationPromise=this.queue((0,w.Z)(function*(){var F,q;if(!E._deleted&&(E.persistenceManager=yield le.create(E,d),!E._deleted)){if(null!==(F=E._popupRedirectResolver)&&void 0!==F&&F._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(h),E.lastNotifiedUid=(null===(q=E.currentUser)||void 0===q?void 0:q.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,w.Z)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUser(d){var h=this;return(0,w.Z)(function*(){var E;const F=yield h.assertedPersistence.getCurrentUser();let q=F,Ie=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const $e=null===(E=h.redirectUser)||void 0===E?void 0:E._redirectEventId,at=q?._redirectEventId,Vt=yield h.tryRedirectSignIn(d);(!$e||$e===at)&&Vt?.user&&(q=Vt.user,Ie=!0)}if(!q)return h.directlySetCurrentUser(null);if(!q._redirectEventId){if(Ie)try{yield h.beforeStateQueue.runMiddleware(q)}catch($e){q=F,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject($e))}return q?h.reloadAndSetCurrentUserOrClear(q):h.directlySetCurrentUser(null)}return He(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===q._redirectEventId?h.directlySetCurrentUser(q):h.reloadAndSetCurrentUserOrClear(q)})()}tryRedirectSignIn(d){var h=this;return(0,w.Z)(function*(){let E=null;try{E=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,w.Z)(function*(){try{yield Br(d)}catch(E){if("auth/network-request-failed"!==E?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function yn(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,w.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,w.Z)(function*(){const E=d?(0,G.m9)(d):null;return E&&He(E.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(E&&E._clone(h))})()}_updateCurrentUser(d,h=!1){var E=this;return(0,w.Z)(function*(){if(!E._deleted)return d&&He(E.tenantId===d.tenantId,E,"tenant-id-mismatch"),h||(yield E.beforeStateQueue.runMiddleware(d)),E.queue((0,w.Z)(function*(){yield E.directlySetCurrentUser(d),E.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,w.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var h=this;return this.queue((0,w.Z)(function*(){yield h.assertedPersistence.setPersistence(rr(d))}))}initializeRecaptchaConfig(){var d=this;return(0,w.Z)(function*(){const h=yield vt(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new br(h);null==d.tenantId?d._agentRecaptchaConfig=E:d._tenantRecaptchaConfigs[d.tenantId]=E,E.emailPasswordEnabled&&new zn(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new G.LL("auth","Firebase",d())}onAuthStateChanged(d,h,E){return this.registerStateListener(this.authStateSubscription,d,h,E)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,E){return this.registerStateListener(this.idTokenSubscription,d,h,E)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var E=this;return(0,w.Z)(function*(){const F=yield E.getOrInitRedirectPersistenceManager(h);return null===d?F.removeCurrentUser():F.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,w.Z)(function*(){if(!h.redirectPersistenceManager){const E=d&&rr(d)||h._popupRedirectResolver;He(E,h,"argument-error"),h.redirectPersistenceManager=yield le.create(h,[rr(E._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,w.Z)(function*(){var E,F;return h._isInitialized&&(yield h.queue((0,w.Z)(function*(){}))),(null===(E=h._currentUser)||void 0===E?void 0:E._redirectEventId)===d?h._currentUser:(null===(F=h.redirectUser)||void 0===F?void 0:F._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,w.Z)(function*(){if(d===h.currentUser)return h.queue((0,w.Z)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,E,F){if(this._deleted)return()=>{};const q="function"==typeof h?h:h.next.bind(h),Ie=this._isInitialized?Promise.resolve():this._initializationPromise;return He(Ie,this,"internal-error"),Ie.then(()=>q(this.currentUser)),"function"==typeof h?d.addObserver(h,E,F):d.addObserver(h)}directlySetCurrentUser(d){var h=this;return(0,w.Z)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Ue(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,w.Z)(function*(){var h;const E={"X-Client-Version":d.clientVersion};d.app.options.appId&&(E["X-Firebase-gmpid"]=d.app.options.appId);const F=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();F&&(E["X-Firebase-Client"]=F);const q=yield d._getAppCheckToken();return q&&(E["X-Firebase-AppCheck"]=q),E})()}_getAppCheckToken(){var d=this;return(0,w.Z)(function*(){var h;const E=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return E?.error&&function St(m,...d){Le.logLevel<=_e.in.WARN&&Le.warn(`Auth (${fe.SDK_VERSION}): ${m}`,...d)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function lr(m){return(0,G.m9)(m)}class vi{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,G.ne)(h=>this.observer=h)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kr(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function js(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class es{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return we("not implemented")}_getIdTokenResponse(d){return we("not implemented")}_linkToIdToken(d,h){return we("not implemented")}_getReauthenticationResolver(d){return we("not implemented")}}function Rr(m,d){return ms.apply(this,arguments)}function ms(){return(ms=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:resetPassword",en(m,d))})).apply(this,arguments)}function ao(m,d){return ko.apply(this,arguments)}function ko(){return(ko=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Pi(m,d){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:update",en(m,d))})).apply(this,arguments)}function sr(m,d){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,w.Z)(function*(m,d){return Qn(m,"POST","/v1/accounts:signInWithPassword",en(m,d))})).apply(this,arguments)}function Lo(m,d){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:sendOobCode",en(m,d))})).apply(this,arguments)}function Oe(m,d){return be.apply(this,arguments)}function be(){return(be=(0,w.Z)(function*(m,d){return Lo(m,d)})).apply(this,arguments)}function ze(m,d){return lt.apply(this,arguments)}function lt(){return(lt=(0,w.Z)(function*(m,d){return Lo(m,d)})).apply(this,arguments)}function Rt(m,d){return gn.apply(this,arguments)}function gn(){return(gn=(0,w.Z)(function*(m,d){return Lo(m,d)})).apply(this,arguments)}function Xn(m,d){return kn.apply(this,arguments)}function kn(){return(kn=(0,w.Z)(function*(m,d){return Lo(m,d)})).apply(this,arguments)}function zs(){return(zs=(0,w.Z)(function*(m,d){return Qn(m,"POST","/v1/accounts:signInWithEmailLink",en(m,d))})).apply(this,arguments)}function Ni(){return(Ni=(0,w.Z)(function*(m,d){return Qn(m,"POST","/v1/accounts:signInWithEmailLink",en(m,d))})).apply(this,arguments)}class Qs extends es{constructor(d,h,E,F=null){super("password",E),this._email=d,this._password=h,this._tenantId=F}static _fromEmailAndPassword(d,h){return new Qs(d,h,"password")}static _fromEmailAndCode(d,h,E=null){return new Qs(d,h,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,w.Z)(function*(){var E;switch(h.signInMethod){case"password":const F={returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=d._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const q=yield fi(d,F,"signInWithPassword");return sr(d,q)}return sr(d,F).catch(function(){var q=(0,w.Z)(function*(Ie){if("auth/missing-recaptcha-token"===Ie.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield fi(d,F,"signInWithPassword");return sr(d,$e)}return Promise.reject(Ie)});return function(Ie){return q.apply(this,arguments)}}());case"emailLink":return function gr(m,d){return zs.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:Ee(d,"internal-error")}})()}_linkToIdToken(d,h){var E=this;return(0,w.Z)(function*(){switch(E.signInMethod){case"password":return ao(d,{idToken:h,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ys(m,d){return Ni.apply(this,arguments)}(d,{idToken:h,email:E._email,oobCode:E._password});default:Ee(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function ds(m,d){return _s.apply(this,arguments)}function _s(){return(_s=(0,w.Z)(function*(m,d){return Qn(m,"POST","/v1/accounts:signInWithIdp",en(m,d))})).apply(this,arguments)}class vs extends es{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new vs(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):Ee("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:F}=h,q=(0,pe._T)(h,["providerId","signInMethod"]);if(!E||!F)return null;const Ie=new vs(E,F);return Ie.idToken=q.idToken||void 0,Ie.accessToken=q.accessToken||void 0,Ie.secret=q.secret,Ie.nonce=q.nonce,Ie.pendingToken=q.pendingToken||null,Ie}_getIdTokenResponse(d){return ds(d,this.buildRequest())}_linkToIdToken(d,h){const E=this.buildRequest();return E.idToken=h,ds(d,E)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,ds(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,G.xO)(h)}return d}}function Es(m,d){return uo.apply(this,arguments)}function uo(){return(uo=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:sendVerificationCode",en(m,d))})).apply(this,arguments)}function ws(){return(ws=(0,w.Z)(function*(m,d){return Qn(m,"POST","/v1/accounts:signInWithPhoneNumber",en(m,d))})).apply(this,arguments)}function Uo(){return(Uo=(0,w.Z)(function*(m,d){const h=yield Qn(m,"POST","/v1/accounts:signInWithPhoneNumber",en(m,d));if(h.temporaryProof)throw dr(m,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Bo={USER_NOT_FOUND:"user-not-found"};function Ei(){return(Ei=(0,w.Z)(function*(m,d){return Qn(m,"POST","/v1/accounts:signInWithPhoneNumber",en(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Bo)})).apply(this,arguments)}class wi extends es{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new wi({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new wi({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function lo(m,d){return ws.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function co(m,d){return Uo.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function ga(m,d){return Ei.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:E,verificationCode:F}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:E,code:F}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:E,phoneNumber:F,temporaryProof:q}=d;return E||h||F||q?new wi({verificationId:h,verificationCode:E,phoneNumber:F,temporaryProof:q}):null}}class Is{constructor(d){var h,E,F,q,Ie,$e;const at=(0,G.zd)((0,G.pd)(d)),Vt=null!==(h=at.apiKey)&&void 0!==h?h:null,un=null!==(E=at.oobCode)&&void 0!==E?E:null,cn=function Qo(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(F=at.mode)&&void 0!==F?F:null);He(Vt&&un&&cn,"argument-error"),this.apiKey=Vt,this.operation=cn,this.code=un,this.continueUrl=null!==(q=at.continueUrl)&&void 0!==q?q:null,this.languageCode=null!==(Ie=at.languageCode)&&void 0!==Ie?Ie:null,this.tenantId=null!==($e=at.tenantId)&&void 0!==$e?$e:null}static parseLink(d){const h=function Ss(m){const d=(0,G.zd)((0,G.pd)(m)).link,h=d?(0,G.zd)((0,G.pd)(d)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(m)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||h||d||m}(d);try{return new Is(h)}catch{return null}}}let $r=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(h,E){return Qs._fromEmailAndPassword(h,E)}static credentialWithLink(h,E){const F=Is.parseLink(E);return He(F,"argument-error"),Qs._fromEmailAndCode(h,F.code,F.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class ai{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class jr extends ai{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Si extends jr{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return He("providerId"in h&&"signInMethod"in h,"argument-error"),vs._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return He(d.idToken||d.accessToken,"argument-error"),vs._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Si.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Si.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:E,oauthTokenSecret:F,pendingToken:q,nonce:Ie,providerId:$e}=d;if(!E&&!F&&!h&&!q||!$e)return null;try{return new Si($e)._credential({idToken:h,accessToken:E,nonce:Ie,pendingToken:q})}catch{return null}}}let Ui=(()=>{class m extends jr{constructor(){super("facebook.com")}static credential(h){return vs._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Vo=(()=>{class m extends jr{constructor(){super("google.com"),this.addScope("profile")}static credential(h,E){return vs._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:E})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:E,oauthAccessToken:F}=h;if(!E&&!F)return null;try{return m.credential(E,F)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Io=(()=>{class m extends jr{constructor(){super("github.com")}static credential(h){return vs._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Jn extends es{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return ds(d,this.buildRequest())}_linkToIdToken(d,h){const E=this.buildRequest();return E.idToken=h,ds(d,E)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,ds(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:F,pendingToken:q}=h;return E&&F&&q&&E===F?new Jn(E,q):null}static _create(d,h){return new Jn(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zi extends ai{constructor(d){He(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Zi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Zi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=Jn.fromJSON(d);return He(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:E}=d;if(!h||!E)return null;try{return Jn._create(E,h)}catch{return null}}}let pi=(()=>{class m extends jr{constructor(){super("twitter.com")}static credential(h,E){return vs._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:E})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:E,oauthTokenSecret:F}=h;if(!E||!F)return null;try{return m.credential(E,F)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Ii(m,d){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,w.Z)(function*(m,d){return Qn(m,"POST","/v1/accounts:signUp",en(m,d))})).apply(this,arguments)}class ki{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,E,F=!1){return(0,w.Z)(function*(){const q=yield zr._fromIdTokenResponse(d,E,F),Ie=dn(E);return new ki({user:q,providerId:Ie,_tokenResponse:E,operationType:h})})()}static _forOperation(d,h,E){return(0,w.Z)(function*(){yield d._updateTokensIfNecessary(E,!0);const F=dn(E);return new ki({user:d,providerId:F,_tokenResponse:E,operationType:h})})()}}function dn(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Ws(){return(Ws=(0,w.Z)(function*(m){var d;const h=lr(m);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new ki({user:h.currentUser,providerId:null,operationType:"signIn"});const E=yield Ii(h,{returnSecureToken:!0}),F=yield ki._fromIdTokenResponse(h,"signIn",E,!0);return yield h._updateCurrentUser(F.user),F})).apply(this,arguments)}class Do extends G.ZR{constructor(d,h,E,F){var q;super(h.code,h.message),this.operationType=E,this.user=F,Object.setPrototypeOf(this,Do.prototype),this.customData={appName:d.name,tenantId:null!==(q=d.tenantId)&&void 0!==q?q:void 0,_serverResponse:h.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(d,h,E,F){return new Do(d,h,E,F)}}function ua(m,d,h,E){return("reauthenticate"===d?h._getReauthenticationResolver(m):h._getIdTokenResponse(m)).catch(q=>{throw"auth/multi-factor-auth-required"===q.code?Do._fromErrorAndOperation(m,q,d,E):q})}function Xs(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function $i(){return($i=(0,w.Z)(function*(m,d){const h=(0,G.m9)(m);yield Cn(!0,h,d);const{providerUserInfo:E}=yield $n(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),F=Xs(E||[]);return h.providerData=h.providerData.filter(q=>F.has(q.providerId)),F.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h})).apply(this,arguments)}function Ks(m,d){return _t.apply(this,arguments)}function _t(){return(_t=(0,w.Z)(function*(m,d,h=!1){const E=yield Ht(m,d._linkToIdToken(m.auth,yield m.getIdToken()),h);return ki._forOperation(m,"link",E)})).apply(this,arguments)}function Cn(m,d,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,w.Z)(function*(m,d,h){yield Br(d);const F=!1===m?"provider-already-linked":"no-such-provider";He(Xs(d.providerData).has(h)===m,d.auth,F)})).apply(this,arguments)}function $o(m,d){return qr.apply(this,arguments)}function qr(){return(qr=(0,w.Z)(function*(m,d,h=!1){const{auth:E}=m,F="reauthenticate";try{const q=yield Ht(m,ua(E,F,d,m),h);He(q.idToken,E,"internal-error");const Ie=hr(q.idToken);He(Ie,E,"internal-error");const{sub:$e}=Ie;return He(m.uid===$e,E,"user-mismatch"),ki._forOperation(m,F,q)}catch(q){throw"auth/user-not-found"===q?.code&&Ee(E,"user-mismatch"),q}})).apply(this,arguments)}function Xo(m,d){return To.apply(this,arguments)}function To(){return(To=(0,w.Z)(function*(m,d,h=!1){const E="signIn",F=yield ua(m,E,d),q=yield ki._fromIdTokenResponse(m,E,F);return h||(yield m._updateCurrentUser(q.user)),q})).apply(this,arguments)}function hs(m,d){return B.apply(this,arguments)}function B(){return(B=(0,w.Z)(function*(m,d){return Xo(lr(m),d)})).apply(this,arguments)}function L(m,d){return J.apply(this,arguments)}function J(){return(J=(0,w.Z)(function*(m,d){const h=(0,G.m9)(m);return yield Cn(!1,h,d.providerId),Ks(h,d)})).apply(this,arguments)}function he(m,d){return Re.apply(this,arguments)}function Re(){return(Re=(0,w.Z)(function*(m,d){return $o((0,G.m9)(m),d)})).apply(this,arguments)}function rt(m,d){return dt.apply(this,arguments)}function dt(){return(dt=(0,w.Z)(function*(m,d){return Qn(m,"POST","/v1/accounts:signInWithCustomToken",en(m,d))})).apply(this,arguments)}function Ct(){return(Ct=(0,w.Z)(function*(m,d){const h=lr(m),E=yield rt(h,{token:d,returnSecureToken:!0}),F=yield ki._fromIdTokenResponse(h,"signIn",E);return yield h._updateCurrentUser(F.user),F})).apply(this,arguments)}class vn{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?xn._fromServerResponse(d,h):"totpInfo"in h?ui._fromServerResponse(d,h):Ee(d,"internal-error")}}class xn extends vn{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new xn(h)}}class ui extends vn{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new ui(h)}}function Dr(m,d,h){var E;He((null===(E=h.url)||void 0===E?void 0:E.length)>0,m,"invalid-continue-uri"),He(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(He(h.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(He(h.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function Hr(){return Hr=(0,w.Z)(function*(m,d,h){var E;const F=lr(m),q={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=F._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ie=yield fi(F,q,"getOobCode",!0);h&&Dr(F,Ie,h),yield ze(F,Ie)}else h&&Dr(F,q,h),yield ze(F,q).catch(function(){var Ie=(0,w.Z)(function*($e){if("auth/missing-recaptcha-token"!==$e.code)return Promise.reject($e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const at=yield fi(F,q,"getOobCode",!0);h&&Dr(F,at,h),yield ze(F,at)}});return function($e){return Ie.apply(this,arguments)}}())}),Hr.apply(this,arguments)}function Mr(){return(Mr=(0,w.Z)(function*(m,d,h){yield Rr((0,G.m9)(m),{oobCode:d,newPassword:h})})).apply(this,arguments)}function xr(){return(xr=(0,w.Z)(function*(m,d){yield Pi((0,G.m9)(m),{oobCode:d})})).apply(this,arguments)}function Qr(m,d){return li.apply(this,arguments)}function li(){return(li=(0,w.Z)(function*(m,d){const h=(0,G.m9)(m),E=yield Rr(h,{oobCode:d}),F=E.requestType;switch(He(F,h,"internal-error"),F){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":He(E.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":He(E.mfaInfo,h,"internal-error");default:He(E.email,h,"internal-error")}let q=null;return E.mfaInfo&&(q=vn._fromServerResponse(lr(h),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:q},operation:F}})).apply(this,arguments)}function ns(){return(ns=(0,w.Z)(function*(m,d){const{data:h}=yield Qr((0,G.m9)(m),d);return h.email})).apply(this,arguments)}function Qi(){return Qi=(0,w.Z)(function*(m,d,h){var E;const F=lr(m),q={returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"};let Ie;if(null!==(E=F._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Vt=yield fi(F,q,"signUpPassword");Ie=Ii(F,Vt)}else Ie=Ii(F,q).catch(function(){var Vt=(0,w.Z)(function*(un){if("auth/missing-recaptcha-token"===un.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const cn=yield fi(F,q,"signUpPassword");return Ii(F,cn)}return Promise.reject(un)});return function(un){return Vt.apply(this,arguments)}}());const $e=yield Ie.catch(Vt=>Promise.reject(Vt)),at=yield ki._fromIdTokenResponse(F,"signIn",$e);return yield F._updateCurrentUser(at.user),at}),Qi.apply(this,arguments)}function N(){return N=(0,w.Z)(function*(m,d,h){var E;const F=lr(m),q={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function Ie($e,at){He(at.handleCodeInApp,F,"argument-error"),at&&Dr(F,$e,at)}if(null!==(E=F._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $e=yield fi(F,q,"getOobCode",!0);Ie($e,h),yield Rt(F,$e)}else Ie(q,h),yield Rt(F,q).catch(function(){var $e=(0,w.Z)(function*(at){if("auth/missing-recaptcha-token"!==at.code)return Promise.reject(at);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Vt=yield fi(F,q,"getOobCode",!0);Ie(Vt,h),yield Rt(F,Vt)}});return function(at){return $e.apply(this,arguments)}}())}),N.apply(this,arguments)}function g(){return(g=(0,w.Z)(function*(m,d,h){const E=(0,G.m9)(m),F=$r.credentialWithLink(d,h||ot());return He(F._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),hs(E,F)})).apply(this,arguments)}function y(m,d){return x.apply(this,arguments)}function x(){return(x=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:createAuthUri",en(m,d))})).apply(this,arguments)}function X(){return(X=(0,w.Z)(function*(m,d){const E={identifier:d,continueUri:je()?ot():"http://localhost"},{signinMethods:F}=yield y((0,G.m9)(m),E);return F||[]})).apply(this,arguments)}function ce(){return(ce=(0,w.Z)(function*(m,d){const h=(0,G.m9)(m),F={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&Dr(h.auth,F,d);const{email:q}=yield Oe(h.auth,F);q!==m.email&&(yield m.reload())})).apply(this,arguments)}function tt(){return(tt=(0,w.Z)(function*(m,d,h){const E=(0,G.m9)(m),q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};h&&Dr(E.auth,q,h);const{email:Ie}=yield Xn(E.auth,q);Ie!==m.email&&(yield m.reload())})).apply(this,arguments)}function bt(m,d){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,w.Z)(function*(m,d){return pt(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function bn(){return(bn=(0,w.Z)(function*(m,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const E=(0,G.m9)(m),q={idToken:yield E.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},Ie=yield Ht(E,bt(E.auth,q));E.displayName=Ie.displayName||null,E.photoURL=Ie.photoUrl||null;const $e=E.providerData.find(({providerId:at})=>"password"===at);$e&&($e.displayName=E.displayName,$e.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Ie)})).apply(this,arguments)}function An(m,d,h){return vr.apply(this,arguments)}function vr(){return(vr=(0,w.Z)(function*(m,d,h){const{auth:E}=m,q={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(q.email=d),h&&(q.password=h);const Ie=yield Ht(m,ao(E,q));yield m._updateTokensIfNecessary(Ie,!0)})).apply(this,arguments)}class Pr{constructor(d,h,E={}){this.isNewUser=d,this.providerId=h,this.profile=E}}class Li extends Pr{constructor(d,h,E,F){super(d,h,E),this.username=F}}class Hi extends Pr{constructor(d,h){super(d,"facebook.com",h)}}class ho extends Li{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class qn extends Pr{constructor(d,h){super(d,"google.com",h)}}class fo extends Li{constructor(d,h,E){super(d,"twitter.com",h,E)}}function jo(m){const{user:d,_tokenResponse:h}=m;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function ji(m){var d,h;if(!m)return null;const{providerId:E}=m,F=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},q=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!E&&m?.idToken){const Ie=null===(h=null===(d=hr(m.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(Ie)return new Pr(q,"anonymous"!==Ie&&"custom"!==Ie?Ie:null)}if(!E)return null;switch(E){case"facebook.com":return new Hi(q,F);case"github.com":return new ho(q,F);case"google.com":return new qn(q,F);case"twitter.com":return new fo(q,F,m.screenName||null);case"custom":case"anonymous":return new Pr(q,null);default:return new Pr(q,E,F)}}(h)}class Gr{constructor(d,h,E){this.type=d,this.credential=h,this.auth=E}static _fromIdtoken(d,h){return new Gr("enroll",d,h)}static _fromMfaPendingCredential(d){return new Gr("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,E;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Gr._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(E=d.multiFactorSession)&&void 0!==E&&E.idToken)return Gr._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Yi{constructor(d,h,E){this.session=d,this.hints=h,this.signInResolver=E}static _fromError(d,h){const E=lr(d),F=h.customData._serverResponse,q=(F.mfaInfo||[]).map($e=>vn._fromServerResponse(E,$e));He(F.mfaPendingCredential,E,"internal-error");const Ie=Gr._fromMfaPendingCredential(F.mfaPendingCredential);return new Yi(Ie,q,function(){var $e=(0,w.Z)(function*(at){const Vt=yield at._process(E,Ie);delete F.mfaInfo,delete F.mfaPendingCredential;const un=Object.assign(Object.assign({},F),{idToken:Vt.idToken,refreshToken:Vt.refreshToken});switch(h.operationType){case"signIn":const cn=yield ki._fromIdTokenResponse(E,h.operationType,un);return yield E._updateCurrentUser(cn.user),cn;case"reauthenticate":return He(h.user,E,"internal-error"),ki._forOperation(h.user,h.operationType,un);default:Ee(E,"internal-error")}});return function(at){return $e.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,w.Z)(function*(){return h.signInResolver(d)})()}}function to(m,d){return pt(m,"POST","/v2/accounts/mfaEnrollment:start",en(m,d))}class Ds{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(E=>vn._fromServerResponse(d.auth,E)))})}static _fromUser(d){return new Ds(d)}getSession(){var d=this;return(0,w.Z)(function*(){return Gr._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,h){var E=this;return(0,w.Z)(function*(){const F=d,q=yield E.getSession(),Ie=yield Ht(E.user,F._process(E.user.auth,q,h));return yield E.user._updateTokensIfNecessary(Ie),E.user.reload()})()}unenroll(d){var h=this;return(0,w.Z)(function*(){const E="string"==typeof d?d:d.uid,F=yield h.user.getIdToken();try{const q=yield Ht(h.user,function Gi(m,d){return pt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",en(m,d))}(h.user.auth,{idToken:F,mfaEnrollmentId:E}));h.enrolledFactors=h.enrolledFactors.filter(({uid:Ie})=>Ie!==E),yield h.user._updateTokensIfNecessary(q),yield h.user.reload()}catch(q){throw q}})()}}const rs=new WeakMap,_a="__sak";class Va{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const gi=(()=>{class m extends Va{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,E)=>this.onStorageEvent(h,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ll(){const m=(0,G.z$)();return Fe(m)||ie(m)}()&&function on(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Pt(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const E of Object.keys(this.listeners)){const F=this.storage.getItem(E),q=this.localCache[E];F!==q&&h(E,q,F)}}onStorageEvent(h,E=!1){if(!h.key)return void this.forAllChangedKeys(($e,at,Vt)=>{this.notifyListeners($e,Vt)});const F=h.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const $e=this.storage.getItem(F);if(h.newValue!==$e)null!==h.newValue?this.storage.setItem(F,h.newValue):this.storage.removeItem(F);else if(this.localCache[F]===h.newValue&&!E)return}const q=()=>{const $e=this.storage.getItem(F);!E&&this.localCache[F]===$e||this.notifyListeners(F,$e)},Ie=this.storage.getItem(F);!function st(){return(0,G.w1)()&&10===document.documentMode}()||Ie===h.newValue||h.newValue===h.oldValue?q():setTimeout(q,10)}notifyListeners(h,E){this.localCache[h]=E;const F=this.listeners[h];if(F)for(const q of Array.from(F))q(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,E,F)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:E,newValue:F}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(E)}_removeListener(h,E){this.listeners[h]&&(this.listeners[h].delete(E),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,E){var F=()=>super._set,q=this;return(0,w.Z)(function*(){yield F().call(q,h,E),q.localCache[h]=JSON.stringify(E)})()}_get(h){var E=()=>super._get,F=this;return(0,w.Z)(function*(){const q=yield E().call(F,h);return F.localCache[h]=JSON.stringify(q),q})()}_remove(h){var E=()=>super._remove,F=this;return(0,w.Z)(function*(){yield E().call(F,h),delete F.localCache[h]})()}}return m.type="LOCAL",m})(),As=(()=>{class m extends Va{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,E){}_removeListener(h,E){}}return m.type="SESSION",m})();let wu=(()=>{class m{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const E=this.receivers.find(q=>q.isListeningto(h));if(E)return E;const F=new m(h);return this.receivers.push(F),F}isListeningto(h){return this.eventTarget===h}handleEvent(h){var E=this;return(0,w.Z)(function*(){const F=h,{eventId:q,eventType:Ie,data:$e}=F.data,at=E.handlersMap[Ie];if(!at?.size)return;F.ports[0].postMessage({status:"ack",eventId:q,eventType:Ie});const Vt=Array.from(at).map(function(){var cn=(0,w.Z)(function*(Vi){return Vi(F.origin,$e)});return function(Vi){return cn.apply(this,arguments)}}()),un=yield function ju(m){return Promise.all(m.map(function(){var d=(0,w.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(E){return{fulfilled:!1,reason:E}}});return function(h){return d.apply(this,arguments)}}()))}(Vt);F.ports[0].postMessage({status:"done",eventId:q,eventType:Ie,response:un})})()}_subscribe(h,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(E)}_unsubscribe(h,E){this.handlersMap[h]&&E&&this.handlersMap[h].delete(E),(!E||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Tt(m="",d=10){let h="";for(let E=0;E<d;E++)h+=Math.floor(10*Math.random());return m+h}class fs{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,E=50){var F=this;return(0,w.Z)(function*(){const q=typeof MessageChannel<"u"?new MessageChannel:null;if(!q)throw new Error("connection_unavailable");let Ie,$e;return new Promise((at,Vt)=>{const un=Tt("",20);q.port1.start();const cn=setTimeout(()=>{Vt(new Error("unsupported_event"))},E);$e={messageChannel:q,onMessage(Vi){const Ca=Vi;if(Ca.data.eventId===un)switch(Ca.data.status){case"ack":clearTimeout(cn),Ie=setTimeout(()=>{Vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ie),at(Ca.data.response);break;default:clearTimeout(cn),clearTimeout(Ie),Vt(new Error("invalid_response"))}}},F.handlers.add($e),q.port1.addEventListener("message",$e.onMessage),F.target.postMessage({eventType:d,eventId:un,data:h},[q.port2])}).finally(()=>{$e&&F.removeMessageHandler($e)})})()}}function Nr(){return window}function Jt(){return typeof Nr().WorkerGlobalScope<"u"&&"function"==typeof Nr().importScripts}function va(){return(va=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const gt="firebaseLocalStorageDb",$a="firebaseLocalStorage",la="fbase_key";class Ea{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function ja(m,d){return m.transaction([$a],d?"readwrite":"readonly").objectStore($a)}function cl(){const m=indexedDB.open(gt,1);return new Promise((d,h)=>{m.addEventListener("error",()=>{h(m.error)}),m.addEventListener("upgradeneeded",()=>{const E=m.result;try{E.createObjectStore($a,{keyPath:la})}catch(F){h(F)}}),m.addEventListener("success",(0,w.Z)(function*(){const E=m.result;E.objectStoreNames.contains($a)?d(E):(E.close(),yield function mi(){const m=indexedDB.deleteDatabase(gt);return new Ea(m).toPromise()}(),d(yield cl()))}))})}function tu(m,d,h){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,w.Z)(function*(m,d,h){const E=ja(m,!0).put({[la]:d,value:h});return new Ea(E).toPromise()})).apply(this,arguments)}function Jl(){return(Jl=(0,w.Z)(function*(m,d){const h=ja(m,!1).get(d),E=yield new Ea(h).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function nu(m,d){const h=ja(m,!0).delete(d);return new Ea(h).toPromise()}const ci=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,w.Z)(function*(){return h.db||(h.db=yield cl()),h.db})()}_withRetries(h){var E=this;return(0,w.Z)(function*(){let F=0;for(;;)try{const q=yield E._openDb();return yield h(q)}catch(q){if(F++>3)throw q;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,w.Z)(function*(){return Jt()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,w.Z)(function*(){h.receiver=wu._getInstance(function Ke(){return Jt()?self:null}()),h.receiver._subscribe("keyChanged",function(){var E=(0,w.Z)(function*(F,q){return{keyProcessed:(yield h._poll()).includes(q.key)}});return function(F,q){return E.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var E=(0,w.Z)(function*(F,q){return["keyChanged"]});return function(F,q){return E.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,w.Z)(function*(){var E,F;if(h.activeServiceWorker=yield function mn(){return va.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new fs(h.activeServiceWorker);const q=yield h.sender._send("ping",{},800);!q||(null===(E=q[0])||void 0===E?void 0:E.fulfilled)&&(null===(F=q[0])||void 0===F?void 0:F.value.includes("keyChanged"))&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var E=this;return(0,w.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function $t(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:h},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const h=yield cl();return yield tu(h,_a,"1"),yield nu(h,_a),!0}catch{}return!1})()}_withPendingWrite(h){var E=this;return(0,w.Z)(function*(){E.pendingWrites++;try{yield h()}finally{E.pendingWrites--}})()}_set(h,E){var F=this;return(0,w.Z)(function*(){return F._withPendingWrite((0,w.Z)(function*(){return yield F._withRetries(q=>tu(q,h,E)),F.localCache[h]=E,F.notifyServiceWorker(h)}))})()}_get(h){var E=this;return(0,w.Z)(function*(){const F=yield E._withRetries(q=>function dl(m,d){return Jl.apply(this,arguments)}(q,h));return E.localCache[h]=F,F})()}_remove(h){var E=this;return(0,w.Z)(function*(){return E._withPendingWrite((0,w.Z)(function*(){return yield E._withRetries(F=>nu(F,h)),delete E.localCache[h],E.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,w.Z)(function*(){const E=yield h._withRetries(Ie=>{const $e=ja(Ie,!1).getAll();return new Ea($e).toPromise()});if(!E)return[];if(0!==h.pendingWrites)return[];const F=[],q=new Set;for(const{fbase_key:Ie,value:$e}of E)q.add(Ie),JSON.stringify(h.localCache[Ie])!==JSON.stringify($e)&&(h.notifyListeners(Ie,$e),F.push(Ie));for(const Ie of Object.keys(h.localCache))h.localCache[Ie]&&!q.has(Ie)&&(h.notifyListeners(Ie,null),F.push(Ie));return F})()}notifyListeners(h,E){this.localCache[h]=E;const F=this.listeners[h];if(F)for(const q of Array.from(F))q(E)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(E)}_removeListener(h,E){this.listeners[h]&&(this.listeners[h].delete(E),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Kt(m,d){return pt(m,"POST","/v2/accounts/mfaSignIn:start",en(m,d))}const Nt=1e12;class no{constructor(d){this.auth=d,this.counter=Nt,this._widgets=new Map}render(d,h){const E=this.counter;return this._widgets.set(E,new Ha(d,this.auth.name,h||{})),this.counter++,E}reset(d){var h;const E=d||Nt;null===(h=this._widgets.get(E))||void 0===h||h.delete(),this._widgets.delete(E)}getResponse(d){var h;return(null===(h=this._widgets.get(d||Nt))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,w.Z)(function*(){var E;return null===(E=h._widgets.get(d||Nt))||void 0===E||E.execute(),""})()}}class Ha{constructor(d,h,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const F="string"==typeof d?document.getElementById(d):d;He(F,"argument-error",{appName:h}),this.container=F,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ca(m){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<m;E++)d.push(h.charAt(Math.floor(Math.random()*h.length)));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const I=bi("rcb"),T=new On(3e4,6e4);class A{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Nr().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return He(function O(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&Dn(Nr().grecaptcha)?Promise.resolve(Nr().grecaptcha):new Promise((E,F)=>{const q=Nr().setTimeout(()=>{F(Ne(d,"network-request-failed"))},T.get());Nr()[I]=()=>{Nr().clearTimeout(q),delete Nr()[I];const $e=Nr().grecaptcha;if(!$e||!Dn($e))return void F(Ne(d,"internal-error"));const at=$e.render;$e.render=(Vt,un)=>{const cn=at(Vt,un);return this.counter++,cn},this.hostLanguage=h,E($e)},_i(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:I,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(q),F(Ne(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=Nr().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Z{load(d){return(0,w.Z)(function*(){return new no(d)})()}clearedOneInstance(){}}const te="recaptcha",oe={theme:"light",type:"image"};class qe{constructor(d,h=Object.assign({},oe),E){this.parameters=h,this.type=te,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lr(E),this.isInvisible="invisible"===this.parameters.size,He(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const F="string"==typeof d?document.getElementById(d):d;He(F,this.auth,"argument-error"),this.container=F,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Z:new A,this.validateStartingState()}verify(){var d=this;return(0,w.Z)(function*(){d.assertNotDestroyed();const h=yield d.render(),E=d.getAssertedRecaptcha();return E.getResponse(h)||new Promise(q=>{const Ie=$e=>{!$e||(d.tokenChangeListeners.delete(Ie),q($e))};d.tokenChangeListeners.add(Ie),d.isInvisible&&E.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){He(!this.parameters.sitekey,this.auth,"argument-error"),He(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),He(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(E=>E(h)),"function"==typeof d)d(h);else if("string"==typeof d){const E=Nr()[d];"function"==typeof E&&E(h)}}}assertNotDestroyed(){He(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,w.Z)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const E=document.createElement("div");h.appendChild(E),h=E}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,w.Z)(function*(){He(je()&&!Jt(),d.auth,"internal-error"),yield function Ot(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function ke(m){return yt.apply(this,arguments)}(d.auth);He(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return He(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tn{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=wi._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function Me(){return(Me=(0,w.Z)(function*(m,d,h){const E=lr(m),F=yield is(E,d,(0,G.m9)(h));return new tn(F,q=>hs(E,q))})).apply(this,arguments)}function Yr(){return(Yr=(0,w.Z)(function*(m,d,h){const E=(0,G.m9)(m);yield Cn(!1,E,"phone");const F=yield is(E.auth,d,(0,G.m9)(h));return new tn(F,q=>L(E,q))})).apply(this,arguments)}function Ts(){return(Ts=(0,w.Z)(function*(m,d,h){const E=(0,G.m9)(m),F=yield is(E.auth,d,(0,G.m9)(h));return new tn(F,q=>he(E,q))})).apply(this,arguments)}function is(m,d,h){return Go.apply(this,arguments)}function Go(){return(Go=(0,w.Z)(function*(m,d,h){var E;const F=yield h.verify();try{let q;if(He("string"==typeof F,m,"argument-error"),He(h.type===te,m,"argument-error"),q="string"==typeof d?{phoneNumber:d}:d,"session"in q){const Ie=q.session;if("phoneNumber"in q)return He("enroll"===Ie.type,m,"internal-error"),(yield to(m,{idToken:Ie.credential,phoneEnrollmentInfo:{phoneNumber:q.phoneNumber,recaptchaToken:F}})).phoneSessionInfo.sessionInfo;{He("signin"===Ie.type,m,"internal-error");const $e=(null===(E=q.multiFactorHint)||void 0===E?void 0:E.uid)||q.multiFactorUid;return He($e,m,"missing-multi-factor-info"),(yield Kt(m,{mfaPendingCredential:Ie.credential,mfaEnrollmentId:$e,phoneSignInInfo:{recaptchaToken:F}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ie}=yield Es(m,{phoneNumber:q.phoneNumber,recaptchaToken:F});return Ie}}finally{h._reset()}})).apply(this,arguments)}function mo(){return(mo=(0,w.Z)(function*(m,d){yield Ks((0,G.m9)(m),d)})).apply(this,arguments)}let yo=(()=>{class m{constructor(h){this.providerId=m.PROVIDER_ID,this.auth=lr(h)}verifyPhoneNumber(h,E){return is(this.auth,h,(0,G.m9)(E))}static credential(h,E){return wi._fromVerification(h,E)}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:E,temporaryProof:F}=h;return E&&F?wi._fromTokenResponse(E,F):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function xa(m,d){return d?rr(d):(He(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class _o extends es{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return ds(d,this._buildIdpRequest())}_linkToIdToken(d,h){return ds(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return ds(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function So(m){return Xo(m.auth,new _o(m),m.bypassAuthState)}function Du(m){const{auth:d,user:h}=m;return He(h,d,"internal-error"),$o(h,new _o(m),m.bypassAuthState)}function za(m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,w.Z)(function*(m){const{auth:d,user:h}=m;return He(h,d,"internal-error"),Ks(h,new _o(m),m.bypassAuthState)})).apply(this,arguments)}class ss{constructor(d,h,E,F,q=!1){this.auth=d,this.resolver=E,this.user=F,this.bypassAuthState=q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,w.Z)(function*(E,F){d.pendingPromise={resolve:E,reject:F};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(q){d.reject(q)}});return function(E,F){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,w.Z)(function*(){const{urlResponse:E,sessionId:F,postBody:q,tenantId:Ie,error:$e,type:at}=d;if($e)return void h.reject($e);const Vt={auth:h.auth,requestUri:E,sessionId:F,tenantId:Ie||void 0,postBody:q||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(at)(Vt))}catch(un){h.reject(un)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return So;case"linkViaPopup":case"linkViaRedirect":return za;case"reauthViaPopup":case"reauthViaRedirect":return Du;default:Ee(this.auth,"internal-error")}}resolve(d){Pe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Pe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vo=new On(2e3,1e4);function di(){return(di=(0,w.Z)(function*(m,d,h){const E=lr(m);Et(m,d,ai);const F=xa(E,h);return new nc(E,"signInViaPopup",d,F).executeNotNull()})).apply(this,arguments)}function ru(){return(ru=(0,w.Z)(function*(m,d,h){const E=(0,G.m9)(m);Et(E.auth,d,ai);const F=xa(E.auth,h);return new nc(E.auth,"reauthViaPopup",d,F,E).executeNotNull()})).apply(this,arguments)}function iu(){return(iu=(0,w.Z)(function*(m,d,h){const E=(0,G.m9)(m);Et(E.auth,d,ai);const F=xa(E.auth,h);return new nc(E.auth,"linkViaPopup",d,F,E).executeNotNull()})).apply(this,arguments)}let nc=(()=>{class m extends ss{constructor(h,E,F,q,Ie){super(h,E,q,Ie),this.provider=F,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var h=this;return(0,w.Z)(function*(){const E=yield h.execute();return He(E,h.auth,"internal-error"),E})()}onExecution(){var h=this;return(0,w.Z)(function*(){Pe(1===h.filter.length,"Popup operations only handle one event");const E=Tt();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],E),h.authWindow.associatedEvent=E,h.resolver._originValidation(h.auth).catch(F=>{h.reject(F)}),h.resolver._isIframeWebStorageSupported(h.auth,F=>{F||h.reject(Ne(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const h=()=>{var E,F;this.pollId=null!==(F=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==F&&F.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,vo.get())};h()}}return m.currentPopupAction=null,m})();const pl=new Map;class ic extends ss{constructor(d,h,E=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,E),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,w.Z)(function*(){let E=pl.get(h.auth._key());if(!E){try{const q=(yield function su(m,d){return gl.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;E=()=>Promise.resolve(q)}catch(F){E=()=>Promise.reject(F)}pl.set(h.auth._key(),E)}return h.bypassAuthState||pl.set(h.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,E=this;return(0,w.Z)(function*(){if("signInViaRedirect"===d.type)return h().call(E,d);if("unknown"!==d.type){if(d.eventId){const F=yield E.auth._redirectUserForId(d.eventId);if(F)return E.user=F,h().call(E,d);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function gl(){return(gl=(0,w.Z)(function*(m,d){const h=yl(d),E=ml(m);if(!(yield E._isAvailable()))return!1;const F="true"===(yield E._get(h));return yield E._remove(h),F})).apply(this,arguments)}function bu(m,d){return qc.apply(this,arguments)}function qc(){return(qc=(0,w.Z)(function*(m,d){return ml(m)._set(yl(d),"true")})).apply(this,arguments)}function ou(m,d){pl.set(m._key(),d)}function ml(m){return rr(m._redirectPersistence)}function yl(m){return ye("pendingRedirect",m.config.apiKey,m.name)}function Pa(){return(Pa=(0,w.Z)(function*(m,d,h){const E=lr(m);Et(m,d,ai),yield E._initializationPromise;const F=xa(E,h);return yield bu(F,E),F._openRedirect(E,d,"signInViaRedirect")})).apply(this,arguments)}function sc(){return(sc=(0,w.Z)(function*(m,d,h){const E=(0,G.m9)(m);Et(E.auth,d,ai),yield E.auth._initializationPromise;const F=xa(E.auth,h);yield bu(F,E.auth);const q=yield Ga(E);return F._openRedirect(E.auth,d,"reauthViaRedirect",q)})).apply(this,arguments)}function Rs(){return(Rs=(0,w.Z)(function*(m,d,h){const E=(0,G.m9)(m);Et(E.auth,d,ai),yield E.auth._initializationPromise;const F=xa(E.auth,h);yield Cn(!1,E,d.providerId),yield bu(F,E.auth);const q=yield Ga(E);return F._openRedirect(E.auth,d,"linkViaRedirect",q)})).apply(this,arguments)}function da(){return(da=(0,w.Z)(function*(m,d){return yield lr(m)._initializationPromise,zu(m,d,!1)})).apply(this,arguments)}function zu(m,d){return si.apply(this,arguments)}function si(){return(si=(0,w.Z)(function*(m,d,h=!1){const E=lr(m),F=xa(E,d),Ie=yield new ic(E,F,h).execute();return Ie&&!h&&(delete Ie.user._redirectEventId,yield E._persistUserIfCurrent(Ie.user),yield E._setRedirectUser(null,d)),Ie})).apply(this,arguments)}function Ga(m){return ps.apply(this,arguments)}function ps(){return(ps=(0,w.Z)(function*(m){const d=Tt(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class _l{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(d,E)&&(h=!0,this.sendToConsumer(d,E),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Cu(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return io(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var E;if(d.error&&!io(d)){const F=(null===(E=d.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";h.onError(Ne(this.auth,F))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const E=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&E}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wa(d))}saveEventToCache(d){this.cachedEventUids.add(wa(d)),this.lastProcessedEventTime=Date.now()}}function wa(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function io({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===d?.code}function Qd(m){return gs.apply(this,arguments)}function gs(){return(gs=(0,w.Z)(function*(m,d={}){return pt(m,"GET","/v1/projects",d)})).apply(this,arguments)}const oc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ia=/^https?/;function so(){return(so=(0,w.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield Qd(m);for(const h of d)try{if(Gu(h))return}catch{}Ee(m,"unauthorized-domain")})).apply(this,arguments)}function Gu(m){const d=ot(),{protocol:h,hostname:E}=new URL(d);if(m.startsWith("chrome-extension://")){const Ie=new URL(m);return""===Ie.hostname&&""===E?"chrome-extension:"===h&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&Ie.hostname===E}if(!Ia.test(h))return!1;if(oc.test(m))return E===m;const F=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+F+"|"+F+")$","i").test(E)}const ac=new On(3e4,6e4);function Na(){const m=Nr().___jsl;if(m?.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let h=0;h<m.CP.length;h++)m.CP[h]=null}let ea=null;function Eo(m){return ea=ea||function Oa(m){return new Promise((d,h)=>{var E,F,q;function Ie(){Na(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Na(),h(Ne(m,"network-request-failed"))},timeout:ac.get()})}if(null!==(F=null===(E=Nr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==F&&F.Iframe)d(gapi.iframes.getContext());else{if(null===(q=Nr().gapi)||void 0===q||!q.load){const $e=bi("iframefcb");return Nr()[$e]=()=>{gapi.load?Ie():h(Ne(m,"network-request-failed"))},_i(`https://apis.google.com/js/api.js?onload=${$e}`).catch(at=>h(at))}Ie()}}).catch(d=>{throw ea=null,d})}(m),ea}const Wu=new On(5e3,15e3),Ku={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yd(m){const d=m.config;He(d.authDomain,m,"auth-domain-config-required");const h=d.emulator?Rn(d,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,E={apiKey:d.apiKey,appName:m.name,v:fe.SDK_VERSION},F=Wa.get(m.config.apiHost);F&&(E.eid=F);const q=m._getFrameworks();return q.length&&(E.fw=q.join(",")),`${h}?${(0,G.xO)(E).slice(1)}`}function M(){return M=(0,w.Z)(function*(m){const d=yield Eo(m),h=Nr().gapi;return He(h,m,"internal-error"),d.open({where:document.body,url:Yd(m),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ku,dontclear:!0},E=>new Promise(function(){var F=(0,w.Z)(function*(q,Ie){yield E.restyle({setHideOnLeave:!1});const $e=Ne(m,"network-request-failed"),at=Nr().setTimeout(()=>{Ie($e)},Wu.get());function Vt(){Nr().clearTimeout(at),q(E)}E.ping(Vt).then(Vt,()=>{Ie($e)})});return function(q,Ie){return F.apply(this,arguments)}}()))}),M.apply(this,arguments)}const j={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qt{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ta=encodeURIComponent("fac");function bs(m,d,h,E,F,q){return Da.apply(this,arguments)}function Da(){return(Da=(0,w.Z)(function*(m,d,h,E,F,q){He(m.config.authDomain,m,"auth-domain-config-required"),He(m.config.apiKey,m,"invalid-api-key");const Ie={apiKey:m.config.apiKey,appName:m.name,authType:h,redirectUrl:E,v:fe.SDK_VERSION,eventId:F};if(d instanceof ai){d.setDefaultLanguage(m.languageCode),Ie.providerId=d.providerId||"",(0,G.xb)(d.getCustomParameters())||(Ie.customParameters=JSON.stringify(d.getCustomParameters()));for(const[un,cn]of Object.entries(q||{}))Ie[un]=cn}if(d instanceof jr){const un=d.getScopes().filter(cn=>""!==cn);un.length>0&&(Ie.scopes=un.join(","))}m.tenantId&&(Ie.tid=m.tenantId);const $e=Ie;for(const un of Object.keys($e))void 0===$e[un]&&delete $e[un];const at=yield m._getAppCheckToken(),Vt=at?`#${ta}=${encodeURIComponent(at)}`:"";return`${Ri(m)}?${(0,G.xO)($e).slice(1)}${Vt}`})).apply(this,arguments)}function Ri({config:m}){return m.emulator?Rn(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}const na="webStorageSupport";class Xd extends class vl{constructor(d){this.factorId=d}_process(d,h,E){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,E);case"signin":return this._finalizeSignIn(d,h.credential);default:return we("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Xd(d)}_finalizeEnroll(d,h,E){return function or(m,d){return pt(m,"POST","/v2/accounts/mfaEnrollment:finalize",en(m,d))}(d,{idToken:h,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function Ma(m,d){return pt(m,"POST","/v2/accounts/mfaSignIn:finalize",en(m,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uc=(()=>{class m{constructor(){}static assertion(h){return Xd._fromCredential(h)}}return m.FACTOR_ID="phone",m})();var wl="@firebase/auth";class Jd{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,w.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(E=>{d(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);!h||(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qu(){return window}function ed(){return(ed=(0,w.Z)(function*(m,d,h){var E;const{BuildInfo:F}=qu();Pe(d.sessionId,"AuthEvent did not contain a session ID");const q=yield nd(d.sessionId),Ie={};return ie()?Ie.ibi=F.packageName:In()?Ie.apn=F.packageName:Ee(m,"operation-not-supported-in-this-environment"),F.displayName&&(Ie.appDisplayName=F.displayName),Ie.sessionId=q,bs(m,h,d.type,void 0,null!==(E=d.eventId)&&void 0!==E?E:void 0,Ie)})).apply(this,arguments)}function td(){return(td=(0,w.Z)(function*(m){const{BuildInfo:d}=qu(),h={};ie()?h.iosBundleId=d.packageName:In()?h.androidPackageName=d.packageName:Ee(m,"operation-not-supported-in-this-environment"),yield Qd(m,h)})).apply(this,arguments)}function au(){return(au=(0,w.Z)(function*(m,d,h){const{cordova:E}=qu();let F=()=>{};try{yield new Promise((q,Ie)=>{let $e=null;function at(){var cn;q();const Vi=null===(cn=E.plugins.browsertab)||void 0===cn?void 0:cn.close;"function"==typeof Vi&&Vi(),"function"==typeof h?.close&&h.close()}function Vt(){$e||($e=window.setTimeout(()=>{Ie(Ne(m,"redirect-cancelled-by-user"))},2e3))}function un(){"visible"===document?.visibilityState&&Vt()}d.addPassiveListener(at),document.addEventListener("resume",Vt,!1),In()&&document.addEventListener("visibilitychange",un,!1),F=()=>{d.removePassiveListener(at),document.removeEventListener("resume",Vt,!1),document.removeEventListener("visibilitychange",un,!1),$e&&window.clearTimeout($e)}})}finally{F()}})).apply(this,arguments)}function nd(m){return dc.apply(this,arguments)}function dc(){return(dc=(0,w.Z)(function*(m){const d=zp(m),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(F=>F.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function zp(m){if(Pe(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),h=new Uint8Array(d);for(let E=0;E<m.length;E++)h[E]=m.charCodeAt(E);return h}(0,G.Pz)("authIdTokenMaxAge"),function eh(m){(0,fe._registerComponent)(new De.wA("auth",(d,{options:h})=>{const E=d.getProvider("app").getImmediate(),F=d.getProvider("heartbeat"),q=d.getProvider("app-check-internal"),{apiKey:Ie,authDomain:$e}=E.options;He(Ie&&!Ie.includes(":"),"invalid-api-key",{appName:E.name});const at={apiKey:Ie,authDomain:$e,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ue(m)},Vt=new oo(E,F,q,at);return function Un(m,d){const h=d?.persistence||[],E=(Array.isArray(h)?h:[h]).map(rr);d?.errorMap&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(E,d?.popupRedirectResolver)}(Vt,h),Vt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,E)=>{d.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new De.wA("auth-internal",d=>{const h=lr(d.getProvider("auth").getImmediate());return new Jd(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(wl,"0.23.2",function df(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,fe.registerVersion)(wl,"0.23.2","esm2017")}("Browser");class ka extends _l{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,w.Z)(function*(){yield d.initPromise})()}}function rd(m){return hc.apply(this,arguments)}function hc(){return(hc=(0,w.Z)(function*(m){const d=yield La()._get(Ao(m));return d&&(yield La()._remove(Ao(m))),d})).apply(this,arguments)}function id(){const m=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let h=0;h<20;h++){const E=Math.floor(Math.random()*d.length);m.push(d.charAt(E))}return m.join("")}function La(){return rr(gi)}function Ao(m){return ye("authEvent",m.config.apiKey,m.name)}function uu(m){if(!m?.includes("?"))return{};const[d,...h]=m.split("?");return(0,G.zd)(h.join("?"))}function gc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ne("no-auth-event")}}function os(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Su(m=(0,G.z$)()){return!("file:"!==os()&&"ionic:"!==os()&&"capacitor:"!==os()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function yf(){try{const m=self.localStorage,d=Tt();if(m)return m.setItem(d,"1"),m.removeItem(d),!function qa(m=(0,G.z$)()){return function Ka(){return(0,G.w1)()&&11===document?.documentMode}()||function uh(m=(0,G.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,G.hl)()}catch{return lh()&&(0,G.hl)()}return!1}function lh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function cr(){return(function ah(){return"http:"===os()||"https:"===os()}()||(0,G.ru)()||Su())&&!function mf(){return(0,G.b$)()||(0,G.UG)()}()&&yf()&&!lh()}function _f(){return Su()&&typeof document<"u"}function od(){return(od=(0,w.Z)(function*(){return!!_f()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const ra={LOCAL:"local",NONE:"none",SESSION:"session"},cu=He,Wp="persistence";function Au(m){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,w.Z)(function*(m){yield m._initializationPromise;const d=Qu(),h=ye(Wp,m.config.apiKey,m.name);d&&d.setItem(h,m._getPersistence())})).apply(this,arguments)}function Qu(){var m;try{return(null===(m=function ch(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Yu=He;class Mu{constructor(){this.browserResolver=rr(class kr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=As,this._completeRedirectFn=zu,this._overrideRedirectResult=ou}_openPopup(d,h,E,F){var q=this;return(0,w.Z)(function*(){var Ie;Pe(null===(Ie=q.eventManagers[d._key()])||void 0===Ie?void 0:Ie.manager,"_initialize() not called before _openPopup()");const $e=yield bs(d,h,E,ot(),F);return function Bt(m,d,h,E=500,F=600){const q=Math.max((window.screen.availHeight-F)/2,0).toString(),Ie=Math.max((window.screen.availWidth-E)/2,0).toString();let $e="";const at=Object.assign(Object.assign({},j),{width:E.toString(),height:F.toString(),top:q,left:Ie}),Vt=(0,G.z$)().toLowerCase();h&&($e=At(Vt)?"_blank":h),Ye(Vt)&&(d=d||"http://localhost",at.scrollbars="yes");const un=Object.entries(at).reduce((Vi,[Ca,cd])=>`${Vi}${Ca}=${cd},`,"");if(function Ae(m=(0,G.z$)()){var d;return ie(m)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Vt)&&"_self"!==$e)return function fn(m,d){const h=document.createElement("a");h.href=m,h.target=d;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(E)}(d||"",$e),new qt(null);const cn=window.open(d||"",$e,un);He(cn,m,"popup-blocked");try{cn.focus()}catch{}return new qt(cn)}(d,$e,Tt())})()}_openRedirect(d,h,E,F){var q=this;return(0,w.Z)(function*(){return yield q._originValidation(d),function eu(m){Nr().location.href=m}(yield bs(d,h,E,ot(),F)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:F,promise:q}=this.eventManagers[h];return F?Promise.resolve(F):(Pe(q,"If manager is not set, promise should be"),q)}const E=this.initAndGetManager(d);return this.eventManagers[h]={promise:E},E.catch(()=>{delete this.eventManagers[h]}),E}initAndGetManager(d){var h=this;return(0,w.Z)(function*(){const E=yield function D(m){return M.apply(this,arguments)}(d),F=new _l(d);return E.register("authEvent",q=>(He(q?.authEvent,d,"invalid-auth-event"),{status:F.onEvent(q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:F},h.iframes[d._key()]=E,F})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(na,{type:na},F=>{var q;const Ie=null===(q=F?.[0])||void 0===q?void 0:q[na];void 0!==Ie&&h(!!Ie),Ee(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Ai(m){return so.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return Pt()||Fe()||ie()}}),this.cordovaResolver=rr(class lu{constructor(){this._redirectPersistence=As,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zu,this._overrideRedirectResult=ou}_initialize(d){var h=this;return(0,w.Z)(function*(){const E=d._key();let F=h.eventManagers.get(E);return F||(F=new ka(d),h.eventManagers.set(E,F),h.attachCallbackListeners(d,F)),F})()}_openPopup(d){Ee(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,E,F){var q=this;return(0,w.Z)(function*(){!function cc(m){var d,h,E,F,q,Ie,$e,at,Vt,un;const cn=qu();He("function"==typeof(null===(d=cn?.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),He(typeof(null===(h=cn?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),He("function"==typeof(null===(q=null===(F=null===(E=cn?.cordova)||void 0===E?void 0:E.plugins)||void 0===F?void 0:F.browsertab)||void 0===q?void 0:q.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),He("function"==typeof(null===(at=null===($e=null===(Ie=cn?.cordova)||void 0===Ie?void 0:Ie.plugins)||void 0===$e?void 0:$e.browsertab)||void 0===at?void 0:at.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),He("function"==typeof(null===(un=null===(Vt=cn?.cordova)||void 0===Vt?void 0:Vt.InAppBrowser)||void 0===un?void 0:un.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Ie=yield q._initialize(d);yield Ie.initialized(),Ie.resetRedirect(),function qd(){pl.clear()}(),yield q._originValidation(d);const $e=function ih(m,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:id(),postBody:null,tenantId:m.tenantId,error:Ne(m,"no-auth-event")}}(d,E,F);yield function Zu(m,d){return La()._set(Ao(m),d)}(d,$e);const at=yield function gf(m,d,h){return ed.apply(this,arguments)}(d,$e,h),Vt=yield function Hp(m){const{cordova:d}=qu();return new Promise(h=>{d.plugins.browsertab.isAvailable(E=>{let F=null;E?d.plugins.browsertab.openUrl(m):F=d.InAppBrowser.open(m,function ee(m=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),h(F)})})}(at);return function rh(m,d,h){return au.apply(this,arguments)}(d,Ie,Vt)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function nh(m){return td.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:E,handleOpenURL:F,BuildInfo:q}=qu(),Ie=setTimeout((0,w.Z)(function*(){yield rd(d),h.onEvent(gc())}),500),$e=function(){var un=(0,w.Z)(function*(cn){clearTimeout(Ie);const Vi=yield rd(d);let Ca=null;Vi&&cn?.url&&(Ca=function fc(m,d){var h,E;const F=function Tl(m){const d=uu(m),h=d.link?decodeURIComponent(d.link):void 0,E=uu(h).link,F=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return uu(F).link||F||E||h||m}(d);if(F.includes("/__/auth/callback")){const q=uu(F),Ie=q.firebaseError?function sh(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(q.firebaseError)):null,$e=null===(E=null===(h=Ie?.code)||void 0===h?void 0:h.split("auth/"))||void 0===E?void 0:E[1],at=$e?Ne($e):null;return at?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:at,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:F,postBody:null}}return null}(Vi,cn.url)),h.onEvent(Ca||gc())});return function(Vi){return un.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,$e);const at=F,Vt=`${q.packageName.toLowerCase()}://`;qu().handleOpenURL=function(){var un=(0,w.Z)(function*(cn){if(cn.toLowerCase().startsWith(Vt)&&$e({url:cn}),"function"==typeof at)try{at(cn)}catch(Vi){console.error(Vi)}});return function(cn){return un.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=As,this._completeRedirectFn=zu,this._overrideRedirectResult=ou}_initialize(d){var h=this;return(0,w.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,E,F){var q=this;return(0,w.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._openPopup(d,h,E,F)})()}_openRedirect(d,h,E,F){var q=this;return(0,w.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._openRedirect(d,h,E,F)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return _f()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,w.Z)(function*(){if(d.underlyingResolver)return;const h=yield function yc(){return od.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function xu(m){return m.unwrap()}function Ef(m){return dh(m)}function dh(m){const{_tokenResponse:d}=m instanceof G.ZR?m.customData:m;if(!d)return null;if(!(m instanceof G.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return yo.credentialFromResult(m);const h=d.providerId;if(!h||"password"===h)return null;let E;switch(h){case"google.com":E=Vo;break;case"facebook.com":E=Ui;break;case"github.com":E=Io;break;case"twitter.com":E=pi;break;default:const{oauthIdToken:F,oauthAccessToken:q,oauthTokenSecret:Ie,pendingToken:$e,nonce:at}=d;return q||Ie||F||$e?$e?h.startsWith("saml.")?Jn._create(h,$e):vs._fromParams({providerId:h,signInMethod:h,pendingToken:$e,idToken:F,accessToken:q}):new Si(h).credential({idToken:F,accessToken:q,rawNonce:at}):null}return m instanceof G.ZR?E.credentialFromError(m):E.credentialFromResult(m)}function Ko(m,d){return d.catch(h=>{throw h instanceof G.ZR&&function _c(m,d){var h;const E=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new ad(m,function Bi(m,d){var h;const E=(0,G.m9)(m),F=d;return He(d.customData.operationType,E,"argument-error"),He(null===(h=F.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,E,"argument-error"),Yi._fromError(E,F)}(m,d));else if(E){const F=dh(d),q=d;F&&(q.credential=F,q.tenantId=E.tenantId||void 0,q.email=E.email||void 0,q.phoneNumber=E.phoneNumber||void 0)}}(m,h),h}).then(h=>{const F=h.user;return{operationType:h.operationType,credential:Ef(h),additionalUserInfo:jo(h),user:ba.getOrCreate(F)}})}function Fi(m,d){return bl.apply(this,arguments)}function bl(){return(bl=(0,w.Z)(function*(m,d){const h=yield d;return{verificationId:h.verificationId,confirm:E=>Ko(m,h.confirm(E))}})).apply(this,arguments)}class ad{constructor(d,h){this.resolver=h,this.auth=function vf(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Ko(xu(this.auth),this.resolver.resolveSignIn(d))}}class ba{constructor(d){this._delegate=d,this.multiFactor=function Ho(m){const d=(0,G.m9)(m);return rs.has(d)||rs.set(d,Ds._fromUser(d)),rs.get(d)}(d)}static getOrCreate(d){return ba.USER_MAP.has(d)||ba.USER_MAP.set(d,new ba(d)),ba.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,w.Z)(function*(){return Ko(h.auth,L(h._delegate,d))})()}linkWithPhoneNumber(d,h){var E=this;return(0,w.Z)(function*(){return Fi(E.auth,function Or(m,d,h){return Yr.apply(this,arguments)}(E._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,w.Z)(function*(){return Ko(h.auth,function tc(m,d,h){return iu.apply(this,arguments)}(h._delegate,d,Mu))})()}linkWithRedirect(d){var h=this;return(0,w.Z)(function*(){return yield Au(lr(h.auth)),function Yc(m,d,h){return function Xc(m,d,h){return Rs.apply(this,arguments)}(m,d,h)}(h._delegate,d,Mu)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,w.Z)(function*(){return Ko(h.auth,he(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return Fi(this.auth,function ro(m,d,h){return Ts.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return Ko(this.auth,function ec(m,d,h){return ru.apply(this,arguments)}(this._delegate,d,Mu))}reauthenticateWithRedirect(d){var h=this;return(0,w.Z)(function*(){return yield Au(lr(h.auth)),function Hu(m,d,h){return function Qc(m,d,h){return sc.apply(this,arguments)}(m,d,h)}(h._delegate,d,Mu)})()}sendEmailVerification(d){return function de(m,d){return ce.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,w.Z)(function*(){return yield function Fs(m,d){return $i.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function _n(m,d){return An((0,G.m9)(m),d,null)}(this._delegate,d)}updatePassword(d){return function hn(m,d){return An((0,G.m9)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function go(m,d){return mo.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Tn(m,d){return bn.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function Be(m,d,h){return tt.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ba.USER_MAP=new WeakMap;const ud=He;let vc=(()=>{class m{constructor(h,E){if(this.app=h,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:F}=h.options;ud(F,"invalid-api-key",{appName:h.name}),ud(F,"invalid-api-key",{appName:h.name});const q=typeof window<"u"?Mu:void 0;this._delegate=E.initialize({options:{persistence:qp(F,h.name),popupRedirectResolver:q}}),this._delegate._updateErrorMap(Xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ba.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,E){!function ks(m,d,h){const E=lr(m);He(E._canInitEmulator,E,"emulator-config-failed"),He(/^https?:\/\//.test(d),E,"invalid-emulator-scheme");const F=!!h?.disableWarnings,q=Kr(d),{host:Ie,port:$e}=function ii(m){const d=Kr(m),h=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!h)return{host:"",port:null};const E=h[2].split("@").pop()||"",F=/^(\[[^\]]+\])(:|$)/.exec(E);if(F){const q=F[1];return{host:q,port:js(E.substr(q.length+1))}}{const[q,Ie]=E.split(":");return{host:q,port:js(Ie)}}}(d);E.config.emulator={url:`${q}//${Ie}${null===$e?"":`:${$e}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Ie,port:$e,protocol:q.replace(":",""),options:Object.freeze({disableWarnings:F})}),F||function Ci(){function m(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,h,E)}applyActionCode(h){return function Us(m,d){return xr.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return Qr(this._delegate,h)}confirmPasswordReset(h,E){return function ts(m,d,h){return Mr.apply(this,arguments)}(this._delegate,h,E)}createUserWithEmailAndPassword(h,E){var F=this;return(0,w.Z)(function*(){return Ko(F._delegate,function bo(m,d,h){return Qi.apply(this,arguments)}(F._delegate,h,E))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function z(m,d){return X.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function K(m,d){return"EMAIL_SIGNIN"===Is.parseLink(d)?.operation}(0,h)}getRedirectResult(){var h=this;return(0,w.Z)(function*(){ud(cr(),h._delegate,"operation-not-supported-in-this-environment");const E=yield function Jc(m,d){return da.apply(this,arguments)}(h._delegate,Mu);return E?Ko(h._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function mc(m,d){lr(m)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,E,F){const{next:q,error:Ie,complete:$e}=ld(h,E,F);return this._delegate.onAuthStateChanged(q,Ie,$e)}onIdTokenChanged(h,E,F){const{next:q,error:Ie,complete:$e}=ld(h,E,F);return this._delegate.onIdTokenChanged(q,Ie,$e)}sendSignInLinkToEmail(h,E){return function H(m,d,h){return N.apply(this,arguments)}(this._delegate,h,E)}sendPasswordResetEmail(h,E){return function Zr(m,d,h){return Hr.apply(this,arguments)}(this._delegate,h,E||void 0)}setPersistence(h){var E=this;return(0,w.Z)(function*(){let F;switch(function Kp(m,d){cu(Object.values(ra).includes(d),m,"invalid-persistence-type"),(0,G.b$)()?cu(d!==ra.SESSION,m,"unsupported-persistence-type"):(0,G.UG)()?cu(d===ra.NONE,m,"unsupported-persistence-type"):lh()?cu(d===ra.NONE||d===ra.LOCAL&&(0,G.hl)(),m,"unsupported-persistence-type"):cu(d===ra.NONE||yf(),m,"unsupported-persistence-type")}(E._delegate,h),h){case ra.SESSION:F=As;break;case ra.LOCAL:F=(yield rr(ci)._isAvailable())?ci:gi;break;case ra.NONE:F=ri;break;default:return Ee("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(F)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return Ko(this._delegate,function Ys(m){return Ws.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return Ko(this._delegate,hs(this._delegate,h))}signInWithCustomToken(h){return Ko(this._delegate,function zt(m,d){return Ct.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,E){return Ko(this._delegate,function R(m,d,h){return hs((0,G.m9)(m),$r.credential(d,h))}(this._delegate,h,E))}signInWithEmailLink(h,E){return Ko(this._delegate,function S(m,d,h){return g.apply(this,arguments)}(this._delegate,h,E))}signInWithPhoneNumber(h,E){return Fi(this._delegate,function Wt(m,d,h){return Me.apply(this,arguments)}(this._delegate,h,E))}signInWithPopup(h){var E=this;return(0,w.Z)(function*(){return ud(cr(),E._delegate,"operation-not-supported-in-this-environment"),Ko(E._delegate,function fl(m,d,h){return di.apply(this,arguments)}(E._delegate,h,Mu))})()}signInWithRedirect(h){var E=this;return(0,w.Z)(function*(){return ud(cr(),E._delegate,"operation-not-supported-in-this-environment"),yield Au(E._delegate),function Zc(m,d,h){return function Zd(m,d,h){return Pa.apply(this,arguments)}(m,d,h)}(E._delegate,h,Mu)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Bs(m,d){return ns.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=ra,m})();function ld(m,d,h){let E=m;"function"!=typeof m&&({next:E,error:d,complete:h}=m);const F=E;return{next:Ie=>F(Ie&&ba.getOrCreate(Ie)),error:d,complete:h}}function qp(m,d){const h=function Ta(m,d){const h=Qu();if(!h)return[];const E=ye(Wp,m,d);switch(h.getItem(E)){case ra.NONE:return[ri];case ra.LOCAL:return[ci,As];case ra.SESSION:return[As];default:return[]}}(m,d);if(typeof self<"u"&&!h.includes(ci)&&h.push(ci),typeof window<"u")for(const E of[gi,As])h.includes(E)||h.push(E);return h.includes(ri)||h.push(ri),h}class Xu{constructor(){this.providerId="phone",this._delegate=new yo(xu(W.Z.auth()))}static credential(d,h){return yo.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}Xu.PHONE_SIGN_IN_METHOD=yo.PHONE_SIGN_IN_METHOD,Xu.PROVIDER_ID=yo.PROVIDER_ID;const Pu=He;class Zp{constructor(d,h,E=W.Z.app()){var F;Pu(null===(F=E.options)||void 0===F?void 0:F.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new qe(d,h,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wf(m){m.INTERNAL.registerComponent(new De.wA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),E=d.getProvider("auth");return new vc(h,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:$r,FacebookAuthProvider:Ui,GithubAuthProvider:Io,GoogleAuthProvider:Vo,OAuthProvider:Si,SAMLAuthProvider:Zi,PhoneAuthProvider:Xu,PhoneMultiFactorGenerator:uc,RecaptchaVerifier:Zp,TwitterAuthProvider:pi,Auth:vc,AuthCredential:es,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.4.2")}(W.Z)},5861:(Lt,We,U)=>{function w(G,fe,pe,_e,De,ge,xe){try{var ae=G[ge](xe),ue=ae.value}catch(ve){return void pe(ve)}ae.done?fe(ue):Promise.resolve(ue).then(_e,De)}function W(G){return function(){var fe=this,pe=arguments;return new Promise(function(_e,De){var ge=G.apply(fe,pe);function xe(ue){w(ge,_e,De,xe,ae,"next",ue)}function ae(ue){w(ge,_e,De,xe,ae,"throw",ue)}xe(void 0)})}}U.d(We,{Z:()=>W})}},Lt=>{Lt(Lt.s=4662)}]);