!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}(self.webpackChunksolar_car_website=self.webpackChunksolar_car_website||[]).push([[787],{2787:function(t,r,n){"use strict";n.r(r),n.d(r,{PortalModule:function(){return ce}});var o=n(8583),a=n(6483),s=n(4762),u=n(7716),l=(function(e){e.ADMIN="Admin",e.BUSINESS="Business",e.NONE="None"}(l||(l={})),l),c=n(2392),g=n(3946),d=function(){var t=function(){function t(i){e(this,t),this.firestore=i}return i(t,[{key:"addUser",value:function(e){return this.firestore.collection("users-collection").doc(e.id).set(e)}},{key:"getUser",value:function(e){return this.firestore.collection("users-collection").doc(e).get()}},{key:"getUsers",value:function(){return this.firestore.collection("users-collection").snapshotChanges()}},{key:"updateUser",value:function(e){return this.firestore.collection("users-collection").doc(e.id).update({email:e.email,verified:e.verified,displayName:e.displayName,userPrivileges:e.userPrivileges,userActions:e.userActions})}},{key:"deleteUser",value:function(e){this.firestore.collection("users-collection").doc(e).delete()}},{key:"verifyUser",value:function(e){return this.firestore.collection("users-collection").doc(e).update({verified:!0,userPrivileges:[l.NONE]})}},{key:"addUserPrivilege",value:function(e,t){var i=this;this.firestore.collection("users-collection").doc(e).get().subscribe(function(e){var r=e.data();r.userPrivileges.push(t),i.updateUser(r)})}},{key:"removeUserPrivilege",value:function(e,t){var i=this;this.firestore.collection("users-collection").doc(e).get().subscribe(function(e){var r=e.data();r.userPrivileges=r.userPrivileges.filter(function(e){return e!==t}),i.updateUser(r)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.LFG(g.ST))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),m=function(){var t=function(){function t(i,r,n){e(this,t),this.auth=i,this.router=r,this.userService=n}return i(t,[{key:"Login",value:function(e,t){var i=this;this.auth.signInWithEmailAndPassword(e,t).then(function(e){e.user.emailVerified||(window.alert("Please verify your email address before logging in."),i.auth.signOut()),i.userService.getUser(e.user.uid).subscribe(function(e){var t=e.data();t.verified||(window.alert("Please ask your manager to verify you before logging in."),i.auth.signOut()),window.sessionStorage.setItem("User",JSON.stringify(t)),i.router.navigateByUrl("portal/user")})}).catch(function(e){window.alert(e.message)})}},{key:"SignUp",value:function(e,t,i){var r=this;this.auth.createUserWithEmailAndPassword(t,i).then(function(i){var n={id:i.user.uid,displayName:e,email:t,verified:!1,userPrivileges:[l.NONE],userActions:[]};r.auth.currentUser.then(function(e){e.sendEmailVerification()}),r.userService.addUser(n)}).catch(function(e){window.alert(e.message)})}},{key:"LogOut",value:function(){var e=this;this.auth.signOut().then(function(){e.router.navigateByUrl("portal/login"),window.sessionStorage.removeItem("User")})}},{key:"ChangeEmail",value:function(e){var t=this;this.auth.currentUser.then(function(i){i.updateEmail(e).then(function(){var i=JSON.parse(window.sessionStorage.getItem("User"));i.email=e,t.userService.updateUser(i)})})}},{key:"ResetPassword",value:function(e){this.auth.sendPasswordResetEmail(e)}},{key:"ChangePassword",value:function(e){this.auth.currentUser.then(function(t){t.updatePassword(e)})}},{key:"isAdmin",value:function(){var e=JSON.parse(window.sessionStorage.getItem("User"));return e&&e.userPrivileges.includes(l.ADMIN)}},{key:"hasBusinessPrivileges",value:function(){var e=JSON.parse(window.sessionStorage.getItem("User"));return e&&(e.userPrivileges.includes(l.ADMIN)||e.userPrivileges.includes(l.BUSINESS))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.LFG(c.zQ),u.LFG(a.F0),u.LFG(d))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();function p(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"li",12),u.TgZ(2,"a",13),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&e){var i=t.$implicit;u.xp6(2),u.s9C("routerLink",i.link),u.xp6(1),u.Oqu(i.label)}}function Z(e,t){if(1&e&&(u.ynx(0),u.YNc(1,p,4,2,"div",11),u.BQk()),2&e){var i=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",i.routeLinks)}}function h(e,t){if(1&e){var i=u.EpF();u.ynx(0),u.TgZ(1,"div",6),u.TgZ(2,"div",7),u.YNc(3,Z,2,1,"ng-container",5),u.TgZ(4,"div"),u.TgZ(5,"button",8),u.NdJ("click",function(){return u.CHM(i),u.oxw().getAuth().LogOut()}),u._uU(6,"Log Out"),u.qZA(),u.qZA(),u.TgZ(7,"a",9),u._UZ(8,"img",10),u.qZA(),u.qZA(),u.qZA(),u.BQk()}if(2&e){var r=u.oxw();u.xp6(3),u.Q6J("ngIf",r.getAuth().hasBusinessPrivileges())}}var f=function(){var t=function(){function t(i){e(this,t),this.auth=i,this.routeLinks=[{label:"Team",link:"manage-team"},{label:"Sponsors",link:"manage-sponsors"},{label:"News",link:"manage-news"}]}return i(t,[{key:"LoggedIn",value:function(){var e=JSON.parse(window.sessionStorage.getItem("User"));return null!==e&&e.verified}},{key:"getAuth",value:function(){return this.auth}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(m))},t.\u0275cmp=u.Xpm({type:t,selectors:[["portal-header"]],decls:8,vars:1,consts:[[1,"sticky-top"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-danger"],["href","./portal",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNavAltMarkup","aria-controls","navbarNavAltMarkup","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[4,"ngIf"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse"],[1,"navbar-nav","ml-auto"],[1,"nav-link","user-btn",3,"click"],["routerLink","user",1,"nav-link"],["src","../../../assets/portal/user-icon.png",1,"user-icon"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"routerLink"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"nav",1),u.TgZ(2,"a",2),u.TgZ(3,"h3"),u._uU(4," SolarCar Portal "),u.qZA(),u.qZA(),u.TgZ(5,"button",3),u._UZ(6,"span",4),u.qZA(),u.YNc(7,h,9,1,"ng-container",5),u.qZA(),u.qZA()),2&e&&(u.xp6(7),u.Q6J("ngIf",t.LoggedIn()))},directives:[o.O5,a.yS,o.sg],styles:["img[_ngcontent-%COMP%]{height:auto;max-width:348px;max-height:58px}.navbar[_ngcontent-%COMP%]{font-size:120%;padding:20px 30px}.sticky-top[_ngcontent-%COMP%]{position:sticky}.user-btn[_ngcontent-%COMP%]{background:none;border:none}.user-icon[_ngcontent-%COMP%]{max-width:40px}"]}),t}(),v=function(){var t=function(){function t(i){e(this,t),this.authService=i}return i(t,[{key:"ngOnDestroy",value:function(){return(0,s.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.LogOut();case 2:case"end":return e.stop()}},e,this)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(m))},t.\u0275cmp=u.Xpm({type:t,selectors:[["portal-root"]],decls:2,vars:0,template:function(e,t){1&e&&(u._UZ(0,"portal-header"),u._UZ(1,"router-outlet"))},directives:[f,a.lC],styles:[""]}),t}(),A=function(){var t=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-edit-news"]],decls:2,vars:0,template:function(e,t){1&e&&(u.TgZ(0,"p"),u._uU(1,"Manage news page works!"),u.qZA())},styles:[""]}),t}(),q=n(1420),U=n(9351),T=function(){var t=function(){function t(i){e(this,t),this.storage=i}return i(t,[{key:"uploadFile",value:function(e,t){var i=t+e.name;return this.storage.storage.ref().child(i).put(e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.LFG(U.Q1))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),b=n(3092),y=n(3851);function _(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){var i=t.$implicit;u.xp6(1),u.Oqu(i)}}function w(e,t){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"th",16),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.TgZ(11,"td"),u._uU(12),u.qZA(),u.qZA()),2&e){var i=t.$implicit,r=t.index;u.xp6(2),u.Oqu(r+1),u.xp6(2),u.Oqu(i.uid),u.xp6(2),u.Oqu(i.uName),u.xp6(2),u.Oqu(i.eName),u.xp6(2),u.Oqu(i.action),u.xp6(2),u.Oqu(i.dateTime)}}function x(e,t){if(1&e&&(u.TgZ(0,"div",15),u.TgZ(1,"h1",12),u._uU(2,"Action History"),u.qZA(),u.TgZ(3,"table",13),u.TgZ(4,"thead"),u.TgZ(5,"tr"),u.TgZ(6,"th",14),u._uU(7,"#"),u.qZA(),u.TgZ(8,"th",14),u._uU(9,"User ID"),u.qZA(),u.TgZ(10,"th",14),u._uU(11,"User"),u.qZA(),u.TgZ(12,"th",14),u._uU(13,"Entity"),u.qZA(),u.TgZ(14,"th",14),u._uU(15,"Action"),u.qZA(),u.TgZ(16,"th",14),u._uU(17,"Date"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(18,"tbody"),u.YNc(19,w,13,6,"tr",6),u.qZA(),u.qZA(),u._UZ(20,"br"),u.qZA()),2&e){var i=u.oxw();u.xp6(19),u.Q6J("ngForOf",i.actionHistory)}}function F(e,t){if(1&e){var i=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"th",16),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u.TgZ(8,"a",17),u._UZ(9,"img",18),u.qZA(),u.qZA(),u.TgZ(10,"td"),u._uU(11),u.qZA(),u.TgZ(12,"td"),u.TgZ(13,"button",19),u.NdJ("click",function(){var e=u.CHM(i).$implicit;return u.oxw().deleteSponsor(e)}),u._uU(14,"Delete"),u.qZA(),u._UZ(15,"br"),u.TgZ(16,"button",19),u.NdJ("click",function(){var e=u.CHM(i).$implicit;return u.oxw().setupSponsorUpdate(e)}),u._uU(17,"Update"),u.qZA(),u._UZ(18,"br"),u.TgZ(19,"button",19),u.NdJ("click",function(){var e=u.CHM(i).$implicit;return u.oxw().showActionHistory(e)}),u._uU(20,"History"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit,n=t.index;u.xp6(2),u.Oqu(n+1),u.xp6(2),u.Oqu(r.id),u.xp6(2),u.Oqu(r.name),u.xp6(2),u.s9C("href",r.link,u.LSH),u.xp6(1),u.s9C("src",r.logoUrl,u.LSH),u.xp6(2),u.Oqu(r.tier)}}var S=function(){var t=function(){function t(i,r,n,o){e(this,t),this.sponsorService=i,this.uploadService=r,this.formBuilder=n,this.userActionService=o,this.tiers=["Lead","Platinum","Gold","Silver","Bronze","Friend"],this.addSponsorForm=this.formBuilder.group({name:[""],link:[""],logo:[""],tier:[""]}),this.mainButtonText="Add Sponsor",this.actionHistory=[]}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.sponsorService.getSponsors().subscribe(function(t){e.sponsors=t.map(function(e){return Object.assign({id:e.payload.doc.id},e.payload.doc.data())})})}},{key:"setLogo",value:function(e){var t=this;this.logo=e[0];var i=new FileReader;i.onload=function(e){t.previewLogoUrl=e.target.result},i.readAsDataURL(this.logo)}},{key:"resetForm",value:function(){this.addSponsorForm.reset(),this.previewLogoUrl="",this.updateSponsorId="",this.mainButtonText="Add Sponsor"}},{key:"manageSponsor",value:function(){var e=this;if(this.mainButtonText.startsWith("Update")){if(null==this.logo){var t={id:this.updateSponsorId,name:this.addSponsorForm.get("name").value,link:this.addSponsorForm.get("link").value,logoUrl:this.previewLogoUrl,tier:this.addSponsorForm.get("tier").value,logo:null};this.sponsorService.updateSponsor(t)}else{var i=this.updateSponsorId,r=this.addSponsorForm.get("name").value,n=this.addSponsorForm.get("link").value,o=this.addSponsorForm.get("tier").value;this.uploadService.uploadFile(this.logo,"assets/logos/").then(function(t){t.ref.getDownloadURL().then(function(t){e.sponsorService.updateSponsor({id:i,name:r,link:n,logoUrl:t,tier:o,logo:null})})})}this.resetForm()}else{var a=this.addSponsorForm.get("name").value,s=this.addSponsorForm.get("link").value,u=this.addSponsorForm.get("tier").value;this.uploadService.uploadFile(this.logo,"assets/logos/").then(function(t){t.ref.getDownloadURL().then(function(t){e.sponsorService.addSponsor({name:a,link:s,logoUrl:t,tier:u,logo:null})})}),this.resetForm()}}},{key:"deleteSponsor",value:function(e){this.sponsorService.deleteSponsor(e)}},{key:"setupSponsorUpdate",value:function(e){this.updateSponsorId=e.id,this.addSponsorForm.get("name").setValue(e.name),this.addSponsorForm.get("link").setValue(e.link),this.addSponsorForm.get("tier").setValue(e.tier),this.previewLogoUrl=e.logoUrl,this.logo=null,this.mainButtonText="Update Sponsor",document.documentElement.scrollTop=0}},{key:"showActionHistory",value:function(e){var t=this;this.actionHistory=[],this.userActionService.getEntityActions(e.id).then(function(e){e.forEach(function(e){t.actionHistory.push(Object.assign({id:e.id},e.data()))})}),document.documentElement.scrollTop=0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(q.c),u.Y36(T),u.Y36(b.qu),u.Y36(y.X))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-edit-sponsors"]],decls:47,vars:7,consts:[[1,"formContainer"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["type","text","formControlName","link","required","",1,"form-control"],["formControlName","tier",1,"form-control"],[4,"ngFor","ngForOf"],["type","file","formControlName","logo",1,"form-control",3,"change"],[1,"logoPreview",3,"src"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","historyTable",4,"ngIf"],[1,"resultsTable"],[1,"tableHeading"],[1,"table"],["scope","col"],[1,"historyTable"],["scope","row"],["target","_blank",3,"href"],[1,"logoResultsPreview",3,"src"],[1,"btn","btn-danger","actionButton",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"form",1),u.NdJ("ngSubmit",function(){return t.manageSponsor()}),u.TgZ(2,"div",2),u.TgZ(3,"label"),u._uU(4,"Name"),u.qZA(),u._UZ(5,"input",3),u.qZA(),u.TgZ(6,"div",2),u.TgZ(7,"label"),u._uU(8,"Link"),u.qZA(),u._UZ(9,"input",4),u.qZA(),u.TgZ(10,"div",2),u.TgZ(11,"label"),u._uU(12,"Tier"),u.qZA(),u.TgZ(13,"select",5),u.YNc(14,_,2,1,"option",6),u.qZA(),u.qZA(),u.TgZ(15,"div",2),u.TgZ(16,"label"),u._uU(17,"Logo"),u.qZA(),u.TgZ(18,"input",7),u.NdJ("change",function(e){return t.setLogo(e.target.files)}),u.qZA(),u.qZA(),u.TgZ(19,"label"),u._uU(20,"Logo Preview"),u.qZA(),u._UZ(21,"br"),u._UZ(22,"img",8),u.TgZ(23,"div",2),u.TgZ(24,"button",9),u._uU(25),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(26,x,21,1,"div",10),u.TgZ(27,"div",11),u.TgZ(28,"h1",12),u._uU(29,"Sponsors"),u.qZA(),u.TgZ(30,"table",13),u.TgZ(31,"thead"),u.TgZ(32,"tr"),u.TgZ(33,"th",14),u._uU(34,"#"),u.qZA(),u.TgZ(35,"th",14),u._uU(36,"ID"),u.qZA(),u.TgZ(37,"th",14),u._uU(38,"Name"),u.qZA(),u.TgZ(39,"th",14),u._uU(40,"Logo"),u.qZA(),u.TgZ(41,"th",14),u._uU(42,"Tier"),u.qZA(),u.TgZ(43,"th",14),u._uU(44,"Action "),u.qZA(),u.qZA(),u.qZA(),u.TgZ(45,"tbody"),u.YNc(46,F,21,6,"tr",6),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(1),u.Q6J("formGroup",t.addSponsorForm),u.xp6(13),u.Q6J("ngForOf",t.tiers),u.xp6(8),u.s9C("src",t.previewLogoUrl,u.LSH),u.xp6(2),u.Q6J("disabled",!t.addSponsorForm.valid),u.xp6(1),u.Oqu(t.mainButtonText),u.xp6(1),u.Q6J("ngIf",0!==t.actionHistory.length),u.xp6(20),u.Q6J("ngForOf",t.sponsors))},directives:[b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,b.Q7,b.EJ,o.sg,o.O5,b.YN,b.Kr],styles:[".resultsTable[_ngcontent-%COMP%]{max-width:100%}.logoResultsPreview[_ngcontent-%COMP%]{min-width:500px;max-width:500px}.actionButton[_ngcontent-%COMP%]{margin-bottom:1em}.logoPreview[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px;min-width:500px}.formContainer[_ngcontent-%COMP%]{padding:3em}.tableHeading[_ngcontent-%COMP%]{padding-left:.5em}"]}),t}(),O=n(6341);function N(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){var i=t.$implicit;u.xp6(1),u.Oqu(i)}}function k(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){var i=t.$implicit;u.xp6(1),u.Oqu(i)}}function M(e,t){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"th",19),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.TgZ(11,"td"),u._uU(12),u.qZA(),u.qZA()),2&e){var i=t.$implicit,r=t.index;u.xp6(2),u.Oqu(r+1),u.xp6(2),u.Oqu(i.uid),u.xp6(2),u.Oqu(i.uName),u.xp6(2),u.Oqu(i.eName),u.xp6(2),u.Oqu(i.action),u.xp6(2),u.Oqu(i.dateTime)}}function P(e,t){if(1&e&&(u.TgZ(0,"div",17),u.TgZ(1,"h1",18),u._uU(2,"Action History"),u.qZA(),u.TgZ(3,"table",15),u.TgZ(4,"thead"),u.TgZ(5,"tr"),u.TgZ(6,"th",16),u._uU(7,"#"),u.qZA(),u.TgZ(8,"th",16),u._uU(9,"User ID"),u.qZA(),u.TgZ(10,"th",16),u._uU(11,"User"),u.qZA(),u.TgZ(12,"th",16),u._uU(13,"Entity"),u.qZA(),u.TgZ(14,"th",16),u._uU(15,"Action"),u.qZA(),u.TgZ(16,"th",16),u._uU(17,"Date"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(18,"tbody"),u.YNc(19,M,13,6,"tr",5),u.qZA(),u.qZA(),u._UZ(20,"br"),u.qZA()),2&e){var i=u.oxw();u.xp6(19),u.Q6J("ngForOf",i.actionHistory)}}function C(e,t){if(1&e){var i=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"th",19),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._UZ(6,"img",20),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.TgZ(11,"td"),u._uU(12),u.qZA(),u.TgZ(13,"td"),u._uU(14),u.qZA(),u.TgZ(15,"td"),u._uU(16),u.qZA(),u.TgZ(17,"td"),u.TgZ(18,"button",21),u.NdJ("click",function(){var e=u.CHM(i).$implicit;return u.oxw().deleteMember(e)}),u._uU(19,"Delete"),u.qZA(),u._UZ(20,"br"),u.TgZ(21,"button",21),u.NdJ("click",function(){var e=u.CHM(i).$implicit;return u.oxw().setupMemberUpdate(e)}),u._uU(22,"Update"),u.qZA(),u._UZ(23,"br"),u.TgZ(24,"button",21),u.NdJ("click",function(){var e=u.CHM(i).$implicit;return u.oxw().showActionHistory(e)}),u._uU(25,"History"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit,n=t.index;u.xp6(2),u.Oqu(n+1),u.xp6(2),u.Oqu(r.name),u.xp6(2),u.s9C("src",r.imageName,u.LSH),u.xp6(2),u.Oqu(r.position),u.xp6(2),u.Oqu(r.subteam),u.xp6(2),u.Oqu(r.major),u.xp6(2),u.Oqu(r.description),u.xp6(2),u.Oqu(r.year)}}var J=function(){var t=function(){function t(i,r,n,o,a){e(this,t),this.memberService=i,this.formBuilder=r,this.uploadService=n,this.userActionService=o,this.authService=a,this.addMemberForm=this.formBuilder.group({name:[""],position:[""],subteam:[""],major:[""],description:[""],year:[""],image:[""]}),this.mainButtonText="Add Member",this.positions=["Member","Manager","Team Captain","Engineering Team Manager","Business Team Manager"],this.subteams=["Mechanical","Electrical","Software","Business"],this.actionHistory=[]}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.memberService.getMembers().subscribe(function(t){e.members=t.map(function(e){return Object.assign({id:e.payload.doc.id},e.payload.doc.data())})})}},{key:"setImage",value:function(e){var t=this;this.image=e[0];var i=new FileReader;i.onload=function(e){t.previewImgUrl=e.target.result},i.readAsDataURL(this.image)}},{key:"resetForm",value:function(){this.addMemberForm.reset(),this.previewImgUrl="",this.updateMemberId="",this.mainButtonText="Add Member"}},{key:"deleteMember",value:function(e){this.memberService.deleteMember(e)}},{key:"setupMemberUpdate",value:function(e){this.updateMemberId=e.id,this.addMemberForm.get("name").setValue(e.name),this.addMemberForm.get("position").setValue(e.position),this.addMemberForm.get("subteam").setValue(e.subteam),this.addMemberForm.get("major").setValue(e.major),this.addMemberForm.get("description").setValue(e.description),this.addMemberForm.get("year").setValue(e.year),this.previewImgUrl=e.imageName,this.image=null,this.mainButtonText="Update Member",document.documentElement.scrollTop=0}},{key:"manageMember",value:function(){var e=this;if(this.mainButtonText.startsWith("Update")){if(null==this.image){var t={id:this.updateMemberId,name:this.addMemberForm.get("name").value,position:this.addMemberForm.get("position").value,subteam:this.addMemberForm.get("subteam").value,major:this.addMemberForm.get("major").value,description:this.addMemberForm.get("description").value,year:this.addMemberForm.get("year").value,imageName:this.previewImgUrl,image:null};this.memberService.updateMember(t)}else{var i=this.updateMemberId,r=this.addMemberForm.get("name").value,n=this.addMemberForm.get("position").value,o=this.addMemberForm.get("subteam").value,a=this.addMemberForm.get("major").value,s=this.addMemberForm.get("description").value,u=this.addMemberForm.get("year").value;this.uploadService.uploadFile(this.image,"assets/member_images/").then(function(t){t.ref.getDownloadURL().then(function(t){e.memberService.updateMember({id:i,name:r,position:n,imageName:t,subteam:o,major:a,description:s,year:u,image:null})})})}this.resetForm()}else{var l=this.addMemberForm.get("name").value,c=this.addMemberForm.get("position").value,g=this.addMemberForm.get("subteam").value,d=this.addMemberForm.get("major").value,m=this.addMemberForm.get("description").value,p=this.addMemberForm.get("year").value;this.uploadService.uploadFile(this.image,"assets/member_images/").then(function(t){t.ref.getDownloadURL().then(function(t){e.memberService.addMember({name:l,position:c,imageName:t,subteam:g,major:d,description:m,year:p,image:null})})}),this.resetForm()}}},{key:"showActionHistory",value:function(e){var t=this;this.actionHistory=[],this.userActionService.getEntityActions(e.id).then(function(e){e.forEach(function(e){t.actionHistory.push(Object.assign({id:e.id},e.data()))})}),document.documentElement.scrollTop=0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(O.n),u.Y36(b.qu),u.Y36(T),u.Y36(y.X),u.Y36(m))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-edit-team"]],decls:64,vars:8,consts:[[1,"formContainer"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["formControlName","position","required","",1,"form-control"],[4,"ngFor","ngForOf"],["formControlName","subteam","required","",1,"form-control"],["type","text","formControlName","major","required","",1,"form-control"],["type","text","formControlName","description","required","",1,"form-control"],["type","text","formControlName","year","required","",1,"form-control"],["type","file","formControlName","image",1,"form-control",3,"change"],[1,"imagePreview",3,"src"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","historyTable",4,"ngIf"],[1,"resultsTable"],[1,"table"],["scope","col"],[1,"historyTable"],[1,"tableHeading"],["scope","row"],[1,"imageResultsPreview",3,"src"],[1,"btn","btn-danger","actionButton",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"form",1),u.NdJ("ngSubmit",function(){return t.manageMember()}),u.TgZ(2,"div",2),u.TgZ(3,"label"),u._uU(4,"Name"),u.qZA(),u._UZ(5,"input",3),u.qZA(),u.TgZ(6,"div",2),u.TgZ(7,"label"),u._uU(8,"Position"),u.qZA(),u.TgZ(9,"select",4),u.YNc(10,N,2,1,"option",5),u.qZA(),u.qZA(),u.TgZ(11,"div",2),u.TgZ(12,"label"),u._uU(13,"Subteam"),u.qZA(),u.TgZ(14,"select",6),u.YNc(15,k,2,1,"option",5),u.qZA(),u.qZA(),u.TgZ(16,"div",2),u.TgZ(17,"label"),u._uU(18,"Major"),u.qZA(),u._UZ(19,"input",7),u.qZA(),u.TgZ(20,"div",2),u.TgZ(21,"label"),u._uU(22,"Description"),u.qZA(),u._UZ(23,"input",8),u.qZA(),u.TgZ(24,"div",2),u.TgZ(25,"label"),u._uU(26,"Year"),u.qZA(),u._UZ(27,"input",9),u.qZA(),u.TgZ(28,"div",2),u.TgZ(29,"label"),u._uU(30,"Image"),u.qZA(),u.TgZ(31,"input",10),u.NdJ("change",function(e){return t.setImage(e.target.files)}),u.qZA(),u.qZA(),u.TgZ(32,"label"),u._uU(33,"Image Preview"),u.qZA(),u._UZ(34,"br"),u._UZ(35,"img",11),u.TgZ(36,"div",2),u.TgZ(37,"button",12),u._uU(38),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(39,P,21,1,"div",13),u.TgZ(40,"div",14),u.TgZ(41,"table",15),u.TgZ(42,"thead"),u.TgZ(43,"tr"),u.TgZ(44,"th",16),u._uU(45,"#"),u.qZA(),u.TgZ(46,"th",16),u._uU(47,"Name"),u.qZA(),u.TgZ(48,"th",16),u._uU(49,"Image"),u.qZA(),u.TgZ(50,"th",16),u._uU(51,"Position"),u.qZA(),u.TgZ(52,"th",16),u._uU(53,"Subteam"),u.qZA(),u.TgZ(54,"th",16),u._uU(55,"Major"),u.qZA(),u.TgZ(56,"th",16),u._uU(57,"Description"),u.qZA(),u.TgZ(58,"th",16),u._uU(59,"Year"),u.qZA(),u.TgZ(60,"th",16),u._uU(61,"Action "),u.qZA(),u.qZA(),u.qZA(),u.TgZ(62,"tbody"),u.YNc(63,C,26,8,"tr",5),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(1),u.Q6J("formGroup",t.addMemberForm),u.xp6(9),u.Q6J("ngForOf",t.positions),u.xp6(5),u.Q6J("ngForOf",t.subteams),u.xp6(20),u.s9C("src",t.previewImgUrl,u.LSH),u.xp6(2),u.Q6J("disabled",!t.addMemberForm.valid),u.xp6(1),u.Oqu(t.mainButtonText),u.xp6(1),u.Q6J("ngIf",0!==t.actionHistory.length),u.xp6(24),u.Q6J("ngForOf",t.members))},directives:[b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,b.Q7,b.EJ,o.sg,o.O5,b.YN,b.Kr],styles:[".resultsTable[_ngcontent-%COMP%]{max-width:100%}.imageResultsPreview[_ngcontent-%COMP%]{min-width:250px;max-width:250px}.actionButton[_ngcontent-%COMP%]{margin-bottom:1em}.imagePreview[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px;min-width:500px}.formContainer[_ngcontent-%COMP%]{padding:3em}"]}),t}();function I(e,t){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"small",8),u._uU(2," Please enter a valid email "),u.qZA(),u.qZA())}var Y=function(){var t=function(){function t(i,r){e(this,t),this.formBuilder=i,this.authService=r,this.loginForm=this.formBuilder.group({email:["",b.kI.pattern(".+@.+.com")],password:[""]})}return i(t,[{key:"ngOnInit",value:function(){}},{key:"Login",value:function(){this.authService.Login(this.loginForm.get("email").value,this.loginForm.get("password").value)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(b.qu),u.Y36(m))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-login"]],decls:16,vars:3,consts:[[1,"loginFormDiv"],[1,"loginForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/register",1,"error"],["routerLink","/portal/reset-password",1,"error"],[1,"error"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"form",1),u.NdJ("ngSubmit",function(){return t.Login()}),u._UZ(2,"input",2),u.YNc(3,I,3,0,"div",3),u._UZ(4,"input",4),u._UZ(5,"br"),u.TgZ(6,"button",5),u._uU(7,"Login"),u.qZA(),u._UZ(8,"br"),u.TgZ(9,"a",6),u._uU(10,"No account? "),u.TgZ(11,"strong"),u._uU(12,"Create one here"),u.qZA(),u.qZA(),u._UZ(13,"br"),u.TgZ(14,"a",7),u._uU(15,"Forgot Password"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(1),u.Q6J("formGroup",t.loginForm),u.xp6(2),u.Q6J("ngIf",t.loginForm.get("email").invalid&&t.loginForm.get("email").errors&&(t.loginForm.get("email").dirty||t.loginForm.get("email").touched)),u.xp6(3),u.Q6J("disabled",!t.loginForm.valid))},directives:[b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,b.Q7,o.O5,a.yS],styles:[".loginFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.loginForm[_ngcontent-%COMP%], .resetPasswordForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:red}"]}),t}();function L(e,t){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"small",9),u._uU(2," Please enter a valid email "),u.qZA(),u.qZA())}function H(e,t){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"small",9),u._uU(2," Password must have at least 8 characters, uppercase letters, digits, and special characters "),u.qZA(),u.qZA())}function Q(e,t){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"small",9),u._uU(2,"The passwords do not match"),u.qZA(),u.qZA())}function E(e,t){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"small",9),u._uU(2,"Sign up successfull. Please wait to be verified"),u.qZA(),u.qZA())}function B(e,t){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"small",9),u._uU(2,"UofC blocks our registration emails. Please use another email."),u.qZA(),u.qZA())}var D=function(){var t=function(){function t(i,r){e(this,t),this.formBuilder=i,this.authService=r,this.ucalgaryEmailUsed=!1,this.signUpForm=this.formBuilder.group({displayName:[""],email:["",b.kI.pattern(".+@.+.c.+")],password:["",b.kI.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-zd$@$!%*?&].{8,}")],passwordConfirm:[""]})}return i(t,[{key:"ngOnInit",value:function(){}},{key:"SignUp",value:function(){this.signUpForm.get("password").value===this.signUpForm.get("passwordConfirm").value?this.signUpForm.get("email").value.includes("ucalgary.ca")?this.ucalgaryEmailUsed=!0:(this.passwordsDoNotMatch=!1,this.authService.SignUp(this.signUpForm.get("displayName").value,this.signUpForm.get("email").value,this.signUpForm.get("password").value)):this.passwordsDoNotMatch=!0}},{key:"SignUpSuccess",value:function(){var e=JSON.parse(window.sessionStorage.getItem("User"));return null!==e&&!e.verified}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(b.qu),u.Y36(m))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-register"]],decls:19,vars:7,consts:[[1,"signUpFormDiv"],[1,"signUpForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Display Name","formControlName","displayName","required","",1,"form-control"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["type","password","placeholder","Confirm Password","formControlName","passwordConfirm","required","",1,"form-control"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/login",1,"error"],[1,"error"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"form",1),u.NdJ("ngSubmit",function(){return t.SignUp()}),u._UZ(2,"input",2),u._UZ(3,"input",3),u.YNc(4,L,3,0,"div",4),u._UZ(5,"input",5),u.YNc(6,H,3,0,"div",4),u._UZ(7,"input",6),u.YNc(8,Q,3,0,"div",4),u._UZ(9,"br"),u.TgZ(10,"button",7),u._uU(11,"Sign up"),u.qZA(),u._UZ(12,"br"),u.YNc(13,E,3,0,"div",4),u.YNc(14,B,3,0,"div",4),u.TgZ(15,"a",8),u._uU(16,"Have an account? "),u.TgZ(17,"strong"),u._uU(18,"Login here"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(1),u.Q6J("formGroup",t.signUpForm),u.xp6(3),u.Q6J("ngIf",t.signUpForm.get("email").invalid&&t.signUpForm.get("email").errors&&(t.signUpForm.get("email").dirty||t.signUpForm.get("email").touched)),u.xp6(2),u.Q6J("ngIf",t.signUpForm.get("password").invalid&&t.signUpForm.get("password").errors&&(t.signUpForm.get("password").dirty||t.signUpForm.get("password").touched)),u.xp6(2),u.Q6J("ngIf",t.passwordsDoNotMatch),u.xp6(2),u.Q6J("disabled",!t.signUpForm.valid),u.xp6(3),u.Q6J("ngIf",t.SignUpSuccess()),u.xp6(1),u.Q6J("ngIf",t.ucalgaryEmailUsed))},directives:[b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,b.Q7,o.O5,a.yS],styles:[".signUpFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.signUpForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:red}"]}),t}(),j=function(){var t=function(){function t(i,r){e(this,t),this.authService=i,this.router=r}return i(t,[{key:"canActivate",value:function(e,t){return"User"in window.sessionStorage?JSON.parse(window.sessionStorage.getItem("User")).verified:(this.router.navigateByUrl("portal/login"),!1)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.LFG(m),u.LFG(a.F0))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();function $(e,t){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"th",5),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.qZA()),2&e){var i=t.$implicit,r=t.index;u.xp6(2),u.Oqu(r+1),u.xp6(2),u.Oqu(i.eName),u.xp6(2),u.Oqu(i.eid),u.xp6(2),u.Oqu(i.action),u.xp6(2),u.Oqu(i.dateTime)}}function G(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"h1",1),u._uU(2,"Action History"),u.qZA(),u.TgZ(3,"table",2),u.TgZ(4,"thead"),u.TgZ(5,"tr"),u.TgZ(6,"th",3),u._uU(7,"#"),u.qZA(),u.TgZ(8,"th",3),u._uU(9,"Entity"),u.qZA(),u.TgZ(10,"th",3),u._uU(11,"Entity ID"),u.qZA(),u.TgZ(12,"th",3),u._uU(13,"Action"),u.qZA(),u.TgZ(14,"th",3),u._uU(15,"Date"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"tbody"),u.YNc(17,$,11,5,"tr",4),u.qZA(),u.qZA(),u._UZ(18,"br"),u.qZA()),2&e){var i=u.oxw();u.xp6(17),u.Q6J("ngForOf",i.userActionHistory)}}function R(e,t){if(1&e){var i=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"input",7),u.NdJ("change",function(e){var t=u.CHM(i).$implicit,r=u.oxw().$implicit;return u.oxw().updateUserPrivileges(r.id,t,e)}),u.qZA(),u._uU(2),u.qZA()}if(2&e){var r=t.$implicit,n=u.oxw().$implicit,o=u.oxw();u.xp6(1),u.s9C("value",r),u.Q6J("checked",o.userHasPrivilege(n.id,r)),u.xp6(1),u.hij(" ",r," ")}}function V(e,t){if(1&e){var i=u.EpF();u.TgZ(0,"td"),u.TgZ(1,"button",6),u.NdJ("click",function(){u.CHM(i);var e=u.oxw().$implicit;return u.oxw().verifyUser(e.id)}),u._uU(2,"Verify"),u.qZA(),u.qZA()}}function X(e,t){if(1&e){var i=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"th",5),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u.YNc(10,R,3,3,"div",4),u.qZA(),u.YNc(11,V,3,0,"td",0),u.TgZ(12,"td"),u.TgZ(13,"button",6),u.NdJ("click",function(){var e=u.CHM(i).$implicit;return u.oxw().getUserActions(e.id)}),u._uU(14,"History"),u.qZA(),u.qZA(),u.TgZ(15,"td"),u.TgZ(16,"button",6),u.NdJ("click",function(){var e=u.CHM(i).$implicit;return u.oxw().deleteUser(e.id)}),u._uU(17,"Delete"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit,n=t.index,o=u.oxw();u.xp6(2),u.Oqu(n+1),u.xp6(2),u.Oqu(r.email),u.xp6(2),u.Oqu(r.displayName),u.xp6(2),u.Oqu(r.verified),u.xp6(2),u.Q6J("ngForOf",o.privileges),u.xp6(1),u.Q6J("ngIf",!r.verified)}}var z=function(){var t=function(){function t(i,r,n){e(this,t),this.userActionService=i,this.userService=r,this.authService=n,this.privileges=Object.keys(l).map(function(e){return l[e]}),this.userActionHistory=[],this.userPrivileges=new Map}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.authService.isAdmin()&&this.userService.getUsers().subscribe(function(t){e.users=t.map(function(t){var i=Object.assign({id:t.payload.doc.id},t.payload.doc.data());return e.userPrivileges.set(i.id,i.userPrivileges),i})})}},{key:"getUserActions",value:function(e){var t=this;this.userActionHistory=[],this.userActionService.getUserActions(e).then(function(e){e.forEach(function(e){t.userActionHistory.push(Object.assign({id:e.id},e.data()));var i=t.userActionHistory.pop();t.userService.getUser(i.uid).subscribe(function(e){var r=e.data();i.uid=r.displayName,t.userActionHistory.push(i)})})})}},{key:"getPrivilegeString",value:function(e){if(1===e.length)return e[0];var t="";return e.forEach(function(e){t+=e+", "}),t}},{key:"verifyUser",value:function(e){this.userService.verifyUser(e)}},{key:"updateUserPrivileges",value:function(e,t,i){i.target.checked?this.userService.addUserPrivilege(e,t):this.userService.removeUserPrivilege(e,t)}},{key:"deleteUser",value:function(e){this.userService.deleteUser(e)}},{key:"userHasPrivilege",value:function(e,t){return this.userPrivileges.get(e).includes(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(y.X),u.Y36(d),u.Y36(m))},t.\u0275cmp=u.Xpm({type:t,selectors:[["admin-panel"]],decls:20,vars:2,consts:[[4,"ngIf"],[1,"tableHeading"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-danger",3,"click"],["name","i","type","checkbox",3,"value","checked","change"]],template:function(e,t){1&e&&(u.YNc(0,G,19,1,"div",0),u.TgZ(1,"h1",1),u._uU(2,"Users"),u.qZA(),u.TgZ(3,"table",2),u.TgZ(4,"thead"),u.TgZ(5,"tr"),u.TgZ(6,"th",3),u._uU(7,"#"),u.qZA(),u.TgZ(8,"th",3),u._uU(9,"Email"),u.qZA(),u.TgZ(10,"th",3),u._uU(11,"Display Name"),u.qZA(),u.TgZ(12,"th",3),u._uU(13,"Verified"),u.qZA(),u.TgZ(14,"th",3),u._uU(15,"Privileges"),u.qZA(),u.TgZ(16,"th",3),u._uU(17,"Action"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(18,"tbody"),u.YNc(19,X,18,6,"tr",4),u.qZA(),u.qZA()),2&e&&(u.Q6J("ngIf",0!==t.userActionHistory.length),u.xp6(19),u.Q6J("ngForOf",t.users))},directives:[o.O5,o.sg],styles:[".tableHeading[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em}"]}),t}();function W(e,t){1&e&&(u.TgZ(0,"div",4),u.TgZ(1,"button",10),u._uU(2,"Update"),u.qZA(),u.qZA())}function K(e,t){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"th",14),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.qZA()),2&e){var i=t.$implicit,r=t.index;u.xp6(2),u.Oqu(r+1),u.xp6(2),u.Oqu(i.eName),u.xp6(2),u.Oqu(i.eid),u.xp6(2),u.Oqu(i.action),u.xp6(2),u.Oqu(i.dateTime)}}function ee(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"h1",1),u._uU(2,"Your Action History"),u.qZA(),u.TgZ(3,"table",11),u.TgZ(4,"thead"),u.TgZ(5,"tr"),u.TgZ(6,"th",12),u._uU(7,"#"),u.qZA(),u.TgZ(8,"th",12),u._uU(9,"Entity"),u.qZA(),u.TgZ(10,"th",12),u._uU(11,"Entity ID"),u.qZA(),u.TgZ(12,"th",12),u._uU(13,"Action"),u.qZA(),u.TgZ(14,"th",12),u._uU(15,"Date"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"tbody"),u.YNc(17,K,11,5,"tr",13),u.qZA(),u.qZA(),u.qZA()),2&e){var i=u.oxw();u.xp6(17),u.Q6J("ngForOf",i.userActions)}}function te(e,t){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"th",14),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.qZA()),2&e){var i=t.$implicit,r=t.index;u.xp6(2),u.Oqu(r+1),u.xp6(2),u.Oqu(i.eName),u.xp6(2),u.Oqu(i.eid),u.xp6(2),u.Oqu(i.action),u.xp6(2),u.Oqu(i.dateTime)}}function ie(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"h1",1),u._uU(2,"Your Action History"),u.qZA(),u.TgZ(3,"table",11),u.TgZ(4,"thead"),u.TgZ(5,"tr"),u.TgZ(6,"th",12),u._uU(7,"#"),u.qZA(),u.TgZ(8,"th",12),u._uU(9,"Entity"),u.qZA(),u.TgZ(10,"th",12),u._uU(11,"Entity ID"),u.qZA(),u.TgZ(12,"th",12),u._uU(13,"Action"),u.qZA(),u.TgZ(14,"th",12),u._uU(15,"Date"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"tbody"),u.YNc(17,te,11,5,"tr",13),u.qZA(),u.qZA(),u.qZA()),2&e){var i=u.oxw();u.xp6(17),u.Q6J("ngForOf",i.userActions)}}function re(e,t){1&e&&(u.TgZ(0,"div"),u._UZ(1,"admin-panel"),u.qZA())}var ne=function(){var t=function(){function t(i,r,n,o){e(this,t),this.authService=i,this.userService=r,this.userActionService=n,this.formBuilder=o,this.userForm=this.formBuilder.group({displayName:"",email:"",password:""}),this.userActions=[],this.user=JSON.parse(window.sessionStorage.getItem("User"))}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.userActionService.getUserActions(this.user.id).then(function(t){t.forEach(function(t){e.userActions.push(Object.assign({id:t.id},t.data()))})}),this.userForm.get("displayName").setValue(this.user.displayName),this.userForm.get("email").setValue(this.user.email)}},{key:"getAuth",value:function(){return this.authService}},{key:"getUser",value:function(){return JSON.parse(window.sessionStorage.getItem("User"))}},{key:"manageUser",value:function(){var e=JSON.parse(window.sessionStorage.getItem("User"));this.userForm.get("displayName").value!==e.displayName&&(e.displayName=this.userForm.get("displayName").value,this.userService.updateUser(e)),this.userForm.get("email").value!==e.email&&this.authService.ChangeEmail(this.userForm.get("email").value),""!==this.userForm.get("password").value&&this.authService.ChangePassword(this.userForm.get("password").value)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(m),u.Y36(d),u.Y36(y.X),u.Y36(b.qu))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-user-profile"]],decls:22,vars:7,consts:[[1,"profileContainer"],[1,"tableHeading"],[1,"userForm"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","displayName","required","",1,"form-control",3,"placeholder"],["type","text","formControlName","email","required","",1,"form-control",3,"placeholder"],["type","password","formControlName","password","required","",1,"form-control"],["class","mb-3",4,"ngIf"],[4,"ngIf"],["type","submit",1,"btn","btn-danger"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div"),u.TgZ(2,"h1",1),u._uU(3,"Profile"),u.qZA(),u.TgZ(4,"div",2),u.TgZ(5,"form",3),u.NdJ("ngSubmit",function(){return t.manageUser()}),u.TgZ(6,"div",4),u.TgZ(7,"label"),u._uU(8,"Display Name"),u.qZA(),u._UZ(9,"input",5),u.qZA(),u.TgZ(10,"div",4),u.TgZ(11,"label"),u._uU(12,"Email"),u.qZA(),u._UZ(13,"input",6),u.qZA(),u.TgZ(14,"div",4),u.TgZ(15,"label"),u._uU(16,"Password"),u.qZA(),u._UZ(17,"input",7),u.qZA(),u.YNc(18,W,3,0,"div",8),u.qZA(),u.qZA(),u.YNc(19,ee,18,1,"div",9),u.qZA(),u.YNc(20,ie,18,1,"div",9),u.YNc(21,re,2,0,"div",9),u.qZA()),2&e&&(u.xp6(5),u.Q6J("formGroup",t.userForm),u.xp6(4),u.s9C("placeholder",t.getUser().displayName),u.xp6(4),u.s9C("placeholder",t.getUser().email),u.xp6(5),u.Q6J("ngIf",t.userForm.get("displayName").dirty||t.userForm.get("email").dirty||t.userForm.get("password").dirty),u.xp6(1),u.Q6J("ngIf",t.getAuth().isAdmin()),u.xp6(1),u.Q6J("ngIf",!t.getAuth().isAdmin()),u.xp6(1),u.Q6J("ngIf",t.getAuth().isAdmin()))},directives:[b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,b.Q7,o.O5,o.sg,z],styles:[".profileContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%}.tableHeading[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em}.userForm[_ngcontent-%COMP%]{max-width:80%;padding-left:1em}"]}),t}();function oe(e,t){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"small",6),u._uU(2," Please enter a valid email "),u.qZA(),u.qZA())}var ae,se,ue=[{path:"",component:v,children:[{path:"manage-news",component:A,canActivate:[j]},{path:"manage-sponsors",component:S,canActivate:[j]},{path:"manage-team",component:J,canActivate:[j]},{path:"login",component:Y},{path:"register",component:D},{path:"reset-password",component:(ae=function(){function t(i,r){e(this,t),this.authService=i,this.formBuilder=r,this.resetForm=this.formBuilder.group({email:["",b.kI.pattern(".+@.+.com")]})}return i(t,[{key:"ngOnInit",value:function(){}},{key:"resetPasswordSubmit",value:function(){this.authService.ResetPassword(this.resetForm.get("email").value)}}]),t}(),ae.\u0275fac=function(e){return new(e||ae)(u.Y36(m),u.Y36(b.qu))},ae.\u0275cmp=u.Xpm({type:ae,selectors:[["app-reset-password"]],decls:10,vars:3,consts:[[1,"resetFormDiv"],[1,"resetPasswordForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/login",1,"backToLogin"],[1,"error"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"form",1),u.NdJ("ngSubmit",function(){return t.resetPasswordSubmit()}),u._UZ(2,"input",2),u.YNc(3,oe,3,0,"div",3),u._UZ(4,"br"),u.TgZ(5,"button",4),u._uU(6,"Reset Password"),u.qZA(),u._UZ(7,"br"),u.TgZ(8,"a",5),u._uU(9,"Back to Login"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(1),u.Q6J("formGroup",t.resetForm),u.xp6(2),u.Q6J("ngIf",t.resetForm.get("email").invalid&&t.resetForm.get("email").errors&&(t.resetForm.get("email").dirty||t.resetForm.get("email").touched)),u.xp6(2),u.Q6J("disabled",!t.resetForm.valid))},directives:[b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,b.Q7,o.O5,a.yS],styles:[".resetFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.resetPasswordForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.backToLogin[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{color:red}"]}),ae)},{path:"user",component:ne,canActivate:[j]},{path:"**",redirectTo:"user",pathMatch:"full"}]}],le=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[a.Bz.forChild(ue)],a.Bz]}),t}(),ce=((se=function t(){e(this,t)}).\u0275fac=function(e){return new(e||se)},se.\u0275mod=u.oAB({type:se,bootstrap:[v]}),se.\u0275inj=u.cJS({providers:[],imports:[[o.ez,le,b.UX]]}),se)}}])}();