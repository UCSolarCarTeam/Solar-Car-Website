(self.webpackChunkSolar_Car_Website=self.webpackChunkSolar_Car_Website||[]).push([[444],{9444:(W,G,h)=>{"use strict";h.r(G),h.d(G,{PortalModule:()=>en});var I=h(6895),Q=h(7881),V=h(529),u=h(433),_=h(9379),A=h(5861),e=h(4650),k=(()=>{return(r=k||(k={})).ADMIN="Admin",r.BUSINESS="Business",r.ENGINEERING="Engineering",r.NONE="None",k;var r})(),F=h(3385),N=h(1762);let U=(()=>{class r{constructor(t){this.firestore=t}addUser(t){return this.firestore.collection("users-collection").doc(t.id).set(t)}getUser(t){return this.firestore.collection("users-collection").doc(t).get()}getUsers(){return this.firestore.collection("users-collection").snapshotChanges()}updateUser(t){return this.firestore.collection("users-collection").doc(t.id).update({email:t.email,verified:t.verified,displayName:t.displayName,userPrivileges:t.userPrivileges,userActions:t.userActions})}deleteUser(t){this.firestore.collection("users-collection").doc(t).delete()}verifyUser(t){return this.firestore.collection("users-collection").doc(t).update({verified:!0,userPrivileges:[k.NONE]})}addUserPrivilege(t,n){this.firestore.collection("users-collection").doc(t).get().subscribe(i=>{const o=i.data();o.userPrivileges.push(n),this.updateUser(o)})}removeUserPrivilege(t,n){this.firestore.collection("users-collection").doc(t).get().subscribe(i=>{const o=i.data();o.userPrivileges=o.userPrivileges.filter(a=>a!==n),this.updateUser(o)})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(N.ST))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),L=(()=>{class r{constructor(t,n,i){this.auth=t,this.router=n,this.userService=i}Login(t,n){return this.auth.signInWithEmailAndPassword(t,n).then(i=>{i.user.emailVerified||(window.alert("Please verify your email address before logging in."),this.auth.signOut()),this.userService.getUser(i.user.uid).subscribe(o=>{const a=o.data();a.verified||(window.alert("Please ask your manager to verify you before logging in."),this.auth.signOut()),window.sessionStorage.setItem("User",JSON.stringify(a)),this.router.navigateByUrl("portal/user")})}).catch(i=>{throw i})}SignUp(t,n,i){return this.auth.createUserWithEmailAndPassword(n,i).then(o=>{const a={id:o.user.uid,displayName:t,email:n,verified:!1,userPrivileges:[k.NONE],userActions:[]};this.auth.currentUser.then(c=>{c.sendEmailVerification()}),this.userService.addUser(a),alert("Succesfully signed up. Please confirm your email and ask your manager to approve your account."),this.router.navigateByUrl("portal/login")}).catch(o=>{throw o})}LogOut(){this.auth.signOut().then(()=>{this.router.navigateByUrl("portal/login"),window.sessionStorage.removeItem("User")})}ChangeEmail(t){return this.auth.currentUser.then(n=>{n.updateEmail(t).then(()=>{const i=JSON.parse(window.sessionStorage.getItem("User"));i.email=t,this.userService.updateUser(i)}).catch(i=>{throw i})})}ResetPassword(t){return this.auth.sendPasswordResetEmail(t).catch(n=>{throw n})}ChangePassword(t){return this.auth.currentUser.then(n=>n.updatePassword(t)).catch(n=>{throw n})}isAdmin(){const t=JSON.parse(window.sessionStorage.getItem("User"));return t&&t.userPrivileges.includes(k.ADMIN)}hasBusinessPrivileges(){const t=JSON.parse(window.sessionStorage.getItem("User"));return t&&(t.userPrivileges.includes(k.ADMIN)||t.userPrivileges.includes(k.BUSINESS))}hasEngineeringPrivileges(){const t=JSON.parse(window.sessionStorage.getItem("User"));return t&&(t.userPrivileges.includes(k.ADMIN)||t.userPrivileges.includes(k.ENGINEERING))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(F.zQ),e.LFG(_.F0),e.LFG(U))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function B(r,s){if(1&r&&(e.TgZ(0,"div")(1,"li",12)(2,"a",13),e._uU(3),e.qZA()()()),2&r){const t=s.$implicit;e.xp6(2),e.s9C("routerLink",t.link),e.xp6(1),e.Oqu(t.label)}}function H(r,s){if(1&r&&(e.ynx(0),e.YNc(1,B,4,2,"div",11),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.businessRouteLinks)}}function z(r,s){if(1&r&&(e.TgZ(0,"div")(1,"li",12)(2,"a",13),e._uU(3),e.qZA()()()),2&r){const t=s.$implicit;e.xp6(2),e.s9C("routerLink",t.link),e.xp6(1),e.Oqu(t.label)}}function p(r,s){if(1&r&&(e.ynx(0),e.YNc(1,z,4,2,"div",11),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.engineeringRouteLinks)}}function d(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6)(2,"div",7),e.YNc(3,H,2,1,"ng-container",5),e.YNc(4,p,2,1,"ng-container",5),e.TgZ(5,"div")(6,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.getAuth().LogOut())}),e._uU(7,"Log Out"),e.qZA()(),e.TgZ(8,"a",9),e._UZ(9,"img",10),e.qZA()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.getAuth().hasBusinessPrivileges()),e.xp6(1),e.Q6J("ngIf",t.getAuth().hasEngineeringPrivileges())}}let v=(()=>{class r{constructor(t){this.auth=t,this.businessRouteLinks=[{label:"Team",link:"manage-team"},{label:"Sponsors",link:"manage-sponsors"},{label:"News",link:"manage-news"}],this.engineeringRouteLinks=[{label:"Inventory",link:"manage-inventory"}]}LoggedIn(){const t=JSON.parse(window.sessionStorage.getItem("User"));return null!==t&&t.verified}getAuth(){return this.auth}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(L))},r.\u0275cmp=e.Xpm({type:r,selectors:[["portal-header"]],decls:8,vars:1,consts:[[1,"sticky-top"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-danger"],["href","./portal",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNavAltMarkup","aria-controls","navbarNavAltMarkup","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[4,"ngIf"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse"],[1,"navbar-nav","ml-auto"],[1,"nav-link","user-btn",3,"click"],["routerLink","user",1,"nav-link"],["src","../../../assets/portal/user-icon.png",1,"user-icon"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"a",2)(3,"h3"),e._uU(4," SolarCar Portal "),e.qZA()(),e.TgZ(5,"button",3),e._UZ(6,"span",4),e.qZA(),e.YNc(7,d,10,2,"ng-container",5),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngIf",n.LoggedIn()))},dependencies:[I.sg,I.O5,_.yS],styles:["img[_ngcontent-%COMP%]{height:auto;max-width:348px;max-height:58px}.navbar[_ngcontent-%COMP%]{font-size:120%;padding:20px 30px}.sticky-top[_ngcontent-%COMP%]{position:sticky}.user-btn[_ngcontent-%COMP%]{background:none;border:none}.user-icon[_ngcontent-%COMP%]{max-width:40px}"]}),r})(),f=(()=>{class r{constructor(t){this.authService=t}ngOnDestroy(){var t=this;return(0,A.Z)(function*(){yield t.authService.LogOut()})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(L))},r.\u0275cmp=e.Xpm({type:r,selectors:[["portal-root"]],decls:2,vars:0,template:function(t,n){1&t&&e._UZ(0,"portal-header")(1,"router-outlet")},dependencies:[_.lC,v]}),r})();var w=h(4847),T=h.n(w),O=h(7523),S=h(3851);let D=(()=>{class r{constructor(t,n){this.firestore=t,this.userActionService=n}addInventoryItem(t){const n=JSON.parse(window.sessionStorage.getItem("User"));return new Promise((i,o)=>{this.firestore.collection("inventory-collection").add(t).then(a=>{this.userActionService.addUserAction({uid:n.id,uName:n.displayName,eid:a.id,eName:"Item: "+t.name,action:O.a.ADDED,dateTime:(new Date).toLocaleString()}),i(a)},a=>o(a))})}getInventoryItems(){return this.firestore.collection("inventory-collection").snapshotChanges()}updateInventoryItem(t){const n=JSON.parse(window.sessionStorage.getItem("User")),i=this.firestore.collection("inventory-collection").doc(t.id);return this.userActionService.addUserAction({uid:n.id,uName:n.displayName,eid:t.id,eName:"Item: "+t.name,action:O.a.UPDATED,dateTime:(new Date).toLocaleString()}),i.update({name:t.name,type:t.type,internalPartNumber:t.internalPartNumber,manufacturerPartNumber:t.manufacturerPartNumber,location:t.location,amount:t.amount,isBorrowable:t.isBorrowable,imageUrl:t.imageUrl,image:t.image}).catch(o=>{throw o})}borrowItem(t){const n=JSON.parse(window.sessionStorage.getItem("User")),i=this.firestore.collection("inventory-collection").doc(t.id);return this.userActionService.addUserAction({uid:n.id,uName:n.displayName,eid:t.id,eName:"Item: "+t.name,action:O.a.BORROWED,dateTime:(new Date).toLocaleString()}),i.update({isBorrowed:!0,borrowedByUser:n.id}).catch(o=>{throw o})}returnItem(t){const n=JSON.parse(window.sessionStorage.getItem("User")),i=this.firestore.collection("inventory-collection").doc(t.id);return this.userActionService.addUserAction({uid:n.id,uName:n.displayName,eid:t.id,eName:"Item: "+t.name,action:O.a.RETURNED,dateTime:(new Date).toLocaleString()}),i.update({isBorrowed:!1,borrowedByUser:""}).catch(o=>{throw o})}useItem(t){const n=JSON.parse(window.sessionStorage.getItem("User")),i=this.firestore.collection("inventory-collection").doc(t.id);return this.userActionService.addUserAction({uid:n.id,uName:n.displayName,eid:t.id,eName:"Item: "+t.name,action:O.a.USED,dateTime:(new Date).toLocaleString()}),t.amount=t.amount-1,i.update({amount:t.amount}).catch(o=>{throw o})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(N.ST),e.LFG(S.X))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var $=h(8445);let ee=(()=>{class r{constructor(t){this.storage=t}uploadFile(t,n){const i=n+t.name;return this.storage.storage.ref().child(i).put(t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG($.Q1))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var ae=h(1481);const se=["wrapper"],ie=["sourceImage"];function re(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.imageLoadedInView())})("mousedown",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.startMove(i,o.moveTypes.Drag))})("touchstart",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.startMove(i,o.moveTypes.Drag))})("error",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.loadImageError(i))}),e.qZA()}if(2&r){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",t.safeImgDataUrl,e.LSH),e.uIk("alt",t.imageAltText)}}function te(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"topleft"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"topleft"))}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"topright"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"topright"))}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottomright"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottomright"))}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottomleft"))}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"top"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"top"))}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"right"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"right"))}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottom"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottom"))}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"left"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"left"))}),e.qZA(),e.BQk()}}function g(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.keyboardAccess(i))}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.startMove(i,o.moveTypes.Move))})("touchstart",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.startMove(i,o.moveTypes.Move))}),e.qZA(),e.YNc(2,te,21,0,"ng-container",8),e.qZA()}if(2&r){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",t.roundCropper),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}class m{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t]),this.validateOptions()}setOptionsFromChanges(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var b=(()=>{return(r=b||(b={})).Drag="drag",r.Move="move",r.Resize="resize",r.Pinch="pinch",b;var r})();function y(r,s){return r/100*s}let C=(()=>{class r{crop(t,n,i,o){const a=this.getImagePosition(t,n,i,o),c=a.x2-a.x1,Z=a.y2-a.y1,E=document.createElement("canvas");E.width=c,E.height=Z;const q=E.getContext("2d");if(!q)return null;null!=o.backgroundColor&&(q.fillStyle=o.backgroundColor,q.fillRect(0,0,c,Z));const R=(o.transform.scale||1)*(o.transform.flipH?-1:1),j=(o.transform.scale||1)*(o.transform.flipV?-1:1),{translateH:Y,translateV:ne}=this.getCanvasTranslate(t,n,o),X=n.transformed;q.setTransform(R,0,0,j,X.size.width/2+Y,X.size.height/2+ne),q.translate(-a.x1/R,-a.y1/j),q.rotate((o.transform.rotate||0)*Math.PI/180),q.drawImage(X.image,-X.size.width/2,-X.size.height/2);const K={width:c,height:Z,imagePosition:a,cropperPosition:{...i}};o.containWithinAspectRatio&&(K.offsetImagePosition=this.getOffsetImagePosition(t,n,i,o));const ce=this.getResizeRatio(c,Z,o);return 1!==ce&&(K.width=Math.round(c*ce),K.height=o.maintainAspectRatio?Math.round(K.width/o.aspectRatio):Math.round(Z*ce),function M(r,s,t){const n=r.width,i=r.height,o=n/(s=Math.round(s)),a=i/(t=Math.round(t)),c=Math.ceil(o/2),Z=Math.ceil(a/2),E=r.getContext("2d");if(E){const q=E.getImageData(0,0,n,i),R=E.createImageData(s,t),j=q.data,Y=R.data;for(let ne=0;ne<t;ne++)for(let X=0;X<s;X++){const K=4*(X+ne*s),ce=ne*a;let oe=0,ge=0,we=0,Fe=0,Ne=0,ke=0,Ee=0;const tn=Math.floor(X*o),nn=Math.floor(ne*a);let Se=Math.ceil((X+1)*o),Me=Math.ceil((ne+1)*a);Se=Math.min(Se,n),Me=Math.min(Me,i);for(let xe=nn;xe<Me;xe++){const qe=Math.abs(ce-xe)/Z,rn=X*o,on=qe*qe;for(let Ae=tn;Ae<Se;Ae++){const Oe=Math.abs(rn-Ae)/c,he=Math.sqrt(on+Oe*Oe);if(he>=1)continue;oe=2*he*he*he-3*he*he+1;const fe=4*(Ae+xe*n);Ee+=oe*j[fe+3],we+=oe,j[fe+3]<255&&(oe=oe*j[fe+3]/250),Fe+=oe*j[fe],Ne+=oe*j[fe+1],ke+=oe*j[fe+2],ge+=oe}}Y[K]=Fe/ge,Y[K+1]=Ne/ge,Y[K+2]=ke/ge,Y[K+3]=Ee/we}r.width=s,r.height=t,E.putImageData(R,0,0)}}(E,K.width,K.height)),K.base64=E.toDataURL("image/"+o.format,this.getQuality(o)),K}getCanvasTranslate(t,n,i){if("px"===i.transform.translateUnit){const o=this.getRatio(t,n);return{translateH:(i.transform.translateH||0)*o,translateV:(i.transform.translateV||0)*o}}return{translateH:i.transform.translateH?y(i.transform.translateH,n.transformed.size.width):0,translateV:i.transform.translateV?y(i.transform.translateV,n.transformed.size.height):0}}getRatio(t,n){return n.transformed.size.width/t.nativeElement.offsetWidth}getImagePosition(t,n,i,o){const a=this.getRatio(t,n),c={x1:Math.round(i.x1*a),y1:Math.round(i.y1*a),x2:Math.round(i.x2*a),y2:Math.round(i.y2*a)};return o.containWithinAspectRatio||(c.x1=Math.max(c.x1,0),c.y1=Math.max(c.y1,0),c.x2=Math.min(c.x2,n.transformed.size.width),c.y2=Math.min(c.y2,n.transformed.size.height)),c}getOffsetImagePosition(t,n,i,o){const Z=n.transformed.size.width/t.nativeElement.offsetWidth;let E,q;(o.canvasRotation+n.exifTransform.rotate)%2?(E=(n.transformed.size.width-n.original.size.height)/2,q=(n.transformed.size.height-n.original.size.width)/2):(E=(n.transformed.size.width-n.original.size.width)/2,q=(n.transformed.size.height-n.original.size.height)/2);const R={x1:Math.round(i.x1*Z)-E,y1:Math.round(i.y1*Z)-q,x2:Math.round(i.x2*Z)-E,y2:Math.round(i.y2*Z)-q};return o.containWithinAspectRatio||(R.x1=Math.max(R.x1,0),R.y1=Math.max(R.y1,0),R.x2=Math.min(R.x2,n.transformed.size.width),R.y2=Math.min(R.y2,n.transformed.size.height)),R}getResizeRatio(t,n,i){const o=i.resizeToWidth/t,a=i.resizeToHeight/n,c=new Array;i.resizeToWidth>0&&c.push(o),i.resizeToHeight>0&&c.push(a);const Z=0===c.length?1:Math.min(...c);return Z>1&&!i.onlyScaleDown?Z:Math.min(Z,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),J=(()=>{class r{resetCropperPosition(t,n,i){if(null==t||!t.nativeElement)return;const o=t.nativeElement;if(i.cropperStaticHeight&&i.cropperStaticWidth)n.x1=0,n.x2=o.offsetWidth>i.cropperStaticWidth?i.cropperStaticWidth:o.offsetWidth,n.y1=0,n.y2=o.offsetHeight>i.cropperStaticHeight?i.cropperStaticHeight:o.offsetHeight;else{const a=Math.min(i.cropperScaledMaxWidth,o.offsetWidth),c=Math.min(i.cropperScaledMaxHeight,o.offsetHeight);if(i.maintainAspectRatio)if(o.offsetWidth/i.aspectRatio<o.offsetHeight){n.x1=0,n.x2=a;const Z=a/i.aspectRatio;n.y1=(o.offsetHeight-Z)/2,n.y2=n.y1+Z}else{n.y1=0,n.y2=c;const Z=c*i.aspectRatio;n.x1=(o.offsetWidth-Z)/2,n.x2=n.x1+Z}else n.x1=0,n.x2=a,n.y1=0,n.y2=c}}move(t,n,i){const o=this.getClientX(t)-n.clientX,a=this.getClientY(t)-n.clientY;i.x1=n.x1+o,i.y1=n.y1+a,i.x2=n.x2+o,i.y2=n.y2+a}resize(t,n,i,o,a){const c=this.getClientX(t)-n.clientX,Z=this.getClientY(t)-n.clientY;switch(n.position){case"left":i.x1=Math.min(Math.max(n.x1+c,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(n.x1+c,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y1=Math.min(Math.max(n.y1+Z,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(n.y1+Z,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(n.x2+c,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y1=Math.min(Math.max(n.y1+Z,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(n.x2+c,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(n.x2+c,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y2=Math.max(Math.min(n.y2+Z,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(n.y2+Z,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(n.x1+c,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y2=Math.max(Math.min(n.y2+Z,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"center":const E=t.scale,q=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(n.x2-n.x1)*E),a.cropperScaledMaxWidth),R=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(n.y2-n.y1)*E),a.cropperScaledMaxHeight);i.x1=n.clientX-q/2,i.x2=n.clientX+q/2,i.y1=n.clientY-R/2,i.y2=n.clientY+R/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>o.width&&(i.x1-=i.x2-o.width,i.x2=o.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>o.height&&(i.y1-=i.y2-o.height,i.y2=o.height)}a.maintainAspectRatio&&this.checkAspectRatio(n.position,i,o,a)}checkAspectRatio(t,n,i,o){let a=0,c=0;switch(t){case"top":n.x2=n.x1+(n.y2-n.y1)*o.aspectRatio,a=Math.max(n.x2-i.width,0),c=Math.max(0-n.y1,0),(a>0||c>0)&&(n.x2-=c*o.aspectRatio>a?c*o.aspectRatio:a,n.y1+=c*o.aspectRatio>a?c:a/o.aspectRatio);break;case"bottom":n.x2=n.x1+(n.y2-n.y1)*o.aspectRatio,a=Math.max(n.x2-i.width,0),c=Math.max(n.y2-i.height,0),(a>0||c>0)&&(n.x2-=c*o.aspectRatio>a?c*o.aspectRatio:a,n.y2-=c*o.aspectRatio>a?c:a/o.aspectRatio);break;case"topleft":n.y1=n.y2-(n.x2-n.x1)/o.aspectRatio,a=Math.max(0-n.x1,0),c=Math.max(0-n.y1,0),(a>0||c>0)&&(n.x1+=c*o.aspectRatio>a?c*o.aspectRatio:a,n.y1+=c*o.aspectRatio>a?c:a/o.aspectRatio);break;case"topright":n.y1=n.y2-(n.x2-n.x1)/o.aspectRatio,a=Math.max(n.x2-i.width,0),c=Math.max(0-n.y1,0),(a>0||c>0)&&(n.x2-=c*o.aspectRatio>a?c*o.aspectRatio:a,n.y1+=c*o.aspectRatio>a?c:a/o.aspectRatio);break;case"right":case"bottomright":n.y2=n.y1+(n.x2-n.x1)/o.aspectRatio,a=Math.max(n.x2-i.width,0),c=Math.max(n.y2-i.height,0),(a>0||c>0)&&(n.x2-=c*o.aspectRatio>a?c*o.aspectRatio:a,n.y2-=c*o.aspectRatio>a?c:a/o.aspectRatio);break;case"left":case"bottomleft":n.y2=n.y1+(n.x2-n.x1)/o.aspectRatio,a=Math.max(0-n.x1,0),c=Math.max(n.y2-i.height,0),(a>0||c>0)&&(n.x1+=c*o.aspectRatio>a?c*o.aspectRatio:a,n.y2-=c*o.aspectRatio>a?c:a/o.aspectRatio);break;case"center":n.x2=n.x1+(n.y2-n.y1)*o.aspectRatio,n.y2=n.y1+(n.x2-n.x1)/o.aspectRatio;const Z=Math.max(0-n.x1,0),E=Math.max(n.x2-i.width,0),q=Math.max(n.y2-i.height,0),R=Math.max(0-n.y1,0);(Z>0||E>0||q>0||R>0)&&(n.x1+=q*o.aspectRatio>Z?q*o.aspectRatio:Z,n.x2-=R*o.aspectRatio>E?R*o.aspectRatio:E,n.y1+=R*o.aspectRatio>E?R:E/o.aspectRatio,n.y2-=q*o.aspectRatio>Z?q:Z/o.aspectRatio)}}getClientX(t){var n;return(null===(n=t.touches)||void 0===n?void 0:n[0].clientX)||t.clientX||0}getClientY(t){var n;return(null===(n=t.touches)||void 0===n?void 0:n[0].clientY)||t.clientY||0}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();let _e=(()=>{class r{constructor(){this.autoRotateSupported=function ue(){return new Promise(r=>{const s=new Image;s.onload=()=>{r(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(t,n){return new Promise((i,o)=>{const a=new FileReader;a.onload=c=>{this.loadImage(c.target.result,t.type,n).then(i).catch(o)},a.readAsDataURL(t)})}loadImage(t,n,i){return this.isValidImageType(n)?this.loadBase64Image(t,i):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,n){return new Promise((i,o)=>{const a=new Image;a.onerror=()=>o,a.onload=()=>{const c=document.createElement("canvas"),Z=c.getContext("2d");c.width=a.width,c.height=a.height,Z?.drawImage(a,0,0),this.loadBase64Image(c.toDataURL(),n).then(i)},a.crossOrigin="anonymous",a.src=t})}loadBase64Image(t,n){return new Promise((i,o)=>{const a=new Image;a.onload=()=>i({originalImage:a,originalBase64:t}),a.onerror=o,a.src=t}).then(i=>this.transformImageBase64(i,n))}transformImageBase64(t,n){var i=this;return(0,A.Z)(function*(){const o=yield i.autoRotateSupported,a=yield function me(r){switch("string"==typeof r&&(r=function de(r){const s=new DataView(function Ce(r){r=r.replace(/^data\:([^\;]+)\;base64,/gim,"");const s=atob(r),t=s.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=s.charCodeAt(i);return n.buffer}(r));if(65496!==s.getUint16(0,!1))return-2;const t=s.byteLength;let n=2;for(;n<t;){if(s.getUint16(n+2,!1)<=8)return-1;const i=s.getUint16(n,!1);if(n+=2,65505==i){if(1165519206!==s.getUint32(n+=2,!1))return-1;const o=18761==s.getUint16(n+=6,!1);n+=s.getUint32(n+4,o);const a=s.getUint16(n,o);n+=2;for(let c=0;c<a;c++)if(274==s.getUint16(n+12*c,o))return s.getUint16(n+12*c+8,o)}else{if(65280!=(65280&i))break;n+=s.getUint16(n,!1)}}return-1}(r)),r){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(o?-1:t.originalBase64);return t.originalImage&&t.originalImage.complete?i.transformLoadedImage({original:{base64:t.originalBase64,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a},n):Promise.reject(new Error("No image loaded"))})()}transformLoadedImage(t,n){var i=this;return(0,A.Z)(function*(){const o=n.canvasRotation+t.exifTransform.rotate,a={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===o&&!t.exifTransform.flip&&!n.containWithinAspectRatio)return{original:{base64:t.original.base64,image:t.original.image,size:{...a}},transformed:{base64:t.original.base64,image:t.original.image,size:{...a}},exifTransform:t.exifTransform};const c=i.getTransformedSize(a,t.exifTransform,n),Z=document.createElement("canvas");Z.width=c.width,Z.height=c.height;const E=Z.getContext("2d");E?.setTransform(t.exifTransform.flip?-1:1,0,0,1,Z.width/2,Z.height/2),E?.rotate(Math.PI*(o/2)),E?.drawImage(t.original.image,-a.width/2,-a.height/2);const q=Z.toDataURL(),R=yield i.loadImageFromBase64(q);return{original:{base64:t.original.base64,image:t.original.image,size:{...a}},transformed:{base64:q,image:R,size:{width:R.width,height:R.height}},exifTransform:t.exifTransform}})()}loadImageFromBase64(t){return new Promise((n,i)=>{const o=new Image;o.onload=()=>n(o),o.onerror=i,o.src=t})}getTransformedSize(t,n,i){const o=i.canvasRotation+n.rotate;if(i.containWithinAspectRatio){if(o%2){const c=t.height/i.aspectRatio;return{width:Math.max(t.height,t.width*i.aspectRatio),height:Math.max(t.width,c)}}{const c=t.width/i.aspectRatio;return{width:Math.max(t.width,t.height*i.aspectRatio),height:Math.max(t.height,c)}}}return o%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ye=(()=>{class r{constructor(t,n,i,o,a){var c;this.cropService=t,this.cropperPositionService=n,this.loadImageService=i,this.sanitizer=o,this.cd=a,this.Hammer=(null===(c=window)||void 0===c?void 0:c.Hammer)||null,this.settings=new m,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=b,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.reset()}ngOnChanges(t){var n;this.onChangesUpdateSettings(t),this.onChangesInputImage(t),null!==(n=this.loadedImage)&&void 0!==n&&n.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!t.maintainAspectRatio&&!t.aspectRatio?t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition(),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var t,n,i;return(null===(t=this.imageChangedEvent)||void 0===t||null===(n=t.target)||void 0===n||null===(i=n.files)||void 0===i?void 0:i.length)>0}setCssTransform(){var t;const n=(null===(t=this.transform)||void 0===t?void 0:t.translateUnit)||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${n}, ${this.transform.translateV||0}${n}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit({...this.maxSize}),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var t,n;return(null===(t=this.sourceImage)||void 0===t||null===(n=t.nativeElement)||void 0===n?void 0:n.offsetWidth)>0}onResize(){!this.loadedImage||(this.hidden?this.resizedWhileHidden=!0:(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()))}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;(this.maxSize.width!==t.offsetWidth||this.maxSize.height!==t.offsetHeight)&&(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const n=+t.key;n>=1&&n<=9&&(this.settings.stepSize=n)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const i=t.shiftKey?b.Resize:b.Move,o=t.altKey?function x(r){switch(r){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function l(r){switch(r){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),a=function P(r,s){switch(r){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},i,o),this.moveImg(a),this.moveStop()}startMove(t,n,i=null){var o,a;this.disabled||null!==(o=this.moveStart)&&void 0!==o&&o.active&&(null===(a=this.moveStart)||void 0===a?void 0:a.type)===b.Pinch||n===b.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:n,position:i,transform:{...this.transform},clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t),...this.cropper})}startPinch(t){!this.safeImgDataUrl||(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:b.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2,...this.cropper})}moveImg(t){if(this.moveStart.active){if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===b.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===b.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===b.Drag){var n,i;const o=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,a=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform={...this.transform,translateH:((null===(n=this.moveStart.transform)||void 0===n?void 0:n.translateH)||0)+o,translateV:((null===(i=this.moveStart.transform)||void 0===i?void 0:i.translateV)||0)+a},this.setCssTransform()}this.cd.detectChanges()}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===b.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){var t,n;null!==(t=this.loadedImage)&&void 0!==t&&null!==(n=t.transformed)&&void 0!==n&&n.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){var t,n;if(null!==(t=this.loadedImage)&&void 0!==t&&null!==(n=t.transformed)&&void 0!==n&&n.image){const i=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/i:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/i:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){var t;this.moveStart.active&&(this.moveStart.active=!1,(null===(t=this.moveStart)||void 0===t?void 0:t.type)===b.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){var t,n;if(null!=(null===(t=this.loadedImage)||void 0===t||null===(n=t.transformed)||void 0===n?void 0:n.image)){this.startCropImage.emit();const i=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=i&&this.imageCropped.emit(i),i}return null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C),e.Y36(J),e.Y36(_e),e.Y36(ae.H7),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["image-cropper"]],viewQuery:function(t,n){if(1&t&&(e.Gf(se,7),e.Gf(ie,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.wrapper=i.first),e.iGM(i=e.CRH())&&(n.sourceImage=i.first)}},hostVars:6,hostBindings:function(t,n){1&t&&e.NdJ("resize",function(){return n.onResize()},!1,e.Jf7)("mousemove",function(o){return n.moveImg(o)},!1,e.evT)("touchmove",function(o){return n.moveImg(o)},!1,e.evT)("mouseup",function(){return n.moveStop()},!1,e.evT)("touchend",function(){return n.moveStop()},!1,e.evT),2&t&&(e.Udp("text-align",n.alignImage),e.ekj("disabled",n.disabled)("ngx-ix-hidden",n.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart","error"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,n){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,re,2,8,"img",1),e._UZ(3,"div",2),e.YNc(4,g,3,15,"div",3),e.qZA()),2&t&&(e.Udp("background",n.imageVisible&&n.backgroundColor),e.xp6(2),e.Q6J("ngIf",n.safeImgDataUrl),e.xp6(1),e.Udp("width",n.maxSize.width,"px")("height",n.maxSize.height,"px")("margin-left","center"===n.alignImage?n.marginLeft:null),e.xp6(1),e.Q6J("ngIf",n.imageVisible))},dependencies:[I.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),r})(),Re=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[I.ez]]}),r})();function Pe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,o=e.oxw();return e.KtG(o.renderBorrowModal(i))}),e._uU(1," Borrow "),e.qZA()}}function Be(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,o=e.oxw();return e.KtG(o.renderReturnModal(i))}),e._uU(1," Return "),e.qZA()}}function He(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,o=e.oxw();return e.KtG(o.useItemModal(i))}),e._uU(1," Use 1 "),e.qZA()}}function Le(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",41),e._uU(2),e.qZA(),e.TgZ(3,"td",41),e._uU(4),e.qZA(),e.TgZ(5,"td",41),e._uU(6),e.qZA(),e.TgZ(7,"td",41),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",41),e._uU(14),e.YNc(15,Pe,2,0,"button",42),e.YNc(16,Be,2,0,"button",42),e.YNc(17,He,2,0,"button",42),e.qZA(),e.TgZ(18,"td"),e._UZ(19,"img",43),e.qZA(),e.TgZ(20,"td")(21,"button",4),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.renderEditItem(o))}),e._uU(22," Edit "),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(t.internalPartNumber),e.xp6(2),e.Oqu(t.manufacturerPartNumber),e.xp6(2),e.Oqu(t.location),e.xp6(2),e.Oqu(t.amount),e.xp6(2),e.hij(" ",t.borrowedByUser," "),e.xp6(1),e.Q6J("ngIf",!1===t.isBorrowed&&!0===t.isBorrowable),e.xp6(1),e.Q6J("ngIf",!0===t.isBorrowed&&"Borrowed by: You"===t.borrowedByUser),e.xp6(1),e.Q6J("ngIf",!0!==t.isBorrowable),e.xp6(2),e.s9C("src",t.imageUrl,e.LSH)}}function ze(r,s){if(1&r&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t," ")}}function Je(r,s){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.hij(" ",t," ")}}function De(r,s){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Qe(r,s){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Ye(r,s){if(1&r&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t," ")}}function We(r,s){1&r&&(e.TgZ(0,"span",46),e._uU(1,"(Can not be disabled if item is borrowed)"),e.qZA())}function $e(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteImage())}),e._uU(1," X "),e.qZA()}}let pe=new(T())({}),Ge=(()=>{class r{constructor(t,n,i,o,a,c){this.inventoryService=t,this.formBuilder=n,this.uploadService=i,this.userActionService=o,this.authService=a,this.userService=c,this.user=JSON.parse(window.sessionStorage.getItem("User")),this.imageChangedEvent="",this.addItemForm=this.formBuilder.group({name:[""],type:[""],internalPartNumber:[""],manufacturerPartNumber:[""],manufacturer:[""],link:[""],description:[""],amountUnit:[""],location:[""],amount:0,isBorrowable:!1,image:[""]}),this.elecLocals=["Cabinet - Bin 1","Cabinet - Bin 2","Cabinet - Bin 3"],this.mechLocals=["Cabinet - Bin 1","Cabinet - Bin 2","Cabinet - Bin 3"],this.lockerLocals=["Cabinet - Bin 1","Cabinet - Bin 2","Cabinet - Bin 3"],this.basementLocals=["Cabinet - Bin 1","Cabinet - Bin 2","Cabinet - Bin 3"],this.amountUnitOptions=["Each","Meter","Feet","Pack","Pounds","Liter","Roll","Yard"],this.locations=[],this.checkoutButtonText="Borrow",this.editButtonText="Edit",this.submitButtonText="Add Item",this.borrowFilter=!1}fileChangeEvent(t){this.imageChangedEvent=t,this.image=t.target.files[0]}imageCropped(t){this.previewImgUrl=t.base64,this.dataUrlToFile()}dataUrlToFile(){var t=this;return(0,A.Z)(function*(){const n=t.previewImgUrl,i=t.image.name,a=yield(yield fetch(n)).blob(),c=new File([a],i,{type:"image/webp"});t.image=c})()}addItemNotification(t){pe.async(t,"Item has been added","Item failed to add, contact tech support")}updateItemNotification(t){pe.async(t,"Item has been updated","Item failed to update, contact tech support")}borrowItemNotification(t){pe.async(t,"Item has been borrowed","Failed to borrow item, contact tech support")}returnItemNotification(t){pe.async(t,"Item has been returned","Item failed to return, contact tech support")}useItemNotification(t){pe.async(t,"Item has been used","Item was not used. Check there are more than 1 or contact tech support")}useConfirmationNotification(){return(0,A.Z)(function*(){return new Promise(t=>{pe.confirm("Are you sure you would like to use? Item count will be reduced by 1.",()=>{t(!0)},()=>{t(!1)},{labels:{confirm:"Dangerous action"}})})})()}borrowConfirmationNotification(){return(0,A.Z)(function*(){return new Promise(t=>{pe.confirm("Are you sure you would like to borrow?",()=>{t(!0)},()=>{t(!1)},{labels:{confirm:"Dangerous action"}})})})()}returnConfirmationNotification(){return(0,A.Z)(function*(){return new Promise(t=>{pe.confirm("Are you sure you would like to return?",()=>{t(!0)},()=>{t(!1)},{labels:{confirm:"Dangerous action"}})})})()}borrowCheckNotification(){return(0,A.Z)(function*(){return new Promise(t=>{pe.confirm("The max value for an item than can be borrowed is 1. If you proceed, the item count will be changed to 1",()=>{t(!0)},()=>{t(!1)},{labels:{confirm:"Dangerous action"}})})})()}ngOnInit(){this.inventoryService.getInventoryItems().subscribe(t=>{this.items=t.map(n=>{const i={id:n.payload.doc.id,...n.payload.doc.data()};return""===i.borrowedByUser?(i.borrowedByUser="",i):i.borrowedByUser===this.user.id?(i.borrowedByUser="Borrowed by: You",i):(this.userService.getUser(i.borrowedByUser).subscribe(o=>{const a=o.data();i.borrowedByUser="Borrowed by: "+a.displayName}),i)})})}setImage(t){this.image=t[0];const n=new FileReader;n.onload=i=>{this.previewImgUrl=i.target.result},n.readAsDataURL(this.image)}manageItemForm(){if(this.submitButtonText.startsWith("Edit Item")){if(null===this.image){const t={id:this.updateItemId,name:this.addItemForm.get("name").value,type:this.addItemForm.get("type").value,internalPartNumber:this.addItemForm.get("internalPartNumber").value,manufacturerPartNumber:this.addItemForm.get("manufacturerPartNumber").value,manufacturer:this.addItemForm.get("manufacturer").value,link:this.addItemForm.get("link").value,description:this.addItemForm.get("description").value,amountUnit:this.addItemForm.get("amountUnit").value,location:this.addItemForm.get("location").value,amount:this.addItemForm.get("amount").value,isBorrowable:this.addItemForm.get("isBorrowable").value,isBorrowed:!1,borrowedByUser:"",image:null,imageUrl:this.previewImgUrl};let n=this.inventoryService.updateInventoryItem(t);this.updateItemNotification(n)}else{const t=this.updateItemId,n=this.addItemForm.get("name").value,i=this.addItemForm.get("type").value,o=this.addItemForm.get("internalPartNumber").value,a=this.addItemForm.get("manufacturerPartNumber").value,c=this.addItemForm.get("manufacturer").value,Z=this.addItemForm.get("link").value,E=this.addItemForm.get("description").value,q=this.addItemForm.get("amountUnit").value,R=this.addItemForm.get("location").value,j=this.addItemForm.get("amount").value,Y=this.addItemForm.get("isBorrowable").value;this.uploadService.uploadFile(this.image,"assets/inventory_images/").then(ne=>{ne.ref.getDownloadURL().then(X=>{let ce=this.inventoryService.updateInventoryItem({id:t,name:n,type:i,internalPartNumber:o,manufacturerPartNumber:a,manufacturer:c,link:Z,description:E,amountUnit:q,location:R,amount:j,isBorrowable:Y,isBorrowed:!1,borrowedByUser:"",image:null,imageUrl:X});this.updateItemNotification(ce)})})}return this.resetForm(),void this.modalVisiblity(!1)}if(null===this.image){const t={name:this.addItemForm.get("name").value,type:this.addItemForm.get("type").value,internalPartNumber:this.addItemForm.get("internalPartNumber").value,manufacturerPartNumber:this.addItemForm.get("manufacturerPartNumber").value,manufacturer:this.addItemForm.get("manufacturer").value,link:this.addItemForm.get("link").value,description:this.addItemForm.get("description").value,amountUnit:this.addItemForm.get("amountUnit").value,location:this.addItemForm.get("location").value,amount:this.addItemForm.get("amount").value,isBorrowable:this.addItemForm.get("isBorrowable").value,isBorrowed:!1,borrowedByUser:"",image:null,imageUrl:"https://firebasestorage.googleapis.com/v0/b/solarcardatabase.appspot.com/o/assets%2Finventory_images%2Fno_img.png?alt=media&token=47ff8883-f59c-48d9-89dd-5db91fe23021"};let n=this.inventoryService.addInventoryItem(t);this.addItemNotification(n)}else{const t=this.addItemForm.get("name").value,n=this.addItemForm.get("type").value,i=this.addItemForm.get("internalPartNumber").value,o=this.addItemForm.get("manufacturerPartNumber").value,a=this.addItemForm.get("manufacturer").value,c=this.addItemForm.get("link").value,Z=this.addItemForm.get("description").value,E=this.addItemForm.get("amountUnit").value,q=this.addItemForm.get("location").value,R=this.addItemForm.get("amount").value,j=this.addItemForm.get("isBorrowable").value;this.uploadService.uploadFile(this.image,"assets/inventory_images/").then(Y=>{Y.ref.getDownloadURL().then(ne=>{let K=this.inventoryService.addInventoryItem({name:t,type:n,internalPartNumber:i,manufacturerPartNumber:o,manufacturer:a,link:c,description:Z,amountUnit:E,location:q,amount:R,isBorrowable:j,isBorrowed:!1,borrowedByUser:"",image:null,imageUrl:ne});this.addItemNotification(K)})})}this.resetForm(),this.modalVisiblity(!1)}modalVisiblity(t){!0===t?document.getElementsByClassName("itemControlModal")[0].setAttribute("style","display:block"):document.getElementsByClassName("itemControlModal")[0].setAttribute("style","display:none")}renderAddItem(){this.resetForm(),this.modalVisiblity(!0),this.submitButtonText="Add Item"}renderEditItem(t){this.resetForm(),this.modalVisiblity(!0),this.updateItemId=t.id,this.addItemForm.get("name").setValue(t.name),this.addItemForm.get("type").setValue(t.type),this.addItemForm.get("internalPartNumber").setValue(t.internalPartNumber),this.addItemForm.get("manufacturerPartNumber").setValue(t.manufacturerPartNumber),this.addItemForm.get("manufacturer").setValue(t.manufacturer),this.addItemForm.get("description").setValue(t.description),this.addItemForm.get("amountUnit").setValue(t.amountUnit),this.addItemForm.get("link").setValue(t.link),this.addItemForm.get("location").setValue(t.location),this.addItemForm.get("amount").setValue(t.amount),this.addItemForm.get("isBorrowable").setValue(t.isBorrowable),t.isBorrowed&&this.addItemForm.get("isBorrowable").disable(),this.previewImgUrl=t.imageUrl,this.image=null,this.submitButtonText="Edit Item",document.documentElement.scrollTop=0}cancelItemForm(){this.modalVisiblity(!1),this.resetForm()}resetForm(){this.addItemForm.reset(),this.previewImgUrl="",this.imageChangedEvent="",this.updateItemId="",this.addItemForm.get("isBorrowable").enable()}renderBorrowModal(t){var n=this;return(0,A.Z)(function*(){if((yield n.borrowConfirmationNotification())&&!0===t.isBorrowable&&!1===t.isBorrowed){let o=n.inventoryService.borrowItem(t);n.borrowItemNotification(o)}})()}renderReturnModal(t){var n=this;return(0,A.Z)(function*(){if((yield n.returnConfirmationNotification())&&!0===t.isBorrowable&&!0===t.isBorrowed){t.borrowedByUser=n.user.id;let o=n.inventoryService.returnItem(t);n.returnItemNotification(o)}})()}useItemModal(t){var n=this;return(0,A.Z)(function*(){if(t.amount>0){if(yield n.useConfirmationNotification()){let o=n.inventoryService.useItem(t);n.useItemNotification(o)}}else{let i=Promise.reject(new Error("No items left to use"));n.useItemNotification(i)}})()}returnItemFilter(){this.borrowFilter?(this.runSearch(2),this.borrowFilter=!1):(this.runSearch(1),this.borrowFilter=!0)}runSearch(t=0){let n,i,o,a,c,Z,E,q,R,j,Y,ne,X,K,ce,oe,ge;for(0===t?(n=document.getElementsByClassName("search-field")[0],i=n.value.toUpperCase()):2===t?(n="",i=n.toUpperCase(),document.getElementsByClassName("search-field")[0].setAttribute("value","")):(n="Borrowed by: You",i=n.toUpperCase(),document.getElementsByClassName("search-field")[0].setAttribute("value","*Borrowed*")),o=document.getElementsByClassName("inventory-table")[0],a=o.getElementsByTagName("tr"),Y=1;Y<a.length;Y++)c=a[Y].getElementsByTagName("td")[0],Z=a[Y].getElementsByTagName("td")[1],E=a[Y].getElementsByTagName("td")[2],q=a[Y].getElementsByTagName("td")[3],R=a[Y].getElementsByTagName("td")[4],j=a[Y].getElementsByTagName("td")[6],ne=c.textContent||c.innerText,X=Z.textContent||Z.innerText,K=E.textContent||E.innerText,ce=q.textContent||q.innerText,oe=R.textContent||R.innerText,ge=j.textContent||j.innerText,a[Y].style.display=ne.toUpperCase().indexOf(i)>-1||X.toUpperCase().indexOf(i)>-1||K.toUpperCase().indexOf(i)>-1||ce.toUpperCase().indexOf(i)>-1||oe.toUpperCase().indexOf(i)>-1||ge.toUpperCase().indexOf(i)>-1?"":"none"}locationUpdate(){const t=document.getElementsByClassName("location-field")[0];"Custom"===this.addItemForm.get("location").value?t.setAttribute("style","display:block"):t.setAttribute("style","display:none")}borrowableCheck(){var t=this;return(0,A.Z)(function*(){let n=yield t.borrowCheckNotification();!0===t.addItemForm.get("isBorrowable").value&&1!==t.addItemForm.get("amount").value&&(n?t.addItemForm.controls.amount.setValue(1):t.addItemForm.controls.isBorrowable.setValue(!1))})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(D),e.Y36(u.QS),e.Y36(ee),e.Y36(S.X),e.Y36(L),e.Y36(U))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-inventory"]],decls:117,vars:18,consts:[[1,"inventoryContainer"],[1,"inventoryControls"],[1,"defaultActions"],["placeholder","Search # or name",1,"search-field",3,"keyup"],[1,"btn","btn-danger","actionButton",3,"click"],["type","checkbox","id","btn-borrowed","autocomplete","off",1,"btn-check",2,"display","none",3,"click"],["for","btn-borrowed",1,"btn","btn-danger"],[1,"inventoryList"],[1,"tableHeading"],[1,"table","inventory-table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"itemControlModal"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["formControlName","type","required",""],["formControlName","internalPartNumber",1,"form-control"],["formControlName","manufacturerPartNumber","required","",1,"form-control"],["formControlName","manufacturer",1,"form-control"],["formControlName","link","required","",1,"form-control"],["formControlName","location",1,"form-control",3,"change"],["value","Custom"],["label","Electrical Room"],[3,"ngValue",4,"ngFor","ngForOf"],["label","Mechanical Room"],["label","Lockers Room"],["label","Basement"],["formControlName","location *","required","",1,"form-control","location-field"],["formControlName","amount","required","",1,"form-control",3,"readonly"],["formControlName","amountUnit","required","",1,"form-control",3,"value","change"],["type","text","formControlName","description",1,"form-control"],["class","isBorrowed",4,"ngIf"],["type","checkbox","formControlName","isBorrowable",1,"form-control",3,"change"],["type","file","formControlName","image","accept","image/*",1,"form-control",3,"change"],[1,"croppingArea"],["format","webp","imageQuality","50",1,"imageCrop",3,"imageChangedEvent","maintainAspectRatio","cropperMinWidth","imageCropped"],[1,"imagePreview",3,"src"],["class","btn btn-warning actionButton","type","button",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-danger",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"searchItem"],["class","btn btn-warning actionButton",3,"click",4,"ngIf"],[1,"imageResultsPreview",3,"src"],[1,"btn","btn-warning","actionButton",3,"click"],[3,"ngValue"],[1,"isBorrowed"],["type","button",1,"btn","btn-warning","actionButton",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),e.NdJ("keyup",function(){return n.runSearch()}),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return n.renderAddItem()}),e._uU(5," Add Item "),e.qZA(),e.TgZ(6,"input",5),e.NdJ("click",function(){return n.returnItemFilter()}),e.qZA(),e.TgZ(7,"label",6),e._uU(8,"Borrowed Items"),e.qZA()()(),e.TgZ(9,"div",7)(10,"h1",8),e._uU(11,"Team Inventory"),e.qZA(),e.TgZ(12,"table",9)(13,"tr")(14,"th",10),e._uU(15,"Name"),e.qZA(),e.TgZ(16,"th",10),e._uU(17,"Type"),e.qZA(),e.TgZ(18,"th",10),e._uU(19,"SC Part#"),e.qZA(),e.TgZ(20,"th",10),e._uU(21,"Man. Part#"),e.qZA(),e.TgZ(22,"th",10),e._uU(23,"Location"),e.qZA(),e.TgZ(24,"th",10),e._uU(25,"Amount"),e.qZA(),e.TgZ(26,"th",10),e._uU(27,"Actions"),e.qZA(),e.TgZ(28,"th",10),e._uU(29,"Image"),e.qZA(),e.TgZ(30,"th",10),e._uU(31,"Edit"),e.qZA()(),e.YNc(32,Le,23,11,"tr",11),e.qZA(),e.TgZ(33,"p"),e._uU(34,"--- End of Items ---"),e.qZA()(),e.TgZ(35,"div",12)(36,"form",13),e.NdJ("ngSubmit",function(){return n.manageItemForm()}),e.TgZ(37,"h3"),e._uU(38),e.qZA(),e.TgZ(39,"div",14)(40,"label"),e._uU(41,"Name *"),e.qZA(),e._UZ(42,"input",15),e.qZA(),e.TgZ(43,"div",14)(44,"label"),e._uU(45,"Type *"),e.qZA(),e._UZ(46,"br"),e.TgZ(47,"select",16)(48,"option"),e._uU(49,"Part"),e.qZA(),e.TgZ(50,"option"),e._uU(51,"Tool"),e.qZA()()(),e.TgZ(52,"div",14)(53,"label"),e._uU(54,"Internal Part #"),e.qZA(),e._UZ(55,"input",17),e.qZA(),e.TgZ(56,"div",14)(57,"label"),e._uU(58,"Man. Part # *"),e.qZA(),e._UZ(59,"input",18),e.qZA(),e.TgZ(60,"div",14)(61,"label"),e._uU(62,"Manufacturer"),e.qZA(),e._UZ(63,"input",19),e.qZA(),e.TgZ(64,"div",14)(65,"label"),e._uU(66,"Link *"),e.qZA(),e._UZ(67,"input",20),e.qZA(),e.TgZ(68,"div",14)(69,"label"),e._uU(70,"Location:"),e.qZA(),e._UZ(71,"br"),e.TgZ(72,"select",21),e.NdJ("change",function(){return n.locationUpdate()}),e.TgZ(73,"option",22),e._uU(74,"Custom"),e.qZA(),e._UZ(75,"optgroup",23),e.YNc(76,ze,2,2,"option",24),e._UZ(77,"optgroup",25),e.YNc(78,Je,2,1,"option",11),e._UZ(79,"optgroup",26),e.YNc(80,De,2,1,"option",11),e._UZ(81,"optgroup",27),e.YNc(82,Qe,2,1,"option",11),e.qZA(),e._UZ(83,"input",28),e.qZA(),e.TgZ(84,"div",14)(85,"label"),e._uU(86,"Amount *"),e.qZA(),e._UZ(87,"input",29),e.TgZ(88,"select",30),e.NdJ("change",function(){return n.locationUpdate()}),e.YNc(89,Ye,2,2,"option",24),e.qZA()(),e.TgZ(90,"div",14)(91,"label"),e._uU(92,"Description"),e.qZA(),e._UZ(93,"input",31),e.qZA(),e.TgZ(94,"div",14)(95,"label"),e._uU(96,"Borrowable "),e.YNc(97,We,2,0,"span",32),e.qZA(),e.TgZ(98,"input",33),e.NdJ("change",function(){return n.borrowableCheck()}),e.qZA()(),e.TgZ(99,"div",14)(100,"label"),e._uU(101,"Image *"),e.qZA(),e.TgZ(102,"input",34),e.NdJ("change",function(o){return n.fileChangeEvent(o)}),e.qZA(),e.TgZ(103,"span",35)(104,"image-cropper",36),e.NdJ("imageCropped",function(o){return n.imageCropped(o)}),e.qZA()(),e.TgZ(105,"span",35)(106,"label"),e._uU(107,"Image Preview =>"),e.qZA()(),e.TgZ(108,"span",35),e._UZ(109,"img",37),e.qZA()(),e._UZ(110,"br"),e.YNc(111,$e,2,0,"button",38),e.TgZ(112,"div",14)(113,"button",39),e._uU(114),e.qZA(),e.TgZ(115,"button",40),e.NdJ("click",function(){return n.cancelItemForm()}),e._uU(116," Cancel "),e.qZA()()()()()),2&t&&(e.xp6(32),e.Q6J("ngForOf",n.items),e.xp6(4),e.Q6J("formGroup",n.addItemForm),e.xp6(2),e.Oqu(n.submitButtonText),e.xp6(38),e.Q6J("ngForOf",n.elecLocals),e.xp6(2),e.Q6J("ngForOf",n.mechLocals),e.xp6(2),e.Q6J("ngForOf",n.lockerLocals),e.xp6(2),e.Q6J("ngForOf",n.basementLocals),e.xp6(5),e.Q6J("readonly",!0===n.addItemForm.get("isBorrowable").value),e.xp6(1),e.Q6J("value",n.amountUnitOptions[0]),e.xp6(1),e.Q6J("ngForOf",n.amountUnitOptions),e.xp6(8),e.Q6J("ngIf",n.addItemForm.get("isBorrowable").disabled),e.xp6(7),e.Q6J("imageChangedEvent",n.imageChangedEvent)("maintainAspectRatio",!1)("cropperMinWidth",128),e.xp6(5),e.s9C("src",n.previewImgUrl,e.LSH),e.xp6(2),e.Q6J("ngIf",n.previewImgUrl),e.xp6(2),e.Q6J("disabled",!n.addItemForm.valid),e.xp6(1),e.hij(" ",n.submitButtonText," "))},dependencies:[I.sg,I.O5,u._Y,u.YN,u.Kr,u.Fj,u.Wl,u.EJ,u.JJ,u.JL,u.Q7,u.sg,u.u,ye],styles:[".inventoryContainer[_ngcontent-%COMP%]{width:100%;display:inline-block}.inventoryControls[_ngcontent-%COMP%]{top:0;float:left;width:15%;min-width:175px;padding:1em}.defaultActions[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-bottom:5px;max-width:90%}.inventoryList[_ngcontent-%COMP%]{float:left;height:95%;width:85%;min-width:500px;padding:1em;overflow:scroll}.itemControlModal[_ngcontent-%COMP%]{display:none;position:fixed;top:0;width:100%;height:100%;padding:2em;z-index:10000;background:white;overflow:scroll}.imageResultsPreview[_ngcontent-%COMP%]{height:50px}.imagePreview[_ngcontent-%COMP%]{height:100px}"]}),r})();var Ve=h(1857);function Ke(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"textarea",19),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.markdown=i)}),e.qZA(),e._UZ(2,"markdown",20),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.markdown),e.xp6(1),e.Q6J("data",t.markdown)}}function Xe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",21)(1,"label"),e._uU(2,"Link"),e.qZA(),e.TgZ(3,"input",22),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.link=i)}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.link)}}function et(r,s){if(1&r&&(e.TgZ(0,"div")(1,"a",28),e._uU(2,"Link to Article"),e.qZA()()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.s9C("href",t.link,e.LSH)}}function tt(r,s){if(1&r&&(e.TgZ(0,"div")(1,"div",29),e._UZ(2,"markdown",30),e.qZA()()),2&r){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("data",t.markdown)}}function nt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th",23),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"img",24),e.qZA(),e.TgZ(9,"td"),e.YNc(10,et,3,1,"div",13),e.YNc(11,tt,3,1,"div",13),e.qZA(),e.TgZ(12,"td")(13,"div",25)(14,"button",26),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteNews(o))}),e._uU(15," Delete "),e.qZA(),e.TgZ(16,"button",27),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.setupNewsUpdate(o))}),e._uU(17," Update "),e.qZA()()()()}if(2&r){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.date),e.xp6(2),e.s9C("src",t.thumbnailUrl,e.LSH),e.xp6(2),e.Q6J("ngIf",null!==t.link),e.xp6(1),e.Q6J("ngIf",null===t.Link)}}let Te=new(T())({}),rt=(()=>{class r{constructor(t,n,i){this.newsService=t,this.uploadService=n,this.formBuilder=i,this.imageChangedEvent="",this.addNewsForm=this.formBuilder.group({name:[""],date:[""],thumnail:[""]}),this.mainButtonText="Add News Article",this.markdown='Title\n---\n---\nSomething...\n<img src="https://s3-alpha.figma.com/hub/file/948140848/1f4d8ea7-e9d9-48b7-b70c-819482fb10fb-cover.png">',this.link="",this.isLinkOnlyFormat=!1}fileChangeEvent(t){this.imageChangedEvent=t,this.thumbnail=t.target.files[0]}imageCropped(t){this.previewThumbnailUrl=t.base64,this.dataUrlToFile()}addItemNotification(t){Te.async(t,"News item has been added","News item failed to add, contact tech support")}updateNewsNotification(t){Te.async(t,"News item has been updated","News item failed to update, contact tech support")}removeNewsNotification(t){Te.async(t,"News item has been removed","News item failed to remove, contact tech support")}dataUrlToFile(){var t=this;return(0,A.Z)(function*(){const n=t.previewThumbnailUrl,i=t.thumbnail.name,a=yield(yield fetch(n)).blob(),c=new File([a],i,{type:"image/webp"});t.thumbnail=c})()}ngOnInit(){this.newsService.getNewsArticles().subscribe(t=>{this.newsArticles=t.map(n=>({id:n.payload.doc.id,...n.payload.doc.data()})),this.newsArticles.sort((n,i)=>Date.parse(i.date)-Date.parse(n.date))})}setThumbnail(t){this.thumbnail=t[0];const n=new FileReader;n.onload=i=>{this.previewThumbnailUrl=i.target.result},n.readAsDataURL(this.thumbnail)}resetForm(){this.addNewsForm.reset(),this.previewThumbnailUrl="",this.updateNewsId="",this.mainButtonText="Add News Article",this.markdown="",this.imageChangedEvent=null}manageNews(){let t,n;if(this.isLinkOnlyFormat?(t="",n=this.link):(t=this.markdown,n=null),this.mainButtonText.startsWith("Update")){if(null===this.thumbnail){const i={id:this.updateNewsId,name:this.addNewsForm.get("name").value,date:this.addNewsForm.get("date").value,markdown:t,link:n,thumbnail:null,thumbnailUrl:this.previewThumbnailUrl};let o=this.newsService.updateNews(i);this.updateNewsNotification(o)}else{const i=this.updateNewsId,o=this.addNewsForm.get("name").value,a=this.addNewsForm.get("date").value;this.uploadService.uploadFile(this.thumbnail,"assets/thumnails/").then(c=>{c.ref.getDownloadURL().then(Z=>{let q=this.newsService.updateNews({id:i,name:o,date:a,markdown:t,link:n,thumbnail:null,thumbnailUrl:Z});this.updateNewsNotification(q)})})}this.resetForm()}else if(null===this.thumbnail){const o={name:this.addNewsForm.get("name").value,date:this.addNewsForm.get("date").value,markdown:t,link:n,thumbnail:null,thumbnailUrl:""};console.log(o);let a=this.newsService.addNews(o);this.addItemNotification(a),this.resetForm()}else{const i=this.addNewsForm.get("name").value,o=this.addNewsForm.get("date").value;this.uploadService.uploadFile(this.thumbnail,"assets/thumnails/").then(a=>{a.ref.getDownloadURL().then(c=>{const Z={name:i,date:o,markdown:t,link:n,thumbnail:null,thumbnailUrl:c};console.log(Z);let E=this.newsService.addNews(Z);this.addItemNotification(E)})}),this.resetForm()}}deleteNews(t){let n=this.newsService.deleteNews(t);this.removeNewsNotification(n)}setupNewsUpdate(t){this.updateNewsId=t.id,this.addNewsForm.get("name").setValue(t.name),this.addNewsForm.get("date").setValue(t.date),this.markdown=t.markdown,this.link=t.link,this.previewThumbnailUrl=t.thumbnailUrl,this.thumbnail=null,this.mainButtonText="Update News Article",this.isLinkOnlyFormat=null!==this.link}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ve.Y),e.Y36(ee),e.Y36(u.QS))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-news"]],decls:51,vars:11,consts:[[1,"container"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","submit",1,"btn","btn-danger",3,"disabled"],[1,"row"],[1,"col-4"],["type","text","formControlName","name","required","",1,"form-control"],["type","date","formControlName","date","required","",1,"form-control"],["type","file","formControlName","thumbnail","accept","image/*","required","",1,"form-control",3,"change"],[1,"croppingArea"],["format","webp","imageQuality","90",1,"imageCrop",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMinWidth","imageCropped"],[2,"max-width","500px",3,"src"],[1,"btn","btn-danger","btn-block",3,"click"],[4,"ngIf"],["class","col-md",4,"ngIf"],[1,"resultsTable"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"variable-textarea",2,"height","100%",3,"ngModel","ngModelChange"],[1,"variable-binding",3,"data"],[1,"col-md"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["scope","row"],[2,"max-width","100px",3,"src"],[1,"btn-group"],[1,"btn","btn-warning","actionButton",3,"click"],[1,"btn","btn-danger","actionButton",3,"click"],["target","_blank",1,"btn","btn-danger",3,"href"],[1,"overflow-auto",2,"max-height","300px"],[3,"data"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"br")(2,"br"),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return n.manageNews()}),e.TgZ(4,"div",2)(5,"button",3),e._uU(6),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5)(9,"label"),e._uU(10,"Name"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"div",5)(13,"label"),e._uU(14,"Date"),e.qZA(),e._UZ(15,"input",7),e.qZA(),e.TgZ(16,"div",5)(17,"label"),e._uU(18,"Thumbnail"),e.qZA(),e.TgZ(19,"input",8),e.NdJ("change",function(o){return n.fileChangeEvent(o)}),e.qZA()()(),e.TgZ(20,"span",9)(21,"image-cropper",10),e.NdJ("imageCropped",function(o){return n.imageCropped(o)}),e.qZA()(),e.TgZ(22,"span",9)(23,"label"),e._uU(24,"Logo Preview => "),e._UZ(25,"img",11),e.qZA()()(),e._UZ(26,"br"),e.TgZ(27,"button",12),e.NdJ("click",function(){return n.isLinkOnlyFormat=!n.isLinkOnlyFormat}),e._uU(28," Toggle format (Article or External Link) "),e.qZA(),e._UZ(29,"br"),e.YNc(30,Ke,3,2,"div",13),e.YNc(31,Xe,4,1,"div",14),e._UZ(32,"br"),e.qZA(),e.TgZ(33,"div",15)(34,"table",16)(35,"thead")(36,"tr")(37,"th",17),e._uU(38,"#"),e.qZA(),e.TgZ(39,"th",17),e._uU(40,"Name"),e.qZA(),e.TgZ(41,"th",17),e._uU(42,"Date"),e.qZA(),e.TgZ(43,"th",17),e._uU(44,"Logo"),e.qZA(),e.TgZ(45,"th",17),e._uU(46,"Article or Link"),e.qZA(),e.TgZ(47,"th",17),e._uU(48,"Manage"),e.qZA()()(),e.TgZ(49,"tbody"),e.YNc(50,nt,18,6,"tr",18),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.addNewsForm),e.xp6(2),e.Q6J("disabled",!n.addNewsForm.valid),e.xp6(1),e.hij(" ",n.mainButtonText," "),e.xp6(15),e.Q6J("imageChangedEvent",n.imageChangedEvent)("maintainAspectRatio",!1)("aspectRatio",4/3)("cropperMinWidth",128),e.xp6(4),e.Q6J("src",n.previewThumbnailUrl,e.LSH),e.xp6(5),e.Q6J("ngIf",!n.isLinkOnlyFormat),e.xp6(1),e.Q6J("ngIf",n.isLinkOnlyFormat),e.xp6(19),e.Q6J("ngForOf",n.newsArticles))},dependencies:[I.sg,I.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,u.On,Q.lF,ye],styles:[".variable-binding[_ngcontent-%COMP%], .variable-textarea[_ngcontent-%COMP%]{width:49%}.variable-textarea[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 1px 2px #00000012;min-height:420px;padding:8px;transition:all .3s ease-out}.variable-textarea[_ngcontent-%COMP%]:hover{box-shadow:0 6px 12px 3px #00000017,0 2px 3px 1px #0000000f}.variable-binding[_ngcontent-%COMP%]{display:block;float:right}.imageCrop[_ngcontent-%COMP%]{max-width:500px}.croppingArea[_ngcontent-%COMP%]{display:inline-block}"]}),r})();var ot=h(1420);function at(r,s){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.Oqu(t)}}function st(r,s){if(1&r&&(e.TgZ(0,"tr")(1,"th",19),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&r){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.uid),e.xp6(2),e.Oqu(t.uName),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function lt(r,s){if(1&r&&(e.TgZ(0,"div",18)(1,"h1",15),e._uU(2,"Action History"),e.qZA(),e.TgZ(3,"table",16)(4,"thead")(5,"tr")(6,"th",17),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",17),e._uU(9,"User ID"),e.qZA(),e.TgZ(10,"th",17),e._uU(11,"User"),e.qZA(),e.TgZ(12,"th",17),e._uU(13,"Entity"),e.qZA(),e.TgZ(14,"th",17),e._uU(15,"Action"),e.qZA(),e.TgZ(16,"th",17),e._uU(17,"Date"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,st,13,6,"tr",7),e.qZA()(),e._UZ(20,"br"),e.qZA()),2&r){const t=e.oxw();e.xp6(19),e.Q6J("ngForOf",t.actionHistory)}}function ct(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th",19),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"a",20),e._UZ(9,"img",21),e.qZA()(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"button",22),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteSponsor(o))}),e._uU(14," Delete "),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"button",22),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.setupSponsorUpdate(o))}),e._uU(17," Update "),e.qZA(),e._UZ(18,"br"),e.TgZ(19,"button",22),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.showActionHistory(o))}),e._uU(20," History "),e.qZA()()()}if(2&r){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.s9C("href",t.link,e.LSH),e.xp6(1),e.s9C("src",t.logoUrl,e.LSH),e.xp6(2),e.Oqu(t.tier)}}let Ze=new(T())({}),dt=(()=>{class r{constructor(t,n,i,o){this.sponsorService=t,this.uploadService=n,this.formBuilder=i,this.userActionService=o,this.tiers=["Lead","Platinum","Gold","Silver","Bronze","Friend"],this.imageChangedEvent="",this.addSponsorForm=this.formBuilder.group({name:[""],link:[""],logo:[""],tier:[null]}),this.mainButtonText="Add Sponsor",this.actionHistory=[]}fileChangeEvent(t){this.imageChangedEvent=t,this.logo=t.target.files[0]}imageCropped(t){this.previewLogoUrl=t.base64,this.dataUrlToFile()}addSponsorNotification(t){Ze.async(t,"Sponsor has been added","Sponsor failed to add, contact tech support")}updateSponsorNotification(t){Ze.async(t,"Sponsor has been updated","Sponsor failed to update, contact tech support")}removeSponsorNotification(t){Ze.async(t,"Sponsor has been removed","Sponsor failed to remove, contact tech support")}dataUrlToFile(){var t=this;return(0,A.Z)(function*(){const n=t.previewLogoUrl,i=t.logo.name,a=yield(yield fetch(n)).blob(),c=new File([a],i,{type:"image/webp"});t.logo=c})()}ngOnInit(){this.sponsorService.getSponsors().subscribe(t=>{this.sponsors=t.map(n=>({id:n.payload.doc.id,...n.payload.doc.data()}))})}setLogo(t){this.logo=t[0];const n=new FileReader;n.onload=i=>{this.previewLogoUrl=i.target.result},n.readAsDataURL(this.logo)}resetForm(){this.addSponsorForm.reset(),this.previewLogoUrl="",this.updateSponsorId="",this.mainButtonText="Add Sponsor",this.imageChangedEvent=null}manageSponsor(){if(this.mainButtonText.startsWith("Update")){if(null===this.logo){const o={id:this.updateSponsorId,name:this.addSponsorForm.get("name").value,link:this.addSponsorForm.get("link").value,logoUrl:this.previewLogoUrl,tier:this.addSponsorForm.get("tier").value,logo:null};let a=this.sponsorService.updateSponsor(o);this.updateSponsorNotification(a)}else{const o=this.updateSponsorId,a=this.addSponsorForm.get("name").value,c=this.addSponsorForm.get("link").value,Z=this.addSponsorForm.get("tier").value;this.uploadService.uploadFile(this.logo,"assets/logos/").then(E=>{E.ref.getDownloadURL().then(q=>{let j=this.sponsorService.updateSponsor({id:o,name:a,link:c,logoUrl:q,tier:Z,logo:null});this.updateSponsorNotification(j)})})}return void this.resetForm()}const t=this.addSponsorForm.get("name").value,n=this.addSponsorForm.get("link").value,i=this.addSponsorForm.get("tier").value;this.uploadService.uploadFile(this.logo,"assets/logos/").then(o=>{o.ref.getDownloadURL().then(a=>{let Z=this.sponsorService.addSponsor({name:t,link:n,logoUrl:a,tier:i,logo:null});this.addSponsorNotification(Z)})}),this.resetForm()}deleteSponsor(t){let n=this.sponsorService.deleteSponsor(t);this.removeSponsorNotification(n)}setupSponsorUpdate(t){this.updateSponsorId=t.id,this.addSponsorForm.get("name").setValue(t.name),this.addSponsorForm.get("link").setValue(t.link),this.addSponsorForm.get("tier").setValue(t.tier),this.previewLogoUrl=t.logoUrl,this.logo=null,this.mainButtonText="Update Sponsor",document.documentElement.scrollTop=0}showActionHistory(t){this.actionHistory=[],this.userActionService.getEntityActions(t.id).then(n=>{n.forEach(i=>{this.actionHistory.push({id:i.id,...i.data()})})}),document.documentElement.scrollTop=0}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(ot.c),e.Y36(ee),e.Y36(u.QS),e.Y36(S.X))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-sponsors"]],decls:53,vars:12,consts:[[1,"formContainer"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["type","text","formControlName","link","required","",1,"form-control"],["formControlName","tier","required","",1,"form-control"],["disabled","",3,"ngValue"],[4,"ngFor","ngForOf"],["type","file","formControlName","logo","accept","image/*",1,"form-control",3,"change"],[1,"croppingArea"],["format","webp","imageQuality","90",1,"imageCrop",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMinWidth","imageCropped"],[1,"logoPreview",3,"src"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","historyTable",4,"ngIf"],[1,"resultsTable"],[1,"tableHeading"],[1,"table"],["scope","col"],[1,"historyTable"],["scope","row"],["target","_blank",3,"href"],[1,"logoResultsPreview",3,"src"],[1,"btn","btn-danger","actionButton",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.manageSponsor()}),e.TgZ(2,"div",2)(3,"label"),e._uU(4,"Name"),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"div",2)(7,"label"),e._uU(8,"Link"),e.qZA(),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"div",2)(11,"label"),e._uU(12,"Tier"),e.qZA(),e.TgZ(13,"select",5)(14,"option",6),e._uU(15,"---- Select an option ----"),e.qZA(),e.YNc(16,at,2,1,"option",7),e.qZA()(),e.TgZ(17,"div",2)(18,"label"),e._uU(19,"Logo"),e.qZA(),e.TgZ(20,"input",8),e.NdJ("change",function(o){return n.fileChangeEvent(o)}),e.qZA(),e.TgZ(21,"span",9)(22,"image-cropper",10),e.NdJ("imageCropped",function(o){return n.imageCropped(o)}),e.qZA()(),e.TgZ(23,"span",9)(24,"label"),e._uU(25,"Logo Preview =>"),e.qZA()(),e.TgZ(26,"span",9),e._UZ(27,"img",11),e.qZA()(),e._UZ(28,"br"),e.TgZ(29,"div",2)(30,"button",12),e._uU(31),e.qZA()()()(),e.YNc(32,lt,21,1,"div",13),e.TgZ(33,"div",14)(34,"h1",15),e._uU(35,"Sponsors"),e.qZA(),e.TgZ(36,"table",16)(37,"thead")(38,"tr")(39,"th",17),e._uU(40,"#"),e.qZA(),e.TgZ(41,"th",17),e._uU(42,"ID"),e.qZA(),e.TgZ(43,"th",17),e._uU(44,"Name"),e.qZA(),e.TgZ(45,"th",17),e._uU(46,"Logo"),e.qZA(),e.TgZ(47,"th",17),e._uU(48,"Tier"),e.qZA(),e.TgZ(49,"th",17),e._uU(50,"Action"),e.qZA()()(),e.TgZ(51,"tbody"),e.YNc(52,ct,21,6,"tr",7),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.addSponsorForm),e.xp6(13),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",n.tiers),e.xp6(6),e.Q6J("imageChangedEvent",n.imageChangedEvent)("maintainAspectRatio",!1)("aspectRatio",4/3)("cropperMinWidth",128),e.xp6(5),e.s9C("src",n.previewLogoUrl,e.LSH),e.xp6(3),e.Q6J("disabled",!n.addSponsorForm.valid),e.xp6(1),e.hij(" ",n.mainButtonText," "),e.xp6(1),e.Q6J("ngIf",0!==n.actionHistory.length),e.xp6(20),e.Q6J("ngForOf",n.sponsors))},dependencies:[I.sg,I.O5,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.Q7,u.sg,u.u,ye],styles:[".resultsTable[_ngcontent-%COMP%]{max-width:100%}.logoResultsPreview[_ngcontent-%COMP%]{min-width:500px;max-width:500px}.actionButton[_ngcontent-%COMP%]{margin-bottom:1em}.logoPreview[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px;min-width:500px}.formContainer[_ngcontent-%COMP%]{padding:3em}.tableHeading[_ngcontent-%COMP%]{padding-left:.5em}.imageCrop[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px}.croppingArea[_ngcontent-%COMP%]{display:inline-block}"]}),r})();var mt=h(6341);let pt=(()=>{class r{constructor(t){this.storage=t}deleteFile(t){return this.storage.storage.refFromURL(t).delete().catch(i=>{throw i})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG($.Q1))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function gt(r,s){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.Oqu(t)}}function ht(r,s){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.Oqu(t)}}function ft(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteImage())}),e._uU(1," X "),e.qZA()}}function _t(r,s){if(1&r&&(e.TgZ(0,"tr")(1,"th",25),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&r){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.uid),e.xp6(2),e.Oqu(t.uName),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function vt(r,s){if(1&r&&(e.TgZ(0,"div",23)(1,"h1",24),e._uU(2,"Action History"),e.qZA(),e.TgZ(3,"table",20)(4,"thead")(5,"tr")(6,"th",21),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",21),e._uU(9,"User ID"),e.qZA(),e.TgZ(10,"th",21),e._uU(11,"User"),e.qZA(),e.TgZ(12,"th",21),e._uU(13,"Entity"),e.qZA(),e.TgZ(14,"th",21),e._uU(15,"Action"),e.qZA(),e.TgZ(16,"th",21),e._uU(17,"Date"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,_t,13,6,"tr",6),e.qZA()(),e._UZ(20,"br"),e.qZA()),2&r){const t=e.oxw();e.xp6(19),e.Q6J("ngForOf",t.actionHistory)}}function bt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th",25),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"img",26),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"button",27),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteMember(o))}),e._uU(19," Delete "),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"button",27),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.setupMemberUpdate(o))}),e._uU(22," Update "),e.qZA(),e._UZ(23,"br"),e.TgZ(24,"button",27),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.showActionHistory(o))}),e._uU(25," History "),e.qZA()()()}if(2&r){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.s9C("src",t.imageName,e.LSH),e.xp6(2),e.Oqu(t.position),e.xp6(2),e.Oqu(t.subteam),e.xp6(2),e.Oqu(t.major),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.year)}}let ve=new(T())({}),Ie={},wt=(()=>{class r{constructor(t,n,i,o,a){this.memberService=t,this.formBuilder=n,this.uploadService=i,this.userActionService=o,this.deleteService=a,this.imageChangedEvent="",this.addMemberForm=this.formBuilder.group({name:[""],position:[null],subteam:[null],major:[""],description:[""],year:[""],image:[""],releaseTime:[""]}),this.mainButtonText="Add Member",this.positions=["Member","Manager","Leads","Team Captain","Engineering Team Manager","Business Team Manager"],this.subteams=["Mechanical","Electrical","Software","Multi-Team","Business"],this.actionHistory=[],this.deleteFlag=null}fileChangeEvent(t){this.imageChangedEvent=t,this.image=t.target.files[0]}imageCropped(t){this.previewImgUrl=t.base64,this.dataUrlToFile()}addMemberNotification(t){ve.async(t,"Team member has been added","Team member failed to add, contact tech support")}updateMemberNotification(t){ve.async(t,"Team member has been updated","Team member failed to update, contact tech support")}removeMemberNotification(t){ve.async(t,"Team member has been removed","Team member failed to remove, contact tech support")}dataUrlToFile(){var t=this;return(0,A.Z)(function*(){const n=t.previewImgUrl,i=t.image.name,a=yield(yield fetch(n)).blob(),c=new File([a],i,{type:"image/webp"});t.image=c})()}ngOnInit(){this.memberService.getMembers().subscribe(t=>{this.members=t.map(n=>({id:n.payload.doc.id,...n.payload.doc.data()}))})}setImage(t){this.image=t[0];const n=new FileReader;n.onload=i=>{this.previewImgUrl=i.target.result},n.readAsDataURL(this.image)}resetForm(){this.addMemberForm.reset(),this.previewImgUrl="",this.updateMemberId="",this.mainButtonText="Add Member",this.imageChangedEvent=null}deleteMember(t){let n=this.memberService.deleteMember(t);this.removeMemberNotification(n)}setupMemberUpdate(t){this.updateMemberId=t.id,this.addMemberForm.get("name").setValue(t.name),this.addMemberForm.get("position").setValue(t.position),this.addMemberForm.get("subteam").setValue(t.subteam),this.addMemberForm.get("major").setValue(t.major),this.addMemberForm.get("description").setValue(t.description),this.addMemberForm.get("year").setValue(t.year),this.previewImgUrl=t.imageName,this.image=null,this.imageChangedEvent=null,this.mainButtonText="Update Member",document.documentElement.scrollTop=0}deleteImage(){this.deleteFlag=this.previewImgUrl,this.previewImgUrl="",this.image=null,this.imageChangedEvent=null,console.log(this.deleteFlag)}manageMember(){try{const t=this.addMemberForm.get("releaseTime").value;let n=null;if(""!==t&&(n=new Date(t).toUTCString()),this.mainButtonText.startsWith("Update")){if(this.deleteFlag){let q=this.deleteService.deleteFile(this.deleteFlag);this.removeMemberNotification(q)}if(null===this.image){const q={id:this.updateMemberId,name:this.addMemberForm.get("name").value,position:this.addMemberForm.get("position").value,subteam:this.addMemberForm.get("subteam").value,major:this.addMemberForm.get("major").value,description:this.addMemberForm.get("description").value,year:this.addMemberForm.get("year").value,imageName:this.previewImgUrl,image:null,releaseTime:n};let R=this.memberService.updateMember(q);this.updateMemberNotification(R)}else{const q=this.updateMemberId,R=this.addMemberForm.get("name").value,j=this.addMemberForm.get("position").value,Y=this.addMemberForm.get("subteam").value,ne=this.addMemberForm.get("major").value,X=this.addMemberForm.get("description").value,K=this.addMemberForm.get("year").value;this.uploadService.uploadFile(this.image,"assets/member_images/").then(ce=>{ce.ref.getDownloadURL().then(oe=>{let we=this.memberService.updateMember({id:q,name:R,position:j,imageName:oe,subteam:Y,major:ne,description:X,year:K,image:null,releaseTime:n});this.updateMemberNotification(we)})})}return void this.resetForm()}const i=this.addMemberForm.get("name").value,o=this.addMemberForm.get("position").value,a=this.addMemberForm.get("subteam").value,c=this.addMemberForm.get("major").value,Z=this.addMemberForm.get("description").value,E=this.addMemberForm.get("year").value;this.uploadService.uploadFile(this.image,"assets/member_images/").then(q=>{q.ref.getDownloadURL().then(R=>{let Y=this.memberService.addMember({name:i,position:o,imageName:R,subteam:a,major:c,description:Z,year:E,image:null,releaseTime:n});this.addMemberNotification(Y)})}).catch(q=>{ve.alert("Image upload failed",Ie)}),this.resetForm()}catch{ve.alert("Form submission failed",Ie)}}showActionHistory(t){this.actionHistory=[],this.userActionService.getEntityActions(t.id).then(n=>{n.forEach(i=>{this.actionHistory.push({id:i.id,...i.data()})})}),document.documentElement.scrollTop=0}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(mt.n),e.Y36(u.QS),e.Y36(ee),e.Y36(S.X),e.Y36(pt))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-team"]],decls:77,vars:15,consts:[[1,"formContainer"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["formControlName","position","required","",1,"form-control"],["disabled","",3,"ngValue"],[4,"ngFor","ngForOf"],["formControlName","subteam","required","",1,"form-control"],["type","text","formControlName","major","required","",1,"form-control"],["type","text","formControlName","description","required","",1,"form-control"],["type","number","formControlName","year","required","",1,"form-control"],["type","datetime-local","formControlName","releaseTime",1,"form-control"],["type","file","formControlName","image","accept","image/*",1,"form-control",3,"change"],[1,"croppingArea"],["format","webp","imageQuality","50",1,"imageCrop",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMinWidth","imageCropped"],[1,"imagePreview",3,"src"],["class","btn btn-warning actionButton","type","button",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","historyTable",4,"ngIf"],[1,"resultsTable"],[1,"table"],["scope","col"],["type","button",1,"btn","btn-warning","actionButton",3,"click"],[1,"historyTable"],[1,"tableHeading"],["scope","row"],[1,"imageResultsPreview",3,"src"],[1,"btn","btn-danger","actionButton",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.manageMember()}),e.TgZ(2,"div",2)(3,"label"),e._uU(4,"Name*"),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"div",2)(7,"label"),e._uU(8,"Position*"),e.qZA(),e.TgZ(9,"select",4)(10,"option",5),e._uU(11,"---- Select an option ----"),e.qZA(),e.YNc(12,gt,2,1,"option",6),e.qZA()(),e.TgZ(13,"div",2)(14,"label"),e._uU(15,"Subteam*"),e.qZA(),e.TgZ(16,"select",7)(17,"option",5),e._uU(18,"---- Select an option ----"),e.qZA(),e.YNc(19,ht,2,1,"option",6),e.qZA()(),e.TgZ(20,"div",2)(21,"label"),e._uU(22,"Major*"),e.qZA(),e._UZ(23,"input",8),e.qZA(),e.TgZ(24,"div",2)(25,"label"),e._uU(26,"Description*"),e.qZA(),e._UZ(27,"input",9),e.qZA(),e.TgZ(28,"div",2)(29,"label"),e._uU(30,"Year*"),e.qZA(),e._UZ(31,"input",10),e.qZA(),e.TgZ(32,"div",2)(33,"label"),e._uU(34,"Release Time"),e.qZA(),e._UZ(35,"input",11),e.qZA(),e.TgZ(36,"div",2)(37,"label"),e._uU(38,"Image"),e.qZA(),e.TgZ(39,"input",12),e.NdJ("change",function(o){return n.fileChangeEvent(o)}),e.qZA(),e.TgZ(40,"span",13)(41,"image-cropper",14),e.NdJ("imageCropped",function(o){return n.imageCropped(o)}),e.qZA()(),e.TgZ(42,"span",13)(43,"label"),e._uU(44,"Image Preview =>"),e.qZA()(),e.TgZ(45,"span",13),e._UZ(46,"img",15),e.qZA()(),e._UZ(47,"br"),e.YNc(48,ft,2,0,"button",16),e.TgZ(49,"div",2)(50,"button",17),e._uU(51),e.qZA()()()(),e.YNc(52,vt,21,1,"div",18),e.TgZ(53,"div",19)(54,"table",20)(55,"thead")(56,"tr")(57,"th",21),e._uU(58,"#"),e.qZA(),e.TgZ(59,"th",21),e._uU(60,"Name"),e.qZA(),e.TgZ(61,"th",21),e._uU(62,"Image"),e.qZA(),e.TgZ(63,"th",21),e._uU(64,"Position"),e.qZA(),e.TgZ(65,"th",21),e._uU(66,"Subteam"),e.qZA(),e.TgZ(67,"th",21),e._uU(68,"Major"),e.qZA(),e.TgZ(69,"th",21),e._uU(70,"Description"),e.qZA(),e.TgZ(71,"th",21),e._uU(72,"Year"),e.qZA(),e.TgZ(73,"th",21),e._uU(74,"Action"),e.qZA()()(),e.TgZ(75,"tbody"),e.YNc(76,bt,26,8,"tr",6),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.addMemberForm),e.xp6(9),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",n.positions),e.xp6(5),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",n.subteams),e.xp6(22),e.Q6J("imageChangedEvent",n.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",4/3)("cropperMinWidth",128),e.xp6(5),e.s9C("src",n.previewImgUrl,e.LSH),e.xp6(2),e.Q6J("ngIf",n.previewImgUrl),e.xp6(2),e.Q6J("disabled",!n.addMemberForm.valid),e.xp6(1),e.hij(" ",n.mainButtonText," "),e.xp6(1),e.Q6J("ngIf",0!==n.actionHistory.length),e.xp6(24),e.Q6J("ngForOf",n.members))},dependencies:[I.sg,I.O5,u._Y,u.YN,u.Kr,u.Fj,u.wV,u.EJ,u.JJ,u.JL,u.Q7,u.sg,u.u,ye],styles:[".resultsTable[_ngcontent-%COMP%]{max-width:100%}.imageResultsPreview[_ngcontent-%COMP%]{min-width:250px;max-width:250px}.actionButton[_ngcontent-%COMP%]{margin-bottom:1em}.imagePreview[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px;min-width:500px}.formContainer[_ngcontent-%COMP%]{padding:3em}.imageCrop[_ngcontent-%COMP%]{padding-top:3em;padding-bottom:3em;max-width:500px}.croppingArea[_ngcontent-%COMP%]{display:inline-block}"]}),r})();function xt(r,s){1&r&&(e.TgZ(0,"div")(1,"small",8),e._uU(2," Please enter a valid email "),e.qZA()())}let Ct=new(T())({}),Tt=(()=>{class r{constructor(t,n){this.formBuilder=t,this.authService=n,this.loginForm=this.formBuilder.group({email:["",u.kI.pattern(".+@.+..+")],password:[""]})}userLoginNotification(t){Ct.async(t,"User has logged in","User has failed login. Please check your password and email or contact tech support")}Login(){let t=this.authService.Login(this.loginForm.get("email").value,this.loginForm.get("password").value);this.userLoginNotification(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.QS),e.Y36(L))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:16,vars:3,consts:[[1,"loginFormDiv"],[1,"loginForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/register",1,"error"],["routerLink","/portal/reset-password",1,"error"],[1,"error"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.Login()}),e._UZ(2,"input",2),e.YNc(3,xt,3,0,"div",3),e._UZ(4,"input",4)(5,"br"),e.TgZ(6,"button",5),e._uU(7,"Login"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"a",6),e._uU(10,"No account? "),e.TgZ(11,"strong"),e._uU(12,"Create one here"),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"a",7),e._uU(15,"Forgot Password"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.loginForm),e.xp6(2),e.Q6J("ngIf",n.loginForm.get("email").invalid&&n.loginForm.get("email").errors&&(n.loginForm.get("email").dirty||n.loginForm.get("email").touched)),e.xp6(3),e.Q6J("disabled",!n.loginForm.valid))},dependencies:[I.O5,_.yS,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u],styles:[".loginFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.loginForm[_ngcontent-%COMP%], .resetPasswordForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:red}"]}),r})();function Zt(r,s){1&r&&(e.TgZ(0,"div")(1,"small",9),e._uU(2," Please enter a valid email "),e.qZA()())}function Ut(r,s){1&r&&(e.TgZ(0,"div")(1,"small",9),e._uU(2," Password must contain at least 6 characters "),e.qZA()())}function St(r,s){1&r&&(e.TgZ(0,"div")(1,"small",9),e._uU(2,"The passwords do not match"),e.qZA()())}function Mt(r,s){1&r&&(e.TgZ(0,"div")(1,"small",9),e._uU(2,"Sign up successfull. Please wait to be verified"),e.qZA()())}function It(r,s){1&r&&(e.TgZ(0,"div")(1,"small",9),e._uU(2,"Please use an @ucalgary.ca email address"),e.qZA()())}let Nt=new(T())({}),kt=(()=>{class r{constructor(t,n){this.formBuilder=t,this.authService=n,this.ucalgaryEmailUsed=!0,this.signUpForm=this.formBuilder.group({displayName:[""],email:["",u.kI.pattern(".+@.+.c.+")],password:["",u.kI.pattern("^.{6,}$")],passwordConfirm:[""]})}registerUserNotification(t){Nt.async(t,"User has been registered","User has failed to register, contact tech support")}SignUp(){this.signUpForm.get("password").value===this.signUpForm.get("passwordConfirm").value?this.signUpForm.get("email").value.includes("ucalgary.ca")?(this.passwordsDoNotMatch=!1,this.authService.SignUp(this.signUpForm.get("displayName").value,this.signUpForm.get("email").value,this.signUpForm.get("password").value)):this.ucalgaryEmailUsed=!1:this.passwordsDoNotMatch=!0}SignUpSuccess(){const t=JSON.parse(window.sessionStorage.getItem("User"));return null!==t&&!t.verified}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.QS),e.Y36(L))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],decls:19,vars:7,consts:[[1,"signUpFormDiv"],[1,"signUpForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Display Name","formControlName","displayName","required","",1,"form-control"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["type","password","placeholder","Confirm Password","formControlName","passwordConfirm","required","",1,"form-control"],["type","submit",1,"btn","btn-danger",3,"disabled"],["routerLink","/portal/login",1,"error"],[1,"error"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.SignUp()}),e._UZ(2,"input",2)(3,"input",3),e.YNc(4,Zt,3,0,"div",4),e._UZ(5,"input",5),e.YNc(6,Ut,3,0,"div",4),e._UZ(7,"input",6),e.YNc(8,St,3,0,"div",4),e._UZ(9,"br"),e.TgZ(10,"button",7),e._uU(11," Sign up "),e.qZA(),e._UZ(12,"br"),e.YNc(13,Mt,3,0,"div",4),e.YNc(14,It,3,0,"div",4),e.TgZ(15,"a",8),e._uU(16,"Have an account? "),e.TgZ(17,"strong"),e._uU(18,"Login here"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.signUpForm),e.xp6(3),e.Q6J("ngIf",n.signUpForm.get("email").invalid&&n.signUpForm.get("email").errors&&(n.signUpForm.get("email").dirty||n.signUpForm.get("email").touched)),e.xp6(2),e.Q6J("ngIf",n.signUpForm.get("password").invalid&&n.signUpForm.get("password").errors&&(n.signUpForm.get("password").dirty||n.signUpForm.get("password").touched)),e.xp6(2),e.Q6J("ngIf",n.passwordsDoNotMatch),e.xp6(2),e.Q6J("disabled",!n.signUpForm.valid),e.xp6(3),e.Q6J("ngIf",n.SignUpSuccess()),e.xp6(1),e.Q6J("ngIf",!n.ucalgaryEmailUsed))},dependencies:[I.O5,_.yS,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u],styles:[".signUpFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.signUpForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:red}"]}),r})(),be=(()=>{class r{constructor(t,n){this.authService=t,this.router=n}canActivate(t,n){return"User"in window.sessionStorage?JSON.parse(window.sessionStorage.getItem("User")).verified:(this.router.navigateByUrl("portal/login"),!1)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(L),e.LFG(_.F0))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Et(r,s){if(1&r&&(e.TgZ(0,"tr")(1,"th",5),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&r){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.eid),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function qt(r,s){if(1&r&&(e.TgZ(0,"div")(1,"h1",1),e._uU(2,"Action History"),e.qZA(),e.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",3),e._uU(9,"Entity"),e.qZA(),e.TgZ(10,"th",3),e._uU(11,"Entity ID"),e.qZA(),e.TgZ(12,"th",3),e._uU(13,"Action"),e.qZA(),e.TgZ(14,"th",3),e._uU(15,"Date"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,Et,11,5,"tr",4),e.qZA()(),e._UZ(18,"br"),e.qZA()),2&r){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.userActionHistory)}}function Ot(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"input",7),e.NdJ("change",function(i){const a=e.CHM(t).$implicit,c=e.oxw().$implicit,Z=e.oxw();return e.KtG(Z.updateUserPrivileges(c.id,a,i))}),e.qZA(),e._uU(2),e.qZA()}if(2&r){const t=s.$implicit,n=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.s9C("value",t),e.Q6J("checked",i.userHasPrivilege(n.id,t)),e.xp6(1),e.hij(" ",t," ")}}function Rt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"td")(1,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,o=e.oxw();return e.KtG(o.verifyUser(i.id))}),e._uU(2,"Verify"),e.qZA()()}}function Pt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th",5),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.YNc(10,Ot,3,3,"div",4),e.qZA(),e.YNc(11,Rt,3,0,"td",0),e.TgZ(12,"td")(13,"button",6),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.getUserActions(o.id))}),e._uU(14,"History"),e.qZA()(),e.TgZ(15,"td")(16,"button",6),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteUser(o.id))}),e._uU(17,"Delete"),e.qZA()()()}if(2&r){const t=s.$implicit,n=s.index,i=e.oxw();e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.displayName),e.xp6(2),e.Oqu(t.verified),e.xp6(2),e.Q6J("ngForOf",i.privileges),e.xp6(1),e.Q6J("ngIf",!t.verified)}}let Bt=(()=>{class r{constructor(t,n,i){this.userActionService=t,this.userService=n,this.authService=i,this.privileges=Object.keys(k).map(o=>k[o]),this.userActionHistory=[],this.userPrivileges=new Map}ngOnInit(){this.authService.isAdmin()&&this.userService.getUsers().subscribe(t=>{this.users=t.map(n=>{const i={id:n.payload.doc.id,...n.payload.doc.data()};return this.userPrivileges.set(i.id,i.userPrivileges),i})})}getUserActions(t){this.userActionHistory=[],this.userActionService.getUserActions(t).then(n=>{n.forEach(i=>{this.userActionHistory.push({id:i.id,...i.data()});const o=this.userActionHistory.pop();this.userService.getUser(o.uid).subscribe(a=>{const c=a.data();o.uid=c.displayName,this.userActionHistory.push(o)})})})}getPrivilegeString(t){if(1===t.length)return t[0];let n="";return t.forEach(i=>{n+=i+", "}),n}verifyUser(t){this.userService.verifyUser(t)}updateUserPrivileges(t,n,i){i.target.checked?this.userService.addUserPrivilege(t,n):this.userService.removeUserPrivilege(t,n)}deleteUser(t){this.userService.deleteUser(t)}userHasPrivilege(t,n){return this.userPrivileges.get(t).includes(n)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(S.X),e.Y36(U),e.Y36(L))},r.\u0275cmp=e.Xpm({type:r,selectors:[["admin-panel"]],decls:20,vars:2,consts:[[4,"ngIf"],[1,"tableHeading"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-danger",3,"click"],["name","i","type","checkbox",3,"value","checked","change"]],template:function(t,n){1&t&&(e.YNc(0,qt,19,1,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Users"),e.qZA(),e.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",3),e._uU(9,"Email"),e.qZA(),e.TgZ(10,"th",3),e._uU(11,"Display Name"),e.qZA(),e.TgZ(12,"th",3),e._uU(13,"Verified"),e.qZA(),e.TgZ(14,"th",3),e._uU(15,"Privileges"),e.qZA(),e.TgZ(16,"th",3),e._uU(17,"Action"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,Pt,18,6,"tr",4),e.qZA()()),2&t&&(e.Q6J("ngIf",0!==n.userActionHistory.length),e.xp6(19),e.Q6J("ngForOf",n.users))},dependencies:[I.sg,I.O5],styles:[".tableHeading[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em}"]}),r})();function Ht(r,s){1&r&&(e.TgZ(0,"div",4)(1,"button",10),e._uU(2,"Update"),e.qZA()())}function Lt(r,s){if(1&r&&(e.TgZ(0,"tr")(1,"th",14),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&r){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.eid),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function zt(r,s){if(1&r&&(e.TgZ(0,"div")(1,"h1",1),e._uU(2,"Your Action History"),e.qZA(),e.TgZ(3,"table",11)(4,"thead")(5,"tr")(6,"th",12),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",12),e._uU(9,"Entity"),e.qZA(),e.TgZ(10,"th",12),e._uU(11,"Entity ID"),e.qZA(),e.TgZ(12,"th",12),e._uU(13,"Action"),e.qZA(),e.TgZ(14,"th",12),e._uU(15,"Date"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,Lt,11,5,"tr",13),e.qZA()()()),2&r){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.userActions)}}function Jt(r,s){if(1&r&&(e.TgZ(0,"tr")(1,"th",14),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&r){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.eName),e.xp6(2),e.Oqu(t.eid),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.dateTime)}}function Dt(r,s){if(1&r&&(e.TgZ(0,"div")(1,"h1",1),e._uU(2,"Your Action History"),e.qZA(),e.TgZ(3,"table",11)(4,"thead")(5,"tr")(6,"th",12),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",12),e._uU(9,"Entity"),e.qZA(),e.TgZ(10,"th",12),e._uU(11,"Entity ID"),e.qZA(),e.TgZ(12,"th",12),e._uU(13,"Action"),e.qZA(),e.TgZ(14,"th",12),e._uU(15,"Date"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,Jt,11,5,"tr",13),e.qZA()()()),2&r){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.userActions)}}function Qt(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"admin-panel"),e.qZA())}let Ue=new(T())({}),Wt=(()=>{class r{constructor(t,n,i,o){this.authService=t,this.userService=n,this.userActionService=i,this.formBuilder=o,this.userForm=this.formBuilder.group({displayName:"",email:"",password:""}),this.userActions=[],this.user=JSON.parse(window.sessionStorage.getItem("User"))}updateUserPasswordNotification(t){Ue.async(t,"User password has been updated","User password has failed to update. Please use at least 6 characters or contact tech support")}updateUserNameNotification(t){Ue.async(t,"User Name has been updated","User Name has failed to update, contact tech support")}updateUserEmailNotification(t){Ue.async(t,"User email has been updated","User email has failed to update. Please use @ucalgary.ca email or contact tech support")}ngOnInit(){this.userActionService.getUserActions(this.user.id).then(t=>{t.forEach(n=>{this.userActions.push({id:n.id,...n.data()})})}),this.userForm.get("displayName").setValue(this.user.displayName),this.userForm.get("email").setValue(this.user.email)}getAuth(){return this.authService}getUser(){return JSON.parse(window.sessionStorage.getItem("User"))}manageUser(){const t=JSON.parse(window.sessionStorage.getItem("User"));if(this.userForm.get("displayName").value!==t.displayName&&""!==this.userForm.get("displayName").value){t.displayName=this.userForm.get("displayName").value;let n=this.userService.updateUser(t);this.updateUserNameNotification(n)}if(this.userForm.get("email").value!==t.email){let n=this.authService.ChangeEmail(this.userForm.get("email").value);this.updateUserEmailNotification(n)}if(""!==this.userForm.get("password").value&&this.userForm.get("password").value!==t.password){console.log(t.password),console.log(this.userForm.get("password").value),t.password=this.userForm.get("password").value;let n=this.authService.ChangePassword(this.userForm.get("password").value);this.updateUserPasswordNotification(n)}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(L),e.Y36(U),e.Y36(S.X),e.Y36(u.QS))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-profile"]],decls:22,vars:7,consts:[[1,"profileContainer"],[1,"tableHeading"],[1,"userForm"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","displayName","required","",1,"form-control",3,"placeholder"],["type","text","formControlName","email","required","",1,"form-control",3,"placeholder"],["type","password","formControlName","password","required","",1,"form-control"],["class","mb-3",4,"ngIf"],[4,"ngIf"],["type","submit",1,"btn","btn-danger"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h1",1),e._uU(3,"Profile"),e.qZA(),e.TgZ(4,"div",2)(5,"form",3),e.NdJ("ngSubmit",function(){return n.manageUser()}),e.TgZ(6,"div",4)(7,"label"),e._uU(8,"Display Name"),e.qZA(),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"div",4)(11,"label"),e._uU(12,"Email"),e.qZA(),e._UZ(13,"input",6),e.qZA(),e.TgZ(14,"div",4)(15,"label"),e._uU(16,"Password"),e.qZA(),e._UZ(17,"input",7),e.qZA(),e.YNc(18,Ht,3,0,"div",8),e.qZA()(),e.YNc(19,zt,18,1,"div",9),e.qZA(),e.YNc(20,Dt,18,1,"div",9),e.YNc(21,Qt,2,0,"div",9),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",n.userForm),e.xp6(4),e.s9C("placeholder",n.getUser().displayName),e.xp6(4),e.s9C("placeholder",n.getUser().email),e.xp6(5),e.Q6J("ngIf",n.userForm.get("displayName").dirty||n.userForm.get("email").dirty||n.userForm.get("password").dirty),e.xp6(1),e.Q6J("ngIf",n.getAuth().isAdmin()),e.xp6(1),e.Q6J("ngIf",!n.getAuth().isAdmin()),e.xp6(1),e.Q6J("ngIf",n.getAuth().isAdmin()))},dependencies:[I.sg,I.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,Bt],styles:[".profileContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%}.tableHeading[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em}.userForm[_ngcontent-%COMP%]{max-width:80%;padding-left:1em}"]}),r})();function $t(r,s){1&r&&(e.TgZ(0,"div")(1,"small",7),e._uU(2," Please enter a valid email "),e.qZA()())}function jt(r,s){if(1&r&&(e.TgZ(0,"small",7),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}let Vt=new(T())({});const Kt=[{path:"",component:f,children:[{path:"manage-news",component:rt,canActivate:[be]},{path:"manage-sponsors",component:dt,canActivate:[be]},{path:"manage-team",component:wt,canActivate:[be]},{path:"manage-inventory",component:Ge,canActivate:[be]},{path:"login",component:Tt},{path:"register",component:kt},{path:"reset-password",component:(()=>{class r{constructor(t,n){this.authService=t,this.formBuilder=n,this.isMessageVisible=!1,this.message="Please check your email to reset your password",this.resetForm=this.formBuilder.group({email:["",u.kI.pattern(".+@.+..+")]})}showMessage(){this.isMessageVisible=!0}resetPasswordNotification(t){Vt.async(t,"Password has been reset","Password has failed to reset. Please contact tech support")}resetPasswordSubmit(){let t=this.authService.ResetPassword(this.resetForm.get("email").value);this.resetPasswordNotification(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(L),e.Y36(u.QS))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-reset-password"]],decls:11,vars:4,consts:[[1,"resetFormDiv"],[1,"resetPasswordForm",3,"formGroup","ngSubmit"],["type","text","placeholder","Email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],["type","submit",1,"btn","btn-danger",3,"disabled","click"],["class","error",4,"ngIf"],["routerLink","/portal/login",1,"backToLogin"],[1,"error"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.resetPasswordSubmit()}),e._UZ(2,"input",2),e.YNc(3,$t,3,0,"div",3),e._UZ(4,"br"),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.showMessage()}),e._uU(6," Reset Password "),e.qZA(),e.YNc(7,jt,2,1,"small",5),e._UZ(8,"br"),e.TgZ(9,"a",6),e._uU(10,"Back to Login"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.resetForm),e.xp6(2),e.Q6J("ngIf",n.resetForm.get("email").invalid&&n.resetForm.get("email").errors&&(n.resetForm.get("email").dirty||n.resetForm.get("email").touched)),e.xp6(2),e.Q6J("disabled",!n.resetForm.valid),e.xp6(2),e.Q6J("ngIf",n.isMessageVisible))},dependencies:[I.O5,_.yS,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u],styles:[".resetFormDiv[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;height:80vh;text-align:center}.resetPasswordForm[_ngcontent-%COMP%]{width:35%}.btn[_ngcontent-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%], .backToLogin[_ngcontent-%COMP%]{color:red}"]}),r})()},{path:"user",component:Wt,canActivate:[be]},{path:"**",redirectTo:"user",pathMatch:"full"}]}];let Xt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[_.Bz.forChild(Kt),_.Bz]}),r})();h(5083),h(6028),h(7597),h(9709);let en=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r,bootstrap:[f]}),r.\u0275inj=e.cJS({imports:[I.ez,Xt,u.UX,u.u5,V.JF,Q.JP.forRoot(),Re]}),r})()},4847:W=>{self,W.exports=(()=>{"use strict";var G={d:(g,m)=>{for(var b in m)G.o(m,b)&&!G.o(g,b)&&Object.defineProperty(g,b,{enumerable:!0,get:m[b]})},o:(g,m)=>Object.prototype.hasOwnProperty.call(g,m),r:g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})}},h={};function I(g){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}function Q(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}G.r(h),G.d(h,{default:()=>te});var u={maxNotifications:10,animationDuration:300,position:"bottom-right",labels:{tip:"Tip",info:"Info",success:"Success",warning:"Attention",alert:"Error",async:"Loading",confirm:"Confirmation required",confirmOk:"OK",confirmCancel:"Cancel"},icons:{tip:"question-circle",info:"info-circle",success:"check-circle",warning:"exclamation-circle",alert:"exclamation-triangle",async:"cog fa-spin",confirm:"exclamation-triangle",prefix:"<i class='fa fas fa-fw fa-",suffix:"'></i>",enabled:!0},replacements:{tip:null,info:null,success:null,warning:null,alert:null,async:null,"async-block":null,modal:null,confirm:null,general:{"<script>":"","<\/script>":""}},messages:{tip:"",info:"",success:"Action has been succeeded",warning:"",alert:"Action has been failed",confirm:"This action can't be undone. Continue?",async:"Please, wait...","async-block":"Loading"},formatError:function(g){if(g.response){if(!g.response.data)return"500 API Server Error";if(g.response.data.errors)return g.response.data.errors.map(function(m){return m.detail}).join("<br>");if(g.response.statusText)return"".concat(g.response.status," ").concat(g.response.statusText,": ").concat(g.response.data)}return g.message?g.message:g},durations:{global:5e3,success:null,info:null,tip:null,warning:null,alert:null},minDurations:{async:1e3,"async-block":1e3}},_=function(){function g(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;Q(this,g),Object.assign(this,this.defaultsDeep(x,l))}var b;return(b=[{key:"icon",value:function(l){return this.icons.enabled?"".concat(this.icons.prefix).concat(this.icons[l]).concat(this.icons.suffix):""}},{key:"label",value:function(l){return this.labels[l]}},{key:"duration",value:function(l){var x=this.durations[l];return null===x?this.durations.global:x}},{key:"toSecs",value:function(l){return"".concat(l/1e3,"s")}},{key:"applyReplacements",value:function(l,x){if(!l)return this.messages[x]||"";for(var P=0,M=["general",x];P<M.length;P++){var y=M[P];if(this.replacements[y])for(var C in this.replacements[y])l=l.replace(C,this.replacements[y][C])}return l}},{key:"override",value:function(l){return l?new g(l,this):this}},{key:"defaultsDeep",value:function(l,x){var P={};for(var M in l)P[M]=x.hasOwnProperty(M)?"object"===I(l[M])&&null!==l[M]?this.defaultsDeep(l[M],x[M]):x[M]:l[M];return P}}])&&function V(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(g.prototype,b),g}(),A="awn",e={popup:"".concat(A,"-popup"),toast:"".concat(A,"-toast"),btn:"".concat(A,"-btn"),confirm:"".concat(A,"-confirm")},k={prefix:e.toast,klass:{label:"".concat(e.toast,"-label"),content:"".concat(e.toast,"-content"),icon:"".concat(e.toast,"-icon"),progressBar:"".concat(e.toast,"-progress-bar"),progressBarPause:"".concat(e.toast,"-progress-bar-paused")},ids:{container:"".concat(e.toast,"-container")}},F={prefix:e.popup,klass:{buttons:"".concat(A,"-buttons"),button:e.btn,successBtn:"".concat(e.btn,"-success"),cancelBtn:"".concat(e.btn,"-cancel"),title:"".concat(e.popup,"-title"),body:"".concat(e.popup,"-body"),content:"".concat(e.popup,"-content"),dotAnimation:"".concat(e.popup,"-loading-dots")},ids:{wrapper:"".concat(e.popup,"-wrapper"),confirmOk:"".concat(e.confirm,"-ok"),confirmCancel:"".concat(e.confirm,"-cancel")}},N={klass:{hiding:"".concat(A,"-hiding")},lib:A};var L=function(){function g(l,x,P,M,y){(function(C,J){if(!(C instanceof J))throw new TypeError("Cannot call a class as a function")})(this,g),this.newNode=document.createElement("div"),x&&(this.newNode.id=x),P&&(this.newNode.className=P),M&&(this.newNode.style.cssText=M),this.parent=l,this.options=y}var b;return b=[{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"insert",value:function(){return this.beforeInsert(),this.el=this.parent.appendChild(this.newNode),this.afterInsert(),this}},{key:"replace",value:function(l){var x=this;if(this.getElement())return this.beforeDelete().then(function(){return x.updateType(l.type),x.parent.replaceChild(l.newNode,x.el),x.el=x.getElement(l.newNode),x.afterInsert(),x})}},{key:"beforeDelete",value:function(){var l=this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el,P=0;return this.start&&(P=this.options.minDurations[this.type]+this.start-Date.now())<0&&(P=0),new Promise(function(M){setTimeout(function(){x.classList.add(N.klass.hiding),setTimeout(M,l.options.animationDuration)},P)})}},{key:"delete",value:function(){var l=this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return this.getElement(x)?this.beforeDelete(x).then(function(){x.remove(),l.afterDelete()}):null}},{key:"afterDelete",value:function(){}},{key:"getElement",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return l?document.getElementById(l.id):null}},{key:"addEvent",value:function(l,x){this.el.addEventListener(l,x)}},{key:"toggleClass",value:function(l){this.el.classList.toggle(l)}},{key:"updateType",value:function(l){this.type=l,this.duration=this.options.duration(this.type)}}],b&&function U(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(g.prototype,b),g}();var H=function(){function g(l,x){(function(P,M){if(!(P instanceof M))throw new TypeError("Cannot call a class as a function")})(this,g),this.callback=l,this.remaining=x,this.resume()}var b;return(b=[{key:"pause",value:function(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"resume",value:function(){var l=this;this.paused=!1,this.start=new Date,window.clearTimeout(this.timerId),this.timerId=window.setTimeout(function(){window.clearTimeout(l.timerId),l.callback()},this.remaining)}},{key:"toggle",value:function(){this.paused?this.resume():this.pause()}}])&&function B(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(g.prototype,b),g}();function z(g){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}function d(g,m){return(d=Object.setPrototypeOf||function(b,l){return b.__proto__=l,b})(g,m)}function v(g,m){if(m&&("object"===z(m)||"function"==typeof m))return m;if(void 0!==m)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(g)}function f(g){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})(g)}var w=function(g){!function(y,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(C&&C.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),C&&d(y,C)}(M,g);var b,l,x,P=(l=M,x=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,C=f(l);if(x){var J=f(this).constructor;y=Reflect.construct(C,arguments,J)}else y=C.apply(this,arguments);return v(this,y)});function M(y,C,J,le){var ue;return function(me,de){if(!(me instanceof de))throw new TypeError("Cannot call a class as a function")}(this,M),(ue=P.call(this,le,"".concat(k.prefix,"-").concat(Math.floor(Date.now()-100*Math.random())),"".concat(k.prefix," ").concat(k.prefix,"-").concat(C),"animation-duration: ".concat(J.toSecs(J.animationDuration),";"),J)).updateType(C),ue.setInnerHtml(y),ue}return b=[{key:"setInnerHtml",value:function(y){"alert"===this.type&&y&&(y=this.options.formatError(y)),y=this.options.applyReplacements(y,this.type),this.newNode.innerHTML='<div class="awn-toast-wrapper">'.concat(this.progressBar).concat(this.label,'<div class="').concat(k.klass.content,'">').concat(y,'</div><span class="').concat(k.klass.icon,'">').concat(this.options.icon(this.type),"</span></div>")}},{key:"beforeInsert",value:function(){var y=this;if(this.parent.childElementCount>=this.options.maxNotifications){var C=Array.from(this.parent.getElementsByClassName(k.prefix));this.delete(C.find(function(J){return!y.isDeleted(J)}))}}},{key:"afterInsert",value:function(){var y=this;if("async"==this.type)return this.start=Date.now();if(this.addEvent("click",function(){return y.delete()}),!(this.duration<=0)){this.timer=new H(function(){return y.delete()},this.duration);for(var C=0,J=["mouseenter","mouseleave"];C<J.length;C++)this.addEvent(J[C],function(){y.isDeleted()||(y.toggleClass(k.klass.progressBarPause),y.timer.toggle())})}}},{key:"isDeleted",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el).classList.contains(N.klass.hiding)}},{key:"progressBar",get:function(){return this.duration<=0||"async"===this.type?"":"<div class='".concat(k.klass.progressBar,"' style=\"animation-duration:").concat(this.options.toSecs(this.duration),';"></div>')}},{key:"label",get:function(){return'<b class="'.concat(k.klass.label,'">').concat(this.options.label(this.type),"</b>")}}],b&&function p(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(M.prototype,b),M}(L);function T(g){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}function O(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function D(g,m){return(D=Object.setPrototypeOf||function(b,l){return b.__proto__=l,b})(g,m)}function $(g,m){if(m&&("object"===T(m)||"function"==typeof m))return m;if(void 0!==m)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(g)}function ee(g){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})(g)}var ae=function(g){!function(y,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(C&&C.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),C&&D(y,C)}(M,g);var b,l,x,P=(l=M,x=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,C=ee(l);if(x){var J=ee(this).constructor;y=Reflect.construct(C,arguments,J)}else y=C.apply(this,arguments);return $(this,y)});function M(y){var C,J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"modal",le=arguments.length>2?arguments[2]:void 0,ue=arguments.length>3?arguments[3]:void 0,me=arguments.length>4?arguments[4]:void 0;O(this,M);var de="animation-duration: ".concat(le.toSecs(le.animationDuration),";");return(C=P.call(this,document.body,F.ids.wrapper,null,de,le))[F.ids.confirmOk]=ue,C[F.ids.confirmCancel]=me,C.className="".concat(F.prefix,"-").concat(J),["confirm","async-block","modal"].includes(J)||(J="modal"),C.updateType(J),C.setInnerHtml(y),C.insert(),C}return(b=[{key:"setInnerHtml",value:function(y){var C=this.options.applyReplacements(y,this.type);switch(this.type){case"confirm":var J=["<button class='".concat(F.klass.button," ").concat(F.klass.successBtn,"'id='").concat(F.ids.confirmOk,"'>").concat(this.options.labels.confirmOk,"</button>")];!1!==this[F.ids.confirmCancel]&&J.push("<button class='".concat(F.klass.button," ").concat(F.klass.cancelBtn,"'id='").concat(F.ids.confirmCancel,"'>").concat(this.options.labels.confirmCancel,"</button>")),C="".concat(this.options.icon(this.type),"<div class='").concat(F.klass.title,"'>").concat(this.options.label(this.type),'</div><div class="').concat(F.klass.content,'">').concat(C,"</div><div class='").concat(F.klass.buttons," ").concat(F.klass.buttons,"-").concat(J.length,"'>").concat(J.join(""),"</div>");break;case"async-block":C="".concat(C,'<div class="').concat(F.klass.dotAnimation,'"></div>')}this.newNode.innerHTML='<div class="'.concat(F.klass.body," ").concat(this.className,'">').concat(C,"</div>")}},{key:"keyupListener",value:function(y){if("async-block"===this.type)return y.preventDefault();switch(y.code){case"Escape":y.preventDefault(),this.delete();case"Tab":if(y.preventDefault(),"confirm"!==this.type||!1===this[F.ids.confirmCancel])return!0;var C=this.okBtn;y.shiftKey?document.activeElement.id==F.ids.confirmOk&&(C=this.cancelBtn):document.activeElement.id!==F.ids.confirmCancel&&(C=this.cancelBtn),C.focus()}}},{key:"afterInsert",value:function(){var y=this;switch(this.listener=function(C){return y.keyupListener(C)},window.addEventListener("keydown",this.listener),this.type){case"async-block":this.start=Date.now();break;case"confirm":this.okBtn.focus(),this.addEvent("click",function(C){if("BUTTON"!==C.target.nodeName)return!1;y.delete(),y[C.target.id]&&y[C.target.id]()});break;default:document.activeElement.blur(),this.addEvent("click",function(C){C.target.id===y.newNode.id&&y.delete()})}}},{key:"afterDelete",value:function(){window.removeEventListener("keydown",this.listener)}},{key:"okBtn",get:function(){return document.getElementById(F.ids.confirmOk)}},{key:"cancelBtn",get:function(){return document.getElementById(F.ids.confirmCancel)}}])&&function S(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(M.prototype,b),M}(L);function se(g){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}function ie(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}var te=function(){function g(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ie(this,g),this.options=new _(l)}var b;return(b=[{key:"tip",value:function(l,x){return this._addToast(l,"tip",x).el}},{key:"info",value:function(l,x){return this._addToast(l,"info",x).el}},{key:"success",value:function(l,x){return this._addToast(l,"success",x).el}},{key:"warning",value:function(l,x){return this._addToast(l,"warning",x).el}},{key:"alert",value:function(l,x){return this._addToast(l,"alert",x).el}},{key:"async",value:function(l,x,P,M,y){var C=this._addToast(M,"async",y);return this._afterAsync(l,x,P,y,C)}},{key:"confirm",value:function(l,x,P,M){return this._addPopup(l,"confirm",M,x,P)}},{key:"asyncBlock",value:function(l,x,P,M,y){var C=this._addPopup(M,"async-block",y);return this._afterAsync(l,x,P,y,C)}},{key:"modal",value:function(l,x,P){return this._addPopup(l,x,P)}},{key:"closeToasts",value:function(){for(var l=this.container;l.firstChild;)l.removeChild(l.firstChild)}},{key:"_addPopup",value:function(l,x,P,M,y){return new ae(l,x,this.options.override(P),M,y)}},{key:"_addToast",value:function(l,x,P,M){P=this.options.override(P);var y=new w(l,x,P,this.container);return M?M instanceof ae?M.delete().then(function(){return y.insert()}):M.replace(y):y.insert()}},{key:"_afterAsync",value:function(l,x,P,M,y){return l.then(this._responseHandler(x,"success",M,y),this._responseHandler(P,"alert",M,y))}},{key:"_responseHandler",value:function(l,x,P,M){var y=this;return function(C){switch(se(l)){case"undefined":case"string":y._addToast("alert"===x?l||C:l,x,P,M);break;default:M.delete().then(function(){l&&l(C)})}}}},{key:"_createContainer",value:function(){return new L(document.body,k.ids.container,"awn-".concat(this.options.position)).insert().el}},{key:"container",get:function(){return document.getElementById(k.ids.container)||this._createContainer()}}])&&function re(g,m){for(var b=0;b<m.length;b++){var l=m[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}(g.prototype,b),g}();return h})()},6028:()=>{!function(W){W.languages.typescript=W.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),W.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete W.languages.typescript.parameter,delete W.languages.typescript["literal-property"];var G=W.languages.extend("typescript",{});delete G["class-name"],W.languages.typescript["class-name"].inside=G,W.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:G}}}}),W.languages.ts=W.languages.typescript}(Prism)},9709:()=>{!function(){if(!(typeof Prism>"u"||typeof document>"u")&&document.querySelector){var N,W="line-numbers",G="linkable-line-numbers",h=/\n(?!$)/g,e=!0;Prism.plugins.lineHighlight={highlightLines:function(U,L,B){var H=(L="string"==typeof L?L:U.getAttribute("data-line")||"").replace(/\s+/g,"").split(",").filter(Boolean),z=+U.getAttribute("data-line-offset")||0,d=(function(){if(typeof N>"u"){var U=document.createElement("div");U.style.fontSize="13px",U.style.lineHeight="1.5",U.style.padding="0",U.style.border="0",U.innerHTML="&nbsp;<br />&nbsp;",document.body.appendChild(U),N=38===U.offsetHeight,document.body.removeChild(U)}return N}()?parseInt:parseFloat)(getComputedStyle(U).lineHeight),v=Prism.util.isActive(U,W),f=U.querySelector("code"),w=v?U:f||U,T=[],O=f.textContent.match(h),S=O?O.length+1:1,D=f&&w!=f?function _(N,U){var L=getComputedStyle(N),B=getComputedStyle(U);function H(z){return+z.substr(0,z.length-2)}return U.offsetTop+H(B.borderTopWidth)+H(B.paddingTop)-H(L.paddingTop)}(U,f):0;H.forEach(function(ae){var se=ae.split("-"),ie=+se[0],re=+se[1]||ie;if(!((re=Math.min(S+z,re))<ie)){var te=U.querySelector('.line-highlight[data-range="'+ae+'"]')||document.createElement("div");if(T.push(function(){te.setAttribute("aria-hidden","true"),te.setAttribute("data-range",ae),te.className=(B||"")+" line-highlight"}),v&&Prism.plugins.lineNumbers){var g=Prism.plugins.lineNumbers.getLine(U,ie),m=Prism.plugins.lineNumbers.getLine(U,re);if(g){var b=g.offsetTop+D+"px";T.push(function(){te.style.top=b})}if(m){var l=m.offsetTop-g.offsetTop+m.offsetHeight+"px";T.push(function(){te.style.height=l})}}else T.push(function(){te.setAttribute("data-start",String(ie)),re>ie&&te.setAttribute("data-end",String(re)),te.style.top=(ie-z-1)*d+D+"px",te.textContent=new Array(re-ie+2).join(" \n")});T.push(function(){te.style.width=U.scrollWidth+"px"}),T.push(function(){w.appendChild(te)})}});var $=U.id;if(v&&Prism.util.isActive(U,G)&&$){Q(U,G)||T.push(function(){U.classList.add(G)});var ee=parseInt(U.getAttribute("data-start")||"1");I(".line-numbers-rows > span",U).forEach(function(ae,se){var ie=se+ee;ae.onclick=function(){e=!1,location.hash=$+"."+ie,setTimeout(function(){e=!0},1)}})}return function(){T.forEach(V)}}};var F=0;Prism.hooks.add("before-sanity-check",function(N){var U=N.element.parentElement;if(A(U)){var L=0;I(".line-highlight",U).forEach(function(B){L+=B.textContent.length,B.parentNode.removeChild(B)}),L&&/^(?: \n)+$/.test(N.code.slice(-L))&&(N.code=N.code.slice(0,-L))}}),Prism.hooks.add("complete",function N(U){var L=U.element.parentElement;if(A(L)){clearTimeout(F);var B=Prism.plugins.lineNumbers,H=U.plugins&&U.plugins.lineNumbers;Q(L,W)&&B&&!H?Prism.hooks.add("line-numbers",N):(Prism.plugins.lineHighlight.highlightLines(L)(),F=setTimeout(k,1))}}),window.addEventListener("hashchange",k),window.addEventListener("resize",function(){I("pre").filter(A).map(function(U){return Prism.plugins.lineHighlight.highlightLines(U)}).forEach(V)})}function I(N,U){return Array.prototype.slice.call((U||document).querySelectorAll(N))}function Q(N,U){return N.classList.contains(U)}function V(N){N()}function A(N){return!(!N||!/pre/i.test(N.nodeName)||!(N.hasAttribute("data-line")||N.id&&Prism.util.isActive(N,G)))}function k(){var N=location.hash.slice(1);I(".temporary.line-highlight").forEach(function(z){z.parentNode.removeChild(z)});var U=(N.match(/\.([\d,-]+)$/)||[,""])[1];if(U&&!document.getElementById(N)){var L=N.slice(0,N.lastIndexOf(".")),B=document.getElementById(L);B&&(B.hasAttribute("data-line")||B.setAttribute("data-line",""),Prism.plugins.lineHighlight.highlightLines(B,U,"temporary ")(),e&&document.querySelector(".temporary.line-highlight").scrollIntoView())}}}()},7597:()=>{!function(){if(!(typeof Prism>"u"||typeof document>"u")){var W="line-numbers",G=/\n(?!$)/g,h=Prism.plugins.lineNumbers={getLine:function(u,_){if("PRE"===u.tagName&&u.classList.contains(W)){var A=u.querySelector(".line-numbers-rows");if(A){var e=parseInt(u.getAttribute("data-start"),10)||1,k=e+(A.children.length-1);return _<e&&(_=e),_>k&&(_=k),A.children[_-e]}}},resize:function(u){I([u])},assumeViewportIndependence:!0},V=void 0;window.addEventListener("resize",function(){h.assumeViewportIndependence&&V===window.innerWidth||(V=window.innerWidth,I(Array.prototype.slice.call(document.querySelectorAll("pre."+W))))}),Prism.hooks.add("complete",function(u){if(u.code){var _=u.element,A=_.parentNode;if(A&&/pre/i.test(A.nodeName)&&!_.querySelector(".line-numbers-rows")&&Prism.util.isActive(_,W)){_.classList.remove(W),A.classList.add(W);var F,e=u.code.match(G),N=new Array((e?e.length+1:1)+1).join("<span></span>");(F=document.createElement("span")).setAttribute("aria-hidden","true"),F.className="line-numbers-rows",F.innerHTML=N,A.hasAttribute("data-start")&&(A.style.counterReset="linenumber "+(parseInt(A.getAttribute("data-start"),10)-1)),u.element.appendChild(F),I([A]),Prism.hooks.run("line-numbers",u)}}}),Prism.hooks.add("line-numbers",function(u){u.plugins=u.plugins||{},u.plugins.lineNumbers=!0})}function I(u){if(0!=(u=u.filter(function(A){var e=function Q(u){return u?window.getComputedStyle?getComputedStyle(u):u.currentStyle||null:null}(A),k=e["white-space"];return"pre-wrap"===k||"pre-line"===k})).length){var _=u.map(function(A){var e=A.querySelector("code"),k=A.querySelector(".line-numbers-rows");if(e&&k){var F=A.querySelector(".line-numbers-sizer"),N=e.textContent.split(G);F||((F=document.createElement("span")).className="line-numbers-sizer",e.appendChild(F)),F.innerHTML="0",F.style.display="block";var U=F.getBoundingClientRect().height;return F.innerHTML="",{element:A,lines:N,lineHeights:[],oneLinerHeight:U,sizer:F}}}).filter(Boolean);_.forEach(function(A){var e=A.sizer,k=A.lines,F=A.lineHeights,N=A.oneLinerHeight;F[k.length-1]=void 0,k.forEach(function(U,L){if(U&&U.length>1){var B=e.appendChild(document.createElement("span"));B.style.display="block",B.textContent=U}else F[L]=N})}),_.forEach(function(A){for(var e=A.sizer,k=A.lineHeights,F=0,N=0;N<k.length;N++)void 0===k[N]&&(k[N]=e.children[F++].getBoundingClientRect().height)}),_.forEach(function(A){var e=A.sizer,k=A.element.querySelector(".line-numbers-rows");e.style.display="none",e.innerHTML="",A.lineHeights.forEach(function(F,N){k.children[N].style.height=F+"px"})})}}}()},5083:W=>{var h=function(I){var Q=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,V=0,u={},_={manual:I.Prism&&I.Prism.manual,disableWorkerMessageHandler:I.Prism&&I.Prism.disableWorkerMessageHandler,util:{encode:function p(d){return d instanceof A?new A(d.type,p(d.content),d.alias):Array.isArray(d)?d.map(p):d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(p){return Object.prototype.toString.call(p).slice(8,-1)},objId:function(p){return p.__id||Object.defineProperty(p,"__id",{value:++V}),p.__id},clone:function p(d,v){var f,w;switch(v=v||{},_.util.type(d)){case"Object":if(w=_.util.objId(d),v[w])return v[w];for(var T in v[w]=f={},d)d.hasOwnProperty(T)&&(f[T]=p(d[T],v));return f;case"Array":return w=_.util.objId(d),v[w]?v[w]:(v[w]=f=[],d.forEach(function(O,S){f[S]=p(O,v)}),f);default:return d}},getLanguage:function(p){for(;p;){var d=Q.exec(p.className);if(d)return d[1].toLowerCase();p=p.parentElement}return"none"},setLanguage:function(p,d){p.className=p.className.replace(RegExp(Q,"gi"),""),p.classList.add("language-"+d)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(f){var p=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(f.stack)||[])[1];if(p){var d=document.getElementsByTagName("script");for(var v in d)if(d[v].src==p)return d[v]}return null}},isActive:function(p,d,v){for(var f="no-"+d;p;){var w=p.classList;if(w.contains(d))return!0;if(w.contains(f))return!1;p=p.parentElement}return!!v}},languages:{plain:u,plaintext:u,text:u,txt:u,extend:function(p,d){var v=_.util.clone(_.languages[p]);for(var f in d)v[f]=d[f];return v},insertBefore:function(p,d,v,f){var w=(f=f||_.languages)[p],T={};for(var O in w)if(w.hasOwnProperty(O)){if(O==d)for(var S in v)v.hasOwnProperty(S)&&(T[S]=v[S]);v.hasOwnProperty(O)||(T[O]=w[O])}var D=f[p];return f[p]=T,_.languages.DFS(_.languages,function($,ee){ee===D&&$!=p&&(this[$]=T)}),T},DFS:function p(d,v,f,w){w=w||{};var T=_.util.objId;for(var O in d)if(d.hasOwnProperty(O)){v.call(d,O,d[O],f||O);var S=d[O],D=_.util.type(S);"Object"!==D||w[T(S)]?"Array"===D&&!w[T(S)]&&(w[T(S)]=!0,p(S,v,O,w)):(w[T(S)]=!0,p(S,v,null,w))}}},plugins:{},highlightAll:function(p,d){_.highlightAllUnder(document,p,d)},highlightAllUnder:function(p,d,v){var f={callback:v,container:p,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};_.hooks.run("before-highlightall",f),f.elements=Array.prototype.slice.apply(f.container.querySelectorAll(f.selector)),_.hooks.run("before-all-elements-highlight",f);for(var T,w=0;T=f.elements[w++];)_.highlightElement(T,!0===d,f.callback)},highlightElement:function(p,d,v){var f=_.util.getLanguage(p),w=_.languages[f];_.util.setLanguage(p,f);var T=p.parentElement;T&&"pre"===T.nodeName.toLowerCase()&&_.util.setLanguage(T,f);var S={element:p,language:f,grammar:w,code:p.textContent};function D(ee){S.highlightedCode=ee,_.hooks.run("before-insert",S),S.element.innerHTML=S.highlightedCode,_.hooks.run("after-highlight",S),_.hooks.run("complete",S),v&&v.call(S.element)}if(_.hooks.run("before-sanity-check",S),(T=S.element.parentElement)&&"pre"===T.nodeName.toLowerCase()&&!T.hasAttribute("tabindex")&&T.setAttribute("tabindex","0"),!S.code)return _.hooks.run("complete",S),void(v&&v.call(S.element));if(_.hooks.run("before-highlight",S),S.grammar)if(d&&I.Worker){var $=new Worker(_.filename);$.onmessage=function(ee){D(ee.data)},$.postMessage(JSON.stringify({language:S.language,code:S.code,immediateClose:!0}))}else D(_.highlight(S.code,S.grammar,S.language));else D(_.util.encode(S.code))},highlight:function(p,d,v){var f={code:p,grammar:d,language:v};if(_.hooks.run("before-tokenize",f),!f.grammar)throw new Error('The language "'+f.language+'" has no grammar.');return f.tokens=_.tokenize(f.code,f.grammar),_.hooks.run("after-tokenize",f),A.stringify(_.util.encode(f.tokens),f.language)},tokenize:function(p,d){var v=d.rest;if(v){for(var f in v)d[f]=v[f];delete d.rest}var w=new F;return N(w,w.head,p),k(p,w,d,w.head,0),function L(p){for(var d=[],v=p.head.next;v!==p.tail;)d.push(v.value),v=v.next;return d}(w)},hooks:{all:{},add:function(p,d){var v=_.hooks.all;v[p]=v[p]||[],v[p].push(d)},run:function(p,d){var v=_.hooks.all[p];if(v&&v.length)for(var w,f=0;w=v[f++];)w(d)}},Token:A};function A(p,d,v,f){this.type=p,this.content=d,this.alias=v,this.length=0|(f||"").length}function e(p,d,v,f){p.lastIndex=d;var w=p.exec(v);if(w&&f&&w[1]){var T=w[1].length;w.index+=T,w[0]=w[0].slice(T)}return w}function k(p,d,v,f,w,T){for(var O in v)if(v.hasOwnProperty(O)&&v[O]){var S=v[O];S=Array.isArray(S)?S:[S];for(var D=0;D<S.length;++D){if(T&&T.cause==O+","+D)return;var $=S[D],ee=$.inside,ae=!!$.lookbehind,se=!!$.greedy,ie=$.alias;if(se&&!$.pattern.global){var re=$.pattern.toString().match(/[imsuy]*$/)[0];$.pattern=RegExp($.pattern.source,re+"g")}for(var te=$.pattern||$,g=f.next,m=w;g!==d.tail&&!(T&&m>=T.reach);m+=g.value.length,g=g.next){var b=g.value;if(d.length>p.length)return;if(!(b instanceof A)){var x,l=1;if(se){if(!(x=e(te,m,p,ae))||x.index>=p.length)break;var C=x.index,P=x.index+x[0].length,M=m;for(M+=g.value.length;C>=M;)M+=(g=g.next).value.length;if(m=M-=g.value.length,g.value instanceof A)continue;for(var y=g;y!==d.tail&&(M<P||"string"==typeof y.value);y=y.next)l++,M+=y.value.length;l--,b=p.slice(m,M),x.index-=m}else if(!(x=e(te,0,b,ae)))continue;var J=x[0],le=b.slice(0,C=x.index),ue=b.slice(C+J.length),me=m+b.length;T&&me>T.reach&&(T.reach=me);var de=g.prev;if(le&&(de=N(d,de,le),m+=le.length),U(d,de,l),g=N(d,de,new A(O,ee?_.tokenize(J,ee):J,ie,J)),ue&&N(d,g,ue),l>1){var _e={cause:O+","+D,reach:me};k(p,d,v,g.prev,m,_e),T&&_e.reach>T.reach&&(T.reach=_e.reach)}}}}}}function F(){var p={value:null,prev:null,next:null},d={value:null,prev:p,next:null};p.next=d,this.head=p,this.tail=d,this.length=0}function N(p,d,v){var f=d.next,w={value:v,prev:d,next:f};return d.next=w,f.prev=w,p.length++,w}function U(p,d,v){for(var f=d.next,w=0;w<v&&f!==p.tail;w++)f=f.next;d.next=f,f.prev=d,p.length-=w}if(I.Prism=_,A.stringify=function p(d,v){if("string"==typeof d)return d;if(Array.isArray(d)){var f="";return d.forEach(function(D){f+=p(D,v)}),f}var w={type:d.type,content:p(d.content,v),tag:"span",classes:["token",d.type],attributes:{},language:v},T=d.alias;T&&(Array.isArray(T)?Array.prototype.push.apply(w.classes,T):w.classes.push(T)),_.hooks.run("wrap",w);var O="";for(var S in w.attributes)O+=" "+S+'="'+(w.attributes[S]||"").replace(/"/g,"&quot;")+'"';return"<"+w.tag+' class="'+w.classes.join(" ")+'"'+O+">"+w.content+"</"+w.tag+">"},!I.document)return I.addEventListener&&(_.disableWorkerMessageHandler||I.addEventListener("message",function(p){var d=JSON.parse(p.data),v=d.language,w=d.immediateClose;I.postMessage(_.highlight(d.code,_.languages[v],v)),w&&I.close()},!1)),_;var B=_.util.currentScript();function H(){_.manual||_.highlightAll()}if(B&&(_.filename=B.src,B.hasAttribute("data-manual")&&(_.manual=!0)),!_.manual){var z=document.readyState;"loading"===z||"interactive"===z&&B&&B.defer?document.addEventListener("DOMContentLoaded",H):window.requestAnimationFrame?window.requestAnimationFrame(H):window.setTimeout(H,16)}return _}(typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{});W.exports&&(W.exports=h),typeof global<"u"&&(global.Prism=h),h.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},h.languages.markup.tag.inside["attr-value"].inside.entity=h.languages.markup.entity,h.languages.markup.doctype.inside["internal-subset"].inside=h.languages.markup,h.hooks.add("wrap",function(I){"entity"===I.type&&(I.attributes.title=I.content.replace(/&amp;/,"&"))}),Object.defineProperty(h.languages.markup.tag,"addInlined",{value:function(Q,V){var u={};u["language-"+V]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:h.languages[V]},u.cdata=/^<!\[CDATA\[|\]\]>$/i;var _={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:u}};_["language-"+V]={pattern:/[\s\S]+/,inside:h.languages[V]};var A={};A[Q]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return Q}),"i"),lookbehind:!0,greedy:!0,inside:_},h.languages.insertBefore("markup","cdata",A)}}),Object.defineProperty(h.languages.markup.tag,"addAttribute",{value:function(I,Q){h.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+I+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[Q,"language-"+Q],inside:h.languages[Q]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),h.languages.html=h.languages.markup,h.languages.mathml=h.languages.markup,h.languages.svg=h.languages.markup,h.languages.xml=h.languages.extend("markup",{}),h.languages.ssml=h.languages.xml,h.languages.atom=h.languages.xml,h.languages.rss=h.languages.xml,function(I){var Q=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;I.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+Q.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+Q.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+Q.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+Q.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:Q,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},I.languages.css.atrule.inside.rest=I.languages.css;var V=I.languages.markup;V&&(V.tag.addInlined("style","css"),V.tag.addAttribute("style","css"))}(h),h.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},h.languages.javascript=h.languages.extend("clike",{"class-name":[h.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),h.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,h.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:h.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:h.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:h.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:h.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:h.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),h.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:h.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),h.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),h.languages.markup&&(h.languages.markup.tag.addInlined("script","javascript"),h.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),h.languages.js=h.languages.javascript,function(){if(!(typeof h>"u"||typeof document>"u")){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var u={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},_="data-src-status",A="loading",e="loaded",F="pre[data-src]:not(["+_+'="'+e+'"]):not(['+_+'="'+A+'"])';h.hooks.add("before-highlightall",function(B){B.selector+=", "+F}),h.hooks.add("before-sanity-check",function(B){var H=B.element;if(H.matches(F)){B.code="",H.setAttribute(_,A);var z=H.appendChild(document.createElement("CODE"));z.textContent="Loading\u2026";var p=H.getAttribute("data-src"),d=B.language;if("none"===d){var v=(/\.(\w+)$/.exec(p)||[,"none"])[1];d=u[v]||v}h.util.setLanguage(z,d),h.util.setLanguage(H,d);var f=h.plugins.autoloader;f&&f.loadLanguages(d),function N(B,H,z){var p=new XMLHttpRequest;p.open("GET",B,!0),p.onreadystatechange=function(){4==p.readyState&&(p.status<400&&p.responseText?H(p.responseText):z(p.status>=400?function(B,H){return"\u2716 Error "+B+" while fetching file: "+H}(p.status,p.statusText):"\u2716 Error: File does not exist or is empty"))},p.send(null)}(p,function(w){H.setAttribute(_,e);var T=function U(B){var H=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(B||"");if(H){var z=Number(H[1]),d=H[3];return H[2]?d?[z,Number(d)]:[z,void 0]:[z,z]}}(H.getAttribute("data-range"));if(T){var O=w.split(/\r\n?|\n/g),S=T[0],D=T[1]??O.length;S<0&&(S+=O.length),S=Math.max(0,Math.min(S-1,O.length)),D<0&&(D+=O.length),D=Math.max(0,Math.min(D,O.length)),w=O.slice(S,D).join("\n"),H.hasAttribute("data-start")||H.setAttribute("data-start",String(S+1))}z.textContent=w,h.highlightElement(z)},function(w){H.setAttribute(_,"failed"),z.textContent=w})}}),h.plugins.fileHighlight={highlight:function(H){for(var d,z=(H||document).querySelectorAll(F),p=0;d=z[p++];)h.highlightElement(d)}};var L=!1;h.fileHighlight=function(){L||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),L=!0),h.plugins.fileHighlight.highlight.apply(this,arguments)}}}()}}]);